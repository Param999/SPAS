var UserStoreClient,DataLab,ExperimentEditorTemplates,V,C,DataLabViews,__extends,
ExperimentEditor;(function(n){"use strict";n.Shell.Namespace.define("waz",{Resources:
n.Resources.getResources("Microsoft.MetaAnalytics.Web.Scripts.waz.ClientResources")})}
)(this),function(n,t){"use strict";var i={complete:t.getContentUrl("Content/Images/icon-status-complete-16-idl.png"),
stopped:t.getContentUrl("Content/Images/icon-status-stopped-16-idl.png"),paused:
t.getContentUrl("Content/Images/icon-status-paused-16-idl.png"),running:t.getContentUrl(
"Content/Images/icon-status-running-16-idl.png"),warning:t.getContentUrl("Content/Images/icon-status-warning-16-idl.png"),
bang:t.getContentUrl("Content/Images/icon-status-bang-16-idl.png"),spinner:t.getContentUrl(
"Content/Images/icon-status-status-dots-anim-16.gif"),question:t.getContentUrl("Content/Images/icon-status-question-16-idl.png"),
expanded:t.getContentUrl("Content/Images/icon-chevron-expanded.png"),collapsed:t.
getContentUrl("Content/Images/icon-chevron-collapsed.png"),directory:t.getContentUrl(
"Content/Images/Directory.png"),file:t.getContentUrl("Content/Images/File.png"),
statusInfo:t.getContentUrl("Content/Images/statusbar-info.gif"),statusWarning:t.
getContentUrl("Content/Images/statusbar-warning.gif"),statusError:t.getContentUrl(
"Content/Images/statusbar-error.gif"),statusAlert:t.getContentUrl("Content/Images/statusbar-info-alert.png"),
fullSprite:t.getContentUrl("Content/Images/icons-gridview-status.png")};n.Namespace.
define("waz",{ImageResources:i})}(Shell,this.fx.resources),function(n,t,i){"use strict";
function o(r,u){var e=[{name:"B",localizedName:i.bytes,localizedLongName:i.bytesLong},
{name:"KB",localizedName:i.kiloBytes,localizedLongName:i.kiloBytesLong},{name:"MB",
localizedName:i.megaBytes,localizedLongName:i.megaBytesLong},{name:"GB",localizedName:
i.gigaBytes,localizedLongName:i.gigaBytesLong},{name:"TB",localizedName:i.teraBytes,
localizedLongName:i.teraBytesLong},{name:"PT",localizedName:i.petaBytes,localizedLongName:
i.petaBytesLong},{name:"EB",localizedName:i.exaBytes,localizedLongName:i.exaBytesLong},
{name:"ZB",localizedName:i.zettaBytes,localizedLongName:i.zettaBytesLong},{name:
"YB",localizedName:i.yottaBytes,localizedLongName:i.yottaBytesLong}],o=u&&t.map(
e,function(n){return n.name}).indexOf(u)||0,f=o,s=r||0;return r&&r>0&&!n.isNaN(r)&&
parseInt(r,10)!==0&&(f=Math.floor(Math.log(r)/Math.log(1024)),s=parseFloat((r/Math.
pow(1024,f)).toFixed(2)),f=o+f,f=f<e.length?f:e.length-1),{value:s,unit:e[f].localizedName,
unitLong:e[f].localizedLongName}}function s(n){return t.fxGridFormatter.defaultAll(
function(t){var i=o(t,n);return"{0} {1}".format(i.value,i.unit)})}function v(t,i,
r){var e=i.dataItem,u=e["aux-extension-name"]?Shell.extensionIndex[e["aux-extension-name"]]:
n.cdm.currentExtension,f;return u&&u.gridView&&u.gridView.formatters&&(f=u.gridView.
formatters[r],f)?f.formatter(e[f.field]||t,i):null}function h(n,t){var i=t.dataItem;
return i.SubscriptionId||i.subscriptionId||i.SubscriptionID||n}function c(t,i){var
r=h(t,i),u=n.Exp.Rdfe.getSubscription(r);return(u?u.SubscriptionName+r:t)||"-"}function l(
i,r){var u=r.dataItem,e=u["aux-extension-name"]?Shell.extensionIndex[u["aux-extension-name"]]:
n.cdm.currentExtension,o=r.column.displayStatus,f=t.isFunction(o)?o:null;return f||
(f=t.isFunction(e.displayStatus)?e.displayStatus:null),f(u)}function a(n,t){var i=
l(n,t);return i&&i.text}var u,f,r,e;u={subscription:c,status:a};f={subscription:
c,status:a};r={link:function(n,i){var u=i.dataItem,r=i.column,f=r.isLinkEnabled;
return t.isFunction(f)&&!f(u)?t.fxGridFormatter.text(u[r.field],i):t.fxGridFormatter.
url({url:u[r.field],text:n,target:r.target},i)},image:function(){return t.fxGridFormatter.
icon.apply(this,arguments)},date:function(n){return n.getDate()+"/"+(n.getMonth(
)+1)+"/"+n.getFullYear()},navigation:function(i,r){var u=r.dataItem,a=r.column,v=
a.canNavigate,f=!0,y=u.subscriptionId||u.SubscriptionId||u.SubscriptionID,e,o,s,
p,h,c,l;return(e=u["aux-extension-name"]?Shell.extensionIndex[u["aux-extension-name"]]:
n.cdm.currentExtension,o=u.type||u.Type,c=n.Exp.TypeRegistry.getCanNavigate(e.name,
o),y&&!n.Exp.Rdfe.isSubscriptionEnabled(y)?f=!1:typeof u.canNavigate=="boolean"?
f=u.canNavigate:typeof v=="function"?f=v.apply(this,arguments):typeof c=="function"&&
(f=c(u)),!f)?"<span>"+t.fxGridFormatter.text(i,r)+"<\/span>":(s=a.navigationField,
p=s?u[s]:u.name||u.Name,h=Shell.UI.Navigation.calculateNavigationPath({extension:
e,name:p,type:o,dataContext:u,expandPath:!0}),r.column.type==="navigationLink")?
(l=t.fxGridFormatter.text(i,r),"<span><a href='"+t.fxGridFormatter.code(h,r)+"' title='"+
l+"'>"+l+"<\/a><\/span>"):"<a href='"+t.fxGridFormatter.code(h,r)+"'><span>"+t.fxGridFormatter.
text(i,r)+"<\/span><\/a>"},subscription:function(i,r){var f=v(i,r,"subscription"),
e=h(i,r),u=n.Exp.Rdfe.getSubscription(e);return f?f:(u=n.Exp.Rdfe.getSubscription(
e),u)?!Shell.Environment.getIsOnPremMode()&&!n.Exp.Rdfe.isSubscriptionEnabled(u)?
"{0}<a href='{1}?id={2}' target='_blank'>{3}<\/a?".format(t.fxGridFormatter.icon(
n.waz.ImageResources.warning),n.Shell.Environment.getAccountUrl(),u.SubscriptionID,
Shell.Utilities.htmlEncode(u.SubscriptionName)):Shell.Utilities.htmlEncode(u.SubscriptionName):
i||"-"},location:t.fxGridFormatter.defaultAll(function(t,r){var u=r.dataItem,h=u.
affinityGroup||u.AffinityGroup,f=t||u.location||u.Location,a=u.subscriptionId||u.
SubscriptionId,c="",e=f||" - ",o,s,l,v,y=!1;return u.locationDisplayText?Shell.Utilities.
htmlEncode(u.locationDisplayText||" - "):((h||f)&&a&&(o=n.Exp.Rdfe.getSubscription(
a),o&&(h&&(s=n.Exp.Utilities.find(o.affinityGroups,function(n){return n.Name&&n.
Name.toLowerCase()===h.toLowerCase()}),s&&(c=s.Label,f=s.Location)),f&&(l=n.Exp.
Utilities.find(o.locations,function(n){return n.Name&&n.Name.toLowerCase()===f.toLowerCase(
)}),l&&(e=l.DisplayName,y=!0)))),!y&&f&&(e=i[f.toLowerCase()]||e),v=c&&e?"{0} ({1})".
format(c,e):e,Shell.Utilities.htmlEncode(v||" - "))}),status:function(t,i){var r=
Array.prototype.slice.call(arguments,1),u=l(t,i);return n.waz.formatters.statusIcon.
apply(this,[u].concat(r))},statusIcon:function(i){var r=Array.prototype.slice.call(
arguments,1);return i.url?"<div class='fx-grid-sprite'><img src='"+Shell.Utilities.
attributeEncode(i.url)+"' alt='' /><\/div>"+t.fxGridFormatter.text.apply(this,[i.
text].concat(r)):i.iconName!=="spinner"?"<div class='fx-grid-sprite "+Shell.Utilities.
attributeEncode(i.iconName)+"'><img src='"+Shell.Utilities.attributeEncode(n.waz.
ImageResources.fullSprite)+"' alt='"+i.iconName+"' /><\/div>"+t.fxGridFormatter.
text.apply(this,[i.text].concat(r)):n.waz.formatters.icon.apply(this,[i].concat(
r))},icon:function(i){var r=Array.prototype.slice.call(arguments,1);return i&&i.
iconName&&!i.url&&(i.url=n.waz.ImageResources[i.iconName]),t.fxGridFormatter.icon.
apply(this,[i].concat(r))},bytesFormatter:s("B"),megaBytesFormatter:s("MB")};e={
getFileSizeFormat:o};t.each(r,function(n,i){var e=u[n],o=f[n];(e||o)&&(r[n]=t.fxGridFormatter.
bundle(i,e,o))});n.Shell.Namespace.define("waz",{formatters:r});n.Shell.Namespace.
define("waz.formatters",{utilities:e})}(this,this.jQuery,this.waz.Resources),function(
n,t,i,r){"use strict";var u=n.waz.formatters,e={name:{cssClass:"name"},text:{cssClass:
"text"},link:{cssClass:"link",formatter:u.link},image:{cssClass:"image",formatter:
u.image},date:{cssClass:"date",formatter:t.fxGridFormatter.date("G")},navigation:
{cssClass:"waz-grid-navigation",formatter:u.navigation},subscription:{cssClass:"subscription",
formatter:u.subscription},location:{cssClass:"location",formatter:u.location},status:
{cssClass:"status",formatter:u.status},navigationLink:{cssClass:"waz-grid-navigation-link",
formatter:u.navigation}},f=i.prototype;t.widgetReference("waz.wazDataGrid",i,{options:
{pagerOptions:{pageSize:25},resizable:!0,selectFirstRowByDefault:!1,id:"id"},_dataChangeHandler:
null,_doneInitialRender:!1,_create:function(){var n=f._create.apply(this,arguments);
return this.element.addClass("waz-grid"),n},_destroy:function(){this.element.removeClass(
"waz-grid");this._dataChangeHandler&&(t([this.getDataSource().items]).off("arrayChange",
this._dataChangeHandler),this._dataChangeHandler=null);this._super()},_selectAndExpandRow:
function(n,i){var u=this.options.rowMetadata,r=null;n&&(r=t.grep(this.getAllRowMetadata(
),function(t){return t.dataItem===n})[0],r||(r=this._getRowMetadata(n)),t.observable(
r).setProperty("selected",!0),i&&(t.observable(r).setProperty("expanded",!0),this.
_triggerRowExpand(r)));this._trigger("rowSelect",null,{selected:r})},_selectFirstRowIfNoSelection:
function(){var r=this.getSelectedRows().length>0,n=this.getDataSource().items,i;
r||(n[0]?(i=this.options.expandFirstRowByDefault&&t.grep(this.getAllRowMetadata(
),function(n){return n.expanded}).length===0,this._selectAndExpandRow(n[0],i)):this.
_selectAndExpandRow(null))},_onRowMetadataConfiguredAfterDataChange:function(){this.
options.selectFirstRowByDefault&&this._doneInitialRender&&this._selectFirstRowIfNoSelection(
)},_normalizeColumns:function(n){return t.each(n,function(n,i){var u=e[i.type],f,
o;u&&(f=u.cssClass,o=(f||"")+(f?" ":"")+(i.cssClass||""),o&&(i.cssClass=o),t.each(
u,function(n,t){i[n]===r&&(i[n]=t)}))}),f._normalizeColumns.apply(this,arguments)}
,_onInitialRender:function(){var n=f._onInitialRender.apply(this,arguments);return this.
_doneInitialRender=!0,this.options.selectFirstRowByDefault&&this._selectFirstRowIfNoSelection(
),n}})}(this,jQuery,jQuery.shell.shellDataGrid),function(n){"use strict";n.Shell.
Namespace.define("ExtensionCore",{Resources:n.Resources.getResources("Microsoft.MetaAnalytics.Web.ClientResources")})}
(this),function(n,t,i){"use strict";var r={areEqual:function(n,i,r){var f,e,o,u;
if(typeof r=="undefined"&&(r=!0),n===null)return i===null;if(i===null)return!1;for(
u in n)if(n.hasOwnProperty(u)){if(f=n[u],o=typeof f,typeof i[u]!==o)return!1;e=i[
u];switch(o){case"object":if(r&&!t.Exp.Utilities.areEqual(f,e))return!1;break;case"function":
break;default:if(f!==e)return!1}}for(u in i)if(i.hasOwnProperty(u)&&typeof n[u]==
"undefined"&&typeof i[u]!="undefined")return!1;return!0},diffArray:function(n,i,
r,u,f,e,o){o=o||{};for(var v=n.length,y=i.length,s=0,h=0,c,l,a;s<v||h<y;)s>=v?(u&&
u(i[h]),h++):h>=y?(f&&f(n[s]),s++):(c=n[s],l=i[h],a=r(c,l,o),a>0?(u&&u(l),h++):a<
0?(f&&f(c),s++):(e&&!t.Exp.Utilities.areEqual(c,l,o.recursive)&&e(c,l),s++,h++))}
,visitor:function(i,r,u){var s=typeof i,f=!1,e,h,o;if(s!=="undefined"&&i!==null)
{if(f=!1,u=u||0,u++,n.isArray(i)){for(e=0,h=i.length;e<h;e++)if(f=r(i[e]),f||t.Exp.
Utilities.visitor(i[e],r,u),f)break}else if(s==="object"&&(u===1&&(f=r(i)),!f))for(
o in i)if(i.hasOwnProperty(o)){if(o.match(/^jQuery\d+$/))break;if(f=t.Exp.Utilities.
visitor(i[o],r,u),f)break}return f}},getChildProperty:function(n,t){if(!t)return n;
for(var i=n,u=t.split("."),r;;){if(r=u.shift(),!r)break;i=i[r]}return i},assert:
function(n,t){if(!n)throw t;},requires:function(n,t){if(n!==i&&n!==null)return n;
throw t;},optional:function(n,t){return n!==i&&n!==null?n:t},isNullOrUndefined:function(
n){return n===null||n===i},deleteIfNull:function(n,t){n&&n[t]===null&&delete n[t]}
,deleteIfNullOrEmpty:function(t,i){r.deleteIfNull(t,i);t&&n.isArray(t[i])&&!t[i].
length&&delete t[i]},find:function(n,t){for(var i=0,r=n.length;i<r;i++)if(t.call(
n[i],n[i]))return n[i];return null},hasDifferences:function(n,t){try{return JSON.
stringify(n)!==JSON.stringify(t)}catch(i){return!0}},getXhrError:function(n){try{
return JSON.parse(n.responseText).message}catch(t){return null}},waitForDeferreds:
function(t){var i=n.Deferred(),r=0;return n.isArray(t)||(t=[]),t.length||i.resolve(
),n.each(t,function(n,u){u.always(function(){r+=1;r>=t.length&&i.resolve()})}),i.
promise()},download:function(i){var r,u,f,e,o=n.Deferred();if(u=function(){var i;
try{i=JSON.parse(n(this).contents().find("body").text())}catch(r){i=null;t.Shell.
Diagnostics.Log.error("Exp.Utilities.download","Response could not be parsed from iFrame content: {0}".
format(r))}i&&i.ErrorMessage&&(o.reject(i),e())},f=function(){e()},e=function(){
r.off("load",u).off("remove",f)},t.Shell.Utilities.download(i),r=n("iframe[src='"+
i+"']"),r[0])r.on("load",u).on("remove",f);return o.promise()},failProgressOperation:
function(n,t,i){var r=Shell.UI.InteractionSeverity.error,u=Shell.UI.InteractionBehavior.
ok,f=i?{detailData:i}:null;n.complete(t,r,u,f)},failProgressOperationStep:function(
n,t,i){var r=Shell.UI.InteractionSeverity.error,u=Shell.UI.InteractionBehavior.ok,
f=i?{detailData:i}:null;n.completePreviousStep(t,r,u,f)},completeProgressOperation:
function(n,t,i){var r=Shell.UI.InteractionSeverity.information,u=Shell.UI.InteractionBehavior.
ok,f=i?{detailData:i}:null;n.complete(t,r,u,f)},completeProgressOperationWithWarning:
function(n,t,i){var r=Shell.UI.InteractionSeverity.warning,u=Shell.UI.InteractionBehavior.
ok,f=i?{detailData:i}:null;n.complete(t,r,u,f)},completeProgressOperationStep:function(
n,t,i){var r=Shell.UI.InteractionSeverity.information,u=Shell.UI.InteractionBehavior.
ok,f=i?{detailData:i}:null;n.completePreviousStep(t,r,u,f)},NotificationOperation:
function(n){var i=n.initialText,u=n.failureText,f=n.successText,t=new Shell.UI.ProgressOperation(
i);this.progressOperation=t;this.create=function(){Shell.UI.ProgressOperations.add(
t)};this.complete=function(n){r.completeProgressOperation(t,f,n)};this.fail=function(
n){r.failProgressOperation(t,u,n)}},NotificationStep:function(n){var i=n.initialText,
u=n.failureText,f=n.successText,e=n.operationFailureText,o=n.operationSuccessText,
t=n.progressOperation;this.progressOperation=t;this.create=function(){t.hasBeenAdded(
)||Shell.UI.ProgressOperations.add(t);t.addStep(i)};this.complete=function(n){r.
completeProgressOperationStep(t,f,n)};this.fail=function(n){r.failProgressOperationStep(
t,u,n)};this.completeParentOperation=function(){r.completeProgressOperation(t,o)}
;this.failParentOperation=function(){r.failProgressOperation(t,e)}}};n.extend(!0,
t,{Exp:{Utilities:r}})}(jQuery,this),function(n,t){"use strict";function i(){n.views.
helpers&&n.views.helpers.getBetaSignUpUrl||n.views.helpers({getBetaSignUpUrl:t.Shell.
Environment.getBetaSignUpUrl})}Shell.Namespace.define("Exp.Utilities.Beta",{isBetaEnabled:
function(n,t,r,u,f){i();var l=Shell.Environment.getBetaFeatures()[n],c=Exp.Rdfe.
getFeatureInAccount(l),s,h=Shell.extensionIndex[n],e,o;return c?(s=c.Status.toLowerCase(
),s==="active"?(e=h&&h.dataIsLoaded,o=e?t:r):s==="pending"?(e=!1,o=f):s==="available"&&
(e=!1,o=u)):(e=h&&h.dataIsLoaded,o=e?t:r),{enabled:e,description:o}}})}(jQuery,this),
function(n,t,i){"use strict";function st(){return{collection:{},add:function(n){
var i=t.Exp.Data.makeKey(n.typeName,n.itemName);this.collection[i]=n},clearETag:
function(n,r){var f=t.Exp.Data.makeKey(n,r),u=this.collection[f];u!==i&&(u.value.
eTag="")},expire:function(n,r){var f=t.Exp.Data.makeKey(n,r),u=this.collection[f];
u!==i&&(u.expiry=(new Date).getTime()-1,this.collection[f]=u)},clear:function(n,
r){var f=t.Exp.Data.makeKey(n,r),u=this.collection[f];u!==i&&(u.isDisposed=!0,u.
pollingTask&&t.Exp.Scheduler.deleteTask(u.pollingTask),delete this.collection[f])}
,localGet:function(n,r,u){var e=t.Exp.Data.makeKey(n,r),f=this.collection[e];if(
f===i)if(u)f={typeName:n,itemName:r},this.collection[e]=f;else return null;return f}
,get:function(i,u,f){var o,s=f.url,h=f.ajaxData,a=f.ajaxHeaders,p=null,v=null,e=
this.localGet(i,u);if(e)if(e.value&&s===e.sourceUrl&&n.param(h||{})===n.param(e.
ajaxData||{})){if(f.allowExpired||!e.expiry||e.expiry>(new Date).getTime())return f.
forceCacheRefresh&&(t.Exp.Scheduler.deleteTask(e.pollingTask),g.apply(e.pollingTask,
e.pollingTask.args.concat([!0]))),n.Deferred().resolve(u,e.value).promise();if(e.
currentFetchDeferred&&!f.forceCacheRefresh)return e.currentFetchDeferred.promise(
);Shell.Diagnostics.Log.writeEntry("Exp.Data.ItemExpired","Cached "+i.toLowerCase(
)+" expired: '"+u+"'",Shell.Diagnostics.LogEntryLevel.verbose);p=e.value.eTag;v=
e.value.tag}else e.debouncedFetch&&(t.clearTimeout(e.debouncedFetch.timeoutId),e.
debouncedFetch(),e.debouncedFetch=null),e.sourceUrl=s,e.ajaxData=h,e.ajaxHeaders=
a,e.preserveNewRowsOrdering=f.preserveNewRowsOrdering,e.value&&(v=e.value.tag);else
e={typeName:"Data",itemName:u,sourceUrl:s,ajaxData:h,ajaxHeaders:a,preserveNewRowsOrdering:
f.preserveNewRowsOrdering},r.add(e);if(f.fetchStartListener)n(e).on("fetchStart",
f.fetchStartListener);return e.debouncedFetch?o=e.currentFetchedDeferred:(e.currentFetchDeferred=
o=n.Deferred(),e.pollingTask&&t.Exp.Scheduler.deleteTask(e.pollingTask),e.debouncedFetch=
function(){e.debouncedFetch=null;n(e).triggerHandler("fetchStart",{dataSetName:u,
promise:o.promise(),isClientInitiated:!0});w(u,p,s,v,h,a,function(t){c(e)||(l(e,
o),e.value?y(e,t):(n.extend(e,t),ct(e)),nt(e),o.resolve(u,e.value))},function(n,
t,i){c(e)||(l(e,o),o.reject(u,n,t,i))})},e.debouncedFetch.timeoutId=t.setTimeout(
e.debouncedFetch,0)),o.promise()}}}function h(n){var i;return i=typeof n=="string"?
t.Exp.Data.getLocalDataSet(n):n.uri?t.Exp.Data.getLocalDataSet(n.uri):n,i[i.collectionPropertyName||
"data"]||i}function ht(n){for(var t,i,f,r,u=0,e=n.length;u<e;u++){t=n[u];for(i in
t)t.hasOwnProperty(i)&&(f=t[i],typeof f=="string"&&(r=/^\/Date\(([0-9]+)\)\/$/.exec(
f),r&&r[1]&&(t[i]=new Date(parseInt(r[1],10)))))}}function ct(n){var i=n.value,r=
n.pollingTask={name:"poll data set: "+n.itemName,scheduledTask:g,recurring:!1,isAsync:
!0,delayInMs:i.fastPollingInterval,args:[n],silent:!0,pollCount:0};n.currentFetchDeferred||
t.Exp.Scheduler.scheduleTask(r)}function lt(n,t){return function(){t.setProperty(
Shell.UI.Navigation.WellKnownPropertyNames.count,n.length)}}function k(r){for(var
u,e,o,s,h,f,c,l=0,v=Shell.extensions.length;l<v;l++)(u=Shell.extensions[l],u.dataIsLoaded)||
a(u,r)&&at(u)&&(u.dataIsLoaded=!0,t.Exp.Drawer.refreshExtensionMenuItemStatus(u.
name),u.name==="SqlAzureExtension"&&t.Exp.Drawer.refreshExtensionMenuItemStatus(
"MobileServicesExtension"),u.onDataLoadComplete&&(Shell.Diagnostics.Telemetry.timerStart(
"cdm.onDataLoadComplete"),Shell.Internal.callPartnerScript(u,u.onDataLoadComplete,
u),Shell.Diagnostics.Telemetry.timerStopAndLog("cdm.onDataLoadComplete",u.name+".onDataLoadComplete returned after")),
u.includeInAllView&&(c=Shell.extensionIndex.All,c&&c.updateViewData&&c.updateViewData(
u)),u.virtualNavigationalViewModelDataSetInfo?et(u,u.virtualNavigationalViewModelDataSetInfo):
(f=Shell.UI.Navigation.getObservableExtensionBadge(u.name),f===null?Shell.Diagnostics.
Log.writeEntry("Exp.Data.NoNavigationItem","No navigation item found for extension '"+
u.name+"'",Shell.Diagnostics.LogEntryLevel.error):f.setProperty(Shell.UI.Navigation.
WellKnownPropertyNames.showSpinner,!1),o=u.navigationalViewModel&&u.navigationalViewModel.
uri,e=o&&t.Exp.Data.getLocalDataSet(o),f&&e&&e.data&&(n(t.Exp.Data).triggerHandler(
"navigationalViewModelDataSetLoad",{extension:u,dataSetName:o}),s=t.Exp.Utilities.
getChildProperty(e.data,u.navigationalViewModelPath),h=s.length,h!==i&&(h>0&&Shell.
Extensions.Current.showCategory(!0,u.name),n([s]).bind("arrayChange.aux-navCount",
lt(s,f)),f.setProperty(Shell.UI.Navigation.WellKnownPropertyNames.count,h)))),u===
t.cdm.currentExtension&&t.Shell.UI.Navigation.navigate(t.location.hash))}function d(
n){for(var t,u,r,i=0,f=Shell.extensions.length;i<f;i++)t=Shell.extensions[i],a(t,
n)&&(u=n,Shell.Diagnostics.Log.writeEntry("Exp.Data.ExtensionCouldNotBeLoaded","Extension '"+
t.name+"' cannot be loaded due to an error loading data set from '"+u+"'.",Shell.
Diagnostics.LogEntryLevel.error),r=Shell.UI.Navigation.getObservableExtensionBadge(
t),r&&r.setProperty(Shell.UI.Navigation.WellKnownPropertyNames.displayError,ot.extensionDataLoadError))}
function a(n,t){if(!n)return!1;if(n.extensionUsesDataSet&&n.extensionUsesDataSet(
t)||n.navigationalViewModel&&n.navigationalViewModel.uri===t)return!0;if(n.viewModels)
for(var i=0,r=n.viewModels.length;i<r;i++)if(n.viewModels[i].uri===t)return!0;return!1}
function at(n){if(n.navigationalViewModel&&!r.localGet("Data",n.navigationalViewModel.
uri).fetchComplete)return!1;for(var t=0,i=n.viewModels.length;t<i;t++)if(!r.localGet(
"Data",n.viewModels[t].uri).fetchComplete)return!1;return!0}function g(i,r){var o=
i.itemName,h=i.value,u,v,p,e,f;r?(u=!0,e="Extension forced an immediate poll, likely when transitioning to a new view against cached data"):
i.currentFetchDeferred||s||(this.pollCount++,ti(i)?(u=!0,e="Client side locking or mutation flags detected",
v=h.fastPollingInterval):a(t.cdm.currentExtension,i.itemName)?(u=!0,e="Normal polling",
v=h.pollingInterval):t.cdm.currentExtension&&t.cdm.currentExtension.name==="All"&&
(u=!0,e="All view polling",v=h.slowPollingInterval),u&&(p=Math.ceil(v/h.fastPollingInterval),
u=this.pollCount%p==0));u?(Shell.Diagnostics.Log.writeEntry("Exp.Data.PollingDataSet",
"Polling data set '{0}'. Reason: {1}".format(o,e),Shell.Diagnostics.LogEntryLevel.
verbose),f=i.currentFetchDeferred=n.Deferred(),n(i).triggerHandler("fetchStart",
{dataSetName:o,promise:f.promise()}),w(o,i.value.eTag,i.sourceUrl,i.value.tag,i.
ajaxData,i.ajaxHeaders,function(n){if(!c(i))try{s<=0&&(y(i,n),nt(i))}catch(t){Shell.
Diagnostics.Log.writeEntry("Exp.Data.DataMergeFailed","Data merge failed for data set '"+
o+"'. The error message was: "+(t.message||t.Message||t),Shell.Diagnostics.LogEntryLevel.
error)}finally{l(i,f);f.resolve(i.itemName,i.value)}},function(n,t,r){c(i)||(l(i,
f),f.reject(i.itemName,n,t,r))})):tt(i)}function c(n){return n.isDisposed}function nt(
t){n.isArray(t.value.partialErrors)&&t.value.partialErrors.length>0&&n.each(t.value.
partialErrors,function(n,i){Shell.Diagnostics.Log.writeEntry("Exp.Data.PartialDataLoadErrors",
"Load of data set '"+t.itemName+"' returned partial error: '"+i.errorString+"'.  Error details: "+
(i.exceptionDetails||"None"),Shell.Diagnostics.LogEntryLevel.error)})}function l(
n,t){t===n.currentFetchDeferred&&(n.currentFetchDeferred=null,n.pollingTask&&(n.
pollingTask.pollCount=0),tt(n))}function tt(n){!n.isDisposed&&n.pollingTask&&t.Exp.
Scheduler.scheduleTask(n.pollingTask)}function v(n){function t(){var n="Merge: "+
this.targetName;this.mergeDataClassicDuration>=0&&(n+=", mergeDataClassic: "+this.
mergeDataClassicDuration+"ms");this.mergeDataCascadeDuration>=0&&(n+=", mergeDataCascade: "+
this.mergeDataCascadeDuration+"ms");this.fieldCount>0&&(n+=", fields: "+this.fieldCount);
this.rowCount>0&&(n+=", rows: "+this.rowCount);this.arrayCount&&(n+=", arrays: "+
this.arrayCount);n+=", observable: {setProperty: "+this.observable.setPropertyCount;
this.observable.setPropertyCount>0&&(n+=" ("+this.observable.setPropertyHandlersDuration+
"ms)");n+=", insert: "+this.observable.insertCount;this.observable.insertCount>0&&
(n+=" ("+this.observable.insertHandlersDuration+"ms)");n+=", remove: "+this.observable.
removeCount;this.observable.removeCount>0&&(n+=" ("+this.observable.removeHandlersDuration+
"ms)");n+=", refresh: "+this.observable.refreshCount;this.observable.refreshCount>
null&&(n+=" ("+this.observable.refreshHandlersDuration+"ms)");n+="}";this.mergeCompleteDuration!==
null&&(n+=", mergeCompleteHandler: "+this.mergeCompleteDuration+"ms");Shell.Diagnostics.
Log.writeEntry("Exp.data.mergePerf",n,Shell.Diagnostics.LogEntryLevel.verbose)}return{
targetName:n,rowCount:0,arrayCount:0,objectCount:0,fieldCount:0,observable:{setPropertyCount:
0,refreshCount:0,insertCount:0,removeCount:0,setPropertyHandlersDuration:null,refreshHandlersDuration:
null,insertHandlersDuration:null,removeHandlersDuration:null},mergeDataClassicDuration:
-1,mergeDataCascadeDuration:-1,mergeCompleteDuration:null,dump:t}}function y(t,i)
{t.expiry=(new Date).getTime()+t.value.slowPollingInterval*3;var f=i.value.mergeMethod,
r=new v(t.itemName),u=new Date;f&&f.toLowerCase()==="cascade"?(yt(t,i,r),r.mergeDataCascadeDuration=
new Date-u):(vt(t,i,r),r.mergeDataClassicDuration=new Date-u);u=new Date;n(t.value).
triggerHandler("mergeComplete");r.mergeCompleteDuration=new Date-u;r.dump()}function vt(
i,r,u){Shell.Diagnostics.Telemetry.timerStart("cdm.classicMergeData");var b=i.value.
eTag,k=r.value.eTag,et=b&&b===k,d=0,g=[],l,v,nt,f,a,tt,h,ft,ot,y,p,e,c,s,w;if(i.
value.partialErrors=r.value.partialErrors?r.value.partialErrors.slice(0):null,!et||
t.Exp.Data.getRowIndex(i.value.data,"aux-wasLocked",!0)!==null){if(i.value.eTag=
k,l=i.itemName,v=r.collectionPropertyName||"data",y=i.collectionPropertyName||"data",
v!==y){Shell.Diagnostics.Log.writeEntry("Exp.Data.NamePropertyChanged","Name Property has changed for data set '"+
l+"'. Data cannot be merged and will be bulk replaced.",Shell.Diagnostics.LogEntryLevel.
information);i.value=r.value;i.namePropertyName=r.namePropertyName;i.displayNamePropertyName=
r.displayNamePropertyName;i.collectionNamePropertyName=r.collectionNamePropertyName;
return}if(h=r.value[v],s=i.value[y],p=n.isArray(s),nt=n.isArray(h),p!==nt){Shell.
Diagnostics.Log.writeEntry("Exp.Data.CollectionPropertyChanged","Collection property has changed for data set '"+
l+"'. Data cannot be merged and will be replaced.",Shell.Diagnostics.LogEntryLevel.
information);i.value=r.value;i.namePropertyName=r.namePropertyName;i.displayNamePropertyName=
r.displayNamePropertyName;i.collectionNamePropertyName=r.collectionNamePropertyName;
return}if(!p){n.observable(i.value).setProperty(r.value);return}for(w=i.value.namePropertyName||
"name",tt=it(h,w),ot=[],c=s.length-1;c>=0;c--)u.rowCount++,e=s[c],f=tt[e[w]],f?(
o(e,r.fetchStart)&&(dt(e,f,u),delete e["aux-locked"],delete e["aux-wasLocked"]),
f.auxRowMatched=!0,d++):o(e,r.fetchStart)&&ut(s,c,1,u);if(d!==h.length){for(a=0,
ft=h.length;a<ft;a++)f=h[a],f.auxRowMatched||g.push(f);rt(s,s.length,g,u)}Shell.
Diagnostics.Telemetry.timerStopAndLog("cdm.classicMergeData","long form mergeData("+
l+") inc JsViews callbacks:")}}function yt(t,i,r){var e=t.itemName,o=i.value.data,
s=t.value.data,h=t.value.eTag,c=i.value.eTag,l,f,a={preserveNewRowsOrdering:t.preserveNewRowsOrdering};
if(Shell.Diagnostics.Telemetry.timerStart("cdm.mergeData"),t.value.tag=i.value.tag,
t.value.partialErrors=i.value.partialErrors?i.value.partialErrors.slice(0):null,
!h||h!==c||ni(t)){if(t.value.eTag=c,f=n.isArray(s),l=n.isArray(o),f!==l){Shell.Diagnostics.
Log.writeEntry("Collection type has changed for data set '"+e+"'. Data cannot be merged and will be replaced.",
Shell.Diagnostics.LogEntryLevel.verbose);t.value=i.value;return}f?p(i.fetchStart,
s,o,a,r):u(i.fetchStart,t.value,i.value,a,r);Shell.Diagnostics.Telemetry.timerStopAndLog(
"cdm.mergeData","long form mergeData("+e+") inc JsViews callbacks:")}}function p(
n,t,i,r,u){u.arrayCount++;r&&r.preserveNewRowsOrdering?pt(n,t,i,r,u):kt(n,t,i,r,
u)}function it(n,t){var u={},i,f,r;if(t=t||"id",n)for(i=0,f=n.length;i<f;i++)r=n[
i][t],typeof r!="undefined"&&(u[r]=n[i]);return u}function pt(t,i,r,u,f){var e,y=
i.length,h,s,p=r.length,v,w=u&&u.preventItemRemoval,l,a=[],c;for(u=n.extend({},u,
{preserveNewRowsOrdering:!0}),e=0;e<y;e++){for(h=i[e],l=!1,s=0;s<p;s++)f.rowCount++,
v=r[s],wt(t,h,v,u,f)&&(l=!0,r.splice(s,1,h));l||!w&&o(h,t,"delete")||a.push(e)}for(
c=0;c<a.length;c++)e=a[c],h=i[e],s=bt(i,r,e),r.splice(s,0,h);gt(i,r,f)}function wt(
n,t,i,r,f){return typeof i.id!="undefined"&&t.id===i.id?(u(n,t,i,r,f),!0):!1}function bt(
t,r,u){for(var e,h,o,c,s,f=u-1;f>=0;f--)if(e=n.inArray(t[f],r),e>=0){h=e+1;o=u-f;
break}for(f=u+1;f<t.length;f++)if(e=n.inArray(t[f],r),e>=0){c=e;s=f-u;break}return o===
i&&s===i?r.length:(o||1e5)<(s||1e5)?h:c}function kt(t,i,r,f,e){var h,c,l,s,a,v,w=
f&&f.preventItemRemoval,y=[],p=0;for(f=n.extend({},f,{preserveNewRowsOrdering:!1}),
a=it(r),h=i.length-1;h>=0;h--)c=i[h],s=a[c.id],e.rowCount++,typeof s!="undefined"?
(e.rowCount++,u(t,c,s,f,e),s.auxRowMatched=!0,p++):!w&&o(c,t,"delete")&&ut(i,h,1,
e);if(p!==r.length){for(l=0,v=r.length;l<v;l++)s=r[l],s.auxRowMatched||y.push(s);
rt(i,i.length,y,e)}}function e(t,i,r,u){var f=new Date;u.observable.setPropertyCount++;
n.observable(t).setProperty(i,r);u.observable.setPropertyHandlersDuration+=new Date-
f}function dt(t,i,r){var u=new Date;r.observable.setPropertyCount++;n.observable(
t).setProperty(i);r.observable.setPropertyHandlersDuration+=new Date-u}function rt(
t,i,r,u){var f=new Date;u.observable.insertCount++;n.observable(t).insert(i,r);u.
observable.insertHandlersDuration+=new Date-f}function ut(t,i,r,u){var f=new Date;
u.observable.removeCount++;n.observable(t).remove(i,r);u.observable.removeHandlersDuration+=
new Date-f}function gt(t,i,r){var u=new Date;r.observable.refreshCount++;n.observable(
t).refresh(i);r.observable.refreshHandlersDuration+=new Date-u}function u(t,i,r,
f,s){var l,h,a,c,v;if(s.objectCount++,o(i,t,"merge")){delete i["aux-locked"];delete
i["aux-wasLocked"];delete i["aux-lockOptions"];for(l in r)if(r.hasOwnProperty(l))
{if(s.fieldCount++,h=r[l],c=i[l],h===c)continue;if(a=typeof h,v=typeof c,h===null)
c!==null&&e(i,l,h,s);else if(n.isArray(h))v!=="undefined"&&c!==null&&n.isArray(c)?
p(t,c,h,f,s):(s.arrayCount++,e(i,l,h,s));else if(a==="object")v==="undefined"||c===
null?(s.objectCount++,e(i,l,h,s)):c instanceof Date?(c>h||c<h)&&e(i,l,h,s):u(t,c,
h,f,s);else if(a==="function")continue;else e(i,l,h,s)}}}function o(n,t,r){var u=
n["aux-locked"];return u===i?!0:r==="merge"&&n["aux-lockOptions"]==="lockForDeleteOnly"?
!0:t>=u}function ni(n){return t.Exp.Utilities.visitor(n.value.data,function(n){return!!n[
"aux-wasLocked"]})}function ti(n){return n.isFastPolling||t.Exp.Utilities.visitor(
n.value.data,function(n){return!!n["aux-wasLocked"]||!!n.locked||n.isMutating})}
function w(t,i,r,u,f,e,o,s){var h=n.Deferred(),c=new Date;return ft(h,c,null,t,i,
r,u,f,e,o,s),h.promise()}function ft(t,r,f,e,o,s,h,c,l,a,y){var p={"x-ms-tag":h||
i,ETag:o||""};p=n.extend({},l,p);Shell.Net.ajaxPost({url:s+"?ts="+(new Date).getTime(
),data:c,headers:p,suppressSuccessLogging:!0,success:function(i,h,p){var b,k=ii(
i),w,d,g=p.getResponseHeader("x-ms-tag");(!k||f)&&(f?(f.partCount++,f.eTag+=i.eTag,
n.isArray(i.data)?f.data.push(i.data):(w=new v(e+" part #"+f.partCount),d=new Date,
u(r,f,i,{preventItemRemoval:!0,preserveNewRowsOrdering:!1},w),w.mergeDataCascadeDuration=
new Date-d,w.dump())):(f=i,f.partCount=1),Shell.Diagnostics.Log.writeEntry("Exp.Data.DatasetFetchComplete",
"Fetch complete for part "+f.partCount+" of '"+e+"' ("+s+")",Shell.Diagnostics.LogEntryLevel.
verbose));k?(Shell.Diagnostics.Log.writeEntry("Exp.Data.DatasetFetchComplete","Fetch complete for '"+
e+"' ("+s+")",Shell.Diagnostics.LogEntryLevel.verbose),b=ri(f||i,r,e,s,g),typeof
a=="function"&&a(b),t.resolve(b)):ft(t,r,f,e,o,s,g,c,l,a,y)},error:function(n,i,
r){typeof y=="function"&&y(n,i,r);t.reject()}})}function ii(n){return n.isComplete||
n.isComplete===i}function ri(t,i,r,u,f){n.isArray(t.data)&&ht(t.data);(isNaN(t.pollingInterval)||
t.pollingInterval<5e3)&&(t.pollingInterval=5e3);(isNaN(t.fastPollingInterval)||t.
fastPollingInterval<5e3)&&(t.fastPollingInterval=5e3);(isNaN(t.slowPollingInterval)||
t.slowPollingInterval<5e3)&&(t.slowPollingInterval=5e3);t.fastPollingInterval>t.
pollingInterval&&(t.pollingInterval=t.fastPollingInterval);t.pollingInterval>t.slowPollingInterval&&
(t.slowPollingInterval=t.pollingInterval);t.tag=f;return{value:t,fetchStart:i,fetchComplete:
new Date,expiry:(new Date).getTime()+t.slowPollingInterval*3}}function ui(){function b(
){h--;h<=0&&(Shell.Diagnostics.Telemetry.timerStopAndLog("cdm.initialDataLoad","Initial data fetch:"),
n.observable(t.Exp.Data.internal).setProperty("isInitialDataLoadComplete",!0))}var
o=[],s=[],v,h,i,c,y,l,r,u,e,a,p,w;for(y=Shell.extensions.slice(0).sort(function(
n,t){return l=n.loadOrderHint-t.loadOrderHint,l===0&&(l=Shell.Utilities.stringCompare(
n.displayName,t.displayName)),l}),e=0,w=y.length;e<w;e++){if(i=y[e],c=!1,v=t.Exp.
Rdfe.getFeatureInAccount(Shell.Environment.getBetaFeatures()[i.name]),!v||(v.Status.
toLowerCase()==="active"?Shell.Extensions.Current.showCategory(!0,i.name):Shell.
Extensions.Current.showCategory(!1,i.name)),i.navigationalViewModel&&(i.navigationalViewModel.
path&&(i.navigationalViewModelPath=i.navigationalViewModel.path),r=i.navigationalViewModel,
f&&f(i,r),u=r.uri,c=!0,n.inArray(u,s)===-1&&(s.push(u),o.push(t.Exp.Data.getData(
{url:u,ajaxData:n.isFunction(r.ajaxData)?r.ajaxData():r.ajaxData}).then(k,d)))),
i.viewModels)for(a=0,p=i.viewModels.length;a<p;a++)r=i.viewModels[a],f&&f(i,r),u=
r.uri,n.inArray(u,s)===-1&&(c=!0,s.push(u),o.push(t.Exp.Data.getData({url:u,ajaxData:
n.isFunction(r.ajaxData)?r.ajaxData():r.ajaxData}).then(k,d)));c||(i.dataIsLoaded=
!0,t.Exp.Drawer.refreshExtensionMenuItemStatus(i.name),i.virtualNavigationalViewModelDataSetInfo&&
et(i,i.virtualNavigationalViewModelDataSetInfo))}for(Shell.Diagnostics.Telemetry.
timerStart("cdm.initialDataLoad"),h=o.length,e=0;e<h;e++)o[e].then(b,b)}function et(
i,r){var f=!0,e=i.name,u=Shell.UI.Navigation.getObservableExtensionBadge(e),s=r.
dataSetName||r.url,h=function(o,s){var h=s.promise;h.then(function(o,s){f&&(Shell.
Extensions.Current.showCategory(!0,e),u&&u.setProperty(Shell.UI.Navigation.WellKnownPropertyNames.
showSpinner,!1),n(t.Exp.Data).triggerHandler("navigationalViewModelDataSetLoad",
{extension:i,dataSetName:o}),f=!1);var h=r.getTotalCountResult,c=n.isFunction(h)?
h(s.data):s.data.totalCount;u&&u.setProperty(Shell.UI.Navigation.WellKnownPropertyNames.
count,c)},function(){f&&(Shell.Diagnostics.Log.writeEntry("Exp.Data.ExtensionCouldNotBeLoaded",
"Extension '"+e+"' cannot be loaded due to an error loading data set from '"+r.url+
"'.",Shell.Diagnostics.LogEntryLevel.error),u&&u.setProperty(Shell.UI.Navigation.
WellKnownPropertyNames.displayError,"Unable to load "+i.displayName+"."),f=!1)})}
,o=n.extend({},r,{fetchStartListener:h});o.ajaxData=n.extend(o.ajaxData||{},r.totalCountQuery||
{skip:0,take:0});u?u.setProperty(Shell.UI.Navigation.WellKnownPropertyNames.showSpinner,
!0):Shell.Diagnostics.Log.writeEntry("Exp.Data.NoNavigationItem","No navigation item found for extension '"+
e+"'",Shell.Diagnostics.LogEntryLevel.error);t.Exp.Data.getData(s,o)}var s=0,ot=
t.ExtensionCore.Resources,r,b,f;r=new st;b={expireData:function(n){r.expire("Data",
n)},forceRefresh:function(n){if(!n)return null;var i=typeof n=="string"?n:n.uri,
u=r.localGet("Data",i);return t.Exp.Data.expireData(i),t.Exp.Data.getData({url:u.
sourceUrl,ajaxData:u.ajaxData,allowExpired:!1})},forceNextDataMerge:function(n){
r.clearETag("Data",n)},getData:function(n,t){return typeof n=="object"&&(t=n,n=t.
url||t.uri),r.get("Data",n,t)},disposeDataSet:function(n){r.clear("Data",n)},setFastPolling:
function(n,t){var i=r.localGet("Data",n);i&&(i.isFastPolling=!!t)},addFetchStartListener:
function(t,i,u){var o=typeof t=="string"?t:t.uri,e=r.localGet("Data",o),f;if(e){
f="fetchStart";u&&(f+="."+u);n(e).on(f,i)}},removeFetchStartListener:function(t,
i){var f=typeof t=="string"?t:t.uri,u=r.localGet("Data",f);u&&(n.isFunction(i)?n(
u).off("fetchStart",i):n(u).off("fetchStart."+i))},getLocalDataSet:function(n,t)
{var u,i;return n?(u=typeof n=="string"?n:n.uri,i=r.localGet("Data",u,t),!i)?null:
i.value:null},getRowIndex:function(n,t,i){for(var u,r=0,f=n.length;r<f;r++)if(u=
n[r],u[t]===i)return r;return null},getRow:function(n,t,i){var r=this.getRowIndex(
n,t,i);return r===null?null:n[r]},addRow:function(i,r,u){var f=h(i),e=f.length;return typeof
u=="undefined"&&(u=!0),u&&t.Exp.Data.lockItem(r),n.observable(f).insert(e,r),e},
removeRow:function(t,i,r){var u=h(t),f=this.getRowIndex(u,i,r);return f!==null?(
n.observable(u).remove(f,1),!0):!1},lockItem:function(t){t&&n.observable(t).setProperty(
"aux-locked",(new Date).setFullYear(2999,12,31))},unlockItem:function(t){t&&t["aux-locked"]&&
n.observable(t).setProperty({"aux-locked":new Date,"aux-wasLocked":!0})},lockRow:
function(n,i,r){var u=h(n),f=this.getRowIndex(u,i,r);f>=0&&t.Exp.Data.lockItem(u[
f])},unlockRow:function(n,i,r){var u=h(n),f=this.getRowIndex(u,i,r);f>=0&&t.Exp.
Data.unlockItem(u[f])},isLocked:function(n){return n["aux-locked"]?n["aux-locked"]>
new Date:!1},merge:function(t,i,r,f){var o=n.type(t),s=n.type(i),h=f&&f.perfName||
"Exp.Data.merge",e=new v(h);if(o!==s)throw"Type Error: Merge parameters must be of the same type.";
r=r||new Date;switch(o){case"array":p(r,t,i,f||{},e);break;case"object":u(r,t,i,
f||{},e);break;default:throw"Type Error: Merge parameters must either both be arrays or both be objects.";
}e.mergeDataCascade=new Date-r;e.dump()},makeKey:function(){for(var t="",n=0,i=arguments.
length;n<i;n++)t+="|"+arguments[n];return t.substring(1)},pausePolling:function(
){s++},resumePolling:function(){s--},registerViewModelSettingsHandler:function(n)
{f=n},internal:{mergeData:y,dataFetch:w,requestAllDataSets:ui,isInitialDataLoadComplete:
!1}};Shell.Namespace.define("Exp.Data",b)}(jQuery,this),function(n,t,i,r){"use strict";
var f={disposeDataSet:!0},u=t.Data.DataSource,e=function(n){this._options=n;this.
_fetchStartListener=null;u.prototype.constructor.apply(this,arguments);this.dataSetName=
this._getDataSetName()},o={_dispose:function(){var t=this._getDataSetName(),n=this.
_options.disposeDataSet;(n===r||n===null)&&(n=f.disposeDataSet);n?i.Data.getLocalDataSet(
t)&&i.Data.disposeDataSet(t):this._fetchStartListener&&i.Data.removeFetchStartListener(
t,this._fetchStartListener)},_shapeRefreshResult:function(){throw"Not reachable";
},_bindFetchStart:function(){if(!this._fetchStartListener){var t=this,r=this._fetchStartListener=
function(i,r){if(!t._isDisposed()&&!r.isClientInitiated){var f=r.promise,u=t._startRefresh(
);f.then(n.proxy(t._processFetchSuccess,t,u),n.proxy(t._processFetchFailure,t,u))}
};i.Data.addFetchStartListener(this._getDataSetName(),r)}},_processFetchSuccess:
function(n,t,i){if(!this._isDisposed()){var r=this._shapeRefreshResult(i);n.resolve(
r.items,r.filteredTotalCount,r.totalCount,r.partialErrors)}},_processFetchFailure:
function(n,t,i,r,u){this._isDisposed()||n.reject(i,r,u)},_getDataSetName:function(
){return this._options.dataSetName||this._options.url}};t.Namespace.define("Exp.Data",
{DataSource:t.Class.derive(u,e,o)})}(jQuery,Shell,Exp),function(n,t,i){"use strict";
var r=i.Data.DataSource,u=function(){r.prototype.constructor.apply(this,arguments);
this.isQueryable=!1;var u=this._shapeRefreshResult(i.Data.getLocalDataSet(this._options.
dataSetName)),t=this;n([u.items]).on("arrayChange."+this._id,function(){var n=t.
_startRefresh();t._refreshItems();n.resolve()});this._refreshItems();this._bindFetchStart(
)},f={_dispose:function(){var t=this._shapeRefreshResult(i.Data.getLocalDataSet(
this._options.dataSetName));n([t.items]).off("arrayChange."+this._id);r.prototype.
_dispose.apply(this,arguments)},_refresh:function(){var t=n.Deferred();return this.
_refreshItems(),t.resolve(),t.promise()},_refreshItems:function(){var n=this._shapeRefreshResult(
i.Data.getLocalDataSet(this._options.dataSetName));this._establishNewSuccessState(
n.items,n.filteredTotalCount,n.totalCount,n.partialErrors)},_shapeRefreshResult:
function(t){var i=t.data,r=t.partialErrors;return this._options.dataPath&&n.each(
this._options.dataPath.split("."),function(){i=i[this]}),{items:i,filteredTotalCount:
i.length,totalCount:i.length,partialErrors:r}}};t.Namespace.define("Exp.Data",{LocalDataSetDataSource:
t.Class.derive(r,u,f)})}(jQuery,Shell,Exp),function(n,t,i){"use strict";function u(
t){var i=t.data,e=t.partialErrors,r,u,f;return n.isArray(i)?r=i:(r=i.items,u=i.filteredTotalCount,
f=i.totalCount),{items:r,filteredTotalCount:u,totalCount:f,partialErrors:e}}var f=
{shapeRefreshResult:u},r=i.Data.DataSource,e=function(){this._initiatedInitialFetch=
!1;r.prototype.constructor.apply(this,arguments)},o={_refresh:function(t){var r=
this.isQueryable?this._getNormalizedQuery():null,i=n.Deferred(),u=n.extend({forceServerFetch:
!this._initiatedInitialFetch},t);return this._loadData(r,u).then(n.proxy(i.resolve,
i),n.proxy(i.reject,i)),this._initiatedInitialFetch=!0,i},_getNormalizedQuery:function(
){var t={},i,r;return typeof this._paging.skip=="number"&&(t.skip=this._paging.skip),
typeof this._paging.take=="number"&&(t.take=this._paging.take),n.isArray(this._sort)&&
(t.sortProperty=this._sort[0].property,t.sortDirection=!this._sort[0].descending?
"ascending":"descending"),n.isArray(this._filter)&&(i=this._filter&&this._filter.
length&&this._filter[0],i&&i.value&&i.value.length&&(r=i.value[0],t.filter=r.value)),
t},_loadData:function(t,r){var u=n.Deferred(),e=this,f=this._getDataSetName(),o=
{dataSetName:f,url:this._options.url,ajaxData:n.extend({},this._options.ajaxData,
t),preserveNewRowsOrdering:!0};return r&&r.forceServerFetch&&i.Data.expireData(f),
i.Data.getData(f,o).always(function(){e._bindFetchStart()}).then(n.proxy(this._processFetchSuccess,
this,u),n.proxy(this._processFetchFailure,this,u)),u},_shapeRefreshResult:function(
n){var t=this._options.shapeRefreshResult||f.shapeRefreshResult;return t(n)}};t.
Namespace.define("Exp.Data",{RemoteDataSource:t.Class.derive(r,e,o)})}(jQuery,Shell,
Exp),function(n,t,i,r,u){"use strict";function p(){h=new i.UI.Drawer.Menu.ContainerMenuItem(
"","","Dataset",DataLab.LocalizedResources.dataset,n.fx.resources.getContentUrl(
"/Content/Images/drawer-icons.1.png"),r.datasetCategoryDescription.format(r.productName));
i.UI.Drawer.Menu.add(h);DataLab.Features.newCustomModuleUploadEnabled()&&(c=new i.
UI.Drawer.Menu.ContainerMenuItem("","","Module",DataLab.LocalizedResources.module,
n.fx.resources.getContentUrl("/Content/Images/drawer-icons.1.png"),r.moduleCategoryDescription.
format(r.productName)),i.UI.Drawer.Menu.add(c))}function w(){p();var n={},r=t.map(
i.extensionIndex,function(n){return{order:n.displayOrderHint||0,name:n.displayName,
extension:n}}).sort(function(n,t){var r=n.order-t.order;return r===0&&(r=i.Utilities.
stringCompare(n.name,t.name)),r});i.UI.Drawer.Menu.getChildren().done(function(f)
{t.each(f,function(){n[this]=this});t.each(r,function(){var r=this.extension.name,
l=this.order,a=this.extension.menuItems,h,c,f,e;a&&(o[r]=o[r]||o[r]===u?!0:!1,t.
each(a,function(){if(h=!1,this.categories)for(c=this.categories.split(","),e=0;e<
c.length;e++)f=c[e],n[f]?(s(n[f],[this],r,!0,l),h=!0):i.Diagnostics.Log.warning(
"fxshell.drawer.MissingCategory","Could not find category '"+f+"' for menu item '"+
this.name);h||s("",[this],r,!0,l)}))})})}function s(r,u,e,o,h){var c,l;t.each(u,
function(){this.template?(l=this.extension?this.extension:e,c=new i.UI.Drawer.Menu.
QuickAddMenuItem(e,r,this.name,this.displayName,n.fx.resources.getContentUrl("/Content/Images/drawer-icons.1.png"),
this.description,this.template,this.label,this.data,this.opening,this.open,this.
ok,this.close)):c=this.execute?new i.UI.Drawer.Menu.ActionMenuItem(e,r,this.name,
this.displayName,n.fx.resources.getContentUrl("Content/Images/drawer-icons.1.png"),
this.description,this.execute):new i.UI.Drawer.Menu.ContainerMenuItem(e,r,this.name,
this.displayName,n.fx.resources.getContentUrl("Content/Images/drawer-icons.1.png"),
this.description);c.setDisplayOrder(h);this.isPreviewFeature&&c.setIsPreviewFeature(
!0);i.UI.Drawer.Menu.add(c);this.subMenu&&s(c.path,this.subMenu,e,!1,0);o&&f.push(
c);this.isEnabled&&(c.isEnabled=this.isEnabled)})}function b(n){Shell.UI.Drawer.
Menu.add(n);f.push(n)}function k(n){Impl.UI.Drawer.initialize(n);d()}function d(
){i.UI.Drawer.addDrawerOpenedCallback(nt)}function g(n){t.each(f,function(){n===
this._extension&&v(this)})}function a(n){t.each(n,function(){v(this)})}function v(
n){var t;n.isEnabled&&(t=n.isEnabled(),t&&((t.enabled===!0||t.enabled===!1)&&n.setDisabled(
!t.enabled),t.description&&n.setDescription(t.description)));n.menuItems&&a(n.menuItems(
))}function nt(){var n;a(f);e?(i.UI.Drawer.Menu.selectPath(e),e=null):(n=y(it()),
n&&i.UI.Drawer.Menu.selectPath(n));ExperimentEditor&&ExperimentEditor.NewDrawerMenu&&
ExperimentEditor.NewDrawerMenu.NewDrawerMenuRecalculateSize()}function tt(n,t){return typeof
n=="string"&&n===t?!0:n&&n.name&&n.name===t?!0:!1}function it(){return n.cdm&&n.
cdm.currentExtension&&n.cdm.currentExtension.name}function y(n){var t,i;if(n&&o[
n])for(i=0;i<f.length;i++)if(t=f[i],t._extension&&tt(t._extension,n))return t.path&&
t.path.split("/")[0];return l}function rt(){i.UI.Drawer.close()}function ut(n){e=
n;i.UI.Drawer.open()}function ft(n){l=n}var e,f=[],h=null,c=null,o={All:!0,AdminTasks:
!0,StoreExtension:!0,ServiceBusExtension:!1},l=null;i.Namespace.define("Exp.Drawer",
{initialize:k,addExtensionMenuItems:w,close:rt,openMenu:ut,refreshExtensionMenuItemStatus:
g,addMenuItem:b,setDefaultMenuPath:ft,getMenuPathBasedOnExtension:y})}(this,jQuery,
Shell,this.ExtensionCore.Resources),function(n,t,i,r){"use strict";function e(n,
i){var r=n.destination.hash.replace(/\/$/,""),u=n.destination.view,f=n.destination.
viewName;u!=="tab"||f||(t.isFunction(i)&&(i=i(n)),typeof i=="string"&&n.redirect(
r+"/"+i))}function o(n){return t.map(n.tabs,function(t){return new i.UI.Pivot(t.
id,t.displayName,t.template,t.activated,t.icon,t.visible,n.name)})}function s(n,
t){var r;t?r=u(t):n.tabs?r=n.tabs:n.navigation&&(r=u(n.navigation));i.UI.Pivots.
set(n.id,r||[])}function u(n){var u=[],r;if(n&&(n.tabs&&(u=t.map(n.tabs,function(
n){return new i.UI.Pivot(n.id,n.displayName,n.template,n.activated,n.icon,n.visible)}
)),n.types))for(r=0;r<n.types.length;r++)n.types[r].tabs&&t.merge(u,o(n.types[r]));
return u}var f=new i.UI.PivotImageDescriptor(r.resources.getContentUrl("Content/Images/QuickStart_Cloud.png"),
r.resources.getContentUrl("Content/Images/QuickStart_Cloud_HOVER.png"),n.ExtensionCore.
Resources.quickStart);i.Namespace.define("Exp.Navigation",{redirectDefaultPath:e,
quickStartImageDescriptor:f,convertNavigationTabsToPivots:u,initializePivots:s})}
(this,this.jQuery,this.Shell,this.fx),function(n,t){"use strict";function u(n,t)
{r[n]=t}function i(n,t){var u=r[n],i,f=null;if(u)for(i=0;i<u.length;i++)if(u[i].
name===t){f=u[i];break}return f}function f(n,t){var r=i(n,t),u=null;return r&&(u=
r.navigationDependencies),u}function e(n,t){var r=i(n,t),u=null;return r&&(u=r.dataFunction),
u}function o(n,t){var r=i(n,t);return r&&typeof r.canNavigate=="function"?r.canNavigate:
null}var r={};n.extend(!0,t,{Exp:{TypeRegistry:{add:u,getDataFunction:e,getDependencies:
f,getCanNavigate:o}}})}(jQuery,window),function(n,t,i,r){"use strict";function nt(
n,t){var i=k(n,t);i>-1&&n.splice(i,1)}function tt(n,t,i){n.splice(i,0,t)}function it(
n,t){n.splice(t,1)}function b(n){n.splice(0,n.length)}function rt(t,i){b(t);n.each(
i,function(){t.push(this)})}function k(t,i){return n.inArray(i,t)}var f={},e=[],
d=function(r,u,f){if(r&&u){var e=t&&t.extensionIndex&&Shell.extensionIndex[r]||null,
o,s=i.cdm.currentActiveItem,c=i.cdm.currentContext,h,l=t.exists("Diagnostics.Telemetry.traceEvent",
n.noop);if(e)if(s&&(h=s.type),e.executeCommand)e.executeCommand(u,f,s,c),l("commandBar",
r,u,h);else if(e.commands){if(n.each(e.commands,function(){if(this.name===u)return o=
this,!1}),!o)return;if(o.execute)try{t.Internal.callPartnerScript(e,o.execute,o,
s,c);l("commandBar",r,u,h)}catch(a){t.Diagnostics.Log.writeEntry("Shell.UI.commandBar.CallbackError",
"Additional context: Method was bound to command button '"+o.name+"' on extension '"+
e.name+"'",t.Diagnostics.LogEntryLevel.error);throw a;}}}},o=function(t,i,r){return function(
){n.each(e,function(n,u){u(t,i,r)})}},s=function(){var n,t;return i.cdm&&(n=i.cdm.
currentActiveItem,n&&n["aux-extension-name"]?t=n["aux-extension-name"]:i.cdm&&i.
cdm.currentExtension&&(t=i.cdm.currentExtension.name)),t||"All"},u=function(){var
n=s();return f[n]===r&&(f[n]={contextualCommands:[],globalCommands:[]}),f[n]},h=
function(n){return function(t){u()[n+"Commands"].push(t)}},c=function(n){return function(
t){nt(u()[n+"Commands"],t)}},l=function(n){return function(t,i){tt(u()[n+"Commands"],
t,i)}},a=function(n){return function(t){it(u()[n+"Commands"],t)}},v=function(n){
return function(){b(u()[n+"Commands"])}},y=function(n){return function(t){rt(u()[
n+"Commands"],t)}},p=function(n){return function(t){return k(u()[n+"Commands"],t)}
},w=function(n,t){n==="click"&&e.push(t)},g=function(){};t.Namespace.define("Exp.UI",
{SubCommand:t.Class.define(function(n,t){this.id=n;this.label=t},{id:null,label:
null}),CommandHelp:function(){},Command:Shell.Class.define(function(n,t,i,u,f,e)
{this.id=n;this.label=t;this.icon=i===null?Exp.UI.CommandIconDescriptor.getWellKnown(
n.toLowerCase()):i;this.click=e;this.isEnabled=u===null||u===r?!0:u;this.subCommands=
f}),CommandIconDescriptor:{getWellKnown:function(n){switch(n){case"create":n="add";
break;case"back":n="previous";break;case"scmDismiss":case"cancel":n="close";break
case"deploy":n="forward";break;case"exportnetworkconfig":case"cscfg":case"csdef":
n="download";break;case"information":case"viewinfo":n="info";break;case"attachdisk":
n="link";break;case"shutdown":case"reboot":n="power";break;case"scmRetry":n="redo";
break;case"browse":case"scmRedeploy":n="reimage";break;case"remotedesktop":case"remoteaccess":
n="connect";break;case"refresh":case"restart":case"reset":n="undo";break;case"sendtextmessage":
n="message";break;case"start":n="play";break;case"submit":n="confirm";break;case"swapvip":
n="swap";break;case"detachdisk":n="unlink";break;case"webworker":n="downloadpackage";
break;case"captureimage":case"capturevm":n="capture";break;case"scmWebMatrix":n=
"webmatrix";break;case"scmVS":n="visualstudio";break;case"managedomains":n="domains";
break;case"manage":n="manageexternal"}return{sprite:n}}},Commands:{Global:{add:h(
"global"),remove:c("global"),insertAt:l("global"),removeAt:a("global"),clear:v("global"),
set:y("global"),indexOf:p("global")},Contextual:{add:h("contextual"),remove:c("contextual"),
insertAt:l("contextual"),removeAt:a("contextual"),clear:v("contextual"),set:y("contextual"),
indexOf:p("contextual")},update:function(){t.UI.Commands.clear();var i=u(),r=s(),
n=[],f=function(n,i){var u=[];return i.forEach(function(i){var f=new t.UI.Commands.
Command(i.label,i.icon,!i.click&&i.subCommands&&i.subCommands.length?null:o(r,i.
id),n,!i.isEnabled);i.click&&f.setClick(i.click);(i.subCommands||[]).forEach(function(
n){f.addSubCommand(n.label,o(r,i.id,n.id))});u.push(f)}),u};n=n.concat(f("global",
i.globalCommands));n=n.concat(f("contextual",i.contextualCommands));t.UI.Commands.
add(n)},addEventListener:w,removeEventListener:g}});w("click",d)}(jQuery,Shell,this),
function(n,t){"use strict";var i=t.Exp.Utilities.optional,r={linkAndApplyBindings:
function(t,i,r){t.link(r,i);n.observable.applyBindings(i,r);n(r).on("remove",function(
){n(i).trigger("destroy")})},selectText:function(i){var e=t.document,u=n(i)[0],f,
r;if(u)try{t.document.body.createTextRange?(r=e.body.createTextRange(u),r.moveToElementText(
u),r.select()):t.getSelection&&(r=e.createRange(),r.selectNodeContents(u),f=t.getSelection(
),f.removeAllRanges(),f.addRange(r))}catch(o){t.Shell.Diagnostics.Log.error("Exp.UI.highlightText",
"Unexpected rendering exception: {0}".format(o))}},showStatusBar:function(t,r,u,
f){r=i(r,"");u=i(u,"");f=i(f,"Info");var e=n(t),o=!!e.data("wazStatusBar"),s=o?e.
wazStatusBar("option","currentStatusDisplay"):null,h=o?e.wazStatusBar("option","currentStatusDisplayMessage"):
null;return(s!==r||h!==u)&&(o&&e.wazStatusBar("destroy"),e.wazStatusBar({statuses:
[{name:"static",displayName:r,display:f}],currentStatus:"static",currentStatusDisplayMessage:
u})),e},hideStatusBar:function(t){n(t).wazStatusBar("destroy")},validate:function(
i){var r=!0,u=!1,f=t.Shell.UI.Validation.parse(i);return f.each(function(){var t=
n(this).fxEditableControl("triggerMethod","validate")||"";n.inArray(t,["valid",""])<
0&&(r=!1,t==="invalid"&&(u=!0))}),u&&f.filter(".fx-validation-invalid").first().
focus(),r},gridRenderCopyButton:function(t,i){var r=n("<div />").fxsCopyButton({
labelElement:n("<div />").html(t.html()),getClipboardText:function(){return n("<div />").
html(i).text()}});t.empty().append(r)}};n.extend(!0,t,{Exp:{UI:r}})}(jQuery,this),
function(n,t){"use strict";function f(){r=null;var n=i.shift();if(n){n.silent||Shell.
Diagnostics.Log.writeEntry("Exp.Scheduler.ExecutingScheduledTask","Executing sheduled task '"+
n.name+"' that was scheduled for "+new Date(n.scheduledExecutionTime).toLocaleTimeString(
),Shell.Diagnostics.LogEntryLevel.verbose);try{n.scheduledTask.apply(n,n.args||[
])}catch(u){Shell.Diagnostics.Log.writeEntry("Exp.Scheduler.ErrorExecutingTask",
"Error executing task '"+n.name+"': "+u.message,Shell.Diagnostics.LogEntryLevel.
error)}finally{n.recurring&&t.Exp.Scheduler.scheduleTask(n);!r&&i.length>0&&(r=t.
setTimeout(f,Math.max(0,i[0].scheduledExecutionTime-(new Date).getTime())))}}}var
i=[],r,u;u={scheduleTask:function(n){var e,o,u,s;if(n.recurring){if(n.absoluteTime)
throw"Tasks scheduled for an absolute time cannot be recurring";if(n.isAsync)throw"Asynchronous tasks cannot be marked as auto recurring. Instead call sheduleTask again at the end on completition of the aynchronous event";
}if(n.name||(n.name="Anonymous "+Shell.Utilities.newGuid()),o=(new Date).getTime(
),n.absoluteTime)n.scheduledExecutionTime=n.absoluteTime.valueOf();else{if(isNaN(
n.delayInMs)||n.delayInMs<=0)throw"Tasks that are not scheduled for an absolute time require a positive integer value in task.delayInMs";
n.scheduledExecutionTime=o+n.delayInMs}for(e=-1,u=0,s=i.length;u<s;u++)if(i[u].scheduledExecutionTime>
n.scheduledExecutionTime){i.splice(u,0,n);e=u;break}e===-1&&i.push(n);n.silent||
Shell.Diagnostics.Log.writeEntry("Exp.Scheduler.ScheduledTaskToExecute","Scheduled task '"+
n.name+"' to execute at "+new Date(n.scheduledExecutionTime).toLocaleTimeString(
),Shell.Diagnostics.LogEntryLevel.verbose);(i.length===1||e===0)&&(r&&t.clearTimeout(
r),r=t.setTimeout(f,Math.max(0,n.scheduledExecutionTime-o)))},deleteTask:function(
u){var f=n.inArray(u,i);f>=0&&(i.splice(f,1),i.length===0&&r&&(t.clearTimeout(r),
r=null))}};n.extend(!0,t,{Exp:{Scheduler:u}})}(jQuery,this),function(n,t){"use strict";
function et(){t.Exp.Scheduler.scheduleTask({name:"poll-rdfe",delayInMs:45e3,scheduledTask:
ot,silent:!0,args:[function(n,t,i,r){l(n,r);d()},et]})}function ot(n,t){Shell.Diagnostics.
Telemetry.timerStart("cdmRdfe.refreshTask");var i=new Date;Shell.Net.ajaxPost({url:
o,data:{subscriptionFilterOverride:r.getSubscriptionIds().join(",")}}).done(function(
t,r,u){Shell.Diagnostics.Telemetry.timerStopAndLog("cdmRdfe.refreshTask","Success - ListSubscriptions:");
n&&n(t,r,u,i)}).fail(function(){Shell.Diagnostics.Telemetry.timerStopAndLog("cdmRdfe.refreshTask",
"Failed - ListSubscriptions:");t()})}function b(n,t){return n?t?n.SubscriptionID<
t.SubscriptionID?-1:n.SubscriptionID>t.SubscriptionID?1:0:1:t===n?0:-1}function st(
n,t){return n?t?n.OperationId<t.OperationId?-1:n.OperationId>t.OperationId?1:0:1:
t===n?0:-1}function ht(n){var u=typeof n,i,t,r;if(u==="string")return k(n);if(u!==
"object")return null;for(i in n)if(n.hasOwnProperty(i)&&(t=i.toLowerCase(),(t===
"trackingid"||t==="operationid"||t==="id"||t==="operationtrackingid")&&(r=n[i],typeof
r=="string")))return k(r);return null}function k(n){return n?n.replace(/-/g,"").
toLowerCase():n}function ct(t,i){for(var r=0,f=i.length;r<f;r++)try{n(p).trigger(
t,i[r])}catch(u){Shell.Diagnostics.Log.writeEntry("Exp.Rdfe.ErrorTriggerEvent","Error triggering "+
t+" event. Check handlers. The error message was: "+(u.message||u.Message||u),Shell.
Diagnostics.LogEntryLevel.error)}}function lt(){return t.Exp.UserSettings.updateGlobalUserSetting(
t.Exp.Constants.userSettingKeys.subscriptionFilter,null)}function l(n,r){var s=n.
data,v=[],y=[],p=s.subscriptions.slice(0),l,o,a;if(t.Exp.Data.merge(tt,s.affinityGroups,
r,{perfName:"Subscriptions"}),t.Exp.Data.merge(rt,s.locations,r,{perfName:"Locations"}),
it=s.environmentSettings,i.sort(b),p.sort(b),t.Exp.Utilities.diffArray(i,p,b,function(
n){v.push({changeType:"add",subscription:n})},function(n){v.push({changeType:"remove",
subscription:n})},function(n,t){v.push({changeType:"change",oldSubscription:n,newSubscription:
t})}),i=s.subscriptions,f===null&&(u=!s.userSettings.subscriptionFilter,f=u?[]:s.
userSettings.subscriptionFilter.split(","),h={},!u))for(o=0,a=f.length;o<a;o++)h[
f[o]]=!0;for(c={},e=[],o=0,a=i.length;o<a;o++)l=i[o].SubscriptionID,c[l]=i[o],(u||
h[l])&&e.push(i[o]);if(u||e.length!==i.length){for(o=0,a=f.length;o<a;o++)l=f[o],
c[l]&&y.push(l);f.length>y.length&&(f=y,t.Exp.UserSettings.updateGlobalUserSetting(
t.Exp.Constants.userSettingKeys.subscriptionFilter,f.join(",")));u||e.length!==0||
(Shell.UI.Notifications.add(w.subscriptionFilterReset,Shell.UI.InteractionSeverity.
warning,Shell.UI.InteractionBehavior.ok,null),e=i.slice(0),u=!0,lt())}else u=!0,
lt();ct("subscriptionChange",v)}function d(){function e(n){return function(t){for(
var i=0,r=t.length;i<r;i++)t[i].subscriptionId=n,t[i].trackingId=k(t[i].OperationId),
f.push(t[i])}}if(!Shell.Environment.getIsOnPremMode()){for(var u=[],f=[],r,n=i.length-
1;n>=0;n--)i[n].SubscriptionStatus!=="0"&&(r=i[n].SubscriptionID,u.push(Shell.Net.
getJSON(o+"/OperationTracking?subscriptionId="+r,e(r))));t.Exp.Utilities.waitForDeferreds(
u).done(function(){yt(f)})}}function yt(n){var i=[],r;n.sort(st);t.Exp.Utilities.
diffArray(ut,n,st,function(n){i.push({changeType:"add",operation:n});r=n.OperationStatus.
Status;(r==="Succeeded"||r==="Failed")&&i.push({changeType:"statusChange",oldStatus:
r,newStatus:r,oldOperation:n,newOperation:n})},function(n){i.push({changeType:"remove",
operation:n})},function(n,t){i.push({changeType:"change",oldOperation:n,newOperation:
t});n.OperationStatus.Status!==t.OperationStatus.Status&&i.push({changeType:"statusChange",
oldStatus:n.OperationStatus.Status,newStatus:t.OperationStatus.Status,oldOperation:
n,newOperation:t})});ut=n;ct("operationChange",i);et()}function pt(n){try{return n.
OperationStatus.Error.Message}catch(t){return null}}function a(n,t,i){if(!n||typeof
t=="undefined")return null;var r=n[t];return typeof r=="function"?r(i):r}function g(
n){return n&&n.progressOperation}function nt(n,t){if(!n)return null;var r=a(n,"initialText",
t),i;return r&&(i=g(n)?n.progressOperation:new Shell.UI.ProgressOperation(r,null,
!1),i.hasBeenAdded()?i.addStep(r):Shell.UI.ProgressOperations.add(i)),i}function at(
n,t,i){ft(n,"Missing required parameter: progressOperation");var r=a(t,"successText",
i)||w.defaultOperationSuccessText,u=Shell.UI.InteractionSeverity.information,f=Shell.
UI.InteractionBehavior.ok;g(t)?n.completePreviousStep(r,u,f):n.complete(r,u,f)}function v(
n,t,i){ft(n,"Missing required parameter: progressOperation");var u=a(t,"failureText",
i)||"Operation failed.",f=a(t,"failureDetailText",i)||pt(i.operation)||i.errorMessage,
e=Shell.UI.InteractionSeverity.error,o=Shell.UI.InteractionBehavior.ok,r;i.trackingId&&
(f+=" "+w.appendTrackingId.format(i.trackingId));r={detailData:f};g(t)?n.completePreviousStep(
u,e,o,r):n.complete(u,e,o,r)}function vt(n,t,i,r,u){var f={trackingId:n,lockItem:
t,statusChange:u,notificationOptions:r,shellProgressOperation:i};s.push(f)}function wt(
n,i){if(i.changeType==="statusChange"){var o=i.newOperation.trackingId,h=t.Exp.Data.
getRowIndex(s,"trackingId",o),c,e,y,f,l,u,a,r;h!==null&&(r=s[h],r&&(e=r.lockItem,
u=i.newOperation,f=u.OperationStatus.Status,e&&t.Exp.Data.unlockItem(e),(f==="Succeeded"||
f==="Failed")&&s.splice(h,1),f==="Failed"&&(y={clickUrl:u.OperationObjectId,eventName:
u.OperationName,componentName:r.lockItem&&(r.lockItem.DisplayName||r.lockItem.displayName)
,objectType:r.lockItem&&(r.lockItem.Type||r.lockItem.type),objectId:r.lockItem&&
r.lockItem.id},Shell.Diagnostics.Log.error("Exp.Rdfe.longRunningOperation.finalError",
u.OperationName+" action failed with "+u.OperationStatus.Error.Message,y)),r.shellProgressOperation&&
(a=r.shellProgressOperation,l=r.notificationOptions,c={trackingId:o,lockItem:e,operation:
u},f==="Failed"?v(a,l,c):at(a,l,c)),r.statusChange&&r.statusChange(o,i.oldStatus,
f,e,u,r.shellProgressOperation)))}}var y=!1,tt=[],p={},it={},rt=[],ut=[],s=[],ft=
t.Exp.Utilities.requires,w=t.ExtensionCore.Resources,o=Shell.Environment.getApplicationRoot(
)+"/Service",u=!1,f=null,h={},i=[],e=[],c={},r;n.extend(!0,t,{Exp:{internal:{rdfe:
{initialize:function(n,i){if(Shell.Environment.getIsOnPremMode()&&Shell.Environment.
getIsAdminMode()){y=!0;i();return}y?i&&i():(t.Exp.Rdfe.addOperationChangeHandler(
"aux",wt),y=!0,n?(l(n,new Date),i(),d()):ot(function(n,t,r,u){l(n,u);i&&i();d()}
,i))},setServiceBase:function(n){o=n}}}}});r={getSubscription:function(n){return c[
n]||null},getSubscriptionList:function(){return e},getUnfilteredSubscriptionList:
function(){return i},getSubscriptionIds:function(){return n.map(e,function(n){return n.
SubscriptionID})},getUnfilteredSubscriptionIds:function(){return n.map(i,function(
n){return n.SubscriptionID})},isFilteredSubscription:function(n){return u?!0:!!h[
n]},isResourceRegisteredForSubscription:function(t,i){var u=r.getSubscription(t),
f=!1;return!u||!u.Services?!1:(n.each(u.Services,function(n,t){if(t.Type&&t.Type.
toLowerCase()===i.toLowerCase())return f=t.State&&t.State.toLowerCase()==="registered"?
!0:!1,!1}),f)},getAffinityGroupsList:function(){return tt},getLocationsList:function(
){return rt},getEnvironmentSettings:function(){return it},augmentSubscriptionInfo:
function(t){if(!!t.__infoAugmented){var i=n.Deferred();return i.resolve(),i.promise(
)}return Shell.Net.getJSON(o+"/GetSubscriptionInfo",{subscriptionId:t.id}).done(
function(i){i&&i.data&&(n.extend(t,i.data),t.__infoAugmented=1)})},isSubscriptionEnabled:
function(n){var r=typeof n=="string"?t.Exp.Data.getRow(i,"SubscriptionID",n):n;return r?
r.SubscriptionStatus===t.Exp.Constants.subscriptionState.active||r.SubscriptionStatus===
t.Exp.Constants.subscriptionState.warned:!1},filterToSubscriptionsRegisteredToService:
function(t,i){return n.grep(t,function(n){for(var u=n.RegisteredServices.split(","),
t=0,r=u.length;t<r;t++)if(u[t]===i)return!0;return!1})},filterToEnabledSubscriptions:
function(i){return n.grep(i,function(n){var i=n.subscriptionId||n.SubscriptionId||
n.SubscriptionID;return i?t.Exp.Rdfe.isSubscriptionEnabled(i):!1})},addSubscriptionChangeHandler:
function(t,i,r){n(p).bind("subscriptionChange"+(t?"."+t:""),r,i)},longRunningOperationPost:
function(n){return t.Exp.Rdfe.longRunningOperation(n,!0)},longRunningOperation:function(
i,r){var f=i.lockItem,o=n.extend({},i),u=nt(i.notificationOptions,{lockItem:f}),
e={trackingId:null,lockItem:f,operation:null};return o.success=function(n,t,r){var
s=ht(n),o;s===null?(n&&n.ErrorMessage?(o=Shell.Diagnostics.LogEntryLevel.error,u&&
(e.errorMessage=n.ErrorMessage,v(u,i.notificationOptions,e))):(o=Shell.Diagnostics.
LogEntryLevel.warning,u&&at(u,i.notificationOptions,e)),Shell.Diagnostics.Log.writeEntry(
"Exp.Rdfe.NoTrackingId","No tracking ID found in response from "+i.url,o)):vt(s,
f,u,i.notificationOptions,i.statusChange);i.success&&i.success(n,t,r)},o.error=function(
n,r,o){t.Exp.Data.unlockItem(f);var s=t.Exp.Utilities.getXhrError(n)||n.statusText,
h={clickUrl:i.url,eventName:i.url,componentName:i.lockItem&&(i.lockItem.DisplayName||
i.lockItem.displayName),objectType:i.lockItem&&(i.lockItem.Type||i.lockItem.type)
,objectId:i.lockItem&&i.lockItem.id};t.Shell.Diagnostics.Log.error("Exp.Rdfe.longRunningOperation.error",
i.url+" action failed with "+s,h);u&&(e.errorMessage=s,v(u,i.notificationOptions,
e));i.error&&i.error(n,r,o)},t.Exp.Data.lockItem(f),r?Shell.Net.ajaxPost(o):Shell.
Net.ajax(o)},addAndFailProgressOperation:function(n,t){var i=nt(n,t);v(i,n,t)},registerTrackingOperation:
function(n,t,i){n=ht(n);var r={trackingId:n,lockItem:null,operation:null},u=nt(i,
r);vt(n,null,u,i,t)},addOperationChangeHandler:function(t,i,r){n(p).bind("operationChange"+
(t?"."+t:""),r,i)},getFeatureInAccount:function(t){function s(n){return n.Name.toLowerCase(
)===o}for(var i,f,o=t?t.toLowerCase():null,e=r.getSubscriptionList(),u=0;u<e.length;
u++)if(i=n.grep(e[u].Features,s),i.length>0){if(i[0].Status.toLowerCase()==="active")
return i[0];f&&i[0].Status.toLowerCase()!=="pending"||(f=i[0])}return f},isFeatureActiveOnSubscription:
function(t,r){var u,f=n.grep(i,function(n){return n.id===t}),e=r?r.toLowerCase():
null;return(f.length>0&&(u=n.grep(f[0].Features,function(n){return n.Name.toLowerCase(
)===e})[0]),!u)?!0:u.Status.toLowerCase()==="active"},getOperationTrackingId:function(
n){return n?n.OperationTrackingId||n.OperationTrackingID||null:null}};t.Shell.Environment.
getIsOnPremMode()&&(r.getSubscriptionIdsRegisteredToService=function(t){var i=r.
getSubscriptionList();return i?{subscriptionIds:n.map(r.filterToSubscriptionsRegisteredToService(
i,t),function(n){return n.id})}:[]},r.getSubscriptionsRegisteredToService=function(
n){var t=r.getSubscriptionList();return t?r.filterToSubscriptionsRegisteredToService(
t,n):[]},r.hasSubsciptionsToService=function(n){return r.getSubscriptionsRegisteredToService(
n).length>0},r.forceRefreshOnPremSubscriptions=function(){var n=new Date;return Shell.
Diagnostics.Telemetry.timerStart("cdmRdfe.forceRefreshTask"),Shell.Net.getJSON(o).
done(function(t,i,r){Shell.Diagnostics.Telemetry.timerStopAndLog("cdmRdfe.forceRefreshTask",
"Success - ListSubscriptions:");l(t,i,r,n)}).fail(function(){Shell.Diagnostics.Telemetry.
timerStopAndLog("cdmRdfe.forceRefreshTask","Failed - ListSubscriptions:")})});n.
extend(!0,t,{Exp:{Rdfe:r}})}(jQuery,this),function(n,t){"use strict";function r(
){var r=[];return r.push({type:"text",text:i.avatarBar_signOutLabel,click:function(
){n.DataLab.Workspace.signOut().done(function(t){n.location.href=t}).fail(function(
){var n=new Shell.UI.Notifications.Notification(DataLab.LocalizedResources.signoutErrorMessage,
Shell.UI.Notifications.Severity.warning);n.setActions([new Shell.UI.Notifications.
Buttons.ok(function(){Shell.UI.Notifications.remove(n)})]);Shell.UI.Notifications.
add(n)});Shell.Diagnostics.Telemetry.customEvent("LogOut","HeaderBarMenu")}}),r.
push({type:"separator"}),r.push({type:"languagepicker",label:i.avatarBar_languagePickerLabel}),
r.push({type:"separator"}),r.push({type:"text",text:i.avatarBar_privacyLabel,click:
function(){n.open(environment.privacyNoticeUrl,"PrivacyAndCookies");Shell.Diagnostics.
Telemetry.customEvent("WindowsAzurePrivacyStatement","HeaderBarMenu")}}),r.push(
{type:"text",text:i.avatarBar_legalLabel,click:function(){n.open(environment.legalNoticeUrl,
"Legal");Shell.Diagnostics.Telemetry.customEvent("Legal","HeaderBarMenu")}}),t("<div />").
fxsAvatarBar({name:i.avatarBar_menuLabel,menuItems:r})}function u(){t("#headerbar").
fxsHeaderBar({avatarBar:r(),logoAltText:i.productNameLong,logo:n.fx.resources.getContentUrl(
"Content/Images/layout-brand-MSAzureML.png"),logoUrl:"/",expanded:!1})}function f(
){u()}var i=n.Resources.getResources("Microsoft.MetaAnalytics.Web.ClientResources");
t(function(){f()})}(this,jQuery);DataLab={};DataLab.LocalizedResources=Resources.
getResources("Microsoft.MetaAnalytics.Web.ClientResources"),function(n){var t;(function(
n){var t,i,r,u,f,e,o,s,h,c,l;(function(n){n[n.Module=0]="Module";n[n.Dataset=1]=
"Dataset";n[n.TrainedModel=2]="TrainedModel";n[n.WebServicePort=3]="WebServicePort";
n[n.Transform=4]="Transform";n[n.None=5]="None"})(n.GraphNodeType||(n.GraphNodeType=
{}));t=n.GraphNodeType;n.PasswordPlaceholder="xxxxxxxx",function(n){n.Python2="Python 2";
n.Python3="Python 3";n.R="R"}(i=n.NotebookLanguage||(n.NotebookLanguage={})),function(
n){n[n.Blank=0]="Blank";n[n.Example=1]="Example";n[n.Dataset=2]="Dataset";n[n.ModuleRunResults=
3]="ModuleRunResults"}(n.NotebookType||(n.NotebookType={}));r=n.NotebookType,function(
n){n.BlankNotebookTemplate="BlankNotebook.ipynb";n.ExampleNotebookTemplate="ExampleNotebook.ipynb";
n.DatasetNotebookTemplate="DatasetNotebook.ipynb";n.ModuleRunResultsNotebookTemplate=
"ModuleRunResultsNotebook.ipynb";n.BlankRNotebookTemplate="BlankNotebook.R";n.DatasetRNotebookTemplate=
"DatasetNotebook.R";n.ModuleRunResultsRNotebookTemplate="ModuleRunResultsNotebook.R"}
(u=n.NotebookCreationTemplate||(n.NotebookCreationTemplate={})),function(n){n.Experiment=
"experiment";n.Notebook="notebook"}(f=n.GalleryEntityTypes||(n.GalleryEntityTypes=
{}));n.PythonNotebookSuffix=".ipynb";n.RNotebookSuffix=".R",function(n){n.Dataset=
"Saved Datasets";n.TrainedModel="Trained Models";n.Transform="Transforms";n.Uncategorized=
"Miscellaneous";n.TrainModule="Machine Learning\\Train";n.ScoreModule="Machine Learning\\Score";
n.WebService="Web Service";n.Deprecated="Deprecated";n.Transformation="Data Transformation\\Manipulation"}
(e=n.ResourceCategory||(n.ResourceCategory={})),function(n){n[n.Error=0]="Error"}
(n.DisplayEndpointType||(n.DisplayEndpointType={}));o=n.DisplayEndpointType;n.MaximumCharsForErrorToolTip=
100;n.DatasetName="dataset";n.CustomModulePackageName="zipFile";n.TrainedModelName=
"Trained model";n.TransformModuleName="Transformation module",function(n){n.ScoreGenericModuleFamilyId=
"401b4f92e7244d5abe81d5b0ff9bdb33";n.TransformFamilyId="602aed7baab34e2abaf78cee080b06ff";
n.SplitModuleFamilyId="70530644c97a4ab685f788bf30a8be5f";n.ProjectColumnFamilyId=
"1ec722fab6234e26a44ea50c6d726223";n.ApplyTransformationFamilyId="805e592d0f1f48eb97c9688ed0c1dc70";
n.AssignToClusterFamilyId="eed3ee76e8aa46e6907c9ca767f5c114";n.AssignDataToClusterFamilyId=
"20a0683a07f94a08a89b44b3bbaae382"}(s=n.WellKnownResource||(n.WellKnownResource=
{})),function(n){n.ITransformDotNet="ITransformDotNet"}(h=n.WellKnownDataTypeId||
(n.WellKnownDataTypeId={}));n.WelcomeSkipOptionId="welcomeSkipOption",function(n)
{n[n.None=0]="None";n[n.Upgrade_Yes=1]="Upgrade_Yes";n[n.Upgrade_No=2]="Upgrade_No";
n[n.ShellUICommands=3]="ShellUICommands";n[n.Run=4]="Run";n[n.PublishWebService=
5]="PublishWebService";n[n.PublishDataflow=6]="PublishDataflow";n[n.RepublishWebService=
7]="RepublishWebService";n[n.Save=8]="Save";n[n.SaveAs=9]="SaveAs";n[n.Discard_PressedYes=
10]="Discard_PressedYes";n[n.Discard_PressedNo=11]="Discard_PressedNo";n[n.Cancel=
12]="Cancel";n[n.Refresh=13]="Refresh";n[n.RemoveCredentials=14]="RemoveCredentials";
n[n.Settings=15]="Settings";n[n.Palette=16]="Palette";n[n.Search=17]="Search";n[
n.Download=18]="Download";n[n.Visualize=19]="Visualize";n[n.SendFeedback=20]="SendFeedback";
n[n.Feedback=21]="Feedback";n[n.OpenHelp=22]="OpenHelp";n[n.VisualizationParameter=
23]="VisualizationParameter";n[n.Visualization=24]="Visualization";n[n.HistogramMode=
25]="HistogramMode";n[n.BoxchartMode=26]="BoxchartMode";n[n.ColumnPicker=27]="ColumnPicker";
n[n.AddRule=28]="AddRule";n[n.RemoveRule=29]="RemoveRule";n[n.CloseColumnPicker=
30]="CloseColumnPicker";n[n.EnableAllowDuplicates=31]="EnableAllowDuplicates";n[
n.DisableAllowDuplicates=32]="DisableAllowDuplicates";n[n.PreviewExperiment=33]=
"PreviewExperiment";n[n.PreviewWebServiceGroup=34]="PreviewWebServiceGroup";n[n.
ThumbnailSize=35]="ThumbnailSize";n[n.AddModuleByDragging=36]="AddModuleByDragging";
n[n.AddModuleByDoubleClick=37]="AddModuleByDoubleClick";n[n.ExperimentEditor=38]=
"ExperimentEditor";n[n.Help=39]="Help";n[n.HelpSearched=40]="HelpSearched";n[n.HelpSearchResultClicked=
41]="HelpSearchResultClicked";n[n.HelpSemanticSynonymClicked=42]="HelpSemanticSynonymClicked";
n[n.WebServiceParameter=43]="WebServiceParameter";n[n.CreateNewParameter=44]="CreateNewParameter";
n[n.LinkExistingParameter=45]="LinkExistingParameter";n[n.UnlinkParameter=46]="UnlinkParameter";
n[n.RenameParameter=47]="RenameParameter";n[n.ProvideDefaultValue=48]="ProvideDefaultValue";
n[n.RemoveDefaultValue=49]="RemoveDefaultValue";n[n.RemoveParameter=50]="RemoveParameter";
n[n.ExperimentParameterInUse=51]="ExperimentParameterInUse";n[n.WebServicePort=52]=
"WebServicePort";n[n.DragNewPort=53]="DragNewPort";n[n.PublishToCommunity=54]="PublishToCommunity";
n[n.UploadDataset=55]="UploadDataset";n[n.TrialFeature=56]="TrialFeature";n[n.DisabledWebServicePublish=
57]="DisabledWebServicePublish";n[n.DisabledModule=58]="DisabledModule";n[n.DisabledDatasetUpload=
59]="DisabledDatasetUpload";n[n.ExceededModuleCountLimit=60]="ExceededModuleCountLimit";
n[n.TrialDialogSignIn=61]="TrialDialogSignIn";n[n.TrialDialogClose=62]="TrialDialogClose";
n[n.ExceededModuleRuntimeLimit=63]="ExceededModuleRuntimeLimit";n[n.ExceededStorageLimit=
64]="ExceededStorageLimit";n[n.ParallelRunDisabled=65]="ParallelRunDisabled";n[n.
DisabledFeature=66]="DisabledFeature";n[n.TrialDialogSignUp=67]="TrialDialogSignUp";
n[n.PrepareWebService=68]="PrepareWebService";n[n.SwitchExperimentDataFlow=69]="SwitchExperimentDataFlow";
n[n.SwitchWebServiceDataFlow=70]="SwitchWebServiceDataFlow";n[n.PrepareWebServiceFailed=
71]="PrepareWebServiceFailed";n[n.ScoringExperiment=72]="ScoringExperiment";n[n.
CreateScoringExperiment=73]="CreateScoringExperiment";n[n.CreateScoringExperimentFailed=
74]="CreateScoringExperimentFailed";n[n.UpdateScoringExperiment=75]="UpdateScoringExperiment";
n[n.UpdateScoringExperimentFailed=76]="UpdateScoringExperimentFailed";n[n.SwitchExperiment=
77]="SwitchExperiment";n[n.DeleteScoringExperiment=78]="DeleteScoringExperiment";
n[n.BubbleTutorial=79]="BubbleTutorial";n[n.UserDismiss=80]="UserDismiss";n[n.CopyExperimentAcrossWorkspace=
81]="CopyExperimentAcrossWorkspace";n[n.PlusNewExperiment=82]="PlusNewExperiment";
n[n.GuidedTour=83]="GuidedTour";n[n.GuidedExperiment=84]="GuidedExperiment";n[n.
GuidedExperimentStep1=85]="GuidedExperimentStep1";n[n.GuidedExperimentStep2=86]=
"GuidedExperimentStep2";n[n.GuidedExperimentStep3=87]="GuidedExperimentStep3";n[
n.GuidedExperimentStep4=88]="GuidedExperimentStep4";n[n.GuidedExperimentStep5=89]=
"GuidedExperimentStep5";n[n.GuidedExperimentStep6=90]="GuidedExperimentStep6";n[
n.GuidedExperimentStep7=91]="GuidedExperimentStep7";n[n.GuidedExperimentOpenFromDrawer=
92]="GuidedExperimentOpenFromDrawer";n[n.GuidedExperimentOpenFromGuidedTour=93]=
"GuidedExperimentOpenFromGuidedTour";n[n.GuidedTourStep1=94]="GuidedTourStep1";n[
n.GuidedTourStep2=95]="GuidedTourStep2";n[n.GuidedTourStep3=96]="GuidedTourStep3";
n[n.GuidedTourStep4=97]="GuidedTourStep4";n[n.GuidedTourStep5=98]="GuidedTourStep5";
n[n.GuidedTourStep6=99]="GuidedTourStep6";n[n.GuidedTourStep7=100]="GuidedTourStep7";
n[n.GuidedTourOpenFromNavigationBar=101]="GuidedTourOpenFromNavigationBar";n[n.GuidedTourOpenFromIntroVideo=
102]="GuidedTourOpenFromIntroVideo";n[n.DisabledModuleUpload=103]="DisabledModuleUpload";
n[n.DisabledPublishToCommunity=104]="DisabledPublishToCommunity";n[n.CopyExperimentFromGallery=
105]="CopyExperimentFromGallery";n[n.GuidedTourStep8=106]="GuidedTourStep8";n[n.
CommandBarShowLineage=107]="CommandBarShowLineage";n[n.CommandBarSave=108]="CommandBarSave";
n[n.CommandBarSaveAs=109]="CommandBarSaveAs";n[n.CommandBarDiscard=110]="CommandBarDiscard";
n[n.CommandBarPublish=111]="CommandBarPublish";n[n.CommandBarSubmit=112]="CommandBarSubmit";
n[n.CommandBarCancel=113]="CommandBarCancel";n[n.CommandBarPublishWebService=114]=
"CommandBarPublishWebService";n[n.CommandBarPublishToCommunity=115]="CommandBarPublishToCommunity";
n[n.CommandBarCreateScoringGraph=116]="CommandBarCreateScoringGraph";n[n.CommandBarRefresh=
117]="CommandBarRefresh";n[n.CommandBarPrepareWebService=118]="CommandBarPrepareWebService";
n[n.PlusNewNotebookMenu=119]="PlusNewNotebookMenu";n[n.PlusNewBlankNotebookOpen=
120]="PlusNewBlankNotebookOpen";n[n.PlusNewExampleNotebookOpen=121]="PlusNewExampleNotebookOpen";
n[n.CommandBarCopyExperimentAcrossWorkspace=122]="CommandBarCopyExperimentAcrossWorkspace";
n[n.NotebookList=123]="NotebookList";n[n.NotebookListRenameNotebook=124]="NotebookListRenameNotebook";
n[n.NotebookListDeleteNotebook=125]="NotebookListDeleteNotebook";n[n.NotebookCreation=
126]="NotebookCreation";n[n.NotebookFromContextMenu=127]="NotebookFromContextMenu";
n[n.NotebookStartOpening=128]="NotebookStartOpening";n[n.NotebookCompleteOpening=
129]="NotebookCompleteOpening";n[n.NotebookFailOpening=130]="NotebookFailOpening";
n[n.NotebookStartCreate=131]="NotebookStartCreate";n[n.NotebookCompleteCreate=132]=
"NotebookCompleteCreate";n[n.NotebookFailCreate=133]="NotebookFailCreate";n[n.MultiGeo=
134]="MultiGeo";n[n.MultiGeoListWorkspaces=135]="MultiGeoListWorkspaces";n[n.TabNavigation=
136]="TabNavigation";n[n.ExperimentsTab=137]="ExperimentsTab";n[n.WebServicesTab=
138]="WebServicesTab";n[n.NotebooksTab=139]="NotebooksTab";n[n.ModulesTab=140]="ModulesTab";
n[n.DatasetsTab=141]="DatasetsTab";n[n.TrainedModelsTab=142]="TrainedModelsTab";
n[n.SettingsTab=143]="SettingsTab";n[n.HomeTab=144]="HomeTab";n[n.DataflowsTab=145]=
"DataflowsTab";n[n.CompetitionUnpack=146]="CompetitionUnpack";n[n.CompetitionSubmitEntry=
147]="CompetitionSubmitEntry";n[n.Monaco=148]="Monaco";n[n.MonacoPopout=149]="MonacoPopout";
n[n.MonacoExpand=150]="MonacoExpand";n[n.UsePreviousResults=151]="UsePreviousResults";
n[n.DownloadCustomModuleExampleR=152]="DownloadCustomModuleExampleR";n[n.DownloadCustomModuleExamplePy=
153]="DownloadCustomModuleExamplePy";n[n.AnimatedExperiment=154]="AnimatedExperiment";
n[n.AnimatedExperimentExperimentOnBubble=155]="AnimatedExperimentExperimentOnBubble";
n[n.AnimatedExperimentExperimentBubbleBackPressed=156]="AnimatedExperimentExperimentBubbleBackPressed";
n[n.AnimatedExperimentExperimentOpenFromDrawer=157]="AnimatedExperimentExperimentOpenFromDrawer";
n[n.AnimatedExperimentOpenFromNavigationBar=158]="AnimatedExperimentOpenFromNavigationBar";
n[n.AnimatedExperimentOpenFromIntro=159]="AnimatedExperimentOpenFromIntro";n[n.AnimatedExperimentDontShowAgain=
160]="AnimatedExperimentDontShowAgain";n[n.AnimatedExperimentNotNow=161]="AnimatedExperimentNotNow";
n[n.MiniMap=162]="MiniMap";n[n.MiniMapDragged=163]="MiniMapDragged";n[n.MiniMapCollapsed=
164]="MiniMapCollapsed";n[n.MiniMapExpanded=165]="MiniMapExpanded";n[n.MiniMapResized=
166]="MiniMapResized";n[n.GalleryNotebook=167]="GalleryNotebook";n[n.GalleryNotebookPublishSubmit=
168]="GalleryNotebookPublishSubmit";n[n.NotebookListPublishNotebook=169]="NotebookListPublishNotebook";
n[n.PlusNewGalleryNotebookOpen=170]="PlusNewGalleryNotebookOpen";n[n.ProjectsTab=
171]="ProjectsTab";n[n.AnimatedExperimentExperimentBubbleNextPressed=172]="AnimatedExperimentExperimentBubbleNextPressed";
n[n.AnimatedExperimentExperimentBubbleClosed=173]="AnimatedExperimentExperimentBubbleClosed"}
(n.FeatureId||(n.FeatureId={}));c=n.FeatureId;n.WorkspaceNameRegex=/^[0-9a-zA-Z][0-9a-zA-Z-]*[a-zA-Z0-9]$/;
n.ExperimentSubmissionFailedRegExp=/([\s\S]*)(Request ID:.*$)/;n.GalleryUriTagRegExp=
new RegExp("^galleryUri:(.*)$","i");n.GalleryIdRegExp=new RegExp("^.+([a-f|0-9]{32})$",
"i"),function(n){n.GetErrorIdRegExp=/^Error (\d{4}): (.*)/;n.SkipErrorHeadingRegExp=
/(^\s*Error:\s*)/;n.SkipWhitespaceAndModuleOutputStrRegExp=/(^\s+|\[ModuleOutput\]|\s+$)/g;
n.StartMessageEndRegExp=/Record Starts at (.*):([\s\S]*)Record Ends at (.*)\./}(
l=n.ModuleError||(n.ModuleError={}));n.GuidedExperimentDescription="Experiment Tutorial";
n.NetworkErrorFlag="Service call failed due to a network error. "})(t=n.Constants||
(n.Constants={}))}(DataLab||(DataLab={})),function(n){var t;(function(n){var t=function(
){function n(n){this.date=n;this.localeValues={days:["Sunday","Monday","Tuesday",
"Wednesday","Thursday","Friday","Saturday"],daysAbbr:["Sun","Mon","Tue","Wed","Thu",
"Fri","Sat"],months:["January","February","March","April","May","June","July","August",
"September","October","November","December"],monthsAbbr:["Jan","Feb","Mar","Apr",
"May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ampm:["AM","PM"],ampmAbbr:["A",
"P"],dateSeparator:"/",timeSeparator:":",standard:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",
F:"dddd, MMMM dd, yyyy h:mm:ss tt",m:"MMMM dd",M:"MMMM dd",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",
R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",
T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"}}}
return n.parse=function(n){return(n+"").substr(0,6)==="/Date("?parseInt(n.substr(
6),10):this.parse.apply(this,arguments)},n.prototype.getLocaleValues=function(){
return this.localeValues},n.prototype.setLocaleValues=function(n){var t;this.localeValues=
n;this.localeValues.ampmAbbr=[this.localeValues.ampm[0][0],this.localeValues.ampm[
1][0]];t=this.localeValues.standard;t.f=t.D+" "+t.t;t.g=t.d+" "+t.t;t.G=t.d+" "+
t.T},n.prototype.toString=function(){var t=this,n;return arguments.length?(n=arguments[
0],n=this.localeValues.standard[n]||n,n=n.replace(/'([^']*)'/g,function(n,t){return this.
escapeEverything(t)}),this.reverse(this.reverse(n).replace(/(y{1,5}|M{1,4}|d{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|t{1,2}|z{1,3}|\/|:)(?!\\)/g,
function(n){return t.replaceCharactersWithReverse(n)}).replace(/\\(?!\\)/g,""))):
this.toString.apply(this,arguments)},n.prototype.pad=function(n,t,i){return i=i===
undefined?"0":i,n=n+"",t+1>=n.length&&(n=Array(t+1-n.length).join(i)+n),n},n.prototype.
truncate=function(n,t){return n=n+"",n.substr(n.length-t)},n.prototype.truncateAndPad=
function(n,t){return this.truncate(this.pad(n,t,"0"),t)},n.prototype.fixHour12=function(
n){return n=n%12,n===0?12:n},n.prototype.reverse=function(n){return n.split("").
reverse().join("")},n.prototype.escapeEverything=function(n){return"\\"+n.split(
"").join("\\")},n.prototype.replaceCharacters=function(n){var t=n.length,i,r,u,f;
switch(n[0]){case"y":switch(t){case 3:return this.pad(this.date.getFullYear().toString(
),t);case 1:return+this.truncate(this.date.getFullYear().toString(),2)+"";default:
return this.truncateAndPad(this.date.getFullYear().toString(),t)}case"M":switch(
t){case 4:return this.escapeEverything(this.localeValues.months[this.date.getMonth(
)]);case 3:return this.escapeEverything(this.localeValues.monthsAbbr[this.date.getMonth(
)]);case 2:return this.truncateAndPad((this.date.getMonth()+1).toString(),2);default:
return this.truncate((this.date.getMonth()+1).toString(),2)}case"d":switch(t){case
4:return this.escapeEverything(this.localeValues.days[this.date.getDay()]);case 3:
return this.escapeEverything(this.localeValues.daysAbbr[this.date.getDay()]);case
2:return this.truncateAndPad(this.date.getDate().toString(),2);default:return this.
truncate(this.date.getDate().toString(),2)}case"h":return t===2?this.truncateAndPad(
this.fixHour12(this.date.getHours()).toString(),2):this.truncate(this.fixHour12(
this.date.getHours()).toString(),2);case"H":return t===2?this.truncateAndPad(this.
date.getHours().toString(),2):this.truncate(this.date.getHours().toString(),2);case"m":
return t===2?this.truncateAndPad(this.date.getMinutes().toString(),2):this.truncate(
this.date.getMinutes().toString(),2);case"s":return t===2?this.truncateAndPad(this.
date.getSeconds().toString(),2):this.truncate(this.date.getSeconds().toString(),
2);case"t":return t===2?this.localeValues.ampm[this.date.getHours()<12?0:1]:this.
localeValues.ampmAbbr[this.date.getHours()<12?0:1];case"z":return(i=-this.date.getTimezoneOffset(
)/60,r=i<0,r&&(i=-i),u=parseInt(i,10),f=(i-u)*60,t===3)?(r?"-":"+")+this.pad(u,2)+
":"+this.pad(f,2):(r?"-":"+")+this.pad(u,t);case"/":return this.localeValues.dateSeparator
case":":return this.localeValues.timeSeparator}return""},n.prototype.replaceCharactersWithReverse=
function(n){return this.reverse(this.replaceCharacters(n))},n}();n.DateFormatter=
t})(t=n.Util||(n.Util={}))}(DataLab||(DataLab={})),function(n){var t;(function(t)
{function b(n,t,f){t===void 0&&(t=null);f===void 0&&(f=null);r("info",JSON.stringify(
[n,f]));u<=1&&i.info(n,t,f)}function k(n,t,f){t===void 0&&(t=null);f===void 0&&(
f=null);r("error",JSON.stringify([n,f]));u<=3&&i.error(n,t,f)}function d(n,t,f){
t===void 0&&(t=null);f===void 0&&(f=null);r("warn",JSON.stringify([n,f]));u<=2&&
i.warn(n,t,f)}function g(n,t,f){r("verbose",JSON.stringify([n,f]));u<=2&&i.verbose(
n,t,f)}function nt(n,t,r,u){i.writeEntry(n,t,r,u)}function tt(n,t){r("feedbackInfo",
JSON.stringify(t));i.feedbackInfo(n,t)}function it(n,t,u,f){typeof f.toJSON!="undefined"&&
delete f.toJSON;r("performance",JSON.stringify([u,f]));i.performance(n,t,u,f)}function rt(
n){i.timerStart(n)}function ut(n,t,r){i.timerStopAndLog(n,t,r)}function ft(t){r(
"featureUsage",n.Constants.FeatureId[t.featureID]);i.featureUsage(t,s);p({eventId:
n.Constants.FeatureId[t.featureID],action:n.Constants.FeatureId[t.groupID],name:
s,offer:t.experimentID,targetCampaign:t.data})}function et(t){r("customEvent",n.
Constants.FeatureId[t.key]);i.customEvent(t);p({eventId:t.key,action:t.type,name:
s,targetCampaign:t.data})}function ot(t,u,f,e){u===void 0&&(u=n.LocalizedResources.
exceptionOccurred);f===void 0&&(f=null);e===void 0&&(e=null);r("exception",JSON.
stringify([u||"",e||{}]));i.error(u,f,{exceptionMessage:t.message||t.toString(),
stack:t.stack||null,data:e})}function r(n,t,i){if(i===void 0&&(i=null),!(o<1)){while(
f.length>=o)f.shift();var r={severity:n,message:t};i&&(r.data=i);f.push(r)}}function st(
n,t,r){i.unhandledException?i.unhandledException(n,t,r,f):i.error(n,"window.onerror",
{line:r,url:t,trace:JSON.stringify(f)})}function ht(){u=window.environment&&window.
environment.dataLabLogLevel?h[window.environment.dataLabLogLevel]:0}function ct(
){o=window.environment&&window.environment.dataLabLogQueueLength?window.environment.
dataLabLogQueueLength:50}function y(n){try{MscomCustomEvent("ms.InteractionType",
"21","ms.customEvent",n.eventId||"","ms.ea_action",n.action||"","ms.ea_name",n.name||
"","ms.ea_offer",n.offer||"","ms.targetcampaign",n.targetCampaign||"")}catch(t){
u<=2&&i.warn("The call to log to MDA failed.","",t)}}function p(n){if(typeof MscomCustomEvent==
"function"){if(e.length)for(var t;t=e.splice(0,1)[0];)y(t);y(n)}else e.length<15&&
e.push(n)}function c(n){if(!n)throw"'logger' parameter is required";i=n;ht();ct(
)}function lt(n){if(!n)throw"Attempted to set WorkspaceID to non-valid value in logging.";
s=n}var i,o=50,f=[],s="",u=1,h,v,e,l,a,w;(function(n){n[n.verbose=0]="verbose";n[
n.info=1]="info";n[n.warn=2]="warn";n[n.error=3]="error";n[n.none=4]="none"})(h||
(h={}));t.info=b;t.error=k;t.warn=d;t.verbose=g;t.writeEntry=nt;t.feedbackInfo=tt;
t.performance=it;t.timerStart=rt;t.timerStopAndLog=ut;t.featureUsage=ft;t.customEvent=
et;t.exception=ot;v=function(){function n(n,t,r){t===void 0&&(t=null);r===void 0&&
(r=null);var u=new Error(n),f=Object.create(r);return f.stack=u.stack||null,i.error(
n,t,f),u}return n}();t.TracedException=v;e=[];t.setLogger=c;t.setWorkspaceId=lt;
t.traceUnhandledExceptions=!0;t.unhandledExceptionEvent=new ko.subscribable;l=function(
){function t(){if(!window.console)throw"window.console object must be present to create a ConsoleLogger";
}return t.prototype.info=function(n,t,i){console.info(this.format(n,t),i)},t.prototype.
error=function(n,t,i){console.error(this.format(n,t),i)},t.prototype.warn=function(
n,t,i){console.warn(this.format(n,t),i)},t.prototype.featureUsage=function(t){console.
info(n.Constants.FeatureId[t.featureID],t.data)},t.prototype.customEvent=function(
t){console.info(n.Constants.FeatureId[t.key],t.data)},t.prototype.format=function(
n,t){return t?t+": "+n:n},t}();t.ConsoleLogger=l;a=function(){function n(){}return n.
prototype.info=function(){},n.prototype.error=function(){},n.prototype.warn=function(
){},n.prototype.featureUsage=function(){},n.prototype.customEvent=function(){},n}
();t.NullLogger=a;window.console?c(new l):c(new a);w=window.onerror||function(){
return!1};window.onerror=function(n,i,r){return t.traceUnhandledExceptions&&st(n,
i,r),t.unhandledExceptionEvent.notifySubscribers({message:n,url:i,line:r}),w.apply(
this,arguments)}})(t=n.Log||(n.Log={}))}(DataLab||(DataLab={}));__extends=this.__extends||
function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&
(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(
t){function h(n){for(var t in n)n[t]=null}var i,r,u,f,e,o,s;t.reduceRetainingTreeVerbosity=
!1;i=function(){function i(){this.disposableId=i.createKeyFromID(i.nextDisposableId++);
this.objectsToDispose=Object.create(null);this.parentDisposalContext=null;this.stack=
null;i.ownershipAssertionContext&&(this.stack=new Error("").stack,i.ownershipAssertionContext[
this.disposableId]=this)}return i.createKeyFromID=function(n){return"disposable-"+
n},i.assertDisposablesInContext=function(t){var u=i.ownershipAssertionContext,r;
i.ownershipAssertionContext=Object.create(null);try{if(t(),Object.keys(i.ownershipAssertionContext).
length>0){r=new Error(n.LocalizedResources.disposableNotAssignedOwner);r.attachedContext=
i.ownershipAssertionContext;throw r;}}finally{i.ownershipAssertionContext=u}},i.
exemptFromDiposablesInContextAssertion=function(n){i.ownershipAssertionContext&&
delete i.ownershipAssertionContext[n.disposableId]},i.prototype.registerForDisposal=
function(){for(var t=this,r=[],n=0;n<arguments.length;n++)r[+n]=arguments[n];r.forEach(
function(n){t.objectsToDispose[n.disposableId]=n;n.parentDisposalContext=t.objectsToDispose;
i.ownershipAssertionContext&&(n.stack=null,delete i.ownershipAssertionContext[n.
disposableId])})},i.prototype.dispose=function(){for(var i=Object.keys(this.objectsToDispose),
n=i.length-1;n>=0;n--)this.objectsToDispose[i[n]].dispose();this.parentDisposalContext&&
delete this.parentDisposalContext[this.disposableId];t.reduceRetainingTreeVerbosity&&
h(this)},i.observableArrayOfDisposables=function(n){var t=ko.observableArray(n),
i;return["shift","pop"].forEach(function(n){var i=t[n];t[n]=function(){var n=i.apply(
t,arguments);return n.dispose(),n}}),["splice","remove","removeAll"].forEach(function(
n){var i=t[n];t[n]=function(){var n=i.apply(t,arguments);return n&&n.forEach(function(
n){n.dispose()}),n}}),i=function(n){return Array.isArray(n)&&t.removeAll(),t.apply(
t,arguments)},$.extend(i,t),i},i.ownershipAssertionContext=null,i.nextDisposableId=
0,i}();t.Disposable=i;r=function(n){function t(t){n.call(this);this.subscription=
t}return __extends(t,n),t.prototype.dispose=function(){this.subscription.dispose(
);n.prototype.dispose.call(this)},t}(i);t.DisposableSubscription=r;u=function(n)
{function t(t){n.call(this);this.object=t}return __extends(t,n),t.prototype.dispose=
function(){this.object.dispose();n.prototype.dispose.call(this)},t}(i);t.DisposableKnockoutObject=
u;f=function(n){function t(t,i,r,u){u===void 0&&(u=!1);n.call(this);this.type=i;
this.element=t;this.callback=r;this.capture=u;this.element.addEventListener(this.
type,this.callback,this.capture)}return __extends(t,n),t.prototype.dispose=function(
){this.element.removeEventListener(this.type,this.callback,this.capture);n.prototype.
dispose.call(this)},t}(i);t.DisposableEventListener=f;e=function(n){function t(t,
i){n.call(this);this.defaultDuration=t;this.callback=i}return __extends(t,n),t.prototype.
start=function(n){var t=this;n===void 0&&(n=this.defaultDuration);this.isCountingDown(
)&&this.cancel();this.timerHandle=setTimeout(function(){t.timerHandle=null;t.callback(
)},n)},t.prototype.cancel=function(){this.isCountingDown()&&(clearTimeout(this.timerHandle),
this.timerHandle=null)},t.prototype.isCountingDown=function(){return!!this.timerHandle}
,t.prototype.dispose=function(){this.cancel();n.prototype.dispose.call(this)},t}
(i);t.DisposableTimer=e;o=function(n){function t(t,i){n.call(this);ko.applyBindings(
t,i);this.element=i}return __extends(t,n),t.prototype.dispose=function(){ko.cleanNode(
this.element);n.prototype.dispose.call(this)},t}(i);t.DisposableKOApplyBindings=
o;s=function(n){function t(t,i){n.call(this);this.element=t;this.element.innerHTML=
i}return __extends(t,n),t.prototype.dispose=function(){this.element.innerHTML="";
n.prototype.dispose.call(this)},t}(i);t.DisposableSetHTML=s})(t=n.Util||(n.Util=
{}))}(DataLab||(DataLab={})),function(n){var t;(function(n){var t;(function(n){function i(
n){for(var i=t.exec(n),r=[],u;i!=null;)u=i[1]===undefined?i[2]:i[1],r.push(u),i=
t.exec(n);return r}function r(n){if(typeof n=="string"&&n.length>1){var t=n[0],i=
n[n.length-1];t===i&&(t==='"'||t==="'")&&(n=n.slice(1,-1))}return n}var t=/(?!\s*$)\s*(?:"([^"]*(?:[\S\s][^"]*)*)"|([^,"\s]*(?:\s+[^,"\s]+)*))\s*(?:,|$)/g;
n.getArrayFromCommaSeparatedString=i;n.removeSurroundingQuotes=r})(t=n.Str||(n.Str=
{}))})(t=n.Util||(n.Util={}))}(DataLab||(DataLab={})),function(n){var t;(function(
t){var i;(function(i){function r(i){var u=$.Deferred(),f=!1,r=new FileReader;r.onload=
function(n){if(!f){var t=n.target.result;u.resolve(t)}};r.onerror=r.onabort=function(
){f||(f=!0,u.reject(this.error))};try{r.readAsDataURL(i)}catch(e){return t.fail(
new Error(n.LocalizedResources.imageUploadError_GenericLoading))}return t.when(u.
promise())}i.readDataUrlFromBlob=r})(i=t.File||(t.File={}))})(t=n.Util||(n.Util=
{}))}(DataLab||(DataLab={})),function(n){var t;(function(t){function b(n){return n
instanceof r&&n.xmlHttpRequest&&n.xmlHttpRequest.responseText||n.message}function k(
t){var i=[],r,u;return t&&t.xmlHttpRequest?(i.push(n.Util.format(n.LocalizedResources.
infoErrorHttpStatusCode,t.xmlHttpRequest.status.toString())),r=t.xmlHttpRequest.
getResponseHeader("x-ms-request-id"),r&&i.push(n.Util.format(n.LocalizedResources.
infoErrorRequestId,r)),u=t.xmlHttpRequest.getResponseHeader("Date"),u&&i.push(n.
Util.format(n.LocalizedResources.infoErrorTimestamp,u))):i.push(n.LocalizedResources.
unexpectedError),i}function s(t){var i=!1,u;t.fail(function(t){var u;if(!i)if(t instanceof
Error)throw t;else if(n.Features.handleJsonParseErrorsEnabled()&&t instanceof f)
u={title:n.LocalizedResources.responseErrorNotification,details:t.message},o(u);
else if(t instanceof r&&t.message.indexOf(n.Constants.NetworkErrorFlag)>=0){var e=
new RegExp("^"+n.Constants.NetworkErrorFlag+"(.*) Request opened*"),s=t.message.
match(e)[1],u={title:n.LocalizedResources.networkErrorNotification,details:s};o(
u);n.Log.customEvent({key:"NetworkError",type:"Error",data:JSON.stringify(t.message)})}
else throw new Error("A promise failed with object"+String(t));});u=t.fail;t.fail=
function(){return i=!0,u.apply(t,arguments)}}function u(n){return n&&n.fail&&n.fail
instanceof Function&&n.done&&n.done instanceof Function&&n.always&&n.always instanceof
Function}function h(n){if(!u(n))throw new Error("Expected a jQuery-style promise");
}function d(){for(var i,n=[],t=0;t<arguments.length;t++)n[+t]=arguments[t];return n.
length>1&&n.forEach(h),n.forEach(function(n){u(n)&&n.fail(function(){})}),i=$.when.
apply($,n),s(i),i}function g(n,t,i,r){h(n);n.fail(function(){});var f,e=function(
){var n=t.apply(this,arguments);return u(n)&&n.fail(function(){}),n};return f=n.
then(e,i,r),s(f),f}function nt(n){var i=$.Deferred();return setTimeout(function(
){return i.reject(n)}),t.when(i)}function tt(n){var i=$.Deferred();return i.resolve(
n),t.when(i.promise())}function it(){function e(){return n.every(function(n){return n.
state()==="resolved"})}for(var n=[],i=0;i<arguments.length;i++)n[+i]=arguments[i];
var r=!1,u=$.Deferred(),f=[];return n.forEach(function(t){t.fail(function(n){r||
(r=!0,u.reject(n))});t.done(function(i){if(!r){var o=n.indexOf(t);f[o]=i;e()&&(r=
!0,u.resolve(f))}})}),t.when(u.promise())}function rt(n){var t=$("<div />");return t.
text(n).html()}function c(n){var t=n.match(w),i;if(t!==null){if(i=Number(t[1]),t[
2]!==undefined)throw"Unexpected UTC offset";return new Date(i)}throw"Invalid JSON date format";
}function ut(n,t){var i=n instanceof Array?n:[n];i.forEach(function(n){t.forEach(
function(t){if(!Object.prototype.hasOwnProperty.call(n,t))throw"Expected property missing: "+
t;n[t]=c(n[t])})})}function ft(n,t){var i,u,r;if(t===void 0&&(t=3),n<0)throw new
Error("Elapsed time cannot be less than zero.");return i=t===0?Math.floor(n/1e3):
n/1e3,u=Math.floor(i/3600),i-=u*3600,r=Math.floor(i/60),i-=r*60,u+":"+(r<10?"0"+
r:r.toString())+":"+(i<10?"0"+i.toFixed(t):i.toFixed(t))}function et(n,t){return t.
getTime()-n.getTime()}function ot(i){if(i.getTime()===t.minDate)return"-";var r=
new n.Util.DateFormatter(i);return r.toString("d")+" "+r.toString("T")}function st(
n,t){var r,u,f,i;if(t===void 0&&(t=3),r=["bytes","KB","MB","GB","TB","PB"],n<0)throw new
Error("Data size cannot be less than zero.");for(u=1,i=0;i<r.length;i++){if(n<1024*
u||i===r.length-1)return f=n/u,i===0||i===r.length-1?Math.round(f)+" "+r[i]:f.toPrecision(
t)+" "+r[i];u*=1024}}function ht(n){return Object.freeze(Object.create(n))}function ct(
n){for(var t in n)return!1;return!0}function lt(n){if(i==="DefaultSession")i=n;else
throw"Cannot set the session ID more than once";}function at(){return i}function vt(
){return i+"-"+ ++l}function yt(){for(var t=[],n=0;n<arguments.length;n++)t[+n]=
arguments[n];return{id:t.map(function(n){return n.id}).join(":")}}function pt(n,
t){var i=Math.floor(Math.random()*(t-n+1))+n;return Math.min(t,i)}function e(n,t)
{if(n instanceof Array)n.forEach(t);else if(typeof n=="object")for(var i in n)t(
n[i],i,n);else throw"Expected an Array or Object";}function a(n,t){if(n instanceof
Array)return n.map(t);var i=[];return e(n,function(r,u){i.push(t(r,u,n))}),i}function wt(
n,t){if(n instanceof Array)return n.filter(t);var i=[];return e(n,function(r,u){
t(r,u,n)&&i.push(r)}),i}function bt(n,t,i){var u,r,e,f;if(t===void 0&&(t=function(
){return!0}),n instanceof Array){for(u=n,r=0;r<u.length;r++)if(f=t(u[r],r,n),f)return u[
r]}else if(typeof n=="object"){for(e in n)if(f=t(n[e],e,n),f)return n[e]}else throw"Expected an Array or Object";
if(typeof i=="undefined")throw"No matching value found";else return i}function kt(
n){return a(n,function(n){return n})}function dt(n){var t,i;if(n instanceof Array)
return n.length;t=0;for(i in n)t++;return t}function gt(n){if(n instanceof Array)
return n.length===0;for(var t in n)return!1;return!0}function ni(n,t,i){i===void
0&&(i=!0);for(var r=0;r<n.length;r++)if(n[r]===t){n.splice(r,1);return}if(i)throw new
Error("Couldn't find element in array");}function v(){var n={};return Object.defineProperty(
n,"clear",{value:function(){for(var t in n)delete n[t]},writable:!0,configurable:
!0,enumerable:!1}),Object.defineProperty(n,"getItem",{value:function(t){return t
in n?n[t]:null},writable:!0,configurable:!0,enumerable:!1}),Object.defineProperty(
n,"key",{value:function(t){Object.keys(n)[t]},writable:!0,configurable:!0,enumerable:
!1}),Object.defineProperty(n,"removeItem",{value:function(t){delete n[t]},writable:
!0,configurable:!0,enumerable:!1}),Object.defineProperty(n,"setItem",{value:function(
t,i){n[t]=i},writable:!0,configurable:!0,enumerable:!1}),Object.defineProperty(n,
"length",{configurable:!1,enumerable:!1,get:function(){return Object.keys(n).length}
}),Object.defineProperty(n,"remainingSpace",{configurable:!1,enumerable:!1,get:function(
){return Infinity}}),n}function ti(n){for(var i=[],t=1;t<arguments.length;t++)i[
t-1]=arguments[t];return n.replace(/\{[0-9]\}/g,function(n){var t=parseInt(n.replace(
"{","").replace("}",""));if(i.length<=t)throw new Error("Parameter with index "+
t+" not found");return i[t]})}function ii(t,i,r){return t===1?n.Util.format(i,t.
toString()):n.Util.format(r,t.toString())}function ri(n){return n.slice(0,8)+"-"+
n.slice(8,12)+"-"+n.slice(12,16)+"-"+n.slice(16,20)+"-"+n.slice(20)}function ui(
n){var t=n.split(/(?=[A-Z])/);return t.reduce(function(n,t){return n+" "+t},"")}
function fi(n){var t=[];for(var i in n)n.hasOwnProperty(i)&&t.push(i);return t}function ei(
n,t){return parseFloat(n.toPrecision(t))}function oi(t,i){var r,f,u;return i===void
0&&(i=null),r=$.Deferred(),t()?r.resolve().promise():(f=function(n){n&&(u.dispose(
),u=null,r.resolve())},u=t.subscribe(f),i&&i.registerForDisposal(new n.Util.DisposableSubscription(
u)),r.promise())}function si(n,t,i){if(i&&i.forEach(function(n){p(n.componentName,
n.viewModel,n.template)}),!document.getElementById(n)){var r=t;if(!$("head"))throw"<head> is not ready, make sure you instantiate the control on document ready";
$("head").append(r)}return n}function p(n,t,i){ko.components.isRegistered(n)||ko.
components.register(n,{viewModel:t,template:i})}function hi(n){return Object.keys(
n).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(n[t])}).join(
"&")}function ci(n){return n*1048576}function li(n){return n.length/4*3}function ai(
n){return ko.computed({read:n,deferEvaluation:!0})}function vi(n){return ko.pureComputed(
{read:n,deferEvaluation:!0})}function yi(n){var i=new Shell.Utilities.QueryStringBuilder(
window.location.search),f=i.containsKey(n),r,t,u;return f&&(r=i.getValue(n),i.remove(
[n]),t=i.toString(!0),t=t==="?"?"":t,u=location.protocol+"//"+location.host+location.
pathname+t+location.hash,history.replaceState({},document.title,u)),r}function pi(
n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function o(n){
var t=new Shell.UI.Notifications.Notification(n.title,"error");return n.details&&
t.setDetailsText(n.details),t.setActions([new Shell.UI.Notifications.Buttons.close]),
Shell.UI.Notifications.add(t),t}function wi(n,t,i,r){return t===void 0&&(t=""),i===
void 0&&(i="_blank"),r===void 0&&(r=null),Shell.Communication.Rpc.Functions.windowOpen(
t,i,r,function(){var t=Shell.Communication.Rpc.Functions.takeLastWindowOpened();
n(t)})}function bi(t){t=t||window.open("","_blank");var r=window.location.origin?
window.location.origin:"https://studio.azureml.net",i="AMLSpinnerId",u="<div id='"+
i+"' style='left:50%;position:fixed;background: transparent url("+r+"/Content/Images/spinner-md.gif) 40% 40% no-repeat;top:140px;bottom:60px;width:960px;margin-left:-380px;'><\/div>";
try{$(t.document.body).find("#"+i).length===0&&$(t.document.body).html(u)}catch(f)
{n.Log.exception(f,"Could not add spinner to new window","addSpinnerToBlankWindow",
{newWindow:t})}return t}var w=/^\/Date\(([+-]?\d+)([+-]\d+)?\)\/$/,r,f,i,l,y;t.minDate=
-621355968e5;r=function(){function n(n,t){this.error=new Error(n);this.xmlHttpRequest=
t}return Object.defineProperty(n.prototype,"name",{get:function(){return this.error.
name},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"message",
{get:function(){return this.error.message},enumerable:!0,configurable:!0}),Object.
defineProperty(n.prototype,"isSuccess",{get:function(){return this.xmlHttpRequest&&
this.xmlHttpRequest.status===200},enumerable:!0,configurable:!0}),n.prototype.toString=
function(){return String(this.error)},n}();t.AjaxError=r;f=function(){function n(
n){this.error=new Error(n)}return Object.defineProperty(n.prototype,"name",{get:
function(){return this.error.name},enumerable:!0,configurable:!0}),Object.defineProperty(
n.prototype,"message",{get:function(){return this.error.message},enumerable:!0,configurable:
!0}),n.prototype.toString=function(){return String(this.error)},n}();t.JsonParseError=
f;t.getErrorDetails=b;t.ajaxErrorMetas=k;t.isPromise=u;t.when=d;t.then=g;t.fail=
nt;t.succeed=tt;t.all=it;t.encodeAsHtml=rt;t.parseJsonDate=c;t.replaceJsonDates=
ut;t.formatElapsedTime=ft;t.getElapsedTimeMilliseconds=et;t.formatDate=ot;t.formatDataSize=
st;t.createReadOnlyView=ht;t.isObjectEmpty=ct;i="DefaultSession";t.setSessionId=
lt;t.getSessionId=at;l=0;t.generateUID=vt;t.tuple=yt;t.randomInt=pt;t.forEach=e;
t.map=a;t.filter=wt;t.first=bt;t.values=kt;t.size=dt;t.isEmpty=gt;t.removeElementFromArray=
ni;t.localStorage=v();t.sessionStorage=v();t.format=ti;t.formatWithPluralOption=
ii;t.resurrectDashesInGUID=ri;t.addSpaceAfterCapitals=ui;t.getAllPropertyNames=fi;
t.reducePrecision=ei;t.whenTrue=oi;y=function(){function n(n){var t=this;n===void
0&&(n=[]);this.items=Object.create(null);this.count=0;n.forEach(function(n){return t.
add(n)})}return Object.defineProperty(n.prototype,"size",{get:function(){return this.
count},enumerable:!0,configurable:!0}),n.prototype.add=function(n){return n in this.
items?!1:(this.items[n]=null,this.count++,!0)},n.prototype.has=function(n){return n
in this.items},n.prototype.delete=function(n){n in this.items&&(delete this.items[
n],this.count--)},n.prototype.clear=function(){this.items=Object.create(null);this.
count=0},n.prototype.forEach=function(n){var i=this;t.forEach(this.items,function(
t,r){return n(r,r,i)})},n.prototype.map=function(n){var i=this;return t.map(this.
items,function(t,r){return n(r,r,i)})},n.prototype.exceptWith=function(n){var t=
this;n.forEach(function(n){return t.delete(n)})},n.prototype.unionWith=function(
n){var t=this;n.forEach(function(n){return t.add(n)})},n.prototype.overlaps=function(
n){var t=this;return n.some(function(n){return t.has(n)})},n.prototype.setEqual=
function(n){var t=this;return this.count==n.length&&n.every(function(n){return t.
has(n)})},n.prototype.toArray=function(){return Object.keys(this.items)},n}();t.
StringSet=y;t.initializeTemplateIfNecessary=si;t.registerComponent=p;t.param=hi;
t.megaBytesToBytes=ci;t.getBytesEncodedInBase64String=li;t.deferredComputed=ai;t.
deferredPureComputed=vi;t.getQueryParamValueAndRemoveIfPresent=yi;t.escapeRegExpString=
pi;t.showErrorNotification=o;t.wrapWithWindowPreOpener=wi;t.addSpinnerToBlankWindow=
bi})(t=n.Util||(n.Util={}))}(DataLab||(DataLab={})),function(n){var t=function()
{function t(t){t===void 0&&(t=null);this.id=t?t:n.Util.generateUID()}return t}();
n.ObjectWithId=t}(DataLab||(DataLab={})),function(n){function r(t){return n.Util.
Disposable.apply(t),t.dispose=n.Util.Disposable.prototype.dispose.bind(t),t.registerForDisposal=
n.Util.Disposable.prototype.registerForDisposal.bind(t),t}function t(){function e(
n){u.notifySubscribers(n,i)}var r=Object.create(null),u=ko.observable(r),h=ko.observable(
0),f=ko.observable(!1),t=function(){if(arguments.length>0)throw"observableMaps do not support ko.observable style writes.";
return n.Util.createReadOnlyView(u())};return t.__ko_proto__=ko.observable,t.observable=
u,t.isInModifyBlock=f,t.lookup=function(n){return r[n]},t.contains=function(n){return n
in r},t.put=function(n,i){var s=n in r,h=r[n],c=s?1:0;o(i,h)&&s||(f()===!1&&u.valueWillMutate(
),r[n]=i,s||t.count(t.count()+1),f()===!1&&u.valueHasMutated(),e({type:c,key:n,oldValue:
h,newValue:i}))},t.clear=function(){t.modify(function(){for(var n in r)t.remove(
n)})},t.remove=function(n){if(n in r){f()===!1&&u.valueWillMutate();var i=r[n];delete
r[n];t.count(t.count()-1);f()===!1&&u.valueHasMutated();e({type:2,key:n,oldValue:
i})}},t.modify=function(n){var t=!1;f()===!1&&(t=!0,f(!0),u.valueWillMutate());try{
n()}finally{t&&(f(!1),u.valueHasMutated())}},t.subscribeToCollectionChanges=function(
n){return u.subscribe(n,null,i)},t.transform=function(n){return s(t,n)},t.forEach=
function(n){for(var t in r)n(r[t])},t.keys=function(){return Object.keys(r)},t.subscribe=
function(){return u.subscribe.apply(u,arguments)},t.count=h,t}function e(){function o(
n,t){if(i.lookup(n)===undefined)i.put(n,t);else throw new Error("Maps in union must have disjoint key sets");
}function s(n,t){i.put(n,t)}function h(n){i.remove(n)}function c(n){switch(n.type)
{case 0:o(n.key,n.newValue);break;case 1:s(n.key,n.newValue);break;case 2:h(n.key);
break;default:throw"Unknown collection change type";}}for(var i,u,f=[],e=0;e<arguments.
length;e++)f[+e]=arguments[e];return i=r(t()),u=ko.computed({read:function(){var
n=!1;return f.forEach(function(t){n=n||t.isInModifyBlock()}),n},write:function(n)
{f.forEach(function(t){t.isInModifyBlock(n)})}}),i.registerForDisposal(new n.Util.
DisposableSubscription(u.subscribe(function(n){n?(i.isInModifyBlock(!0),i.observable.
valueWillMutate()):(i.isInModifyBlock(!1),i.observable.valueHasMutated())}))),i.
modify=function(n){var t=!1;u()===!1&&(t=!0,u(!0));try{n()}finally{t&&u(!1)}},f.
forEach(function(t){n.Util.forEach(t(),function(n,t){return o(t,n)});i.registerForDisposal(
new n.Util.DisposableSubscription(t.subscribeToCollectionChanges(function(n){c(n)}
)))}),i}function o(n,t){return u(n)&&u(t)&&n==t}function u(n){return typeof n!="object"&&
typeof n!="function"}function s(i,u){function e(n){switch(n.type){case 0:case 1:
f.put(n.key,u(n.newValue,n.key));break;case 2:f.remove(n.key);break;default:throw"Unknown collection change type";
}}var f=r(t());return n.Util.forEach(i(),function(n,t){f.put(t,u(n,t))}),f.registerForDisposal(
new n.Util.DisposableSubscription(i.isInModifyBlock.subscribe(function(n){n?(f.isInModifyBlock(
!0),f.observable.valueWillMutate()):(f.isInModifyBlock(!1),f.observable.valueHasMutated(
))})),new n.Util.DisposableSubscription(i.subscribeToCollectionChanges(e))),f}var
i="collectionChange",f;(function(n){n[n.add=0]="add";n[n.replace=1]="replace";n[
n.remove=2]="remove"})(n.CollectionChangeType||(n.CollectionChangeType={}));f=n.
CollectionChangeType;n.observableMap=t;n.observableMapUnion=e}(DataLab||(DataLab=
{})),function(n){var t;(function(t){function f(n,t,i){return{status:n.status,statusText:
n.statusText,requestUrl:t,requestId:n.getResponseHeader("x-ms-client-request-id"),
isSecondAttempt:i}}function c(n,t,i){return{requestUrl:t,isSecondAttempt:i}}function l(
n){return window.Blob&&n instanceof Blob}function a(t,i){var r=t.lengthComputable?
h*t.total:s,u;Math.floor(i/r)<Math.floor(t.loaded/r)&&(u=t.lengthComputable?t.loaded/
t.total*100+"% - "+t.loaded+" bytes":t.loaded+" bytes",n.Log.info("Upload progress: "+
u,"logUploadProgress",{loaded:t.loaded,total:t.total,determinateLength:t.lengthComputable}))}
function v(n){return n===r.JSON||n===r.None?r.Text:n}function y(t,i,u,e){if(i===
r.JSON)try{return t.responseText?JSON.parse(t.responseText):""}catch(o){var s=f(
t,u,e),h="Failed to deserialize an API response as JSON";s.exception=String(o);n.
Log.error(h,"getResponse",s);throw new n.Util.JsonParseError(n.LocalizedResources.
JsonDeserializationErrorFlag+": "+String(o));}else return i===r.Text?t.responseText:
i===r.None?null:t.response}function p(n){return n===1223?!0:n>=200&&n<=299?!0:!1}
function w(n){var t=l(n.data);return t?i.Blob:typeof n.data=="undefined"?i.None:
n.sendDataFormat?n.sendDataFormat:i.JsonString}function b(t){var i=Object.create(
{}),r;return i["x-ms-client-session-id"]=n.Util.getSessionId(),i.Accept="*/*",t&&
(i[e]=t),r=$("[name=__RequestVerificationToken]").val(),r&&(i.__RequestVerificationToken=
r),i}function k(t){t.loggedUrl||(t.loggedUrl=t.url);t.settings||(t.settings={});
t.settings.sendDataFormat=w(t.settings);var i=$.Deferred();return o(t,i,!1),n.Util.
when(i.promise())}function o(t,s,h){var w=this,tt=t.settings.sendDataFormat===i.
Blob,d=Object.create(t.additionalHeaders||{}),l,g,k;tt||(d["Content-Type"]="application/json;charset=UTF-8");
t.settings=$.extend({type:"GET",responseType:r.JSON,reportUploadProgress:!1},t.settings);
l=new XMLHttpRequest;g=new Date;l.open(t.settings.type,t.url);l.responseType=v(t.
settings.responseType);n.Util.forEach(d,function(n,t){return l.setRequestHeader(
t,n)});var nt=function(){o(t,s,!0)},b=function(i){var f=new Date,e=n.Util.format(
n.LocalizedResources.requestErrorNotification,t.url),r=i+e+" Request opened: "+g.
toISOString()+" Onerror called: "+f.toISOString();n.Log.warn(r,u,c(l,t.loggedUrl,
h));h?s.rejectWith(w,[new n.Util.AjaxError(r,l)]):nt()},it=function(){var i="Service call failed. Error "+
l.status+" ("+l.statusText+") when requesting "+t.loggedUrl;n.Log.warn(i,u,f(l,t.
loggedUrl,h));l.status===401&&t.redirectOn401?(alert(n.LocalizedResources.sessionExpired),
window.location.reload()):h?s.rejectWith(w,[new n.Util.AjaxError(i,l)]):nt()},rt=
function(){var i,r;t.loggedUrl!==n.ClientTelemetryLogger.postDataUrl&&n.Log.info(
"Service call finished successfully",u,f(l,t.loggedUrl,h));i=l.getResponseHeader(
e);i&&(w.cachedAccessToken=i);try{r=y(l,t.settings.responseType,t.loggedUrl,h)}catch(o)
{if(n.Features.handleJsonParseErrorsEnabled()){s.rejectWith(w,[o]);return}throw o;
}s.resolveWith(w,[r])};l.onabort=function(){l.getAllResponseHeaders()&&b("Service call was aborted.")}
;l.onerror=function(){b(n.Constants.NetworkErrorFlag)};l.ontimeout=function(){b(
"Service call failed due to a timeout.")};l.onload=function(){p(l.status)?rt():it(
)};t.settings.reportUploadProgress&&l.upload&&(k=0,l.upload.onprogress=function(
n){a(n,k);k=n.loaded;s.notifyWith(w,[n])});switch(t.settings.sendDataFormat){case
i.Blob:l.send(t.settings.data);break;case i.JsonString:l.send(JSON.stringify(t.settings.
data));break;case i.Raw:l.send(t.settings.data);break;case i.None:l.send();break
default:throw new Error("Unhandled case for sending the request data.");}}var u=
"Client.sendRequest",e="DataLabAccessToken",s=5242880,h=.2,r=function(){function n(
){}return Object.defineProperty(n,"ArrayBuffer",{get:function(){return"arraybuffer"}
,enumerable:!0,configurable:!0}),Object.defineProperty(n,"JSON",{get:function(){
return"json"},enumerable:!0,configurable:!0}),Object.defineProperty(n,"Blob",{get:
function(){return"blob"},enumerable:!0,configurable:!0}),Object.defineProperty(n,
"Document",{get:function(){return"document"},enumerable:!0,configurable:!0}),Object.
defineProperty(n,"Text",{get:function(){return"text"},enumerable:!0,configurable:
!0}),Object.defineProperty(n,"None",{get:function(){return"none"},enumerable:!0,
configurable:!0}),n}(),i;t.ResponseType=r;i=function(){function n(){}return Object.
defineProperty(n,"JsonString",{get:function(){return"json"},enumerable:!0,configurable:
!0}),Object.defineProperty(n,"Raw",{get:function(){return"raw"},enumerable:!0,configurable:
!0}),Object.defineProperty(n,"Blob",{get:function(){return"blob"},enumerable:!0,
configurable:!0}),Object.defineProperty(n,"None",{get:function(){return"none"},enumerable:
!0,configurable:!0}),n}();t.SendDataFormat=i;t.generateGeneralClientHeaders=b;t.
sendRequest=k})(t=n.AjaxClient||(n.AjaxClient={}))}(DataLab||(DataLab={})),function(
n){var t;(function(n){function t(n){return n.lastIndexOf("Numeric",0)===0}n.isNumericFeature=
t})(t=n.DataContract||(n.DataContract={}))}(DataLab||(DataLab={})),function(n){var
t;(function(n){function t(n){for(var r,i,u=n[0],f=[],t=0;t<u.length;t++){for(r="Numeric",
i=1;i<n.length&&r==="Numeric";i++)n[i][t]&&(/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?$/.
test(n[i][t])||(r="String"));f.push({name:u[t],featureType:r,index:t,elementType:
""})}return f}function i(n){for(var u=[],r=[],i=n.split(","),t=0;t<i.length;t++)
(/^[^\"].*[^\"]$/.test(i[t])||/^\".*\"$/.test(i[t])||/^[^\"]$/.test(i[t]))&&r.length===
0?u.push(i[t]):(r.push(i[t]),/.*\"$/.test(i[t])&&(u.push(r.join(",")),r=[]));return u}
function r(n){var r={records:null,features:null,name:"Converted CSV data",numberOfRows:
0,numberOfColumns:0},u=n.split("\r\n");return u.length<2?null:(r.records=u.map(function(
n){return i(n)}),r.features=t(r.records),r.records.shift(),r)}function u(n){return{
records:[],features:[],name:"Dummy statistics",numberOfRows:5,numberOfColumns:n.
features.length}}n.convertCsvToDataTable=r;n.calculateStats=u})(t=n.Util||(n.Util=
{}))}(DataLab||(DataLab={})),function(n){var t;(function(n){var t=function(){function t(
){this.queue=[]}return t.prototype.enqueue=function(t){var r=this,i=$.Deferred(),
u=n.then(i,function(){return t()}).always(function(){setTimeout(function(){r.onCurrentQueueItemCompleted(
)},0)});return this.queue.push(i),this.queue.length===1&&i.resolve(),u},t.prototype.
onCurrentQueueItemCompleted=function(){var n=this.queue.shift();if(!n)throw new Error(
"Expected a completed operation at the head of the queue.");this.queue.length>=1&&
this.queue[0].resolve()},t.prototype.size=function(){return this.queue.length},t}
();n.PromiseQueue=t})(t=n.Util||(n.Util={}))}(DataLab||(DataLab={})),function(n)
{var t;(function(n){var t,i;(function(n){n.Any="Any"})(t=n.WellKnownDataTypeIds||
(n.WellKnownDataTypeIds={}));i=function(){function n(n){if(!n)throw new Error("'dataTypeId' is required");
this.dataTypeId=n;this.name=n;this.description="";this.fileExtension=null;this.allowUpload=
!0;this.allowPromotion=!0;this.allowModelPromotion=!1}return n.prototype.areSame=
function(n){return n.allowPromotion===this.allowPromotion&&n.allowModelPromotion===
this.allowModelPromotion&&n.allowUpload===this.allowUpload&&n.dataTypeId===this.
dataTypeId&&n.description===this.description&&n.fileExtension===this.fileExtension&&
n.name===this.name},n.prototype.acceptsConnectionFrom=function(n){return this.areSame(
n)||this.dataTypeId===t.Any||n.dataTypeId===t.Any},n.prototype.toString=function(
){return this.dataTypeId},n}();n.DataType=i})(t=n.Model||(n.Model={}))}(DataLab||
(DataLab={}));__extends=this.__extends||function(n,t){function r(){this.constructor=
n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t;(function(n){var t=function(){function n(n,t,i,r){t===void
0&&(t=new Date);i===void 0&&(i=null);r===void 0&&(r=0);this.description=ko.observable(
"");this.name=ko.observable("");this.id=n;this.created=t;this.familyId=i;this.serviceVersion=
r;this.isLatest=ko.observable(!0);this.category=null}return n}(),i;n.Resource=t;
i=function(n){function t(t,i,r,u,f){r===void 0&&(r=new Date);u===void 0&&(u=null);
f===void 0&&(f=0);n.call(this,t,r,u,f);this.dataType=i}return __extends(t,n),t}(
t);n.DataResource=i})(t=n.Model||(n.Model={}))}(DataLab||(DataLab={})),function(
n){var t;(function(t){function i(t){var i=t.split(".");if(i.length!==3)throw new
Error(n.Util.format(n.LocalizedResources.componentCount,i.length.toString()));return{
workspaceId:i[0],familyId:i[1],instanceId:i[2]}}function r(t,r){var u=i(t);if(u.
familyId!==r)throw new n.Log.TracedException(n.LocalizedResources.parseResourceIdAndValidate,
"parseResourceIdAndValidateFamily",{resourceId:t,familyId:r});return u}function u(
n){return n.workspaceId+"."+n.familyId}t.parseResourceId=i;t.parseResourceIdAndValidateFamily=
r;t.createGloballyUniqueFamilyId=u})(t=n.DataContract||(n.DataContract={}))}(DataLab||
(DataLab={})),function(n){var t;(function(t){function f(f,e){var s=t.parseResourceIdAndValidateFamily(
f.Id,f.FamilyId),h=t.createGloballyUniqueFamilyId(s),c=new n.Model.Dataset(f.Id,
e.getDataTypeWithId(f.DataTypeId),n.Util.parseJsonDate(f.CreatedDate),h,f.ServiceVersion,
f.VisualizeEndPoint,f.SchemaEndPoint,f.SchemaStatus),o=i(f,c);return o.category+=
f.Owner==="Microsoft Corporation"?r:u,o}function e(r,u){var f=t.parseResourceIdAndValidateFamily(
r.Id,r.FamilyId),e=t.createGloballyUniqueFamilyId(f),o=new n.Model.TrainedModel(
r.Id,u.getDataTypeWithId(r.DataTypeId),n.Util.parseJsonDate(r.CreatedDate),e,r.ServiceVersion);
return i(r,o)}function o(r,u){var f=t.parseResourceIdAndValidateFamily(r.Id,r.FamilyId),
e=t.createGloballyUniqueFamilyId(f),o=new n.Model.Transform(r.Id,u.getDataTypeWithId(
r.DataTypeId),n.Util.parseJsonDate(r.CreatedDate),e,r.ServiceVersion);return i(r,
o)}function i(t,i){var e,r,f,o,u;if(i.name(t.Name),i.description(t.Description),
i.downloadLocation=t.DownloadLocation,i.owner=t.Owner,i.isLatest(t.IsLatest),i.downloadLocation&&
(i.downloadLocation.Size=t.Size),i.filename=t.UploadedFromFilename,t.PromotedFrom)
{if((e=function(){n.Log.error("Incorrect format for 'PromotedFrom' field: "+t.PromotedFrom)}
,r=t.PromotedFrom.split("."),r.length<5)||(f=/^[A-F0-9]{32}$/i,o=/^[A-F0-9]{8}-[A-F0-9]{4}-[A-F0-9]{4}-[A-F0-9]{4}-[A-F0-9]{12}-[A-F0-9]+$/i,
!(f.test(r[0])&&f.test(r[2])))||(u=r.length-2,r[u]&&!o.test(r[u])))return e(),i;
i.experimentId=r.filter(function(n,t){return t<u}).join(".");i.moduleId=r[u];i.outputName=
r.filter(function(n,t){return t>u}).join(".")}return i}var r="\\"+n.LocalizedResources.
datasetCategorySamples,u="\\"+n.LocalizedResources.datasetCategoryUserCreated;t.
deserializeDataset=f;t.deserializeTrainedModel=e;t.deserializeTransformModule=o}
)(t=n.DataContract||(n.DataContract={}))}(DataLab||(DataLab={}));__extends=this.
__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(
i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(
t){var i=function(t){function i(i,r,u,f,e,o,s,h){t.call(this,i,r,u,f,e);this.category=
n.Constants.ResourceCategory.Dataset;this.visualizeEndPoint=o;this.schemaEndPoint=
s;this.schemaStatus=h}return __extends(i,t),i}(t.DataResource);t.Dataset=i})(t=n.
Model||(n.Model={}))}(DataLab||(DataLab={}));__extends=this.__extends||function(
n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[
i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(t){function e(
n,t){if(n instanceof i&&t instanceof r)return{input:n,output:t};if(n instanceof r&&
t instanceof i)return{input:t,output:n};throw"Expected one InputPort and one OutputPort";
}var u,f,i,r;(function(n){var t;(function(n){n.Compatible="compatiblePort";n.Incompatible=
"incompatiblePort";n.Default="idlePort";n.Replaceable="replaceablePort";n.CompatibleSnapped=
"compatibleSnapped";n.Selected="selectedPort";n.Connected="connectedPort"})(t=n.
PortState||(n.PortState={}))})(u=t.Constants||(t.Constants={})),function(n){n.PortClass=
"port"}(u=t.Constants||(t.Constants={}));f=function(t){function r(i,r){var u=this;
if(r===void 0&&(r=0),t.call(this),this.outputEndpoint=null,this.parent=null,this.
connectionAdded=new ko.subscribable,this.connectionRemoved=new ko.subscribable,this.
isWebServicePort=!1,!i)throw"'dataType' parameter is required";this.connectedPorts=
n.observableMap();this.descriptor=i;this.ordinal=r;this.connectedWebServicePorts=
ko.computed(function(){return n.Util.filter(n.Util.values(u.connectedPorts()),function(
n){return n.isWebServicePort})});this.connectedNonWebServicePorts=ko.computed(function(
){return n.Util.filter(n.Util.values(u.connectedPorts()),function(n){return!n.isWebServicePort}
)});this.isConnected=ko.computed(function(){return!n.Util.isEmpty(u.connectedNonWebServicePorts(
))})}return __extends(r,t),Object.defineProperty(r.prototype,"name",{get:function(
){return this.descriptor.name},enumerable:!0,configurable:!0}),Object.defineProperty(
r.prototype,"friendlyName",{get:function(){return this.descriptor.friendlyName},
enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"optional",{get:
function(){return this.descriptor.optional},enumerable:!0,configurable:!0}),r.prototype.
setParent=function(n){if(this.parent)throw"Parent GraphNode already set";this.parent=
n},r.prototype.isConnectedTo=function(n){return this.connectedPorts.lookup(n.id)!==
undefined},r.prototype.compatibilityWithPort=function(){throw"abstract: compatibilityWithPort";
},r.prototype.disconnect=function(t){var i=this,t=t||n.Util.values(this.connectedPorts(
));t.forEach(function(n){i.disconnectFrom(n)})},r.prototype.disconnectFrom=function(
n){this.connectedPorts.remove(n.id);n.connectedPorts.remove(this.id);this.connectionRemoved.
notifySubscribers(e(this,n));this instanceof i?(this.dirtyStatusInfo.dirty(),this.
dirtyDraftState.dirty()):(n.dirtyStatusInfo.dirty(),n.dirtyDraftState.dirty())},
r.prototype.connectTo=function(n){if(!this.isCompatible(n))throw"Invalid port connection";
this.isConnectedTo(n)||(this.connectedPorts.put(n.id,n),n.connectedPorts.put(this.
id,this),this.connectionAdded.notifySubscribers(e(this,n)),this instanceof i?(this.
dirtyStatusInfo.dirty(),this.dirtyDraftState.dirty()):(n.dirtyStatusInfo.dirty(),
n.dirtyDraftState.dirty()))},r.prototype.isCompatible=function(n){return this.parent!==
null&&n.parent!==null&&this.parent===n.parent?!1:this.descriptor.isCompatible(n.
descriptor)},r.prototype.isDatasetDataType=function(){return!!n.Util.first(this.
descriptor.allowedDataTypes,function(n){return n.dataTypeId==="Dataset"||n.dataTypeId===
"DataTableDotNet"},null)},r}(n.ObjectWithId);t.Port=f;i=function(t){function i(i,
r){r===void 0&&(r=0);t.call(this,i,r);this.connectionIsInCycle=ko.observable(!1);
this.isInputPortForPublish=ko.observable(!1);this.publishIcon="/Libraries/Images/publish_input_32.svg";
this.dirtyStatusInfo=new n.Util.Dirtyable;this.dirtyDraftState=new n.Util.Dirtyable}
return __extends(i,t),Object.defineProperty(i.prototype,"connectedOutputPort",{get:
function(){var n=this.connectedNonWebServicePorts();if(n.length===0)return null;
if(n.length===1)return n[0];throw"InputPort has multiple connections, but should have either 0 or 1.";
},enumerable:!0,configurable:!0}),i.prototype.compatibilityWithPort=function(t){
return this.isCompatible(t)?n.Model.Constants.PortState.Compatible:t instanceof i?
u.PortState.Default:u.PortState.Incompatible},i.prototype.connectTo=function(n){
if(this.isConnected()&&!n.isWebServicePort)throw new Error("Trying to put more than one connection on an input port.");
if(!(n instanceof r))throw new Error("Can't connect an input port to anything other than an output port.");
t.prototype.connectTo.call(this,n)},i.prototype.dirtyIfNeeded=function(n){var t=
this;this.connectedPorts.count()!==n.connectedPorts.count()?this.dirtyStatusInfo.
dirty():n.connectedPorts.forEach(function(n){var i=!1;t.connectedPorts.forEach(function(
t){n.name===t.name&&n.parent.id===t.parent.id&&(i=!0)});i||t.dirtyStatusInfo.dirty(
)})},i}(f);t.InputPort=i;r=function(r){function u(){r.apply(this,arguments);this.
isOutputPortForPublish=ko.observable(!1);this.publishIcon="/Libraries/Images/publish_output_32.svg";
this.trainGenericModelIcon="/Libraries/Images/trained_model_24.svg"}return __extends(
u,r),u.prototype.compatibilityWithPort=function(t){return this.isCompatible(t)?t.
isConnected()?n.Model.Constants.PortState.Replaceable:n.Model.Constants.PortState.
Compatible:t instanceof u?n.Model.Constants.PortState.Default:n.Model.Constants.
PortState.Incompatible},u.prototype.connectTo=function(n){if(n.isConnected()&&!this.
isWebServicePort)throw new Error("Trying to put more than one connection on an output port");
if(!(n instanceof i))throw new Error("Can't connect an output port to anything other than an input port.");
r.prototype.connectTo.call(this,n)},u.prototype.isVisualizable=function(){var t=
!!n.Util.first(this.descriptor.allowedDataTypes,function(t){return t.dataTypeId===
"Dataset"||t.dataTypeId==="DataTableDotNet"||t.dataTypeId==="ILearnerDotNet"||t.
dataTypeId==="Zip"&&n.Features.visualizeZipEnabled()},null);return t&&!this.isWebServicePort}
,u.prototype.isTrainModulePort=function(){if(this.parent instanceof t.ModuleNode)
{var i=this.parent;if(i.module_.category===n.Constants.ResourceCategory.TrainModule)
return this.descriptor.allowedDataTypes.filter(function(n){return!n.allowModelPromotion}
).length===0}return!1},u.prototype.isTransformPort=function(){if(this.parent instanceof
t.ModuleNode){var i=this.parent;if(i.module_.category===n.Constants.ResourceCategory.
Transform)return this.descriptor.allowedDataTypes.filter(function(n){return!n.allowModelPromotion}
).length===0}return!1},u.prototype.isTransformProducerPort=function(){return this.
parent instanceof t.ModuleNode?this.descriptor.allowedDataTypes.filter(function(
t){return t.dataTypeId===n.Constants.WellKnownDataTypeId.ITransformDotNet}).length===
1:!1},u}(f);t.OutputPort=r})(t=n.Model||(n.Model={}))}(DataLab||(DataLab={}));__extends=
this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(
i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(
t){var i=function(i){function r(r,u){var f=this;u===void 0&&(u=null);i.call(this,
u);this.x=ko.observable(0);this.y=ko.observable(0);this.height=ko.observable(0);
this.width=ko.observable(0);this.comment=ko.observable("");this.commentCollapsed=
ko.observable(!0);this.balloonMessage=ko.observable("");this.parent=null;this.ports=
Object.create(null);this.inputPorts=Object.create(null);this.outputPorts=Object.
create(null);this.dirtyDraftState=new n.Util.Dirtyable;this.dirtySinceLastRun=new
n.Util.Dirtyable;this.dirtyForPublish=new n.Util.Dirtyable;this.dirtyDraftState.
addChild(this.dirtySinceLastRun);this.dirtySinceLastRun.isDirty.subscribe(function(
n){n&&f.dirtyForPublish.dirty()});this.x.subscribe(function(){f.dirtyDraftState.
dirty()});this.y.subscribe(function(){f.dirtyDraftState.dirty()});this.comment.subscribe(
function(){f.comment(f.comment().trim());f.dirtyDraftState.dirty()});r.forEach(function(
i){if(i.name in f.ports)throw n.Util.format(n.LocalizedResources.duplicatePortName,
i.name);if(f.ports[i.name]=i,i instanceof t.InputPort)f.inputPorts[i.name]=i;else
if(i instanceof t.OutputPort)f.outputPorts[i.name]=i;else throw n.LocalizedResources.
unknownPortType;i.setParent(f);i.connectionAdded.subscribe(function(n){return f.
onPortConnectionAdded(n)});i.connectionRemoved.subscribe(function(n){return f.onPortConnectionRemoved(
n)})});Object.freeze(this.ports);Object.freeze(this.inputPorts);Object.freeze(this.
outputPorts)}return __extends(r,i),r.prototype.validate=function(){return[]},r.prototype.
startValidating=function(){},Object.defineProperty(r.prototype,"name",{get:function(
){throw new Error(n.LocalizedResources.nameIsAbstract);},enumerable:!0,configurable:
!0}),r.prototype.remove=function(){n.Util.forEach(this.ports,function(n){return n.
disconnect()});this.parent&&(this.parent._removeNode(this),this.parent=null)},Object.
defineProperty(r.prototype,"description",{get:function(){return""},enumerable:!0,
configurable:!0}),Object.defineProperty(r.prototype,"owner",{get:function(){return""}
,enumerable:!0,configurable:!0}),r.prototype.replaceWith=function(t,i){if(!this.
parent)throw new Error(n.LocalizedResources.nodeCannotReplaceOutsideExperiment);
if(t.parent)throw new Error(n.LocalizedResources.nodeCannotReplaceAlreadyInExperiment);
this.parent.addNode(t,this.x(),this.y());this.comment()!==""&&(t.comment(this.comment(
)),t.commentCollapsed(this.commentCollapsed()));n.Util.forEach(this.ports,function(
r){if(r.name in t.ports){var u=t.ports[r.name];n.Util.forEach(n.Util.values(r.connectedPorts(
)),function(n){r.disconnectFrom(n);u.isCompatible(n)?u.connectTo(n):i[n.id]?i[n.
id].push(u):i[n.id]=[u]});i[r.id]&&(i[r.id].forEach(function(n){u.isCompatible(n)&&
u.connectTo(n)}),delete i[r.id])}});t.dirtyDraftState.startDirtying();t.dirtySinceLastRun.
startDirtying();t.dirtyForPublish.startDirtying();this._onReplacing(t);this.remove(
)},r.prototype._onReplacing=function(){},r.prototype.onPortConnectionAdded=function(
t){if(this.parent)this.parent.connectionAdded.notifySubscribers(t);else throw new
Error(n.LocalizedResources.nodeCannotConnectOutsideExperiment);},r.prototype.onPortConnectionRemoved=
function(t){if(this.parent)this.parent.connectionRemoved.notifySubscribers(t);else
throw n.LocalizedResources.nodeCannotDisconnectOutsideExperiment;},r}(n.ObjectWithId);
t.GraphNode=i})(t=n.Model||(n.Model={}))}(DataLab||(DataLab={})),function(n){var
t;(function(t){function c(n,t){var r=ko.isObservable(n)?n:ko.observable(n);var f=
ko.observable(!1),e=ko.observable(null),u=!0;return r.subscribe(function(){u=!1;
setTimeout(function(){u||r.validate()},i)}),r.validate=function(){if(u=!0,f()){var
n=t(r());return e(n),r.isValid(!n),n?[n]:[]}return[]},r.isValid=ko.observable(!0),
r.errorMessage=e,r.startValidating=function(){f(!0);r.validate()},r}function l(n,
t){var r=ko.isObservable(n)?n:ko.observable(n);var s=ko.observable(!1),h=ko.observable(
null),f=!0,e=null,o=!1,u=null;return r.subscribe(function(){f=!1;u||(u=$.Deferred(
));setTimeout(function(){f||r.validate()},i)}),r.validate=function(){if(s())e?o||
(e.always(function(){r.validate()}),o=!0):(f=!0,o=!1,u||(u=$.Deferred()),r.isValid(
!0),e=t(r()),e.then(function(n){h(n);r.isValid(!n);!o&&f&&(u.resolve(),u=null);e=
null},function(n){h(null);r.isValid(!0);!o&&f&&(u.reject(n),u=null);e=null}));else
return[]},r.completeValidation=function(){return r.startValidating(),u?u.promise(
):$.Deferred().resolve().promise()},r.isValid=ko.observable(!0),r.errorMessage=h,
r.startValidating=function(){var n=!s()||!f;s(!0);n&&r.validate()},r}var i=200,r,
u,f,e,o,s,h;t.validatableObservable=c;t.asyncValidatableObservable=l;r=function(
){function t(n){this.min=n}return t.prototype.validate=function(t){if(!t)return null;
if(isNaN(parseFloat(t)))return n.Util.format(n.LocalizedResources.validationValueIsNotAValidNumberGreaterThan,
t,this.min.toString());var i=parseFloat(t);return this.min<=i?null:n.Util.format(
n.LocalizedResources.validationValueIsLessThanMinimumOf,t,this.min.toString())},
t}();t.PropertyMinValidator=r;u=function(){function t(n){this.max=n}return t.prototype.
validate=function(t){if(!t)return null;if(isNaN(parseFloat(t)))return n.Util.format(
n.LocalizedResources.validationValueIsNotAValidNumberLessThan,t,this.max.toString(
));var i=parseFloat(t);return this.max>=i?null:n.Util.format(n.LocalizedResources.
validationValueIsGreaterThanMaximumOf,t,this.max.toString())},t}();t.PropertyMaxValidator=
u;f=function(){function t(n){this.allowedValues=n}return t.prototype.validate=function(
t){var r=!1,i="";return(this.allowedValues.forEach(function(u){t==u.value&&u.displayValue!==
n.LocalizedResources.choiceParameterPleaseSelectValue&&(r=!0);u.value!==n.LocalizedResources.
choiceParameterPleaseSelectValue&&(i+=u.displayValue+", ")}),!r)?n.Util.format(n.
LocalizedResources.validationTheValueDoesNotMatchTheFollowing,t,i.substring(0,i.
length-2)):null},t}();t.PropertyValuesValidator=f;e=function(){function t(){}return t.
prototype.validate=function(t){return t?null:n.LocalizedResources.validationValueRequired}
,t}();t.RequiredValueValidator=e;o=function(){function t(){}return t.prototype.validate=
function(t){return/^(^[-+]?[0-9]+)?$/.test(t)?null:n.LocalizedResources.validationValueIsNotAValidInteger}
,t}();t.IntegerValidator=o;s=function(){function t(){}return t.prototype.validate=
function(t){return t!=="NaN"&&isNaN(Number(t))?n.LocalizedResources.validationValueIsNotAValidFloatingPointNumber:
null},t}();t.FloatValidator=s;h=function(){function t(){}return t.prototype.validate=
function(t){var i=n.Constants.WorkspaceNameRegex;return t?i.test(t)?null:n.LocalizedResources.
workspaceNameInvalidErrorMessage:n.LocalizedResources.workspaceNameCannotBeEmpty}
,t}();t.WorkspaceNameValidator=h})(t=n.Validation||(n.Validation={}))}(DataLab||
(DataLab={}));__extends=this.__extends||function(n,t){function r(){this.constructor=
n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t;(function(t){var i=function(){function t(t,i){this.value=
i;this.name=t;this.label=t;this.tooltip=t;this.parameterType=n.DataContract.ModuleParameterType.
String}return t}(),f,r,u,e,o,s;t.StaticProperty=i;f=function(n){function t(t,i,r,
u){n.call(this,t,r);this.placeholderText=i;u&&this.value.subscribe(function(){u.
dirtyStatus.dirty();u.dirtyForPublishStatus.dirty()})}return __extends(t,n),t}(i);
t.EditableTextProperty=f;r=function(n){function t(t,i){n.call(this,t,ko.observable(
i))}return __extends(t,n),t}(i);t.LinkProperty=r;u=function(n){function t(t,i){n.
call(this,t,ko.observable(i))}return __extends(t,n),t}(i);t.ButtonProperty=u;e=function(
n){function t(t,i){var r=this;n.call(this,t,i()?i().BaseUri+i().Location+i().AccessCredential:
"");this.endpoint=i;this.endpoint.subscribe(function(){r.value(i()?i().BaseUri+i(
).Location+i().AccessCredential:"")})}return __extends(t,n),t}(r);t.EndpointProperty=
e;o=function(n){function t(t,i,r){var u=this;n.call(this,t,r()?r().BaseUri+r().Location+
r().AccessCredential:"");this.id=i;this.endpoint=r;this.endpoint.subscribe(function(
){u.value(r()?r().BaseUri+r().Location+r().AccessCredential:"")})}return __extends(
t,n),t}(u);t.DisplayEndpointProperty=o;s=function(){function n(n,t,i,r,u){this.value=
r;this.name=n;this.label=t;this.tooltip=i;u&&this.value.subscribe(function(){u.dirtyStatus.
dirty();u.dirtyForPublishStatus.dirty()})}return n}();t.BooleanProperty=s})(t=n.
Model||(n.Model={}))}(DataLab||(DataLab={})),function(n){var t;(function(t){var i;
(function(t){function r(){if(!t.storeClient)throw new Error(n.LocalizedResources.
cannotRefresh);}function u(n){t.storeClient=n}function f(){r();var n=i;return i||
(n=i=$.Deferred(),t.storeClient.listCredentials().done(function(n){i.resolve(n);
i=null})),n}function e(n,t){if(n.Type!=t.Type||n.Parts.length!=t.Parts.length)return!1;
for(var i=0;i<n.Parts.length;i++)if(n.Parts[i].Name!=t.Parts[i].Name||n.Parts[i].
Value!=t.Parts[i].Value)return!1;return!0}function o(r){return i?n.Util.then(i,function(
t){var i=n.Util.first(t,function(n){return e(n,r)},null);return n.Util.when(!!i)}
):t.storeClient.verifyCredential(r)}t.storeClient;t.initialize=u;var i=null;t.listCredentials=
f;t.verifyCredential=o})(i=t.CredentialStore||(t.CredentialStore={}))})(t=n.Model||
(n.Model={}))}(DataLab||(DataLab={})),function(n){var t;(function(t){function u(
r,u){var e=Object.create(null);r.ScriptsDefaultContents&&r.ScriptsDefaultContents.
forEach(function(n){e[n.Name]=n.Value});var o=r.ModuleInterface.Parameters.map(function(
n){return i(n,e,r.CloudSystem)}),s=r.ModuleInterface.InputPorts.map(function(t){
var i=t.Types.map(function(n){return u.getDataTypeWithId(n.Id)});return new n.Model.
ModuleInputPortDescriptor(t.Name,t.FriendlyName,i,t.IsOptional)}),h=r.ModuleInterface.
OutputPorts.map(function(t){var i=new n.Model.ModuleOutputPortDescriptor(t.Name,
t.FriendlyName,u.getDataTypeWithId(t.Type.Id),t.IsOptional);return i.schemaPropagationRule=
n.Model.getSchemaPropagationRule(r.Name,t.Name),i}),c=s.concat(h),l=r.FamilyId===
t.DataReferenceModuleFamilyId?null:t.createGloballyUniqueFamilyId(t.parseResourceIdAndValidateFamily(
r.Id,r.FamilyId)),f=new n.Model.Module(r.Id,r.Category,c,o,n.Util.parseJsonDate(
r.CreatedDate),l,r.ServiceVersion,r.IsDeterministic,r.DeterministicByDefault);return f.
description(r.Description),f.name(r.Name),f.isLatest(r.IsLatest),f.owner=r.Owner,
f.clientVersion=r.ClientVersion?r.ClientVersion:"",f}function i(i,u,f){var o,e,s;
return u===void 0&&(u=Object.create(null)),f===void 0&&(f=null),i.HasDefaultValue?
e=i.DefaultValue:i.ParameterType===t.ModuleParameterType.Script&&i.Name in u&&(e=
u[i.Name]),i.ParameterType===t.ModuleParameterType.Enumerated?(s=null,i.ModeValuesInfo&&
(s=r(i.ModeValuesInfo)),o=n.Model.ChoiceModuleParameterDescriptor.CreateDescriptor(
i.Name,i.FriendlyName,i.IsOptional,i.ParameterRules,s,e)):o=i.ParameterType===t.
ModuleParameterType.Mode?new n.Model.ModeModuleParameterDescriptor(i.Name,i.FriendlyName,
r(i.ModeValuesInfo),i.IsOptional,i.ParameterRules,e):i.ParameterType===t.ModuleParameterType.
Script?new n.Model.ScriptModuleParameterDescriptor(i.Name,i.FriendlyName,i.ScriptName,
e,i.IsOptional,i.ParameterRules):i.ParameterType===t.ModuleParameterType.Credential?
new n.Model.CredentialModuleParameterDescriptor(i.CredentialDescriptor,i.Name,i.
FriendlyName,i.IsOptional,i.ParameterRules):i.ParameterType===t.ModuleParameterType.
ColumnPicker?new n.Model.ColumnPickerModuleParameterDescriptor(i.Name,i.FriendlyName,
i.ColumnPickerFor,i.SingleColumnSelection,i.ColumnSelectionCategories,i.ParameterRules,
i.IsOptional,i.DefaultValue):i.ParameterType===t.ModuleParameterType.ParameterRange?
new n.Model.ParameterRangeModuleParameterDescriptor(i.Name,i.FriendlyName,i.IsInt,
i.MinLimit,i.MaxLimit,i.SliderMin,i.SliderMax,i.DefaultValue,i.IsLog):i.ParameterType===
t.ModuleParameterType.Boolean?new n.Model.BooleanModuleParameterDescriptor(i.Name,
i.FriendlyName,[new n.Model.ChoiceParameterValue("True"),new n.Model.ChoiceParameterValue(
"False")],e):i.ParameterType===t.ModuleParameterType.DataGatewayName?new n.Model.
DataGatewayNameModuleParameterDescriptor(i.Name,i.FriendlyName,i.IsOptional):new
n.Model.ModuleParameterDescriptor(i.Name,i.FriendlyName,e,i.IsOptional,i.ParameterRules,
[],i.ParameterType),i.Description&&(o.description=i.Description),o}function r(t)
{var r={};return n.Util.forEach(t,function(t,u){var f=!1,e=t.Parameters.map(function(
t){var r=i(t);if(r instanceof n.Model.ModeModuleParameterDescriptor)if(f)throw new
Error("Mode parameter descriptor cannot have multiple child mode parameter descriptors.");
else f=!0;return r});r[u]=new n.Model.ModeValueInfo(t.InterfaceString,e,t.DisplayValue)}
),r}t.deserializeModule=u;t.deserializeModuleParameterDescriptor=i;t.deserializeModeValuesInfo=
r})(t=n.DataContract||(n.DataContract={}))}(DataLab||(DataLab={}));__extends=this.
__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(
i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(
t){function e(n,r,u,e,o){u===void 0&&(u=undefined);e===void 0&&(e=null);o===void
0&&(o=null);var s=Object.create(null);return n.forEach(function(n){if(n.name in s)
throw new Error("Duplicate parameter definition names.");s[n.name]=n instanceof t.
CredentialModuleParameterDescriptor?null:new i(n,r,u,e,o)}),n.forEach(function(n)
{n instanceof t.CredentialModuleParameterDescriptor&&(s[n.name]=new f(n,r,u,e,o,
s))}),s}var u=function(i){function r(t,r){r===void 0&&(r=undefined);i.call(this);
this.descriptor=t;r=typeof r=="undefined"?this.descriptor.defaultValue:r;r=r!==undefined&&
r!==null?r:"";this.value=n.Validation.validatableObservable(r,this.validateValue.
bind(this));this.autocompleteArray=ko.observableArray()}return __extends(r,i),r.
prototype.validate=function(){return this.value.validate()},r.prototype.startValidating=
function(){this.value.startValidating()},Object.defineProperty(r.prototype,"label",
{get:function(){return this.descriptor.friendlyName},enumerable:!0,configurable:
!0}),Object.defineProperty(r.prototype,"parameterType",{get:function(){return this.
descriptor instanceof t.ScriptModuleParameterDescriptor?n.DataContract.ModuleParameterType.
Script:this.descriptor instanceof t.BooleanModuleParameterDescriptor?n.DataContract.
ModuleParameterType.Boolean:this.descriptor instanceof t.ChoiceModuleParameterDescriptor?
n.DataContract.ModuleParameterType.Enumerated:this.descriptor instanceof t.CredentialModuleParameterDescriptor?
n.DataContract.ModuleParameterType.Credential:this.descriptor instanceof t.ColumnPickerModuleParameterDescriptor?
n.DataContract.ModuleParameterType.ColumnPicker:this.descriptor instanceof t.ParameterRangeModuleParameterDescriptor?
n.DataContract.ModuleParameterType.ParameterRange:this.descriptor instanceof t.DataGatewayNameModuleParameterDescriptor?
n.DataContract.ModuleParameterType.DataGatewayName:n.DataContract.ModuleParameterType.
String},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"tooltip",
{get:function(){return this.descriptor.description||this.descriptor.friendlyName}
,enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(
){return this.descriptor.name},enumerable:!0,configurable:!0}),r.prototype.validateValue=
function(n){return this.descriptor.validate(n)},r}(n.ObjectWithId),i,r,f,o;t.Parameter=
u;t.createModuleNodeParametersFromDescriptors=e;i=function(i){function r(r,u,f,o,
s){var h=this;f===void 0&&(f=undefined);o===void 0&&(o=null);s===void 0&&(s=null);
i.call(this,r,f);this.linkedWebServiceParameter=ko.observable(null);this.isLinked=
ko.computed(function(){return!!h.linkedWebServiceParameter()});this.parent=u;this.
isRelevant=ko.observable(!0);this.childParameters=Object.create(null);this.dirtyStatusInfo=
new n.Util.Dirtyable;this.dirtyDraftState=new n.Util.Dirtyable;o&&(this.isRelevant=
ko.computed(function(){return o.isRelevant()&&o.value()===s}));this.value.subscribe(
function(){h.dirtyStatusInfo.dirty();h.dirtyDraftState.dirty()});this.descriptor
instanceof t.ModeModuleParameterDescriptor&&n.Util.forEach(this.descriptor.modeValuesInfo,
function(n,t){var i=e(n.childParameterDescriptors,h.parent,undefined,h,t);h.childParameters[
t]=i})}return __extends(r,i),r.prototype.linkToWebServiceParameter=function(n){if(
this.linkedWebServiceParameter())throw new Error("Cannot link because the parameter is already linked");
n.link(this);this.linkedWebServiceParameter(n)},r.prototype.unlink=function(){if(
!this.linkedWebServiceParameter())throw new Error("Cannot unlink because the parameter is not currently linked");
this.linkedWebServiceParameter().unlink(this);this.linkedWebServiceParameter(null)}
,r.prototype.ensureUnlinked=function(){this.linkedWebServiceParameter()&&this.unlink(
)},r.prototype.dirtyIfNeeded=function(n){(n.name!==this.name||n.value()!==this.value(
))&&this.dirtyStatusInfo.dirty()},r}(u);t.ModuleNodeParameter=i,function(n){var t;
(function(n){n.credentialVerificationTimeout=500})(t=n.CredentialParameter||(n.CredentialParameter=
{}))}(r=t.Constants||(t.Constants={})),function(n){var t;(function(n){n.Return=13}
)(t=n.Key||(n.Key={}))}(r=t.Constants||(t.Constants={}));f=function(i){function u(
r,u,f,e,o,s){var h=this;if(i.call(this,r,u,f,e,o),this.isDirty=!1,this.credentialType=
r.credentialDescriptor.CredentialType,this.credentialKeyParts=[],this.activeRequests=
[],this.requestsBlocked=!1,n.Util.forEach(s,function(i){i&&n.Util.first(r.credentialDescriptor.
CredentialKeyParts,function(n){return n===i.name},!1)&&(i.value.subscribe(function(
){h.fill()}),h.credentialKeyParts.push({label:i.label,tooltip:i.tooltip,value:i.
value,name:i.name,parameterType:i.parameterType}),t.CredentialStore.listCredentials(
).done(function(t){n.Util.forEach(t,function(t){if(t.Type===h.credentialType){var
r=n.Util.first(t.Parts,function(n){return n.Name===i.name},null);r&&i.autocompleteArray.
push(r.Value)}})}))}),this.credentialKeyParts.length!=r.credentialDescriptor.CredentialKeyParts.
length)throw new Error("Invalid Credential descriptor for the module, some of the parameters defined as part of the credential key are missing");
this.value.subscribe(function(){h.isDirty=h.value()&&!h.isLinked()?!0:!1});this.
fill();this.isLinked.subscribe(function(n){h.isDirty=!1;n||h.fill()})}return __extends(
u,i),u.prototype.sendRequest=function(t){var i=this;n.Model.CredentialStore.verifyCredential(
t).done(function(r){i.activeRequests.length>0&&i.activeRequests[i.activeRequests.
length-1]==t&&(i.isLinked()||i.isDirty||(i.dirtyDraftState.isDirty()||(i.dirtyDraftState.
stopDirtying(),i.dirtyStatusInfo.stopDirtying(),r&&i.value()?i.value(n.Constants.
PasswordPlaceholder):i.value(""),i.dirtyDraftState.startDirtying(),i.dirtyStatusInfo.
startDirtying()),i.isDirty=!1,i.activeRequests=[]))})},u.prototype.fill=function(
){var t=this,i,u;this.isDirty||this.isLinked()||(i=[],n.Util.forEach(this.credentialKeyParts,
function(n){i.push({Name:n.name,Value:n.value()})}),u={Type:this.credentialType,
Parts:i},this.activeRequests.push(u),this.requestsBlocked||(this.sendRequest(u),
this.activeRequests.length>1&&(this.requestsBlocked=!0,setTimeout(function(){t.activeRequests.
length>0&&t.sendRequest(t.activeRequests[t.activeRequests.length-1]);t.requestsBlocked=
!1},r.CredentialParameter.credentialVerificationTimeout))))},u.prototype.getSerializedValue=
function(){return""},u}(i);t.CredentialParameter=f;o=function(t){function i(r,u,
f,e){t.call(this,r,f);this.isExperimentParameter=!1;var o=function(n){var r=e.parameters,
t=null;if(n===""?t="Experiment parameter name cannot be empty.":e.parametersWithName(
n).length>1&&(t="Experiment parameter '"+n+"' already exists."),i.shouldRecurseValidation)
try{i.shouldRecurseValidation=!1;e.parameters.forEach(function(n){n.validatableName.
validate()})}finally{i.shouldRecurseValidation=!0}return t};this.linkedParameters=
Object.create(null);this.validatableName=n.Validation.validatableObservable(u,o);
this.hasDefaultValue=ko.observable(this.value()!=null&&this.value()!="");this.validatableName.
startValidating();this.value.startValidating();this.isEditingName=ko.observable(
!1)}return __extends(i,t),i.prototype.unlink=function(n){if(!(n.id in this.linkedParameters)
)throw new Error("Unlinking an module parameter that hasn't been linked");delete
this.linkedParameters[n.id];this.hasDefaultValue()&&this.value.validate()},i.prototype.
link=function(n){if(n.id in this.linkedParameters)throw new Error("Experiment parameter is alread linked to module parameter");
this.linkedParameters[n.id]=n;this.hasDefaultValue()&&this.value.validate()},i.prototype.
unlinkAll=function(){n.Util.forEach(this.linkedParameters,function(n){n.ensureUnlinked(
)})},i.prototype.validateValue=function(){var i=this,t;return this.hasDefaultValue(
)?(t=[],n.Util.forEach(this.linkedParameters,function(n){n.descriptor.validators.
forEach(function(r){if(t.length===0){var u=r.validate(i.value());u&&(u="Value is invalid for linked parameter "+
n.name+" on "+n.parent.name+". "+u,t.push(u))}})}),t.length>0?t[0]:null):null},i.
prototype.textboxKeydown=function(n,t){return t.keyCode===r.Key.Return?(n.property.
isEditingName(!1),!1):!0},i.prototype.toggleEditingName=function(t,i){t.property.
isEditingName(!0);n.Log.featureUsage({featureID:47,groupID:43});$(i.srcElement).
parent().children("input").focus()},i.prototype.textboxBlur=function(n){n.property.
isEditingName(!1)},i.prototype.validate=function(){var n=this.hasDefaultValue()?
this.value.validate()[0]:null,t=[];return n&&t.push(n),t.concat(this.validatableName.
validate())},Object.defineProperty(i.prototype,"name",{get:function(){return this.
validatableName()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,
"label",{get:function(){var n=this.name.indexOf("\n");return n==-1&&(n=this.name.
length),this.name.substring(0,n)},enumerable:!0,configurable:!0}),Object.defineProperty(
i.prototype,"tooltip",{get:function(){return this.name},enumerable:!0,configurable:
!0}),i.prototype.isLinked=function(){return!n.Util.isEmpty(this.linkedParameters)}
,i.shouldRecurseValidation=!0,i}(u);t.WebServiceParameter=o})(t=n.Model||(n.Model=
{}))}(DataLab||(DataLab={})),function(n){var t;(function(n){var t,i,r,u,f,e,o;(function(
n){n.String="String";n.Int="Int";n.Float="Float";n.Double="Double";n.Boolean="Boolean";
n.Enumerated="Enumerated";n.Script="Script";n.Mode="Mode";n.Credential="Credential";
n.ColumnPicker="ColumnPicker";n.ParameterRange="ParameterRange";n.DataGatewayName=
"DataGatewayName"})(t=n.ModuleParameterType||(n.ModuleParameterType={})),function(
n){n.Literal="Literal";n.GraphParameterName="GraphParameterName"}(i=n.ModuleParameterValueType||
(n.ModuleParameterValueType={})),function(n){n.NotStarted="NotStarted";n.Running=
"Running";n.Finished="Finished";n.Failed="Failed";n.Canceled="Canceled";n.InDraft=
"InDraft"}(r=n.State||(n.State={})),function(n){n.InvalidOrigin="InvalidOrigin";
n.FromResourceUpload="FromResourceUpload";n.FromExistingBlob="FromExistingBlob";
n.FromOutputPromotion="FromOutputPromotion"}(u=n.DataSourceOrigin||(n.DataSourceOrigin=
{})),function(n){n.Exe="exe";n.Hive="hive";n.Pig="pig";n.MapReduce="mapreduce";n.
MapReduceJar="mapreducejar";n.AnalyticsFramework="analyticsFramework";n.Dll="dll";
n.R="r";n.Python="python";n.Cosmos="cosmos"}(f=n.CloudSystemTypes||(n.CloudSystemTypes=
{})),function(n){n.Pending="Pending";n.Complete="Complete";n.NotSupported="NotSupported";
n.Failed="Failed";n.Invalid="Invalid"}(e=n.SchemaStatus||(n.SchemaStatus={}));n.
DataReferenceModuleFamilyId="DataReferenceModule",function(n){n.ExceededRuntimeLimit=
"Experiment runtime quota exceeded";n.ExceededStorageLimit="StorageQuota";n.DatasetRestriction=
"http://schemas.azureml.net/ws/2014/11/identity/claims/Dataset";n.ModulesRestriction=
"http://schemas.azureml.net/ws/2014/11/identity/claims/Modules";n.CustomModulesRestriction=
"http://schemas.azureml.net/ws/2014/11/identity/claims/CustomModules";n.WebServicesRestriction=
"http://schemas.azureml.net/ws/2014/11/identity/claims/WebServices";n.WorkspaceTypeRestriction=
"http://schemas.azureml.net/ws/2014/11/identity/claims/WorkspaceType"}(o=n.CancellationReason||
(n.CancellationReason={}))})(t=n.DataContract||(n.DataContract={}))}(DataLab||(DataLab=
{}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t;(function(t){function p(n,t){if(n.length===0)throw new Error(
"Expected at least one choice.");return t!==undefined?t:n[0].value}function h(n,
t,i){var u,f;if(n===void 0&&(n=[]),t===void 0&&(t=null),i===void 0&&(i=!1),u=[],
t)f=n[0]&&n[0].Values.length>0?n[0].Values:Object.keys(t),f.forEach(function(n){
t[n].displayValue?u.push(new r(n,t[n].displayValue)):u.push(new r(n))});else if(
n.length>0)n[0].Values.forEach(function(n){u.push(new r(n))});else throw new Error(
"Enumerated parameter has neither modeValuesInfo nor rules array with values.");
return i&&u.unshift(new r("")),u}var r=function(){function n(n,t){this.value=n;this.
displayValue=t?t:n}return n}(),i,u,f,e,o,s,c,l,a,v,y;t.ChoiceParameterValue=r;i=
function(){function t(t,i,r,u,f,e,o){var s=this;u===void 0&&(u=!1);f===void 0&&(
f=[]);e===void 0&&(e=[]);this.name=t;this.friendlyName=i;this.defaultValue=r;this.
isOptional=u;this.rules=f;this.validators=[];this.description="";this.isOptional||
this.validators.push(new n.Validation.RequiredValueValidator);o===n.DataContract.
ModuleParameterType.Int?this.validators.push(new n.Validation.IntegerValidator):
(o===n.DataContract.ModuleParameterType.Float||o===n.DataContract.ModuleParameterType.
Double)&&this.validators.push(new n.Validation.FloatValidator);this.type=o!=null?
o:n.DataContract.ModuleParameterType.String;this.rules.forEach(function(t){"Max"in
t&&s.validators.push(new n.Validation.PropertyMaxValidator(t.Max));"Min"in t&&s.
validators.push(new n.Validation.PropertyMinValidator(t.Min));"Values"in t&&s.validators.
push(new n.Validation.PropertyValuesValidator(e))})}return t.prototype.validate=
function(n){var t=null;return this.validators.forEach(function(i){t||(t=i.validate(
n))}),t},t}();t.ModuleParameterDescriptor=i;u=function(t){function i(i,r,u,f,e,o)
{if(f.length==0)throw new Error("Set of choices is empty for enumerated parameter.");
this.choices=ko.observableArray(f);t.call(this,i,r,p(f,o),u,e,f);var s=!1;this.validators.
forEach(function(t){t instanceof n.Validation.PropertyValuesValidator&&(s=!0)});
s||this.validators.push(new n.Validation.PropertyValuesValidator(f))}return __extends(
i,t),i.isBooleanDescriptor=function(n){if(n.length!=2)return!1;var t=n[0].value.
toLowerCase().trim(),i=n[1].value.toLowerCase().trim();return t==="true"&&i==="false"||
t==="yes"&&i==="no"?!0:t==="false"&&i==="true"||t==="no"&&i==="yes"?(n=n.reverse(
),!0):!1},i.CreateDescriptor=function(n,t,r,u,o,s,c){r===void 0&&(r=!1);u===void
0&&(u=[]);o===void 0&&(o=null);c===void 0&&(c=!1);var l=h(u,o,r);return!r&&i.isBooleanDescriptor(
l)?new f(n,t,l,s):c?new e(n,t,l,u,s):new i(n,t,r,l,u,s)},i}(i);t.ChoiceModuleParameterDescriptor=
u;f=function(n){function t(t,i,r,u){r===void 0&&(r=[]);n.call(this,t,i,!1,r,[],u)}
return __extends(t,n),t}(u);t.BooleanModuleParameterDescriptor=f;e=function(n){function t(
t,i,r,u,f){n.call(this,t,i,!1,r,u,f)}return __extends(t,n),t}(u);t.MultiChoiceModuleParameterDescriptor=
e;o=function(n){function t(t,i,r,u,f,e,o,s){e===void 0&&(e=[]);o===void 0&&(o=!1);
n.call(this,t,i,s,o,e);this.columnPickerFor=r;this.singleColumnSelection=u;this.
columnSelectionCategories=f}return __extends(t,n),t}(i);t.ColumnPickerModuleParameterDescriptor=
o;s=function(n){function t(t,i,r,u,f,e,o,s,h){n.call(this,t,i,s);this.isInt=r;this.
sliderMin=e;this.sliderMax=o;this.minLimit=u;this.maxLimit=f;this.isLog=h}return __extends(
t,n),t}(i);t.ParameterRangeModuleParameterDescriptor=s;c=function(n){function t(
t,i,r,u,f,e){r===void 0&&(r=null);u===void 0&&(u=null);f===void 0&&(f=!1);e===void
0&&(e=[]);n.call(this,t,i,u,f,e);this.scriptName=r}return __extends(t,n),t}(i);t.
ScriptModuleParameterDescriptor=c;l=function(n){function t(t,i,r,u,f){f===void 0&&
(f=[]);n.call(this,i,r,"",u,f);this.credentialDescriptor=t}return __extends(t,n),
t}(i);t.CredentialModuleParameterDescriptor=l;a=function(n){function t(t,i,r){r===
void 0&&(r=!1);n.call(this,t,i,null,r,[])}return __extends(t,n),t}(i);t.DataGatewayNameModuleParameterDescriptor=
a;v=function(n){function t(t,i,r,u,f,e){u===void 0&&(u=!1);f===void 0&&(f=[]);n.
call(this,t,i,u,h(f,r,u),f,e);this.modeValuesInfo=r}return __extends(t,n),t}(u);
t.ModeModuleParameterDescriptor=v;y=function(){function n(n,t,i){n===void 0&&(n=
"");t===void 0&&(t=[]);i===void 0&&(i=null);this.interfaceString="";this.childParameterDescriptors=
[];this.displayValue=null;this.interfaceString=n;this.childParameterDescriptors=
t;this.displayValue=i}return n}();t.ModeValueInfo=y})(t=n.Model||(n.Model={}))}(
DataLab||(DataLab={}));__extends=this.__extends||function(n,t){function r(){this.
constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;
n.prototype=new r},function(n){var t;(function(t){function f(n){var i=0,r=0;return n.
portDescriptors.map(function(n){if(n instanceof t.ModuleInputPortDescriptor)return new
t.InputPort(n,i++);if(n instanceof t.ModuleOutputPortDescriptor)return new t.OutputPort(
n,r++);throw new Error("Unknown port descriptor type.");})}function u(t,i){n.Util.
forEach(t,function(t){if(t.name in i){var r=i[t.name];t.parameterType===r.parameterType&&
(r.value(t.value()),t.isLinked()&&r.linkToWebServiceParameter(t.linkedWebServiceParameter(
)));n.Util.forEach(t.childParameters,function(n,t){t in r.childParameters&&u(n,r.
childParameters[t])})}})}var i=function(){function t(){var n=this;this.errorMessage=
ko.observable("");this.startTime=ko.observable("");this.endTime=ko.observable("");
this.errorId=ko.observable("");this.hasErrorId=ko.computed(function(){return n.errorId(
)!==""},this);this.messageInExpectedFormat=ko.observable(!1);this.trimmedErrorMessage=
ko.observable("");this.containsAdditionalInformation=ko.observable(!1)}return t.
prototype.updateErrorLogInfo=function(t,i,r){var u=n.Constants.ModuleError.StartMessageEndRegExp.
exec(t),f,s,e,o;if(u&&u.length===4){this.messageInExpectedFormat(!0);this.startTime(
u[1]);f=u[2];this.endTime(u[3]);f=f.replace(n.Constants.ModuleError.SkipWhitespaceAndModuleOutputStrRegExp,
"");try{s=JSON.parse(f);e=s.Exception;e.ErrorCode&&this.errorId(e.ErrorCode);e.Message&&
(this.errorMessage(e.Message),o=n.Constants.ModuleError.GetErrorIdRegExp,o.test(
e.Message)&&(u=o.exec(e.Message),this.trimmedErrorMessage(u[2]),this.containsAdditionalInformation(
u[0]!==e.Message)))}catch(h){f=f.replace(n.Constants.ModuleError.SkipErrorHeadingRegExp,
"");f!==""?(this.errorMessage(f),o=n.Constants.ModuleError.GetErrorIdRegExp,o.test(
f)&&(u=o.exec(f),this.errorId(u[1]),this.trimmedErrorMessage(u[2]),this.containsAdditionalInformation(
u[0]!==f))):this.errorMessage(n.LocalizedResources.moduleErrorNoErrorMessage)}}else
this.messageInExpectedFormat(!1),t===""?this.errorMessage(n.LocalizedResources.moduleErrorNoErrorMessage):
this.errorMessage(t),n.Log.customEvent({key:"GetErrorLog",type:"BadFormatForErrorLog",
data:JSON.stringify({errorText:t,nodeName:i,nodeID:r})})},t}(),r;t.ErrorLogInfo=
i;r=function(r){function e(u,o,s){var h=this;s===void 0&&(s=null);r.call(this,f(
u),s);this.executedExperimentId=null;this.module_=u;this.parameters=this.createParametersForModule(
u);this.hasParameter=function(n){return e.parameterFilterHelper(h.parameters,n)}
;this.hasCredentials=function(){return h.hasParameter(function(n){return n instanceof
t.CredentialParameter})};this.isCustomModule=function(){return h.module_.familyId.
split(".")[0].toLowerCase()!=="506153734175476c4f62416c57734963"};this.isDeterministic=
u.isDeterministic;this.usePreviousResults=n.Features.showUsePreviousResultsOption(
)?ko.observable(u.deterministicByDefault):ko.observable(!1);this.isDirty=!1;this.
isValidating=!1;this.startTime=new t.StaticProperty(n.LocalizedResources.PropertyPanelStartTime,
ko.observable());this.endTime=new t.StaticProperty(n.LocalizedResources.PropertyPanelEndTime,
ko.observable());this.elapsedTime=new t.StaticProperty(n.LocalizedResources.elapsedTime,
ko.observable());this.statusCode=new t.StaticProperty(n.LocalizedResources.PropertyPanelStatusCode,
ko.observable(n.DataContract.State.NotStarted));this.statusDetails=new t.StaticProperty(
n.LocalizedResources.PropertyPanelStatusDetails,ko.observable());this.outputLog=
new t.EndpointProperty(n.LocalizedResources.PropertyPanelViewOutputLog,ko.observable(
));this.errorLog=new t.DisplayEndpointProperty(n.LocalizedResources.moduleErrorDialogButtonLabel,
0,ko.observable());this.errorLogInfo=new i;this.errorLog.endpoint.subscribe(function(
){h.statusCode.value()===n.DataContract.State.Failed&&h.errorLog.endpoint()&&h.errorLog.
endpoint().Size>0&&h.executedExperimentId&&n.Util.then(o.getModuleErrorLog(h.executedExperimentId,
h.id),function(n){h.errorLogInfo.updateErrorLogInfo(n,h.name,h.id)})});this.errorLogInfo.
errorMessage.subscribe(function(){if(h.statusCode.value()===n.DataContract.State.
Failed||h.statusCode.value()===n.DataContract.State.Running){var t=h.errorLogInfo.
errorMessage().length>n.Constants.MaximumCharsForErrorToolTip?h.errorLogInfo.errorMessage(
).slice(0,n.Constants.MaximumCharsForErrorToolTip-1)+" ...":h.errorLogInfo.errorMessage(
);h.balloonMessage(t)}});this.outputEndpoints=Object.create(null);this.dirtyStatusInfo=
new n.Util.Dirtyable;n.Util.forEach(this.inputPorts,function(n){h.dirtyStatusInfo.
addChild(n.dirtyStatusInfo);h.dirtySinceLastRun.addChild(n.dirtyDraftState)});n.
Util.forEach(this.parameters,function(n){h.dirtyStatusInfo.addChild(n.dirtyStatusInfo);
h.dirtySinceLastRun.addChild(n.dirtyDraftState)});this.dirtyStatusInfo.isDirty.subscribe(
function(n){n&&h.dirtyModule()})}return __extends(e,r),e.parameterFilterHelper=function(
i,r){return n.Util.values(i).some(function(i){var u,f;return r(i)?!0:i.descriptor
instanceof t.ModeModuleParameterDescriptor?(u=i.childParameters[i.value()],e.parameterFilterHelper(
u,r)):(f=n.Util.values(i.childParameters),f.some(function(n){return e.parameterFilterHelper(
n,r)}))})},Object.defineProperty(e.prototype,"owner",{get:function(){return this.
module_.owner},enumerable:!0,configurable:!0}),e.prototype.startValidating=function(
){this.isValidating=!0;this.startValidatingAll(this.parameters)},e.prototype.startValidatingAll=
function(i){var r=this;n.Util.forEach(i,function(i){i.startValidating();i.descriptor
instanceof t.ModeModuleParameterDescriptor&&n.Util.forEach(i.childParameters,function(
n){r.startValidatingAll(n)})})},e.prototype.validate=function(){var t=[],r,i;return this.
isValidating?(r=[],this.validateParameters(this.parameters,r),t=t.concat(r),i=[],
n.Util.forEach(this.inputPorts,function(n){n.isConnected()||n.optional||i.push("Input port "+
n.name+" is unconnected.")}),i.length>0&&t.push({errorMessages:i,erroneousObject:
this}),t):[]},e.prototype.updateInfo=function(t){var i=this;if(this.id===t.id)this.
startTime.value(t.startTime.value()),this.endTime.value(t.endTime.value()),this.
elapsedTime.value(t.elapsedTime.value()),this.statusCode.value(t.statusCode.value(
)),this.statusDetails.value(t.statusDetails.value()),this.outputLog.endpoint(t.outputLog.
endpoint()),this.errorLog.endpoint(t.errorLog.endpoint()),n.Util.forEach(this.outputEndpoints,
function(n,r){t.outputEndpoints[r]&&(n.endpoint(t.outputEndpoints[r].endpoint()),
i.outputPorts[r]&&(i.outputPorts[r].outputEndpoint=t.outputEndpoints[r].endpoint(
)))}),n.Util.forEach(t.outputPorts,function(n){i.outputPorts[n.name].visualizationEndpoint=
n.visualizationEndpoint;i.outputPorts[n.name].schemaEndpoint=n.schemaEndpoint});
else throw new Error("Updated GraphNode ID does not match previous ID.");},e.prototype.
validateParameters=function(i,r){var u=this;n.Util.forEach(i,function(n){var i,f;
if(!(n.descriptor instanceof t.ModeModuleParameterDescriptor)){i=n.validate();i.
length>0&&r.push({errorMessages:i,erroneousObject:n});return}f=n.childParameters[
n.value()];f&&u.validateParameters(f,r)})},Object.defineProperty(e.prototype,"name",
{get:function(){return this.module_.name()},enumerable:!0,configurable:!0}),Object.
defineProperty(e.prototype,"description",{get:function(){return this.module_.description(
)},enumerable:!0,configurable:!0}),e.prototype.remove=function(){r.prototype.remove.
call(this);this.unlinkAllParameters()},e.prototype._onReplacing=function(t){var r=
this,i;t instanceof e&&(i=t,i.dirtyStatusInfo.startDirtying(),i.dirtyStatusInfo.
dirty(),u(this.parameters,i.parameters),n.Util.forEach(this.inputPorts,function(
n){if(n.isInputPortForPublish()&&(r.parent.removePublishInputPort(n),n.name in t.
inputPorts)){var i=t.inputPorts[n.name];r.parent.addPublishInputPort(i)}}),n.Util.
forEach(this.outputPorts,function(n){if(n.isOutputPortForPublish()&&(r.parent.removePublishOutputPort(
n),n.name in t.outputPorts)){var i=t.outputPorts[n.name];r.parent.addPublishOutputPort(
i)}}),n.Util.forEach(i.parameters,function(n){n.dirtyDraftState.startDirtying()}
),n.Util.forEach(i.inputPorts,function(n){n.dirtyDraftState.startDirtying()}))},
e.prototype.unlinkAllParameters=function(){n.Util.forEach(this.parameters,function(
n){return n.ensureUnlinked()})},e.prototype.dirtyModule=function(t){t===void 0&&
(t=Object.create(null));this.isDirty=!0;this.startTime.value("");this.endTime.value(
"");this.elapsedTime.value("");this.statusCode.value(n.DataContract.State.NotStarted);
this.statusDetails.value("");this.outputLog.endpoint(null);this.errorLog.endpoint(
null);n.Util.forEach(this.outputEndpoints,function(n){n.endpoint(null)});t[this.
id]=this;n.Util.forEach(this.outputPorts,function(i){n.Util.forEach(i.connectedPorts(
),function(n){if(n.parent instanceof e){var i=n.parent;i.isDirty||t[i.id]||i.dirtyModule(
t)}})})},e.prototype.addEndpoint=function(n){this.outputEndpoints[n.Name]&&this.
outputEndpoints[n.Name].endpoint().IsAuxiliary||(this.outputEndpoints[n.Name]=new
t.EndpointProperty(n.Name,ko.observable(n)))},e.prototype.dirtyIfNeeded=function(
t){var i=this;n.Util.values(t.parameters).length===n.Util.values(this.parameters).
length?n.Util.forEach(t.parameters,function(n,t){var r=i.parameters[t];r?r.dirtyIfNeeded(
n):i.dirtyStatusInfo.dirty()}):this.dirtyStatusInfo.dirty();n.Util.values(t.inputPorts).
length===n.Util.values(this.inputPorts).length?n.Util.forEach(t.inputPorts,function(
n,t){var r=i.inputPorts[t];r?r.dirtyIfNeeded(n):i.dirtyStatusInfo.dirty()}):this.
dirtyStatusInfo.dirty();n.Util.values(t.outputPorts).length!==n.Util.values(this.
outputPorts).length&&this.dirtyStatusInfo.dirty()},e.prototype.createParametersForModule=
function(t){return n.Model.createModuleNodeParametersFromDescriptors(t.parameterDescriptors,
this)},e}(t.GraphNode);t.ModuleNode=r})(t=n.Model||(n.Model={}))}(DataLab||(DataLab=
{})),function(n){var t;(function(n){(function(n){n[n.Accurate=0]="Accurate";n[n.
Superset=1]="Superset";n[n.Inaccurate=2]="Inaccurate"})(n.SchemaCorrectness||(n.
SchemaCorrectness={}));var t=n.SchemaCorrectness})(t=n.Model||(n.Model={}))}(DataLab||
(DataLab={})),function(n){var t;(function(t){function i(t){return(t||[]).map(function(
t){switch(t){case n.Constants.NotebookLanguage.Python2:return"Python2";case n.Constants.
NotebookLanguage.Python3:return"Python3";case n.Constants.NotebookLanguage.R:return"R"
default:return null}}).filter(function(n){return n!=null})}t.convertToCatalogNotebookLanguages=
i})(t=n.DataContract||(n.DataContract={}))}(DataLab||(DataLab={})),function(n){var
t;(function(n){var t;(function(n){(function(n){n[n.Deleted=0]="Deleted";n[n.Enabled=
1]="Enabled";n[n.Disabled=2]="Disabled";n[n.Migrated=3]="Migrated";n[n.Updated=4]=
"Updated";n[n.Registered=5]="Registered";n[n.Unregistered=6]="Unregistered"})(n.
SubscriptionStatus||(n.SubscriptionStatus={}));var t=n.SubscriptionStatus})(t=n.
v1||(n.v1={}))})(t=n.DataContract||(n.DataContract={}))}(DataLab||(DataLab={}));
__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i
in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r}
,function(n){var t;(function(t){function u(n){var u=new t.ModuleOutputPortDescriptor(
i,i,n.dataType,!1),r=new t.OutputPort(u);return r.outputEndpoint=n.downloadLocation,
r.visualizationEndpoint=n.visualizeEndPoint,r.schemaEndpoint=n.schemaEndPoint,[r]}
var i="dataset",r=function(r){function f(i,f){f===void 0&&(f=null);r.call(this,u(
i),f);this.dataset=i;this.author=new t.StaticProperty("Submitted by",ko.observable(
i.owner));this.format=new t.StaticProperty("Format",ko.observable(i.dataType.toString(
)));this.createdOn=new t.StaticProperty("Created on",ko.observable(n.Util.formatDate(
i.created)));i.downloadLocation?(this.size=new t.StaticProperty("Size",ko.observable(
n.Util.formatDataSize(i.downloadLocation.Size))),this.viewDataset=new t.EndpointProperty(
"View dataset",ko.observable(i.downloadLocation))):(this.size=new t.StaticProperty(
"Size",ko.observable()),this.viewDataset=new t.EndpointProperty("View dataset",ko.
observable()))}return __extends(f,r),Object.defineProperty(f.prototype,"datasetPort",
{get:function(){return this.outputPorts[i]},enumerable:!0,configurable:!0}),Object.
defineProperty(f.prototype,"name",{get:function(){return this.dataset.name()},enumerable:
!0,configurable:!0}),Object.defineProperty(f.prototype,"description",{get:function(
){return this.dataset.description()},enumerable:!0,configurable:!0}),Object.defineProperty(
f.prototype,"owner",{get:function(){return this.dataset.owner},enumerable:!0,configurable:
!0}),f.prototype.remove=function(){r.prototype.remove.call(this);n.Log.customEvent(
{key:"RemoveTrainedModel",type:"RemoveNode",data:this.dataset.name()})},f}(t.GraphNode);
t.DatasetNode=r})(t=n.Model||(n.Model={}))}(DataLab||(DataLab={}));__extends=this.
__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(
i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(
t){var i=function(t){function i(i,r,u,f,e){t.call(this,i,r,u,f,e);this.category=
n.Constants.ResourceCategory.TrainedModel}return __extends(i,t),i}(t.DataResource);
t.TrainedModel=i})(t=n.Model||(n.Model={}))}(DataLab||(DataLab={}));__extends=this.
__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(
i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(
t){function u(n){var u=new t.ModuleOutputPortDescriptor(i,i,n.dataType,!1),r=new
t.OutputPort(u);return r.outputEndpoint=n.downloadLocation,[r]}var i="trained model",
r=function(r){function f(i,f){f===void 0&&(f=null);r.call(this,u(i),f);this.trainedModel=
i;this.author=new t.StaticProperty(n.LocalizedResources.resourceAuthor,ko.observable(
i.owner));this.format=new t.StaticProperty(n.LocalizedResources.resourceFormat,ko.
observable(i.dataType.toString()));this.createdOn=new t.StaticProperty(n.LocalizedResources.
resourceCreatedOn,ko.observable(n.Util.formatDate(i.created)));this.trainingExperiment=
new t.LinkProperty(n.LocalizedResources.trainingExperimentLink,i.experimentId)}return __extends(
f,r),Object.defineProperty(f.prototype,"trainedModelPort",{get:function(){return this.
outputPorts[i]},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,
"name",{get:function(){return this.trainedModel.name()},enumerable:!0,configurable:
!0}),Object.defineProperty(f.prototype,"description",{get:function(){return this.
trainedModel.description()},enumerable:!0,configurable:!0}),Object.defineProperty(
f.prototype,"owner",{get:function(){return this.trainedModel.owner},enumerable:!0,
configurable:!0}),f.prototype.remove=function(){r.prototype.remove.call(this);n.
Log.customEvent({key:"RemoveTrainedModel",type:"RemoveNode",data:this.trainedModel.
name()})},f}(t.GraphNode);t.TrainedModelNode=r})(t=n.Model||(n.Model={}))}(DataLab||
(DataLab={}));__extends=this.__extends||function(n,t){function r(){this.constructor=
n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t;(function(t){var i=function(t){function i(i,r,u,f,e){t.
call(this,i,r,u,f,e);this.category=n.Constants.ResourceCategory.Transform}return __extends(
i,t),i}(t.DataResource);t.Transform=i})(t=n.Model||(n.Model={}))}(DataLab||(DataLab=
{}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t;(function(t){function u(n){var u=new t.ModuleOutputPortDescriptor(
i,i,n.dataType,!1),r=new t.OutputPort(u);return r.outputEndpoint=n.downloadLocation,
[r]}var i="transformation",r=function(r){function f(i,f){f===void 0&&(f=null);r.
call(this,u(i),f);this.transform=i;this.author=new t.StaticProperty(n.LocalizedResources.
resourceAuthor,ko.observable(i.owner));this.format=new t.StaticProperty(n.LocalizedResources.
resourceFormat,ko.observable(i.dataType.toString()));this.createdOn=new t.StaticProperty(
n.LocalizedResources.resourceCreatedOn,ko.observable(n.Util.formatDate(i.created)));
this.trainingExperiment=new t.LinkProperty(n.LocalizedResources.trainingExperimentLink,
i.experimentId)}return __extends(f,r),Object.defineProperty(f.prototype,"transformPort",
{get:function(){return this.outputPorts[i]},enumerable:!0,configurable:!0}),Object.
defineProperty(f.prototype,"name",{get:function(){return this.transform.name()},
enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"description",
{get:function(){return this.transform.description()},enumerable:!0,configurable:
!0}),Object.defineProperty(f.prototype,"owner",{get:function(){return this.transform.
owner},enumerable:!0,configurable:!0}),f.prototype.remove=function(){r.prototype.
remove.call(this);n.Log.customEvent({key:"RemoveTransform",type:"RemoveNode",data:
this.transform.name()})},f}(t.GraphNode);t.TransformNode=r})(t=n.Model||(n.Model=
{}))}(DataLab||(DataLab={})),function(n){var t;(function(t){function i(i,r){if(i
instanceof t.Module)return new t.ModuleNode(i,r);if(i instanceof t.Dataset)return new
t.DatasetNode(i);if(i instanceof t.TrainedModel)return new t.TrainedModelNode(i);
if(i instanceof t.Transform)return new t.TransformNode(i);throw new Error(n.LocalizedResources.
unknownResourceType);}t.createNodeForResource=i})(t=n.Model||(n.Model={}))}(DataLab||
(DataLab={})),function(n){var t;(function(n){var t=function(){function n(){this.
isDirty=ko.observable(!1);this.parent=null;this.children=[];this._started=!1}return n.
prototype.addChild=function(n){n.parent=this;this.children.push(n)},n.prototype.
clean=function(){this.isDirty(!1);this.children.forEach(function(n){n.isDirty()&&
n.clean()})},n.prototype.dirty=function(){this._started&&(this.isDirty(!0),this.
parent&&!this.parent.isDirty()&&this.parent.dirty())},n.prototype.removeChild=function(
n){var t=this.children.indexOf(n);t>-1&&(n.parent=null,this.children.splice(t,1))}
,n.prototype.startDirtying=function(){this._started=!0},n.prototype.stopDirtying=
function(){this._started=!1},Object.defineProperty(n.prototype,"started",{get:function(
){return this._started},enumerable:!0,configurable:!0}),n}();n.Dirtyable=t})(t=n.
Util||(n.Util={}))}(DataLab||(DataLab={}));__extends=this.__extends||function(n,
t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);
r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(t){function h(
n,u){var o,f,s,e;if(!u)throw new Error("WebServicePortNode: dataTypeRegistry cannot be null");
return n===0?(o=new t.ModuleOutputPortDescriptor(i,i,u.getDataTypeWithId("Dataset"),
!1),f=new t.OutputPort(o),f.isWebServicePort=!0,[f]):(s=new t.ModuleInputPortDescriptor(
r,r,[u.getDataTypeWithId("Dataset"),u.getDataTypeWithId("ILearnerDotNet"),u.getDataTypeWithId(
"ITransformDotNet")],!1),e=new t.InputPort(s),e.isWebServicePort=!0,[e])}function o(
n,i){if(n instanceof t.InputPort&&i instanceof t.OutputPort)return{input:n,output:
i};if(n instanceof t.OutputPort&&i instanceof t.InputPort)return{input:i,output:
n};throw"Expected one InputPort and one OutputPort";}var i="Web service input",r=
"Web service output",s,u,f,e;(function(n){n[n.Input=0]="Input";n[n.Output=1]="Output"}
)(t.WebServicePortType||(t.WebServicePortType={}));s=t.WebServicePortType;u=function(
){function t(n,t){if(!t)throw new Error("WebServicePortNameValidator: parent argument can't be null");
this.type=n;this.parent=t}return t.prototype.validate=function(t){var r=this,i;return!this.
parent.getWebServicePortNodes||!t?null:(i=n.Util.filter(this.parent.getWebServicePortNodes(
this.type),function(n){return n===r.parent?!1:n.nameParameter.value()===t}),i.length>
0)?n.Util.format(n.LocalizedResources.validationDuplicateWebServicePortNameFailed,
t):null},t}();t.WebServicePortNameValidator=u;f=function(n){function t(t,i,r){r===
void 0&&(r=undefined);n.call(this,t,r);this.isLinked=ko.computed(function(){return!1}
);this.parent=i}return __extends(t,n),t}(t.Parameter);t.WebServicePortNodeParameter=
f;e=function(e){function s(n,o,s,c){e.call(this,h(n,c),o);this.connectedPort=null;
this.type=n;this.port=n===0?this.ports[i]:this.ports[r];this.getWebServicePortNodes=
s;var l=new t.ModuleParameterDescriptor("Name","Name","",!0);l.validators.push(new
u(n,this));this.nameParameter=new f(l,this,this.getDefaultValue())}return __extends(
s,e),Object.defineProperty(s.prototype,"name",{get:function(){return this.type===
0?i:r},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"description",
{get:function(){return this.type===0?i:r},enumerable:!0,configurable:!0}),Object.
defineProperty(s.prototype,"owner",{get:function(){return""},enumerable:!0,configurable:
!0}),s.prototype.connectTo=function(n){if(this.connectedPort){if(this.connectedPort===
n)return;this.parent.connectionRemoved.notifySubscribers(o(this.port,this.connectedPort))}
this.parent.connectionAdded.notifySubscribers(o(this.port,n));this.connectedPort=
n},s.prototype.getDefaultValue=function(){var u=this,i,r,t;if(!this.getWebServicePortNodes)
return null;for(i={},n.Util.forEach(this.getWebServicePortNodes(this.type),function(
n){if(n!==u){var t=n.nameParameter.value();t&&(i[t]=!0)}}),r=this.type===0?"input":
"output",t=1;i[r+t];t++);return r+t},s}(t.GraphNode);t.WebServicePortNode=e})(t=
n.Model||(n.Model={}))}(DataLab||(DataLab={}));__extends=this.__extends||function(
n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[
i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(t){var
u,i,r;(function(n){n[n.NotVisited=0]="NotVisited";n[n.BeingVisited=1]="BeingVisited";
n[n.BeenVisited=2]="BeenVisited"})(t.CycleDetectionVisitationStatus||(t.CycleDetectionVisitationStatus=
{}));u=t.CycleDetectionVisitationStatus;i=function(){function n(){return{InputPortsForPublish:
[],OutputPortsForPublish:[]}}return n}();t.ExperimentPublishInfo=i;r=function(r)
{function u(f,e,o,s){var h=this,c;f===void 0&&(f=null);e===void 0&&(e=null);o===
void 0&&(o=null);s===void 0&&(s=null);r.call(this);this.etag=ko.observable(null);
this.schemaVersion=ko.observable(1);this.nodes=n.observableMap();this.parameters=
n.observableMap();this.connectionAdded=new ko.subscribable;this.connectionRemoved=
new ko.subscribable;this.editVersion=ko.observable(0);this.experimentParameterInUse=
!1;this.isWebServiceExperimentInternal=ko.observable(!1);this.hasMissingResources=
!1;this.startTime=ko.observable();this.endTime=ko.observable();this.statusCode=ko.
observable(n.DataContract.State.InDraft);this.statusDetails=ko.observable();this.
tags=ko.observable([]);var l=new Date,a=l.toLocaleDateString(),v=n.Util.format(n.
LocalizedResources.ExperimentDefaultTitle,a);this.description=n.Validation.validatableObservable(
v,u.validateDescription);this.summary=new t.EditableTextProperty(n.LocalizedResources.
experimentSummary,n.LocalizedResources.experimentSummaryPlaceholder,ko.observable(
""),this);this.originalExperimentDocumentation=new t.LinkProperty(n.LocalizedResources.
originalExperimentDocumentation,"");this.experimentId=ko.observable(f);this.parentExperimentId=
e;this.publishedWebServiceGroupId=s;this.publishInfo=new i;this.isDraft=ko.computed(
function(){return h.statusCode()===n.DataContract.State.InDraft});this.dirtyStatus=
new n.Util.Dirtyable;this.dirtyStatus.isDirty.subscribe(function(n){n&&h.isDraft(
)&&h.editVersion(h.editVersion()+1)});this.dirtyForPublishStatus=new n.Util.Dirtyable;
this.allowPublish=ko.computed(function(){return h.statusCode()===n.DataContract.
State.Finished&&!h.dirtyForPublishStatus.isDirty()});this.connectionAdded.subscribe(
function(){h.findCycles();h.dirtyStatus.dirty();h.dirtyForPublishStatus.dirty()}
);this.connectionRemoved.subscribe(function(){h.findCycles();h.dirtyStatus.dirty(
);h.dirtyForPublishStatus.dirty()});this.description.subscribe(function(){h.dirtyStatus.
dirty()});this.datasets=Object.create(null);this.trainedModels=Object.create(null);
this.transformModules=Object.create(null);this.isEmpty=ko.computed(function(){return h.
nodes.count()===0});this.parametersWithName=function(n){var t=[];return h.parameters.
forEach(function(i){i.name===n&&t.push(i)}),t};this.disableNodesUpdate=ko.observable(
!1);c=[];c.push(new t.StaticProperty(n.LocalizedResources.PropertyPanelStartTime,
this.startTime));c.push(new t.StaticProperty(n.LocalizedResources.PropertyPanelEndTime,
this.endTime));c.push(new t.StaticProperty(n.LocalizedResources.PropertyPanelStatusCode,
this.statusCode));c.push(new t.StaticProperty(n.LocalizedResources.PropertyPanelStatusDetails,
this.statusDetails));this.publishedWebServiceGroupId&&(this.publishedWebServiceLinkProperty=
new t.LinkProperty(n.LocalizedResources.goToWebService,this.publishedWebServiceGroupId),
c.push(this.publishedWebServiceLinkProperty));this.parentExperimentId&&(this.priorRunLinkProperty=
new t.LinkProperty(n.LocalizedResources.priorRun,this.parentExperimentId),c.push(
this.priorRunLinkProperty));this.properties=ko.observableArray(c);this.isLeaf=ko.
observable(!0);this.isWebServiceExperiment=ko.computed({read:function(){return h.
isWebServiceExperimentInternal()||n.Util.forEach(h.nodes(),function(n){return n instanceof
t.WebServicePortNode?(h.isWebServiceExperimentInternal(!0),!1):!0}),h.isWebServiceExperimentInternal(
)||h.isWebServiceExperimentInternal(n.Util.values(h.parameters()).length>0),h.isWebServiceExperimentInternal(
)},write:function(n){h.isWebServiceExperimentInternal(n)}})}return __extends(u,r),
u.prototype.addPublishOutputPort=function(n){this.publishInfo.OutputPortsForPublish.
length>0&&(this.publishInfo.OutputPortsForPublish.forEach(function(n){n.isOutputPortForPublish(
!1)}),this.publishInfo.OutputPortsForPublish=[]);this.publishInfo.OutputPortsForPublish.
push(n);n.isOutputPortForPublish(!0);this.dirtyStatus.dirty()},u.prototype.addPublishInputPort=
function(n){this.publishInfo.InputPortsForPublish.length>0&&(this.publishInfo.InputPortsForPublish.
forEach(function(n){n.isInputPortForPublish(!1)}),this.publishInfo.InputPortsForPublish=
[]);this.publishInfo.InputPortsForPublish.push(n);n.isInputPortForPublish(!0);this.
dirtyStatus.dirty()},u.prototype.getWebServicePortNodes=function(i){return n.Util.
filter(n.Util.values(this.nodes()),function(n){if(n instanceof t.WebServicePortNode)
{var r=n;return r.type===i}return!1})},u.prototype.getModules=function(){return n.
Util.values(this.nodes()).filter(function(n){return n instanceof t.ModuleNode})}
,u.prototype.getDatasets=function(){return n.Util.filter(this.nodes(),function(n)
{return n instanceof t.DatasetNode})},Object.defineProperty(u.prototype,"storageUsedByDatasets",
{get:function(){return this.getDatasets().filter(function(n){return n.dataset.downloadLocation&&
n.dataset.downloadLocation.Size>0}).map(function(n){return n.dataset.downloadLocation.
Size}).reduce(function(n,t){return n+t},0)},enumerable:!0,configurable:!0}),u.prototype.
firstModuleWithCredentials=function(){return n.Util.first(this.getModules(),function(
n){return n.hasCredentials()},null)},u.prototype.firstCustomModule=function(){return n.
Util.first(this.getModules(),function(n){return n.isCustomModule()},null)},u.prototype.
getPublishInputPorts=function(){var t=n.Util.filter(this.getWebServicePortNodes(
0),function(n){return n.port.connectedNonWebServicePorts().length>0});return t&&
t.length>0?n.Util.map(t,function(n){return n.port.connectedNonWebServicePorts()[
0]}):this.publishInfo.InputPortsForPublish.length>0?this.publishInfo.InputPortsForPublish:
[]},u.prototype.getPublishOutputPorts=function(){var t=n.Util.filter(this.getWebServicePortNodes(
1),function(n){return n.port.connectedNonWebServicePorts().length>0});return t&&
t.length>0?n.Util.map(t,function(n){return n.port.connectedNonWebServicePorts()[
0]}):this.publishInfo.OutputPortsForPublish.length>0?this.publishInfo.OutputPortsForPublish:
[]},u.prototype.removePublishOutputPort=function(n){var t=this.publishInfo.OutputPortsForPublish.
indexOf(n);n.isOutputPortForPublish(!1);this.publishInfo.OutputPortsForPublish.splice(
t,1);this.dirtyStatus.dirty()},u.prototype.removePublishInputPort=function(n){var
t=this.publishInfo.InputPortsForPublish.indexOf(n);n.isInputPortForPublish(!1);this.
publishInfo.InputPortsForPublish.splice(t,1);this.dirtyStatus.dirty()},u.validateDescription=
function(t){return/\S/.test(t)?null:n.LocalizedResources.ErrorExperimentNameMustContainAtLeastOneNonWhitespaceCharacter}
,u.prototype.validatePortsForPublishAndSetSubgraph=function(){var o=this,r=this.
getPublishInputPorts(),u=this.getPublishOutputPorts(),t,i,f,e;if(r.length===1&&u.
length===0||r.length===0&&u.length===1)return!0;if(n.Features.multiInputSupportEnabled(
))t=!0,n.Util.forEach(u,function(i){for(var u=[i.parent.id],f=!1,e,s;u.length>0&&
!f;)e=u.shift(),s=o.nodes.lookup(e),n.Util.forEach(s.inputPorts,function(n){n.connectedOutputPort&&
(n.isDatasetDataType()?r.indexOf(n)<0?u.indexOf(n.connectedOutputPort.parent.id)<
0&&u.push(n.connectedOutputPort.parent.id):f=!0:u.indexOf(n.connectedOutputPort.
parent.id)<0&&u.push(n.connectedOutputPort.parent.id))});t=t&&f});else{if(r.length>
1)return!1;for(i=[u[0].parent.id],t=!1;i.length>0&&!t;)f=i.shift(),e=this.nodes.
lookup(f),n.Util.forEach(e.inputPorts,function(n){n.connectedOutputPort&&(n.isDatasetDataType(
)?r.indexOf(n)<0?i.indexOf(n.connectedOutputPort.parent.id)<0&&i.push(n.connectedOutputPort.
parent.id):t=!0:i.indexOf(n.connectedOutputPort.parent.id)<0&&i.push(n.connectedOutputPort.
parent.id))})}return t},u.prototype.addModule=function(n,i,r,u,f){var e=new t.ModuleNode(
n,i,f);return this.addNode(e,r,u),e},u.prototype.addDataset=function(n,i,r,u){u===
void 0&&(u=null);var f=new t.DatasetNode(n,u);return this.addNode(f,i,r),f},u.prototype.
addTrainedModel=function(n,i,r,u){u===void 0&&(u=null);var f=new t.TrainedModelNode(
n,u);return this.addNode(f,i,r),f},u.prototype.addWebServicePort=function(n,i,r,
u,f,e,o){var h=this,s=new t.WebServicePortNode(n,u,function(n){return h.getWebServicePortNodes(
n)},f);return this.addNode(s,i,r),e&&s.port.connectTo(e),o&&s.nameParameter.value(
o),s},u.prototype.addTransformModule=function(n,i,r,u){u===void 0&&(u=null);var f=
new t.TransformNode(n,u);return this.addNode(f,i,r),f},u.prototype.addParameter=
function(n,i,r){var u=new t.WebServiceParameter(n,i,r,this);if(this.parameters.lookup(
u.name))throw new Error("An experiment parameter with the given name already exists");
return this.parameters.put(u.id,u),this.dirtyStatus.dirty(),u},u.prototype.promoteModuleParameter=
function(t){for(var i=t.descriptor.friendlyName,u=0,r;;){if(n.Util.first(this.parameters(
),function(n){return n.name===i},null)===null)break;u++;i=t.descriptor.friendlyName+
u}return r=this.addParameter(t.descriptor,i,null),t.ensureUnlinked(),t.linkToWebServiceParameter(
r),this.dirtyStatus.dirty(),r},u.prototype.removeWebServiceParameter=function(n)
{n.unlinkAll();this.parameters.remove(n.id);this.dirtyStatus.dirty()},u.prototype.
addNode=function(n,i,r){var o,u,s,f,h,e;if(n instanceof t.DatasetNode)if(o=null,
u=n.dataset,this.datasets[u.id])throw"Dataset with id "+u.id+" already in experiment.";
else this.datasets[u.id]=n;if(n instanceof t.TrainedModelNode)if(s=null,f=n.trainedModel,
this.trainedModels[f.id])throw"TrainedModel with id "+f.id+" already in experiment.";
else this.trainedModels[f.id]=n;if(n instanceof t.TransformNode)if(h=null,e=n.transform,
this.transformModules[e.id])throw"Transform with id "+e.id+" already in experiment.";
else this.transformModules[e.id]=n;n.parent&&n.parent._removeNode(n);i&&n.x(i);r&&
n.y(r);this.nodes.put(n.id,n);n.parent=this;n.dirtyDraftState.startDirtying();this.
dirtyStatus.addChild(n.dirtyDraftState);n instanceof t.ModuleNode&&this.dirtyForPublishStatus.
addChild(n.dirtyForPublish);this.dirtyStatus.dirty();this.dirtyForPublishStatus.
dirty()},u.prototype.getDatasetNode=function(n){return this.datasets[n]?this.datasets[
n]:null},u.prototype.getTrainedModelNode=function(n){return this.trainedModels[n]?
this.trainedModels[n]:null},u.prototype.getTransformNode=function(n){return this.
transformModules[n]?this.transformModules[n]:null},u.prototype.forEachConnection=
function(t){n.Util.forEach(this.nodes(),function(i){n.Util.forEach(i.inputPorts,
function(i){n.Util.forEach(i.connectedPorts(),function(n){t(i,n)})})})},u.prototype.
validate=function(){var t=[],i,r;return this.description.startValidating(),i=this.
description.validate(),i.length>0&&t.push({erroneousObject:this.description,errorMessages:
i}),this.containsModule()||t.push({erroneousObject:{name:this.description()},errorMessages:
[n.LocalizedResources.noModulesError]}),r=this.findCycles(),r.rootNode&&t.push({
erroneousObject:r.rootNode,errorMessages:[n.LocalizedResources.cycleError]}),this.
parameters.forEach(function(n){var i=n.validate();i.length>0&&t.push({erroneousObject:
n,errorMessages:i})}),this.nodes.forEach(function(n){n.startValidating();var i=n.
validate();t=t.concat(i)}),t},u.prototype.saveError=function(){return(this.description.
startValidating(),this.description.validate().length>0)?n.LocalizedResources.emptyNameSaveError:
this.containsModule()?this.arePortNamesValid()?null:n.LocalizedResources.colonInNamesSaveErrror:
n.LocalizedResources.noModulesSaveError},u.prototype.arePortNamesValid=function(
){var i,n;for(i in this.nodes())if(n=this.nodes()[i],n instanceof t.WebServicePortNode&&
n.nameParameter.value().indexOf(":")>-1)return!1;return!0},u.prototype.findCycles=
function(){var t=this,n={map:{},rootNode:null};return this.nodes.forEach(function(
i){t.cycleFromNode(i,n)}),n},u.prototype._removeNode=function(n){this.nodes.remove(
n.id);n.parent=null;n instanceof t.DatasetNode&&(this.datasets[n.dataset.id]=null);
n instanceof t.TrainedModelNode&&(this.trainedModels[n.trainedModel.id]=null);n instanceof
t.TransformNode&&(this.transformModules[n.transform.id]=null);this.dirtyStatus.removeChild(
n.dirtyDraftState);n instanceof t.ModuleNode&&this.dirtyForPublishStatus.removeChild(
n.dirtyForPublish);this.dirtyStatus.dirty();this.dirtyForPublishStatus.dirty()},
u.prototype.findNodesEligibleForUpgrade=function(){var i=[];return n.Util.forEach(
this.nodes(),function(n){var r;if(n instanceof t.ModuleNode)r=n.module_;else if(
n instanceof t.DatasetNode)r=n.dataset;else if(n instanceof t.TrainedModelNode)r=
n.trainedModel;else{if(n instanceof t.WebServicePortNode)return;if(n instanceof t.
TransformNode)r=n.transform;else throw new Error("Unknown node type");}r.isLatest(
)||i.push(n)}),i},u.prototype.upgradeNodes=function(i,r,u,f,e){var o=this,s=this.
findNodesEligibleForUpgrade(),h={};s.forEach(function(s){var c,l,a,v;if(s instanceof
t.ModuleNode)c=s.module_,l=i;else if(s instanceof t.DatasetNode)c=s.dataset,l=r;
else if(s instanceof t.TrainedModelNode)c=s.trainedModel,l=u;else if(s instanceof
t.TransformNode)c=s.transform,l=f;else throw new Error("Unknown node type");a=l.
getLatestResourceInFamily(c.familyId);n.Log.info("Replacing an existing node since it uses a resource which has been updated.",
"Experiment.upgradeNodes",{experimentId:o.experimentId,existingNodeId:s.id,existingNodeFamilyId:
c.familyId});v=n.Model.createNodeForResource(a,e);s.replaceWith(v,h)})},u.prototype.
refresh=function(t){var u=this,i=$.Deferred(),r=null;return this.statusCode()===
n.DataContract.State.InDraft&&this.parentExperimentId?r=t.getExperimentAsync(this.
parentExperimentId):this.experimentId()?r=t.getExperimentAsync(this.experimentId(
)):i.reject(new Error("Null experimentId")),r!==null&&r.done(function(n){u.refreshFromNewExperiment(
n);i.resolve(n)}).fail(function(n){i.reject(n)}),n.Util.when(i)},u.prototype.startDirtyingAll=
function(){this.dirtyStatus.startDirtying();this.dirtyForPublishStatus.startDirtying(
);this.nodes.forEach(function(i){i.dirtyDraftState.startDirtying();i.dirtySinceLastRun.
startDirtying();i.dirtyForPublish.startDirtying();i instanceof t.ModuleNode&&(i.
dirtyStatusInfo.startDirtying(),n.Util.forEach(i.parameters,function(n){n.dirtyStatusInfo.
startDirtying();n.dirtyDraftState.startDirtying()}),n.Util.forEach(i.inputPorts,
function(n){n.dirtyStatusInfo.startDirtying();n.dirtyDraftState.startDirtying()}
))})},u.prototype.dirtyIfNeeded=function(n){var t=this;n.getModules().forEach(function(
n){var i=n,r=t.nodes.lookup(i.id);r&&r.dirtyIfNeeded(i)})},u.prototype.getNumberOfModules=
function(){return n.Util.filter(this.nodes(),function(t){return t instanceof n.Model.
ModuleNode}).length},u.prototype.cycleFromNode=function(t,i){var u=this,r;i===void
0&&(i={map:{},rootNode:null});r=null;switch(i.map[t.id]){case 1:return t;case 2:
return null;default:i.map[t.id]=1}return n.Util.forEach(t.outputPorts,function(n)
{n.connectedPorts.forEach(function(n){var f=u.cycleFromNode(n.parent,i);f?(n.connectionIsInCycle(
!0),r=f===t?null:f,r&&(i.rootNode=r)):n.connectionIsInCycle(!1)})}),i.map[t.id]=
2,r},u.prototype.refreshFromNewExperiment=function(t){var i=this;this.onRefreshFromNewExperiment&&
this.onRefreshFromNewExperiment(this,t);this.statusCode()!==n.DataContract.State.
InDraft&&(this.startTime(t.startTime()),this.endTime(t.endTime()),this.statusDetails(
t.statusDetails()),this.statusCode(t.statusCode()));t.getModules().forEach(function(
n){var t=i.nodes.lookup(n.id);t&&!t.isDirty&&t.updateInfo(n)})},u.prototype.containsModule=
function(){var i=n.Util.first(this.nodes(),function(n){return n instanceof t.ModuleNode}
,null);return i!==null},u.prototype.containsTrainingModule=function(){return n.Util.
first(this.nodes(),function(i){if(i instanceof t.ModuleNode){var r=i;return r.module_.
category===n.Constants.ResourceCategory.TrainModule}return!1},null)!=null},u.prototype.
persistedOnService=function(){return this.experimentId()!==null},u.prototype.setDraftState=
function(t){this.isDraft()!==t&&this.statusCode(t?n.DataContract.State.InDraft:n.
DataContract.State.NotStarted)},u.prototype.dispose=function(){r.prototype.dispose.
call(this)},u.prototype.getTag=function(n){if(!n)return[];var t=this.getTags();return t.
filter(function(t){return n.test(t)})},u.prototype.getTags=function(){var n=this.
tags();return n?n:[]},u}(n.Util.Disposable);t.Experiment=r})(t=n.Model||(n.Model=
{}))}(DataLab||(DataLab={})),function(n){var t;(function(n){var t,i;(function(n)
{n[n.None=0]="None";n[n.UpToDate=1]="UpToDate";n[n.NewVersionAvailable=2]="NewVersionAvailable";
n[n.Expiring=3]="Expiring";n[n.Expired=4]="Expired";n[n.Other=5]="Other"})(n.gatewayVersionState||
(n.gatewayVersionState={}));t=n.gatewayVersionState,function(n){n[n.None=0]="None";
n[n.NeedRegistration=1]="NeedRegistration";n[n.Online=2]="Online";n[n.Offline=3]=
"Offline";n[n.UpdateAvailable=4]="UpdateAvailable";n[n.Other=5]="Other"}(n.gatewayState||
(n.gatewayState={}));i=n.gatewayState})(t=n.DataContract||(n.DataContract={}))}(
DataLab||(DataLab={})),function(n){var t;(function(t){var i=function(){function i(
n,t){if(!n)throw new Error("'workspaceBackend' must be provided");if(!t)throw new
Error("'applicationCache' must be provided");this.id=n.workspaceId;this.friendlyName=
n.friendlyName;this.applicationCache=t;this.moduleCache=t.moduleCache;this.datasetCache=
t.datasetCache;this.notebookCache=t.notebookCache;this.trainedModelCache=t.trainedModelCache;
this.transformModulesCache=t.transformModulesCache;this.moduleCategoryRegistry=t.
moduleCategoryRegistry;this.datasetCategoryRegistry=t.datasetCategoryRegistry;this.
datasetUploadsInProgress=ko.observable([]);this.customModulePackageUploadsInProgress=
ko.observable([]);this.trainedModelUploadsInProgress=ko.observable([]);this.transformModuleUploadsInProgress=
ko.observable([]);this.workspaceBackend=n}return i.prototype.setUserName=function(
n){this.userName=n},i.prototype.getUserName=function(){return this.userName},i.prototype.
publishExperimentAsync=function(n){return this.workspaceBackend.publishExperimentAsync(
n)},i.prototype.submitExperimentAsync=function(n){return this.workspaceBackend.submitExperimentAsync(
n)},i.prototype.saveDraftAsync=function(n){return this.workspaceBackend.saveDraftAsync(
n)},i.prototype.updateDraftAsync=function(n){return this.workspaceBackend.updateExperimentAsync(
n)},i.prototype.deleteExperimentAsync=function(n,t){return this.workspaceBackend.
deleteExperimentAsync(n,t)},i.prototype.cancelExperimentAsync=function(n){return this.
workspaceBackend.cancelExperimentAsync(n)},i.prototype.deleteExperimentAndAncestorsAsync=
function(n,t){return this.workspaceBackend.deleteExperimentAndAncestorsAsync(n,t)}
,i.prototype.promoteOutputToDatasetAsync=function(i,r,u,f){var e=this;if(i.descriptor.
allowedDataTypes.length!==1)throw new Error("Can't promote output from a multi-typed output port.");
if(!(i.parent instanceof t.ModuleNode))throw new Error("Only the output ports of a module node can be promoted to a dataset.");
return n.Util.then(this.workspaceBackend.promoteOutputToDatasetAsync(i,r,u,f),function(
n){return e.datasetCache.getItem(n)})},i.prototype.promoteOutputToTrainedModelAsync=
function(i,r,u,f){var e=this;if(i.descriptor.allowedDataTypes.length!==1)throw new
Error("Can't promote output from a multi-typed output port.");if(!(i.parent instanceof
t.ModuleNode))throw new Error("Only the output ports of a module node can be promoted to a trained model.");
return n.Util.then(this.workspaceBackend.promoteOutputToTrainedModelAsync(i,r,u,
f),function(n){return e.trainedModelCache.getItem(n)})},i.prototype.promoteOutputToTransformModuleAsync=
function(i,r,u,f){var e=this;if(i.descriptor.allowedDataTypes.length!==1)throw new
Error("Can't promote output from a multi-typed output port.");if(!(i.parent instanceof
t.ModuleNode))throw new Error("Only the output ports of a module node can be promoted to a transformation model.");
return n.Util.then(this.workspaceBackend.promoteOutputToTransformModuleAsync(i,r,
u,f),function(n){return e.transformModulesCache.getItem(n)})},i.prototype.uploadDatasetAsync=
function(t,i,r,u,f,e){var o=this;return n.Util.then(this.workspaceBackend.uploadDatasetAsync(
t,i,r,u,f,e),function(n){return o.datasetCache.getItem(n)})},i.prototype.uploadCustomModulePackageAsync=
function(t,i,r,u,f,e){var o=this;return n.Util.then(this.workspaceBackend.uploadCustomModulePackageAsync(
t,i,r,u,f,e),function(t){var f=t.slice(),r=t.splice(0,1)[0],u,i;return r==="Finished"?
(u=t.map(function(n){return o.moduleCache.getItem(n)}),n.Util.then(n.Util.when.apply(
null,u),function(){for(var t,i=[],n=0;n<arguments.length;n++)i[+n]=arguments[n];
return t=[],t.push(r),i.forEach(function(n){o.moduleCategoryRegistry.contains(n.
category)||o.applicationCache.addCategory(n.category,o.moduleCategoryRegistry);t.
push(n.name())}),t})):(i=$.Deferred(),setTimeout(function(){return i.resolve(f)}
),i)})},i.prototype.getExperimentAsync=function(n){return this.workspaceBackend.
getExperimentAsync(n,this.moduleCache,this.datasetCache,this.trainedModelCache,this.
transformModulesCache,this.applicationCache.dataTypeRegistry,this)},i.prototype.
getExperimentLineageAsync=function(n){return this.workspaceBackend.getExperimentLineageAsync(
n)},i.prototype.getExperimentInfoAsync=function(n){return this.workspaceBackend.
getExperimentInfoAsync(n)},i.prototype.getDataflowAsync=function(n){return this.
workspaceBackend.getDataflowAsync(n,this.moduleCache,this.datasetCache,this.trainedModelCache,
this.transformModulesCache,this.applicationCache.dataTypeRegistry,this)},i.prototype.
createWebServiceGroupAsync=function(n,t,i,r){return this.workspaceBackend.createWebServiceGroupAsync(
n,t,i,r)},i.prototype.getWebServiceGroupAsync=function(n){return this.workspaceBackend.
getWebServiceGroupAsync(n)},i.prototype.updateWebServiceGroupAsync=function(n,t,
i,r,u){return this.workspaceBackend.updateWebServiceGroupAsync(n,t,i,r,u)},i.prototype.
listWebServiceGroupsAsync=function(){return this.workspaceBackend.listWebServiceGroupsAsync(
)},i.prototype.deleteWebServiceGroupAsync=function(n){return this.workspaceBackend.
deleteWebServiceGroupAsync(n)},i.prototype.createModelPackageAsync=function(n,t,
i){return this.workspaceBackend.createModelPackageAsync(n,t,i)},i.prototype.listModelPackagesAsync=
function(n){return this.workspaceBackend.listModelPackagesAsync(n)},i.prototype.
getModelPackageAsync=function(n,t){return this.workspaceBackend.getModelPackageAsync(
n,t)},i.prototype.updateModelPackageAsync=function(n,t,i,r,u,f){return this.workspaceBackend.
updateModelPackageAsync(n,t,i,r,u,f)},i.prototype.registerWebServiceAsync=function(
n,t){return this.workspaceBackend.registerWebServiceAsync(n,t)},i.prototype.getWebServiceAsync=
function(n,t){return this.workspaceBackend.getWebServiceAsync(n,t)},i.prototype.
updateWebServiceAsync=function(n,t,i,r,u){return this.workspaceBackend.updateWebServiceAsync(
n,t,i,r,u)},i.prototype.invokeScoreWebServiceAsync=function(n,t,i,r){return this.
workspaceBackend.invokeScoreWebServiceAsync(n,t,i,r)},i.prototype.createNotebookAsync=
function(n){return this.workspaceBackend.createNotebookAsync(n)},i.prototype.openNotebookAsync=
function(n){return this.workspaceBackend.openNotebookAsync(n)},i.prototype.createCommunityExperimentAsync=
function(n,t,i){return i===void 0&&(i=null),this.workspaceBackend.createCommunityExperimentAsync(
n,t,i)},i.prototype.startGetCommunityExperimentIdAsync=function(n,t,i){return this.
workspaceBackend.startGetCommunityExperimentIdAsync(n,t,i)},i.prototype.createCommunityNotebookAsync=
function(n,t,i){return this.workspaceBackend.createCommunityNotebookAsync(n,t,i)}
,i.prototype.startGetCommunityNotebookIdAsync=function(n,t,i,r){return this.workspaceBackend.
startGetCommunityNotebookIdAsync(n,t,i,r)},i.prototype.getNotebookUnpackStatusAsync=
function(n){return this.workspaceBackend.getNotebookUnpackStatusAsync(n)},i.prototype.
getUnpackStatusAsync=function(n){return this.workspaceBackend.getUnpackStatusAsync(
n)},i.prototype.getWorkspaceSettingsAsync=function(){return this.workspaceBackend.
getWorkspaceSettingsAsync()},i.prototype.updateWorkspaceSettings=function(n,t){return this.
workspaceBackend.updateWorkspaceSettings(n,t)},i.prototype.archiveExperimentAsync=
function(t){var i=this;return n.Util.then(this.getExperimentAsync(t),function(n)
{return n.isArchived=!0,i.workspaceBackend.updateExperimentAsync(n)})},i.prototype.
unarchiveExperimentAsync=function(t){var i=this;return n.Util.then(this.getExperimentAsync(
t),function(n){return n.isArchived=!1,i.workspaceBackend.updateExperimentAsync(n)}
)},i.prototype.listExperimentsAsync=function(t){var i=function(i){return t.creator!==
undefined&&t.creator!==i.Creator?!1:t.includeArchived!==undefined&&t.includeArchived!==
i.IsArchived?!1:t.isDraft!==undefined&&(t.isDraft&&n.DataContract.State.InDraft!==
i.Status.StatusCode||!t.isDraft&&n.DataContract.State.InDraft===i.Status.StatusCode)?
!1:!0};return n.Util.then(this.workspaceBackend.listExperimentsAsync(t),function(
n){return n.filter(i)})},i.prototype.listWorkspacesAsync=function(){return this.
workspaceBackend.listWorkspacesAsync()},i.prototype.listUserWorkspacesAsync=function(
n){return this.workspaceBackend.listUserWorkspacesAsync(n)},i.prototype.createExperimentStoragePackageAsync=
function(n,t,i){return this.workspaceBackend.createExperimentStoragePackageAsync(
n,t,i)},i.prototype.createExperimentStoragePackageForCommunityAsync=function(n,t,
i){return this.workspaceBackend.createExperimentStoragePackageForCommunityAsync(
n,t,i)},i.prototype.getExperimentStoragePackageAsync=function(n){return this.workspaceBackend.
getExperimentStoragePackageAsync(n)},i.prototype.createExperimentFromStoragePackageAsync=
function(n,t){return this.workspaceBackend.createExperimentFromStoragePackageAsync(
n,t)},i.prototype.createNotebookStoragePackageForCommunityAsync=function(n,t){return this.
workspaceBackend.createNotebookStoragePackageForCommunityAsync(n,t)},i.prototype.
getNotebookStoragePackageAsync=function(n){return this.workspaceBackend.getNotebookStoragePackageAsync(
n)},i.prototype.getModuleVisualizationData=function(n,t,i){return this.workspaceBackend.
getModuleVisualizationData(n,t,i)},i.prototype.getModuleVisualizationDataItem=function(
n,t,i,r,u,f,e){return this.workspaceBackend.getModuleVisualizationDataItem(n,t,i,
r,u,f,e)},i.prototype.getDatasetVisualizationData=function(n){return this.workspaceBackend.
getDatasetVisualizationData(n)},i.prototype.getModuleOutputSchema=function(n,t,i)
{return this.workspaceBackend.getModuleOutputSchema(n,t,i)},i.prototype.getDatasetSchema=
function(n){return this.workspaceBackend.getDatasetSchema(n)},i.prototype.getModuleOutput=
function(n,t,i){return this.workspaceBackend.getModuleOutput(n,t,i)},i.prototype.
getModuleErrorLog=function(n,t){return this.workspaceBackend.getModuleErrorLog(n,
t)},i.prototype.signOut=function(){return this.workspaceBackend.signOut()},i.prototype.
getStorageSpaceQuotaAsync=function(){return this.workspaceBackend.getStorageSpaceQuotaAsync(
)},i.prototype.getExperimentDetailsAsync=function(n){return this.workspaceBackend.
getExperimentDetailsAsync(n)},i.prototype.updateExperimentDetailsAsync=function(
n,t){return this.workspaceBackend.updateExperimentDetailsAsync(n,t)},i.prototype.
listProjects=function(n){return n===void 0&&(n=null),this.workspaceBackend.listProjects(
n)},i.prototype.createProject=function(n){return this.workspaceBackend.createProject(
n)},i.prototype.updateProject=function(n,t){return this.workspaceBackend.updateProject(
n,t)},i.prototype.getDataGatewayBackend=function(){return this.workspaceBackend.
dataGatewayBackend},i.prototype.startSubmitCompetitionEntryAsync=function(n){return this.
workspaceBackend.startSubmitCompetitionEntryAsync(n)},i.prototype.getCompetitionSubmissionStatusAsync=
function(n){return this.workspaceBackend.getCompetitionSubmissionStatusAsync(n)}
,i.prototype.getCompetitionSchemaDefinitionAsync=function(n,t){return this.workspaceBackend.
getCompetitionSchemaDefinitionAsync(n,t)},i.prototype.createProjectAsync=function(
n,t){return this.workspaceBackend.createProjectAsync(n,t)},i.prototype.getProjectsAsync=
function(n){return this.workspaceBackend.getProjectsAsync(n)},i.prototype.updateProjectAsync=
function(n,t){return this.workspaceBackend.updateProjectAsync(n,t)},i.prototype.
deleteProjectAsync=function(n){return this.workspaceBackend.deleteProjectAsync(n)}
,i.prototype.getProjectListForAsset=function(n){return this.workspaceBackend.getProjectListForAsset(
n)},i}();t.Workspace=i})(t=n.Model||(n.Model={}))}(DataLab||(DataLab={})),function(
){}(DataLab||(DataLab={})),function(n){var t;(function(t){var i;(function(t){function r(
n){return _.clone(n)}function i(n){return n.columnAttributes.length}function u(n,
t,i,r,u){return t===void 0&&(t={}),i===void 0&&(i={}),r===void 0&&(r=[]),u===void
0&&(u=0),{isInaccurate:u,columnAttributes:n,scoreColumns:t,labelColumns:i,featureChannels:
r}}function e(t){for(var u,h,l,c,e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[
o];return(u=r(t),u.isInaccurate=u.isInaccurate||0,e.length==0)?u:(h=t.columnAttributes.
map(function(n){return n.name}),e.forEach(function(n){return n.columnAttributes.
forEach(function(n){return h.push(n.name)})}),l=s(h,i(t)),c=i(t),e.forEach(function(
t){var o,a,s,e;if(t=r(t),t.isInaccurate=t.isInaccurate||0,u.isInaccurate=Math.max(
u.isInaccurate,t.isInaccurate),l>0)for(o=0;o<i(t);o++)a=t.columnAttributes[o].name,
s=h[o+c],a!=s&&f(t,o,s,!1);c+=i(t);u.columnAttributes.push.apply(u.columnAttributes,
t.columnAttributes);for(e in t.scoreColumns)e in u.scoreColumns||(u.scoreColumns[
e]=t.scoreColumns[e]);for(e in t.labelColumns)e in u.labelColumns||(u.labelColumns[
e]=t.labelColumns[e]);t.featureChannels.forEach(function(t){var i=n.Util.first(u.
featureChannels,function(n){return n.name==t.name},null);i?i.featureColumns.push.
apply(i.featureColumns,t.featureColumns):u.featureChannels.push(t)})}),u)}function o(
t,i){var o=i.map(function(n){return t.columnAttributes[n]}),r=new n.Util.StringSet(
o.map(function(n){return n.name})),s=Object.create(null),f,e;return n.Util.forEach(
t.scoreColumns,function(n,t){r.has(n)&&(s[t]=n)}),f=Object.create(null),n.Util.forEach(
t.labelColumns,function(n,t){r.has(n)&&(f[t]=n)}),e=[],t.featureChannels.forEach(
function(n){var t=n.featureColumns.filter(function(n){return r.has(n)});t.length>
0&&e.push({name:n.name,isNormalized:n.isNormalized,featureColumns:t})}),u(o,s,f,
e,t.isInaccurate)}function f(n,t,i,r){var u,f,e,s,o;if(r===void 0&&(r=!0),e=n.columnAttributes,
typeof t=="string"){if(f=t,s=e.some(function(n,t){return n.name==f?(u=t,!0):!1}),
!s)throw new Error("Couldn't find column named '"+f+"'");}else{if(u=t,u<0||u>=e.
length)throw new Error("Out of bounds column index: "+u);f=e[u].name}if(r&&e.some(
function(n){return n.name==i}))throw new Error("New column name already exists in schema: '"+
i+"'");e[u].name=i;for(o in n.labelColumns)n.labelColumns[o]==f&&(n.labelColumns[
o]=i);for(o in n.scoreColumns)n.scoreColumns[o]==f&&(n.scoreColumns[o]=i);n.featureChannels.
forEach(function(n){for(var t=0;t<n.featureColumns.length;t++)n.featureColumns[t]==
f&&(n.featureColumns[t]=i)})}function s(t,i,r,u){var s,e,o,f;if(r===void 0&&(r=2),
u===void 0&&(u="({0})"),s=t.length,s==i)return 0;for(e=new n.Util.StringSet,f=0;
f<i;f++)e.add(t[f]);for(o=[],f=i;f<s;f++)e.add(t[f])||o.push(f);return o.forEach(
function(i){var s=t[i],o=r,f;do f=s+n.Util.format(u,o.toString()),o++;while(!e.add(
f));t[i]=f}),o.length}t.clone=r;t.numColumns=i;t.createSchema=u;t.concat=e;t.selectColumns=
o;t.renameColumn=f})(i=t.SchemaUtils||(t.SchemaUtils={}))})(t=n.Model||(n.Model=
{}))}(DataLab||(DataLab={})),function(n){var t;(function(t){var i;(function(t){function f(
n){var t=JSON.parse(n),f;if(!("isFilter"in t&&"rules"in t))throw new Error("Invalid ruleset JSON: "+
n.substr(0,1e3)+" )");return f=t.rules.map(function(n){var o=i[n.ruleType],t=[],
f=[],e=[];return"columns"in n&&(t=n.columns),"columnTypes"in n&&(f=n.columnTypes.
map(function(n){return r[n]})),"columnKinds"in n&&(e=n.columnKinds.map(function(
n){return u[n]})),{ruleType:o,exclude:n.exclude,columns:t,columnTypes:f,columnKinds:
e}}),{isFilter:t.isFilter,rules:f}}var i,r,u,e;(function(n){n[n.ColumnNames=0]="ColumnNames";
n[n.ColumnIndexes=1]="ColumnIndexes";n[n.ColumnTypes=2]="ColumnTypes";n[n.AllColumns=
3]="AllColumns"})(t.RuleType||(t.RuleType={}));i=t.RuleType,function(n){n[n.String=
0]="String";n[n.Integer=1]="Integer";n[n.Double=2]="Double";n[n.Boolean=3]="Boolean";
n[n.DateTime=4]="DateTime";n[n.TimeSpan=5]="TimeSpan";n[n.Categorical=6]="Categorical";
n[n.Numeric=7]="Numeric";n[n.All=8]="All"}(t.ColumnType||(t.ColumnType={}));r=t.
ColumnType,function(n){n[n.Feature=0]="Feature";n[n.Score=1]="Score";n[n.Label=2]=
"Label";n[n.All=3]="All"}(t.ColumnKind||(t.ColumnKind={}));u=t.ColumnKind;t.parseQuery=
f;e=function(){function t(t,i){var e=this,r,u;if(this.nameToIndexMap=null,r=typeof
t=="string"?f(t):t,this.query=r,this.source=i,r.rules.length==0)throw new Error(
"At least one rule must be specified");if(r.rules[0].exclude)throw new Error("The first rule must be an include rule.");
if(r.isFilter)u=new n.Util.StringSet,r.rules.forEach(function(n){var t=e.getRuleColumns(
i,n);n.exclude?u.exceptWith(t.map(function(n){return n.toString()})):u.unionWith(
t.map(function(n){return n.toString()}))}),this.includedColumnIndexes=u.map(function(
n){return parseInt(n)}).sort(function(n,t){return n-t});else{if(r.rules.length!=
1)throw new Error("Only one rule is allowed in non-filter mode.");this.includedColumnIndexes=
this.getRuleColumns(i,r.rules[0])}}return t.prototype.getRuleColumns=function(n,
t){switch(t.ruleType){case 0:return this.handleColumnNamesRule(n,t);case 1:return this.
handleColumnIndexesRule(n,t);case 2:return this.handleColumnTypesRule(n,t);case 3:
return n.columnAttributes.map(function(n,t){return t});default:throw new Error("Unhandled ruleType: "+
t.ruleType);}},t.prototype.handleColumnNamesRule=function(n,t){var i=this;return this.
nameToIndexMap||(this.nameToIndexMap=Object.create(null),this.source.columnAttributes.
forEach(function(n,t){return i.nameToIndexMap[n.name]=t})),t.columns.filter(function(
n){return n in i.nameToIndexMap}).map(function(n){return i.nameToIndexMap[n]})},
t.prototype.handleColumnIndexesRule=function(n,t){var u=/^\s*(\d+)\s*$/,f=/^\s*(\d+)\s*\-\s*(\d+)\s*$/,
i=n.columnAttributes.length,r=[];return t.columns.forEach(function(n){var t=n.match(
u),s,e,o,h;if(t)s=parseInt(t[1])-1,s>=0&&s<i&&r.push(s);else{if(t=n.match(f),!t)
throw new Error("Invalid index range expression: "+n);if(e=parseInt(t[1])-1,o=parseInt(
t[2])-1,o<e||e<0||o<0)throw new Error("Out of range column range: "+n);if(e<i&&o<
i)for(h=e;h<=o;h++)r.push(h)}}),r},t.prototype.handleColumnTypesRule=function(t,
i){var r=[],f=!1,e=!1,u;return i.columnTypes.forEach(function(n){switch(n){case 0:
r.push("String");break;case 1:case 2:case 7:r.push("Numeric");break;case 3:r.push(
"Binary");break;case 4:case 5:r.push("Object");break;case 6:f=!0;break;case 8:e=
!0;break;default:throw new Error("Unhandled ColumnType: "+n);}}),u=[],t.columnAttributes.
forEach(function(o,s){var c,l,h;if(e||f&&o.type=="Categorical"||r.indexOf(o.type)>=
0)for(c=0;c<i.columnKinds.length;c++){l=i.columnKinds[c];switch(l){case 0:h=o.isFeature;
break;case 1:h=n.Util.values(t.scoreColumns).indexOf(o.name)>=0;break;case 2:h=n.
Util.values(t.labelColumns).indexOf(o.name)>=0;break;case 3:h=!0;break;default:throw new
Error("Unhandled ColumnKind: "+l);}if(h){u.push(s);break}}}),u},t}();t.ColumnSelection=
e})(i=t.ColumnPicker||(t.ColumnPicker={}))})(t=n.Model||(n.Model={}))}(DataLab||
(DataLab={})),function(n){var t;(function(t){var i;(function(i){function o(i,r,u,
f,e,o){var l=t.SchemaUtils.clone(i),c,a;if(u!=0&&r.includedColumnIndexes.forEach(
function(n){var t;switch(u){case 1:t="String";break;case 2:case 3:t="Numeric";break
case 4:t="Binary";break;case 5:case 6:t="Object";break;default:throw new Error("Unexpected DataType encountered");
}l.columnAttributes[n].type=t}),f!=0&&r.includedColumnIndexes.forEach(function(n)
{var t=l.columnAttributes[n];switch(f){case 1:t.type!="Categorical"&&(t.type="Categorical",
t.domain={categoryType:"double",isNullable:!0,categories:[]});break;case 2:t.type==
"Categorical"&&(t.type=["short","ushort","int","uint","long","ulong","float","double"].
indexOf(t.domain.categoryType)!=-1?"Numeric":t.domain.categoryType=="string"?"String":
"Object",t.domain=undefined);break;default:throw new Error("Unexpected Categorical value encountered");
}}),e!=0&&s(l,r.includedColumnIndexes,e),o){if(c=h(o),c.length!=new n.Util.StringSet(
c).size)throw new Error("Duplicate column names given for renaming");if(c.length!=
r.includedColumnIndexes.length)throw new Error("Number of new column names must match number of selected columns");
for(a=0;a<c.length;a++)t.SchemaUtils.renameColumn(l,r.includedColumnIndexes[a],c[
a],!1)}return l}function s(n,t,i){switch(i){case 0:break;case 1:t.forEach(function(
t){return n.columnAttributes[t].isFeature=!0});break;case 2:t.length==1&&(n.labelColumns[
r]=n.columnAttributes[t[0]].name,n.columnAttributes[t[0]].isFeature=!1);break;case
4:t.forEach(function(t){return n.columnAttributes[t].isFeature=!1});break;case 5:
if(r in n.labelColumns){var u=n.labelColumns[r];t.some(function(t){return n.columnAttributes[
t].name==u})&&delete n.labelColumns[r]}break;case 6:n.scoreColumns={};break;case
3:case 7:break;default:throw new Error("Unexpected Fields value encountered");}}
function h(n){function e(n){return n.replace(/\s*$/,"")}for(var f=[],i="",u="",r=
0,t;r<n.length;)if(t=n.charAt(r++),t==",")i+=e(u),f.push(i),i="",u="";else if(t!=
" "&&t!="\t"||i.length!=0||u.length!=0)if(t=='"'&&i.length==0&&u.length==0)while(
r<n.length)if(t=n.charAt(r++),t=='"')if(r<n.length&&n.charAt(r)=='"')i+=t,r++;else
break;else i+=t;else u+=t;return i+=e(u),f.push(i),f}var u,f,e,r;(function(n){n[
n.Unchanged=0]="Unchanged";n[n.String=1]="String";n[n.Integer=2]="Integer";n[n.Double=
3]="Double";n[n.Boolean=4]="Boolean";n[n.DateTime=5]="DateTime";n[n.TimeSpan=6]=
"TimeSpan"})(i.DataType||(i.DataType={}));u=i.DataType,function(n){n[n.Unchanged=
0]="Unchanged";n[n.Categorical=1]="Categorical";n[n.NonCategorical=2]="NonCategorical"}
(i.Categorical||(i.Categorical={}));f=i.Categorical,function(n){n[n.Unchanged=0]=
"Unchanged";n[n.Features=1]="Features";n[n.Labels=2]="Labels";n[n.Weights=3]="Weights";
n[n.ClearFeatures=4]="ClearFeatures";n[n.ClearLabels=5]="ClearLabels";n[n.ClearScores=
6]="ClearScores";n[n.ClearWeights=7]="ClearWeights"}(i.Fields||(i.Fields={}));e=
i.Fields;i.computeOutputSchema=o;r="True Labels"})(i=t.MetadataEditor||(t.MetadataEditor=
{}))})(t=n.Model||(n.Model={}))}(DataLab||(DataLab={})),function(n){var t;(function(
t){function v(){return new a}function u(n,t){return{computeOutputSchema:function(
i,r){return h(i,r,n,function(){for(var u=[],n=0;n<arguments.length;n++)u[+n]=arguments[
n];return t.apply(null,[i,r].concat(u))})}}}function r(n){return u([n],function(
n,t,i){return i})}function y(n,i){return u([n],function(n,r,u){return t.SchemaUtils.
concat(u,t.SchemaUtils.createSchema(i))})}function p(n,i){return u([n,i],function(
n,i,r,u){return t.SchemaUtils.concat(r,u)})}function o(n,i){return u([i],function(
i,r,u){var f=i.parameters[n].value(),e;return f?(e=new t.ColumnPicker.ColumnSelection(
decodeURIComponent(f),u),t.SchemaUtils.selectColumns(u,e.includedColumnIndexes)):
null})}function f(n,i,r){return u([r],function(r,u,f){var s=r.parameters[i].value(
),e,h,o;return s=="Inplace"?f:(e=r.parameters[n].value(),!e)?null:(h=new t.ColumnPicker.
ColumnSelection(decodeURIComponent(e),f),o=t.SchemaUtils.selectColumns(f,h.includedColumnIndexes),
s=="Append"?t.SchemaUtils.concat(f,o):o)})}function s(i,r,u){var o,s,f;if(typeof
r=="string"){if(s=r,o=u.inputPorts[r],!o)throw new Error("Expected input port not found: '"+
s+"'");}else o=r;if(f=o.connectedOutputPort,f)if(f.parent instanceof t.DatasetNode)
{if(f.schemaEndpoint)return i.getDatasetSchema(f.parent.dataset.id)}else if(f.parent
instanceof t.ModuleNode){var e=f.parent,l=f.schemaEndpoint&&!e.isDirty,h=f.descriptor.
schemaPropagationRule,c=n.Util.when(null);return!l&&h&&(c=h.computeOutputSchema(
e,i)),n.Util.then(c,function(t){if(t)return t;if(f.schemaEndpoint){var r=i.getModuleOutputSchema(
e.executedExperimentId,e.id,f.name);return n.Util.then(r,function(n){return e.isDirty&&
(n.isInaccurate=2),n})}return null})}return n.Util.when(null)}function h(t,i,r,u)
{var f=r.map(function(n){return s(i,n,t)}),e;return e=f.length>1?n.Util.when.apply(
null,f):f[0],n.Util.then(e,function(){for(var t=[],n=0;n<arguments.length;n++)t[
+n]=arguments[n];return t.every(function(n){return n!=null})?u.apply(null,t):null}
)}function i(n,t,i,r){var f,o;typeof r=="undefined"?f=i:(o=i,f=u(o,r));e[n+"/"+t]=
f}function w(n,t){var i=n+"/"+t;return e[i]||v()}var a=function(){function i(){}
return i.prototype.computeOutputSchema=function(t,i){var f=this,r=n.Util.filter(
t.inputPorts,function(n){return n.isDatasetDataType()&&n.isConnected()}),u;return r.
length==0?n.Util.when(null):(u=r.map(function(n){return n.name}),h(t,i,u,function(
){for(var t=[],n=0;n<arguments.length;n++)t[+n]=arguments[n];return f.unionOfSchemas(
t)}))},i.prototype.unionOfSchemas=function(i){var r=t.SchemaUtils.clone(i[0]),f,
u;if(r.isInaccurate=2,i.length>1)for(f=new n.Util.StringSet(r.columnAttributes.map(
function(n){return n.name})),u=1;u<i.length;u++)i[u].columnAttributes.forEach(function(
n){f.add(n.name)&&r.columnAttributes.push(_.clone(n))});return r.columnAttributes.
forEach(function(n){return n.isInaccurate=!0}),r},i}(),e,c,l;t.computeSchemaOfInputPort=
s;e={};t.getSchemaPropagationRule=w;i("Add Columns","Combined dataset",p("Left dataset",
"Right dataset"));i("Add Rows","Results dataset",r("Dataset1"));i("Apply Filter",
"Results dataset",o("Column set","Dataset"));i("Assign to Clusters","Results dataset",
["Dataset"],function(n,i,r){var f=n.parameters["Check for Append or Uncheck for Result Only"].
value(),u=t.SchemaUtils.createSchema([{name:"Assignment",type:"Numeric",isFeature:
!0}]);return f?t.SchemaUtils.concat(r,u):u});i("Clip Values","Results dataset",[
"Dataset"],function(n,i,r){var e=n.parameters["Overwrite flag"].value(),o=n.parameters[
"Add indicator columns"].value(),f,u;return e&&!o?r:(f=t.SchemaUtils.clone(r),u=
[],f.columnAttributes.forEach(function(n){u.push(n);e||u.push({name:n.name+"_clipped_value",
type:n.type,isFeature:!0});o&&u.push({name:n.name+"_clipped",type:"Binary",isFeature:
!0})}),f.columnAttributes=u,f)});for(c in["CSV","TSV","ARFF","SVMLight","Dataset"])
l="Convert to "+c,i(l,"Results dataset",r("Dataset"));i("Group Categorical Values",
"Results dataset",f("Selected columns","Output mode","Dataset"));i("Indicator Values",
"Results dataset",["Dataset"],function(n,i,r){var o=n.parameters["Overwrite categorical columns"].
value(),u,f,e;return o?r:(u=n.parameters["Categorical columns to convert"].value(
),!u)?null:(f=new t.ColumnPicker.ColumnSelection(decodeURIComponent(u),r),e=t.SchemaUtils.
selectColumns(r,f.includedColumnIndexes),t.SchemaUtils.concat(r,e))});i("Linear Correlation",
"Results dataset",r("Dataset"));i("Metadata Editor","Results dataset",["Dataset"],
function(n,i,r){var u=n.parameters.Column.value();if(!u)return null;var f=new t.
ColumnPicker.ColumnSelection(decodeURIComponent(u),r),e=n.parameters["Data Type"].
value(),o=t.MetadataEditor.DataType[e],s=n.parameters.Categorical.value(),h=t.MetadataEditor.
Categorical[s],c=n.parameters.Fields.value(),l=t.MetadataEditor.Fields[c],a=n.parameters[
"New Column Name"].value();return t.MetadataEditor.computeOutputSchema(r,f,o,h,l,
a)});i("Missing Values Scrubber","Results dataset",["Dataset"],function(n,i,r){var
u=t.SchemaUtils.clone(r),f=n.parameters["Cols with all MV"].value(),e=n.parameters[
"MV indicator column"].value(),o,s;return(f!="KeepColumns"||e!="DoNotGenerate")&&
(u.isInaccurate=1),f!="KeepColumns"&&u.columnAttributes.forEach(function(n){return n.
isInaccurate=!0}),e!="DoNotGenerate"&&(o=u.columnAttributes.map(function(n){return{
name:n.name+"_IsMissing",type:"Binary",isFeature:!0,isInaccurate:!0}}),s=t.SchemaUtils.
createSchema(o),u=t.SchemaUtils.concat(u,s)),u});i("Partition and Sample","Results dataset",
r("Dataset"));i("Probability Function Evaluation","Results dataset",f("Column set",
"Result mode","Dataset"));i("Project Columns","Results dataset",o("Select Columns",
"Dataset"));i("Quantize","Quantized dataset",f("Comma-separated list of columns to bin",
"Output mode","Dataset"));i("Remove Duplicate Rows","Results dataset",r("Dataset"));
i("Score Model","Scored dataset",y("Dataset",[{name:"Scored Labels",type:"String",
isFeature:!0},{name:"Scored Probabilities",type:"Numeric",isFeature:!0}]));i("Split",
"Results dataset1",r("Dataset"));i("Split","Results dataset2",r("Dataset"));i("Transform Data By Scaling",
"Transformed dataset",r("Dataset"))})(t=n.Model||(n.Model={}))}(DataLab||(DataLab=
{}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t;(function(t){function f(n,t){if(t.allowedDataTypes.length!==
1)throw new Error("OutputPortDescriptor has multiple allowed types, which is not currently supported.");
var i=t.allowedDataTypes[0];return n.allowedDataTypes.some(function(n){return n.
acceptsConnectionFrom(i)})}var i=function(){function t(t,i,r,u){if(u===void 0&&(
u=!1),!r||r.length==0)throw new Error("At least one allowed DataType must be specified");
this.name=t;this.friendlyName=i;this.allowedDataTypes=n.Util.values(r);this.optional=
u}return t.prototype.isCompatible=function(){throw new Error("isCompatible is abstract");
},t}(),r,u;t.ModulePortDescriptor=i;r=function(n){function t(t,i,r,u){n.call(this,
t,i,r,u)}return __extends(t,n),t.prototype.isCompatible=function(n){return n instanceof
u&&f(this,n)},t}(i);t.ModuleInputPortDescriptor=r;u=function(n){function t(t,i,r,
u){n.call(this,t,i,[r],u)}return __extends(t,n),t.prototype.isCompatible=function(
n){return n instanceof r&&f(n,this)},t}(i);t.ModuleOutputPortDescriptor=u})(t=n.
Model||(n.Model={}))}(DataLab||(DataLab={}));__extends=this.__extends||function(
n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[
i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(n){var
t=function(n){function t(t,i,r,u,f,e,o,s,h){u===void 0&&(u=[]);s===void 0&&(s=!1);
h===void 0&&(h=!1);n.call(this,t,f,e,o);this.portDescriptors=r;Object.freeze(r);
this.parameterDescriptors=u;Object.freeze(u);this.category=i;this.isLatestClientVersion=
!0;this.isDeterministic=s;this.deterministicByDefault=h}return __extends(t,n),t}
(n.Resource);n.Module=t})(t=n.Model||(n.Model={}))}(DataLab||(DataLab={}));__extends=
this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(
i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(
n){var t=function(n){function t(t,i,r,u,f,e,o){n.call(this,f,u,f,o);this.name(t);
this.author=i;this.language=r;this.modified=e?e:u}return __extends(t,n),Object.defineProperty(
t.prototype,"galleryUri",{get:function(){return null},set:function(){},enumerable:
!0,configurable:!0}),Object.defineProperty(t.prototype,"galleryId",{get:function(
){return null},set:function(){},enumerable:!0,configurable:!0}),t}(n.Resource);n.
Notebook=t})(t=n.Model||(n.Model={}))}(DataLab||(DataLab={})),function(n){var t;
(function(t){function i(t){return new n.Model.Notebook(t.Name,t.Author,t.Language,
n.Util.parseJsonDate(t.Created),t.FamilyId,n.Util.parseJsonDate(t.Modified))}t.deserializeNotebook=
i})(t=n.DataContract||(n.DataContract={}))}(DataLab||(DataLab={})),function(n){var
t;(function(t){var i;(function(i){function a(t){if(!n.Util.isObjectEmpty(t.parameters))
throw new Error("v2 experiments do not yet support experiment-level parameters");
return{SchemaVersion:2,ExperimentId:t.experimentId(),ParentExperimentId:t.parentExperimentId,
Graph:f(t.nodes),Etag:null}}function f(n){var t=[];return n.forEach(function(n){
n instanceof r.ModuleNode?t.push(c(n)):n instanceof r.DatasetNode?t.push(o(n)):n
instanceof r.TrainedModelNode?t.push(s(n)):n instanceof r.TransformNode&&t.push(
h(n))}),{Nodes:t}}function v(t){var u=f(t).Nodes,h=Object.create(null),l=Object.
create(null);u.forEach(function(n){h[n.Id]=n});var c=[],i=Infinity,r=Infinity,o=
-Infinity,s=-Infinity;return t.forEach(function(n){i=Math.min(i,n.x());r=Math.min(
r,n.y());o=Math.max(o,n.x()+n.width());s=Math.max(s,n.y()+n.height())}),u.forEach(
function(n){n.X-=i;n.Y-=r}),t.forEach(function(t){n.Util.forEach(t.outputPorts,function(
t){n.Util.forEach(t.connectedPorts(),function(n){n.parent.id in h||c.push(e(n,t))}
)})}),{Nodes:u,X:i,Y:r,Width:o-i,Height:s-r,SubgraphParameters:l,EgressConnections:
c}}function e(n,t){return{InputNodeId:n.parent.id,InputPortName:n.name,OutputNodeId:
t.parent.id,OutputPortName:t.name}}function y(n,t){return{IsInput:!0,PortName:n,
ParentNodeId:t,Connection:null}}function u(t){var i={Id:t.id,InputPorts:[],OutputPorts:
[],NodeType:5,Guid:"",X:t.x(),Y:t.y(),Comment:t.comment(),CommentCollapsed:t.commentCollapsed(
)};return n.Util.forEach(t.inputPorts,function(t){var r=y(t.name,i.Id);n.Util.forEach(
t.connectedPorts(),function(n){r.Connection=e(t,n)});i.InputPorts.push(r)}),i}function o(
n){var t=u(n);return t.NodeType=1,t.Guid=n.dataset.id,t}function s(n){var t=u(n);
return t.NodeType=2,t.Guid=n.trainedModel.id,t}function h(n){var t=u(n);return t.
NodeType=4,t.Guid=n.transform.id,t}function c(n){var t=u(n);return t.NodeType=0,
t.Guid=n.module_.id,t.Parameters=Object.create(null),l(n.parameters,t.Parameters),
t}function l(i,u){n.Util.forEach(i,function(i){var f={};i.descriptor instanceof r.
ModeModuleParameterDescriptor&&n.Util.forEach(i.childParameters,function(n,t){var
i=Object.create(null);l(n,i);f[t]=i});u[i.name]=i.isLinked()?{Name:i.name,Value:
i.linkedWebServiceParameter().name,ValueType:t.ModuleParameterValueType.GraphParameterName,
LinkedValue:i.value(),ChildParameters:Object.keys(f).length>0?f:undefined}:{Name:
i.name,Value:i.value(),ValueType:t.ModuleParameterValueType.Literal,ChildParameters:
Object.keys(f).length>0?f:undefined}})}var r=n.Model;i.SerializedExperiment=a;i.
SerializedGraph=f;i.SerializedSubgraph=v;i.SerializedConnection=e;i.SerializedDatasetNode=
o;i.SerializedTrainedModelNode=s;i.SerializedTransformNode=h;i.SerializedModuleNode=
c})(i=t.v2||(t.v2={}))})(t=n.DataContract||(n.DataContract={}))}(DataLab||(DataLab=
{})),function(n){var t;(function(t){function u(n){var t=n.match(/\.(\w+)$/);return t?
t[1]:null}function i(n){return n.charAt(0)==="."?n.substr(1):n}var r=function(){
function t(t){var i=this;this.dataTypes=Object.create(null);t.forEach(function(t)
{if(t.dataTypeId in i.dataTypes)throw new Error(n.Util.format(n.LocalizedResources.
duplicateType,t.dataTypeId));i.dataTypes[t.dataTypeId]=t});Object.freeze(this.dataTypes)}
return t.prototype.findDataTypesForFileExtension=function(t){if(t=i(t),!t)throw new
Error(n.LocalizedResources.nonEmptyExtension);return n.Util.filter(this.dataTypes,
function(n){return n.fileExtension?t.toLowerCase()===i(n.fileExtension.toLowerCase(
)):!1})},t.prototype.findDataTypesForFileName=function(n){var t=u(n);return t?this.
findDataTypesForFileExtension(t):[]},t.prototype.getDataTypeWithId=function(t){var
i=this.dataTypes[t];if(!i)throw n.Util.format(n.LocalizedResources.noSuchDataType,
t);return i},t.prototype.tryGetDataTypeWithId=function(n){var t=this.dataTypes[n];
return t===undefined?null:t},t}();t.DataTypeRegistry=r})(t=n.Model||(n.Model={})
)}(DataLab||(DataLab={})),function(n){var t;(function(t){var i;(function(t){function u(
t,r,u,f,e,o,s,h){function l(n,t){n.x(t.X);n.y(t.Y);a.nodesToContract[n.id]=t;a.contractToNodes[
t.Id]=n}var a={nodesToContract:Object.create(null),contractToNodes:Object.create(
null)},c=[];return t.Nodes.forEach(function(t){var a,v,y,p;t.NodeType===1?(a=u.getItem(
t.Guid),a.done(function(i){var r=new n.Model.DatasetNode(i,s(t));l(r,t)}).fail(function(
){o(t)}),c.push(a)):t.NodeType===0?(v=r.getItem(t.Guid),v.done(function(r){var u=
new n.Model.ModuleNode(r,h,s(t)),f;l(u,t);f=t;i(u.parameters,f.Parameters);u.comment(
t.Comment)}).fail(function(){o(t)}),c.push(v)):t.NodeType===2?(y=f.getItem(t.Guid),
y.done(function(i){var r=new n.Model.TrainedModelNode(i,s(t));l(r,t)}).fail(function(
){o(t)}),c.push(y)):t.NodeType===4?(p=e.getItem(t.Guid),p.done(function(i){var r=
new n.Model.TransformNode(i,s(t));l(r,t)}).fail(function(){o(t)}),c.push(p)):o(t)}
),n.Util.then(n.Util.when.apply(c),function(){return a})}function f(t,i){var r=[
];return n.Util.forEach(t.nodesToContract,function(n){var u=t.contractToNodes[n.
Id];n.InputPorts.forEach(function(n){if(n.Connection){var o=u.inputPorts[n.PortName],
e=t.contractToNodes[n.Connection.OutputNodeId],f=null;e&&(f=e.outputPorts[n.Connection.
OutputPortName],f&&r.push({inputPort:o,outputPort:f}));e&&f||i(n,n.Connection)}}
)}),r}function i(t,u){n.Util.forEach(t,function(t,f){var e=u[f];t.value(e.Value);
t.descriptor instanceof r.ModeModuleParameterDescriptor&&n.Util.forEach(t.childParameters,
function(n,t){i(n,e.ChildParameters[t])})})}var r=n.Model;t.createNodes=u;t.createConnections=
f})(i=t.v2||(t.v2={}))})(t=n.DataContract||(n.DataContract={}))}(DataLab||(DataLab=
{})),function(){}(DataLab||(DataLab={})),function(n){var t;(function(n){var t=function(
){function n(n){this.email=n.Email;this.name=n.Name;this.role=n.Role;this.userId=
n.UserId}return Object.defineProperty(n.prototype,"isWorkspaceOwner",{get:function(
){return this.role==="Owner"},enumerable:!0,configurable:!0}),n}();n.User=t})(t=
n.Model||(n.Model={}))}(DataLab||(DataLab={})),function(n){var t;(function(t){var
e="00000000000000000000000000000000",i=function(){function n(){this.primary=ko.observable(
null);this.secondary=ko.observable(null)}return n.prototype.deserialize=function(
n){this.primary(n.PrimaryToken);this.secondary(n.SecondaryToken)},n.SERIALIZED_ZERO_TOKEN=
{PrimaryToken:e,SecondaryToken:e},n}(),r,u,f,o,s;t.AuthorizationToken=i;r=function(
){function t(){var i=this,t;this.hasBeenEdited=ko.observable(!1);t=function(n){return i.
hasBeenEdited()&&!n?"This field is required to update HDInsight Cluster connection.":
/[;]/.test(n)?"This field cannot contain any semi-colons (;).":null};this.user=n.
Validation.validatableObservable(null,t);this.password=n.Validation.validatableObservable(
null,t);this.uri=n.Validation.validatableObservable(null,t)}return t.prototype.settingsUpdated=
function(){this.hasBeenEdited()||(this.hasBeenEdited(!0),this.user.startValidating(
),this.password.startValidating(),this.uri.startValidating(),this.user.validate(
),this.password.validate(),this.uri.validate())},t.prototype.deserialize=function(
n){this.uri(n)},t.prototype.serialize=function(){return(this.user()?"User="+this.
user()+";":"")+(this.password()?"Password="+this.password()+";":"")+(this.uri()?
"Uri="+this.uri():"")},t}();t.HDInsightClusterConnectionString=r;u=function(){function t(
){var i=this,t,r;this.hasBeenEdited=ko.observable(!1);t=function(n){return i.hasBeenEdited(
)&&!n?"This field is required to update HDInsight Cluster connection.":/[;@]/.test(
n)?"This field cannot contain any semi-colons (;) or at symbols (@).":null};r=function(
n){return i.hasBeenEdited()&&!n?"This field is required to update HDInsight Cluster connection.":
/[;]/.test(n)?"This field cannot contain any semi-colons (;).":null};this.accountName=
n.Validation.validatableObservable(null,t);this.accountKey=n.Validation.validatableObservable(
null,r);this.container=n.Validation.validatableObservable(null,t)}return t.prototype.
settingsUpdated=function(){this.hasBeenEdited()||(this.hasBeenEdited(!0),this.accountName.
startValidating(),this.accountKey.startValidating(),this.container.startValidating(
),this.accountName.validate(),this.accountKey.validate(),this.container.validate(
))},t.prototype.deserialize=function(n){if(n){var t=n.split("@");this.accountName(
t[1]);this.container(t[0])}},t.prototype.serialize=function(){return(this.accountName(
)?"AccountName="+this.accountName()+";":"")+(this.accountKey()?"AccountKey="+this.
accountKey()+";":"")+(this.container()?"Container="+this.container():"")},t}();t.
HDInsightStorageConnectionString=u,function(n){n[n.Production=0]="Production";n[
n.Free=1]="Free";n[n.Anonymous=2]="Anonymous";n[n.PaidStandard=3]="PaidStandard";
n[n.PaidPremium=4]="PaidPremium"}(t.WorkspaceType||(t.WorkspaceType={}));f=t.WorkspaceType;
o=function(){function t(){}return t.isProduction=function(t){switch(t){case 2:case
1:return!1;case 0:case 3:case 4:return!0;default:return n.Log.error("Unexpected WorkspaceType."),
!1}},t}();t.WorkspaceTypeExtensions=o;s=function(){function t(t){this.id=null;this.
friendlyName=n.Validation.validatableObservable(null,(new n.Validation.WorkspaceNameValidator).
validate);this.description=ko.observable(null);this.azureStorageConnectionString=
ko.observable(null);this.hdinsightClusterConnectionString=new r;this.hdinsightStorageConnectionString=
new u;this.useDefaultHDInsightSettings=ko.observable(!0);this.sqlAzureConnectionString=
ko.observable(null);this.analyticFrameworkClusterConnectionString=ko.observable(
null);this.authorizationToken=new i;this.etag=null;this.type=null;this.id=t}return t.
prototype.populateFromContract=function(t){this.friendlyName(t.FriendlyName);this.
description(t.Description);this.azureStorageConnectionString(t.AzureStorageConnectionString);
this.hdinsightClusterConnectionString.deserialize(t.HDInsightClusterConnectionString);
this.hdinsightStorageConnectionString.deserialize(t.HDInsightStorageConnectionString);
this.useDefaultHDInsightSettings(t.UseDefaultHDInsightSettings);this.sqlAzureConnectionString(
t.SqlAzureConnectionString);this.analyticFrameworkClusterConnectionString(t.AnalyticFrameworkClusterConnectionString);
t.AuthorizationToken||n.Log.error("AuthorizationToken is missing","populateFromContract");
this.authorizationToken.deserialize(t.AuthorizationToken||i.SERIALIZED_ZERO_TOKEN);
this.etag=t.Etag;this.type=t.Type?typeof t.Type!="number"&&t.Type in f?f[t.Type]:
null:0;this.ownerEmail=t.OwnerEmail;this.userStorage=t.UserStorage;this.subscriptionId=
t.SubscriptionId;this.subscriptionName=t.SubscriptionName;this.subscriptionState=
typeof t.SubscriptionState=="string"&&n.DataContract.v1.SubscriptionStatus[t.SubscriptionState]||
null;var r=parseInt(t.CreatedTime.substr(6));this.createdTime=!r?null:new Date(r)}
,t.prototype.validateAll=function(){return(this.friendlyName.startValidating(),this.
friendlyName.validate().length>0||this.hdinsightClusterConnectionString.user.validate(
).length>0||this.hdinsightClusterConnectionString.password.validate().length>0||
this.hdinsightClusterConnectionString.uri.validate().length>0||this.hdinsightStorageConnectionString.
accountName.validate().length>0||this.hdinsightStorageConnectionString.accountKey.
validate().length>0||this.hdinsightStorageConnectionString.container.validate().
length>0)?!1:!0},t}();t.WorkspaceSettings=s})(t=n.Model||(n.Model={}))}(DataLab||
(DataLab={})),function(n){var t;(function(t){var i;(function(i){function u(n){return n.
NodeId+":"+n.Name}function h(t,i,r,u,e,o,s){var h=new n.Model.Experiment(t.Id,t.
ParentId);return h.description(t.Description),h.setDraftState(!1),n.Util.when(f(
t,s,i,r,u,e,o,h))}function c(t,i,r,u,e,o,s){var a=t.SchemaVersion===undefined?1:
t.SchemaVersion,l,h,c;if(a===2)throw new Error("SchemaVersion:2 is not yet supported!");
return l=t.WebService?t.WebService.WebServiceGroupId:null,h=new n.Model.Experiment(
t.ExperimentId,t.ParentExperimentId,t.Creator,l),t.Status.StatusCode&&h.statusCode(
t.Status.StatusCode),h.description(t.Description),h.summary.value(t.Summary),h.originalExperimentDocumentation.
value(t.OriginalExperimentDocumentationLink),h.etag(t.Etag),h.isArchived=t.IsArchived,
h.isLeaf(t.IsLeaf),h.publishedModelPackageId=t.WebService?t.WebService.ModelPackageId:
null,h.disableNodesUpdate(t.DisableNodesUpdate===!0),h.category=t.Category,h.tags(
t.Tags||[]),t.Status.StartTime&&h.startTime(n.Util.formatDate(n.Util.parseJsonDate(
t.Status.StartTime))),t.Status.EndTime&&h.endTime(n.Util.formatDate(n.Util.parseJsonDate(
t.Status.EndTime))),t.Status.StatusDetail&&h.statusDetails(t.Status.StatusDetail),
c=Object.create(null),t.NodeStatuses.forEach(function(n){c[n.NodeId]=n}),f(t,s,i,
r,u,e,o,h,c,t.WebService)}function l(t){var i=new n.Model.WorkspaceSettings(t.WorkspaceId);
return i.populateFromContract(t),i}function f(i,f,h,c,l,a,w,b,k,d){var rt;k===void
0&&(k=Object.create(null));d===void 0&&(d=Object.create(null));var it=Object.create(
null),nt=Object.create(null),ft=function(n,t){nt[n]=t},g=Object.create(null),tt=
o(i.Graph.SerializedClientData),et=[],ot=[];d||(d={});d.Parameters||(d.Parameters=
[]);d.Parameters.forEach(function(n){if(n.Name in g)throw new Error("Duplicate experiment-level parameter name.");
var i=t.deserializeModuleParameterDescriptor(n.ParameterDefinition);i.name=n.Name;
i.defaultValue=n.Value;g[n.Name]=b.addParameter(i,n.Name,n.Value)});i.Graph.ModuleNodes.
forEach(function(t){var i=$.Deferred();h.getItem(t.ModuleId).done(function(o){var
st=tt[t.Id]||r,h=k[t.Id],nt=h!==undefined,ct=st.x,lt=st.y,w={},s,rt,ut,d,et,ht;nt&&
h.OutputEndpoints.forEach(function(n){w[n.Name]&&w[n.Name].IsAuxiliary||(w[n.Name]=
n)});s=b.addModule(o,f,ct,lt,t.Id);rt=[];e(s.parameters,t.ModuleParameters,g);nt&&
(s.executedExperimentId=b.experimentId(),h.Status.StartTime&&(ut=n.Util.parseJsonDate(
h.Status.StartTime),s.startTime.value(n.Util.formatDate(ut))),h.Status.EndTime&&
h.Status.StartTime&&(d=n.Util.parseJsonDate(h.Status.EndTime),d.getTime()>n.Util.
minDate&&(s.endTime.value(n.Util.formatDate(d)),et=n.Util.getElapsedTimeMilliseconds(
ut,d),et>=0&&s.elapsedTime.value(n.Util.formatElapsedTime(et)))),h.Status.StatusCode&&
s.statusCode.value(h.Status.StatusCode),h.Status.StatusDetail&&s.statusDetails.value(
h.Status.StatusDetail),h.StandardOutEndpoint&&s.outputLog.endpoint(h.StandardOutEndpoint),
h.StandardErrorEndpoint&&s.errorLog.endpoint(h.StandardErrorEndpoint),h.OutputEndpoints.
forEach(function(n){s.addEndpoint(n)}));t.InputPortsInternal.forEach(function(n)
{var i=s.inputPorts[n.Name],t;if(!i)throw new Error("Invalid input port: "+n.Name);
ft(u(n),i);t=null;n.DataSourceId?t=v(b,i,n.DataSourceId,c,tt,it):n.TrainedModelId?
t=y(b,i,n.TrainedModelId,l,tt,it):n.TransformModuleId&&(t=p(b,i,n.TransformModuleId,
a,tt,it));t&&(t.fail(function(){b.hasMissingResources=!0;ot.push(i)}),rt.push(t))}
);t.OutputPortsInternal.forEach(function(n){var t=s.outputPorts[n.Name],i;if(!t)
throw new Error("Invalid output port: "+n.Name);ft(u(n),t);i=w[n.Name];i&&(t.outputEndpoint=
i)});nt&&h.MetadataOutputEndpoints&&(ht=s.outputPorts,n.Util.forEach(ht,function(
t){var i=h.MetadataOutputEndpoints[t.name],r,u;i&&(r=n.Util.first(i,function(n){
return n.Key==="visualization"},null),u=n.Util.first(i,function(n){return n.Key===
"schema"},null),t.visualizationEndpoint=r?r.Value:null,t.schemaEndpoint=u?u.Value:
null)}));t.Comment?(s.comment(t.Comment),s.commentCollapsed(t.CommentCollapsed)):
(s.comment(""),s.commentCollapsed(!0));s.usePreviousResults(t.UsePreviousResults?
t.UsePreviousResults:!1);$.when.apply($,rt.map(function(n){var t=$.Deferred();return n.
always(function(){return t.resolve()}),t.promise()})).done(function(){i.resolve(
)})}).fail(function(){i.reject(new Error("Module with ID "+t.ModuleId+" does not exist in your workspace."))}
);et.push(i)});for(rt in g)g[rt].isExperimentParameter&&(b.removeWebServiceParameter(
g[rt]),b.experimentParameterInUse=!0);var ut=$.Deferred(),ht=$.when.apply($,et).
done(function(){i.Graph.EdgesInternal.forEach(function(n){var t=nt[n.SourceOutputPortId],
i=nt[n.DestinationInputPortId];t.connectTo(i)});ut.resolve(b)}).fail(function(n)
{ut.reject(n)}),st=d.SerializedClientData?o(d.SerializedClientData):{};return b.
isWebServiceExperiment(d.IsWebServiceExperiment),ut.done(function(){d.Inputs&&n.
Util.forEach(d.Inputs,function(n){s(b,nt,n,0,st,w)});d.Outputs&&n.Util.forEach(d.
Outputs,function(n){s(b,nt,n,1,st,w)});b.startDirtyingAll();b.isLeaf()&&b.statusCode(
)===n.DataContract.State.Finished&&ot.forEach(function(n){n.dirtyStatusInfo.dirty(
);n.dirtyDraftState.dirty()})})}function a(t){var i=new n.Model.DataType(t.Id);return i.
name=t.Name,i.description=t.Description,i.fileExtension=t.FileExtension,i.allowUpload=
t.AllowUpload===undefined?!0:t.AllowUpload,i.allowPromotion=t.AllowPromotion===undefined?
!0:t.AllowPromotion,i.allowModelPromotion=t.AllowModelPromotion===undefined?!1:t.
AllowModelPromotion,i}function v(n,t,i,u,f,e){if(i!==null){var o=$.Deferred();return u.
getItem(i).done(function(u){if(e[i]===undefined){var s=f[i]||r,h=n.addDataset(u,
s.x,s.y,i);e[i]=h.datasetPort}e[i].connectTo(t);o.resolve()}).fail(function(){o.
reject(new Error("Dataset with id "+i+" does not exist in your workspace."))}),o}
}function y(n,t,i,u,f,e){if(i!==null){var o=$.Deferred();return u.getItem(i).done(
function(u){if(e[i]===undefined){var s=f[i]||r,h=n.addTrainedModel(u,s.x,s.y,i);
e[i]=h.trainedModelPort}e[i].connectTo(t);o.resolve()}).fail(function(){o.reject(
new Error("Trained model with id "+i+" does not exist in your workspace."))}),o}
}function p(n,t,i,u,f,e){if(i!==null){var o=$.Deferred();return u.getItem(i).done(
function(u){if(e[i]===undefined){var s=f[i]||r,h=n.addTransformModule(u,s.x,s.y,
i);e[i]=h.transformPort}e[i].connectTo(t);o.resolve()}).fail(function(){o.reject(
new Error("Transformation module with id "+i+" does not exist in your workspace."))}
),o}}function e(i,r,u){n.Util.forEach(i,function(i){var o=r.filter(function(n){return n.
Name===i.name}),f,s;if(o.length===0){i.descriptor.isOptional||n.Log.error("No value exist for module parameter with name "+
i.name+".");return}if(o.length>1&&n.Log.error("Multiple values exist for module parameter with name "+
i.name+"."),f=o[0],f.ValueType===t.ModuleParameterValueType.GraphParameterName){
if(!(f.Value in u)){n.Log.error("Module node references an unknown experiment-level parameter.");
return}u[f.Value].isExperimentParameter=!0;f.ValueType=t.ModuleParameterValueType.
Literal;f.Value=u[f.Value].value()}if(i.value(f.Value),f.LinkedGlobalParameter){
if(!(f.LinkedGlobalParameter in u)){n.Log.error("Module node references an unknown web service parameter.");
return}i.linkToWebServiceParameter(u[f.LinkedGlobalParameter])}i.descriptor instanceof
n.Model.ModeModuleParameterDescriptor&&(s=i.childParameters[i.value()],s&&e(s,r,
u))})}function o(t){try{var i={},r=$.parseXML(t),u=r.querySelectorAll("DataV1 > NodePositions > NodePosition"),
f=Array.prototype.forEach;return f.call(u,function(n){var u=n.getAttribute("Node"),
r=n.getAttribute("Position"),t=r.split(",");if(t.length!==4)throw new Error('Invalid layout data, expected Position="x,x,x,x", read: '+
r);i[u]={x:parseInt(t[0]),y:parseInt(t[1]),width:parseInt(t[2]),height:parseInt(
t[3])}}),i}catch(e){return n.Log.exception(e,"Failed to parse layout data.","parseLegacyLayoutData"),
{}}}function s(t,i,r,u,f,e){var s=i[r.PortId];if(!s){n.Log.warn("Can't find publish port from port lookup table. It can happens if node id or port name are changed for some reason. User has to reset publish ports again.");
return}var h=0,c=0,o=f[r.Id];o||(o=w(t,s,u));h=o.x;c=o.y;t.addWebServicePort(u,h,
c,r.Id,e,s,r.Name)}function w(t,i,r){var f={x:i?i.parent.x():0,y:0},u=n.Util.map(
n.Util.values(t.nodes()),function(n){return n.y()});return u&&u.length&&(f.y=r==
0?Math.min.apply(null,u)-77:Math.max.apply(null,u)+77),f}var r={x:0,y:0};i.deserializeDataflow=
h;i.deserializeExperiment=c;i.deserializeWorkspaceSettings=l;i.deserializeDataType=
a})(i=t.v1||(t.v1={}))})(t=n.DataContract||(n.DataContract={}))}(DataLab||(DataLab=
{})),function(n){var t;(function(n){function t(t,i,r){if(t.SchemaVersion===1)return n.
v1.deserializeExperiment(t,i.moduleCache,i.datasetCache,i.trainedModelCache,i.transformModulesCache,
i.dataTypeRegistry,r);if(t.SchemaVersion===2)throw new Error("Schema version > 2 not implemented");
}n.deserializeExperiment=t})(t=n.DataContract||(n.DataContract={}))}(DataLab||(DataLab=
{})),function(n){var t;(function(n){(function(n){n[n.Invited=0]="Invited";n[n.Active=
1]="Active"})(n.InvitationStatus||(n.InvitationStatus={}));var t=n.InvitationStatus}
)(t=n.WorkspaceManagement||(n.WorkspaceManagement={}))}(DataLab||(DataLab={})),function(
n){var t;(function(n){(function(n){n[n.NotStarted=0]="NotStarted";n[n.InDraft=1]=
"InDraft";n[n.Running=2]="Running";n[n.Failed=3]="Failed";n[n.Finished=4]="Finished";
n[n.Canceled=5]="Canceled"})(n.TaskStatusCode||(n.TaskStatusCode={}));var t=n.TaskStatusCode}
)(t=n.OnlineSearch||(n.OnlineSearch={}))}(DataLab||(DataLab={})),function(n){var
t;(function(n){var t,i,r;(function(n){n[n.InTesting=0]="InTesting";n[n.ReadyForProduction=
1]="ReadyForProduction";n[n.DeployedToProduction=2]="DeployedToProduction";n[n.Retired=
3]="Retired"})(n.ModelPackageStatusCode||(n.ModelPackageStatusCode={}));t=n.ModelPackageStatusCode,
function(n){n[n.None="None"]="None";n[n.Error="Error"]="Error";n[n.All="All"]="All"}
(n.DiagnosticsTraceLevel||(n.DiagnosticsTraceLevel={}));i=n.DiagnosticsTraceLevel,
function(n){n[n.Staging="Staging"]="Staging";n[n.Production="Production"]="Production"}
(n.WebServiceType||(n.WebServiceType={}));r=n.WebServiceType})(t=n.DataContract||
(n.DataContract={}))}(DataLab||(DataLab={})),function(n){var t;(function(t){var i=
function(){function t(n,t,i){this.client=n;this.blob=t;this.dataTypeId=i;this.chunkSize=
4194304;this.numberOfChunks=0;this.chunkId=0;this.bytesRemaining=0;this.currentPosition=
0;this.maxRetries=3;this.retryAfterSeconds=20;this.numberOfRetries=0;this.started=
!1;var r=this.blob.size;r>0&&(r<this.chunkSize&&(this.chunkSize=r,this.numberOfChunks=
1),this.bytesRemaining=r,this.numberOfChunks=r%this.chunkSize==0?r/this.chunkSize:
parseInt((r/this.chunkSize).toString(),10)+1)}return t.prototype.uploadBlobAsync=
function(){if(this.started){var t=$.Deferred();return t.rejectWith(this.client,[
new n.Util.AjaxError("A BlobUploader can be used only once")]),n.Util.when(t)}return this.
started=!0,this.promise=$.Deferred(),this.startUploadAsync(),n.Util.when(this.promise)}
,t.prototype.updateUploadProgress=function(){var i="block "+this.chunkId+" of total "+
this.numberOfChunks,t;n.Log.info("Upload progress: "+i,"logUploadProgress",{loaded:
this.chunkId,total:this.numberOfChunks,determinateLength:!0});t=$.extend({});t.loaded=
this.chunkId;t.total=this.numberOfChunks;t.lengthComputable=!0;this.promise.notifyWith(
this.client,[t])},t.prototype.startUploadAsync=function(){var n=this,t=this.client.
initiateResourceUpload(this.dataTypeId);t.done(function(t){n.response=t;n.uploadInChunksAsync(
)}).fail(function(t){n.promise.rejectWith(n.client,[t])})},t.prototype.uploadInChunksAsync=
function(){var t=this,i,r;if(this.blob.slice)i=this.blob.slice(this.currentPosition,
this.currentPosition+this.chunkSize);else if(this.blob.webkitSlice)i=this.blob.webkitSlice(
this.currentPosition,this.currentPosition+this.chunkSize);else if(this.blob.mozSlice)
i=this.blob.mozSlice(this.currentPosition,this.currentPosition+this.chunkSize);else{
this.promise.rejectWith(this.client,[new n.Util.AjaxError("Unsupported browser detected")]);
return}r=this.client.uploadBlobChunk(i,this.dataTypeId,this.response.Id,this.chunkId,
this.numberOfChunks);r.done(function(){t.bytesRemaining-=t.chunkSize;t.chunkId+=
1;t.numberOfRetries=0;t.updateUploadProgress();t.bytesRemaining<=0?(t.currentPosition=
t.blob.size,t.bytesRemaining=0,t.promise.resolveWith(t.client,[t.response])):(t.
currentPosition+=t.chunkSize,t.uploadInChunksAsync())}).fail(function(n){var i=t.
numberOfRetries<t.maxRetries;i?(++t.numberOfRetries,setTimeout(function(){t.uploadInChunksAsync(
)},t.retryAfterSeconds*1e3)):t.promise.rejectWith(t.client,[n])})},t}();t.BlobUploader=
i})(t=n.DataContract||(n.DataContract={}))}(DataLab||(DataLab={})),function(n){var
t;(function(t){function i(n){return n+(n.charAt(n.length-1)==="/"?"":"/")}var r=
function(){function r(n,t,i,r){i===void 0&&(i=null);r===void 0&&(r=!0);this.serviceBaseUrlForNotebookCreate=
"";this.serviceBaseAddress="/api/";this.cachedAccessToken=null;this.authToken=i;
this.redirectOn401=r;this.workspaceId=n;this.workspaceFriendlyName=t}return r.prototype.
generateRequestArguments=function(t,i,r,u){return r===void 0&&(r={}),u===void 0&&
(u={}),u=$.extend(u,n.AjaxClient.generateGeneralClientHeaders(this.authToken)),{
url:t+i,loggedUrl:i,additionalHeaders:u,settings:r,redirectOn401:this.redirectOn401}}
,r.prototype.appendWorkspaceIdToUrl=function(n){return i(n)+"workspaces/"+this.workspaceId}
,r.prototype.ensureStringPrependedWithSlash=function(n){return n?(n.charAt(0)===
"/"?"":"/")+n:"/"},r.prototype.sendRequest=function(t,i,r){var u,f;return i===void
0&&(i={}),r===void 0&&(r={}),u=this.appendWorkspaceIdToUrl(this.serviceBaseAddress),
t=this.ensureStringPrependedWithSlash(t),f=this.generateRequestArguments(u,t,i,r),
n.AjaxClient.sendRequest(f)},r.prototype.signOut=function(){return n.AjaxClient.
sendRequest(this.generateRequestArguments(this.appendWorkspaceIdToUrl("/"),this.
ensureStringPrependedWithSlash(Shell.Environment.getSignOutLink()),{type:"POST"}))}
,r.prototype.listDatasetsAsync=function(){return this.sendRequest("datasources")}
,r.prototype.getDataset=function(n){return this.sendRequest("datasources/"+n)},r.
prototype.deleteDatasetFamilyAsync=function(t){return this.sendRequest("datasources/family/"+
t,{type:"DELETE",responseType:n.AjaxClient.ResponseType.None})},r.prototype.getTrainedModel=
function(n){return this.sendRequest("trainedmodels/"+n)},r.prototype.listTrainedModelsAsync=
function(){return this.sendRequest("trainedmodels/")},r.prototype.deleteTrainedModelFamilyAsync=
function(t){return this.sendRequest("trainedmodels/family/"+t,{type:"DELETE",responseType:
n.AjaxClient.ResponseType.None})},r.prototype.getTransformModule=function(n){return this.
sendRequest("transformmodules/"+n)},r.prototype.listTransformModulesAsync=function(
){return this.sendRequest("transformmodules/")},r.prototype.listModulesAsync=function(
){return this.sendRequest("modules")},r.prototype.getModule=function(n){return this.
sendRequest("modules/"+n)},r.prototype.listNotebooksAsync=function(){var n=this.
generateRequestURI("notebooks",{"api-version":"2.0"});return this.sendRequest(n,
{type:"GET"})},r.prototype.getNotebookAsync=function(n){var t=this.generateRequestURI(
"notebooks/family/"+n,{"api-version":"2.0"});return this.sendRequest(t,{type:"GET"})}
,r.prototype.createNotebookAsync=function(n){n.Parameters.StudioApiUrl=this.serviceBaseUrlForNotebookCreate;
var t=this.generateRequestURI("notebooks",{"api-version":"2.0"});return this.sendRequest(
t,{type:"POST",data:n})},r.prototype.getNotebookSessionObject=function(n){var t=
this.generateRequestURI("notebooks/session",{"api-version":"2.0",familyId:n});return this.
sendRequest(t,{type:"POST",data:""},{"Content-Type":"text/plain"})},r.prototype.
authenticateNotebookSession=function(n){return $.ajax({type:"POST",url:n,dataType:
"text",contentType:"text/plain",xhrFields:{withCredentials:!0}})},r.prototype.openNotebookAsync=
function(t){var r=this,i=$.Deferred();return this.getNotebookSessionObject(t).done(
function(t){r.authenticateNotebookSession(t.AuthenticationUri).done(function(){i.
resolve(t.SessionUri)}).fail(function(r){if(r instanceof n.Util.AjaxError&&r.isSuccess)
{i.resolve(t.SessionUri);return}var u=n.Util.format(n.LocalizedResources.authenticateNotebookSessionFailed,
r.message);r.message=u;i.reject(r)})}).fail(function(t){var r=n.Util.format(n.LocalizedResources.
createNotebookSessionFailed,t.message);t.message=r;i.reject(t)}),i.promise()},r.
prototype.deleteNotebookFamilyAsync=function(n){var t=this.generateRequestURI("notebooks/family/"+
n,{"api-version":"2.0"});return this.sendRequest(t,{type:"DELETE"})},r.prototype.
renameNotebookAsync=function(n,t){var i=encodeURIComponent(t),r=this.generateRequestURI(
"notebooks/family/"+n,{"api-version":"2.0",change:i});return this.sendRequest(r,
{type:"PATCH"})},r.prototype.createProjectAsync=function(n,t){return t===void 0&&
(t=!1),this.sendRequest("projects/"+n.Id,{type:"POST",data:{project:n,includeDependencies:
t}})},r.prototype.getProjectsAsync=function(n){return this.sendRequest("projects",
{type:"POST",data:n})},r.prototype.updateProjectAsync=function(n,t){return t===void
0&&(t=!1),this.sendRequest("projects/"+n.Id,{type:"PUT",data:{project:n,includeDependencies:
t}})},r.prototype.deleteProjectAsync=function(n){return this.sendRequest("projects/"+
n,{type:"DELETE"})},r.prototype.listWorkspacesAsync=function(){return this.sendRequest(
"listworkspaces")},r.prototype.listUserWorkspacesAsync=function(t){return n.AjaxClient.
sendRequest(this.generateRequestArguments(this.serviceBaseAddress,"user/workspaces?region="+
encodeURIComponent(t)))},r.prototype.createExperimentStoragePackageAsync=function(
n,t,i){var r;return r=i?this.generateRequestURI("packages",{"api-version":"2.0",
experimentId:n,clearCredentials:String(t),newExperimentName:i}):this.generateRequestURI(
"packages",{"api-version":"2.0",experimentId:n,clearCredentials:String(t)}),this.
sendRequest(r,{type:"POST"})},r.prototype.createExperimentStoragePackageForCommunityAsync=
function(n,t,i){var r;return r=i?this.generateRequestURI("packages",{"api-version":
"2.0",experimentId:n,clearCredentials:String(t),newExperimentName:i,forCommunity:
String(!0)}):this.generateRequestURI("packages",{"api-version":"2.0",experimentId:
n,clearCredentials:String(t),forCommunity:String(!0)}),this.sendRequest(r,{type:
"POST"})},r.prototype.getExperimentStoragePackageAsync=function(n){var t=this.generateRequestURI(
"packages",{packageActivityId:n});return this.sendRequest(t)},r.prototype.createExperimentFromStoragePackageAsync=
function(n,t){return this.sendRequest("packages?api-version=2.0&workspaceId="+encodeURIComponent(
n)+"&packageUri="+encodeURIComponent(t),{type:"PUT"})},r.prototype.createNotebookStoragePackageForCommunityAsync=
function(n,t){var i;return i=t?this.generateRequestURI("packages",{"api-version":
"2.0",notebookId:n,newNotebookName:t,forCommunity:String(!0)}):this.generateRequestURI(
"packages",{"api-version":"2.0",notebookId:n,forCommunity:String(!0)}),this.sendRequest(
i,{type:"POST"})},r.prototype.getNotebookStoragePackageAsync=function(n){var t=this.
generateRequestURI("packages",{packageActivityId:n});return this.sendRequest(t)}
,r.prototype.getSingleUserAsync=function(n){return this.sendRequest("users/"+n)}
,r.prototype.listUsersAndInvitationsAsync=function(){return this.sendRequest("users")}
,r.prototype.removeUser=function(t){return this.sendRequest("users/"+t,{type:"DELETE",
responseType:n.AjaxClient.ResponseType.None})},r.prototype.sendInvitation=function(
n){return this.sendRequest("invitations",{type:"POST",data:n})},r.prototype.acceptInvitation=
function(t){return this.sendRequest("invitations?token="+t,{type:"PUT",responseType:
n.AjaxClient.ResponseType.None})},r.prototype.removeInvitation=function(t){return this.
sendRequest("invitations?token="+t,{type:"DELETE",responseType:n.AjaxClient.ResponseType.
None})},r.prototype.listCredentials=function(){return this.sendRequest("credentials")}
,r.prototype.verifyCredential=function(n){return this.sendRequest("credentials",
{type:"POST",data:n})},r.prototype.deleteCredential=function(n){return this.sendRequest(
"credentials",{type:"DELETE",data:n})},r.prototype.saveCredential=function(n){return this.
sendRequest("credentials",{type:"PUT",data:n})},r.prototype.ssimSearch=function(
n,t,i){return t===void 0&&(t=1),i===void 0&&(i=10),this.sendRequest("ssimdata?searchTerm="+
n+"&page="+t+"&pageSize="+i)},r.prototype.saveSsimData=function(n){return this.sendRequest(
"ssimdata",{type:"PUT",data:n})},r.prototype.listDataImports=function(){return this.
sendRequest("dataimports")},r.prototype.getDataImport=function(n){return this.sendRequest(
"dataimport/"+n)},r.prototype.deleteDataImport=function(n){return this.sendRequest(
"dataimport/"+n,{type:"DELETE"})},r.prototype.listExperimentsAsync=function(t){t===
void 0&&(t={});t.includeNonLeaf=Boolean(t.includeNonLeaf);t.includeArchived=Boolean(
t.includeArchived);var i=this.generateRequestURI("experiments",{includeNonLeaf:String(
t.includeNonLeaf),includeArchived:String(t.includeArchived)});return this.sendRequest(
i).done(function(t){t.forEach(function(t){n.Util.replaceJsonDates(t.Status,["CreationTime",
"StartTime","EndTime"])})})},r.prototype.generateRequestURI=function(t,i){var r=
t,u=n.Util.size(i),arguments;return u!=0&&(r+="?",arguments=n.Util.map(i,function(
n,t){return t+"="+encodeURIComponent(n)}),r+=arguments.join("&")),r},r.prototype.
listDataflowsAsync=function(){return this.sendRequest("dataflows")},r.prototype.
getExperimentAsync=function(n){return this.sendRequest("experiments/"+n)},r.prototype.
getExperimentLineageAsync=function(t){return this.sendRequest("experiments/"+t+"/lineage").
done(function(t){t.forEach(function(t){n.Util.replaceJsonDates(t.Status,["CreationTime",
"StartTime","EndTime"])})})},r.prototype.getDataflowAsync=function(n){return this.
sendRequest("dataflows/"+n)},r.prototype.createWebServiceGroupAsync=function(n){
return this.sendRequest("webservicegroups/",{type:"POST",data:n})},r.prototype.getWebServiceGroupAsync=
function(n){return this.sendRequest("webservicegroups/"+n)},r.prototype.deleteWebServiceGroupAsync=
function(n){return this.sendRequest("webservicegroups/"+n,{type:"DELETE"})},r.prototype.
updateWebServiceGroupAsync=function(n,t){if(t===undefined)throw"Expected an IAddOrUpdateWebServiceGroupRequest";
return this.sendRequest("webservicegroups/"+n,{type:"PUT",data:t})},r.prototype.
listWebServiceGroupsAsync=function(){return this.sendRequest("webservicegroups/")}
,r.prototype.registerModelPackageAsync=function(n,t){if(t===undefined)throw"Expected an IAddModelPackageRequest";
return this.sendRequest("webservicegroups/"+n+"/modelpackages/",{type:"POST",data:
t})},r.prototype.listModelPackagesAsync=function(n){return this.sendRequest("webservicegroups/"+
n+"/modelpackages/")},r.prototype.getModelPackageAsync=function(n,t){return this.
sendRequest("webservicegroups/"+n+"/modelpackages/"+t)},r.prototype.updateModelPackageAsync=
function(n,t,i){if(i===undefined)throw"Expected an IUpdateModelPackageRequest";return this.
sendRequest("webservicegroups/"+n+"/modelpackages/"+t,{type:"PUT",data:i})},r.prototype.
registerWebServiceAsync=function(n,t){if(t===undefined)throw"Expected an IAddUpdateWebServiceRequest";
return this.sendRequest("webservicegroups/"+n+"/webservices/",{type:"POST",data:
t})},r.prototype.getWebServiceAsync=function(n,t){return this.sendRequest("webservicegroups/"+
n+"/webservices/"+t)},r.prototype.updateWebServiceAsync=function(n,t,i){if(i===undefined)
throw"Expected an IAddUpdateWebServiceRequest";return this.sendRequest("webservicegroups/"+
n+"/webservices/"+t,{type:"PUT",data:i})},r.prototype.invokeScoreWebServiceAsync=
function(n,t,i,r){return this.sendRequest("webservicegroups/"+n+"/webservices/"+
t+"/score",{type:"POST",data:{Id:"scoring0002",Instance:{FeatureVector:i,GlobalParameters:
r}}})},r.prototype.createCommunityExperimentAsync=function(n,t,i){var r;return r=
i?this.generateRequestURI("packages",{packageUri:t,communityUri:i}):this.generateRequestURI(
"packages",{packageUri:t}),this.sendRequest(r,{type:i?"PATCH":"POST",data:n.PublishableExperiment})}
,r.prototype.startGetCommunityExperimentIdAsync=function(n,t,i){return this.sendRequest(
"packages?api-version=2.0&workspaceId="+encodeURIComponent(n)+"&packageUri="+encodeURIComponent(
t)+"&communityUri="+encodeURIComponent(i),{type:"PUT"})},r.prototype.createCommunityNotebookAsync=
function(n,t,i){var r;return r=i?this.generateRequestURI("packages",{"api-version":
"2.0",notebookPackageUri:t,communityUri:i}):this.generateRequestURI("packages",{
"api-version":"2.0",notebookPackageUri:t}),n.PublishableNotebook.hyperlinks.push(
{caption:"NotebookPreview",address:this.appendWorkspaceIdToUrl(this.serviceBaseAddress)+
"/notebooks/family/"+n.NotebookId.replace(/-/g,"")+"/attachments/Content?api-version=2.0"}),
this.sendRequest(r,{type:i?"PATCH":"POST",data:n.PublishableNotebook})},r.prototype.
startGetCommunityNotebookIdAsync=function(n,t,i,r){return this.sendRequest("packages?api-version=2.0&destinationWorkspaceId="+
encodeURIComponent(n)+"&notebookPackageUri="+encodeURIComponent(t)+"&communityUri="+
encodeURIComponent(i)+"&entityId="+encodeURIComponent(r),{type:"PUT"})},r.prototype.
getNotebookUnpackStatusAsync=function(n){return this.sendRequest("packages?api-version=2.0&unpackNotebookActivityId="+
encodeURIComponent(n))},r.prototype.getUnpackStatusAsync=function(n){return this.
sendRequest("packages?unpackActivityId="+encodeURIComponent(n))},r.prototype.startGetCompetitionExperimentIdFromCommunityAsync=
function(n,t,i,r,u){return this.sendRequest("packages?api-version=2.0&workspaceId="+
encodeURIComponent(n)+"&packageUri="+encodeURIComponent(t)+"&communityUri="+encodeURIComponent(
i)+"&competitionUri="+encodeURIComponent(r)+"&competitionTenantId="+encodeURIComponent(
u),{type:"PUT"})},r.prototype.startSubmitCompetitionEntryAsync=function(n){return this.
sendRequest("competitions",{type:"POST",data:n})},r.prototype.getCompetitionSubmissionStatusAsync=
function(n){return this.sendRequest("competitions?activityId="+encodeURIComponent(
n))},r.prototype.getCompetitionSchemaDefinitionAsync=function(n,t){return this.sendRequest(
"competitions?competitionId="+encodeURIComponent(n)+"&competitionTenantId="+encodeURIComponent(
t))},r.prototype.listDataTypesAsync=function(){return this.sendRequest("datatypes")}
,r.prototype.publishExperimentAsync=function(n){if(n===undefined)throw"Expected an experiment publishing request";
return this.sendRequest("dataflows",{type:"POST",data:n})},r.prototype.submitExperimentAsync=
function(n){if(n===undefined)throw"Expected an experiment submission request";return this.
sendRequest("experiments",{type:"POST",data:n})},r.prototype.updateExperimentAsync=
function(n,t,i){if(i===undefined)throw"Expected an experiment update request";return this.
sendRequest("experiments/"+n,{type:"POST",data:i},{"If-Match":t})},r.prototype.deleteExperimentAsync=
function(n,t){return this.sendRequest("experiments/"+n+"?deleteAncestors=false",
{type:"DELETE"},{"If-Match":t})},r.prototype.deleteExperimentAndAncestorsAsync=function(
n,t){return this.sendRequest("experiments/"+n+"?deleteAncestors=true",{type:"DELETE"},
{"If-Match":t})},r.prototype.cancelExperimentAsync=function(n){return this.sendRequest(
"experiments/"+n,{type:"PUT"},{"x-ms-action":"cancel"})},r.prototype.promoteOutputToDatasetAsync=
function(n){if(!n)throw new Error("'promoteDatasetRequest' must be provided");return this.
addDatasetAsync(n,t.DataSourceOrigin.FromOutputPromotion)},r.prototype.promoteOutputToTrainedModelAsync=
function(n){if(!n)throw new Error("'promoteTrainedModelRequest' must be provided");
return this.addTrainedModelAsync(n,t.DataSourceOrigin.FromOutputPromotion)},r.prototype.
promoteOutputToTransformModuleAsync=function(n){if(!n)throw new Error("'promoteTransformModuleRequest' must be provided");
return this.addTransformModuleAsync(n,t.DataSourceOrigin.FromOutputPromotion)},r.
prototype.getModuleVisualizationData=function(t,i,r){return this.sendRequest(n.Util.
format("experiments/{0}/visualizationdata/{1}/{2}",t,i,r))},r.prototype.getModuleVisualizationDataItem=
function(t,i,r,u,f,e,o){return this.sendRequest(n.Util.format("experiments/{0}/visualizationdata/{1}/{2}?item={3}&resourceType={4}&resourceSubType={5}",
t,i,r,encodeURIComponent(u),encodeURIComponent(f),encodeURIComponent(e)),{responseType:
o})},r.prototype.getDatasetVisualizationData=function(t){return this.sendRequest(
n.Util.format("datasources/{0}/visualizationdata",t))},r.prototype.getModuleOutputSchema=
function(t,i,r){return this.sendRequest(n.Util.format("experiments/{0}/outputschema/{1}/{2}",
t,i,r))},r.prototype.getDatasetSchema=function(t){return this.sendRequest(n.Util.
format("datasources/{0}/schema",t))},r.prototype.getModuleOutput=function(t,i,r)
{return this.sendRequest(n.Util.format("experiments/{0}/outputdata/{1}/{2}",t,i,
r))},r.prototype.getModuleErrorLog=function(t,i){return this.sendRequest(n.Util.
format("experiments/{0}/errorlog/{1}",t,i),{responseType:"text"})},r.prototype.commitResourceAsDatasetAsync=
function(n){if(!n)throw new Error("'commitDatasetRequest' must be provided");return n.
ClientPoll=!0,this.addDatasetAsync(n,t.DataSourceOrigin.FromResourceUpload)},r.prototype.
getResourceDependantsAsync=function(t){return this.sendRequest(n.Util.format("assets/{0}/experiments",
t))},r.prototype.buildResourceAsCustomModulePackageAsync=function(t){var i=this;
if(!t)throw new Error("'commitCustomModulePackageRequest' must be provided");return t.
ClientPoll=!0,n.Util.then(this.sendRequest("modules/custom",{type:"POST",data:t}),
function(n){return i.pollCustomModuleIds(n)})},r.prototype.getCustomModuleIds=function(
n){return this.sendRequest("modules/custom?activityGroupId="+n,{type:"GET"})},r.
prototype.pollCustomModuleIds=function(t){var i=$.Deferred();return this.setupCustomModuleResponseHandler(
t,this.getCustomModuleIds(t),i,1e3,0,36e5),n.Util.when(i.promise())},r.prototype.
setupCustomModuleResponseHandler=function(t,i,r,u,f,e){var o=this;i.done(function(
i){var s,h;n.Log.info("polling activity with activityId = "+t+".");i===null&&r.reject(
new Error("Internal error"));s=i[0];s==="Pending"?(n.Log.info("custom module activity with activityId = "+
t+" still pending, will poll again"),f<e?(h=u*2<5e3?u*2:5e3,setTimeout(function(
){o.setupCustomModuleResponseHandler(t,o.getCustomModuleIds(t),r,h,f+u,e)},h)):r.
reject(new Error("Custom module registrartion exceeded maximum timout of "+e+" ms."))):
s==="Finished"?(n.Log.info("custom module activity with activityId = "+t+" is finished, resolving"),
r.resolve(i)):s==="Failed"?(n.Log.info("custom module activity with activityId = "+
t+" failed, resolving"),r.resolve(i)):r.reject(new Error("Internal error"))})},r.
prototype.addDatasetAsync=function(n,i){if(!n)throw new Error("'addDatasetRequest' must be provided");
if(!(i in t.DataSourceOrigin))throw new Error("sourceOrigin must be a member of DataContract.DataSourceOrigin");
return n.DataSource.SourceOrigin=i,this.sendRequest("datasources",{type:"POST",data:
n})},r.prototype.addTrainedModelAsync=function(n,i){if(!n)throw new Error("'addTrainedModelRequest' must be provided");
if(!(i in t.DataSourceOrigin))throw new Error("sourceOrigin must be a member of DataContract.DataSourceOrigin");
return n.TrainedModel.SourceOrigin=i,this.sendRequest("trainedmodels",{type:"POST",
data:n})},r.prototype.addTransformModuleAsync=function(n,i){if(!n)throw new Error(
"'addTransformModuleRequest' must be provided");if(!(i in t.DataSourceOrigin))throw new
Error("sourceOrigin must be a member of DataContract.DataSourceOrigin");return n.
Transform.SourceOrigin=i,this.sendRequest("transformmodules",{type:"POST",data:n})}
,r.prototype.uploadResourceAsync=function(i,r){if(n.Features.chunkedUploadInStudioEnabled(
)){var u=new t.BlobUploader(this,i,r);return u.uploadBlobAsync()}return n.AjaxClient.
sendRequest(this.generateRequestArguments(this.appendWorkspaceIdToUrl(this.serviceBaseAddress+
"resourceuploads/"),this.ensureStringPrependedWithSlash("?userStorage=true&dataTypeId="+
encodeURIComponent(r)),{type:"POST",data:i,reportUploadProgress:!0}))},r.prototype.
getWorkspaceSettingsAsync=function(){return this.sendRequest("")},r.prototype.updateWorkspaceSettings=
function(t){if(t===undefined)throw"Expected a workspace settings update request";
return this.sendRequest("",{type:"POST",data:t,responseType:n.AjaxClient.ResponseType.
None})},r.prototype.getJobInstance=function(n){return this.sendRequest("executions/"+
n)},r.prototype.getStorageSpaceQuotaAsync=function(){return this.sendRequest("quota")}
,r.prototype.getExperimentDetailsAsync=function(n){return this.sendRequest("/Experiments/"+
encodeURIComponent(n)+"/details")},r.prototype.updateExperimentDetailsAsync=function(
n,t){return this.sendRequest("/Experiments/"+encodeURIComponent(n)+"/details",{type:
"POST",data:t})},r.prototype.listProjects=function(t){t===void 0&&(t=null);var i;
return i=t?n.Util.format("projects?experimentId={0}",t):"projects",this.sendRequest(
i)},r.prototype.createProject=function(n){if(!n)throw"Expected AddOrUpdateProjectRequest has value";
return this.sendRequest("projects",{type:"POST",data:n})},r.prototype.updateProject=
function(t,i){if(!i)throw"Expected AddOrUpdateProjectRequest has value";return this.
sendRequest(n.Util.format("projects/{0}",t),{type:"PUT",data:i})},r.prototype.initiateResourceUpload=
function(t){return n.AjaxClient.sendRequest(this.generateRequestArguments(this.appendWorkspaceIdToUrl(
this.serviceBaseAddress+"resourceuploads/"),this.ensureStringPrependedWithSlash(
"?userStorage=true&dataTypeId="+encodeURIComponent(t)),{type:"POST",reportUploadProgress:
!1}))},r.prototype.uploadBlobChunk=function(t,i,r,u,f){return n.AjaxClient.sendRequest(
this.generateRequestArguments(this.appendWorkspaceIdToUrl(this.serviceBaseAddress+
"blobuploads/"),this.ensureStringPrependedWithSlash("?numberOfBlocks="+f.toString(
)+"&blockId="+u.toString()+"&uploadId="+r+"&dataTypeId="+encodeURIComponent(i)),
{type:"POST",responseType:n.AjaxClient.ResponseType.JSON,data:t,reportUploadProgress:
!1}))},r.prototype.gatewayNameAvailable=function(n){return this.sendRequest("gateways/"+
n+"/nameAvailable")},r.prototype.replaceGatewayDates=function(t){return t.CreateTime&&
(t.CreateTime=n.Util.parseJsonDate(t.CreateTime)),t.ExpiryTime&&(t.ExpiryTime=n.
Util.parseJsonDate(t.ExpiryTime)),t.LastConnectTime&&(t.LastConnectTime=n.Util.parseJsonDate(
t.LastConnectTime)),t.RegisterTime&&(t.RegisterTime=n.Util.parseJsonDate(t.RegisterTime)),
t},r.prototype.createGateway=function(n,t){var i=this;return this.sendRequest("gateways/"+
n,{type:"PUT",data:t}).then(function(n){return i.replaceGatewayDates(n)})},r.prototype.
getGateways=function(){var n=this,t=function(t){return n.replaceGatewayDates(t)}
;return this.sendRequest("gateways").then(function(n){return n.filter(function(n)
{return!n.ProvisioningState||n.ProvisioningState!=="Deleting"}).map(t)})},r.prototype.
getGateway=function(n){var t=this;return this.sendRequest("gateways/"+n).then(function(
n){return t.replaceGatewayDates(n)})},r.prototype.deleteGateway=function(n){return this.
sendRequest("gateways/"+n,{type:"DELETE"})},r.prototype.generateGatewayRegistrationKey=
function(n){return this.sendRequest("gateways/"+n+"/regenerateKey",{type:"POST"})}
,r.prototype.updateGateway=function(n,t){return this.sendRequest("gateways/"+n,{
type:"PATCH",data:t})},r.prototype.getGatewayExpressInstallLink=function(n,t){return this.
sendRequest("gateways/"+n+"/installLink",{type:"POST",data:t})},r.prototype.getGatewayCredentialEntryRequest=
function(n,t,i){return this.sendRequest("gateways/"+n+"/credential",{type:"POST",
data:{ServerName:t,DatabaseName:i}})},r.prototype.getAreGatewayCredentialsEntered=
function(n){var t=this.sendRequest("gateways/credentials/"+n+"/status");return t.
then(function(n){return n==="Ready"})},r.prototype.getEnteredGatewayCredentials=
function(n){return this.sendRequest("gateways/credentials/"+n)},r}();t.Client=r}
)(t=n.DataContract||(n.DataContract={}))}(DataLab||(DataLab={}));__extends=this.
__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(
i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var u=function(
){function i(i){var u=this,f,e,o,s,h;this.client=i;this.moduleCategoryRegistry=n.
observableMap();this.datasetCategoryRegistry=n.observableMap();this.addCategory(
n.Constants.ResourceCategory.Dataset+"\\"+n.LocalizedResources.datasetCategorySamples,
this.datasetCategoryRegistry);this.addCategory(n.Constants.ResourceCategory.Dataset+
"\\"+n.LocalizedResources.datasetCategoryUserCreated,this.datasetCategoryRegistry);
f=this.createResourceBackend(function(n){return u.client.getDataset(n)},function(
){return u.client.listDatasetsAsync()},function(n){return u.deserializeDataset(n)}
,function(n){return u.client.deleteDatasetFamilyAsync(n)});this.datasetCache=new
r(f);this.notebookCache=null;n.FeaturesExtensions.canEnableIPythonNotebookFeature(
)&&(e=this.createResourceBackend(function(n){return u.client.getNotebookAsync(n)}
,function(){return u.client.listNotebooksAsync()},function(n){return u.deserializeNotebook(
n)},function(n){return u.client.deleteNotebookFamilyAsync(n)},function(n,t){return u.
client.renameNotebookAsync(n,t)}),this.notebookCache=new t(e));o=this.createResourceBackend(
function(n){return u.client.getModule(n)},function(){return u.client.listModulesAsync(
)},function(n){return u.deserializeModule(n)});this.moduleCache=new t(o);s=this.
createResourceBackend(function(n){return u.client.getTrainedModel(n)},function()
{return u.client.listTrainedModelsAsync()},function(n){return u.deserializeTrainedModel(
n)},function(n){return u.client.deleteTrainedModelFamilyAsync(n)});this.trainedModelCache=
new t(s);h=this.createResourceBackend(function(n){return u.client.getTransformModule(
n)},function(){return u.client.listTransformModulesAsync()},function(n){return u.
deserializeTransformModule(n)});this.transformModulesCache=new t(h);this.dataTypeRegistry=
Object.create(null);this.localPendingDatasets=ko.observableArray([]);this.datasetsPrefetched=
ko.observable(!1);this.modulesPrefetched=ko.observable(!1);this.notebooksPrefetched=
ko.observable(!1);this.datatypesPrefetched=ko.observable(!1);this.trainedModelsPrefetched=
ko.observable(!1);this.transformModulesPrefetched=ko.observable(!1);this.projectsPrefetched=
ko.observable(!0);this.allPrefetched=ko.computed(function(){var t=this.datasetsPrefetched(
)&&this.modulesPrefetched()&&this.trainedModelsPrefetched()&&this.transformModulesPrefetched(
)&&this.projectsPrefetched();return n.FeaturesExtensions.canEnableNotebookList()?
t&&this.notebooksPrefetched():t},this)}return i.prototype.prefetch=function(){var
t=this,i=this.client.listDataTypesAsync(),u=this.client.listDatasetsAsync(),f=this.
client.listModulesAsync(),r=n.FeaturesExtensions.canEnableIPythonNotebookFeature(
)?this.client.listNotebooksAsync():null,e=this.client.listTrainedModelsAsync(),o=
this.client.listTransformModulesAsync(),s,h,c,l,a;u.done(function(n){s=n});f.done(
function(n){h=n});e.done(function(n){c=n});o.done(function(n){l=n});n.FeaturesExtensions.
canEnableNotebookList()&&r.done(function(n){a=n});i.done(function(i){t.dataTypeRegistry=
new n.Model.DataTypeRegistry(i.map(function(t){return n.DataContract.v1.deserializeDataType(
t)}));t.datatypesPrefetched(!0)});var y=n.Util.when(u,i),p=n.Util.when(f,i),v=r?
n.Util.when(r):null,w=n.Util.when(e,i),b=n.Util.when(o,i);this.datasetsPrefetchPromise=
n.Util.then(y,function(){s.forEach(function(i){var r,u;try{r=t.deserializeDataset(
i);r.schemaStatus!=null&&r.schemaStatus===n.DataContract.SchemaStatus.Pending?(t.
datasetCache.handlePendingInList(r),r.id.lastIndexOf(t.client.workspaceId,0)===0&&
(u=t.datasetCache.getPromiseForPendingItem(r.id),u&&(t.localPendingDatasets.push(
{id:r.id,name:r.name(),promise:u}),function(n,i){i.always(function(){t.localPendingDatasets.
remove(function(t){return t.id===n.id})})}(r,u)))):r.schemaStatus!==n.DataContract.
SchemaStatus.Invalid&&(t.datasetCache.setItem(i.Id,r),r.category&&t.addCategory(
r.category,t.datasetCategoryRegistry))}catch(f){n.Log.exception(f,"A dataset failed to deserialize while prefetching. It will be ignored.",
"ApplicationCache.prefetch",{id:i.Id})}});t.datasetsPrefetched(!0)});this.modulesPrefetchPromise=
n.Util.then(p,function(){h.forEach(function(i){try{t.moduleCache.setItem(i.Id,t.
deserializeModule(i))}catch(r){n.Log.exception(r,"A module failed to deserialize while prefetching. It will be ignored.",
"ApplicationCache.prefetch",{id:i.Id})}i.Category&&t.addCategory(i.Category,t.moduleCategoryRegistry)}
);t.modulesPrefetched(!0)});this.notebooksPrefetchPromise=v?n.Util.then(v,function(
){a.forEach(function(i){try{t.notebookCache.setItem(i.FamilyId,t.deserializeNotebook(
i))}catch(r){n.Log.exception(r,"A notebook failed to deserialize while prefetching. It will be ignored.",
"ApplicationCache.prefetch",{familyId:i.FamilyId})}});t.notebooksPrefetched(!0)}
):null;this.trainedModelsPrefetchPromise=n.Util.then(w,function(){c.forEach(function(
i){try{t.trainedModelCache.setItem(i.Id,t.deserializeTrainedModel(i))}catch(r){n.
Log.exception(r,"A trained model failed to deserialize while prefetching. It will be ignored.",
"ApplicationCache.prefetch",{id:i.Id})}});t.trainedModelsPrefetched(!0)});this.transformModulesPrefetchPromise=
n.Util.then(b,function(){l.forEach(function(i){try{t.transformModulesCache.setItem(
i.Id,t.deserializeTransformModule(i))}catch(r){n.Log.exception(r,"A transform failed to deserialize while prefetching. It will be ignored.",
"ApplicationCache.prefetch",{id:i.Id})}});t.transformModulesPrefetched(!0)})},i.
prototype.addCategory=function(t,i,r){var o;r===void 0&&(r=[]);var u=t.split("\\"),
e=r.concat(u.splice(0,1)),f=e.join("\\");i.contains(f)||(o=n.observableMap(),i.put(
f,o));u.length>0&&this.addCategory(u.join("\\"),i.lookup(f),e)},i.prototype.createResourceBackend=
function(t,i,r,u,f){var e=this;return{fetch:function(i){e.assertPrefetched();return n.
Util.then(t(i),function(n){return r(n)})},list:function(){e.assertPrefetched();return n.
Util.then(i(),function(t){var i=[];return t.forEach(function(t){var u;try{u=r(t);
i.push({key:u.id,value:u})}catch(f){n.Log.exception(f,"A resource failed to deserialize while fetching items into a resource cache. It will be ignored.",
"createResourceBackend",{id:t.Id})}}),i})},deleteFamily:function(n){return u?(e.
assertPrefetched(),u(n)):$.Deferred().reject(new Error("deleteFamily not implemented for this resource cache")).
promise()},renameFamily:function(n,t){return f?(e.assertPrefetched(),f(n,t)):$.Deferred(
).reject(new Error("renameFamily not implemented for this resource cache")).promise(
)}}},i.prototype.deserializeModule=function(t){return n.DataContract.deserializeModule(
t,this.dataTypeRegistry)},i.prototype.deserializeDataset=function(t){return n.DataContract.
deserializeDataset(t,this.dataTypeRegistry)},i.prototype.deserializeNotebook=function(
t){return n.DataContract.deserializeNotebook(t)},i.prototype.deserializeTrainedModel=
function(t){return n.DataContract.deserializeTrainedModel(t,this.dataTypeRegistry)}
,i.prototype.deserializeTransformModule=function(t){return n.DataContract.deserializeTransformModule(
t,this.dataTypeRegistry)},i.prototype.assertPrefetched=function(){if(!this.allPrefetched(
))throw new Error("Before using an ApplicationCache, prefetch() must have been called and completed.");
},i}(),i,t,r;n.ApplicationCache=u;i=function(){function t(t){this.data=n.observableMap(
);this.outstandingPromises=Object.create(null);this.backend=t}return Object.defineProperty(
t.prototype,"items",{get:function(){return this.data},enumerable:!0,configurable:
!0}),t.prototype.setItem=function(n,t){if(this.data.contains(n))throw new Error(
"Cannot overwrite cache lines. The given key already exists in the cache: "+n);else
if(this.updateIsPendingForKey(n))throw new Error("Cannot overwrite cache lines. A pending fetch for this key is in progress: "+
n);else this.data.put(n,t)},t.prototype.getItemIfCached=function(n){return this.
data.contains(n)?this.data.lookup(n):null},t.prototype.getItem=function(t){var i=
this,u,r;return this.data.contains(t)?$.when(this.data.lookup(t)):this.updateIsPendingForKey(
t)?this.outstandingPromises[t]:(u=!1,r=n.Util.then(this.backend.fetch(t),function(
n){return i.data.contains(t)?(u=!0,i.data.lookup(t)):n}),this.outstandingPromises[
t]=r,r.always(function(){delete i.outstandingPromises[t]}).done(function(n){u||i.
setItem(t,n)}),r)},t.prototype.loadNewItems=function(){var n=this;return this.backend.
list().done(function(t){n.data.modify(function(){t.forEach(function(t){n.getItemIfCached(
t.key)||(delete n.outstandingPromises[t.key],n.setItem(t.key,t.value))})})})},t.
prototype.clear=function(){this.data.clear()},t.prototype.updateIsPendingForKey=
function(n){return n in this.outstandingPromises},t}();n.ClientCache=i;t=function(
t){function i(n){t.call(this,n);this.resourceFamilyUpdated=new ko.subscribable;this.
_backend=n;this.latestResourceByFamily=Object.create(null)}return __extends(i,t),
i.prototype.getLatestResourceInFamily=function(n){return n!==null&&n in this.latestResourceByFamily?
this.latestResourceByFamily[n]:null},i.prototype.setItem=function(i,r){var e=!1;
if(r.familyId){var u=this.latestResourceByFamily[r.familyId],o=!u,s=u&&u.serviceVersion<
r.serviceVersion,f={familyId:r.familyId,newResourceId:r.id,newResourceServiceVersion:
r.serviceVersion,newResourceName:r.name(),existingResourceId:null,existingResourceServiceVersion:
null,existingResourceName:null};if(u&&(f.existingResourceId=u.id,f.existingResourceServiceVersion=
u.serviceVersion,f.existingResourceName=u.name()),u&&u.serviceVersion==r.serviceVersion)
throw new n.Log.TracedException("Attempted to add a resource with the same version number as the latest version already cached for its family",
"ResourceCache.setItem",f);(s||o)&&(this.latestResourceByFamily[r.familyId]=r);o?
(n.Log.info("A resource version has been added as the first in its family","ResourceCache.setItem",
f),r.isLatest(!0),this.setIsLatestClientVersion(r,!0),e=!0):s?(n.Log.info("A new resource version has been received for an existing family",
"ResourceCache.setItem",f),u.isLatest(!1),this.updateIsLatestClientVersion(u,r),
r.isLatest(!0),this.setIsLatestClientVersion(r,!0),e=!0):(n.Log.warn("A resource version is being added to the cache that is older than the latest in the family",
"ResourceCache.setItem",f),r.isLatest(!1),this.updateIsLatestClientVersion(r,u))}
t.prototype.setItem.call(this,i,r);e&&this.resourceFamilyUpdated.notifySubscribers(
r)},i.prototype.removeFamilyFromCache=function(n){var f=this,r=this.items(),t=[],
i,u;for(i in r)r[i].familyId===n&&t.push(i);u=this.latestResourceByFamily[n];delete
this.latestResourceByFamily[n];t.length>0&&this.items.modify(function(){t.forEach(
function(n){return f.items.remove(n)})});this.resourceFamilyUpdated.notifySubscribers(
u)},i.prototype.deleteFamily=function(n){var r=this,i,t;return this._backend.deleteFamily?
(i=n.split(".")[1]||n,t=this._backend.deleteFamily(i),t.done(function(){r.removeFamilyFromCache(
n)}),t):$.Deferred().fail(new Error("not implemented")).promise()},i.prototype.renameFamilyInCache=
function(n,t){var f=this,r=this.items(),i=[];for(var u in r)r[u].familyId===n&&i.
push(u);i.length>0&&this.items.modify(function(){i.forEach(function(n){return f.
items.lookup(n).name(t)})});this.resourceFamilyUpdated.notifySubscribers()},i.prototype.
renameFamily=function(n,t){var u=this,r,i;return this._backend.renameFamily?(r=n.
split(".")[1]||n,i=this._backend.renameFamily(r,t),i.done(function(){u.renameFamilyInCache(
n,t)}),i):$.Deferred().fail(new Error("not implemented")).promise()},i.prototype.
clear=function(){t.prototype.clear.call(this);this.latestResourceByFamily=Object.
create(null);this.resourceFamilyUpdated.notifySubscribers(null)},i.prototype.setIsLatestClientVersion=
function(t,i){t instanceof n.Model.Module&&(t.isLatestClientVersion=i)},i.prototype.
updateIsLatestClientVersion=function(t,i){var e,o;if(t instanceof n.Model.Module)
{var u=t,f=i,r=/(^\d+)(\.\d+)*/;r.test(u.clientVersion)&&r.test(f.clientVersion)&&
(e=parseInt(u.clientVersion.match(r)[1]),o=parseInt(f.clientVersion.match(r)[1]),
u.isLatestClientVersion=e>=o)}},i}(i);n.ResourceCache=t;r=function(){function i(
n){this.outstandingPromises=Object.create(null);this.pollInterval=5e3;this.maxPollInterval=
12e4;this.maxSchemaJobWaitHours=4;this.backend=n;this.resourceCache=new t(n)}return Object.
defineProperty(i.prototype,"resourceFamilyUpdated",{get:function(){return this.resourceCache.
resourceFamilyUpdated},set:function(n){this.resourceCache.resourceFamilyUpdated=
n},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:
function(){return this.resourceCache.items},enumerable:!0,configurable:!0}),i.prototype.
getLatestResourceInFamily=function(n){return this.resourceCache.getLatestResourceInFamily(
n)},i.prototype.setItem=function(n,t){this.resourceCache.setItem(n,t)},i.prototype.
getItemIfCached=function(n){return this.resourceCache.getItemIfCached(n)},i.prototype.
getItem=function(t){var r,i;return n.Log.info("dataset getItem() key = "+t),r=this.
getItemIfCached(t),r!=null?$.when(r):t in this.outstandingPromises?this.outstandingPromises[
t]:(n.Log.info("dataset getItem() key = "+t+" fetching from the service"),i=$.Deferred(
),this.setupResponseHandler(t,this.backend.fetch(t),i,this.pollInterval),this.setupAfterActions(
t,i),i)},i.prototype.loadNewItems=function(){var t=this;return n.Util.then(this.
backend.list(),function(i){var r=[];return i.forEach(function(i){i.value.schemaStatus!=
null&&i.value.schemaStatus===n.DataContract.SchemaStatus.Pending?t.handlePendingInList(
i.value):i.value.schemaStatus!==n.DataContract.SchemaStatus.Invalid&&(t.getItemIfCached(
i.key)||t.setItem(i.key,i.value),r.push(i.value))}),r})},i.prototype.handlePendingInList=
function(n){var r=this,t,i;this.okToPoll(n)&&(t=n.id,t in this.outstandingPromises||
(i=$.Deferred(),setTimeout(function(){r.pollDataSource(t,i,r.pollInterval)},this.
pollInterval),this.setupAfterActions(t,i)))},i.prototype.getPromiseForPendingItem=
function(n){return this.outstandingPromises[n]},i.prototype.clear=function(){this.
resourceCache.clear()},i.prototype.removeFamilyFromCache=function(n){this.resourceCache.
removeFamilyFromCache(n)},i.prototype.deleteFamily=function(n){return this.resourceCache.
deleteFamily(n)},i.prototype.okToPoll=function(t){var i=t.created,r=new Date(i.getTime(
)+this.maxSchemaJobWaitHours*36e5),u=new Date;return n.Log.info("okToPoll on id = "+
t.id+"created = "+i.toString()+" bound = "+r.toString()+" current time = "+u.toString(
)),u.getTime()>r.getTime()?!1:!0},i.prototype.pollDataSource=function(n,t,i){this.
setupResponseHandler(n,this.backend.fetch(n),t,i)},i.prototype.setupResponseHandler=
function(t,i,r,u){var f=this;i.done(function(i){var e,o;n.Log.info("dataset getItem() key = "+
t+" fetched from service");e=f.resourceCache.getItemIfCached(t);e!=null?(n.Log.info(
"dataset getItem() key = "+t+" resolved from cache"),r.resolve(e)):i!=null&&i.schemaStatus===
n.DataContract.SchemaStatus.Pending?(n.Log.info("dataset getItem() key = "+t+" schema still pending, will fetch again"),
f.okToPoll(i)?(o=f.computeBackoff(u),setTimeout(function(){f.pollDataSource(t,r,
o)},o)):r.reject(new Error("Upload timed out"))):i==null||i.schemaStatus===n.DataContract.
SchemaStatus.Complete||i.schemaStatus===n.DataContract.SchemaStatus.NotSupported?
(n.Log.info("dataset getItem() key = "+t+" schema done, resolving"),r.resolve(i)):
i!=null&&i.schemaStatus===n.DataContract.SchemaStatus.Failed?(n.Log.info("dataset getItem() key = "+
t+" schema job failed, resolving"),r.resolve(i)):i!=null&&i.schemaStatus===n.DataContract.
SchemaStatus.Invalid?(n.Log.info("dataset getItem() key = "+t+" schema job failed, rejecting"),
r.reject(new Error(n.LocalizedResources.schemaGenerationError))):i==null||i.schemaStatus?
r.reject(new Error("Internal error")):r.resolve(i)}).fail(function(n){return r.reject(
n)})},i.prototype.computeBackoff=function(n){var t=n*2;return t>this.maxPollInterval?
this.maxPollInterval:t},i.prototype.setupAfterActions=function(n,t){var i=this;this.
outstandingPromises[n]=t;t.always(function(){delete i.outstandingPromises[n]}).done(
function(t){i.getItemIfCached(t)==null&&i.setItem(n,t)})},i}();n.DatasetResourceCache=
r}(DataLab||(DataLab={})),function(n){var t;(function(t){function c(n,t,r){i.writeEntry(
t,n,"information",r)}function f(n,t,r){i.writeEntry(t,n,"error",r)}function l(n,
t,r){i.writeEntry(t,n,"warn",r)}function a(n,t,r){i.writeEntry(t,n,"verbose",r)}
function v(n,t,r,u){i.writeEntry(n,t,r,u)}function y(n,t,r,f){var e={};f=u(f);$.
extend(e,{key:n,time:t,message:r,clientDateTime:(new Date).toUTCString()},f);typeof
e.toJSON!="undefined"&&delete e.toJSON;i.logData("performance",e)}function p(n){
if(typeof n!="string"||n.length===0)throw"Performance marker key must be a non empty string";
r[n]=new Date}function w(t,i,u){var s=new Date,e=null,o;if(typeof t!="string"||t.
length===0)throw"Performance marker key must be a non empty string";t in r&&(e=r[
t],delete r[t]);e!==null?(o=(s.getTime()-e.getTime())/1e3,n.Log.performance(t,o,
i,u)):f(t,"ClientTelemetryLogger.timerStopAndLog() - marker name '"+t+"' cannot be found.",
u)}function b(t,r){var u={},f=s(t.data);$.extend(u,{featureId:t.featureID||0,featureName:
n.Constants.FeatureId[t.featureID||0],groupId:t.groupID||0,groupName:n.Constants.
FeatureId[t.groupID||0],workspaceId:r||0,experimentId:t.experimentID||0,moduleId:
t.moduleID||"",clientDateTime:(new Date).toUTCString()},f);i.logData("featureUsage",
u)}function k(n){var t={},r=u(r);$.extend(t,{customEventType:n.type,eventKey:n.key,
clientDateTime:(new Date).toUTCString()},r||{});i.logData("customEvent",t)}function d(
n,t){var r={};t=u(t);$.extend(r,{comments:n,clientDateTime:(new Date).toUTCString(
)},t);i.logData("feedbackInfo",r,!0)}var e={error:451,information:452,exception:
453,startup:454,viewSwitch:456,clientAction:457,clientScenario:458,customEvent:459,
warning:460,verbose:461,performance:462,feedbackInfo:463,featureUsage:464},o=450,
r={},s=function(n){switch(typeof n){case"object":return{data:JSON.stringify(n)};
case"undefined":return"";case"string":return{data:n};default:return{data:n.toString(
)}}},u=function(n){var t,i;switch(typeof n){case"object":if(n instanceof Array){
for(i={},t=0;t<n.length;t++)i["data"+t]=n[t];return i}return n;case"undefined":return{
};case"string":return{data:n};default:return{data:n.toString()}}},h=function(){function i(
){this._sendTimeoutMs=1e4;this._maxQueuedEvents=50;this._eventQueue=[];this._eventsBeingSentToServer=
[];this._outstandingRequestToServer=null;this._throttleNextRequest=!1;this._isRequestToServerThrottleTimer=
null}return i.prototype.writeEntry=function(n,t,i,r){var e="",o,f;e=typeof t=="object"?
"[object]":typeof t=="undefined"?"[undefined]":typeof t=="function"?"[function]":
t!==null?t.toString():"[null]";o=i==="error";f={};r=u(r);$.extend(f,{message:e,eventKey:
n,clientDateTime:(new Date).toUTCString()},r);this.logData(i,f,o)},i.prototype.logData=
function(n,t,i){i===void 0&&(i=!1);var r=e[n],u=Shell.Environment.getIsTelemetryEventDisabled(
);u&&u[r-o]||(this._eventQueue.push($.extend({dataObject:t},{eventId:r},this.getCommonLoggingData(
))),this.sendEventsToServerIfNecessary(i))},i.prototype.sendEventsToServerIfNecessary=
function(n){var t=this;n===void 0&&(n=!1);!this._isRequestToServerThrottleTimer&&
!this._outstandingRequestToServer&&this._eventQueue.length>0&&(this._eventQueue.
length>=this._maxQueuedEvents||n?this.sendEventsToServer():this._sendTimer||(this.
_sendTimer=setTimeout(function(){t.sendEventsToServer()},this._sendTimeoutMs)))}
,i.prototype.sendEventsToServer=function(){var i=this,r;this.throttleIfNecessary(
)||(r=this._eventsBeingSentToServer=this._eventQueue.splice(0,this._maxQueuedEvents),
this._outstandingRequestToServer=n.AjaxClient.sendRequest({url:t.postDataUrl,settings:
{type:"POST",data:r,logFunction:$.noop,suppressSuccessLogging:!0}}).fail(function(
){i._eventQueue=r.concat(i._eventQueue);i._throttleNextRequest=!0}).always(function(
){i._outstandingRequestToServer=null;i.sendEventsToServerIfNecessary()}),clearTimeout(
this._sendTimer),this._sendTimer=null,this._eventsBeingSentToServer=[])},i.prototype.
throttleIfNecessary=function(){var t=this,n=!1;return this._isRequestToServerThrottleTimer?
n=!0:this._throttleNextRequest&&(this._isRequestToServerThrottleTimer=setTimeout(
function(){t._isRequestToServerThrottleTimer=null;t.sendEventsToServer()},this._sendTimeoutMs),
this._throttleNextRequest=!1,n=!0),n},i.prototype.getCommonLoggingData=function(
){var t=new Date((new Date).getTime()),n=Shell.Utilities.newGuid();return{pageRequestId:
Shell.Environment.getPageRequestId(),url:location.href,clientDateTime:(new Date).
toUTCString(),requestId:n}},i}(),i=new h;t.postDataUrl="/LoggingService/PostClientData";
t.info=c;t.error=f;t.warn=l;t.verbose=a;t.writeEntry=v;t.performance=y;t.timerStart=
p;t.timerStopAndLog=w;t.featureUsage=b;t.customEvent=k;t.feedbackInfo=d})(t=n.ClientTelemetryLogger||
(n.ClientTelemetryLogger={}))}(DataLab||(DataLab={})),function(n){var t;(function(
n){n.ClientConfiguration={AzureManagementPortalUrl:""}})(t=n.Configuration||(n.Configuration=
{}))}(DataLab||(DataLab={})),function(n){var t;(function(n){function t(t){n.integrationPoints=
t}function i(){return n.integrationPoints.VariadicInputPorts.Enabled}function r(
){return n.integrationPoints.EnableProjectBasedAssetsGrouping.Enabled}function u(
){return n.integrationPoints.AnimatedTour.Enabled}function f(){return n.integrationPoints.
PublishNotebooksToGallery.Enabled}function e(){return n.integrationPoints.VisualizeZip.
Enabled}function o(){return n.integrationPoints.HomePageGetExperimentsWithOData.
Enabled}function s(){return n.integrationPoints.UseClientTelemetryLogging.Enabled}
function h(){return n.integrationPoints.PublishCustomModulesToGallery.Enabled}function c(
){return n.integrationPoints.RNotebookInContextMenu.Enabled}function l(){return n.
integrationPoints.PublishNotebookOptionIncludeDataset.Enabled}function a(){return n.
integrationPoints.MultiInputSupport.Enabled}function v(){return n.integrationPoints.
MiniMapInExperimentEditor.Enabled}function y(){return n.integrationPoints.BlankRNotebookInNewMenu.
Enabled}function p(){return n.integrationPoints.ToolTipInEEContextMenus.Enabled}
function w(){return n.integrationPoints.MiniMapInEvaluateVisualization.Enabled}function b(
){return n.integrationPoints.HandleJsonParseErrors.Enabled}function k(){return n.
integrationPoints.DataAccessCodeSupportRLanguage.Enabled}function d(){return n.integrationPoints.
HomepageCompetitionBanner.Enabled}function g(){return n.integrationPoints.EditMyProfile.
Enabled}function nt(){return n.integrationPoints.ConfigureYourOwnHdInsight.Enabled}
function tt(){return n.integrationPoints.Dataflows.Enabled}function it(){return n.
integrationPoints.EnablePackingService.Enabled}function rt(){return n.integrationPoints.
ModulesList.Enabled}function ut(){return n.integrationPoints.AuthorizeDownloadILearner.
Enabled}function ft(){return n.integrationPoints.AuthorizeDownloadITransform.Enabled}
function et(){return n.integrationPoints.SSIMSearch.Enabled}function ot(){return n.
integrationPoints.ColumnPickerRulesRedesign.Enabled}function st(){return n.integrationPoints.
SemanticHelpSearch.Enabled}function ht(){return n.integrationPoints.AllowAnonymousTest.
Enabled}function ct(){return n.integrationPoints.ExperimentalExperimentList.Enabled}
function lt(){return n.integrationPoints.EnableFrictionFreeUserExperience.Enabled}
function at(){return n.integrationPoints.EnableSchemaPropagation.Enabled}function vt(
){return n.integrationPoints.EnableNewExperimentFlow.Enabled}function yt(){return n.
integrationPoints.EnableGalleryInPlusNewInterim.Enabled&&n.integrationPoints.EnableCommunityUXInStudio.
Enabled&&n.integrationPoints.EnablePackingService.Enabled}function pt(){return n.
integrationPoints.AnonymousWorkspace.Enabled}function wt(){return n.integrationPoints.
TrialLimitations.Enabled}function bt(){return n.integrationPoints.EnableWorkspaceQuotas.
Enabled}function kt(){return n.integrationPoints.IPythonNotebook.Enabled}function dt(
){return n.integrationPoints.NotebookList.Enabled}function gt(){return n.integrationPoints.
NotebookPlusNew.Enabled}function ni(){return n.integrationPoints.NotebookContextMenu.
Enabled}function ti(){return n.integrationPoints.ExperimentDescription.Enabled}function ii(
){return n.integrationPoints.StorageUsageWidget.Enabled}function ri(){return n.integrationPoints.
EnableOutputPortApiCode.Enabled}function ui(){return n.integrationPoints.EnablePayboardTelemetry.
Enabled}function fi(){return n.integrationPoints.EnableOutputPortApiCode.Experience}
function ei(){return n.integrationPoints.EnableNewCustomModuleUpload.Enabled}function oi(
){return n.integrationPoints.EnableAssetDeletion.Enabled}function si(){return n.
integrationPoints.AssetDeletionUi.Enabled}function hi(){return n.integrationPoints.
EnableGuidedTour.Enabled}function ci(){return n.integrationPoints.EnableGuidedExperiment.
Enabled}function li(){return n.integrationPoints.TrainedModelDeletionUi.Enabled}
function ai(){return n.integrationPoints.ExcelDownloadEnabled.Enabled}function vi(
){return n.integrationPoints.AgaveExcelClientEnableSampleData.Enabled}function yi(
){return n.integrationPoints.EnableCommunityUXInStudio.Enabled}function pi(){return n.
integrationPoints.ChatSupport.Enabled}function wi(){return n.integrationPoints.ShowSubscriptionInfo.
Enabled}function bi(){return n.integrationPoints.CopyExperimentAcrossWorkspace.Enabled}
function ki(){return n.integrationPoints.DatasetUploadInTrial.Enabled}function di(
){return n.integrationPoints.ModuleUploadInTrial.Enabled}function gi(){return n.
integrationPoints.TreeVisualization.Enabled}function nr(){return n.integrationPoints.
PublishWebServiceInTrial.Enabled}function tr(){return n.integrationPoints.ExperimentListCategories.
Enabled}function ir(){return n.integrationPoints.EnableChunkedUploadInStudio.Enabled}
function rr(){return n.integrationPoints.CompetitionExperimentSupport.Enabled}function ur(
){return n.integrationPoints.CompetitionEntrySchemaValidation.Enabled}function fr(
){return n.integrationPoints.MarkdownInPublishDialog.Enabled}function er(){return n.
integrationPoints.MarkdownInExperimentDescription.Enabled}function or(){return n.
integrationPoints.CopyToWorkspaceInExperimentView.Enabled}function sr(){return n.
integrationPoints.MultiGeoNavigation.Enabled}function hr(){return n.integrationPoints.
PackingGeoPath.Enabled}function cr(){return n.integrationPoints.RepublishToGallery.
Enabled}function lr(){return n.integrationPoints.EnableCarouselOnHomepage.Enabled}
function ar(){return n.integrationPoints.EnableScriptEditorPopup.Enabled}function vr(
){return n.integrationPoints.VisualizeRegressionHistogram.Enabled}function yr(){
return n.integrationPoints.ShowUsePreviousResultsOption.Enabled}function pr(){return n.
integrationPoints.CollapseEditorDrawerCommands.Enabled}function wr(){return n.integrationPoints.
JupyterNotebooksInGallery.Enabled}function br(){return n.integrationPoints.DataGateway.
Enabled}function kr(){return n.integrationPoints.AgaveExcelClient.Enabled}n.integrationPoints=
{VariadicInputPorts:{Enabled:!0,Experience:""},EnableProjectBasedAssetsGrouping:
{Enabled:!0,Experience:""},AnimatedTour:{Enabled:!0,Experience:""},PublishNotebooksToGallery:
{Enabled:!0,Experience:""},VisualizeZip:{Enabled:!0,Experience:""},HomePageGetExperimentsWithOData:
{Enabled:!0,Experience:""},UseClientTelemetryLogging:{Enabled:!0,Experience:""},
PublishCustomModulesToGallery:{Enabled:!0,Experience:""},RNotebookInContextMenu:
{Enabled:!0,Experience:""},PublishNotebookOptionIncludeDataset:{Enabled:!0,Experience:
""},MultiInputSupport:{Enabled:!0,Experience:""},MiniMapInExperimentEditor:{Enabled:
!0,Experience:""},BlankRNotebookInNewMenu:{Enabled:!0,Experience:""},ToolTipInEEContextMenus:
{Enabled:!0,Experience:""},MiniMapInEvaluateVisualization:{Enabled:!0,Experience:
""},HandleJsonParseErrors:{Enabled:!0,Experience:""},DataAccessCodeSupportRLanguage:
{Enabled:!0,Experience:""},HomepageCompetitionBanner:{Enabled:!0,Experience:""},
EditMyProfile:{Enabled:!0,Experience:""},ConfigureYourOwnHdInsight:{Enabled:!0,Experience:
""},Dataflows:{Enabled:!0,Experience:""},ModulesList:{Enabled:!0,Experience:""},
AuthorizeDownloadILearner:{Enabled:!0,Experience:""},AuthorizeDownloadITransform:
{Enabled:!0,Experience:""},SSIMSearch:{Enabled:!0,Experience:""},ColumnPickerRulesRedesign:
{Enabled:!1,Experience:""},SemanticHelpSearch:{Enabled:!0,Experience:""},AllowAnonymousTest:
{Enabled:!0,Experience:""},ExperimentalExperimentList:{Enabled:!0,Experience:""},
EnableFrictionFreeUserExperience:{Enabled:!0,Experience:""},EnableSchemaPropagation:
{Enabled:!0,Experience:""},EnableNewExperimentFlow:{Enabled:!0,Experience:""},EnableGalleryInPlusNewInterim:
{Enabled:!0,Experience:""},EnablePackingService:{Enabled:!0,Experience:""},IPythonNotebook:
{Enabled:!0,Experience:""},NotebookList:{Enabled:!0,Experience:""},NotebookPlusNew:
{Enabled:!0,Experience:""},NotebookContextMenu:{Enabled:!0,Experience:""},AnonymousWorkspace:
{Enabled:!0,Experience:""},TrialLimitations:{Enabled:!0,Experience:""},EnableWorkspaceQuotas:
{Enabled:!0,Experience:""},StorageUsageWidget:{Enabled:!0,Experience:""},ExperimentDescription:
{Enabled:!0,Experience:""},EnableOutputPortApiCode:{Enabled:!0,Experience:""},EnablePayboardTelemetry:
{Enabled:!0,Experience:""},EnableNewCustomModuleUpload:{Enabled:!0,Experience:""},
EnableAssetDeletion:{Enabled:!0,Experience:""},AssetDeletionUi:{Enabled:!0,Experience:
""},EnableGuidedTour:{Enabled:!0,Experience:""},EnableGuidedExperiment:{Enabled:
!0,Experience:""},TrainedModelDeletionUi:{Enabled:!0,Experience:""},EnableCommunityUXInStudio:
{Enabled:!0,Experience:""},ChatSupport:{Enabled:!0,Experience:""},ExcelDownloadEnabled:
{Enabled:!0,Experience:""},AgaveExcelClientEnableSampleData:{Enabled:!0,Experience:
""},ShowSubscriptionInfo:{Enabled:!1,Experience:""},CopyExperimentAcrossWorkspace:
{Enabled:!0,Experience:""},DatasetUploadInTrial:{Enabled:!0,Experience:""},ModuleUploadInTrial:
{Enabled:!0,Experience:""},TreeVisualization:{Enabled:!1,Experience:""},PublishWebServiceInTrial:
{Enabled:!0,Experience:""},ExperimentListCategories:{Enabled:!0,Experience:""},EnableChunkedUploadInStudio:
{Enabled:!0,Experience:""},MarkdownInPublishDialog:{Enabled:!0,Experience:""},MarkdownInExperimentDescription:
{Enabled:!0,Experience:""},CompetitionExperimentSupport:{Enabled:!0,Experience:""},
CompetitionEntrySchemaValidation:{Enabled:!0,Experience:""},CopyToWorkspaceInExperimentView:
{Enabled:!0,Experience:""},MultiGeoNavigation:{Enabled:!0,Experience:""},PackingGeoPath:
{Enabled:!0,Experience:""},RepublishToGallery:{Enabled:!0,Experience:""},EnableCarouselOnHomepage:
{Enabled:!0,Experience:""},EnableScriptEditorPopup:{Enabled:!0,Experience:""},VisualizeRegressionHistogram:
{Enabled:!0,Experience:""},ShowUsePreviousResultsOption:{Enabled:!0,Experience:""},
CollapseEditorDrawerCommands:{Enabled:!0,Experience:""},JupyterNotebooksInGallery:
{Enabled:!0,Experience:""},DataGateway:{Enabled:!0,Experience:""},AgaveExcelClient:
{Enabled:!0,Experience:""}};n.setIntegrationPoints=t;n.variadicInputPortsEnabled=
i;n.enableProjectBasedAssetsGroupingEnabled=r;n.animatedTourEnabled=u;n.publishNotebooksToGalleryEnabled=
f;n.visualizeZipEnabled=e;n.homePageGetExperimentsWithODataEnabled=o;n.useClientTelemetryLoggingEnabled=
s;n.publishCustomModulesToGalleryEnabled=h;n.rNotebookInContextMenuEnabled=c;n.publishNotebookOptionIncludeDatasetEnabled=
l;n.multiInputSupportEnabled=a;n.miniMapInExperimentEditorEnabled=v;n.blankRNotebookInNewMenuEnabled=
y;n.toolTipInEEContextMenusEnabled=p;n.miniMapInEvaluateVisualizationEnabled=w;n.
handleJsonParseErrorsEnabled=b;n.dataAccessCodeSupportRLanguageEnabled=k;n.homepageCompetitionBannerEnabled=
d;n.EditMyProfileEnabled=g;n.configureYourOwnHdInsightEnabled=nt;n.dataflowsEnabled=
tt;n.packingServiceEnabled=it;n.modulesListEnabled=rt;n.authorizeDownloadILearnerEnabled=
ut;n.authorizeDownloadITransformEnabled=ft;n.ssimSearchEnabled=et;n.columnPickerRulesRedesignEnabled=
ot;n.semanticHelpSearch=st;n.allowAnonymousTest=ht;n.experimentalExperimentListEnabled=
ct;n.enableFrictionFreeUserExperienceEnabled=lt;n.schemaPropagationEnabled=at;n.
newExperimentFlowEnabled=vt;n.galleryInPlusNewInterimEnabled=yt;n.anonymousWorkspaceEnabled=
pt;n.trialLimitationsEnabled=wt;n.enableWorkspaceQuotasEnabled=bt;n.iPythonNotebookEnabled=
kt;n.notebookListEnabled=dt;n.notebookPlusNewEnabled=gt;n.notebookContextMenuEnabled=
ni;n.experimentDescriptionEnabled=ti;n.storageUsageWidgetEnabled=ii;n.enableOutputPortApiCodeEnabled=
ri;n.payboardTelemetryEnabled=ui;n.enableOutputPortApiCodeExperience=fi;n.newCustomModuleUploadEnabled=
ei;n.enableAssetDeletionEnabled=oi;n.assetDeletionUiEnabled=si;n.guidedTourEnabled=
hi;n.guidedExperimentEnabled=ci;n.trainedModelDeletionUiEnabled=li;n.excelDownloadEnabled=
ai;n.agaveExcelClientEnableSampleData=vi;n.communityUXInStudioEnabled=yi;n.chatSupportEnabled=
pi;n.showSubscriptionInfoEnabled=wi;n.copyExperimentAcrossWorkspaceEnabled=bi;n.
datasetUploadInTrialEnabled=ki;n.moduleUploadInTrialEnabled=di;n.treeVisualizationEnabled=
gi;n.publishWebServiceInTrialEnabled=nr;n.experimentListCategoriesEnabled=tr;n.chunkedUploadInStudioEnabled=
ir;n.competitionExperimentSupportEnabled=rr;n.competitionEntrySchemaValidationEnabled=
ur;n.markdownInPublishDialogEnabled=fr;n.markdownInExperimentDescriptionEnabled=
er;n.copyToWorkspaceInExperimentViewEnabled=or;n.multiGeoNavigationEnabled=sr;n.
packingGeoPath=hr;n.republishToGalleryEnabled=cr;n.enableCarouselOnHomepage=lr;n.
enableScriptEditorPopup=ar;n.visualizeRegressionHistogram=vr;n.showUsePreviousResultsOption=
yr;n.collapseEditorDrawerCommandsEnabled=pr;n.jupyterNotebooksInGalleryEnabled=wr;
n.dataGatewayEnabled=br;n.agaveExcelClientEnabled=kr})(t=n.Features||(n.Features=
{}))}(DataLab||(DataLab={})),function(n){var t;(function(t){function i(){var t=n.
User,i=n.Features.iPythonNotebookEnabled();return t?i&&t.isWorkspaceOwner:i}function r(
){return i()&&n.Features.notebookContextMenuEnabled()}function u(){return i()&&n.
Features.notebookListEnabled()}t.canEnableIPythonNotebookFeature=i;t.canEnableNotebookContextMenu=
r;t.canEnableNotebookList=u})(t=n.FeaturesExtensions||(n.FeaturesExtensions={}))}
(DataLab||(DataLab={})),function(n){var t=function(){function t(t,i){var u,r;this.
dataUrl=t;typeof i=="string"?(u=i,this.type=u,this.size=n.Util.getBytesEncodedInBase64String(
this.base64Text)):(r=i,this.size=r.size,this.type=r.type)}return Object.defineProperty(
t.prototype,"base64Text",{get:function(){return this.dataUrl.replace(/^.*?base64,/,
"")},enumerable:!0,configurable:!0}),t}();n.ImageContent=t}(DataLab||(DataLab={})
),function(n){var t;(function(t){"use strict";function o(){var u,i;t.isEnabled&&
r.timing&&(u=function(){setTimeout(function(){n.Log.performance("initialPageLoad",
r.timing.loadEventEnd-r.timing.navigationStart,"",r.timing)},0);i&&(i.dispose(),
i=null)},r.timing.loadEventStart>0?u():i=new n.Util.DisposableEventListener(window,
"load",u))}function s(n){t.isEnabled&&(e++,f={name:n,startTime:r.now(),number:e},
u&&(clearTimeout(u),u=null),i.isEnabled&&t.doClearResourceTimingsOnIntervalStart&&
(i.flush(),i.clear()))}function h(){t.isEnabled&&f&&(u&&clearTimeout(u),u=setTimeout(
function(){var t=r.now()-f.startTime;n.Log.performance("interval",t,"",f);i.isEnabled&&
i.send({intervalNumber:f.number},5,2e3);f=null},0))}var i;(function(t){function c(
){t.beforeClearCallback&&t.beforeClearCallback();h()}function e(n,t,u){var h,e,s;
for(t===void 0&&(t=0),u===void 0&&(u=1e3),h=i.getEntriesByType("resource"),e=h.length,
s=f;s<e;++s)r[s]=n;f=e;o(e,t,u)}function l(){e(t.dataForFlush,0)}function a(n){i.
setResourceTimingBufferSize&&i.setResourceTimingBufferSize(n)}function o(f,e,c){
var l,v,a;s();var y=i.getEntriesByType("resource"),p=0,w=0;for(l=0;l<f;++l)v=r[l],
v&&(a=y[l],e===0||a.duration>0?(n.Log.performance("resource",a.duration,"",$.extend(
{},a,v)),r[l]=null,w++):p++);p>0&&e>0?u=setTimeout(o.bind(undefined,f,e-1,c),c):
f===y.length&&t.doClearWhenAllSent&&h()}function s(){u&&(clearTimeout(u),u=null)}
function h(){s();i.clearResourceTimings();f=0;r=[]}t.isEnabled=!1;t.isSetBufferSizeSupported=
!1;t.beforeClearCallback=null;t.dataForFlush=null;t.doClearWhenAllSent=!0;var i=
window.performance||{},r=[],f=0,u=null;t.clear=c;t.send=e;t.flush=l;t.setBufferSize=
a,function(n){i.clearResourceTimings=i.clearResourceTimings||i.webkitClearResourceTimings||
i.msClearResourceTimings||i.mozClearResourceTimings||i.oClearResourceTimings;i.getEntriesByType=
i.getEntriesByType||i.webkitGetEntriesByType||i.msGetEntriesByType||i.mozGetEntriesByType||
i.oGetEntriesByType;i.setResourceTimingBufferSize=i.setResourceTimingBufferSize||
i.webkitSetResourceTimingBufferSize||i.msSetResourceTimingBufferSize||i.mozSetResourceTimingBufferSize||
i.oSetResourceTimingBufferSize;t.isSetBufferSizeSupported=!!i.setResourceTimingBufferSize;
t.isEnabled=!!i.getEntriesByType&&!!i.clearResourceTimings;n.environment&&n.environment.
doMeasurePerformance!==!0&&(t.isEnabled=!1)}(window)})(i=t.ResourceTimings||(t.ResourceTimings=
{}));t.isEnabled=!0;t.doClearResourceTimingsOnIntervalStart=!0;var r,u=null,f=null,
e=0;t.logNavigationTiming=o;t.intervalStart=s;t.intervalEnd=h,function(n){(r=n.performance||
{},t.isEnabled=n.environment&&!!n.environment.doMeasurePerformance&&!!r.now,t.isEnabled)&&
(i.isSetBufferSizeSupported&&(i.setBufferSize(300),t.doClearResourceTimingsOnIntervalStart=
!1),i.dataForFlush={intervalNumber:1},i.beforeClearCallback=function(){i.beforeClearCallback=
null;i.dataForFlush=null})}(window)})(t=n.Performance||(n.Performance={}))}(DataLab||
(DataLab={}));__extends=this.__extends||function(n,t){function r(){this.constructor=
n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t;(function(n){var t=function(n){function t(t,i){n.call(this);
this.action=t;this.delay=i;this.inFlight=!1;this.repeating=!1}return __extends(t,
n),t.prototype.start=function(){this.repeating||(this.repeating=!0,this.doAction(
))},t.prototype.doActionNow=function(){return this.inFlight||(clearTimeout(this.
timer),this.doAction()),this.promise},t.prototype.stop=function(){this.repeating=
!1;clearTimeout(this.timer)},t.prototype.dispose=function(){this.stop();n.prototype.
dispose.call(this)},t.prototype.doAction=function(){var n=this,t=$.Deferred();this.
promise=t.promise();this.inFlight=!0;this.action().always(function(){n.inFlight=
!1;n.repeating&&(n.timer=setTimeout(function(){n.doAction()},n.delay))}).done(function(
){t.resolve()})},t}(n.Disposable);n.Repeater=t})(t=n.Util||(n.Util={}))}(DataLab||
(DataLab={})),function(n){var t;(function(n){function i(n){window.testMessagingEnabled&&
window.postMessage(n,"*")}var t;(function(n){n.AnimationComplete="AnimationComplete"}
)(t=n.Constants||(n.Constants={}));n.postMessage=i})(t=n.TestMessaging||(n.TestMessaging=
{}))}(DataLab||(DataLab={})),function(n){var t;(function(t){function h(n){f=n}function c(
n){n&&(i=n)}function e(){var t=0;return f.environment&&(t=n.Model.WorkspaceType[
f.environment.workspaceType],typeof t!="number"&&(t=0,n.Log.error("invalid workspace type",
"DataLab.Trial.getWorkspaceType",f.environment.workspaceType))),t}function l(){return e(
)===1}function r(){return e()===2}function a(n){switch(n.Description){case"Sample 1: Download dataset from UCI: Adult 2 class dataset":
case"Sample 2: Dataset Processing and Analysis: Auto Imports Regression Dataset":
case"Sample 7: Train, Test, Evaluate for Multiclass Classification: Letter Recognition Dataset":
case"Sample Experiment - Direct Marketing - Development – Training":case"Sample Experiment - Network Intrusion Detection - Development":
case"Sample Experiment - News Categorization - Development":case"Sample Experiment - Student Performance - Development":
return!1;default:return!0}}function v(){if(!n.Features.trialLimitationsEnabled())
return!0;return!r()||n.Features.datasetUploadInTrialEnabled()}function y(){if(!n.
Features.trialLimitationsEnabled())return!0;return!r()||n.Features.moduleUploadInTrialEnabled(
)}function p(t){if(!n.Features.trialLimitationsEnabled())return!0;return!rt(t)}function w(
){if(!n.Features.trialLimitationsEnabled())return!0;return!r()||n.Features.publishWebServiceInTrialEnabled(
)}function b(){if(!n.Features.trialLimitationsEnabled())return!0;return!r()}function k(
){return!n.Features.trialLimitationsEnabled()||o()<1?!0:n.Model.WorkspaceTypeExtensions.
isProduction(e())}function d(){return n.Features.trialLimitationsEnabled()&&n.Trial.
isWorkspaceTypeFree()&&n.Features.enableWorkspaceQuotasEnabled()}function o(){return i.
maxModuleCount}function g(){return i.timeLimit}function nt(){return i.moduleRunTimeLimit}
function tt(){return i.storageLimit}function it(){return r()&&i.maxDatasetUploadSize>
0?i.maxDatasetUploadSize:Number.MAX_VALUE}function rt(n){return u||(u=Object.create(
null),i.restrictedModules.forEach(function(n){u[n]=!0})),!!u[n]}var s=function()
{function n(n){if(this.feature=null,this.type=null,this.value=null,n.status===403&&
n.responseText){var i=n.responseText,t=i.match(/^Feature:([^;]+);(\w+):(.*)$/);t&&
t[1]&&t[2]&&t[3]&&(this.feature=t[1],this.type=t[2],this.value=this.type==="MaxLimit"?
+t[3]:t[3])}}return n}();t.RestrictedFeatureError=s;var i={maxModuleCount:Number.
MAX_VALUE,restrictedModules:[],timeLimit:-1,moduleRunTimeLimit:Number.MAX_VALUE,
storageLimit:10737418240,maxDatasetUploadSize:-1},u=null,f=window;t.setContext=h;
t.setUsageLimits=c;t.getWorkspaceType=e;t.isWorkspaceTypeFree=l;t.isWorkspaceTypeAnonymous=
r;t.filterSample=a;t.isDatasetUploadEnabled=v;t.isModuleUploadEnabled=y;t.isModuleEnabledById=
p;t.isWebServicePublishEnabled=w;t.isPublishToCommunityEnabled=b;t.isNumberOfModulesUnrestricted=
k;t.isWorkspaceStorageLimited=d;t.getMaxNumberOfModules=o;t.getTimeLimit=g;t.getModuleRunTimeLimit=
nt;t.getStorageLimit=tt;t.getMaxDatasetUploadSize=it})(t=n.Trial||(n.Trial={}))}
(DataLab||(DataLab={})),function(n){var t;(function(t){var i;(function(i){function r(
r,e,o){var s=t.then(n.Util.File.readDataUrlFromBlob(r),function(o){return t.then(
u(o),function(u){var s,h;try{return s=e.maxHeight&&u.naturalHeight>e.maxHeight||
e.maxWidth&&u.naturalWidth>e.maxWidth,s?(h=f(u,r.type,e),t.succeed(new n.ImageContent(
h,r.type))):t.succeed(new n.ImageContent(o,r))}catch(c){return t.fail(new Error(
i.FileSelectionErrors.errorLoadingIntoImage))}})});return t.then(s,function(r){if(
o&&r.size>n.Util.megaBytesToBytes(o)){var u=n.Util.format(i.FileSelectionErrors.
fileTooLarge,o.toString());return t.fail(new Error(u))}return t.succeed(r)})}function u(
n){var r=$.Deferred(),u=new Image;u.onload=function(n){var t=n.target;r.resolve(
t)};u.onerror=function(){r.reject(new Error(i.FileSelectionErrors.errorLoadingIntoImage))}
;try{u.src=n}catch(f){return t.fail(new Error(i.FileSelectionErrors.errorLoadingIntoImage))}
return t.when(r.promise())}function f(n,t,i){var r=n.naturalWidth,u=n.naturalHeight,
f,e;if(!i.maxHeight&&!i.maxWidth)throw new Error("Need to specify at least one max dimension");
return i.maxHeight&&u>i.maxHeight&&(r*=i.maxHeight/u,u=i.maxHeight),i.maxWidth&&
r>i.maxWidth&&(u*=i.maxWidth/r,r=i.maxWidth),f=document.createElement("canvas"),
e=f.getContext("2d"),f.width=r,f.height=u,e.drawImage(n,0,0,r,u),f.toDataURL(t)}
i.FileSelectionErrors={fileTooLarge:n.LocalizedResources.imageUploadError_FileTooLarge,
errorLoadingIntoImage:n.LocalizedResources.imageUploadError_GenericLoading};i.resizeFileIfNecessary=
r})(i=t.Images||(t.Images={}))})(t=n.Util||(n.Util={}))}(DataLab||(DataLab={})),
function(n){var t;(function(t){var i;(function(i){function r(t){var i="<?xml version='1.0' encoding='utf-16'?><DataV1 xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'><Meta /><NodePositions>";
return n.Util.forEach(t,function(t){var r="";if(t instanceof n.Model.ModuleNode)
r=t.id;else if(t instanceof n.Model.DatasetNode)r=t.dataset.id;else if(t instanceof
n.Model.TrainedModelNode)r=t.trainedModel.id;else if(t instanceof n.Model.TransformNode)
r=t.transform.id;else if(t instanceof n.Model.WebServicePortNode)r=t.id;else throw"Unknown GraphNode subtype";
i+="<NodePosition Node='"+r+"' Position='"+t.x()+","+t.y()+",200,200'/>"}),i+="<\/NodePositions>",
i+="<NodeGroups />",i+="<\/DataV1>"}function e(t,i){i===undefined&&(i=1);var f=n.
Util.filter(n.Util.values(t.nodes()),function(t){return!(t instanceof n.Model.WebServicePortNode)
}),e=[],o=[];return n.Util.forEach(f,function(t){if(t instanceof n.Model.ModuleNode)
{var i=t,r={Id:i.id,ModuleId:i.module_.id,ModuleParameters:[],InputPortsInternal:
[],OutputPortsInternal:[],UsePreviousResults:!1};n.Util.forEach(i.outputPorts,function(
t){n.Util.forEach(t.connectedNonWebServicePorts(),function(n){var i={DestinationInputPortId:
n.parent.id+":"+n.name,SourceOutputPortId:t.parent.id+":"+t.name};o.push(i)})});
r.InputPortsInternal=n.Util.map(i.inputPorts,function(t){var r=null,u=null,f=null,
i;return t.isConnected()&&(i=t.connectedOutputPort.parent,i instanceof n.Model.DatasetNode&&
(r=i.dataset.id),i instanceof n.Model.TrainedModelNode&&(u=i.trainedModel.id),i instanceof
n.Model.TransformNode&&(f=i.transform.id)),{DataSourceId:r,TrainedModelId:u,TransformModuleId:
f,Name:t.name,NodeId:t.parent.id}});r.OutputPortsInternal=n.Util.map(i.outputPorts,
function(n){var t=null,i;if(n.connectedWebServicePorts().length>0)for(i in n.descriptor.
allowedDataTypes)if(n.descriptor.allowedDataTypes[i].dataTypeId==="ILearnerDotNet")
{t="TrainedModel";break}else if(n.descriptor.allowedDataTypes[i].dataTypeId==="ITransformDotNet")
{t="Transform";break}return{Name:n.name,NodeId:n.parent.id,OutputType:t}});u(i.parameters,
r.ModuleParameters);r.Comment=i.comment()?i.comment():"";r.CommentCollapsed=i.commentCollapsed(
);r.UsePreviousResults=i.usePreviousResults();e.push(r)}}),{EdgesInternal:o,ModuleNodes:
e,SerializedClientData:r(f)}}function o(t,i){i===undefined&&(i=1);var u=n.Util.map(
t.getPublishInputPorts(),f),e=n.Util.map(t.getPublishOutputPorts(),f),o=n.Util.filter(
n.Util.values(t.nodes()),function(t){return t instanceof n.Model.WebServicePortNode}
);return{IsWebServiceExperiment:t.isWebServiceExperiment(),Inputs:u,Outputs:e,Parameters:
h(t.parameters()),WebServiceGroupId:t.publishedWebServiceGroupId,ModelPackageId:
t.publishedModelPackageId,SerializedClientData:r(o)}}function s(t){var i=[],r=function(
t){n.Util.forEach(t,function(t){var u,f,e;t instanceof n.Model.CredentialParameter&&
(u=t,u.isDirty&&(f=[],n.Util.forEach(u.credentialKeyParts,function(n){f.push({Name:
n.name,Value:n.value()})}),e={SecretName:u.name,SecretValue:u.value(),KeyParts:{
Type:u.credentialType,Parts:f}},i.push(e)));t.descriptor instanceof n.Model.ModeModuleParameterDescriptor&&
n.Util.forEach(t.childParameters,function(n){r(n)})})};return t.nodes.forEach(function(
t){if(t instanceof n.Model.ModuleNode){var i=t;r(i.parameters)}}),i}function h(i)
{return n.Util.map(i,function(i){var r,u;return i.descriptor instanceof n.Model.
ScriptModuleParameterDescriptor?(r=t.ModuleParameterType.Script,u=i.descriptor.scriptName):
r=i.descriptor instanceof n.Model.BooleanModuleParameterDescriptor?t.ModuleParameterType.
Boolean:i.descriptor instanceof n.Model.ChoiceModuleParameterDescriptor?t.ModuleParameterType.
Enumerated:i.descriptor instanceof n.Model.CredentialModuleParameterDescriptor?t.
ModuleParameterType.Credential:i.descriptor instanceof n.Model.DataGatewayNameModuleParameterDescriptor?
t.ModuleParameterType.DataGatewayName:i.descriptor.type,{Name:i.name,Value:i.value(
),ParameterDefinition:{Name:i.name,FriendlyName:i.name,DefaultValue:r==t.ModuleParameterType.
Credential?"":i.value(),ParameterType:r,HasDefaultValue:!0,IsOptional:i.descriptor.
isOptional,ParameterRules:i.descriptor.rules,HasRules:i.descriptor.rules.length>
0,MarkupType:0,CredentialDescriptor:null,ScriptName:u}}})}function u(i,r){n.Util.
forEach(i,function(i){i.isRelevant()&&(r.push({Name:i.name,Value:i.value(),ValueType:
t.ModuleParameterValueType.Literal,LinkedGlobalParameter:i.isLinked()?i.linkedWebServiceParameter(
).name:null}),i.descriptor instanceof n.Model.ModeModuleParameterDescriptor&&n.Util.
forEach(i.childParameters,function(n,t){i.value()===t&&u(n,r)}))})}function f(n)
{var i,r,u,t;return r=[n.parent.id,n.name].join(":"),t=n.connectedWebServicePorts(
),t&&t.length>0&&(i=t[0].parent.id,u=t[0].parent.nameParameter.value()),{Id:i,PortId:
r,Name:u}}i.serializeClientData=r;i.serialize=e;i.serializeWebServiceInfo=o;i.extractCredentials=
s})(i=t.v1||(t.v1={}))})(t=n.DataContract||(n.DataContract={}))}(DataLab||(DataLab=
{}));UserStoreClient=function(){function n(n){this.userId=n}return n.prototype.getValue=
function(){return""},n}(),function(n){var t;(function(n){(function(n){n[n.Private=
0]="Private";n[n.Public=1]="Public"})(n.CommunityExperimentVisibility||(n.CommunityExperimentVisibility=
{}));var i=n.CommunityExperimentVisibility,t=function(){function n(n,t,i,r,u,f,e,
o){this.sourceExperiment=n;this.experimentName=t;this.summary=i;this.description=
r;this.visibility=u;this.tags=f;this.thumbnail=e;this.imageUrl=o}return n}();n.PublishableExperiment=
t})(t=n.Model||(n.Model={}))}(DataLab||(DataLab={})),function(n){var t;(function(
t){var u,i,r;(function(n){n[n.None=0]="None";n[n.Primary=1]="Primary";n[n.Secondary=
2]="Secondary"})(t.RegenerateTokenType||(t.RegenerateTokenType={}));u=t.RegenerateTokenType;
i=function(){function n(n){this.cachedGateways=null;this.client=n}return n.prototype.
nameAvailable=function(n){return this.client.gatewayNameAvailable(n)},n.prototype.
createGateway=function(n,t){return this.client.createGateway(n,t)},n.prototype.getGateways=
function(){var n=this,t=this.client.getGateways();return t.then(function(t){n.cachedGateways=
t;clearTimeout(n.cacheClearTimeout);n.cacheClearTimeout=setTimeout(function(){n.
cachedGateways=null},6e4)}),t},n.prototype.getGatewaysCached=function(){return this.
cachedGateways?$.Deferred().resolve(this.cachedGateways).promise():this.getGateways(
)},n.prototype.getGateway=function(n){return this.client.getGateway(n)},n.prototype.
deleteGateway=function(n){return this.client.deleteGateway(n)},n.prototype.generateRegistrationKey=
function(n){return this.client.generateGatewayRegistrationKey(n)},n.prototype.updateGateway=
function(n,t){return this.client.updateGateway(n,t)},n.prototype.getExpressInstallLink=
function(n,t){return this.client.getGatewayExpressInstallLink(n,t)},n.prototype.
getCredentialEntryRequest=function(n,t,i){return this.client.getGatewayCredentialEntryRequest(
n,t,i)},n.prototype.getAreCredentialsEntered=function(n){return this.client.getAreGatewayCredentialsEntered(
n)},n.prototype.getEnteredCredentials=function(n){return this.client.getEnteredGatewayCredentials(
n)},n}();t.DataGatewayBackend=i;r=function(){function r(t,r){this.dataGatewayBackend=
null;this.mockProjectList={};this.projectLookup=new n.Model.ProjectLookup;this.workspaceId=
t.workspaceId;this.friendlyName=t.workspaceFriendlyName;this.dataGatewayBackend=
new i(r);this.client=t;this.mockProjectList.project1={Id:"project1",FamilyId:"",
ServiceVersion:1,IsLatest:!0,Created:"today",Name:"project1",Author:"rihorn",Description:
"",Modified:"today",Assets:{experiments:["exp1","exp2"],notebooks:["nb1","nb2"],
webServices:["ws1","ws2"]}}}return r.prototype.saveCredentials=function(t){var r=
this,i=[];return n.Util.forEach(t,function(n){i.push(r.client.saveCredential(n))}
),$.when.apply($,i)},r.prototype.publishExperimentAsync=function(i){var s=this,r=
"",u,f,e,o;return(i.nodes.forEach(function(t){if(t instanceof n.Model.ModuleNode)
{var i=t;n.Util.forEach(i.parameters,function(t){t instanceof n.Model.CredentialParameter&&
!t.isLinked()&&(r+="Module: "+i.name+", Parameter: "+t.name+"; ")})}}),r)?(r="Some of the credential parameters in experiment are not linked to experiment level parameters. This is a restriction that will be removed in the future. "+
r,u=new Shell.UI.Notifications.Notification(r,"error"),u.setActions([new Shell.UI.
Notifications.Buttons.close(function(){Shell.UI.Notifications.remove(u)})]),setTimeout(
function(){return Shell.UI.Notifications.add(u)},500),f=$.Deferred(),f.reject("CredentialValidationSUO6")):
(e=t.v1.extractCredentials(i),o={Description:i.description(),DataflowGraph:t.v1.
serialize(i),ParentId:i.experimentId()},n.Util.then(this.saveCredentials(e),function(
){return n.Util.then(s.client.publishExperimentAsync(o),function(n){return n.DataflowId}
)}))},r.prototype.listExperimentsAsync=function(n){return this.client.listExperimentsAsync(
n)},r.prototype.listWorkspacesAsync=function(){return this.client.listWorkspacesAsync(
)},r.prototype.listUserWorkspacesAsync=function(n){return this.client.listUserWorkspacesAsync(
n)},r.prototype.createExperimentStoragePackageAsync=function(n,t,i){return this.
client.createExperimentStoragePackageAsync(n,t,i)},r.prototype.createExperimentStoragePackageForCommunityAsync=
function(n,t,i){return this.client.createExperimentStoragePackageForCommunityAsync(
n,t,i)},r.prototype.getExperimentStoragePackageAsync=function(n){return this.client.
getExperimentStoragePackageAsync(n)},r.prototype.createExperimentFromStoragePackageAsync=
function(n,t){return this.client.createExperimentFromStoragePackageAsync(n,t)},r.
prototype.createNotebookStoragePackageForCommunityAsync=function(n,t){return this.
client.createNotebookStoragePackageForCommunityAsync(n,t)},r.prototype.getNotebookStoragePackageAsync=
function(n){return this.client.getNotebookStoragePackageAsync(n)},r.prototype.submitExperimentAsync=
function(i){var r=this,f=t.v1.extractCredentials(i),u=this.generateSubmissionRequest(
i,!1);return n.Util.then(this.saveCredentials(f),function(){return i.isDraft()&&
i.persistedOnService()?n.Util.then(r.client.updateExperimentAsync(i.experimentId(
),i.etag(),u),function(n){return{ExperimentId:i.experimentId(),Etag:n}}):n.Util.
then(r.client.submitExperimentAsync(u),function(n){return n})})},r.prototype.saveDraftAsync=
function(i){var r=this,u=t.v1.extractCredentials(i),f=this.generateSubmissionRequest(
i,!0);return n.Util.then(this.saveCredentials(u),function(){return n.Util.then(r.
client.submitExperimentAsync(f),function(n){return n})})},r.prototype.updateExperimentAsync=
function(i){var r=this,u=t.v1.extractCredentials(i),f=this.generateSubmissionRequest(
i,i.isDraft());return n.Util.then(this.saveCredentials(u),function(){return n.Util.
then(r.client.updateExperimentAsync(i.experimentId(),i.etag(),f),function(n){return{
ExperimentId:i.experimentId(),Etag:n}})})},r.prototype.deleteExperimentAsync=function(
n,t){return this.client.deleteExperimentAsync(n,t)},r.prototype.deleteExperimentAndAncestorsAsync=
function(n,t){return this.client.deleteExperimentAndAncestorsAsync(n,t)},r.prototype.
cancelExperimentAsync=function(n){return this.client.cancelExperimentAsync(n)},r.
prototype.promoteOutputToDatasetAsync=function(n,t,i,r){i===void 0&&(i=null);r===
void 0&&(r="");var u=this.promotionHelper(n,t,i,r),f={DataSource:u,ExperimentId:
n.parent.executedExperimentId,ModuleNodeId:n.parent.id,OutputName:n.name};return this.
client.promoteOutputToDatasetAsync(f)},r.prototype.promoteOutputToTrainedModelAsync=
function(n,t,i,r){i===void 0&&(i=null);r===void 0&&(r="");var u=this.promotionHelper(
n,t,i,r),f={TrainedModel:u,ExperimentId:n.parent.executedExperimentId,ModuleNodeId:
n.parent.id,OutputName:n.name};return this.client.promoteOutputToTrainedModelAsync(
f)},r.prototype.promoteOutputToTransformModuleAsync=function(n,t,i,r){i===void 0&&
(i=null);r===void 0&&(r="");var u=this.promotionHelper(n,t,i,r),f={Transform:u,ExperimentId:
n.parent.executedExperimentId,ModuleNodeId:n.parent.id,OutputName:n.name};return this.
client.promoteOutputToTransformModuleAsync(f)},r.prototype.promotionHelper=function(
t,i,r,u){if(r===void 0&&(r=null),u===void 0&&(u=""),t.descriptor.allowedDataTypes.
length!==1)throw new Error("Can't promote output from a multi-typed output port.");
if(!(t.parent instanceof n.Model.ModuleNode))throw new Error("Only the output ports of a module node can be promoted.");
return{Name:i,DataTypeId:t.descriptor.allowedDataTypes[0].dataTypeId,Description:
u,FamilyId:r}},r.prototype.uploadDatasetAsync=function(t,i,r,u,f,e){var s=this,o;
return f===void 0&&(f=""),e===void 0&&(e=null),o={Name:i,DataTypeId:r.dataTypeId,
Description:f,FamilyId:e},n.Util.then(this.client.uploadResourceAsync(t,r.dataTypeId),
function(n){var t={DataSource:o,UploadId:n.Id,UploadedFromFilename:u};return s.client.
commitResourceAsDatasetAsync(t)})},r.prototype.uploadCustomModulePackageAsync=function(
t,i,r,u,f,e){var o=this,s;return f===void 0&&(f=""),e===void 0&&(e=null),s={Name:
i,DataTypeId:r.dataTypeId,Description:f,FamilyId:e},n.Util.then(this.client.uploadResourceAsync(
t,r.dataTypeId),function(n){var t=n;return o.client.buildResourceAsCustomModulePackageAsync(
t)})},r.prototype.getExperimentAsync=function(i,r,u,f,e,o,s){return n.Util.then(
this.client.getExperimentAsync(i),function(n){return t.v1.deserializeExperiment(
n,r,u,f,e,o,s)})},r.prototype.getExperimentLineageAsync=function(n){return this.
client.getExperimentLineageAsync(n)},r.prototype.getExperimentInfoAsync=function(
t){return n.Util.then(this.client.getExperimentAsync(t),function(t){return n.Util.
replaceJsonDates(t.Status,["CreationTime","StartTime","EndTime"]),t})},r.prototype.
getDataflowAsync=function(i,r,u,f,e,o,s){return n.Util.then(this.client.getDataflowAsync(
i),function(n){return t.v1.deserializeDataflow(n,r,u,f,e,o,s)})},r.prototype.createWebServiceGroupAsync=
function(n,t,i,r){var u={Name:n,Description:t,AllowAnonymousTest:i,Tags:r};return this.
client.createWebServiceGroupAsync(u)},r.prototype.listWebServiceGroupsAsync=function(
){return this.client.listWebServiceGroupsAsync()},r.prototype.updateWebServiceGroupAsync=
function(n,t,i,r,u){var f={Name:t,Description:i,AllowAnonymousTest:r,Tags:u};return this.
client.updateWebServiceGroupAsync(n,f)},r.prototype.getWebServiceGroupAsync=function(
n){return this.client.getWebServiceGroupAsync(n)},r.prototype.deleteWebServiceGroupAsync=
function(n){return this.client.deleteWebServiceGroupAsync(n)},r.prototype.createModelPackageAsync=
function(i,r,u){function y(n){var u={StatusCode:1,Workflow:t.v1.serialize(r),Inputs:
c,LinkedExperimentId:r.experimentId(),Parameters:v?v.Parameters:null,UpdatableInputs:
a};return u.Outputs=l,n.registerModelPackageAsync(i,u)}function p(t,i,f){if(i&&i.
schemaEndpoint){var o;o=i.parent instanceof n.Model.DatasetNode?u.getDatasetSchema(
i.parent.dataset.id):u.getModuleOutputSchema(r.experimentId(),i.parent.id,i.name);
o.done(function(n){e(t,JSON.stringify(n),f)}).fail(function(){e(t,null,f)});h.push(
o)}else e(t,null,f)}function e(n,t,i){var e=null,u=n.connectedWebServicePorts(),
r,f;if(u&&u.length&&(e=u[0].parent.nameParameter.value()),r={GraphModuleNodeId:n.
parent.id,PortName:n.name,Schema:t,Name:e},i)c.push(r);else{if(n.descriptor&&n.descriptor.
allowedDataTypes)for(f in n.descriptor.allowedDataTypes)if(n.descriptor.allowedDataTypes[
f].dataTypeId==="ILearnerDotNet"){r.OutputType="TrainedModel";break}else if(n.descriptor.
allowedDataTypes[f].dataTypeId==="ITransformDotNet"){r.OutputType="Transform";break}
l.push(r)}}var w=this,c=[],l=[],a=[],v=t.v1.serializeWebServiceInfo(r),o,s,h,f;return n.
Util.forEach(r.trainedModels,function(t){var i=t.trainedModelPort;i.isConnected(
)&&n.Util.forEach(i.connectedPorts(),function(n){a.push({GraphModuleNodeId:n.parent.
id,PortName:n.name,Name:t.trainedModel.name(),Schema:null})})}),o=r.getPublishInputPorts(
),s=r.getPublishOutputPorts(),o.length>0||s.length>0?(h=[],o.forEach(function(n)
{p(n,n.connectedOutputPort,!0)}),s.forEach(function(n){p(n,n,!1)}),f=$.Deferred(
),$.when.apply($,h).always(function(){y(w.client).done(function(n){f.resolveWith(
$,[n])}).fail(function(n){f.rejectWith($,[n])})}),f):y(this.client)},r.prototype.
listModelPackagesAsync=function(n){return this.client.listModelPackagesAsync(n)}
,r.prototype.getModelPackageAsync=function(n,t){return this.client.getModelPackageAsync(
n,t)},r.prototype.updateModelPackageAsync=function(n,t,i,r,u,f){var e={StatusCode:
i,InputsMetadata:r,GlobalParametersMetadata:f};return e.OutputsMetadata=u,this.client.
updateModelPackageAsync(n,t,e)},r.prototype.registerWebServiceAsync=function(i,r)
{var u=this;return n.Util.then(this.getWorkspaceSettingsAsync(),function(f){var e=
n.Model.WorkspaceTypeExtensions.isProduction(f.type),o={ModelPackageId:r,WebServiceType:
e?t.WebServiceType.Production:t.WebServiceType.Staging,DiagnosticsSettings:null,
SampleDataEnabled:!1};return u.client.registerWebServiceAsync(i,o)})},r.prototype.
getWebServiceAsync=function(n,t){return this.client.getWebServiceAsync(n,t)},r.prototype.
updateWebServiceAsync=function(n,i,r,u,f){var e={ModelPackageId:r,WebServiceType:
t.WebServiceType.Staging,DiagnosticsSettings:u,SampleDataEnabled:f};return this.
client.updateWebServiceAsync(n,i,e)},r.prototype.invokeScoreWebServiceAsync=function(
n,t,i,r){return this.client.invokeScoreWebServiceAsync(n,t,i,r)},r.prototype.createNotebookAsync=
function(n){return this.client.createNotebookAsync(n)},r.prototype.openNotebookAsync=
function(n){return this.client.openNotebookAsync(n)},r.prototype.createCommunityExperimentAsync=
function(n,t,i){i===void 0&&(i=null);var r={ExperimentId:n.sourceExperiment.experimentId(
),PublishableExperiment:{name:n.experimentName,description:n.description,summary:
n.summary,hidden:n.visibility==0,tags:n.tags}};return n.thumbnail?r.PublishableExperiment.
upload_image_data={content:n.thumbnail.base64Text,content_type:n.thumbnail.type}:
n.imageUrl&&(r.PublishableExperiment.image_url=n.imageUrl),this.client.createCommunityExperimentAsync(
r,t,i)},r.prototype.createCommunityNotebookAsync=function(n,i,r){r===void 0&&(r=
null);var u={NotebookId:n.source.id,PublishableNotebook:{name:n.name,description:
n.description,summary:n.summary,hidden:n.visibility==0,tags:n.tags,hyperlinks:[],
languages:t.convertToCatalogNotebookLanguages([n.source.language])}};return n.thumbnail?
u.PublishableNotebook.upload_image_data={content:n.thumbnail.base64Text,content_type:
n.thumbnail.type}:n.imageUrl&&(u.PublishableNotebook.image_url=n.imageUrl),this.
client.createCommunityNotebookAsync(u,i,r)},r.prototype.startGetCommunityExperimentIdAsync=
function(n,t,i){return this.client.startGetCommunityExperimentIdAsync(n,t,i)},r.
prototype.startGetCompetitionExperimentIdFromCommunityAsync=function(n,t,i,r,u){
return this.client.startGetCompetitionExperimentIdFromCommunityAsync(n,t,i,r,u)}
,r.prototype.startGetCommunityNotebookIdAsync=function(n,t,i,r){return this.client.
startGetCommunityNotebookIdAsync(n,t,i,r)},r.prototype.getUnpackStatusAsync=function(
n){return this.client.getUnpackStatusAsync(n)},r.prototype.getNotebookUnpackStatusAsync=
function(n){return this.client.getNotebookUnpackStatusAsync(n)},r.prototype.createProjectAsync=
function(t){var r=this,i;return this.mockProjectList[t.Id]=t,i=$.Deferred(),n.Util.
succeed(t).done(function(n){r.projectLookup.addProject(n);i.resolve(n)}),i},r.prototype.
getProjectsAsync=function(t){var u=this,i=[],f,r;if(t&&t.length<0)t.forEach(function(
n){i.push(u.mockProjectList[n])});else for(f in this.mockProjectList)i.push(this.
mockProjectList[f]);return r=$.Deferred(),n.Util.succeed(i).done(function(n){n.forEach(
function(n){u.projectLookup.addProject(n)});r.resolve(n)}),r},r.prototype.updateProjectAsync=
function(t){var r=this,i;return this.mockProjectList[t.Id]=t,i=$.Deferred(),n.Util.
succeed(t).done(function(n){r.projectLookup.deleteProject(n);r.projectLookup.addProject(
n);i.resolve(n)}),i},r.prototype.deleteProjectAsync=function(t){var i=this,r=$.Deferred(
);return n.Util.succeed(t).done(function(n){delete i.mockProjectList[n.Id];i.projectLookup.
deleteProject(n);r.resolve()}),r},r.prototype.getProjectListForAsset=function(n)
{return this.projectLookup.listProjectForAsset(n)},r.prototype.getWorkspaceSettingsAsync=
function(){return n.Util.then(this.client.getWorkspaceSettingsAsync(),function(n)
{return t.v1.deserializeWorkspaceSettings(n)})},r.prototype.updateWorkspaceSettings=
function(t,i){var r={WorkspaceId:t.id,FriendlyName:t.friendlyName(),Description:
t.description(),AzureStorageConnectionString:t.azureStorageConnectionString(),HDInsightClusterConnectionString:
t.hdinsightClusterConnectionString.serialize(),HDInsightStorageConnectionString:
t.hdinsightStorageConnectionString.serialize(),UseDefaultHDInsightSettings:t.useDefaultHDInsightSettings(
),SqlAzureConnectionString:t.sqlAzureConnectionString(),AnalyticFrameworkClusterConnectionString:
t.analyticFrameworkClusterConnectionString(),AuthorizationToken:{PrimaryToken:t.
authorizationToken.primary(),SecondaryToken:t.authorizationToken.secondary()},Etag:
t.etag};switch(i){case 1:r.AuthorizationToken.PrimaryToken="UpdateToken";n.Log.customEvent(
{key:"Primary",type:"AuthorizationToken",data:undefined});break;case 2:r.AuthorizationToken.
SecondaryToken="UpdateToken";n.Log.customEvent({key:"Secondary",type:"AuthorizationToken",
data:undefined})}return this.client.updateWorkspaceSettings(r)},r.prototype.getModuleVisualizationData=
function(n,t,i){return this.client.getModuleVisualizationData(n,t,i)},r.prototype.
getModuleVisualizationDataItem=function(n,t,i,r,u,f,e){return this.client.getModuleVisualizationDataItem(
n,t,i,r,u,f,e)},r.prototype.getDatasetVisualizationData=function(n){return this.
client.getDatasetVisualizationData(n)},r.prototype.getModuleOutputSchema=function(
n,t,i){return this.client.getModuleOutputSchema(n,t,i)},r.prototype.getDatasetSchema=
function(n){return this.client.getDatasetSchema(n)},r.prototype.getModuleOutput=
function(n,t,i){return this.client.getModuleOutput(n,t,i)},r.prototype.getModuleErrorLog=
function(n,t){return this.client.getModuleErrorLog(n,t)},r.prototype.signOut=function(
){return this.client.signOut()},r.prototype.getStorageSpaceQuotaAsync=function()
{return this.client.getStorageSpaceQuotaAsync()},r.prototype.getExperimentDetailsAsync=
function(n){return this.client.getExperimentDetailsAsync(n)},r.prototype.updateExperimentDetailsAsync=
function(n,t){return this.client.updateExperimentDetailsAsync(n,t)},r.prototype.
generateSubmissionRequest=function(n,i){return{Description:n.description(),Summary:
n.summary.value(),ExperimentGraph:t.v1.serialize(n),IsDraft:i,IsArchived:n.isArchived,
ParentExperimentId:n.parentExperimentId,WebService:t.v1.serializeWebServiceInfo(
n),DisableNodesUpdate:n.disableNodesUpdate(),Category:"user",Tags:n.tags()}},r.prototype.
listProjects=function(n){return n===void 0&&(n=null),this.client.listProjects(n)}
,r.prototype.createProject=function(n){return this.client.createProject(n)},r.prototype.
updateProject=function(n,t){return this.client.updateProject(n,t)},r.prototype.startSubmitCompetitionEntryAsync=
function(n){return this.client.startSubmitCompetitionEntryAsync(n)},r.prototype.
getCompetitionSubmissionStatusAsync=function(n){return this.client.getCompetitionSubmissionStatusAsync(
n)},r.prototype.getCompetitionSchemaDefinitionAsync=function(n,t){return this.client.
getCompetitionSchemaDefinitionAsync(n,t)},r}();t.WorkspaceBackend=r})(t=n.DataContract||
(n.DataContract={}))}(DataLab||(DataLab={}));__extends=this.__extends||function(
n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[
i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(t){(function(
n){n[n.None=0]="None";n[n.Saved=1]="Saved";n[n.Saving=2]="Saving";n[n.SaveFailed=
3]="SaveFailed"})(t.DraftSaveState||(t.DraftSaveState={}));var r=t.DraftSaveState,
i=function(t){function i(i,r){var u=this;t.call(this);this.workspace=i;this.experiment=
r;this.queuedSave=null;this.queuedSubmit=null;this.discardTriggered=ko.observable(
!1);this.saveStatus=ko.observable({state:0,lastSave:null});this.postedVersion=ko.
observable(this.experiment.editVersion());this.dirty=ko.computed(function(){return u.
experiment.editVersion()!==u.postedVersion()&&u.experiment.isDraft()&&!u.discardTriggered(
)});this.promiseQueue=new n.Util.PromiseQueue;this.timedSave=function(){u.saveDraft(
)};this.timer=new n.Util.DisposableTimer(1e4,this.timedSave);this.dirty.subscribe(
function(n){n&&!u.timer.isCountingDown()?u.timer.start():!n&&u.timer.isCountingDown(
)&&u.timer.cancel()})}return __extends(i,t),i.prototype.validateForSaveDraft=function(
){var t=null;return this.experiment.isDraft()?this.discardTriggered()&&(t=n.LocalizedResources.
modelCannotQueueSave):t=n.LocalizedResources.modelCannotSaveExp,t},i.prototype.saveDraft=
function(){var t=this,r=this.validateForSaveDraft(),i;return r?n.Util.fail(new Error(
r)):this.queuedSave?this.queuedSave:(i=this.promiseQueue.enqueue(function(){t.queuedSave=
null;t.savingVersion=t.experiment.editVersion();var n=$.Deferred();return t.experiment.
saveError()?(t.experiment.dirtyStatus.clean(),n.resolve(null)):(t.saveStatus({state:
2,lastSave:null}),n=t.experiment.persistedOnService()?t.workspace.updateDraftAsync(
t.experiment):t.workspace.saveDraftAsync(t.experiment),n)}).done(function(i){i&&
(n.Log.customEvent({key:"Succeeded",type:"SaveDraft",data:undefined}),t.experiment.
persistedOnService()||t.experiment.experimentId(i.ExperimentId),t.experiment.etag(
i.Etag),t.saveStatus({state:1,lastSave:new Date}),t.postedVersion(t.savingVersion),
t.experiment.dirtyStatus.clean(),t.timer.cancel())}).fail(function(i){var r,u,f;
i instanceof n.Util.AjaxError&&i.xmlHttpRequest&&(i.xmlHttpRequest.status===412?
(n.Log.customEvent({key:"EtagConflict",type:"SaveDraft",data:undefined}),r={state:
0,lastSave:null},u=new Shell.UI.Notifications.Confirmation(n.LocalizedResources.
modelCannotSaveDraftAlreadyUpdated,"active"),u.setActions([new Shell.UI.Notifications.
Buttons.ok]),Shell.UI.Notifications.add(u)):i.xmlHttpRequest.status===404?(n.Log.
customEvent({key:"NotFound",type:"SaveDraft",data:undefined}),r={state:3,lastSave:
null}):r={state:3,lastSave:null},f=i.xmlHttpRequest.status>=400&&i.xmlHttpRequest.
status<500,f?t.timer.cancel():(r.isRetrying=!0,t.timer.start()),t.saveStatus(r))}
),this.promiseQueue.size()>1&&(this.queuedSave=i),i)},i.prototype.discardDraft=function(
){var t=this;return this.experiment.isDraft()?this.experiment.persistedOnService(
)?this.discardTriggered()?n.Util.fail(new Error(n.LocalizedResources.modelCannotQueueDiscard)):
this.promiseQueue.enqueue(function(){return t.discardTriggered(!0),t.workspace.deleteExperimentAsync(
t.experiment.experimentId(),t.experiment.etag()).fail(function(){t.discardTriggered(
!1)})}):this.promiseQueue.enqueue(function(){return t.discardTriggered(!0),n.Util.
when(null)}):n.Util.fail(new Error(n.LocalizedResources.modelCannotDiscardQueued))}
,i.prototype.submitExperiment=function(){var t=this,i;return this.discardTriggered(
)?n.Util.fail(new Error(n.LocalizedResources.modelCannotQueueSubmit)):this.queuedSubmit?
this.queuedSubmit:(i=this.promiseQueue.enqueue(function(){return t.queuedSubmit=
null,t.workspace.submitExperimentAsync(t.experiment)}).done(function(i){t.experiment.
experimentId(i.ExperimentId);t.experiment.etag(i.Etag);n.Log.customEvent({key:"Succeeded",
type:"SubmitExperiment",data:undefined})}).fail(function(i){if(i instanceof n.Util.
AjaxError&&i.xmlHttpRequest.status===412){var r=new Shell.UI.Notifications.Confirmation(
n.LocalizedResources.modelExperimentCannotRun,"active");r.setActions([new Shell.
UI.Notifications.Buttons.ok]);Shell.UI.Notifications.add(r);n.Log.customEvent({key:
"Timeout",type:"SubmitExperiment",data:undefined});t.timer.cancel()}else t.experiment.
experimentId()&&t.workspace.getExperimentAsync(t.experiment.experimentId()).done(
function(n){t.experiment.etag(n.etag())})}),this.promiseQueue.size()>1&&(this.queuedSubmit=
i),i)},i.prototype.updateExperiment=function(){return this.workspace.updateDraftAsync(
this.experiment).done(function(){n.Log.customEvent({key:"Succeeded",type:"UpdateExperiment",
data:undefined})}).fail(function(){n.Log.customEvent({key:"Failed",type:"UpdateExperiment",
data:undefined})})},i.prototype.dispose=function(){this.timer!==null&&this.timer.
dispose();t.prototype.dispose.call(this)},i}(n.Util.Disposable);t.DraftStateMachine=
i})(t=n.Model||(n.Model={}))}(DataLab||(DataLab={})),function(n){var t;(function(
n){var t=function(){function n(n,t,i,r,u,f,e,o){this.source=n;this.name=t;this.summary=
i;this.description=r;this.visibility=u;this.tags=f;this.thumbnail=e;this.imageUrl=
o}return n}();n.PublishableNotebook=t})(t=n.Model||(n.Model={}))}(DataLab||(DataLab=
{}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t;(function(n){var t=function(n){function t(t,i,r,u,f,e,o,
s,h){n.call(this,u,f,e,s);this.owner=r;this.projectContent=h;this.name(t);this.description(
i);this.modified=o?o:f}return __extends(t,n),t}(n.Resource);n.Project=t})(t=n.Model||
(n.Model={}))}(DataLab||(DataLab={})),function(n){var t;(function(t){var i=function(
){function t(){this.reverseLookup={}}return t.prototype.listProjectForAsset=function(
n){return this.reverseLookup[n].toArray()},t.prototype.addProject=function(n){var
t=this;for(var i in n.Assets)n.Assets[i].forEach(function(i){t.addAssetToProject(
i,n.Id)})},t.prototype.deleteProject=function(n){var t=this;for(var i in n.Assets)
n.Assets[i].forEach(function(i){t.removeAssetFromProject(i,n.Id)})},t.prototype.
addAssetToProject=function(t,i){this.reverseLookup[t]||(this.reverseLookup[t]=new
n.Util.StringSet);this.reverseLookup[t].add(i)},t.prototype.removeAssetFromProject=
function(n,t){this.reverseLookup[n]&&this.reverseLookup[n].delete(t)},t}();t.ProjectLookup=
i})(t=n.Model||(n.Model={}))}(DataLab||(DataLab={})),function(n){var t;(function(
t){var i,r;(function(n){n.maxDatasetNameLength=100})(i=t.Constants||(t.Constants=
{}));r=function(){function t(t){var r=this;this.description=ko.observable();this.
workspace=t;this.deprecate=ko.observable(!1);this._familyId=ko.observable("");this.
hint=ko.observable(!1);this.updateAvailableDatasets=new n.Util.Disposable;this._name=
n.Validation.validatableObservable("",function(u){return n.Util.first(t.datasetCache.
items(),function(n){return n.name()===u},!1)?"A dataset with this name already exists.":
r.workspace.datasetUploadsInProgress().indexOf(u)>=0?"A dataset with this name is being uploaded.":
/^\s*$/.test(u)?"A dataset name must be provided.":/[:\/#\?\\]/.test(u)?"The dataset name contains invalid characters. The following characters are not allowed: / \\ ? : #":
u.length>i.maxDatasetNameLength?"The dataset name may contain at most "+i.maxDatasetNameLength+
" characters.":null});this.dataType=n.Validation.validatableObservable(null,function(
n){return n?null:"Select a data type for the new dataset."});this.datasetToDeprecate=
n.Validation.validatableObservable(null,function(n){return n?null:"Select dataset to deprecate."}
);this.availableDatasets=ko.observable(n.Util.map(n.Util.filter(t.datasetCache.items(
),function(n){return n.isLatest()&&n.id.lastIndexOf(t.id,0)===0}),function(n){return n.
name()}).sort());this.updateAvailableDatasets.registerForDisposal(new n.Util.DisposableSubscription(
this.workspace.datasetUploadsInProgress.subscribe(function(){r.availableDatasets(
n.Util.map(n.Util.filter(t.datasetCache.items(),function(n){return n.isLatest()&&
n.id.lastIndexOf(t.id,0)===0}),function(n){return n.name()}).sort())})));this.datasetToDeprecate.
subscribe(function(i){var u=n.Util.first(t.datasetCache.items(),function(n){return n.
name()===i&&n.isLatest()&&n.id.lastIndexOf(t.id,0)===0},null);r.description(u?u.
description():"");r.dataType(u?u.dataType:null);r._familyId(u?u.familyId:null);r.
hint(!1)});this.deprecate.subscribe(function(){r.hint(!1)});this.familyId=ko.computed(
function(){return r.deprecate()&&r._familyId()?r._familyId().split(".")[1]:null}
);this.name=ko.computed({read:function(){return r.deprecate()?r.datasetToDeprecate(
):r._name()},write:function(n){r._name(n)}})}return t.prototype.isValid=function(
){return this._name.isValid()&&!this.deprecate()||this.datasetToDeprecate.isValid(
)&&this.deprecate()},t.prototype.startValidating=function(){this._name.startValidating(
);this.datasetToDeprecate.startValidating()},t}();t.UnsavedDataset=r})(t=n.Model||
(n.Model={}))}(DataLab||(DataLab={})),function(n){var t;(function(t){var i,r;(function(
n){n.maxResourceNameLength=100})(i=t.Constants||(t.Constants={}));r=function(){function t(
t,r,u,f){var e=this;this.description=ko.observable();this.workspace=t;this.deprecate=
ko.observable(!1);this._familyId=ko.observable("");this.hint=ko.observable(!1);this.
updateAvailableResources=new n.Util.Disposable;this._resourceCache=r;this._name=
n.Validation.validatableObservable("",function(t){return n.Util.first(r.items(),
function(n){return n.name()===t},!1)?"A "+f+" with this name already exists.":u(
).indexOf(t)>=0?"A "+f+" with this name is being uploaded.":/^\s*$/.test(t)?"A "+
f+" name must be provided.":/[:\/#\?\\]/.test(t)?"The "+f+" name contains invalid characters. The following characters are not allowed: / \\ ? : #":
t.length>i.maxResourceNameLength?"The "+f+" name may contain at most "+i.maxResourceNameLength+
" characters.":null});this.dataType=n.Validation.validatableObservable(null,function(
n){return n?null:"Select a data type for the new "+f+"."});this.resourceToDeprecate=
n.Validation.validatableObservable(null,function(n){return n?null:"Select "+f+" to deprecate."}
);this.availableResources=ko.observable(n.Util.map(n.Util.filter(this._resourceCache.
items(),function(n){return e.isLatestLocal(n,e.workspace)}),function(n){return n.
name()}));this.updateAvailableResources.registerForDisposal(new n.Util.DisposableSubscription(
u.subscribe(function(){e.availableResources(n.Util.map(n.Util.filter(e._resourceCache.
items(),function(n){return e.isLatestLocal(n,e.workspace)}),function(n){return n.
name()}))})));this.resourceToDeprecate.subscribe(function(t){var i=n.Util.first(
e._resourceCache.items(),function(n){return n.name()===t&&e.isLatestLocal(n,e.workspace)}
,null);e.description(i?i.description():"");e.dataType(i?i.dataType:null);e._familyId(
i?i.familyId:null);e.hint(!1)});this.deprecate.subscribe(function(){e.hint(!1)});
this.familyId=ko.computed(function(){return e.deprecate()&&e._familyId()?e._familyId(
).split(".")[1]:null});this.name=ko.computed({read:function(){return e.deprecate(
)?e.resourceToDeprecate():e._name()},write:function(n){e._name(n)}})}return t.prototype.
isValid=function(){return this._name.isValid()&&!this.deprecate()||this.resourceToDeprecate.
isValid()&&this.deprecate()},t.prototype.startValidating=function(){this._name.startValidating(
);this.resourceToDeprecate.startValidating()},t.prototype.isLatestLocal=function(
n,t){return n.isLatest()&&n.id.lastIndexOf(t.id,0)===0},t}();t.UnsavedResource=r}
)(t=n.Model||(n.Model={}))}(DataLab||(DataLab={})),function(n){var t;(function(n)
{(function(n){n[n.Training="Training"]="Training";n[n.Scoring="Scoring"]="Scoring";
n[n.Computing="Computing"]="Computing"})(n.ExperimentRole||(n.ExperimentRole={})
);var t=n.ExperimentRole})(t=n.DataContract||(n.DataContract={}))}(DataLab||(DataLab=
{}));d3=function(){function gf(n){return null!=n&&!isNaN(n)}function ow(n){return n.
length}function sw(n){for(var t=1;n*t%1;)t*=10;return t}function ic(n,t){try{for(
var i in t)Object.defineProperty(n.prototype,i,{value:t[i],enumerable:!1})}catch(r)
{n.prototype=t}}function it(){}function ne(){}function hw(n,t,i){return function(
){var r=i.apply(t,arguments);return r===t?n:r}}function te(n,t){var i,u,r;if(t in
n)return t;for(t=t.charAt(0).toUpperCase()+t.substring(1),i=0,u=bs.length;u>i;++i)
if(r=bs[i]+t,r in n)return r}function cw(n){for(var t=-1,r=n.length,i=[];++t<r;)
i.push(n[t]);return i}function lw(n){return Array.prototype.slice.call(n)}function s(
){}function ie(){}function rc(n){function r(){for(var i,r=t,u=-1,f=r.length;++u<
f;)(i=r[u].on)&&i.apply(this,arguments);return n}var t=[],i=new it;return r.on=function(
r,u){var e,f=i.get(r);return arguments.length<2?f&&f.on:(f&&(f.on=null,t=t.slice(
0,e=t.indexOf(f)).concat(t.slice(e+1)),i.remove(r)),u&&t.push(i.set(r,{on:u})),n)
},r}function lt(){n.event.preventDefault()}function uc(){for(var i,t=n.event;i=t.
sourceEvent;)t=i;return t}function re(t){for(var i=new ie,r=0,u=arguments.length;
++r<u;)i[arguments[r]]=rc(i);return i.of=function(r,u){return function(f){try{var
e=f.sourceEvent=n.event;f.target=t;n.event=f;i[f.type].apply(r,u)}finally{n.event=
e}}},i}function at(n){return au(n,u),n}function ue(n){return"function"==typeof n?
n:function(){return ks(n,this)}}function fc(n){return"function"==typeof n?n:function(
){return ds(n,this)}}function ec(t,i){function r(){this.removeAttribute(t)}function u(
){this.removeAttributeNS(t.space,t.local)}function f(){this.setAttribute(t,i)}function e(
){this.setAttributeNS(t.space,t.local,i)}function o(){var n=i.apply(this,arguments);
null==n?this.removeAttribute(t):this.setAttribute(t,n)}function s(){var n=i.apply(
this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(
t.space,t.local,n)}return t=n.ns.qualify(t),null==i?t.local?u:r:"function"==typeof
i?t.local?s:o:t.local?e:f}function oc(n){return n.trim().replace(/\s+/g," ")}function sc(
t){return new RegExp("(?:^|\\s+)"+n.requote(t)+"(?:\\s+|$)","g")}function hc(n,t)
{function r(){for(var r=-1;++r<i;)n[r](this,t)}function u(){for(var r=-1,u=t.apply(
this,arguments);++r<i;)n[r](this,u)}n=n.trim().split(/\s+/).map(aw);var i=n.length;
return"function"==typeof t?u:r}function aw(n){var t=sc(n);return function(i,r){if(
u=i.classList)return r?u.add(n):u.remove(n);var u=i.getAttribute("class")||"";r?
(t.lastIndex=0,t.test(u)||i.setAttribute("class",oc(u+" "+n))):i.setAttribute("class",
oc(u.replace(t," ")))}}function cc(n,t,i){function r(){this.style.removeProperty(
n)}function u(){this.style.setProperty(n,t,i)}function f(){var r=t.apply(this,arguments);
null==r?this.style.removeProperty(n):this.style.setProperty(n,r,i)}return null==
t?r:"function"==typeof t?f:u}function lc(n,t){function i(){delete this[n]}function r(
){this[n]=t}function u(){var i=t.apply(this,arguments);null==i?delete this[n]:this[
n]=i}return null==t?i:"function"==typeof t?u:r}function ac(t){return"function"==
typeof t?t:(t=n.ns.qualify(t)).local?function(){return b.createElementNS(t.space,
t.local)}:function(){return b.createElementNS(this.namespaceURI,t)}}function fe(
n){return{__data__:n}}function vc(n){return function(){return py(this,n)}}function vw(
t){return arguments.length||(t=n.ascending),function(n,i){return!n-!i||t(n.__data__,
i.__data__)}}function vt(n,t){for(var i=0,u=n.length;u>i;i++)for(var f,e=n[i],r=
0,o=e.length;o>r;r++)(f=e[r])&&t(f,r,i);return n}function yc(n){return au(n,nt),
n}function yw(n){var t,i;return function(r,u,f){var e,o=n[f].update,s=o.length;for(
f!=i&&(i=f,t=0),u>=t&&(t=u+1);!(e=o[t])&&++t<s;);return e}}function pc(t,i,r){function o(
){var n=this[u];n&&(this.removeEventListener(t,n,n.$),delete this[u])}function c(
){var n=h(i,st(arguments));o.call(this);this.addEventListener(t,this[u]=n,n.$=r);
n._=i}function l(){var u,f=new RegExp("^__on([^.]+)"+n.requote(t)+"$"),i,r;for(i
in this)(u=i.match(f))&&(r=this[i],this.removeEventListener(u[1],r,r.$),delete this[
i])}var u="__on"+t,f=t.indexOf("."),h=wc,e;return f>0&&(t=t.substring(0,f)),e=yu.
get(t),e&&(t=e,h=pw),f?i?c:o:i?s:l}function wc(t,i){return function(r){var u=n.event;
n.event=r;i[0]=this.__data__;try{t.apply(this,i)}finally{n.event=u}}}function pw(
n,t){var i=wc(n,t);return function(n){var t=this,r=n.relatedTarget;r&&(r===t||8&
r.compareDocumentPosition(t))||i.call(t,n)}}function ar(){var t=".dragsuppress-"+
++wy,f="touchmove"+t,e="selectstart"+t,o="dragstart"+t,u="click"+t,i=n.select(c).
on(f,lt).on(e,lt).on(o,lt),r=pt.style,s=r[pu];return r[pu]="none",function(n){function f(
){i.on(u,null)}i.on(t,null);r[pu]=s;n&&(i.on(u,function(){lt();f()},!0),setTimeout(
f,0))}}function bc(t,i){var u=t.ownerSVGElement||t,r,f,e;return u.createSVGPoint?
(r=u.createSVGPoint(),0>wu&&(c.scrollX||c.scrollY)&&(u=n.select("body").append("svg").
style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),
f=u[0][0].getScreenCTM(),wu=!(f.f||f.e),u.remove()),wu?(r.x=i.pageX,r.y=i.pageY)
:(r.x=i.clientX,r.y=i.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[
r.x,r.y]):(e=t.getBoundingClientRect(),[i.clientX-e.left-t.clientLeft,i.clientY-
e.top-t.clientTop])}function ai(){}function vi(n,t,i){return new ee(n,t,i)}function ee(
n,t,i){this.h=n;this.s=t;this.l=i}function oe(n,t,i){function e(n){return n>360?
n-=360:0>n&&(n+=360),60>n?r+(u-r)*n/60:180>n?u:240>n?r+(u-r)*(240-n)/60:r}function f(
n){return Math.round(255*e(n))}var r,u;return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=
isNaN(t)?0:0>t?0:t>1?1:t,i=0>i?0:i>1?1:i,u=.5>=i?i*(1+t):i+t-i*t,r=2*i-u,rt(f(n+
120),f(n),f(n-120))}function kc(n){return n>0?1:0>n?-1:0}function dc(n){return n>
1?0:-1>n?t:Math.acos(n)}function ii(n){return n>1?t/2:-1>n?-t/2:Math.asin(n)}function ww(
n){return(Math.exp(n)-Math.exp(-n))/2}function bw(n){return(Math.exp(n)+Math.exp(
-n))/2}function gc(n){return(n=Math.sin(n/2))*n}function yi(n,t,i){return new vr(
n,t,i)}function vr(n,t,i){this.h=n;this.c=t;this.l=i}function nl(n,t,i){return isNaN(
n)&&(n=0),isNaN(t)&&(t=0),pi(i,Math.cos(n*=r)*t,Math.sin(n)*t)}function pi(n,t,i)
{return new yr(n,t,i)}function yr(n,t,i){this.l=n;this.a=t;this.b=i}function kw(
n,t,i){var r=(n+16)/116,u=r+t/500,f=r-i/200;return u=se(u)*dy,r=se(r)*gy,f=se(f)*
np,rt(ce(3.2404542*u-1.5371385*r-.4985314*f),ce(-.969266*u+1.8760108*r+.041556*f),
ce(.0556434*u-.2040259*r+1.0572252*f))}function tl(n,t,i){return n>0?yi(Math.atan2(
i,t)*e,Math.sqrt(t*t+i*i),n):yi(NaN,NaN,n)}function se(n){return n>.206893034?n*
n*n:(n-4/29)/7.787037}function he(n){return n>.008856?Math.pow(n,1/3):7.787037*n+
4/29}function ce(n){return Math.round(255*(.00304>=n?12.92*n:1.055*Math.pow(n,1/
2.4)-.055))}function rt(n,t,i){return new le(n,t,i)}function le(n,t,i){this.r=n;
this.g=t;this.b=i}function ae(n){return 16>n?"0"+Math.max(0,n).toString(16):Math.
min(255,n).toString(16)}function ve(n,t,i){var s,r,o,u=0,f=0,e=0;if(s=/([a-z]+)\((.*)\)/i.
exec(n))switch(r=s[2].split(","),s[1]){case"hsl":return i(parseFloat(r[0]),parseFloat(
r[1])/100,parseFloat(r[2])/100);case"rgb":return t(pe(r[0]),pe(r[1]),pe(r[2]))}return(o=
er.get(n))?t(o.r,o.g,o.b):(null!=n&&"#"===n.charAt(0)&&(4===n.length?(u=n.charAt(
1),u+=u,f=n.charAt(2),f+=f,e=n.charAt(3),e+=e):7===n.length&&(u=n.substring(1,3),
f=n.substring(3,5),e=n.substring(5,7)),u=parseInt(u,16),f=parseInt(f,16),e=parseInt(
e,16)),t(u,f,e))}function il(n,t,i){var f,s,e=Math.min(n/=255,t/=255,i/=255),r=Math.
max(n,t,i),u=r-e,o=(r+e)/2;return u?(s=.5>o?u/(r+e):u/(2-r-e),f=n==r?(t-i)/u+(i>
t?6:0):t==r?(i-n)/u+2:(n-t)/u+4,f*=60):(f=NaN,s=o>0&&1>o?0:f),vi(f,s,o)}function rl(
n,t,i){n=ye(n);t=ye(t);i=ye(i);var u=he((.4124564*n+.3575761*t+.1804375*i)/dy),r=
he((.2126729*n+.7151522*t+.072175*i)/gy),f=he((.0193339*n+.119192*t+.9503041*i)/
np);return pi(116*r-16,500*(u-r),200*(r-f))}function ye(n){return(n/=255)<=.04045?
n/12.92:Math.pow((n+.055)/1.055,2.4)}function pe(n){var t=parseFloat(n);return"%"===
n.charAt(n.length-1)?Math.round(2.55*t):t}function f(n){return"function"==typeof
n?n:function(){return n}}function a(n){return n}function we(n){return function(t,
i,r){return 2===arguments.length&&"function"==typeof i&&(r=i,i=null),be(t,i,n,r)}
}function be(t,i,r,u){function l(){var t,n=e.status;if(!n&&e.responseText||n>=200&&
300>n||304===n){try{t=r.call(f,e)}catch(i){return s.error.call(f,i),void 0}s.load.
call(f,t)}else s.error.call(f,e)}var f={},s=n.dispatch("progress","load","error"),
o={},e=new XMLHttpRequest,h=null;return!c.XDomainRequest||"withCredentials"in e||
!/^(http(s)?:)?\/\//.test(t)||(e=new XDomainRequest),"onload"in e?e.onload=e.onerror=
l:e.onreadystatechange=function(){e.readyState>3&&l()},e.onprogress=function(t){
var i=n.event;n.event=t;try{s.progress.call(f,e)}finally{n.event=i}},f.header=function(
n,t){return n=(n+"").toLowerCase(),arguments.length<2?o[n]:(null==t?delete o[n]:
o[n]=t+"",f)},f.mimeType=function(n){return arguments.length?(i=null==n?null:n+"",
f):i},f.responseType=function(n){return arguments.length?(h=n,f):h},f.response=function(
n){return r=n,f},["get","post"].forEach(function(n){f[n]=function(){return f.send.
apply(f,[n].concat(st(arguments)))}}),f.send=function(n,r,u){if(2===arguments.length&&
"function"==typeof r&&(u=r,r=null),e.open(n,t,!0),null==i||"accept"in o||(o.accept=
i+",*/*"),e.setRequestHeader)for(var s in o)e.setRequestHeader(s,o[s]);return null!=
i&&e.overrideMimeType&&e.overrideMimeType(i),null!=h&&(e.responseType=h),null!=u&&
f.on("error",u).on("load",function(n){u(null,n)}),e.send(null==r?null:r),f},f.abort=
function(){return e.abort(),f},n.rebind(f,s,"on"),null==u?f:f.get(dw(u))}function dw(
n){return 1===n.length?function(t,i){n(null==t?i:null)}:n}function ke(){var t=ul(
),n=fl()-t;n>24?(isFinite(n)&&(clearTimeout(uf),uf=setTimeout(ke,n)),rf=0):(rf=1,
tp(ke))}function ul(){for(var t=Date.now(),n=nf;n;)t>=n.time&&(n.flush=n.callback(
t-n.time)),n=n.next;return t}function fl(){for(var t,n=nf,i=1/0;n;)n.flush?n=t?t.
next=n.next:nf=n.next:(n.time<i&&(i=n.time),n=(t=n).next);return tf=t,i}function gw(
n,t){var i=Math.pow(10,3*Math.abs(8-t));return{scale:t>8?function(n){return n/i}
:function(n){return n*i},symbol:n}}function de(n,t){return t-(n?Math.ceil(Math.log(
n)/Math.LN10):1)}function nb(n){return n+""}function ge(){}function el(n,t,i){var
r=i.s=n+t,u=r-n,f=r-u;i.t=n-f+(t-u)}function pr(n,t){n&&uh.hasOwnProperty(n.type)&&
uh[n.type](n,t)}function no(n,t,i){var r,u=-1,f=n.length-i;for(t.lineStart();++u<
f;)r=n[u],t.point(r[0],r[1]);t.lineEnd()}function ol(n,t){var i=-1,r=n.length;for(
t.polygonStart();++i<r;)no(n[i],t,1);t.polygonEnd()}function tb(){function f(f,e)
{f*=r;e=e*r/2+t/4;var o=f-n,s=Math.cos(e),h=Math.sin(e),c=u*h,l=i*s+c*Math.cos(o),
a=c*Math.sin(o);wt.add(Math.atan2(a,l));n=f;i=s;u=h}var e,o,n,i,u;y.point=function(
s,h){y.point=f;n=(e=s)*r;i=Math.cos(h=(o=h)*r/2+t/4);u=Math.sin(h)};y.lineEnd=function(
){f(e,o)}}function ri(n){var t=n[0],i=n[1],r=Math.cos(i);return[r*Math.cos(t),r*
Math.sin(t),Math.sin(i)]}function wr(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function wi(
n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function to(
n,t){n[0]+=t[0];n[1]+=t[1];n[2]+=t[2]}function br(n,t){return[n[0]*t,n[1]*t,n[2]*
t]}function kr(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t;n[1]/=t;
n[2]/=t}function dr(n){return[Math.atan2(n[1],n[0]),ii(n[2])]}function gr(n,t){return Math.
abs(n[0]-t[0])<i&&Math.abs(n[1]-t[1])<i}function io(n,t){n*=r;var i=Math.cos(t*=
r);di(i*Math.cos(n),i*Math.sin(n),Math.sin(t))}function di(n,t,i){++sr;hi+=(n-hi)
/sr;ci+=(t-ci)/sr;ht+=(i-ht)/sr}function sl(){function u(u,f){u*=r;var c=Math.cos(
f*=r),o=c*Math.cos(u),s=c*Math.sin(u),h=Math.sin(f),e=Math.atan2(Math.sqrt((e=t*
h-i*s)*e+(e=i*o-n*h)*e+(e=n*s-t*o)*e),n*o+t*s+i*h);of+=e;bt+=e*(n+(n=o));kt+=e*(t+
(t=s));tt+=e*(i+(i=h));di(n,t,i)}var n,t,i;k.point=function(f,e){f*=r;var o=Math.
cos(e*=r);n=o*Math.cos(f);t=o*Math.sin(f);i=Math.sin(e);k.point=u;di(n,t,i)}}function hl(
){k.point=io}function ib(){function u(u,f){u*=r;var p=Math.cos(f*=r),e=p*Math.cos(
u),o=p*Math.sin(u),s=Math.sin(f),c=t*s-i*o,l=i*e-n*s,a=n*o-t*e,v=Math.sqrt(c*c+l*
l+a*a),w=n*e+t*o+i*s,y=v&&-dc(w)/v,h=Math.atan2(v,w);bi+=y*c;ki+=y*l;dt+=y*a;of+=
h;bt+=h*(n+(n=e));kt+=h*(t+(t=o));tt+=h*(i+(i=s));di(n,t,i)}var f,e,n,t,i;k.point=
function(o,s){f=o;e=s;k.point=u;o*=r;var h=Math.cos(s*=r);n=h*Math.cos(o);t=h*Math.
sin(o);i=Math.sin(s);di(n,t,i)};k.lineEnd=function(){u(f,e);k.lineEnd=hl;k.point=
io}}function gi(){return!0}function cl(n,t,i,r,u){var h=[],o=[],f,s,c,l,e;if(n.forEach(
function(n){var s,i,r,e,t,f;if(!((s=n.length-1)<=0)){if(i=n[0],r=n[s],gr(i,r)){for(
u.lineStart(),e=0;s>e;++e)u.point((i=n[e])[0],i[1]);return u.lineEnd(),void 0}t=
{point:i,points:n,other:null,visited:!1,entry:!0,subject:!0};f={point:i,points:[
i],other:t,visited:!1,entry:!1,subject:!1};t.other=f;h.push(t);o.push(f);t={point:
r,points:[r],other:null,visited:!1,entry:!1,subject:!0};f={point:r,points:[r],other:
t,visited:!1,entry:!0,subject:!1};t.other=f;h.push(t);o.push(f)}}),o.sort(t),ll(
h),ll(o),h.length){if(i)for(var e=1,a=!i(o[0].point),v=o.length;v>e;++e)o[e].entry=
a=!a;for(l=h[0];;){for(f=l;f.visited;)if((f=f.next)===l)return;s=f.points;u.lineStart(
);do{if(f.visited=f.other.visited=!0,f.entry){if(f.subject)for(e=0;e<s.length;e++)
u.point((c=s[e])[0],c[1]);else r(f.point,f.next.point,1,u);f=f.next}else{if(f.subject)
for(s=f.prev.points,e=s.length;--e>=0;)u.point((c=s[e])[0],c[1]);else r(f.point,
f.prev.point,-1,u);f=f.prev}f=f.other;s=f.points}while(!f.visited);u.lineEnd()}}
}function ll(n){if(r=n.length){for(var r,t,u=0,i=n[0];++u<r;)i.next=t=n[u],t.prev=
i,i=t;i.next=t=n[0];t.prev=i}}function al(t,i,r,u){return function(f){function l(
n,i){t(n,i)&&f.point(n,i)}function b(n,t){a.point(n,t)}function v(){e.point=b;a.
lineStart()}function y(){e.point=l;a.lineEnd()}function p(n,t){c.point(n,t);s.push(
[n,t])}function k(){c.lineStart();s=[]}function d(){var e,t,r;p(s[0][0],s[0][1]);
c.lineEnd();var i,u=c.clean(),n=w.buffer(),t=n.length;if(s.pop(),h.push(s),s=null,
t){if(1&u){for(i=n[0],t=i.length-1,r=-1,f.lineStart();++r<t;)f.point((e=i[r])[0],
e[1]);return f.lineEnd(),void 0}t>1&&2&u&&n.push(n.pop().concat(n.shift()));o.push(
n.filter(rb))}}var o,h,s,a=i(f),e={point:l,lineStart:v,lineEnd:y,polygonStart:function(
){e.point=p;e.lineStart=k;e.lineEnd=d;o=[];h=[];f.polygonStart()},polygonEnd:function(
){e.point=l;e.lineStart=v;e.lineEnd=y;o=n.merge(o);o.length?cl(o,ub,null,r,f):u(
h)&&(f.lineStart(),r(null,null,1,f),f.lineEnd());f.polygonEnd();o=h=null},sphere:
function(){f.polygonStart();f.lineStart();r(null,null,1,f);f.lineEnd();f.polygonEnd(
)}},w=vl(),c=i(w);return e}}function rb(n){return n.length>1}function vl(){var t,
n=[];return{lineStart:function(){n.push(t=[])},point:function(n,i){t.push([n,i])}
,lineEnd:s,buffer:function(){var i=n;return n=[],t=null,i},rejoin:function(){n.length>
1&&n.push(n.pop().concat(n.shift()))}}}function ub(n,r){return((n=n.point)[0]<0?
n[1]-t/2-i:t/2-n[1])-((r=r.point)[0]<0?r[1]-t/2-i:t/2-r[1])}function yl(n,r){var
f=n[0],st=n[1],ht=[Math.sin(f),-Math.cos(f),0],l=0,k=!1,d=!1,g=0,e,nt,o,a,w,b,ot;
for(wt.reset(),e=0,nt=r.length;nt>e;++e)if(o=r[e],a=o.length,a){for(var s=o[0],v=
s[0],tt=s[1]/2+t/4,it=Math.sin(tt),rt=Math.cos(tt),h=1;;){h===a&&(h=0);n=o[h];var
y=n[0],p=n[1]/2+t/4,ut=Math.sin(p),ft=Math.cos(p),u=y-v,c=Math.abs(u)>t,et=it*ut;
if((wt.add(Math.atan2(et*Math.sin(u),rt*ft+et*Math.cos(u))),Math.abs(p)<i&&(d=!0)
,l+=c?u+(u>=0?2:-2)*t:u,c^v>=f^y>=f)&&(w=wi(ri(s),ri(n)),kr(w),b=wi(ht,w),kr(b),
ot=(c^u>=0?-1:1)*ii(b[2]),st>ot&&(g+=c^u>=0?1:-1)),!h++)break;v=y;it=ut;rt=ft;s=
n}Math.abs(l)>i&&(k=!0)}return(!d&&!k&&0>wt||-i>l)^1&g}function fb(n){var e,u=NaN,
r=NaN,f=NaN;return{lineStart:function(){n.lineStart();e=1},point:function(o,s){var
h=o>0?t:-t,c=Math.abs(o-u);Math.abs(c-t)<i?(n.point(u,r=(r+s)/2>0?t/2:-t/2),n.point(
f,r),n.lineEnd(),n.lineStart(),n.point(h,r),n.point(o,r),e=0):f!==h&&c>=t&&(Math.
abs(u-f)<i&&(u-=f*i),Math.abs(o-h)<i&&(o-=h*i),r=eb(u,r,o,s),n.point(f,r),n.lineEnd(
),n.lineStart(),n.point(h,r),e=0);n.point(u=o,r=s);f=h},lineEnd:function(){n.lineEnd(
);u=r=NaN},clean:function(){return 2-e}}}function eb(n,t,r,u){var f,e,o=Math.sin(
n-r);return Math.abs(o)>i?Math.atan((Math.sin(t)*(e=Math.cos(u))*Math.sin(r)-Math.
sin(u)*(f=Math.cos(t))*Math.sin(n))/(f*e*o)):(t+u)/2}function ob(n,r,u,f){var e,
o;null==n?(e=u*t/2,f.point(-t,e),f.point(0,e),f.point(t,e),f.point(t,0),f.point(
t,-e),f.point(0,-e),f.point(-t,-e),f.point(-t,0),f.point(-t,e)):Math.abs(n[0]-r[
0])>i?(o=(n[0]<r[0]?1:-1)*t,e=u*o/2,f.point(-o,e),f.point(0,e),f.point(o,e)):f.point(
r[0],r[1])}function sb(n){return yl(iit,n)}function hb(n){function o(n,t){return Math.
cos(n)*Math.cos(t)>u}function h(n){var r,l,u,c,h;return{lineStart:function(){c=u=
!1;h=1},point:function(v,y){var w,p=[v,y],b=o(v,y),d=e?b?0:s(v,y):b?s(v+(0>v?t:-t)
,y):0,k;(!r&&(c=u=b)&&n.lineStart(),b!==u&&(w=f(r,p),(gr(r,w)||gr(p,w))&&(p[0]+=
i,p[1]+=i,b=o(p[0],p[1]))),b!==u)?(h=0,b?(n.lineStart(),w=f(p,r),n.point(w[0],w[
1])):(w=f(r,p),n.point(w[0],w[1]),n.lineEnd()),r=w):a&&r&&e^b&&(d&l||!(k=f(p,r,!0))
||(h=0,e?(n.lineStart(),n.point(k[0][0],k[0][1]),n.point(k[1][0],k[1][1]),n.lineEnd(
)):(n.point(k[1][0],k[1][1]),n.lineEnd(),n.lineStart(),n.point(k[0][0],k[0][1]))
));!b||r&&gr(r,p)||n.point(p[0],p[1]);r=p;u=b;l=d},lineEnd:function(){u&&n.lineEnd(
);r=null},clean:function(){return h|(c&&u)<<1}}}function f(n,r,f){var ft=ri(n),et=
ri(r),it=[1,0,0],l=wi(ft,et),rt=wr(l,l),w=l[0],b=rt-w*w,d,e,tt;if(!b)return!f&&n;
var ot=u*rt/b,st=-u*w/b,ht=wi(it,l),o=br(it,ot),ct=br(l,st);to(o,ct);var a=ht,y=
wr(o,a),k=wr(a,a),ut=y*y-k*(wr(o,o)-1);if(!(0>ut)){if(d=Math.sqrt(ut),e=br(a,(-y-
d)/k),to(e,o),e=dr(e),!f)return e;var p,s=n[0],v=r[0],h=n[1],c=r[1];s>v&&(p=s,s=
v,v=p);var g=v-s,nt=Math.abs(g-t)<i,lt=nt||i>g;if(!nt&&h>c&&(p=h,h=c,c=p),lt?nt?
h+c>0^e[1]<(Math.abs(e[0]-s)<i?h:c):h<=e[1]&&e[1]<=c:g>t^(s<=e[0]&&e[0]<=v))return tt=
br(a,(-y+d)/k),to(tt,o),[e,dr(tt)]}}function s(i,r){var f=e?n:t-n,u=0;return-f>i?
u|=1:i>f&&(u|=2),-f>r?u|=4:r>f&&(u|=8),u}function c(n){return yl(l,n)}var u=Math.
cos(n),e=u>0,l=[n,0],a=Math.abs(u)>i,v=eo(n,6*r);return al(o,h,v,c)}function cb(
t,r,u,f){function e(n,f){return Math.abs(n[0]-t)<i?f>0?0:3:Math.abs(n[0]-u)<i?f>
0?2:1:Math.abs(n[1]-r)<i?f>0?1:0:f>0?3:2}function s(n,t){return o(n.point,t.point)}
function o(n,t){var i=e(n,1),r=e(t,1);return i!==r?i-r:0===i?t[1]-n[1]:1===i?n[0]-
t[0]:2===i?n[1]-t[1]:t[0]-n[0]}function h(n,e){var s=e[0]-n[0],h=e[1]-n[1],o=[0,
1];return Math.abs(s)<i&&Math.abs(h)<i?t<=n[0]&&n[0]<=u&&r<=n[1]&&n[1]<=f:nu(t-n[
0],s,o)&&nu(n[0]-u,-s,o)&&nu(r-n[1],h,o)&&nu(n[1]-f,-h,o)?(o[1]<1&&(e[0]=n[0]+o[
1]*s,e[1]=n[1]+o[1]*h),o[0]>0&&(n[0]+=o[0]*s,n[1]+=o[0]*h),!0):!1}return function(
i){function ot(n){var i=e(n,-1);return d([0===i||3===i?t:u,i>1?f:r])}function d(
n){for(var r=0,s=l.length,u=n[1],f=0;s>f;++f)for(var t,e=1,o=l[f],h=o.length,i=o[
0];h>e;++e)t=o[e],i[1]<=u?t[1]>u&&g(i,t,n)>0&&++r:t[1]<=u&&g(i,t,n)<0&&--r,i=t;return 0!==
r}function g(n,t,i){return(t[0]-n[0])*(i[1]-n[1])-(i[0]-n[0])*(t[1]-n[1])}function nt(
n,i,s,h){var c=0,l=0;if(null==n||(c=e(n,s))!==(l=e(i,s))||o(n,i)<0^s>0){do h.point(
0===c||3===c?t:u,c>1?f:r);while((c=(c+s+4)%4)!==l)}else h.point(i[0],i[1])}function tt(
n,i){return n>=t&&u>=n&&i>=r&&f>=i}function it(n,t){tt(n,t)&&i.point(n,t)}function st(
){k.point=rt;l&&l.push(v=[]);w=!0;a=!1;y=p=NaN}function ht(){c&&(rt(ut,ft),et&&a&&
b.rejoin(),c.push(b.buffer()));k.point=it;a&&i.lineEnd()}function rt(n,t){var r,
u,f;n=Math.max(-sf,Math.min(sf,n));t=Math.max(-sf,Math.min(sf,t));r=tt(n,t);(l&&
v.push([n,t]),w)?(ut=n,ft=t,et=r,w=!1,r&&(i.lineStart(),i.point(n,t))):r&&a?i.point(
n,t):(u=[y,p],f=[n,t],h(u,f)?(a||(i.lineStart(),i.point(u[0],u[1])),i.point(f[0],
f[1]),r||i.lineEnd()):r&&(i.lineStart(),i.point(n,t)));y=n;p=t;a=r}var c,l,v,ut,
ft,et,y,p,a,w,ct=i,b=vl(),k={point:it,lineStart:st,lineEnd:ht,polygonStart:function(
){i=b;c=[];l=[]},polygonEnd:function(){i=ct;(c=n.merge(c)).length?(i.polygonStart(
),cl(c,s,ot,nt,i),i.polygonEnd()):d([t,r])&&(i.polygonStart(),i.lineStart(),nt(null,
null,1,i),i.lineEnd(),i.polygonEnd());c=l=v=null}};return k}}function nu(n,t,r){
if(Math.abs(t)<i)return 0>=n;var u=n/t;if(t>0){if(u>r[1])return!1;u>r[0]&&(r[0]=
u)}else{if(u<r[0])return!1;u<r[1]&&(r[1]=u)}return!0}function pl(n,t){function i(
i,r){return i=n(i,r),t(i[0],i[1])}return n.invert&&t.invert&&(i.invert=function(
i,r){return i=t.invert(i,r),i&&n.invert(i[0],i[1])}),i}function ro(n){var i=0,r=
t/3,u=uo(n),f=u(i,r);return f.parallels=function(n){return arguments.length?u(i=
n[0]*t/180,r=n[1]*t/180):[180*(i/t),180*(r/t)]},f}function wl(n,t){function f(n,
t){var r=Math.sqrt(u-2*i*Math.sin(t))/i;return[r*Math.sin(n*=i),e-r*Math.cos(n)]}
var r=Math.sin(n),i=(r+Math.sin(t))/2,u=1+r*(2*i-r),e=Math.sqrt(u)/i;return f.invert=
function(n,t){var r=e-t;return[Math.atan2(n,r)/i,ii((u-(n*n+r*r)*i*i)/(2*i))]},f}
function lb(){function i(i,r){eh+=t*i-n*r;n=i;t=r}var r,u,n,t;gt.point=function(
f,e){gt.point=i;r=n=f;u=t=e};gt.lineEnd=function(){i(r,u)}}function ab(n,t){hf>n&&
(hf=n);n>lf&&(lf=n);cf>t&&(cf=t);t>af&&(af=t)}function vb(){function i(n,i){t.push(
"M",n,",",i,u)}function f(i,r){t.push("M",i,",",r);n.point=e}function e(n,i){t.push(
"L",n,",",i)}function r(){n.point=i}function o(){t.push("Z")}var u=bl(4.5),t=[],
n={point:i,lineStart:function(){n.point=f},lineEnd:r,polygonStart:function(){n.lineEnd=
o},polygonEnd:function(){n.lineEnd=r;n.point=i},pointRadius:function(t){return u=
bl(t),n},result:function(){if(t.length){var n=t.join("");return t=[],n}}};return n}
function bl(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+
2*n+"z"}function ui(n,t){hi+=n;ci+=t;++ht}function kl(){function i(i,r){var f=i-
n,e=r-t,u=Math.sqrt(f*f+e*e);bt+=u*(n+i)/2;kt+=u*(t+r)/2;tt+=u;ui(n=i,t=r)}var n,
t;d.point=function(r,u){d.point=i;ui(n=r,t=u)}}function dl(){d.point=ui}function yb(
){function i(i,r){var f=i-n,e=r-t,u=Math.sqrt(f*f+e*e);bt+=u*(n+i)/2;kt+=u*(t+r)
/2;tt+=u;u=t*i-n*r;bi+=u*(n+i);ki+=u*(t+r);dt+=3*u;ui(n=i,t=r)}var r,u,n,t;d.point=
function(f,e){d.point=i;ui(r=n=f,u=t=e)};d.lineEnd=function(){i(r,u)}}function pb(
n){function r(i,r){n.moveTo(i,r);n.arc(i,r,f,0,2*t)}function e(t,r){n.moveTo(t,r);
i.point=o}function o(t,i){n.lineTo(t,i)}function u(){i.point=r}function h(){n.closePath(
)}var f=4.5,i={point:r,lineStart:function(){i.point=e},lineEnd:u,polygonStart:function(
){i.lineEnd=h},polygonEnd:function(){i.lineEnd=u;i.point=r},pointRadius:function(
n){return f=n,i},result:s};return i}function gl(n){function f(i){function y(t,r)
{t=n(t,r);i.point(t[0],t[1])}function c(){u=NaN;r.point=l;i.lineStart()}function l(
r,c){var l=ri([r,c]),a=n(r,c);t(u,f,v,o,s,h,u=a[0],f=a[1],v=r,o=l[0],s=l[1],h=l[
2],e,i);i.point(u,f)}function a(){r.point=y;i.lineEnd()}function nt(){c();r.point=
tt;r.lineEnd=it}function tt(n,t){l(p=n,rt=t);w=u;b=f;k=o;d=s;g=h;r.point=l}function it(
){t(u,f,v,o,s,h,w,b,p,k,d,g,e,i);r.lineEnd=a;a()}var p,rt,w,b,k,d,g,v,u,f,o,s,h,
r={point:y,lineStart:c,lineEnd:a,polygonStart:function(){i.polygonStart();r.lineStart=
nt},polygonEnd:function(){i.polygonEnd();r.lineStart=c}};return r}function t(r,f,
e,s,h,c,l,a,v,y,p,w,b,k){var tt=l-r,it=a-f,ft=tt*tt+it*it;if(ft>4*u&&b--){var g=
s+y,nt=h+p,d=c+w,et=Math.sqrt(g*g+nt*nt+d*d),at=Math.asin(d/=et),ot=Math.abs(Math.
abs(d)-1)<i?(e+v)/2:Math.atan2(nt,g),st=n(ot,at),rt=st[0],ut=st[1],ht=rt-r,ct=ut-
f,lt=it*ht-tt*ct;(lt*lt/ft>u||Math.abs((tt*ht+it*ct)/ft-.5)>.3||o>s*y+h*p+c*w)&&
(t(r,f,e,s,h,c,rt,ut,ot,g/=et,nt/=et,d,b,k),k.point(rt,ut),t(rt,ut,ot,g,nt,d,l,a,
v,y,p,w,b,k))}}var u=.5,o=Math.cos(30*r),e=16;return f.precision=function(n){return arguments.
length?(e=(u=n*n)>0&&16,f):Math.sqrt(u)},f}function wb(n){var t=gl(function(t,i)
{return n([t*e,i*e])});return function(n){return n=t(n),{point:function(t,i){n.point(
t*r,i*r)},sphere:function(){n.sphere()},lineStart:function(){n.lineStart()},lineEnd:
function(){n.lineEnd()},polygonStart:function(){n.polygonStart()},polygonEnd:function(
){n.polygonEnd()}}}}function yt(n){return uo(function(){return n})()}function uo(
t){function i(n){return n=v(n[0]*r,n[1]*r),[n[0]*u+h,c-n[1]*u]}function et(n){return n=
v.invert((n[0]-h)/u,(c-n[1])/u),n&&[n[0]*e,n[1]*e]}function o(){v=pl(tt=fo(k,d,g),
s);var n=s(w,b);return h=y-n[0]*u,c=p+n[1]*u,l()}function l(){return f&&(f.valid=
!1,f=null),i}var s,tt,v,h,c,f,it=gl(function(n,t){return n=s(n,t),[n[0]*u+h,c-n[
1]*u]}),u=150,y=480,p=250,w=0,b=0,k=0,d=0,g=0,rt=up,ut=a,nt=null,ft=null;return i.
stream=function(n){return f&&(f.valid=!1),f=bb(tt,rt(it(ut(n)))),f.valid=!0,f},i.
clipAngle=function(n){return arguments.length?(rt=null==n?(nt=n,up):hb((nt=+n)*r),
l()):nt},i.clipExtent=function(n){return arguments.length?(ft=n,ut=null==n?a:cb(
n[0][0],n[0][1],n[1][0],n[1][1]),l()):ft},i.scale=function(n){return arguments.length?
(u=+n,o()):u},i.translate=function(n){return arguments.length?(y=+n[0],p=+n[1],o(
)):[y,p]},i.center=function(n){return arguments.length?(w=n[0]%360*r,b=n[1]%360*
r,o()):[w*e,b*e]},i.rotate=function(n){return arguments.length?(k=n[0]%360*r,d=n[
1]%360*r,g=n.length>2?n[2]%360*r:0,o()):[k*e,d*e,g*e]},n.rebind(i,it,"precision"),
function(){return s=t.apply(this,arguments),i.invert=s.invert&&et,o()}}function bb(
n,i){return{point:function(u,f){f=n(u*r,f*r);u=f[0];i.point(u>t?u-2*t:-t>u?u+2*t:
u,f[1])},sphere:function(){i.sphere()},lineStart:function(){i.lineStart()},lineEnd:
function(){i.lineEnd()},polygonStart:function(){i.polygonStart()},polygonEnd:function(
){i.polygonEnd()}}}function nr(n,t){return[n,t]}function fo(n,t,i){return n?t||i?
pl(ta(n),ia(t,i)):ta(n):t||i?ia(t,i):nr}function na(n){return function(i,r){return i+=
n,[i>t?i-2*t:-t>i?i+2*t:i,r]}}function ta(n){var t=na(n);return t.invert=na(-n),
t}function ia(n,t){function e(n,t){var e=Math.cos(t),o=Math.cos(n)*e,s=Math.sin(
n)*e,h=Math.sin(t),c=h*i+o*r;return[Math.atan2(s*u-c*f,o*i-h*r),ii(c*u+s*f)]}var
i=Math.cos(n),r=Math.sin(n),u=Math.cos(t),f=Math.sin(t);return e.invert=function(
n,t){var e=Math.cos(t),o=Math.cos(n)*e,s=Math.sin(n)*e,h=Math.sin(t),c=h*u-s*f;return[
Math.atan2(s*u+h*f,o*i+c*r),ii(c*i-o*r)]},e}function eo(n,i){var r=Math.cos(n),u=
Math.sin(n);return function(f,e,o,s){null!=f?(f=ra(r,f),e=ra(r,e),(o>0?e>f:f>e)&&
(f+=2*o*t)):(f=n+2*o*t,e=n);for(var c,l=o*i,h=f;o>0?h>e:e>h;h-=l)s.point((c=dr([
r,-u*Math.cos(h),-u*Math.sin(h)]))[0],c[1])}}function ra(n,t){var r=ri(t),u;return r[
0]-=n,kr(r),u=dc(-r[1]),((-r[2]<0?-u:u)+2*Math.PI-i)%(2*Math.PI)}function ua(t,r,
u){var f=n.range(t,r-i,u).concat(r);return function(n){return f.map(function(t){
return[n,t]})}}function fa(t,r,u){var f=n.range(t,r-i,u).concat(r);return function(
n){return f.map(function(t){return[t,n]})}}function oo(n){return n.source}function so(
n){return n.target}function kb(n,t,i,r){var f=Math.cos(t),c=Math.sin(t),o=Math.cos(
r),l=Math.sin(r),a=f*Math.cos(n),v=f*Math.sin(n),y=o*Math.cos(i),p=o*Math.sin(i),
u=2*Math.asin(Math.sqrt(gc(r-t)+f*o*gc(i-n))),s=1/Math.sin(u),h=u?function(n){var
t=Math.sin(n*=u)*s,i=Math.sin(u-n)*s,r=i*a+t*y,f=i*v+t*p,o=i*c+t*l;return[Math.atan2(
f,r)*e,Math.atan2(o,Math.sqrt(r*r+f*f))*e]}:function(){return[n*e,t*e]};return h.
distance=u,h}function db(){function u(u,f){var s=Math.sin(f*=r),o=Math.cos(f),e=
Math.abs((u*=r)-i),h=Math.cos(e);oh+=Math.atan2(Math.sqrt((e=o*Math.sin(e))*e+(e=
t*s-n*o*h)*e),n*s+t*o*h);i=u;n=s;t=o}var i,n,t;li.point=function(f,e){i=f*r;n=Math.
sin(e*=r);t=Math.cos(e);li.point=u};li.lineEnd=function(){li.point=li.lineEnd=s}
}function tr(n,t){function i(t,i){var f=Math.cos(t),r=Math.cos(i),u=n(f*r);return[
u*r*Math.sin(t),u*Math.sin(i)]}return i.invert=function(n,i){var r=Math.sqrt(n*n+
i*i),u=t(r),f=Math.sin(u),e=Math.cos(u);return[Math.atan2(n*f,r*e),Math.asin(r&&
i*f/r)]},i}function ea(n,r){function o(n,r){var o=Math.abs(Math.abs(r)-t/2)<i?0:
e/Math.pow(f(r),u);return[o*Math.sin(u*n),e-o*Math.cos(u*n)]}var s=Math.cos(n),f=
function(n){return Math.tan(t/4+n/2)},u=n===r?Math.sin(n):Math.log(s/Math.cos(r))/
Math.log(f(r)/f(n)),e=s*Math.pow(f(n),u)/u;return u?(o.invert=function(n,i){var r=
e-i,f=kc(u)*Math.sqrt(n*n+r*r);return[Math.atan2(n,r)/u,2*Math.atan(Math.pow(e/f,
1/u))-t/2]},o):tu}function oa(n,t){function f(n,t){var i=u-t;return[i*Math.sin(r*
n),u-i*Math.cos(r*n)]}var e=Math.cos(n),r=n===t?Math.sin(n):(e-Math.cos(t))/(t-n)
,u=e/r+n;return Math.abs(r)<i?nr:(f.invert=function(n,t){var i=u-t;return[Math.atan2(
n,i)/r,u-kc(r)*Math.sqrt(n*n+i*i)]},f)}function tu(n,i){return[n,Math.log(Math.tan(
t/4+i/2))]}function sa(n){var r,i=yt(n),u=i.scale,f=i.translate,e=i.clipExtent;return i.
scale=function(){var n=u.apply(i,arguments);return n===i?r?i.clipExtent(null):i:
n},i.translate=function(){var n=f.apply(i,arguments);return n===i?r?i.clipExtent(
null):i:n},i.clipExtent=function(n){var h=e.apply(i,arguments),o,s;return h===i?
(r=null==n)&&(o=t*u(),s=f(),e([[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]])):r&&(h=null),h}
,i.clipExtent(null)}function ho(n,t){var i=Math.cos(t)*Math.sin(n);return[Math.log(
(1+i)/(1-i))/2,Math.atan2(Math.tan(t),Math.cos(n))]}function ha(n){function t(t)
{function a(){l.push("M",i(n(s),o))}for(var c,l=[],s=[],h=-1,v=t.length,y=f(r),p=
f(u);++h<v;)e.call(this,c=t[h],h)?s.push([+y.call(this,c,h),+p.call(this,c,h)]):
s.length&&(a(),s=[]);return s.length&&a(),l.length?l.join(""):null}var r=g,u=ut,
e=gi,i=p,s=i.key,o=.7;return t.x=function(n){return arguments.length?(r=n,t):r},
t.y=function(n){return arguments.length?(u=n,t):u},t.defined=function(n){return arguments.
length?(e=n,t):e},t.interpolate=function(n){return arguments.length?(s="function"==
typeof n?i=n:(i=vf.get(n)||p).key,t):s},t.tension=function(n){return arguments.length?
(o=n,t):o},t}function g(n){return n[0]}function ut(n){return n[1]}function p(n){
return n.join("L")}function gb(n){return p(n)+"Z"}function nk(n){for(var r=0,u=n.
length,t=n[0],i=[t[0],",",t[1]];++r<u;)i.push("H",(t[0]+(t=n[r])[0])/2,"V",t[1]);
return u>1&&i.push("H",t[0]),i.join("")}function co(n){for(var i=0,u=n.length,t=
n[0],r=[t[0],",",t[1]];++i<u;)r.push("V",(t=n[i])[1],"H",t[0]);return r.join("")}
function lo(n){for(var i=0,u=n.length,t=n[0],r=[t[0],",",t[1]];++i<u;)r.push("H",
(t=n[i])[0],"V",t[1]);return r.join("")}function tk(n,t){return n.length<4?p(n):
n[1]+iu(n.slice(1,n.length-1),ao(n,t))}function ik(n,t){return n.length<3?p(n):n[
0]+iu((n.push(n[0]),n),ao([n[n.length-2]].concat(n,[n[1]]),t))}function rk(n,t){
return n.length<3?p(n):n[0]+iu(n,ao(n,t))}function iu(n,t){var o,h;if(t.length<1||
n.length!=t.length&&n.length!=t.length+2)return p(n);var c=n.length!=t.length,f=
"",s=n[0],i=n[1],e=t[0],r=e,u=1;if(c&&(f+="Q"+(i[0]-2*e[0]/3)+","+(i[1]-2*e[1]/3)+
","+i[0]+","+i[1],s=n[1],u=2),t.length>1)for(r=t[1],i=n[u],u++,f+="C"+(s[0]+e[0])+
","+(s[1]+e[1])+","+(i[0]-r[0])+","+(i[1]-r[1])+","+i[0]+","+i[1],o=2;o<t.length;
o++,u++)i=n[u],r=t[o],f+="S"+(i[0]-r[0])+","+(i[1]-r[1])+","+i[0]+","+i[1];return c&&
(h=n[u],f+="Q"+(i[0]+2*r[0]/3)+","+(i[1]+2*r[1]/3)+","+h[0]+","+h[1]),f}function ao(
n,t){for(var r,u=[],f=(1-t)/2,e=n[0],i=n[1],o=1,s=n.length;++o<s;)r=e,e=i,i=n[o],
u.push([f*(i[0]-r[0]),f*(i[1]-r[1])]);return u}function ca(n){if(n.length<3)return p(
n);var o=1,s=n.length,t=n[0],i=t[0],r=t[1],u=[i,i,i,(t=n[1])[0]],f=[r,r,r,t[1]],
e=[i,",",r,"L",w(ni,u),",",w(ni,f)];for(n.push(n[s-1]);++o<=s;)t=n[o],u.shift(),
u.push(t[0]),f.shift(),f.push(t[1]),vo(e,u,f);return n.pop(),e.push("L",t),e.join(
"")}function uk(n){if(n.length<4)return p(n);for(var t,f=[],i=-1,e=n.length,r=[0],
u=[0];++i<3;)t=n[i],r.push(t[0]),u.push(t[1]);for(f.push(w(ni,r)+","+w(ni,u)),--i;
++i<e;)t=n[i],r.shift(),r.push(t[0]),u.shift(),u.push(t[1]),vo(f,r,u);return f.join(
"")}function fk(n){for(var f,t,i=-1,e=n.length,o=e+4,r=[],u=[];++i<4;)t=n[i%e],r.
push(t[0]),u.push(t[1]);for(f=[w(ni,r),",",w(ni,u)],--i;++i<o;)t=n[i%e],r.shift(
),r.push(t[0]),u.shift(),u.push(t[1]),vo(f,r,u);return f.join("")}function ek(n,
t){var i=n.length-1;if(i)for(var r,u,e=n[0][0],o=n[0][1],s=n[i][0]-e,h=n[i][1]-o,
f=-1;++f<=i;)r=n[f],u=f/i,r[0]=t*r[0]+(1-t)*(e+u*s),r[1]=t*r[1]+(1-t)*(o+u*h);return ca(
n)}function w(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function vo(n,
t,i){n.push("C",w(fp,t),",",w(fp,i),",",w(ep,t),",",w(ep,i),",",w(ni,t),",",w(ni,
i))}function yo(n,t){return(t[1]-n[1])/(t[0]-n[0])}function ok(n){for(var t=0,e=
n.length-1,i=[],f=n[0],r=n[1],u=i[0]=yo(f,r);++t<e;)i[t]=(u+(u=yo(f=r,r=n[t+1]))
)/2;return i[t]=u,i}function sk(n){for(var u,f,e,i,s=[],r=ok(n),t=-1,o=n.length-
1;++t<o;)u=yo(n[t],n[t+1]),Math.abs(u)<1e-6?r[t]=r[t+1]=0:(f=r[t]/u,e=r[t+1]/u,i=
f*f+e*e,i>9&&(i=3*u/Math.sqrt(i),r[t]=i*f,r[t+1]=i*e));for(t=-1;++t<=o;)i=(n[Math.
min(o,t+1)][0]-n[Math.max(0,t-1)][0])/(6*(1+r[t]*r[t])),s.push([i||0,r[t]*i||0]);
return s}function hk(n){return n.length<3?p(n):n[0]+iu(n,sk(n))}function ck(n,t,
i,r){var u,f,e,o,s,h,c;return u=r[n],f=u[0],e=u[1],u=r[t],o=u[0],s=u[1],u=r[i],h=
u[0],c=u[1],(c-e)*(o-f)-(s-e)*(h-f)>0}function po(n,t,i){return(i[0]-t[0])*(n[1]-
t[1])<(i[1]-t[1])*(n[0]-t[0])}function la(n,t,i,r){var u=n[0],e=i[0],o=t[0]-u,s=
r[0]-e,f=n[1],h=i[1],c=t[1]-f,l=r[1]-h,a=(s*(f-h)-l*(u-e))/(l*o-s*c);return[u+a*
o,f+a*c]}function aa(n){var t=n[0],i=n[n.length-1];return!(t[0]-i[0]||t[1]-i[1])
}function wo(n,t){var l={list:n.map(function(n,t){return{index:t,x:n[0],y:n[1]}}
).sort(function(n,t){return n.y<t.y?-1:n.y>t.y?1:n.x<t.x?-1:n.x>t.x?1:0}),bottomSite:
null},i={list:[],leftEnd:null,rightEnd:null,init:function(){i.leftEnd=i.createHalfEdge(
null,"l");i.rightEnd=i.createHalfEdge(null,"l");i.leftEnd.r=i.rightEnd;i.rightEnd.
l=i.leftEnd;i.list.unshift(i.leftEnd,i.rightEnd)},createHalfEdge:function(n,t){return{
edge:n,side:t,vertex:null,l:null,r:null}},insert:function(n,t){t.l=n;t.r=n.r;n.r.
l=t;n.r=t},leftBound:function(n){var t=i.leftEnd;do t=t.r;while(t!=i.rightEnd&&e.
rightOf(t,n));return t.l},del:function(n){n.l.r=n.r;n.r.l=n.l;n.edge=null},right:
function(n){return n.r},left:function(n){return n.l},leftRegion:function(n){return null==
n.edge?l.bottomSite:n.edge.region[n.side]},rightRegion:function(n){return null==
n.edge?l.bottomSite:n.edge.region[yf[n.side]]}},e={bisect:function(n,t){var u={region:
{l:n,r:t},ep:{l:null,r:null}},i=t.x-n.x,r=t.y-n.y,f=i>0?i:-i,e=r>0?r:-r;return u.
c=n.x*i+n.y*r+.5*(i*i+r*r),f>e?(u.a=1,u.b=r/i,u.c/=i):(u.b=1,u.a=i/r,u.c/=r),u},
intersect:function(n,t){var i=n.edge,r=t.edge,u,h;if(!i||!r||i.region.r==r.region.
r||(u=i.a*r.b-i.b*r.a,Math.abs(u)<1e-10))return null;var f,e,c=(i.c*r.b-r.c*i.b)
/u,l=(r.c*i.a-i.c*r.a)/u,o=i.region.r,s=r.region.r;return o.y<s.y||o.y==s.y&&o.x<
s.x?(f=n,e=i):(f=t,e=r),h=c>=e.region.r.x,h&&"l"===f.side||!h&&"r"===f.side?null:
{x:c,y:l}},rightOf:function(n,t){var i=n.edge,u=i.region.r,f=t.x>u.x,h;if(f&&"l"===
n.side)return 1;if(!f&&"r"===n.side)return 0;if(1===i.a){var e=t.y-u.y,o=t.x-u.x,
s=0,r=0;(!f&&i.b<0||f&&i.b>=0?r=s=e>=i.b*o:(r=t.x+t.y*i.b>i.c,i.b<0&&(r=!r),r||(s=
1)),s)||(h=u.x-i.region.l.x,r=i.b*(o*o-e*e)<h*e*(1+2*o/h+i.b*i.b),i.b<0&&(r=!r))}
else{var c=i.c-i.a*t.x,l=t.y-c,a=t.x-u.x,v=c-u.y;r=l*l>a*a+v*v}return"l"===n.side?
r:!r},endPoint:function(n,i,r){n.ep[i]=r;n.ep[yf[i]]&&t(n)},distance:function(n,
t){var i=n.x-t.x,r=n.y-t.y;return Math.sqrt(i*i+r*r)}},u={list:[],insert:function(
n,t,i){var f;n.vertex=t;n.ystar=t.y+i;for(var r=0,e=u.list,o=e.length;o>r;r++)if(
f=e[r],!(n.ystar>f.ystar||n.ystar==f.ystar&&t.x>f.vertex.x))break;e.splice(r,0,n)}
,del:function(n){for(var t=0,i=u.list,r=i.length;r>t&&i[t]!=n;++t);i.splice(t,1)}
,empty:function(){return 0===u.list.length},nextEvent:function(n){for(var t=0,i=
u.list,r=i.length;r>t;++t)if(i[t]==n)return i[t+1];return null},min:function(){var
n=u.list[0];return{x:n.vertex.x,y:n.ystar}},extractMin:function(){return u.list.
shift()}},p,r,h,v,k,o,c,y,d,f,w,a,b,s;for(i.init(),l.bottomSite=l.list.shift(),s=
l.list.shift();;)if(u.empty()||(p=u.min()),s&&(u.empty()||s.y<p.y||s.y==p.y&&s.x<
p.x))r=i.leftBound(s),h=i.right(r),c=i.rightRegion(r),a=e.bisect(c,s),o=i.createHalfEdge(
a,"l"),i.insert(r,o),f=e.intersect(r,o),f&&(u.del(r),u.insert(r,f,e.distance(f,s)))
,r=o,o=i.createHalfEdge(a,"r"),i.insert(r,o),f=e.intersect(o,h),f&&u.insert(o,f,
e.distance(f,s)),s=l.list.shift();else{if(u.empty())break;r=u.extractMin();v=i.left(
r);h=i.right(r);k=i.right(h);c=i.leftRegion(r);y=i.rightRegion(h);w=r.vertex;e.endPoint(
r.edge,r.side,w);e.endPoint(h.edge,h.side,w);i.del(r);u.del(h);i.del(h);b="l";c.
y>y.y&&(d=c,c=y,y=d,b="r");a=e.bisect(c,y);o=i.createHalfEdge(a,b);i.insert(v,o);
e.endPoint(a,yf[b],w);f=e.intersect(v,o);f&&(u.del(v),u.insert(v,f,e.distance(f,
c)));f=e.intersect(o,k);f&&u.insert(o,f,e.distance(f,c))}for(r=i.right(i.leftEnd);
r!=i.rightEnd;r=i.right(r))t(r.edge)}function lk(n){return n.x}function ak(n){return n.
y}function va(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function ir(n,
t,i,r,u,f){if(!n(t,i,r,u,f)){var o=.5*(i+u),s=.5*(r+f),e=t.nodes;e[0]&&ir(n,e[0],
i,r,o,s);e[1]&&ir(n,e[1],o,r,u,s);e[2]&&ir(n,e[2],i,s,o,f);e[3]&&ir(n,e[3],o,s,u,
f)}}function bo(t,i){t=n.rgb(t);i=n.rgb(i);var r=t.r,u=t.g,f=t.b,e=i.r-r,o=i.g-u,
s=i.b-f;return function(n){return t.r=Math.round(r+e*n),t.g=Math.round(u+o*n),t.
b=Math.round(f+s*n),t}}function ya(n,t){var i,u={},r={};for(i in n)i in t?u[i]=fi(
n[i],t[i]):r[i]=n[i];for(i in t)i in n||(r[i]=t[i]);return function(n){for(i in u)
r[i]=u[i](n);return r}}function ft(n,t){return t-=n=+n,function(i){return n+t*i}
}function pa(n,t){var s,u,f,o,i,h=0,c=0,r=[],e=[];for(n+="",t+="",cr.lastIndex=0,
u=0;s=cr.exec(t);++u)s.index&&r.push(t.substring(h,c=s.index)),e.push({i:r.length,
x:s[0]}),r.push(null),h=cr.lastIndex;for(h<t.length&&r.push(t.substring(h)),u=0,
o=e.length;(s=cr.exec(n))&&o>u;++u)if(i=e[u],i.x==s[0]){if(i.i)if(null==r[i.i+1])
for(r[i.i-1]+=i.x,r.splice(i.i,1),f=u+1;o>f;++f)e[f].i--;else for(r[i.i-1]+=i.x+
r[i.i+1],r.splice(i.i,2),f=u+1;o>f;++f)e[f].i-=2;else if(null==r[i.i+1])r[i.i]=i.
x;else for(r[i.i]=i.x+r[i.i+1],r.splice(i.i+1,1),f=u+1;o>f;++f)e[f].i--;e.splice(
u,1);o--;u--}else i.x=ft(parseFloat(s[0]),parseFloat(i.x));for(;o>u;)i=e.pop(),null==
r[i.i+1]?r[i.i]=i.x:(r[i.i]=i.x+r[i.i+1],r.splice(i.i+1,1)),o--;return 1===r.length?
null==r[0]?(i=e[0].x,function(n){return i(n)+""}):function(){return t}:function(
n){for(u=0;o>u;++u)r[(i=e[u]).i]=i.x(n);return r.join("")}}function fi(t,i){for(
var r,u=n.interpolators.length;--u>=0&&!(r=n.interpolators[u](t,i)););return r}function wa(
n,t){for(var u=[],r=[],e=n.length,o=t.length,f=Math.min(n.length,t.length),i=0;f>
i;++i)u.push(fi(n[i],t[i]));for(;e>i;++i)r[i]=n[i];for(;o>i;++i)r[i]=t[i];return function(
n){for(i=0;f>i;++i)r[i]=u[i](n);return r}}function vk(n){return function(t){return 0>=
t?0:t>=1?1:n(t)}}function ba(n){return function(t){return 1-n(1-t)}}function ka(
n){return function(t){return.5*(.5>t?n(2*t):2-n(2-2*t))}}function yk(n){return n*
n}function pk(n){return n*n*n}function wk(n){if(0>=n)return 0;if(n>=1)return 1;var
t=n*n,i=t*n;return 4*(.5>n?i:3*(n-t)+i-.75)}function bk(n){return function(t){return Math.
pow(t,n)}}function kk(n){return 1-Math.cos(n*t/2)}function dk(n){return Math.pow(
2,10*(n-1))}function gk(n){return 1-Math.sqrt(1-n*n)}function nd(n,i){var r;return arguments.
length<2&&(i=.45),arguments.length?r=i/(2*t)*Math.asin(1/n):(n=1,r=i/4),function(
u){return 1+n*Math.pow(2,10*-u)*Math.sin(2*(u-r)*t/i)}}function td(n){return n||
(n=1.70158),function(t){return t*t*((n+1)*t-n)}}function id(n){return 1/2.75>n?7.5625*
n*n:2/2.75>n?7.5625*(n-=1.5/2.75)*n+.75:2.5/2.75>n?7.5625*(n-=2.25/2.75)*n+.9375:
7.5625*(n-=2.625/2.75)*n+.984375}function rd(t,i){t=n.hcl(t);i=n.hcl(i);var u=t.
h,f=t.c,o=t.l,r=i.h-u,e=i.c-f,s=i.l-o;return isNaN(e)&&(e=0,f=isNaN(f)?i.c:f),isNaN(
r)?(r=0,u=isNaN(u)?i.h:u):r>180?r-=360:-180>r&&(r+=360),function(n){return t.h=u+
r*n,t.c=f+e*n,t.l=o+s*n,t}}function ud(t,i){t=n.hsl(t);i=n.hsl(i);var u=t.h,f=t.
s,o=t.l,r=i.h-u,e=i.s-f,s=i.l-o;return isNaN(e)&&(e=0,f=isNaN(f)?i.s:f),isNaN(r)?
(r=0,u=isNaN(u)?i.h:u):r>180?r-=360:-180>r&&(r+=360),function(n){return t.h=u+r*
n,t.s=f+e*n,t.l=o+s*n,t}}function fd(t,i){t=n.lab(t);i=n.lab(i);var r=t.l,u=t.a,
f=t.b,e=i.l-r,o=i.a-u,s=i.b-f;return function(n){return t.l=r+e*n,t.a=u+o*n,t.b=
f+s*n,t}}function da(n,t){return t-=n,function(i){return Math.round(n+t*i)}}function ga(
n){var t=[n.a,n.b],i=[n.c,n.d],r=tv(t),u=nv(t,i),f=tv(ed(i,t,-u))||0;t[0]*i[1]<i[
0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,u*=-1);this.rotate=(r?Math.atan2(t[1],t[0]):Math.
atan2(-i[0],i[1]))*e;this.translate=[n.e,n.f];this.scale=[r,f];this.skew=f?Math.
atan2(u,f)*e:0}function nv(n,t){return n[0]*t[0]+n[1]*t[1]}function tv(n){var t=
Math.sqrt(nv(n,n));return t&&(n[0]/=t,n[1]/=t),t}function ed(n,t,i){return n[0]+=
i*t[0],n[1]+=i*t[1],n}function iv(t,i){var s,r=[],o=[],c=n.transform(t),l=n.transform(
i),a=c.translate,u=l.translate,h=c.rotate,f=l.rotate,p=c.skew,v=l.skew,y=c.scale,
e=l.scale;return a[0]!=u[0]||a[1]!=u[1]?(r.push("translate(",null,",",null,")"),
o.push({i:1,x:ft(a[0],u[0])},{i:3,x:ft(a[1],u[1])})):u[0]||u[1]?r.push("translate("+
u+")"):r.push(""),h!=f?(h-f>180?f+=360:f-h>180&&(h+=360),o.push({i:r.push(r.pop(
)+"rotate(",null,")")-2,x:ft(h,f)})):f&&r.push(r.pop()+"rotate("+f+")"),p!=v?o.push(
{i:r.push(r.pop()+"skewX(",null,")")-2,x:ft(p,v)}):v&&r.push(r.pop()+"skewX("+v+
")"),y[0]!=e[0]||y[1]!=e[1]?(s=r.push(r.pop()+"scale(",null,",",null,")"),o.push(
{i:s-4,x:ft(y[0],e[0])},{i:s-2,x:ft(y[1],e[1])})):(1!=e[0]||1!=e[1])&&r.push(r.pop(
)+"scale("+e+")"),s=o.length,function(n){for(var t,i=-1;++i<s;)r[(t=o[i]).i]=t.x(
n);return r.join("")}}function od(n,t){return t=t-(n=+n)?1/(t-n):0,function(i){return(i-
n)*t}}function sd(n,t){return t=t-(n=+n)?1/(t-n):0,function(i){return Math.max(0,
Math.min(1,(i-n)*t))}}function hd(n){for(var f,t=n.source,i=n.target,u=cd(t,i),r=
[t];t!==u;)t=t.parent,r.push(t);for(f=r.length;i!==u;)r.splice(f,0,i),i=i.parent;
return r}function rv(n){for(var i=[],t=n.parent;null!=t;)i.push(n),n=t,t=t.parent;
return i.push(n),i}function cd(n,t){if(n===t)return n;for(var r=rv(n),u=rv(t),i=
r.pop(),f=u.pop(),e=null;i===f;)e=i,i=r.pop(),f=u.pop();return e}function ld(n){
n.fixed|=2}function ad(n){n.fixed&=-7}function vd(n){n.fixed|=4;n.px=n.x;n.py=n.
y}function yd(n){n.fixed&=-5}function uv(n,t,i){var f=0,e=0,u;if(n.charge=0,!n.leaf)
for(var r,o=n.nodes,h=o.length,s=-1;++s<h;)r=o[s],null!=r&&(uv(r,t,i),n.charge+=
r.charge,f+=r.charge*r.cx,e+=r.charge*r.cy);n.point&&(n.leaf||(n.point.x+=Math.random(
)-.5,n.point.y+=Math.random()-.5),u=t*i[n.point.index],n.charge+=n.pointCharge=u,
f+=u*n.point.x,e+=u*n.point.y);n.cx=f/n.charge;n.cy=e/n.charge}function rr(t,i){
return n.rebind(t,i,"sort","children","value"),t.nodes=t,t.links=kd,t}function pd(
n){return n.children}function wd(n){return n.value}function bd(n,t){return t.value-
n.value}function kd(t){return n.merge(t.map(function(n){return(n.children||[]).map(
function(t){return{source:n,target:t}})}))}function dd(n){return n.x}function gd(
n){return n.y}function ng(n,t,i){n.y0=t;n.y=i}function ko(t){return n.range(t.length)}
function go(n){for(var t=-1,r=n[0].length,i=[];++t<r;)i[t]=0;return i}function tg(
n){for(var i,t=1,r=0,u=n[0][1],f=n.length;f>t;++t)(i=n[t][1])>u&&(r=t,u=i);return r}
function ig(n){return n.reduce(rg,0)}function rg(n,t){return n+t[1]}function ug(
n,t){return fv(n,Math.ceil(Math.log(t.length)/Math.LN2+1))}function fv(n,t){for(
var i=-1,r=+n[0],f=(n[1]-r)/t,u=[];++i<=t;)u[i]=f*i+r;return u}function fg(t){return[
n.min(t),n.max(t)]}function ev(n,t){return n.parent==t.parent?1:2}function ns(n)
{var t=n.children;return t&&t.length?t[0]:n._tree.thread}function ts(n){var i,t=
n.children;return t&&(i=t.length)?t[i-1]:n._tree.thread}function ru(n,t){var i=n.
children,u,f,r;if(i&&(f=i.length))for(r=-1;++r<f;)t(u=ru(i[r],t),n)>0&&(n=u);return n}
function eg(n,t){return n.x-t.x}function og(n,t){return t.x-n.x}function sg(n,t)
{return n.depth-t.depth}function et(n,t){function i(n,r){var u=n.children,f,s,e,
o;if(u&&(s=u.length))for(e=null,o=-1;++o<s;)f=u[o],i(f,e),e=f;t(n,r)}i(n,null)}function hg(
n){for(var t,i=0,f=0,r=n.children,u=r.length;--u>=0;)t=r[u]._tree,t.prelim+=i,t.
mod+=i,i+=t.shift+(f+=t.change)}function cg(n,t,i){n=n._tree;t=t._tree;var r=i/(t.
number-n.number);n.change+=r;t.change-=r;t.shift+=i;t.prelim+=i;t.mod+=i}function lg(
n,t,i){return n._tree.ancestor.parent==t.parent?n._tree.ancestor:i}function ag(n,
t){return n.value-t.value}function is(n,t){var i=n._pack_next;n._pack_next=t;t._pack_prev=
n;t._pack_next=i;i._pack_prev=t}function ov(n,t){n._pack_next=t;t._pack_prev=n}function sv(
n,t){var i=t.x-n.x,r=t.y-n.y,u=n.r+t.r;return.999*u*u>i*i+r*r}function hv(n){function h(
n){c=Math.min(n.x-n.r,c);l=Math.max(n.x+n.r,l);a=Math.min(n.y-n.r,a);v=Math.max(
n.y+n.r,v)}if((u=n.children)&&(s=u.length)){var u,i,r,t,f,e,o,s,c=1/0,l=-1/0,a=1/
0,v=-1/0;if(u.forEach(vg),i=u[0],i.x=-i.r,i.y=0,h(i),s>1&&(r=u[1],r.x=r.r,r.y=0,
h(r),s>2))for(t=u[2],lv(i,r,t),h(t),is(i,t),i._pack_prev=t,is(t,r),r=i._pack_next,
f=3;s>f;f++){lv(i,r,t=u[f]);var y=0,p=1,w=1;for(e=r._pack_next;e!==r;e=e._pack_next,
p++)if(sv(e,t)){y=1;break}if(1==y)for(o=i._pack_prev;o!==e._pack_prev&&!sv(o,t);
o=o._pack_prev,w++);y?(w>p||p==w&&r.r<i.r?ov(i,r=e):ov(i=o,r),f--):(is(i,t),r=t,
h(t))}var k=(c+l)/2,d=(a+v)/2,b=0;for(f=0;s>f;f++)t=u[f],t.x-=k,t.y-=d,b=Math.max(
b,t.r+Math.sqrt(t.x*t.x+t.y*t.y));n.r=b;u.forEach(yg)}}function vg(n){n._pack_next=
n._pack_prev=n}function yg(n){delete n._pack_next;delete n._pack_prev}function cv(
n,t,i,r){var u=n.children,f,e;if(n.x=t+=r*n.x,n.y=i+=r*n.y,n.r*=r,u)for(f=-1,e=u.
length;++f<e;)cv(u[f],t,i,r)}function lv(n,t,i){var r=n.r+i.r,f=t.x-n.x,e=t.y-n.
y,u,o,s,h;r&&(f||e)?(u=t.r+i.r,o=f*f+e*e,u*=u,r*=r,s=.5+(r-u)/(2*o),h=Math.sqrt(
Math.max(0,2*u*(r+o)-(r-=o)*r-u*u))/(2*o),i.x=n.x+s*f+h*e,i.y=n.y+s*e-h*f):(i.x=
n.x+r,i.y=n.y)}function pg(t){return 1+n.max(t,function(n){return n.y})}function wg(
n){return n.reduce(function(n,t){return n+t.x},0)/n.length}function av(n){var t=
n.children;return t&&t.length?av(t[0]):n}function vv(n){var i,t=n.children;return t&&
(i=t.length)?vv(t[i-1]):n}function rs(n){return{x:n.x,y:n.y,dx:n.dx,dy:n.dy}}function yv(
n,t){var u=n.x+t[3],f=n.y+t[0],i=n.dx-t[1]-t[3],r=n.dy-t[0]-t[2];return 0>i&&(u+=
i/2,i=0),0>r&&(f+=r/2,r=0),{x:u,y:f,dx:i,dy:r}}function ei(n){var t=n[0],i=n[n.length-
1];return i>t?[t,i]:[i,t]}function uu(n){return n.rangeExtent?n.rangeExtent():ei(
n.range())}function bg(n,t,i,r){var u=i(n[0],n[1]),f=r(t[0],t[1]);return function(
n){return f(u(n))}}function us(n,t){var i,r=0,u=n.length-1,f=n[r],e=n[u];return f>
e&&(i=r,r=u,u=i,i=f,f=e,e=i),n[r]=t.floor(f),n[u]=t.ceil(e),n}function kg(n){return n?
{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/
n)*n}}:vp}function dg(t,i,r,u){var o=[],s=[],f=0,e=Math.min(t.length,i.length)-1;
for(t[e]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++f<=e;)o.push(r(t[
f-1],t[f])),s.push(u(i[f-1],i[f]));return function(i){var r=n.bisect(t,i,1,e)-1;
return s[r](o[r](i))}}function pv(n,t,i,r){function f(){var f=Math.min(n.length,
t.length)>2?dg:bg,s=r?sd:od;return e=f(n,t,s,i),o=f(t,n,s,fi),u}function u(n){return e(
n)}var e,o;return u.invert=function(n){return o(n)},u.domain=function(t){return arguments.
length?(n=t.map(Number),f()):n},u.range=function(n){return arguments.length?(t=n,
f()):t},u.rangeRound=function(n){return u.range(n).interpolate(da)},u.clamp=function(
n){return arguments.length?(r=n,f()):r},u.interpolate=function(n){return arguments.
length?(i=n,f()):i},u.ticks=function(t){return os(n,t)},u.tickFormat=function(t,
i){return ss(n,t,i)},u.nice=function(t){return wv(n,t),f()},u.copy=function(){return pv(
n,t,i,r)},f()}function fs(t,i){return n.rebind(t,i,"range","rangeRound","interpolate",
"clamp")}function wv(n,t){return us(n,kg(t?es(n,t)[2]:gg(n)))}function gg(n){var
t=ei(n),i=t[1]-t[0];return Math.pow(10,Math.round(Math.log(i)/Math.LN10)-1)}function es(
n,t){var r=ei(n),f=r[1]-r[0],i=Math.pow(10,Math.floor(Math.log(f/t)/Math.LN10)),
u=t/f*i;return.15>=u?i*=10:.35>=u?i*=5:.75>=u&&(i*=2),r[0]=Math.ceil(r[0]/i)*i,r[
1]=Math.floor(r[1]/i)*i+.5*i,r[2]=i,r}function os(t,i){return n.range.apply(n,es(
t,i))}function ss(t,i,r){var u=-Math.floor(Math.log(es(t,i)[2])/Math.LN10+.01);return n.
format(r?r.replace(ip,function(n,t,i,r,f,e,o,s,h,c){return[t,i,r,f,e,o,s,h||"."+
(u-2*("%"===c)),c].join("")}):",."+u+"f")}function bv(t,i,r,u){function e(n){return(r?
Math.log(0>n?0:n):-Math.log(n>0?0:-n))/Math.log(i)}function o(n){return r?Math.pow(
i,n):-Math.pow(i,-n)}function f(n){return t(e(n))}return f.invert=function(n){return o(
t.invert(n))},f.domain=function(n){return arguments.length?(r=n[0]>=0,t.domain((u=
n.map(Number)).map(e)),f):u},f.base=function(n){return arguments.length?(i=+n,t.
domain(u.map(e)),f):i},f.nice=function(){var n=us(u.map(e),r?Math:yp);return t.domain(
n),u=n.map(o),f},f.ticks=function(){var h=ei(u),t=[],f;if(h.every(isFinite)){var
c=h[0],l=h[1],n=Math.floor(e(c)),s=Math.ceil(e(l)),a=i%1?2:i;if(r){for(;s>n;n++)
for(f=1;a>f;f++)t.push(o(n)*f);t.push(o(n))}else for(t.push(o(n));n++<s;)for(f=a-
1;f>0;f--)t.push(o(n)*f);for(n=0;t[n]<c;n++);for(s=t.length;t[s-1]>l;s--);t=t.slice(
n,s)}return t},f.tickFormat=function(t,i){if(!arguments.length)return yh;arguments.
length<2?i=yh:"function"!=typeof i&&(i=n.format(i));var u,s=Math.max(.1,t/f.ticks(
).length),h=r?(u=1e-12,Math.ceil):(u=-1e-12,Math.floor);return function(n){return n/
o(h(e(n)+u))<=s?i(n):""}},f.copy=function(){return bv(t.copy(),i,r,u)},fs(f,t)}function kv(
n,t,i){function r(t){return n(u(t))}var u=fu(t),f=fu(1/t);return r.invert=function(
t){return f(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain(
(i=t.map(Number)).map(u)),r):i},r.ticks=function(n){return os(i,n)},r.tickFormat=
function(n,t){return ss(i,n,t)},r.nice=function(n){return r.domain(wv(i,n))},r.exponent=
function(e){return arguments.length?(u=fu(t=e),f=fu(1/t),n.domain(i.map(u)),r):t}
,r.copy=function(){return kv(n.copy(),t,i)},fs(r,n)}function fu(n){return function(
t){return 0>t?-Math.pow(-t,n):Math.pow(t,n)}}function dv(t,i){function r(n){return u[
((f.get(n)||f.set(n,t.push(n)))-1)%u.length]}function o(i,r){return n.range(t.length).
map(function(n){return i+r*n})}var f,u,e;return r.domain=function(n){if(!arguments.
length)return t;t=[];f=new it;for(var u,e=-1,o=n.length;++e<o;)f.has(u=n[e])||f.
set(u,t.push(u));return r[i.t].apply(r,i.a)},r.range=function(n){return arguments.
length?(u=n,e=0,i={t:"range",a:arguments},r):u},r.rangePoints=function(n,f){arguments.
length<2&&(f=0);var s=n[0],h=n[1],c=(h-s)/(Math.max(1,t.length-1)+f);return u=o(
t.length<2?(s+h)/2:s+c*f/2,c),e=0,i={t:"rangePoints",a:arguments},r},r.rangeBands=
function(n,f,s){arguments.length<2&&(f=0);arguments.length<3&&(s=f);var h=n[1]<n[
0],l=n[+h],a=n[1-h],c=(a-l)/(t.length-f+2*s);return u=o(l+c*s,c),h&&u.reverse(),
e=c*(1-f),i={t:"rangeBands",a:arguments},r},r.rangeRoundBands=function(n,f,s){arguments.
length<2&&(f=0);arguments.length<3&&(s=f);var h=n[1]<n[0],c=n[+h],a=n[1-h],l=Math.
floor((a-c)/(t.length-f+2*s)),v=a-c-(t.length-f)*l;return u=o(c+Math.round(v/2),
l),h&&u.reverse(),e=Math.round(l*(1-f)),i={t:"rangeRoundBands",a:arguments},r},r.
rangeBand=function(){return e},r.rangeExtent=function(){return ei(i.a[0])},r.copy=
function(){return dv(t,i)},r.domain(t)}function gv(t,i){function f(){var f=0,e=i.
length;for(r=[];++f<e;)r[f-1]=n.quantile(t,f/e);return u}function u(t){if(!isNaN(
t=+t))return i[n.bisect(r,t)]}var r;return u.domain=function(i){return arguments.
length?(t=i.filter(function(n){return!isNaN(n)}).sort(n.ascending),f()):t},u.range=
function(n){return arguments.length?(i=n,f()):i},u.quantiles=function(){return r}
,u.invertExtent=function(n){return n=i.indexOf(n),0>n?[NaN,NaN]:[n>0?r[n-1]:t[0],
n<r.length?r[n]:t[t.length-1]]},u.copy=function(){return gv(t,i)},f()}function ny(
n,t,i){function r(t){return i[Math.max(0,Math.min(e,Math.floor(u*(t-n))))]}function f(
){return u=i.length/(t-n),e=i.length-1,r}var u,e;return r.domain=function(i){return arguments.
length?(n=+i[0],t=+i[i.length-1],f()):[n,t]},r.range=function(n){return arguments.
length?(i=n,f()):i},r.invertExtent=function(t){return t=i.indexOf(t),t=0>t?NaN:t/
u+n,[t,t+1/u]},r.copy=function(){return ny(n,t,i)},f()}function ty(t,i){function r(
r){if(r>=r)return i[n.bisect(t,r)]}return r.domain=function(n){return arguments.
length?(t=n,r):t},r.range=function(n){return arguments.length?(i=n,r):i},r.invertExtent=
function(n){return n=i.indexOf(n),[t[n-1],t[n]]},r.copy=function(){return ty(t,i)}
,r}function iy(n){function t(n){return+n}return t.invert=t,t.domain=t.range=function(
i){return arguments.length?(n=i.map(t),t):n},t.ticks=function(t){return os(n,t)}
,t.tickFormat=function(t,i){return ss(n,t,i)},t.copy=function(){return iy(n)},t}
function nn(n){return n.innerRadius}function tn(n){return n.outerRadius}function ry(
n){return n.startAngle}function uy(n){return n.endAngle}function fy(n){for(var t,
i,r,u=-1,f=n.length;++u<f;)t=n[u],i=t[0],r=t[1]+ti,t[0]=i*Math.cos(r),t[1]=i*Math.
sin(r);return n}function ey(n){function t(t){function b(){p.push("M",i(n(w),s),a,
l(n(y.reverse()),s),"Z")}for(var v,k,d,p=[],y=[],w=[],c=-1,g=t.length,nt=f(e),tt=
f(o),it=e===r?function(){return k}:f(r),rt=o===u?function(){return d}:f(u);++c<g;
)h.call(this,v=t[c],c)?(y.push([k=+nt.call(this,v,c),d=+tt.call(this,v,c)]),w.push(
[+it.call(this,v,c),+rt.call(this,v,c)])):y.length&&(b(),y=[],w=[]);return y.length&&
b(),p.length?p.join(""):null}var e=g,r=g,o=0,u=ut,h=gi,i=p,c=i.key,l=i,a="L",s=.7;
return t.x=function(n){return arguments.length?(e=r=n,t):r},t.x0=function(n){return arguments.
length?(e=n,t):e},t.x1=function(n){return arguments.length?(r=n,t):r},t.y=function(
n){return arguments.length?(o=u=n,t):u},t.y0=function(n){return arguments.length?
(o=n,t):o},t.y1=function(n){return arguments.length?(u=n,t):u},t.defined=function(
n){return arguments.length?(h=n,t):h},t.interpolate=function(n){return arguments.
length?(c="function"==typeof n?i=n:(i=vf.get(n)||p).key,l=i.reverse||i,a=i.closed?
"M":"L",t):c},t.tension=function(n){return arguments.length?(s=n,t):s},t}function rn(
n){return n.radius}function oy(n){return[n.x,n.y]}function un(n){return function(
){var t=n.apply(this,arguments),i=t[0],r=t[1]+ti;return[i*Math.cos(r),i*Math.sin(
r)]}}function fn(){return 64}function en(){return"circle"}function sy(n){var i=Math.
sqrt(n/t);return"M0,"+i+"A"+i+","+i+" 0 1,1 0,"+-i+"A"+i+","+i+" 0 1,1 0,"+i+"Z"}
function ur(n,t){return au(n,h),n.id=t,n}function hs(n,t,i,r){var u=n.id;return vt(
n,"function"==typeof i?function(n,f,e){n.__transition__[u].tween.set(t,r(i.call(
n,n.__data__,f,e)))}:(i=r(i),function(n){n.__transition__[u].tween.set(t,i)}))}function on(
n){return null==n&&(n=""),function(){this.textContent=n}}function eu(t,i,r,u){var
e=t.__transition__||(t.__transition__={active:0,count:0}),f=e[r],o;if(!f)return o=
u.time,f=e[r]={tween:new it,time:o,ease:u.ease,delay:u.delay,duration:u.duration},
++e.count,n.timer(function(u){function a(u){return e.active>r?s():(e.active=r,f.
event&&f.event.start.call(t,h,i),f.tween.forEach(function(n,r){(r=r.call(t,h,i))
&&l.push(r)}),v(u)||n.timer(v,0,o),1)}function v(n){if(e.active!==r)return s();for(
var u=(n-c)/p,a=y(u),o=l.length;o>0;)l[--o].call(t,a);if(u>=1)return(s(),f.event&&
f.event.end.call(t,h,i),1)}function s(){return--e.count?delete e[r]:delete t.__transition__,
1}var h=t.__data__,y=f.ease,c=f.delay,p=f.duration,l=[];return u>=c?a(u):n.timer(
a,c,o),1},0,o),f}function hy(n,t){n.attr("transform",function(n){return"translate("+
t(n)+",0)"})}function cy(n,t){n.attr("transform",function(n){return"translate(0,"+
t(n)+")"})}function sn(n,t,i){if(u=[],i&&t.length>1){for(var u,r,f,o=ei(n.domain(
)),e=-1,h=t.length,s=(t[1]-t[0])/++i;++e<h;)for(r=i;--r>0;)(f=+t[e]-r*s)>=o[0]&&
u.push(f);for(--e,r=0;++r<i&&(f=+t[e]+r*s)<o[1];)u.push(f)}return u}function oi(
){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}
function si(n,t,i){function e(t){var i=n(t),r=f(i,1);return r-t>t-i?i:r}function u(
i){return t(i=n(new l(i-1)),1),i}function f(n,i){return t(n=new l(+n),i),n}function o(
n,r,f){var e=u(n),o=[];if(f>1)for(;r>e;)i(e)%f||o.push(new Date(+e)),t(e,1);else
for(;r>e;)o.push(new Date(+e)),t(e,1);return o}function s(n,t,i){try{l=oi;var r=
new oi;return r._=n,o(r,t,i)}finally{l=Date}}n.floor=n;n.round=e;n.ceil=u;n.offset=
f;n.range=o;var r=n.utc=ou(n);return r.floor=r,r.round=ou(e),r.ceil=ou(u),r.offset=
ou(f),r.range=s,n}function ou(n){return function(t,i){try{l=oi;var r=new oi;return r.
_=t,n(r,i)._}finally{l=Date}}}function su(n,t,i,r){for(var u,f,e=0,o=t.length,s=
i.length;o>e;){if(r>=s)return-1;if(u=t.charCodeAt(e++),37===u){if(f=pit[t.charAt(
e++)],!f||(r=f(n,i,r))<0)return-1}else if(u!=i.charCodeAt(r++))return-1}return r}
function hu(t){return new RegExp("^(?:"+t.map(n.requote).join("|")+")","i")}function cu(
n){for(var i=new it,t=-1,r=n.length;++t<r;)i.set(n[t].toLowerCase(),t);return i}
function v(n,t,i){var u=0>n?"-":"",r=(u?-n:n)+"",f=r.length;return u+(i>f?new Array(
i-f+1).join(t)+r:r)}function hn(n,t,i){tw.lastIndex=0;var r=tw.exec(t.substring(
i));return r?(n.w=lit.get(r[0].toLowerCase()),i+r[0].length):-1}function cn(n,t,
i){nw.lastIndex=0;var r=nw.exec(t.substring(i));return r?(n.w=cit.get(r[0].toLowerCase(
)),i+r[0].length):-1}function ln(n,t,i){o.lastIndex=0;var r=o.exec(t.substring(i,
i+1));return r?(n.w=+r[0],i+r[0].length):-1}function an(n,t,i){o.lastIndex=0;var
r=o.exec(t.substring(i));return r?(n.U=+r[0],i+r[0].length):-1}function vn(n,t,i)
{o.lastIndex=0;var r=o.exec(t.substring(i));return r?(n.W=+r[0],i+r[0].length):-1}
function yn(n,t,i){rw.lastIndex=0;var r=rw.exec(t.substring(i));return r?(n.m=vit.
get(r[0].toLowerCase()),i+r[0].length):-1}function pn(n,t,i){iw.lastIndex=0;var r=
iw.exec(t.substring(i));return r?(n.m=ait.get(r[0].toLowerCase()),i+r[0].length)
:-1}function wn(n,t,i){return su(n,kf.c.toString(),t,i)}function bn(n,t,i){return su(
n,kf.x.toString(),t,i)}function kn(n,t,i){return su(n,kf.X.toString(),t,i)}function dn(
n,t,i){o.lastIndex=0;var r=o.exec(t.substring(i,i+4));return r?(n.y=+r[0],i+r[0].
length):-1}function gn(n,t,i){o.lastIndex=0;var r=o.exec(t.substring(i,i+2));return r?
(n.y=ntt(+r[0]),i+r[0].length):-1}function ntt(n){return n+(n>68?1900:2e3)}function ttt(
n,t,i){o.lastIndex=0;var r=o.exec(t.substring(i,i+2));return r?(n.m=r[0]-1,i+r[0].
length):-1}function ly(n,t,i){o.lastIndex=0;var r=o.exec(t.substring(i,i+2));return r?
(n.d=+r[0],i+r[0].length):-1}function itt(n,t,i){o.lastIndex=0;var r=o.exec(t.substring(
i,i+3));return r?(n.j=+r[0],i+r[0].length):-1}function ay(n,t,i){o.lastIndex=0;var
r=o.exec(t.substring(i,i+2));return r?(n.H=+r[0],i+r[0].length):-1}function rtt(
n,t,i){o.lastIndex=0;var r=o.exec(t.substring(i,i+2));return r?(n.M=+r[0],i+r[0].
length):-1}function utt(n,t,i){o.lastIndex=0;var r=o.exec(t.substring(i,i+2));return r?
(n.S=+r[0],i+r[0].length):-1}function ftt(n,t,i){o.lastIndex=0;var r=o.exec(t.substring(
i,i+3));return r?(n.L=+r[0],i+r[0].length):-1}function ett(n,t,i){var r=wit.get(
t.substring(i,i+=2).toLowerCase());return null==r?-1:(n.p=r,i)}function ott(n){var
t=n.getTimezoneOffset(),i=t>0?"-":"+",r=~~(Math.abs(t)/60),u=Math.abs(t)%60;return i+
v(r,"0",2)+v(u,"0",2)}function stt(n,t,i){uw.lastIndex=0;var r=uw.exec(t.substring(
i,i+1));return r?i+r[0].length:-1}function cs(n){return n.toISOString()}function ls(
t,i,r){function u(n){return t(n)}return u.invert=function(n){return as(t.invert(
n))},u.domain=function(n){return arguments.length?(t.domain(n),u):t.domain().map(
as)},u.nice=function(n){return u.domain(us(u.domain(),n))},u.ticks=function(r,f)
{var o=ei(u.domain());if("function"!=typeof r){var h=o[1]-o[0],s=h/r,e=n.bisect(
df,s);if(e==df.length)return i.year(o,r);if(!e)return t.ticks(r).map(as);Math.log(
s/df[e-1])<Math.log(df[e]/s)&&--e;r=i[e];f=r[1];r=r[0].range}return r(o[0],new Date(
+o[1]+1),f)},u.tickFormat=function(){return r},u.copy=function(){return ls(t.copy(
),i,r)},fs(u,t)}function as(n){return new Date(n)}function vy(n){return function(
t){for(var r=n.length-1,i=n[r];!i[1](t);)i=n[--r];return i[0](t)}}function vs(n)
{var t=new Date(n,0,1);return t.setFullYear(n),t}function htt(n){var t=n.getFullYear(
),i=vs(t),r=vs(t+1);return t+(n-i)/(r-i)}function ys(n){var t=new Date(Date.UTC(
n,0,1));return t.setUTCFullYear(n),t}function ctt(n){var t=n.getUTCFullYear(),i=
ys(t),r=ys(t+1);return t+(n-i)/(r-i)}function ltt(n){return JSON.parse(n.responseText)}
function att(n){var t=b.createRange();return t.selectNode(b.body),t.createContextualFragment(
n.responseText)}var n={version:"3.2.6"},ps,ot,ws,bs,st,u,vu,nt,gs,yu,pu,wy,wu,bu,
nh,by,ku,du,fr,er,nf,tf,rf,uf,rp,or,rh,uh,ef,wt,y,oh,li,sh,hh,ch,lh,ah,vf,hr,yf,
cr,sp,hp,cp,vh,lp,ap,vp,yh,yp,ti,pp,ph,wh,kp,dp,bf,l,gp,nc;Date.now||(Date.now=function(
){return+new Date});var b=document,pt=b.documentElement,c=window;try{b.createElement(
"div").style.setProperty("opacity",0,"")}catch(nrt){var lu=c.Element.prototype,vtt=
lu.setAttribute,ytt=lu.setAttributeNS,yy=c.CSSStyleDeclaration.prototype,ptt=yy.
setProperty;lu.setAttribute=function(n,t){vtt.call(this,n,t+"")};lu.setAttributeNS=
function(n,t,i){ytt.call(this,n,t,i+"")};yy.setProperty=function(n,t,i){ptt.call(
this,n,t+"",i)}}n.ascending=function(n,t){return t>n?-1:n>t?1:n>=t?0:NaN};n.descending=
function(n,t){return n>t?-1:t>n?1:t>=n?0:NaN};n.min=function(n,t){var i,u,r=-1,f=
n.length;if(1===arguments.length){for(;++r<f&&!(null!=(i=n[r])&&i>=i);)i=void 0;
for(;++r<f;)null!=(u=n[r])&&i>u&&(i=u)}else{for(;++r<f&&!(null!=(i=t.call(n,n[r],
r))&&i>=i);)i=void 0;for(;++r<f;)null!=(u=t.call(n,n[r],r))&&i>u&&(i=u)}return i}
;n.max=function(n,t){var i,u,r=-1,f=n.length;if(1===arguments.length){for(;++r<f&&
!(null!=(i=n[r])&&i>=i);)i=void 0;for(;++r<f;)null!=(u=n[r])&&u>i&&(i=u)}else{for(
;++r<f&&!(null!=(i=t.call(n,n[r],r))&&i>=i);)i=void 0;for(;++r<f;)null!=(u=t.call(
n,n[r],r))&&u>i&&(i=u)}return i};n.extent=function(n,t){var i,r,f,u=-1,e=n.length;
if(1===arguments.length){for(;++u<e&&!(null!=(i=f=n[u])&&i>=i);)i=f=void 0;for(;
++u<e;)null!=(r=n[u])&&(i>r&&(i=r),r>f&&(f=r))}else{for(;++u<e&&!(null!=(i=f=t.call(
n,n[u],u))&&i>=i);)i=void 0;for(;++u<e;)null!=(r=t.call(n,n[u],u))&&(i>r&&(i=r),
r>f&&(f=r))}return[i,f]};n.sum=function(n,t){var r,u=0,f=n.length,i=-1;if(1===arguments.
length)for(;++i<f;)isNaN(r=+n[i])||(u+=r);else for(;++i<f;)isNaN(r=+t.call(n,n[i],
i))||(u+=r);return u};n.mean=function(n,t){var u,e=n.length,i=0,r=-1,f=0;if(1===
arguments.length)for(;++r<e;)gf(u=n[r])&&(i+=(u-i)/++f);else for(;++r<e;)gf(u=t.
call(n,n[r],r))&&(i+=(u-i)/++f);if(f)return i};n.quantile=function(n,t){var u=(n.
length-1)*t+1,i=Math.floor(u),r=+n[i-1],f=u-i;return f?r+f*(n[i]-r):r};n.median=
function(t,i){return arguments.length>1&&(t=t.map(i)),t=t.filter(gf),t.length?n.
quantile(t.sort(n.ascending),.5):void 0};n.bisector=function(n){return{left:function(
t,i,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var
f=r+u>>>1;n.call(t,t[f],f)<i?r=f+1:u=f}return r},right:function(t,i,r,u){for(arguments.
length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var f=r+u>>>1;i<n.call(t,
t[f],f)?u=f:r=f+1}return r}}};ps=n.bisector(function(n){return n});n.bisectLeft=
ps.left;n.bisect=n.bisectRight=ps.right;n.shuffle=function(n){for(var r,i,t=n.length;
t;)i=0|Math.random()*t--,r=n[t],n[t]=n[i],n[i]=r;return n};n.permute=function(n,
t){for(var r=[],i=-1,u=t.length;++i<u;)r[i]=n[t[i]];return r};n.zip=function(){var
r,t,e;if(!(r=arguments.length))return[];for(var i=-1,u=n.min(arguments,ow),f=new
Array(u);++i<u;)for(t=-1,e=f[i]=new Array(r);++t<r;)e[t]=arguments[t][i];return f}
;n.transpose=function(t){return n.zip.apply(n,t)};n.keys=function(n){var t=[];for(
var i in n)t.push(i);return t};n.values=function(n){var t=[];for(var i in n)t.push(
n[i]);return t};n.entries=function(n){var t=[];for(var i in n)t.push({key:i,value:
n[i]});return t};n.merge=function(n){return Array.prototype.concat.apply([],n)};
n.range=function(n,t,i){if(arguments.length<3&&(i=1,arguments.length<2&&(t=n,n=0)
),1/0==(t-n)/i)throw new Error("infinite range");var u,f=[],r=sw(Math.abs(i)),e=
-1;if(n*=r,t*=r,i*=r,0>i)for(;(u=n+i*++e)>t;)f.push(u/r);else for(;(u=n+i*++e)<t;
)f.push(u/r);return f};n.map=function(n){var t=new it;for(var i in n)t.set(i,n[i]);
return t};ic(it,{has:function(n){return ot+n in this},get:function(n){return this[
ot+n]},set:function(n,t){return this[ot+n]=t},remove:function(n){return n=ot+n,n
in this&&delete this[n]},keys:function(){var n=[];return this.forEach(function(t)
{n.push(t)}),n},values:function(){var n=[];return this.forEach(function(t,i){n.push(
i)}),n},entries:function(){var n=[];return this.forEach(function(t,i){n.push({key:
t,value:i})}),n},forEach:function(n){for(var t in this)t.charCodeAt(0)===ws&&n.call(
this,t.substring(1),this[t])}});ot="\0";ws=ot.charCodeAt(0);n.nest=function(){function r(
n,e,o){if(o>=i.length)return f?f.call(t,e):u?e.sort(u):e;for(var l,s,h,a,v=-1,y=
e.length,p=i[o++],c=new it;++v<y;)(a=c.get(l=p(s=e[v])))?a.push(s):c.set(l,[s]);
return n?(s=n(),h=function(t,i){s.set(t,r(n,i,o))}):(s={},h=function(t,i){s[t]=r(
n,i,o)}),c.forEach(h),s}function e(n,t){if(t>=i.length)return n;var r=[],u=o[t++];
return n.forEach(function(n,i){r.push({key:n,values:e(i,t)})}),u?r.sort(function(
n,t){return u(n.key,t.key)}):r}var u,f,t={},i=[],o=[];return t.map=function(n,t)
{return r(t,n,0)},t.entries=function(t){return e(r(n.map,t,0),0)},t.key=function(
n){return i.push(n),t},t.sortKeys=function(n){return o[i.length-1]=n,t},t.sortValues=
function(n){return u=n,t},t.rollup=function(n){return f=n,t},t};n.set=function(n)
{var i=new ne,t;if(n)for(t=0;t<n.length;t++)i.add(n[t]);return i};ic(ne,{has:function(
n){return ot+n in this},add:function(n){return this[ot+n]=!0,n},remove:function(
n){return n=ot+n,n in this&&delete this[n]},values:function(){var n=[];return this.
forEach(function(t){n.push(t)}),n},forEach:function(n){for(var t in this)t.charCodeAt(
0)===ws&&n.call(this,t.substring(1))}});n.behavior={};n.rebind=function(n,t){for(
var i,r=1,u=arguments.length;++r<u;)n[i=arguments[r]]=hw(n,t,t[i]);return n};bs=
["webkit","ms","moz","Moz","o","O"];st=lw;try{st(pt.childNodes)[0].nodeType}catch(trt)
{st=cw}n.dispatch=function(){for(var n=new ie,t=-1,i=arguments.length;++t<i;)n[arguments[
t]]=rc(n);return n};ie.prototype.on=function(n,t){var r=n.indexOf("."),i="";if(r>=
0&&(i=n.substring(r+1),n=n.substring(0,r)),n)return arguments.length<2?this[n].on(
i):this[n].on(i,t);if(2===arguments.length){if(null==t)for(n in this)this.hasOwnProperty(
n)&&this[n].on(i,null);return this}};n.event=null;n.requote=function(n){return n.
replace(wtt,"\\$&")};var wtt=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,au={}.__proto__?function(
n,t){n.__proto__=t}:function(n,t){for(var i in t)n[i]=t[i]},ks=function(n,t){return t.
querySelector(n)},ds=function(n,t){return t.querySelectorAll(n)},btt=pt[te(pt,"matchesSelector")],
py=function(n,t){return btt.call(n,t)};"function"==typeof Sizzle&&(ks=function(n,
t){return Sizzle(n,t)[0]||null},ds=function(n,t){return Sizzle.uniqueSort(Sizzle(
n,t))},py=Sizzle.matchesSelector);n.selection=function(){return gs};u=n.selection.
prototype=[];u.select=function(n){var i,f,e,t,o=[],r,s,u,h;for(n=ue(n),r=-1,s=this.
length;++r<s;)for(o.push(i=[]),i.parentNode=(e=this[r]).parentNode,u=-1,h=e.length;
++u<h;)(t=e[u])?(i.push(f=n.call(t,t.__data__,u,r)),f&&"__data__"in t&&(f.__data__=
t.__data__)):i.push(null);return at(o)};u.selectAll=function(n){var u,t,f=[],i,e;
for(n=fc(n),i=-1,e=this.length;++i<e;)for(var o=this[i],r=-1,s=o.length;++r<s;)(t=
o[r])&&(f.push(u=st(n.call(t,t.__data__,r,i))),u.parentNode=t);return at(f)};vu=
{svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",
xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};
n.ns={prefix:vu,qualify:function(n){var t=n.indexOf(":"),i=n;return t>=0&&(i=n.substring(
0,t),n=n.substring(t+1)),vu.hasOwnProperty(i)?{space:vu[i],local:n}:n}};u.attr=function(
t,i){if(arguments.length<2){if("string"==typeof t){var r=this.node();return t=n.
ns.qualify(t),t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}for(i in
t)this.each(ec(i,t[i]));return this}return this.each(ec(t,i))};u.classed=function(
n,t){if(arguments.length<2){if("string"==typeof n){var r=this.node(),u=(n=n.trim(
).split(/^|\s+/g)).length,i=-1;if(t=r.classList){for(;++i<u;)if(!t.contains(n[i]))
return!1}else for(t=r.getAttribute("class");++i<u;)if(!sc(n[i]).test(t))return!1;
return!0}for(t in n)this.each(hc(t,n[t]));return this}return this.each(hc(n,t))}
;u.style=function(n,t,i){var r=arguments.length;if(3>r){if("string"!=typeof n){2>
r&&(t="");for(i in n)this.each(cc(i,n[i],t));return this}if(2>r)return c.getComputedStyle(
this.node(),null).getPropertyValue(n);i=""}return this.each(cc(n,t,i))};u.property=
function(n,t){if(arguments.length<2){if("string"==typeof n)return this.node()[n];
for(t in n)this.each(lc(t,n[t]));return this}return this.each(lc(n,t))};u.text=function(
n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(
this,arguments);this.textContent=null==t?"":t}:null==n?function(){this.textContent=
""}:function(){this.textContent=n}):this.node().textContent};u.html=function(n){
return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(
this,arguments);this.innerHTML=null==t?"":t}:null==n?function(){this.innerHTML=""}
:function(){this.innerHTML=n}):this.node().innerHTML};u.append=function(n){return n=
ac(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})}
;u.insert=function(n,t){return n=ac(n),t=ue(t),this.select(function(){return this.
insertBefore(n.apply(this,arguments),t.apply(this,arguments))})};u.remove=function(
){return this.each(function(){var n=this.parentNode;n&&n.removeChild(this)})};u.
data=function(n,t){function e(n,i){var r,u,o,l=n.length,a=i.length,k=Math.min(l,
a),v=new Array(a),c=new Array(a),y=new Array(l);if(t){var e,p=new it,w=new it,b=
[];for(r=-1;++r<l;)e=t.call(u=n[r],u.__data__,r),p.has(e)?y[r]=u:p.set(e,u),b.push(
e);for(r=-1;++r<a;)e=t.call(i,o=i[r],r),(u=p.get(e))?(v[r]=u,u.__data__=o):w.has(
e)||(c[r]=fe(o)),w.set(e,o),p.remove(e);for(r=-1;++r<l;)p.has(b[r])&&(y[r]=n[r])
}else{for(r=-1;++r<k;)u=n[r],o=i[r],u?(u.__data__=o,v[r]=u):c[r]=fe(o);for(;a>r;
++r)c[r]=fe(i[r]);for(;l>r;++r)y[r]=n[r]}c.update=v;c.parentNode=v.parentNode=y.
parentNode=n.parentNode;s.push(c);f.push(v);h.push(y)}var r,o,i=-1,u=this.length;
if(!arguments.length){for(n=new Array(u=(r=this[0]).length);++i<u;)(o=r[i])&&(n[
i]=o.__data__);return n}var s=yc([]),f=at([]),h=at([]);if("function"==typeof n)for(
;++i<u;)e(r=this[i],n.call(r,r.parentNode.__data__,i));else for(;++i<u;)e(r=this[
i],n);return f.enter=function(){return s},f.exit=function(){return h},f};u.datum=
function(n){return arguments.length?this.property("__data__",n):this.property("__data__")}
;u.filter=function(n){var u,f,i,e=[],r,o,t,s;for("function"!=typeof n&&(n=vc(n))
,r=0,o=this.length;o>r;r++)for(e.push(u=[]),u.parentNode=(f=this[r]).parentNode,
t=0,s=f.length;s>t;t++)(i=f[t])&&n.call(i,i.__data__,t)&&u.push(i);return at(e)}
;u.order=function(){for(var i=-1,f=this.length;++i<f;)for(var t,r=this[i],u=r.length-
1,n=r[u];--u>=0;)(t=r[u])&&(n&&n!==t.nextSibling&&n.parentNode.insertBefore(t,n),
n=t);return this};u.sort=function(n){n=vw.apply(this,arguments);for(var t=-1,i=this.
length;++t<i;)this[t].sort(n);return this.order()};u.each=function(n){return vt(
this,function(t,i,r){n.call(t,t.__data__,i,r)})};u.call=function(n){var t=st(arguments);
return n.apply(t[0]=this,t),this};u.empty=function(){return!this.node()};u.node=
function(){for(var i,n=0,r=this.length;r>n;n++)for(var u=this[n],t=0,f=u.length;
f>t;t++)if(i=u[t],i)return i;return null};u.size=function(){var n=0;return this.
each(function(){++n}),n};nt=[];n.selection.enter=yc;n.selection.enter.prototype=
nt;nt.append=u.append;nt.empty=u.empty;nt.node=u.node;nt.call=u.call;nt.size=u.size;
nt.select=function(n){for(var i,h,r,e,o,t,u,s=[],f=-1,c=this.length;++f<c;)for(o=
(t=this[f]).update,s.push(r=[]),r.parentNode=t.parentNode,i=-1,h=t.length;++i<h;
)(u=t[i])?(r.push(o[i]=e=n.call(t.parentNode,u.__data__,i,f)),e.__data__=u.__data__)
:r.push(null);return at(s)};nt.insert=function(n,t){return arguments.length<2&&(t=
yw(this)),u.insert.call(this,n,t)};u.transition=function(){for(var i,n,r=lr||++bp,
u=[],o=pf||{time:Date.now(),ease:wk,delay:0,duration:250},f=-1,s=this.length;++f<
s;){u.push(i=[]);for(var e=this[f],t=-1,h=e.length;++t<h;)(n=e[t])&&eu(n,t,r,o),
i.push(n)}return ur(u,r)};n.select=function(n){var t=["string"==typeof n?ks(n,b):
n];return t.parentNode=pt,at([t])};n.selectAll=function(n){var t=st("string"==typeof
n?ds(n,b):n);return t.parentNode=pt,at([t])};gs=n.select(pt);u.on=function(n,t,i)
{var r=arguments.length;if(3>r){if("string"!=typeof n){2>r&&(t=!1);for(i in n)this.
each(pc(i,n[i],t));return this}if(2>r)return(r=this.node()["__on"+n])&&r._;i=!1}
return this.each(pc(n,t,i))};yu=n.map({mouseenter:"mouseover",mouseleave:"mouseout"});
yu.forEach(function(n){"on"+n in b&&yu.remove(n)});pu=te(pt.style,"userSelect");
wy=0;n.mouse=function(n){return bc(n,uc())};wu=/WebKit/.test(c.navigator.userAgent)?
-1:0;n.touches=function(n,t){return arguments.length<2&&(t=uc().touches),t?st(t).
map(function(t){var i=bc(n,t);return i.identifier=t.identifier,i}):[]};n.behavior.
drag=function(){function t(){this.on("mousedown.drag",o).on("touchstart.drag",h)}
function f(){return n.event.changedTouches[0].identifier}function e(t,i){return n.
touches(t).filter(function(n){return n.identifier===i})[0]}function r(t,r,f,e){return function(
){function b(){if(!v)return p();var n=r(v,h),t=n[0]-s[0],i=n[1]-s[1];w|=t|i;s=n;
y({type:"drag",x:n[0]+o[0],y:n[1]+o[1],dx:t,dy:i})}function p(){d.on(f+"."+l,null).
on(e+"."+l,null);g(w&&n.event.target===k);y({type:"dragend"})}var o,a=this,v=a.parentNode,
y=u.of(a,arguments),k=n.event.target,h=t(),l=null==h?"drag":"drag-"+h,s=r(v,h),w=
0,d=n.select(c).on(f+"."+l,b).on(e+"."+l,p),g=ar();i?(o=i.apply(a,arguments),o=[
o.x-s[0],o.y-s[1]]):o=[0,0];y({type:"dragstart"})}}var u=re(t,"drag","dragstart",
"dragend"),i=null,o=r(s,n.mouse,"mousemove","mouseup"),h=r(f,e,"touchmove","touchend");
return t.origin=function(n){return arguments.length?(i=n,t):i},n.rebind(t,u,"on")}
;n.behavior.zoom=function(){function r(){this.on(tt,ut).on(by+".zoom",et).on(p,g).
on("dblclick.zoom",ot).on("touchstart.zoom",ft)}function f(n){return[(n[0]-i[0])
/t,(n[1]-i[1])/t]}function rt(n){return[n[0]*t+i[0],n[1]*t+i[1]]}function h(n){t=
Math.max(y[0],Math.min(y[1],n))}function e(n,t){t=rt(t);i[0]+=n[0]-t[0];i[1]+=n[
1]-t[1]}function w(){a&&a.domain(b.range().map(function(n){return(n-i[0])/t}).map(
b.invert));v&&v.domain(k.range().map(function(n){return(n-i[1])/t}).map(k.invert))}
function o(n){w();n({type:"zoom",scale:t,translate:i})}function ut(){function r(
){i=1;e(n.mouse(t),v);o(h)}function u(){a.on(p,c===t?g:null).on(it,null);y(i&&n.
event.target===l)}var t=this,h=s.of(t,arguments),l=n.event.target,i=0,a=n.select(
c).on(p,r).on(it,u),v=f(n.mouse(t)),y=ar()}function ft(){function ft(){var y=n.touches(
a),t=y[0],f=u[t.identifier],i,c,s,r;(i=y[1])&&(c=u[i.identifier],s=n.event.scale,
null==s&&(r=(r=i[0]-t[0])*r+(r=i[1]-t[1])*r,s=l&&Math.sqrt(r/l)),t=[(t[0]+i[0])/
2,(t[1]+i[1])/2],f=[(f[0]+c[0])/2,(f[1]+c[1])/2],h(s*nt));d=null;e(t,f);o(v)}function et(
){ot.on(b,null).on(k,null);st()}var a=this,v=s.of(a,arguments),i=n.touches(a),y=
Date.now(),w="zoom-"+n.event.changedTouches[0].identifier,b="touchmove."+w,k="touchend."+
w,ot=n.select(c).on(b,ft).on(k,et).on(tt,null).on(p,null),st=ar(),r,g;if(nt=t,u=
{},l=0,i.forEach(function(n){u[n.identifier]=f(n)}),1===i.length)500>y-d&&(r=i[0],
g=f(i[0]),h(2*t),e(r,g),lt(),o(v)),d=y;else if(i.length>1){var r=i[0],it=i[1],rt=
r[0]-it[0],ut=r[1]-it[1];l=rt*rt+ut*ut}}function et(){lt();u||(u=f(n.mouse(this)))
;h(Math.pow(2,.002*bu())*t);e(n.mouse(this),u);o(s.of(this,arguments))}function g(
){u=null}function ot(){var i=n.mouse(this),u=f(i),r=Math.log(t)/Math.LN2;h(Math.
pow(2,n.event.shiftKey?Math.ceil(r)-1:Math.floor(r)+1));e(i,u);o(s.of(this,arguments))}
var u,l,nt,b,a,k,v,d,i=[0,0],t=1,y=nh,tt="mousedown.zoom",p="mousemove.zoom",it=
"mouseup.zoom",s=re(r,"zoom");return r.translate=function(n){return arguments.length?
(i=n.map(Number),w(),r):i},r.scale=function(n){return arguments.length?(t=+n,w(),
r):t},r.scaleExtent=function(n){return arguments.length?(y=null==n?nh:n.map(Number),
r):y},r.x=function(n){return arguments.length?(a=n,b=n.copy(),i=[0,0],t=1,r):a},
r.y=function(n){return arguments.length?(v=n,k=n.copy(),i=[0,0],t=1,r):v},n.rebind(
r,s,"on")};nh=[0,1/0];by="onwheel"in b?(bu=function(){return-n.event.deltaY*(n.event.
deltaMode?120:1)},"wheel"):"onmousewheel"in b?(bu=function(){return n.event.wheelDelta}
,"mousewheel"):(bu=function(){return-n.event.detail},"MozMousePixelScroll");ai.prototype.
toString=function(){return this.rgb()+""};n.hsl=function(n,t,i){return 1===arguments.
length?n instanceof ee?vi(n.h,n.s,n.l):ve(""+n,il,vi):vi(+n,+t,+i)};ku=ee.prototype=
new ai;ku.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),vi(this.
h,this.s,this.l/n)};ku.darker=function(n){return n=Math.pow(.7,arguments.length?
n:1),vi(this.h,this.s,n*this.l)};ku.rgb=function(){return oe(this.h,this.s,this.
l)};var t=Math.PI,i=1e-6,ky=i*i,r=t/180,e=180/t;n.hcl=function(t,i,r){return 1===
arguments.length?t instanceof vr?yi(t.h,t.c,t.l):t instanceof yr?tl(t.l,t.a,t.b):
tl((t=rl((t=n.rgb(t)).r,t.g,t.b)).l,t.a,t.b):yi(+t,+i,+r)};du=vr.prototype=new ai;
du.brighter=function(n){return yi(this.h,this.c,Math.min(100,this.l+gu*(arguments.
length?n:1)))};du.darker=function(n){return yi(this.h,this.c,Math.max(0,this.l-gu*
(arguments.length?n:1)))};du.rgb=function(){return nl(this.h,this.c,this.l).rgb(
)};n.lab=function(t,i,r){return 1===arguments.length?t instanceof yr?pi(t.l,t.a,
t.b):t instanceof vr?nl(t.l,t.c,t.h):rl((t=n.rgb(t)).r,t.g,t.b):pi(+t,+i,+r)};var
gu=18,dy=.95047,gy=1,np=1.08883,th=yr.prototype=new ai;th.brighter=function(n){return pi(
Math.min(100,this.l+gu*(arguments.length?n:1)),this.a,this.b)};th.darker=function(
n){return pi(Math.max(0,this.l-gu*(arguments.length?n:1)),this.a,this.b)};th.rgb=
function(){return kw(this.l,this.a,this.b)};n.rgb=function(n,t,i){return 1===arguments.
length?n instanceof le?rt(n.r,n.g,n.b):ve(""+n,rt,oe):rt(~~n,~~t,~~i)};fr=le.prototype=
new ai;fr.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var i=this.r,
r=this.g,u=this.b,t=30;return i||r||u?(i&&t>i&&(i=t),r&&t>r&&(r=t),u&&t>u&&(u=t)
,rt(Math.min(255,Math.floor(i/n)),Math.min(255,Math.floor(r/n)),Math.min(255,Math.
floor(u/n)))):rt(t,t,t)};fr.darker=function(n){return n=Math.pow(.7,arguments.length?
n:1),rt(Math.floor(n*this.r),Math.floor(n*this.g),Math.floor(n*this.b))};fr.hsl=
function(){return il(this.r,this.g,this.b)};fr.toString=function(){return"#"+ae(
this.r)+ae(this.g)+ae(this.b)};er=n.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",
aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",
black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:
"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:
"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",
cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:
"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:
"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:
"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:
"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:
"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",
firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",
gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:
"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",
hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",
lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",
lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:
"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:
"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:
"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",
lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",
mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:
"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",
mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:
"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",
oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:
"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:
"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:
"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:
"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",
sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:
"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",
snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",
thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",
white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});er.
forEach(function(n,t){er.set(n,ve(t,rt,oe))});n.functor=f;n.xhr=we(a);n.dsv=function(
t,i){function r(t,r,u){arguments.length<3&&(u=r,r=null);var o=n.xhr(t,i,u);return o.
row=function(n){return arguments.length?o.response(null==(r=n)?f:e(n)):r},o.row(
r)}function f(n){return r.parse(n.responseText)}function e(n){return function(t)
{return r.parse(t.responseText,n)}}function o(n){return n.map(u).join(t)}function u(
n){return s.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}var s=new RegExp('["'+t+"\n]"),
h=t.charCodeAt(0);return r.parse=function(n,t){var i;return r.parseRows(n,function(
n,r){if(i)return i(n,r-1);var u=new Function("d","return {"+n.map(function(n,t){
return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}");i=t?function(n,i){return t(
u(n),i)}:u})},r.parseRows=function(n,t){function s(){var f,t,u,s;if(i>=o)return e;
if(r)return r=!1,c;if(f=i,34===n.charCodeAt(f)){for(t=f;t++<o;)if(34===n.charCodeAt(
t)){if(34!==n.charCodeAt(t+1))break;++t}return i=t+2,u=n.charCodeAt(t+1),13===u?
(r=!0,10===n.charCodeAt(t+2)&&++i):10===u&&(r=!0),n.substring(f+1,t).replace(/""/g,
'"')}for(;o>i;){if(u=n.charCodeAt(i++),s=1,10===u)r=!0;else if(13===u)r=!0,10===
n.charCodeAt(i)&&(++i,++s);else if(u!==h)continue;return n.substring(f,i-s)}return n.
substring(f)}for(var f,u,r,c={},e={},l=[],o=n.length,i=0,a=0;(u=s())!==e;){for(f=
[];u!==c&&u!==e;)f.push(u),u=s();(!t||(f=t(f,a++)))&&l.push(f)}return l},r.format=
function(n){if(Array.isArray(n[0]))return r.formatRows(n);var f=new ne,i=[];return n.
forEach(function(n){for(var t in n)f.has(t)||i.push(f.add(t))}),[i.map(u).join(t)].
concat(n.map(function(n){return i.map(function(t){return u(n[t])}).join(t)})).join(
"\n")},r.formatRows=function(n){return n.map(o).join("\n")},r};n.csv=n.dsv(",","text/csv");
n.tsv=n.dsv("\t","text/tab-separated-values");n.timer=function(n,t,i){if(arguments.
length<3){if(arguments.length<2)t=0;else if(!isFinite(t))return;i=Date.now()}var
u=i+t,r={callback:n,time:u,next:null};tf?tf.next=r:nf=r;tf=r;rf||(uf=clearTimeout(
uf),rf=1,tp(ke))};n.timer.flush=function(){ul();fl()};var tp=c[te(c,"requestAnimationFrame")]||
function(n){setTimeout(n,17)},ktt=".",dtt=",",ff=[3,3],gtt="$",nit=["y","z","a",
"f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(gw);n.formatPrefix=function(
t,i){var r=0;return t&&(0>t&&(t*=-1),i&&(t=n.round(t,de(t,i))),r=1+Math.floor(1e-12+
Math.log(t)/Math.LN10),r=Math.max(-24,Math.min(24,3*Math.floor((0>=r?r+1:r-1)/3))))
,nit[8+r/3]};n.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.
round(n)};n.format=function(t){var u=ip.exec(t),v=u[1]||" ",e=u[2]||">",p=u[3]||
"",f=u[4]||"",s=u[5],h=+u[6],c=u[7],r=u[8],i=u[9],o=1,l="",y=!1,a;switch(r&&(r=+r.
substring(1)),(s||"0"===v&&"="===e)&&(s=v="0",e="=",c&&(h-=Math.floor((h-1)/4)))
,i){case"n":c=!0;i="g";break;case"%":o=100;l="%";i="f";break;case"p":o=100;l="%";
i="r";break;case"b":case"o":case"x":case"X":"#"===f&&(f="0"+i.toLowerCase());case"c":
case"d":y=!0;r=0;break;case"s":o=-1;i="r"}return"#"===f?f="":"$"===f&&(f=gtt),"r"!=
i||r||(i="g"),null!=r&&("g"==i?r=Math.max(1,Math.min(21,r)):("e"==i||"f"==i)&&(r=
Math.max(0,Math.min(20,r)))),i=tit.get(i)||nb,a=s&&c,function(t){var u,g,k,w;if(
y&&t%1)return"";u=0>t||0===t&&0>1/t?(t=-t,"-"):p;0>o?(g=n.formatPrefix(t,r),t=g.
scale(t),l=g.symbol):t*=o;t=i(t,r);var d=t.lastIndexOf("."),b=0>d?t:t.substring(
0,d),nt=0>d?"":ktt+t.substring(d+1);return!s&&c&&(b=ih(b)),k=f.length+b.length+nt.
length+(a?0:u.length),w=h>k?new Array(k=h-k+1).join(v):"",a&&(b=ih(w+b)),u+=f,t=
b+nt,("<"===e?u+t+w:">"===e?w+u+t:"^"===e?w.substring(0,k>>=1)+u+t+w.substring(k):
u+(a?t:w+t))+l}};var ip=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,
tit=n.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(
n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(
n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)}
,e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)}
,r:function(t,i){return(t=n.round(t,de(t,i))).toFixed(Math.max(0,Math.min(20,de(
t*(1+1e-15),i))))}}),ih=a;ff&&(rp=ff.length,ih=function(n){for(var i=n.length,r=
[],u=0,t=ff[0];i>0&&t>0;)r.push(n.substring(i-=t,i+t)),t=ff[u=(u+1)%rp];return r.
reverse().join(dtt)});n.geo={};ge.prototype={s:0,t:0,add:function(n){el(n,this.t,
or);el(or.s,this.s,this);this.s?this.t+=or.t:this.s=or.t},reset:function(){this.
s=this.t=0},valueOf:function(){return this.s}};or=new ge;n.geo.stream=function(n,
t){n&&rh.hasOwnProperty(n.type)?rh[n.type](n,t):pr(n,t)};rh={Feature:function(n,
t){pr(n.geometry,t)},FeatureCollection:function(n,t){for(var i=n.features,r=-1,u=
i.length;++r<u;)pr(i[r].geometry,t)}};uh={Sphere:function(n,t){t.sphere()},Point:
function(n,t){var i=n.coordinates;t.point(i[0],i[1])},MultiPoint:function(n,t){for(
var i,r=n.coordinates,u=-1,f=r.length;++u<f;)i=r[u],t.point(i[0],i[1])},LineString:
function(n,t){no(n.coordinates,t,0)},MultiLineString:function(n,t){for(var i=n.coordinates,
r=-1,u=i.length;++r<u;)no(i[r],t,0)},Polygon:function(n,t){ol(n.coordinates,t)},
MultiPolygon:function(n,t){for(var i=n.coordinates,r=-1,u=i.length;++r<u;)ol(i[r],
t)},GeometryCollection:function(n,t){for(var i=n.geometries,r=-1,u=i.length;++r<
u;)pr(i[r],t)}};n.geo.area=function(t){return ef=0,n.geo.stream(t,y),ef};wt=new ge;
y={sphere:function(){ef+=4*t},point:s,lineStart:s,lineEnd:s,polygonStart:function(
){wt.reset();y.lineStart=tb},polygonEnd:function(){var n=2*wt;ef+=0>n?4*t+n:n;y.
lineStart=y.lineEnd=y.point=s}};n.geo.bounds=function(){function w(n,i){a.push(c=
[t=n,u=n]);o>i&&(o=i);i>s&&(s=i)}function b(n,i){var k=ri([n*r,i*r]),a;if(v){var
p=wi(v,k),g=[p[1],-p[0],0],h=wi(g,p);kr(h);h=dr(h);var d=n-l,y=d>0?1:-1,c=h[0]*e*
y,b=Math.abs(d)>180;b^(c>y*l&&y*n>c)?(a=h[1]*e,a>s&&(s=a)):(c=(c+360)%360-180,b^
(c>y*l&&y*n>c))?(a=-h[1]*e,o>a&&(o=a)):(o>i&&(o=i),i>s&&(s=i));b?l>n?f(t,n)>f(t,
u)&&(u=n):f(n,u)>f(t,u)&&(t=n):u>=t?(t>n&&(t=n),n>u&&(u=n)):n>l?f(t,n)>f(t,u)&&(u=
n):f(n,u)>f(t,u)&&(t=n)}else w(n,i);v=k;l=n}function k(){h.point=b}function d(){
c[0]=t;c[1]=u;h.point=w;v=null}function g(n,t){if(v){var i=n-l;p+=Math.abs(i)>180?
i+(i>0?360:-360):i}else tt=n,it=t;y.point(n,t);b(n,t)}function rt(){y.lineStart(
)}function ut(){g(tt,it);y.lineEnd();Math.abs(p)>i&&(t=-(u=180));c[0]=t;c[1]=u;v=
null}function f(n,t){return(t-=n)<0?t+360:t}function ft(n,t){return n[0]-t[0]}function nt(
n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var t,o,u,s,l,tt,it,v,p,a,
c,h={point:w,lineStart:k,lineEnd:d,polygonStart:function(){h.point=g;h.lineStart=
rt;h.lineEnd=ut;p=0;y.polygonStart()},polygonEnd:function(){y.polygonEnd();h.point=
w;h.lineStart=k;h.lineEnd=d;0>wt?(t=-(u=180),o=-(s=90)):p>i?s=90:-i>p&&(o=-90);c[
0]=t;c[1]=u}};return function(i){var v;if(s=u=-(t=o=1/0),a=[],n.geo.stream(i,h),
v=a.length,v){a.sort(ft);for(var e,l=1,r=a[0],y=[r];v>l;++l)e=a[l],nt(e[0],r)||nt(
e[1],r)?(f(r[0],e[1])>f(r[0],r[1])&&(r[1]=e[1]),f(e[0],r[1])>f(r[0],r[1])&&(r[0]=
e[0])):y.push(r=e);for(var p,e,w=-1/0,v=y.length-1,l=0,r=y[v];v>=l;r=e,++l)e=y[l],
(p=f(r[1],e[0]))>w&&(w=p,t=e[0],u=r[1])}return a=c=null,1/0===t||1/0===o?[[NaN,NaN],
[NaN,NaN]]:[[t,o],[u,s]]}}();n.geo.centroid=function(t){sr=of=hi=ci=ht=bt=kt=tt=
bi=ki=dt=0;n.geo.stream(t,k);var r=bi,u=ki,f=dt,o=r*r+u*u+f*f;return ky>o&&(r=bt,
u=kt,f=tt,i>of&&(r=hi,u=ci,f=ht),o=r*r+u*u+f*f,ky>o)?[NaN,NaN]:[Math.atan2(u,r)*
e,ii(f/Math.sqrt(o))*e]};var sr,of,hi,ci,ht,bt,kt,tt,bi,ki,dt,k={sphere:s,point:
io,lineStart:sl,lineEnd:hl,polygonStart:function(){k.lineStart=ib},polygonEnd:function(
){k.lineStart=sl}},up=al(gi,fb,ob,sb),iit=[-t,0],sf=1e9;(n.geo.conicEqualArea=function(
){return ro(wl)}).raw=wl;n.geo.albers=function(){return n.geo.conicEqualArea().rotate(
[96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};n.geo.albersUsa=function(
){function r(n){var t=n[0],i=n[1];return u=null,s(t,i),u||(h(t,i),u)||c(t,i),u}var
u,s,h,c,t=n.geo.albers(),f=n.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).
parallels([55,65]),e=n.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels(
[8,18]),o={point:function(n,t){u=[n,t]}};return r.invert=function(n){var u=t.scale(
),o=t.translate(),i=(n[0]-o[0])/u,r=(n[1]-o[1])/u;return(r>=.12&&.234>r&&i>=-.425&&
-.214>i?f:r>=.166&&.234>r&&i>=-.214&&-.115>i?e:t).invert(n)},r.stream=function(n)
{var i=t.stream(n),r=f.stream(n),u=e.stream(n);return{point:function(n,t){i.point(
n,t);r.point(n,t);u.point(n,t)},sphere:function(){i.sphere();r.sphere();u.sphere(
)},lineStart:function(){i.lineStart();r.lineStart();u.lineStart()},lineEnd:function(
){i.lineEnd();r.lineEnd();u.lineEnd()},polygonStart:function(){i.polygonStart();
r.polygonStart();u.polygonStart()},polygonEnd:function(){i.polygonEnd();r.polygonEnd(
);u.polygonEnd()}}},r.precision=function(n){return arguments.length?(t.precision(
n),f.precision(n),e.precision(n),r):t.precision()},r.scale=function(n){return arguments.
length?(t.scale(n),f.scale(.35*n),e.scale(n),r.translate(t.translate())):t.scale(
)},r.translate=function(n){if(!arguments.length)return t.translate();var u=t.scale(
),l=+n[0],a=+n[1];return s=t.translate(n).clipExtent([[l-.455*u,a-.238*u],[l+.455*
u,a+.238*u]]).stream(o).point,h=f.translate([l-.307*u,a+.201*u]).clipExtent([[l-
.425*u+i,a+.12*u+i],[l-.214*u-i,a+.234*u-i]]).stream(o).point,c=e.translate([l-.205*
u,a+.212*u]).clipExtent([[l-.214*u+i,a+.166*u+i],[l-.115*u-i,a+.234*u-i]]).stream(
o).point,r},r.scale(1070)};var fh,eh,hf,cf,lf,af,gt={point:s,lineStart:s,lineEnd:
s,polygonStart:function(){eh=0;gt.lineStart=lb},polygonEnd:function(){gt.lineStart=
gt.lineEnd=gt.point=s;fh+=Math.abs(eh/2)}},rit={point:ab,lineStart:s,lineEnd:s,polygonStart:
s,polygonEnd:s},d={point:ui,lineStart:kl,lineEnd:dl,polygonStart:function(){d.lineStart=
yb},polygonEnd:function(){d.point=ui;d.lineStart=kl;d.lineEnd=dl}};n.geo.path=function(
){function t(t){return t&&("function"==typeof r&&i.pointRadius(+r.apply(this,arguments)),
f&&f.valid||(f=u(i)),n.geo.stream(t,f)),i.result()}function e(){return f=null,t}
var o,s,u,i,f,r=4.5;return t.area=function(t){return fh=0,n.geo.stream(t,u(gt)),
fh},t.centroid=function(t){return hi=ci=ht=bt=kt=tt=bi=ki=dt=0,n.geo.stream(t,u(
d)),dt?[bi/dt,ki/dt]:tt?[bt/tt,kt/tt]:ht?[hi/ht,ci/ht]:[NaN,NaN]},t.bounds=function(
t){return lf=af=-(hf=cf=1/0),n.geo.stream(t,u(rit)),[[hf,cf],[lf,af]]},t.projection=
function(n){return arguments.length?(u=(o=n)?n.stream||wb(n):a,e()):o},t.context=
function(n){return arguments.length?(i=null==(s=n)?new vb:new pb(n),"function"!=
typeof r&&i.pointRadius(r),e()):s},t.pointRadius=function(n){return arguments.length?
(r="function"==typeof n?n:(i.pointRadius(+n),+n),t):r},t.projection(n.geo.albersUsa(
)).context(null)};n.geo.projection=yt;n.geo.projectionMutator=uo;(n.geo.equirectangular=
function(){return yt(nr)}).raw=nr.invert=nr;n.geo.rotation=function(n){function t(
t){return t=n(t[0]*r,t[1]*r),t[0]*=e,t[1]*=e,t}return n=fo(n[0]%360*r,n[1]*r,n.length>
2?n[2]*r:0),t.invert=function(t){return t=n.invert(t[0]*r,t[1]*r),t[0]*=e,t[1]*=
e,t},t};n.geo.circle=function(){function n(){var n="function"==typeof t?t.apply(
this,arguments):t,f=fo(-n[0]*r,-n[1]*r,0).invert,i=[];return u(null,null,1,{point:
function(n,t){i.push(n=f(n,t));n[0]*=e;n[1]*=e}}),{type:"Polygon",coordinates:[i]}}
var i,u,t=[0,0],f=6;return n.origin=function(i){return arguments.length?(t=i,n):
t},n.angle=function(t){return arguments.length?(u=eo((i=+t)*r,f*r),n):i},n.precision=
function(t){return arguments.length?(u=eo(i*r,(f=+t)*r),n):f},n.angle(90)};n.geo.
distance=function(n,t){var i,f=(t[0]-n[0])*r,e=n[1]*r,o=t[1]*r,a=Math.sin(f),s=Math.
cos(f),h=Math.sin(e),c=Math.cos(e),l=Math.sin(o),u=Math.cos(o);return Math.atan2(
Math.sqrt((i=u*a)*i+(i=c*l-h*u*s)*i),h*l+c*u*s)};n.geo.graticule=function(){function t(
){return{type:"MultiLineString",coordinates:k()}}function k(){return n.range(Math.
ceil(u/a)*a,r,a).map(w).concat(n.range(Math.ceil(e/v)*v,f,v).map(b)).concat(n.range(
Math.ceil(s/l)*l,o,l).filter(function(n){return Math.abs(n%a)>i}).map(d)).concat(
n.range(Math.ceil(c/p)*p,h,p).filter(function(n){return Math.abs(n%v)>i}).map(g))}
var o,s,r,u,h,c,f,e,d,g,w,b,l=10,p=l,a=90,v=360,y=2.5;return t.lines=function(){
return k().map(function(n){return{type:"LineString",coordinates:n}})},t.outline=
function(){return{type:"Polygon",coordinates:[w(u).concat(b(f).slice(1),w(r).reverse(
).slice(1),b(e).reverse().slice(1))]}},t.extent=function(n){return arguments.length?
t.majorExtent(n).minorExtent(n):t.minorExtent()},t.majorExtent=function(n){return arguments.
length?(u=+n[0][0],r=+n[1][0],e=+n[0][1],f=+n[1][1],u>r&&(n=u,u=r,r=n),e>f&&(n=e,
e=f,f=n),t.precision(y)):[[u,e],[r,f]]},t.minorExtent=function(n){return arguments.
length?(s=+n[0][0],o=+n[1][0],c=+n[0][1],h=+n[1][1],s>o&&(n=s,s=o,o=n),c>h&&(n=c,
c=h,h=n),t.precision(y)):[[s,c],[o,h]]},t.step=function(n){return arguments.length?
t.majorStep(n).minorStep(n):t.minorStep()},t.majorStep=function(n){return arguments.
length?(a=+n[0],v=+n[1],t):[a,v]},t.minorStep=function(n){return arguments.length?
(l=+n[0],p=+n[1],t):[l,p]},t.precision=function(n){return arguments.length?(y=+n,
d=ua(c,h,90),g=fa(s,o,y),w=ua(e,f,90),b=fa(u,r,y),t):y},t.majorExtent([[-180,-90+
i],[180,90-i]]).minorExtent([[-180,-80-i],[180,80+i]])};n.geo.greatArc=function(
){function t(){return{type:"LineString",coordinates:[u||i.apply(this,arguments),
f||r.apply(this,arguments)]}}var u,f,i=oo,r=so;return t.distance=function(){return n.
geo.distance(u||i.apply(this,arguments),f||r.apply(this,arguments))},t.source=function(
n){return arguments.length?(i=n,u="function"==typeof n?null:n,t):i},t.target=function(
n){return arguments.length?(r=n,f="function"==typeof n?null:n,t):r},t.precision=
function(){return arguments.length?t:0},t};n.geo.interpolate=function(n,t){return kb(
n[0]*r,n[1]*r,t[0]*r,t[1]*r)};n.geo.length=function(t){return oh=0,n.geo.stream(
t,li),oh};li={sphere:s,point:s,lineStart:db,lineEnd:s,polygonStart:s,polygonEnd:
s};sh=tr(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/
2)});(n.geo.azimuthalEqualArea=function(){return yt(sh)}).raw=sh;hh=tr(function(
n){var t=Math.acos(n);return t&&t/Math.sin(t)},a);(n.geo.azimuthalEquidistant=function(
){return yt(hh)}).raw=hh;(n.geo.conicConformal=function(){return ro(ea)}).raw=ea;
(n.geo.conicEquidistant=function(){return ro(oa)}).raw=oa;ch=tr(function(n){return 1/
n},Math.atan);(n.geo.gnomonic=function(){return yt(ch)}).raw=ch;tu.invert=function(
n,i){return[n,2*Math.atan(Math.exp(i))-t/2]};(n.geo.mercator=function(){return sa(
tu)}).raw=tu;lh=tr(function(){return 1},Math.asin);(n.geo.orthographic=function(
){return yt(lh)}).raw=lh;ah=tr(function(n){return 1/(1+n)},function(n){return 2*
Math.atan(n)});(n.geo.stereographic=function(){return yt(ah)}).raw=ah;ho.invert=
function(n,t){return[Math.atan2(ww(n),Math.cos(t)),ii(Math.sin(t)/bw(n))]};(n.geo.
transverseMercator=function(){return sa(ho)}).raw=ho;n.geom={};n.svg={};n.svg.line=
function(){return ha(a)};vf=n.map({linear:p,"linear-closed":gb,step:nk,"step-before":
co,"step-after":lo,basis:ca,"basis-open":uk,"basis-closed":fk,bundle:ek,cardinal:
rk,"cardinal-open":tk,"cardinal-closed":ik,monotone:hk});vf.forEach(function(n,t)
{t.key=n;t.closed=/-closed$/.test(n)});var fp=[0,2/3,1/3,0],ep=[0,1/3,2/3,0],ni=
[0,1/6,2/3,1/6];n.geom.hull=function(n){function t(n){var d;if(n.length<3)return[
];var u,nt,t,o,l,a,p,w,b,v,k,c,tt=f(r),rt=f(i),y=n.length,it=y-1,e=[],h=[],s=0;if(
tt===g&&i===ut)u=n;else for(t=0,u=[];y>t;++t)u.push([+tt.call(this,nt=n[t],t),+rt.
call(this,nt,t)]);for(t=1;y>t;++t)(u[t][1]<u[s][1]||u[t][1]==u[s][1]&&u[t][0]<u[
s][0])&&(s=t);for(t=0;y>t;++t)t!==s&&(a=u[t][1]-u[s][1],l=u[t][0]-u[s][0],e.push(
{angle:Math.atan2(a,l),index:t}));for(e.sort(function(n,t){return n.angle-t.angle}
),k=e[0].angle,v=e[0].index,b=0,t=1;it>t;++t){if(o=e[t].index,k==e[t].angle){if(
l=u[v][0]-u[s][0],a=u[v][1]-u[s][1],p=u[o][0]-u[s][0],w=u[o][1]-u[s][1],l*l+a*a>=
p*p+w*w){e[t].index=-1;continue}e[b].index=-1}k=e[t].angle;b=t;v=o}for(h.push(s),
t=0,o=0;2>t;++o)e[o].index>-1&&(h.push(e[o].index),t++);for(c=h.length;it>o;++o)
if(!(e[o].index<0)){for(;!ck(h[c-2],h[c-1],e[o].index,u);)--c;h[c++]=e[o].index}
for(d=[],t=c-1;t>=0;--t)d.push(n[h[t]]);return d}var r=g,i=ut;return arguments.length?
t(n):(t.x=function(n){return arguments.length?(r=n,t):r},t.y=function(n){return arguments.
length?(i=n,t):i},t)};n.geom.polygon=function(n){return au(n,hr),n};hr=n.geom.polygon.
prototype=[];hr.area=function(){for(var t,i=-1,r=this.length,n=this[r-1],u=0;++i<
r;)t=n,n=this[i],u+=t[1]*n[0]-t[0]*n[1];return.5*u};hr.centroid=function(n){var i,
r,u=-1,f=this.length,e=0,o=0,t=this[f-1];for(arguments.length||(n=-1/(6*this.area(
)));++u<f;)i=t,t=this[u],r=i[0]*t[1]-t[0]*i[1],e+=(i[0]+t[0])*r,o+=(i[1]+t[1])*r;
return[e*n,o*n]};hr.clip=function(n){for(var f,e,o,t,i,r,s=aa(n),h=-1,c=this.length-
aa(this),u=this[c-1];++h<c;){for(f=n.slice(),n.length=0,t=this[h],i=f[(o=f.length-
s)-1],e=-1;++e<o;)r=f[e],po(r,u,t)?(po(i,u,t)||n.push(la(i,r,u,t)),n.push(r)):po(
i,u,t)&&n.push(la(i,r,u,t)),i=r;s&&n.push(n[0]);u=t}return n};n.geom.delaunay=function(
n){var t=n.map(function(){return[]}),i=[];return wo(n,function(i){t[i.region.l.index].
push(n[i.region.r.index])}),t.forEach(function(t,r){var f=n[r],o=f[0],s=f[1],u,e;
for(t.forEach(function(n){n.angle=Math.atan2(n[0]-o,n[1]-s)}),t.sort(function(n,
t){return n.angle-t.angle}),u=0,e=t.length-1;e>u;u++)i.push([f,t[u],t[u+1]])}),i}
;n.geom.voronoi=function(t){function r(t){var c,a,s,h=t.map(function(){return[]}
),v=f(e),y=f(o),l=t.length,r=1e6;if(v===g&&y===ut)c=t;else for(c=new Array(l),s=
0;l>s;++s)c[s]=[+v.call(this,a=t[s],s),+y.call(this,a,s)];if(wo(c,function(n){var
t,i,u,f,e,o,s,c;1===n.a&&n.b>=0?(t=n.ep.r,i=n.ep.l):(t=n.ep.l,i=n.ep.r);1===n.a?
(e=t?t.y:-r,u=n.c-n.b*e,o=i?i.y:r,f=n.c-n.b*o):(u=t?t.x:-r,e=n.c-n.a*u,f=i?i.x:r,
o=n.c-n.a*f);s=[u,e];c=[f,o];h[n.region.l.index].push(s,c);h[n.region.r.index].push(
s,c)}),h=h.map(function(t,r){var e=c[r][0],o=c[r][1],u=t.map(function(n){return Math.
atan2(n[0]-e,n[1]-o)}),f=n.range(t.length).sort(function(n,t){return u[n]-u[t]});
return f.filter(function(n,t){return!t||u[n]-u[f[t-1]]>i}).map(function(n){return t[
n]})}),h.forEach(function(n,t){var l=n.length,s,u,h;if(!l)return n.push([-r,-r],
[-r,r],[r,r],[r,-r]);if(!(l>2)){var a=c[t],v=n[0],y=n[1],p=a[0],w=a[1],f=v[0],e=
v[1],b=y[0],k=y[1],d=Math.abs(b-f),o=k-e;Math.abs(o)<i?(u=e>w?-r:r,n.push([-r,u],
[r,u])):i>d?(s=f>p?-r:r,n.push([s,-r],[s,r])):(u=(f-p)*(k-e)>(b-f)*(e-w)?r:-r,h=
Math.abs(o)-d,Math.abs(h)<i?n.push([0>o?u:-u,u]):(h>0&&(u*=-1),n.push([-r,u],[r,
u])))}}),u)for(s=0;l>s;++s)u.clip(h[s]);for(s=0;l>s;++s)h[s].point=t[s];return h}
var e=g,o=ut,u=null;return arguments.length?r(t):(r.x=function(n){return arguments.
length?(e=n,r):e},r.y=function(n){return arguments.length?(o=n,r):o},r.clipExtent=
function(t){if(!arguments.length)return u&&[u[0],u[2]];if(null==t)u=null;else{var
i=+t[0][0],f=+t[0][1],e=+t[1][0],o=+t[1][1];u=n.geom.polygon([[i,f],[i,o],[e,o],
[e,f]])}return r},r.size=function(n){return arguments.length?r.clipExtent(n&&[[0,
0],n]):u&&u[2]},r.links=function(n){var i,u,t,r=n.map(function(){return[]}),s=[],
h=f(e),c=f(o),l=n.length;if(h===g&&c===ut)i=n;else for(i=new Array(l),t=0;l>t;++t)
i[t]=[+h.call(this,u=n[t],t),+c.call(this,u,t)];return wo(i,function(t){var i=t.
region.l.index,u=t.region.r.index;r[i][u]||(r[i][u]=r[u][i]=!0,s.push({source:n[
i],target:n[u]}))}),s},r.triangles=function(t){if(e===g&&o===ut)return n.geom.delaunay(
t);for(var r,u=new Array(s),h=f(e),c=f(o),i=-1,s=t.length;++i<s;)(u[i]=[+h.call(
this,r=t[i],i),+c.call(this,r,i)]).data=r;return n.geom.delaunay(u).map(function(
n){return n.map(function(n){return n.data})})},r)};yf={l:"r",r:"l"};n.geom.quadtree=
function(n,t,i,r,u){function e(n){function tt(n,t,i,r,u,f,e,o){var s,h,c;isNaN(i)||
isNaN(r)||(n.leaf?(s=n.x,h=n.y,null!=s?Math.abs(s-i)+Math.abs(h-r)<.01?g(n,t,i,r,
u,f,e,o):(c=n.point,n.x=n.y=n.point=null,g(n,c,s,h,u,f,e,o),g(n,t,i,r,u,f,e,o)):
(n.x=i,n.y=r,n.point=t)):g(n,t,i,r,u,f,e,o))}function g(n,t,i,r,u,f,e,o){var s=.5*
(u+e),h=.5*(f+o),c=i>=s,l=r>=h,a=(l<<1)+c;n.leaf=!1;n=n.nodes[a]||(n.nodes[a]=va(
));c?u=s:e=s;l?f=h:o=h;tt(n,t,i,r,u,f,e,o)}var c,k,d,e,nt,l,a,v,y,ut=f(o),ft=f(s),
w,b,it,rt,p;if(null!=t)l=t,a=i,v=r,y=u;else if(v=y=-(l=a=1/0),k=[],d=[],nt=n.length,
h)for(e=0;nt>e;++e)c=n[e],c.x<l&&(l=c.x),c.y<a&&(a=c.y),c.x>v&&(v=c.x),c.y>y&&(y=
c.y),k.push(c.x),d.push(c.y);else for(e=0;nt>e;++e)w=+ut(c=n[e],e),b=+ft(c,e),l>
w&&(l=w),a>b&&(a=b),w>v&&(v=w),b>y&&(y=b),k.push(w),d.push(b);if(it=v-l,rt=y-a,it>
rt?y=a+it:v=l+rt,p=va(),p.add=function(n){tt(p,n,+ut(n,++e),+ft(n,e),l,a,v,y)},p.
visit=function(n){ir(n,p,l,a,v,y)},e=-1,null==t){for(;++e<nt;)tt(p,n[e],k[e],d[e],
l,a,v,y);--e}else n.forEach(p.add);return k=d=n=c=null,p}var h,o=g,s=ut;return(h=
arguments.length)?(o=lk,s=ak,3===h&&(u=i,r=t,i=t=0),e(n)):(e.x=function(n){return arguments.
length?(o=n,e):o},e.y=function(n){return arguments.length?(s=n,e):s},e.extent=function(
n){return arguments.length?(null==n?t=i=r=u=null:(t=+n[0][0],i=+n[0][1],r=+n[1][
0],u=+n[1][1]),e):null==t?null:[[t,i],[r,u]]},e.size=function(n){return arguments.
length?(null==n?t=i=r=u=null:(t=i=0,r=+n[0],u=+n[1]),e):null==t?null:[r-t,u-i]},
e)};n.interpolateRgb=bo;n.interpolateObject=ya;n.interpolateNumber=ft;n.interpolateString=
pa;cr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;n.interpolate=fi;n.interpolators=
[function(n,t){var i=typeof t;return("string"===i?er.has(t)||/^(#|rgb\(|hsl\()/.
test(t)?bo:pa:t instanceof ai?bo:"object"===i?Array.isArray(t)?wa:ya:ft)(n,t)}];
n.interpolateArray=wa;var op=function(){return a},uit=n.map({linear:op,poly:bk,quad:
function(){return yk},cubic:function(){return pk},sin:function(){return kk},exp:
function(){return dk},circle:function(){return gk},elastic:nd,back:td,bounce:function(
){return id}}),fit=n.map({"in":a,out:ba,"in-out":ka,"out-in":function(n){return ka(
ba(n))}});n.ease=function(n){var t=n.indexOf("-"),i=t>=0?n.substring(0,t):n,r=t>=
0?n.substring(t+1):"in";return i=uit.get(i)||op,r=fit.get(r)||a,vk(r(i.apply(null,
Array.prototype.slice.call(arguments,1))))};n.interpolateHcl=rd;n.interpolateHsl=
ud;n.interpolateLab=fd;n.interpolateRound=da;n.transform=function(t){var i=b.createElementNS(
n.ns.prefix.svg,"g");return(n.transform=function(n){if(null!=n){i.setAttribute("transform",
n);var t=i.transform.baseVal.consolidate()}return new ga(t?t.matrix:sp)})(t)};ga.
prototype.toString=function(){return"translate("+this.translate+")rotate("+this.
rotate+")skewX("+this.skew+")scale("+this.scale+")"};sp={a:1,b:0,c:0,d:1,e:0,f:0};
n.interpolateTransform=iv;n.layout={};n.layout.bundle=function(){return function(
n){for(var t=[],i=-1,r=n.length;++i<r;)t.push(hd(n[i]));return t}};n.layout.chord=
function(){function l(){var y,i,k,l,v,d={},g=[],it=n.range(u),nt=[],w,b;for(r=[],
f=[],y=0,l=-1;++l<u;){for(i=0,v=-1;++v<u;)i+=e[l][v];g.push(i);nt.push(n.range(u));
y+=i}for(o&&it.sort(function(n,t){return o(g[n],g[t])}),s&&nt.forEach(function(n,
t){n.sort(function(n,i){return s(e[t][n],e[t][i])})}),y=(2*t-c*u)/y,i=0,l=-1;++l<
u;){for(k=i,v=-1;++v<u;){var p=it[l],tt=nt[p][v],rt=e[p][tt],ut=i,ft=i+=rt*y;d[p+
"-"+tt]={index:p,subindex:tt,startAngle:ut,endAngle:ft,value:rt}}f[p]={index:p,startAngle:
k,endAngle:i,value:(i-k)/y};i+=c}for(l=-1;++l<u;)for(v=l-1;++v<u;)w=d[l+"-"+v],b=
d[v+"-"+l],(w.value||b.value)&&r.push(w.value<b.value?{source:b,target:w}:{source:
w,target:b});h&&a()}function a(){r.sort(function(n,t){return h((n.source.value+n.
target.value)/2,(t.source.value+t.target.value)/2)})}var r,f,e,u,o,s,h,i={},c=0;
return i.matrix=function(n){return arguments.length?(u=(e=n)&&e.length,r=f=null,
i):e},i.padding=function(n){return arguments.length?(c=n,r=f=null,i):c},i.sortGroups=
function(n){return arguments.length?(o=n,r=f=null,i):o},i.sortSubgroups=function(
n){return arguments.length?(s=n,r=null,i):s},i.sortChords=function(n){return arguments.
length?(h=n,r&&a(),i):h},i.chords=function(){return r||l(),r},i.groups=function(
){return f||l(),f},i};n.layout.force=function(){function k(n){return function(t,
i,r,u){var e;if(t.point!==n){var o=t.cx-n.x,s=t.cy-n.y,f=1/Math.sqrt(o*o+s*s);if(
b>(u-i)*f)return e=t.charge*f*f,n.px-=o*e,n.py-=s*e,!0;t.point&&isFinite(f)&&(e=
t.pointCharge*f*f,n.px-=o*e,n.py-=s*e)}return!t.charge}}function d(i){i.px=n.event.
x;i.py=n.event.y;t.resume()}var h,r,c,l,v,t={},y=n.dispatch("start","tick","end"),
f=[1,1],p=.9,o=hp,s=cp,e=-30,w=.1,b=.8,i=[],u=[];return t.tick=function(){if((r*=
.99)<.005)return y.end({type:"end",alpha:r=0}),!0;for(var tt,t,b,g,d,s,h,a,nt=i.
length,it=u.length,o=0;it>o;++o)t=u[o],b=t.source,g=t.target,h=g.x-b.x,a=g.y-b.y,
(d=h*h+a*a)&&(d=r*l[o]*((d=Math.sqrt(d))-c[o])/d,h*=d,a*=d,g.x-=h*(s=b.weight/(g.
weight+b.weight)),g.y-=a*s,b.x+=h*(s=1-s),b.y+=a*s);if((s=r*w)&&(h=f[0]/2,a=f[1]/
2,o=-1,s))for(;++o<nt;)t=i[o],t.x+=(h-t.x)*s,t.y+=(a-t.y)*s;if(e)for(uv(tt=n.geom.
quadtree(i),r,v),o=-1;++o<nt;)(t=i[o]).fixed||tt.visit(k(t));for(o=-1;++o<nt;)t=
i[o],t.fixed?(t.x=t.px,t.y=t.py):(t.x-=(t.px-(t.px=t.x))*p,t.y-=(t.py-(t.py=t.y)
)*p);y.tick({type:"tick",alpha:r})},t.nodes=function(n){return arguments.length?
(i=n,t):i},t.links=function(n){return arguments.length?(u=n,t):u},t.size=function(
n){return arguments.length?(f=n,t):f},t.linkDistance=function(n){return arguments.
length?(o="function"==typeof n?n:+n,t):o},t.distance=t.linkDistance,t.linkStrength=
function(n){return arguments.length?(s="function"==typeof n?n:+n,t):s},t.friction=
function(n){return arguments.length?(p=+n,t):p},t.charge=function(n){return arguments.
length?(e="function"==typeof n?n:+n,t):e},t.gravity=function(n){return arguments.
length?(w=+n,t):w},t.theta=function(n){return arguments.length?(b=+n,t):b},t.alpha=
function(i){return arguments.length?(i=+i,r?r=i>0?i:0:i>0&&(y.start({type:"start",
alpha:r=i}),n.timer(t.tick)),t):r},t.start=function(){function w(t,i){for(var r,
u=b(n),f=-1,e=u.length;++f<e;)if(!isNaN(r=u[f][t]))return r;return Math.random()*
i}function b(){if(!a){for(a=[],h=0;p>h;++h)a[h]=[];for(h=0;y>h;++h){var t=u[h];a[
t.source.index].push(t.target);a[t.target.index].push(t.source)}}return a[n]}for(
var h,a,r,p=i.length,y=u.length,k=f[0],d=f[1],n=0;p>n;++n)(r=i[n]).index=n,r.weight=
0;for(n=0;y>n;++n)r=u[n],"number"==typeof r.source&&(r.source=i[r.source]),"number"==
typeof r.target&&(r.target=i[r.target]),++r.source.weight,++r.target.weight;for(
n=0;p>n;++n)r=i[n],isNaN(r.x)&&(r.x=w("x",k)),isNaN(r.y)&&(r.y=w("y",d)),isNaN(r.
px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(c=[],"function"==typeof o)for(n=0;y>n;
++n)c[n]=+o.call(this,u[n],n);else for(n=0;y>n;++n)c[n]=o;if(l=[],"function"==typeof
s)for(n=0;y>n;++n)l[n]=+s.call(this,u[n],n);else for(n=0;y>n;++n)l[n]=s;if(v=[],
"function"==typeof e)for(n=0;p>n;++n)v[n]=+e.call(this,i[n],n);else for(n=0;p>n;
++n)v[n]=e;return t.resume()},t.resume=function(){return t.alpha(.1)},t.stop=function(
){return t.alpha(0)},t.drag=function(){return h||(h=n.behavior.drag().origin(a).
on("dragstart.force",ld).on("drag.force",d).on("dragend.force",ad)),arguments.length?
(this.on("mouseover.force",vd).on("mouseout.force",yd).call(h),void 0):h},n.rebind(
t,y,"on")};hp=20;cp=1;n.layout.hierarchy=function(){function u(f,e,o){var h=r.call(
n,f,e);if(f.depth=e,o.push(f),h&&(c=h.length)){for(var c,s,l=-1,a=f.children=[],
v=0,y=e+1;++l<c;)s=u(h[l],y,o),s.parent=f,a.push(s),v+=s.value;i&&a.sort(i);t&&(f.
value=v)}else t&&(f.value=+t.call(n,f,e)||0);return f}function f(i,r){var e=i.children,
u=0,s,o,h;if(e&&(s=e.length))for(o=-1,h=r+1;++o<s;)u+=f(e[o],h);else t&&(u=+t.call(
n,i,r)||0);return t&&(i.value=u),u}function n(n){var t=[];return u(n,0,t),t}var i=
bd,r=pd,t=wd;return n.sort=function(t){return arguments.length?(i=t,n):i},n.children=
function(t){return arguments.length?(r=t,n):r},n.value=function(i){return arguments.
length?(t=i,n):t},n.revalue=function(n){return f(n,0),n},n};n.layout.partition=function(
){function r(n,t,i,u){var f=n.children,o,s,h,e;if(n.x=t,n.y=n.depth*u,n.dx=i,n.dy=
u,f&&(o=f.length))for(e=-1,i=n.value?i/n.value:0;++e<o;)r(s=f[e],t,h=s.value*i,u),
t+=h}function u(n){var t=n.children,i=0,f,r;if(t&&(f=t.length))for(r=-1;++r<f;)i=
Math.max(i,u(t[r]));return 1+i}function i(n,i){var e=f.call(this,n,i);return r(e[
0],0,t[0],t[1]/u(e[0])),e}var f=n.layout.hierarchy(),t=[1,1];return i.size=function(
n){return arguments.length?(t=n,i):t},rr(i,f)};n.layout.pie=function(){function i(
t){var o=t.map(function(n,t){return+e.call(i,n,t)}),s=+("function"==typeof u?u.apply(
this,arguments):u),l=(("function"==typeof f?f.apply(this,arguments):f)-s)/n.sum(
o),c=n.range(t.length),h;return null!=r&&c.sort(r===vh?function(n,t){return o[t]-
o[n]}:function(n,i){return r(t[n],t[i])}),h=[],c.forEach(function(n){var i;h[n]=
{data:t[n],value:i=o[n],startAngle:s,endAngle:s+=i*l}}),h}var e=Number,r=vh,u=0,
f=2*t;return i.value=function(n){return arguments.length?(e=n,i):e},i.sort=function(
n){return arguments.length?(r=n,i):r},i.startAngle=function(n){return arguments.
length?(u=n,i):u},i.endAngle=function(n){return arguments.length?(f=n,i):f},i};vh=
{};n.layout.stack=function(){function t(s,h){var l=s.map(function(n,i){return r.
call(t,n,i)}),a=l.map(function(n){return n.map(function(n,i){return[e.call(t,n,i),
o.call(t,n,i)]})}),y=u.call(t,a,h);l=n.permute(l,y);a=n.permute(a,y);for(var v,p,
w=f.call(t,a,h),b=l.length,k=l[0].length,c=0;k>c;++c)for(i.call(t,l[0][c],p=w[c],
a[0][c][1]),v=1;b>v;++v)i.call(t,l[v][c],p+=a[v-1][c][1],a[v][c][1]);return s}var
r=a,u=ko,f=go,i=ng,e=dd,o=gd;return t.values=function(n){return arguments.length?
(r=n,t):r},t.order=function(n){return arguments.length?(u="function"==typeof n?n:
lp.get(n)||ko,t):u},t.offset=function(n){return arguments.length?(f="function"==
typeof n?n:ap.get(n)||go,t):f},t.x=function(n){return arguments.length?(e=n,t):e}
,t.y=function(n){return arguments.length?(o=n,t):o},t.out=function(n){return arguments.
length?(i=n,t):i},t};lp=n.map({"inside-out":function(t){for(var i,u=t.length,f=t.
map(tg),e=t.map(ig),l=n.range(u).sort(function(n,t){return f[n]-f[t]}),o=0,s=0,h=
[],c=[],r=0;u>r;++r)i=l[r],s>o?(o+=e[i],h.push(i)):(s+=e[i],c.push(i));return c.
reverse().concat(h)},reverse:function(t){return n.range(t.length).reverse()},"default":
ko});ap=n.map({silhouette:function(n){for(var r,i,s=n.length,f=n[0].length,e=[],
u=0,o=[],t=0;f>t;++t){for(r=0,i=0;s>r;r++)i+=n[r][t][1];i>u&&(u=i);e.push(i)}for(
t=0;f>t;++t)o[t]=(u-e[t])/2;return o},wiggle:function(n){var i,t,r,u,h,c,f,e,o,a=
n.length,l=n[0],v=l.length,s=[];for(s[0]=e=o=0,t=1;v>t;++t){for(i=0,u=0;a>i;++i)
u+=n[i][t][1];for(i=0,h=0,f=l[t][0]-l[t-1][0];a>i;++i){for(r=0,c=(n[i][t][1]-n[i][
t-1][1])/(2*f);i>r;++r)c+=(n[r][t][1]-n[r][t-1][1])/f;h+=c*n[i][t][1]}s[t]=e-=u?
h/u*f:0;o>e&&(o=e)}for(t=0;v>t;++t)s[t]-=o;return s},expand:function(n){for(var t,
r,u=n.length,f=n[0].length,o=1/u,e=[],i=0;f>i;++i){for(t=0,r=0;u>t;t++)r+=n[t][i][
1];if(r)for(t=0;u>t;t++)n[t][i][1]/=r;else for(t=0;u>t;t++)n[t][i][1]=o}for(i=0;
f>i;++i)e[i]=0;return e},zero:go});n.layout.histogram=function(){function t(t,f)
{for(var o,s,l=[],h=t.map(r,this),a=u.call(this,h,f),c=e.call(this,a,h,f),f=-1,y=
h.length,v=c.length-1,p=i?1:1/y;++f<v;)o=l[f]=[],o.dx=c[f+1]-(o.x=c[f]),o.y=0;if(
v>0)for(f=-1;++f<y;)s=h[f],s>=a[0]&&s<=a[1]&&(o=l[n.bisect(c,s,1,v)-1],o.y+=p,o.
push(t[f]));return l}var i=!0,r=Number,u=fg,e=ug;return t.value=function(n){return arguments.
length?(r=n,t):r},t.range=function(n){return arguments.length?(u=f(n),t):u},t.bins=
function(n){return arguments.length?(e="number"==typeof n?function(t){return fv(
t,n)}:f(n),t):e},t.frequency=function(n){return arguments.length?(i=!!n,t):i},t}
;n.layout.tree=function(){function i(n,i){function h(n,t){var f=n.children,i=n._tree,
o;if(f&&(s=f.length)){for(var s,e,u,c=f[0],l=c,a=-1;++a<s;)u=f[a],h(u,e),l=v(u,e,
l),e=u;hg(n);o=.5*(c._tree.prelim+u._tree.prelim);t?(i.prelim=t._tree.prelim+r(n,
t),i.mod=i.prelim-o):i.prelim=o}else t&&(i.prelim=t._tree.prelim+r(n,t))}function c(
n,t){var i,u,r;if(n.x=n._tree.prelim+t,i=n.children,i&&(u=i.length))for(r=-1,t+=
n._tree.mod;++r<u;)c(i[r],t)}function v(n,t,i){if(t){for(var s,f=n,e=n,u=t,o=n.parent.
children[0],h=f._tree.mod,c=e._tree.mod,l=u._tree.mod,a=o._tree.mod;u=ts(u),f=ns(
f),u&&f;)o=ns(o),e=ts(e),e._tree.ancestor=n,s=u._tree.prelim+l-f._tree.prelim-h+
r(u,f),s>0&&(cg(lg(u,n,i),n,s),h+=s,c+=s),l+=u._tree.mod,h+=f._tree.mod,a+=o._tree.
mod,c+=e._tree.mod;u&&!ts(e)&&(e._tree.thread=u,e._tree.mod+=l-c);f&&!ns(o)&&(o.
_tree.thread=f,o._tree.mod+=h-a,i=n)}return i}var l=f.call(this,n,i),e=l[0];et(e,
function(n,t){n._tree={ancestor:n,prelim:0,mod:0,change:0,shift:0,number:t?t._tree.
number+1:0}});h(e);c(e,-e._tree.prelim);var o=ru(e,og),s=ru(e,eg),y=ru(e,sg),a=o.
x-r(o,s)/2,p=s.x+r(s,o)/2,w=y.depth||1;return et(e,u?function(n){n.x*=t[0];n.y=n.
depth*t[1];delete n._tree}:function(n){n.x=(n.x-a)/(p-a)*t[0];n.y=n.depth/w*t[1];
delete n._tree}),l}var f=n.layout.hierarchy().sort(null).value(null),r=ev,t=[1,1],
u=!1;return i.separation=function(n){return arguments.length?(r=n,i):r},i.size=function(
n){return arguments.length?(u=null==(t=n),i):u?null:t},i.nodeSize=function(n){return arguments.
length?(u=null!=(t=n),i):u?t:null},rr(i,f)};n.layout.pack=function(){function i(
n,i){var c=f.call(this,n,i),e=c[0],o=u[0],s=u[1],l=null==t?Math.sqrt:"function"==
typeof t?t:function(){return t},h;return(e.x=e.y=0,et(e,function(n){n.r=+l(n.value)}
),et(e,hv),r)&&(h=r*(t?1:Math.max(2*e.r/o,2*e.r/s))/2,et(e,function(n){n.r+=h}),
et(e,hv),et(e,function(n){n.r-=h})),cv(e,o/2,s/2,t?1:1/Math.max(2*e.r/o,2*e.r/s)),
c}var t,f=n.layout.hierarchy().sort(ag),r=0,u=[1,1];return i.size=function(n){return arguments.
length?(u=n,i):u},i.radius=function(n){return arguments.length?(t=null==n||"function"==
typeof n?n:+n,i):t},i.padding=function(n){return arguments.length?(r=+n,i):r},rr(
i,f)};n.layout.cluster=function(){function i(n,i){var o,c=f.call(this,n,i),e=c[0],
a=0;et(e,function(n){var t=n.children;t&&t.length?(n.x=wg(t),n.y=pg(t)):(n.x=o?a+=
r(n,o):0,n.y=0,o=n)});var s=av(e),h=vv(e),l=s.x-r(s,h)/2,v=h.x+r(h,s)/2;return et(
e,u?function(n){n.x=(n.x-e.x)*t[0];n.y=(e.y-n.y)*t[1]}:function(n){n.x=(n.x-l)/(v-
l)*t[0];n.y=(1-(e.y?n.y/e.y:1))*t[1]}),c}var f=n.layout.hierarchy().sort(null).value(
null),r=ev,t=[1,1],u=!1;return i.separation=function(n){return arguments.length?
(r=n,i):r},i.size=function(n){return arguments.length?(u=null==(t=n),i):u?null:t}
,i.nodeSize=function(n){return arguments.length?(u=null!=(t=n),i):u?t:null},rr(i,
f)};n.layout.treemap=function(){function o(n,t){for(var r,i,u=-1,f=n.length;++u<
f;)i=(r=n[u]).value*(0>t?0:t),r.area=isNaN(i)||0>=i?0:i}function a(n){var u=n.children;
if(u&&u.length){var l,v,y,r=c(n),t=[],f=u.slice(),h=1/0,e="slice"===i?r.dx:"dice"===
i?r.dy:"slice-dice"===i?1&n.depth?r.dy:r.dx:Math.min(r.dx,r.dy);for(o(f,r.dx*r.dy/
n.value),t.area=0;(y=f.length)>0;)t.push(l=f[y-1]),t.area+=l.area,"squarify"!==i||
(v=p(t,e))<=h?(f.pop(),h=v):(t.area-=t.pop().area,s(t,e,r,!1),e=Math.min(r.dx,r.
dy),t.length=t.area=0,h=1/0);t.length&&(s(t,e,r,!0),t.length=t.area=0);u.forEach(
a)}}function v(n){var u=n.children;if(u&&u.length){var i,r=c(n),f=u.slice(),t=[];
for(o(f,r.dx*r.dy/n.value),t.area=0;i=f.pop();)t.push(i),t.area+=i.area,null!=i.
z&&(s(t,i.z?r.dx:r.dy,r,!f.length),t.length=t.area=0);u.forEach(v)}}function p(n,
t){for(var i,r=n.area,u=0,f=1/0,o=-1,s=n.length;++o<s;)(i=n[o].area)&&(f>i&&(f=i)
,i>u&&(u=i));return r*=r,t*=t,r?Math.max(t*u*e/r,r/(t*f*e)):1/0}function s(n,t,i,
r){var f,h=-1,c=n.length,o=i.x,s=i.y,e=t?u(n.area/t):0;if(t==i.dx){for((r||e>i.dy)
&&(e=i.dy);++h<c;)f=n[h],f.x=o,f.y=s,f.dy=e,o+=f.dx=Math.min(i.x+i.dx-o,e?u(f.area/
e):0);f.z=!0;f.dx+=i.x+i.dx-o;i.y+=e;i.dy-=e}else{for((r||e>i.dx)&&(e=i.dx);++h<
c;)f=n[h],f.x=o,f.y=s,f.dx=e,s+=f.dy=Math.min(i.y+i.dy-s,e?u(f.area/e):0);f.z=!1;
f.dy+=i.y+i.dy-s;i.x+=e;i.dx-=e}}function t(n){var i=r||h(n),t=i[0];return t.x=0,
t.y=0,t.dx=f[0],t.dy=f[1],r&&h.revalue(t),o([t],t.dx*t.dy/t.value),(r?v:a)(t),l&&
(r=i),i}var r,h=n.layout.hierarchy(),u=Math.round,f=[1,1],y=null,c=rs,l=!1,i="squarify",
e=.5*(1+Math.sqrt(5));return t.size=function(n){return arguments.length?(f=n,t):
f},t.padding=function(n){function u(i){var r=n.call(t,i,i.depth);return null==r?
rs(i):yv(i,"number"==typeof r?[r,r,r,r]:r)}function i(t){return yv(t,n)}if(!arguments.
length)return y;var r;return c=null==(y=n)?rs:"function"==(r=typeof n)?u:"number"===
r?(n=[n,n,n,n],i):i,t},t.round=function(n){return arguments.length?(u=n?Math.round:
Number,t):u!=Number},t.sticky=function(n){return arguments.length?(l=n,r=null,t)
:l},t.ratio=function(n){return arguments.length?(e=n,t):e},t.mode=function(n){return arguments.
length?(i=n+"",t):i},rr(t,h)};n.random={normal:function(n,t){var i=arguments.length;
return 2>i&&(t=1),1>i&&(n=0),function(){var r,u,i;do r=2*Math.random()-1,u=2*Math.
random()-1,i=r*r+u*u;while(!i||i>1);return n+t*r*Math.sqrt(-2*Math.log(i)/i)}},logNormal:
function(){var t=n.random.normal.apply(n,arguments);return function(){return Math.
exp(t())}},irwinHall:function(n){return function(){for(var t=0,i=0;n>i;i++)t+=Math.
random();return t/n}}};n.scale={};vp={floor:a,ceil:a};n.scale.linear=function(){
return pv([0,1],[0,1],fi,!1)};n.scale.log=function(){return bv(n.scale.linear().
domain([0,1]),10,!0,[1,10])};yh=n.format(".0e");yp={floor:function(n){return-Math.
ceil(-n)},ceil:function(n){return-Math.floor(-n)}};n.scale.pow=function(){return kv(
n.scale.linear(),1,[0,1])};n.scale.sqrt=function(){return n.scale.pow().exponent(
.5)};n.scale.ordinal=function(){return dv([],{t:"range",a:[[]]})};n.scale.category10=
function(){return n.scale.ordinal().range(eit)};n.scale.category20=function(){return n.
scale.ordinal().range(oit)};n.scale.category20b=function(){return n.scale.ordinal(
).range(sit)};n.scale.category20c=function(){return n.scale.ordinal().range(hit)}
;var eit=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2",
"#7f7f7f","#bcbd22","#17becf"],oit=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c",
"#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2",
"#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],sit=["#393b79",
"#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31",
"#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173",
"#a55194","#ce6dbd","#de9ed6"],hit=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d",
"#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1",
"#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];n.scale.quantile=
function(){return gv([],[])};n.scale.quantize=function(){return ny(0,1,[0,1])};n.
scale.threshold=function(){return ty([.5],[0,1])};n.scale.identity=function(){return iy(
[0,1])};n.svg.arc=function(){function n(){var f=i.apply(this,arguments),n=r.apply(
this,arguments),o=u.apply(this,arguments)+ti,s=e.apply(this,arguments)+ti,h=(o>s&&
(h=o,o=s,s=h),s-o),c=t>h?"0":"1",l=Math.cos(o),a=Math.sin(o),v=Math.cos(s),y=Math.
sin(s);return h>=pp?f?"M0,"+n+"A"+n+","+n+" 0 1,1 0,"+-n+"A"+n+","+n+" 0 1,1 0,"+
n+"M0,"+f+"A"+f+","+f+" 0 1,0 0,"+-f+"A"+f+","+f+" 0 1,0 0,"+f+"Z":"M0,"+n+"A"+n+
","+n+" 0 1,1 0,"+-n+"A"+n+","+n+" 0 1,1 0,"+n+"Z":f?"M"+n*l+","+n*a+"A"+n+","+n+
" 0 "+c+",1 "+n*v+","+n*y+"L"+f*v+","+f*y+"A"+f+","+f+" 0 "+c+",0 "+f*l+","+f*a+
"Z":"M"+n*l+","+n*a+"A"+n+","+n+" 0 "+c+",1 "+n*v+","+n*y+"L0,0Z"}var i=nn,r=tn,
u=ry,e=uy;return n.innerRadius=function(t){return arguments.length?(i=f(t),n):i}
,n.outerRadius=function(t){return arguments.length?(r=f(t),n):r},n.startAngle=function(
t){return arguments.length?(u=f(t),n):u},n.endAngle=function(t){return arguments.
length?(e=f(t),n):e},n.centroid=function(){var n=(i.apply(this,arguments)+r.apply(
this,arguments))/2,t=(u.apply(this,arguments)+e.apply(this,arguments))/2+ti;return[
Math.cos(t)*n,Math.sin(t)*n]},n};ti=-t/2;pp=2*t-1e-6;n.svg.line.radial=function(
){var n=ha(fy);return n.radius=n.x,delete n.x,n.angle=n.y,delete n.y,n};co.reverse=
lo;lo.reverse=co;n.svg.area=function(){return ey(a)};n.svg.area.radial=function(
){var n=ey(fy);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=
n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=
n.y1,delete n.y1,n};n.svg.chord=function(){function n(n,t){var f=h(this,r,n,t),e=
h(this,u,n,t);return"M"+f.p0+c(f.r,f.p1,f.a1-f.a0)+(l(f,e)?i(f.r,f.p1,f.r,f.p0):
i(f.r,f.p1,e.r,e.p0)+c(e.r,e.p1,e.a1-e.a0)+i(e.r,e.p1,f.r,f.p0))+"Z"}function h(
n,t,i,r){var f=t.call(n,i,r),u=e.call(n,f,r),h=o.call(n,f,r)+ti,c=s.call(n,f,r)+
ti;return{r:u,a0:h,a1:c,p0:[u*Math.cos(h),u*Math.sin(h)],p1:[u*Math.cos(c),u*Math.
sin(c)]}}function l(n,t){return n.a0==t.a0&&n.a1==t.a1}function c(n,i,r){return"A"+
n+","+n+" 0 "+ +(r>t)+",1 "+i}function i(n,t,i,r){return"Q 0,0 "+r}var r=oo,u=so,
e=rn,o=ry,s=uy;return n.radius=function(t){return arguments.length?(e=f(t),n):e}
,n.source=function(t){return arguments.length?(r=f(t),n):r},n.target=function(t)
{return arguments.length?(u=f(t),n):u},n.startAngle=function(t){return arguments.
length?(o=f(t),n):o},n.endAngle=function(t){return arguments.length?(s=f(t),n):s}
,n};n.svg.diagonal=function(){function n(n,u){var e=t.call(this,n,u),o=i.call(this,
n,u),s=(e.y+o.y)/2,f=[e,{x:e.x,y:s},{x:o.x,y:s},o];return f=f.map(r),"M"+f[0]+"C"+
f[1]+" "+f[2]+" "+f[3]}var t=oo,i=so,r=oy;return n.source=function(i){return arguments.
length?(t=f(i),n):t},n.target=function(t){return arguments.length?(i=f(t),n):i},
n.projection=function(t){return arguments.length?(r=t,n):r},n};n.svg.diagonal.radial=
function(){var t=n.svg.diagonal(),i=oy,r=t.projection;return t.projection=function(
n){return arguments.length?r(un(i=n)):i},t};n.svg.symbol=function(){function n(n,
r){return(ph.get(t.call(this,n,r))||sy)(i.call(this,n,r))}var t=en,i=fn;return n.
type=function(i){return arguments.length?(t=f(i),n):t},n.size=function(t){return arguments.
length?(i=f(t),n):i},n};ph=n.map({circle:sy,cross:function(n){var t=Math.sqrt(n/
5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+
3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(n){var t=Math.sqrt(n/(2*wp)),i=t*
wp;return"M0,"+-t+"L"+i+",0 0,"+t+" "+-i+",0Z"},square:function(n){var t=Math.sqrt(
n)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":
function(n){var t=Math.sqrt(n/wf),i=t*wf/2;return"M0,"+i+"L"+t+","+-i+" "+-t+","+
-i+"Z"},"triangle-up":function(n){var t=Math.sqrt(n/wf),i=t*wf/2;return"M0,"+-i+
"L"+t+","+i+" "+-t+","+i+"Z"}});n.svg.symbolTypes=ph.keys();var lr,pf,wf=Math.sqrt(
3),wp=Math.tan(30*r),h=[],bp=0;h.call=u.call;h.empty=u.empty;h.node=u.node;h.size=
u.size;n.transition=function(n){return arguments.length?lr?n.transition():n:gs.transition(
)};n.transition.prototype=h;h.select=function(n){var f,i,t,e=this.id,o=[],r,s;for(
n=ue(n),r=-1,s=this.length;++r<s;){o.push(f=[]);for(var h=this[r],u=-1,c=h.length;
++u<c;)(t=h[u])&&(i=n.call(t,t.__data__,u,r))?("__data__"in t&&(i.__data__=t.__data__)
,eu(i,u,e,t.__transition__[e]),f.push(i)):f.push(null)}return ur(o,e)};h.selectAll=
function(n){var s,u,t,f,h,e=this.id,c=[],i,l,r,v;for(n=fc(n),i=-1,l=this.length;
++i<l;)for(var a=this[i],o=-1,y=a.length;++o<y;)if(t=a[o])for(h=t.__transition__[
e],u=n.call(t,t.__data__,o,i),c.push(s=[]),r=-1,v=u.length;++r<v;)(f=u[r])&&eu(f,
r,e,h),s.push(f);return ur(c,e)};h.filter=function(n){var u,f,t,e=[],i,o;for("function"!=
typeof n&&(n=vc(n)),i=0,o=this.length;o>i;i++){e.push(u=[]);for(var f=this[i],r=
0,s=f.length;s>r;r++)(t=f[r])&&n.call(t,t.__data__,r)&&u.push(t)}return ur(e,this.
id,this.time).ease(this.ease())};h.tween=function(n,t){var i=this.id;return arguments.
length<2?this.node().__transition__[i].tween.get(n):vt(this,null==t?function(t){
t.__transition__[i].tween.remove(n)}:function(r){r.__transition__[i].tween.set(n,
t)})};h.attr=function(t,i){function f(){this.removeAttribute(r)}function e(){this.
removeAttributeNS(r.space,r.local)}function o(n){return null==n?f:(n+="",function(
){var t,i=this.getAttribute(r);return i!==n&&(t=u(i,n),function(n){this.setAttribute(
r,t(n))})})}function s(n){return null==n?e:(n+="",function(){var t,i=this.getAttributeNS(
r.space,r.local);return i!==n&&(t=u(i,n),function(n){this.setAttributeNS(r.space,
r.local,t(n))})})}if(arguments.length<2){for(i in t)this.attr(i,t[i]);return this}
var u="transform"==t?iv:fi,r=n.ns.qualify(t);return hs(this,"attr."+t,i,r.local?
s:o)};h.attrTween=function(t,i){function u(n,t){var u=i.call(this,n,t,this.getAttribute(
r));return u&&function(n){this.setAttribute(r,u(n))}}function f(n,t){var u=i.call(
this,n,t,this.getAttributeNS(r.space,r.local));return u&&function(n){this.setAttributeNS(
r.space,r.local,u(n))}}var r=n.ns.qualify(t);return this.tween("attr."+t,r.local?
f:u)};h.style=function(n,t,i){function u(){this.style.removeProperty(n)}function f(
t){return null==t?u:(t+="",function(){var r,u=c.getComputedStyle(this,null).getPropertyValue(
n);return u!==t&&(r=fi(u,t),function(t){this.style.setProperty(n,r(t),i)})})}var
r=arguments.length;if(3>r){if("string"!=typeof n){2>r&&(t="");for(i in n)this.style(
i,n[i],t);return this}i=""}return hs(this,"style."+n,t,f)};h.styleTween=function(
n,t,i){function r(r,u){var f=t.call(this,r,u,c.getComputedStyle(this,null).getPropertyValue(
n));return f&&function(t){this.style.setProperty(n,f(t),i)}}return arguments.length<
3&&(i=""),this.tween("style."+n,r)};h.text=function(n){return hs(this,"text",n,on)}
;h.remove=function(){return this.each("end.transition",function(){var n;!this.__transition__&&
(n=this.parentNode)&&n.removeChild(this)})};h.ease=function(t){var i=this.id;return arguments.
length<1?this.node().__transition__[i].ease:("function"!=typeof t&&(t=n.ease.apply(
n,arguments)),vt(this,function(n){n.__transition__[i].ease=t}))};h.delay=function(
n){var t=this.id;return vt(this,"function"==typeof n?function(i,r,u){i.__transition__[
t].delay=0|n.call(i,i.__data__,r,u)}:(n|=0,function(i){i.__transition__[t].delay=
n}))};h.duration=function(n){var t=this.id;return vt(this,"function"==typeof n?function(
i,r,u){i.__transition__[t].duration=Math.max(1,0|n.call(i,i.__data__,r,u))}:(n=Math.
max(1,0|n),function(i){i.__transition__[t].duration=n}))};h.each=function(t,i){var
r=this.id,u,f;return arguments.length<2?(u=pf,f=lr,lr=r,vt(this,function(n,i,u){
pf=n.__transition__[r];t.call(n,n.__data__,i,u)}),pf=u,lr=f):vt(this,function(u)
{var f=u.__transition__[r];(f.event||(f.event=n.dispatch("start","end"))).on(t,i)}
),this};h.transition=function(){for(var u,f,n,t,s=this.id,e=++bp,o=[],r=0,h=this.
length;h>r;r++){o.push(u=[]);for(var f=this[r],i=0,c=f.length;c>i;i++)(n=f[i])&&
(t=Object.create(n.__transition__[s]),t.delay+=t.duration,eu(n,i,e,t)),u.push(n)}
return ur(o,e)};n.svg.axis=function(){function i(i){i.each(function(){var i,ut=n.
select(this),ot=null==h?r.ticks?r.ticks.apply(r,s):r.domain():h,lt=null==o?r.tickFormat?
r.tickFormat.apply(r,s):String:o,at=sn(r,ot,l),ft=ut.selectAll(".tick.minor").data(
at,String),p=ft.enter().insert("line",".tick").attr("class","tick minor").style(
"opacity",1e-6),vt=n.transition(ft.exit()).style("opacity",1e-6).remove(),w=n.transition(
ft).style("opacity",1),b=ut.selectAll(".tick.major").data(ot,String),y=b.enter().
insert("g",".domain").attr("class","tick major").style("opacity",1e-6),yt=n.transition(
b.exit()).style("opacity",1e-6).remove(),k=n.transition(b).style("opacity",1),a=
uu(r),st=ut.selectAll(".domain").data([0]),d=(st.enter().append("path").attr("class",
"domain"),n.transition(st)),v=r.copy(),ht=this.__chart__||v,ct,et;this.__chart__=
v;y.append("line");y.append("text");var g=y.select("line"),nt=k.select("line"),tt=
b.select("text").text(lt),it=y.select("text"),rt=k.select("text");switch(c){case"bottom":
i=hy;p.attr("y2",f);w.attr("x2",0).attr("y2",f);g.attr("y2",t);it.attr("y",Math.
max(t,0)+u);nt.attr("x2",0).attr("y2",t);rt.attr("x",0).attr("y",Math.max(t,0)+u);
tt.attr("dy",".71em").style("text-anchor","middle");d.attr("d","M"+a[0]+","+e+"V0H"+
a[1]+"V"+e);break;case"top":i=hy;p.attr("y2",-f);w.attr("x2",0).attr("y2",-f);g.
attr("y2",-t);it.attr("y",-(Math.max(t,0)+u));nt.attr("x2",0).attr("y2",-t);rt.attr(
"x",0).attr("y",-(Math.max(t,0)+u));tt.attr("dy","0em").style("text-anchor","middle");
d.attr("d","M"+a[0]+","+-e+"V0H"+a[1]+"V"+-e);break;case"left":i=cy;p.attr("x2",
-f);w.attr("x2",-f).attr("y2",0);g.attr("x2",-t);it.attr("x",-(Math.max(t,0)+u));
nt.attr("x2",-t).attr("y2",0);rt.attr("x",-(Math.max(t,0)+u)).attr("y",0);tt.attr(
"dy",".32em").style("text-anchor","end");d.attr("d","M"+-e+","+a[0]+"H0V"+a[1]+"H"+
-e);break;case"right":i=cy;p.attr("x2",f);w.attr("x2",f).attr("y2",0);g.attr("x2",
t);it.attr("x",Math.max(t,0)+u);nt.attr("x2",t).attr("y2",0);rt.attr("x",Math.max(
t,0)+u).attr("y",0);tt.attr("dy",".32em").style("text-anchor","start");d.attr("d",
"M"+e+","+a[0]+"H0V"+a[1]+"H"+e)}r.rangeBand?(ct=v.rangeBand()/2,et=function(n){
return v(n)+ct},y.call(i,et),k.call(i,et)):(y.call(i,ht),k.call(i,v),yt.call(i,v),
p.call(i,ht),w.call(i,v),vt.call(i,v))})}var o,r=n.scale.linear(),c=wh,t=6,f=6,e=
6,u=3,s=[10],h=null,l=0;return i.scale=function(n){return arguments.length?(r=n,
i):r},i.orient=function(n){return arguments.length?(c=n in kp?n+"":wh,i):c},i.ticks=
function(){return arguments.length?(s=arguments,i):s},i.tickValues=function(n){return arguments.
length?(h=n,i):h},i.tickFormat=function(n){return arguments.length?(o=n,i):o},i.
tickSize=function(n,r){if(!arguments.length)return t;var u=arguments.length-1;return t=
+n,f=u>1?+r:t,e=u>0?+arguments[u]:t,i},i.tickPadding=function(n){return arguments.
length?(u=+n,i):u},i.tickSubdivide=function(n){return arguments.length?(l=+n,i):
l},i};wh="bottom";kp={top:1,right:1,bottom:1,left:1};n.svg.brush=function(){function u(
t){t.each(function(){var t,f=n.select(this),e=f.selectAll(".background").data([0]),
v=f.selectAll(".extent").data([0]),c=f.selectAll(".resize").data(o,String);f.style(
"pointer-events","all").on("mousedown.brush",a).on("touchstart.brush",a);e.enter(
).append("rect").attr("class","background").style("visibility","hidden").style("cursor",
"crosshair");v.enter().append("rect").attr("class","extent").style("cursor","move");
c.enter().append("g").attr("class",function(n){return"resize "+n}).style("cursor",
function(n){return dp[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(
n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).
attr("height",6).style("visibility","hidden");c.style("display",u.empty()?"none":
null);c.exit().remove();i&&(t=uu(i),e.attr("x",t[0]).attr("width",t[1]-t[0]),h(f))
;r&&(t=uu(r),e.attr("y",t[0]).attr("height",t[1]-t[0]),l(f));s(f)})}function s(n)
{n.selectAll(".resize").attr("transform",function(n){return"translate("+t[+/e$/.
test(n)][0]+","+t[+/^s/.test(n)][1]+")"})}function h(n){n.select(".extent").attr(
"x",t[0][0]);n.selectAll(".extent,.n>rect,.s>rect").attr("width",t[1][0]-t[0][0])}
function l(n){n.select(".extent").attr("y",t[0][1]);n.selectAll(".extent,.e>rect,.w>rect").
attr("height",t[1][1]-t[0][1])}function a(){function ut(){var t=n.event.changedTouches;
return t?n.touches(d,t)[0]:n.mouse(d)}function ot(){32==n.event.keyCode&&(y||(a=
null,o[0]-=t[1][0],o[1]-=t[1][1],y=2),lt())}function st(){32==n.event.keyCode&&2==
y&&(o[0]+=t[1][0],o[1]+=t[1][1],y=0,lt())}function b(){var u=ut(),f=!1;k&&(u[0]+=
k[0],u[1]+=k[1]);y||(n.event.altKey?(a||(a=[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])
/2]),o[0]=t[+(u[0]<a[0])][0],o[1]=t[+(u[1]<a[1])][1]):a=null);ht&&ft(u,i,0)&&(h(
p),f=!0);ct&&ft(u,r,1)&&(l(p),f=!0);f&&(s(p),nt({type:"brush",mode:y?"move":"resize"}))
}function ft(n,i,r){var u,h,v=uu(i),c=v[0],l=v[1],s=o[r],p=t[1][r]-t[0][r];return y&&
(c-=s,l-=p+s),u=e[r]?Math.max(c,Math.min(l,n[r])):n[r],y?h=(u+=s)+p:(a&&(s=Math.
max(c,Math.min(l,2*a[r]-u))),u>s?(h=u,u=s):h=s),t[0][r]!==u||t[1][r]!==h?(f=null,
t[0][r]=u,t[1][r]=h,!0):void 0}function et(){b();p.style("pointer-events","all").
selectAll(".resize").style("display",u.empty()?"none":null);n.select("body").style(
"cursor",null);tt.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",
null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);
at();nt({type:"brushend"})}var a,k,d=this,g=n.select(n.event.target),nt=v.of(d,arguments),
p=n.select(d),w=g.datum(),ht=!/^(n|s)$/.test(w)&&i,ct=!/^(e|w)$/.test(w)&&r,y=g.
classed("extent"),at=ar(),o=ut(),tt=n.select(c).on("keydown.brush",ot).on("keyup.brush",
st),it,rt;(n.event.changedTouches?tt.on("touchmove.brush",b).on("touchend.brush",
et):tt.on("mousemove.brush",b).on("mouseup.brush",et),y)?(o[0]=t[0][0]-o[0],o[1]=
t[0][1]-o[1]):w?(it=+/w$/.test(w),rt=+/^n/.test(w),k=[t[1-it][0]-o[0],t[1-rt][1]-
o[1]],o[0]=t[it][0],o[1]=t[rt][1]):n.event.altKey&&(a=o.slice());p.style("pointer-events",
"none").selectAll(".resize").style("display",null);n.select("body").style("cursor",
g.style("cursor"));nt({type:"brushstart"});b()}var f,v=re(u,"brushstart","brush",
"brushend"),i=null,r=null,o=bf[0],t=[[0,0],[0,0]],e=[!0,!0];return u.x=function(
n){return arguments.length?(i=n,o=bf[!i<<1|!r],u):i},u.y=function(n){return arguments.
length?(r=n,o=bf[!i<<1|!r],u):r},u.clamp=function(n){return arguments.length?(i&&
r?e=[!!n[0],!!n[1]]:(i||r)&&(e[+!i]=!!n),u):i&&r?e:i||r?e[+!i]:null},u.extent=function(
n){var e,o,s,h,c;return arguments.length?(f=[[0,0],[0,0]],i&&(e=n[0],o=n[1],r&&(e=
e[0],o=o[0]),f[0][0]=e,f[1][0]=o,i.invert&&(e=i(e),o=i(o)),e>o&&(c=e,e=o,o=c),t[
0][0]=0|e,t[1][0]=0|o),r&&(s=n[0],h=n[1],i&&(s=s[1],h=h[1]),f[0][1]=s,f[1][1]=h,
r.invert&&(s=r(s),h=r(h)),s>h&&(c=s,s=h,h=c),t[0][1]=0|s,t[1][1]=0|h),u):(n=f||t,
i&&(e=n[0][0],o=n[1][0],f||(e=t[0][0],o=t[1][0],i.invert&&(e=i.invert(e),o=i.invert(
o)),e>o&&(c=e,e=o,o=c))),r&&(s=n[0][1],h=n[1][1],f||(s=t[0][1],h=t[1][1],r.invert&&
(s=r.invert(s),h=r.invert(h)),s>h&&(c=s,s=h,h=c))),i&&r?[[e,s],[o,h]]:i?[e,o]:r&&
[s,h])},u.clear=function(){return f=null,t[0][0]=t[0][1]=t[1][0]=t[1][1]=0,u},u.
empty=function(){return i&&t[0][0]===t[1][0]||r&&t[0][1]===t[1][1]},n.rebind(u,v,
"on")};dp={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",
ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};bf=[["n","e","s","w","nw","ne",
"se","sw"],["e","w"],["n","s"],[]];n.time={};l=Date;gp=["Sunday","Monday","Tuesday",
"Wednesday","Thursday","Friday","Saturday"];oi.prototype={getDate:function(){return this.
_.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(
){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours(
)},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(
){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()}
,getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this.
_.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this.
_.valueOf()},setDate:function(){ct.setUTCDate.apply(this._,arguments)},setDay:function(
){ct.setUTCDay.apply(this._,arguments)},setFullYear:function(){ct.setUTCFullYear.
apply(this._,arguments)},setHours:function(){ct.setUTCHours.apply(this._,arguments)}
,setMilliseconds:function(){ct.setUTCMilliseconds.apply(this._,arguments)},setMinutes:
function(){ct.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ct.setUTCMonth.
apply(this._,arguments)},setSeconds:function(){ct.setUTCSeconds.apply(this._,arguments)}
,setTime:function(){ct.setTime.apply(this._,arguments)}};var ct=Date.prototype,bh=
["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],kh=["Sun",
"Mon","Tue","Wed","Thu","Fri","Sat"],dh=["January","February","March","April","May",
"June","July","August","September","October","November","December"],gh=["Jan","Feb",
"Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.time.year=si(function(
t){return t=n.time.day(t),t.setMonth(0,1),t},function(n,t){n.setFullYear(n.getFullYear(
)+t)},function(n){return n.getFullYear()});n.time.years=n.time.year.range;n.time.
years.utc=n.time.year.utc.range;n.time.day=si(function(n){var t=new l(2e3,0);return t.
setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t},function(n,t){n.setDate(
n.getDate()+t)},function(n){return n.getDate()-1});n.time.days=n.time.day.range;
n.time.days.utc=n.time.day.utc.range;n.time.dayOfYear=function(t){var i=n.time.year(
t);return Math.floor((t-i-6e4*(t.getTimezoneOffset()-i.getTimezoneOffset()))/864e5)}
;gp.forEach(function(t,i){t=t.toLowerCase();i=7-i;var r=n.time[t]=si(function(t)
{return(t=n.time.day(t)).setDate(t.getDate()-(t.getDay()+i)%7),t},function(n,t){
n.setDate(n.getDate()+7*Math.floor(t))},function(t){var r=n.time.year(t).getDay(
);return Math.floor((n.time.dayOfYear(t)+(r+i)%7)/7)-(r!==i)});n.time[t+"s"]=r.range;
n.time[t+"s"].utc=r.utc.range;n.time[t+"OfYear"]=function(t){var r=n.time.year(t).
getDay();return Math.floor((n.time.dayOfYear(t)+(r+i)%7)/7)}});n.time.week=n.time.
sunday;n.time.weeks=n.time.sunday.range;n.time.weeks.utc=n.time.sunday.utc.range;
n.time.weekOfYear=n.time.sundayOfYear;n.time.format=function(n){function t(t){for(
var u,e,s,f=[],r=-1,o=0;++r<i;)37===n.charCodeAt(r)&&(f.push(n.substring(o,r)),null!=
(e=yit[u=n.charAt(++r)])&&(u=n.charAt(++r)),(s=kf[u])&&(u=s(t,null==e?"e"===u?" ":
"0":e)),f.push(u),o=r+1);return f.push(n.substring(o,r)),f.join("")}var i=n.length;
return t.parse=function(t){var i={y:1900,m:0,d:1,H:0,M:0,S:0,L:0},u=su(i,n,t,0),
r;return u!=t.length?null:("p"in i&&(i.H=i.H%12+12*i.p),r=new l,"j"in i?r.setFullYear(
i.y,0,i.j):"w"in i&&("W"in i||"U"in i)?(r.setFullYear(i.y,0,1),r.setFullYear(i.y,
0,"W"in i?(i.w+6)%7+7*i.W-(r.getDay()+5)%7:i.w+7*i.U-(r.getDay()+6)%7)):r.setFullYear(
i.y,i.m,i.d),r.setHours(i.H,i.M,i.S,i.L),r)},t.toString=function(){return n},t};
var nw=hu(bh),cit=cu(bh),tw=hu(kh),lit=cu(kh),iw=hu(dh),ait=cu(dh),rw=hu(gh),vit=
cu(gh),uw=/^%/,yit={"-":"",_:" ",0:"0"},kf={a:function(n){return kh[n.getDay()]}
,A:function(n){return bh[n.getDay()]},b:function(n){return gh[n.getMonth()]},B:function(
n){return dh[n.getMonth()]},c:n.time.format("%a %b %e %X %Y"),d:function(n,t){return v(
n.getDate(),t,2)},e:function(n,t){return v(n.getDate(),t,2)},H:function(n,t){return v(
n.getHours(),t,2)},I:function(n,t){return v(n.getHours()%12||12,t,2)},j:function(
t,i){return v(1+n.time.dayOfYear(t),i,3)},L:function(n,t){return v(n.getMilliseconds(
),t,3)},m:function(n,t){return v(n.getMonth()+1,t,2)},M:function(n,t){return v(n.
getMinutes(),t,2)},p:function(n){return n.getHours()>=12?"PM":"AM"},S:function(n,
t){return v(n.getSeconds(),t,2)},U:function(t,i){return v(n.time.sundayOfYear(t),
i,2)},w:function(n){return n.getDay()},W:function(t,i){return v(n.time.mondayOfYear(
t),i,2)},x:n.time.format("%m/%d/%Y"),X:n.time.format("%H:%M:%S"),y:function(n,t)
{return v(n.getFullYear()%100,t,2)},Y:function(n,t){return v(n.getFullYear()%1e4,
t,4)},Z:ott,"%":function(){return"%"}},pit={a:hn,A:cn,b:yn,B:pn,c:wn,d:ly,e:ly,H:
ay,I:ay,j:itt,L:ftt,m:ttt,M:rtt,p:ett,S:utt,U:an,w:ln,W:vn,x:bn,X:kn,y:gn,Y:dn,"%":
stt},o=/^\s*\d+/,wit=n.map({am:0,pm:1});n.time.format.utc=function(t){function i(
n){try{l=oi;var t=new l;return t._=n,r(t)}finally{l=Date}}var r=n.time.format(t);
return i.parse=function(n){try{l=oi;var t=r.parse(n);return t&&t._}finally{l=Date}
},i.toString=r.toString,i};nc=n.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");n.time.
format.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?cs:
nc;cs.parse=function(n){var t=new Date(n);return isNaN(t)?null:t};cs.toString=nc.
toString;n.time.second=si(function(n){return new l(1e3*Math.floor(n/1e3))},function(
n,t){n.setTime(n.getTime()+1e3*Math.floor(t))},function(n){return n.getSeconds()}
);n.time.seconds=n.time.second.range;n.time.seconds.utc=n.time.second.utc.range;
n.time.minute=si(function(n){return new l(6e4*Math.floor(n/6e4))},function(n,t){
n.setTime(n.getTime()+6e4*Math.floor(t))},function(n){return n.getMinutes()});n.
time.minutes=n.time.minute.range;n.time.minutes.utc=n.time.minute.utc.range;n.time.
hour=si(function(n){var t=n.getTimezoneOffset()/60;return new l(36e5*(Math.floor(
n/36e5-t)+t))},function(n,t){n.setTime(n.getTime()+36e5*Math.floor(t))},function(
n){return n.getHours()});n.time.hours=n.time.hour.range;n.time.hours.utc=n.time.
hour.utc.range;n.time.month=si(function(t){return t=n.time.day(t),t.setDate(1),t}
,function(n,t){n.setMonth(n.getMonth()+t)},function(n){return n.getMonth()});n.time.
months=n.time.month.range;n.time.months.utc=n.time.month.utc.range;var df=[1e3,5e3,
15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,
31536e6],tc=[[n.time.second,1],[n.time.second,5],[n.time.second,15],[n.time.second,
30],[n.time.minute,1],[n.time.minute,5],[n.time.minute,15],[n.time.minute,30],[n.
time.hour,1],[n.time.hour,3],[n.time.hour,6],[n.time.hour,12],[n.time.day,1],[n.
time.day,2],[n.time.week,1],[n.time.month,1],[n.time.month,3],[n.time.year,1]],bit=
[[n.time.format("%Y"),gi],[n.time.format("%B"),function(n){return n.getMonth()}],
[n.time.format("%b %d"),function(n){return 1!=n.getDate()}],[n.time.format("%a %d"),
function(n){return n.getDay()&&1!=n.getDate()}],[n.time.format("%I %p"),function(
n){return n.getHours()}],[n.time.format("%I:%M"),function(n){return n.getMinutes(
)}],[n.time.format(":%S"),function(n){return n.getSeconds()}],[n.time.format(".%L"),
function(n){return n.getMilliseconds()}]],fw=n.scale.linear(),kit=vy(bit);tc.year=
function(n,t){return fw.domain(n.map(htt)).ticks(t).map(vs)};n.time.scale=function(
){return ls(n.scale.linear(),tc,kit)};var ew=tc.map(function(n){return[n[0].utc,
n[1]]}),dit=[[n.time.format.utc("%Y"),gi],[n.time.format.utc("%B"),function(n){return n.
getUTCMonth()}],[n.time.format.utc("%b %d"),function(n){return 1!=n.getUTCDate()}
],[n.time.format.utc("%a %d"),function(n){return n.getUTCDay()&&1!=n.getUTCDate(
)}],[n.time.format.utc("%I %p"),function(n){return n.getUTCHours()}],[n.time.format.
utc("%I:%M"),function(n){return n.getUTCMinutes()}],[n.time.format.utc(":%S"),function(
n){return n.getUTCSeconds()}],[n.time.format.utc(".%L"),function(n){return n.getUTCMilliseconds(
)}]],git=vy(dit);return ew.year=function(n,t){return fw.domain(n.map(ctt)).ticks(
t).map(ys)},n.time.scale.utc=function(){return ls(n.scale.linear(),ew,git)},n.text=
we(function(n){return n.responseText}),n.json=function(n,t){return be(n,"application/json",
ltt,t)},n.html=function(n,t){return be(n,"text/html",att,t)},n.xml=we(function(n)
{return n.responseXML}),n}(),function(n){n._allExperimentsMarkup='<div id="experiments">    <div id="grid"><\/div>    <div id="previewPane">        <div id="thumbnailContainer" data-bind="visible: pageLoaded">        <!-- ko ifnot: selectedItems().length !== 1 -->        <!-- ko template: { name: \'experimentSvgTemplate\', data: thumbnail, if: thumbnail } --><!-- /ko -->        <div class="spinner" data-bind="css: { thumbnailLoading: loading() }"><\/div>        <div class="shield"><\/div>        <!-- /ko -->        <!-- ko if: selectedItems().length !== 1 -->        <div class="selection-info">            <span data-bind="text: itemsSelectedMessage"><\/span>        <\/div>        <!-- /ko -->    <\/div>    <\/div><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._allExperimentsMarkup"),
function(n){n._apiCodeDialogMarkup='<p class="aux-dialogHeader" data-bind="text: DataLab.LocalizedResources.apiCodeDialogTopText"><\/p><p class="aux-dialogSubHeader" data-bind="text: DataLab.LocalizedResources.apiCodeDialogTitle"><\/p><div class="api-code-dialog">    <p><span data-bind="text: DataLab.LocalizedResources.apiCodeDialogWelcomeMessage"><\/span><a href=" http://go.microsoft.com/fwlink/?LinkId=524527" target="_blank" data-bind="text: DataLab.LocalizedResources.learnMore"><\/a><\/p>    <div class="dialog-warning" data-bind="text: DataLab.LocalizedResources.apiCodeDialogTokenWarning"><\/div>    <br />        <label id="long-code-label" for="long-code-text" data-bind="text: DataLab.LocalizedResources.apiCodeDialogLongCodeLabel"><\/label>    <div class="textarea-tabs" data-bind="foreach: languages">        <label>            <input type="radio" name="radio-group-languages" data-bind="attr: { value: $data }, checked: $parent.language" />            <span class="textarea-tab" data-bind="text: $data"><\/span>        <\/label>    <\/div>    <textarea id="long-code-text" data-bind="value: longCode" readonly="readonly" rows="13" style="width: 100%"><\/textarea>    <label><input data-bind="checked: useSecondaryToken, visible: !showExtraHelp" type="checkbox" /><span data-bind="text: DataLab.LocalizedResources.apiCodeDialogUseSecondaryTokenLabel, visible: !showExtraHelp"><\/span><\/label>        <a href=" http://go.microsoft.com/fwlink/?LinkId=524830" target="_blank" data-bind="visible: showExtraHelp"> Why is my workspace token unavailable?<\/a><\/div><!--See ApiCodeDialogViewModel.ts for the JavaScript code that shouldbe executed as part of this dialog. DialogView does not support usingJS within templates.-->'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._apiCodeDialogMarkup"),
function(n){n._columnPickerMarkup='<vflexbox class="columnPicker">    <flexfill style="min-height: 210px">        <flexcontent class="ruleSection">            <!-- ko if: !singleColumnSelection() -->                <input id="AllowDuplicatesCheckbox" type="checkbox" data-bind="checked: allowDuplicates" />                <label for="AllowDuplicatesCheckbox" data-bind="text: DataLab.LocalizedResources.allowDuplicatesInSelectionLabel"><\/label>            <!-- /ko -->            <div class="ruleTable">                <!-- ko if: !allowDuplicates() && !singleColumnSelection() -->                <hflexbox class="ruleRow">                    <flexstatic>                        <label for="RulesStartingChoice" data-bind="text: DataLab.LocalizedResources.rulesStartingChoiceLabel"><\/label>                        <div id="RulesStartingChoice" class="pushbutton startingChoice" data-bind="fxRadio: startingChoicesFxRadioOptions"><\/div>                    <\/flexstatic>                <\/hflexbox>                <!-- /ko -->                <!-- ko foreach: visibleRules -->                <hflexbox class="ruleRow" data-bind="validate: { value:  isFirstRule }">                    <flexstatic>                        <select class="ruleCategoryChoice" data-bind="options: ruleCategoryChoices, value: ruleCategory, optionsText: \'name\', optionsValue: \'exclude\', oninit: setWidthToStartingChoiceLabelWidth "><\/select>                        <select class="ruleTypeChoice" data-bind="options: ruleChoices, value: ruleType, optionsText: \'name\'"><\/select>                    <\/flexstatic>                    <!-- ko if: ruleType().id === "ColumnNames" -->                    <hflexbox class="columnNameList" data-bind="validate: { value: currentColumn }, click: setNameInputFocused, css: {hasItems: selectedColumns().length > 0 || invalidColumns().length > 0}">                        <!-- ko foreach: selectedColumns -->                        <flexstatic class="columnNameBox">                            <span data-bind="text: $data"><\/span>                            <span class="removeColumnName" data-bind="click: $parent.removeColumnName"><\/span>                        <\/flexstatic>                        <!-- /ko -->                        <!-- ko foreach: invalidColumns -->                        <flexstatic class="columnNameBoxInvalid">                            <span data-bind="text: $data"><\/span>                            <span class="removeColumnName" data-bind="click: $parent.removeInvalidColumnName"><\/span>                        <\/flexstatic>                        <!-- /ko -->                        <flexfill>                        <!-- ko if: $parent.hasSchema -->                        <input type="text" class="itemTextBoxInput" data-bind="hasfocus: nameInputFocused, attr: { placeholder: placeholderText }, style: { \'minWidth\': selectedColumns().length === 0 ? \'250px\' : \'50px\' }, itemTextBox: { validColumnNames: selectedColumns, invalidColumnNames: invalidColumns }, columnPickerAutocomplete: { array: $parent.autocompleteArray, dependentObservable: currentColumn, allowAnyEntry: $parent.schemaIsInaccurate }" />                        <!-- /ko -->                        <!-- ko ifnot: $parent.hasSchema -->                        <input type="text" class="itemTextBoxInput" data-bind="hasfocus: nameInputFocused, attr: { placeholder: placeholderText }, style: { \'minWidth\': selectedColumns().length === 0 ? \'250px\' : \'50px\' }, itemTextBox: { validColumnNames: selectedColumns, invalidColumnNames: invalidColumns }, value: currentColumn" />                        <!-- /ko -->                        <\/flexfill>                        <div class="textWidthSpan"><\/div>                    <\/hflexbox>                    <!-- /ko -->                    <!-- ko if: ruleType().id === "ColumnIndexes" -->                    <input class="columnIndicesInput" type="text" placeholder="Enter column indices" data-bind="value: indexList, validatedInputBox: { value: indexList } " />                    <!-- /ko -->                    <!-- ko if: ruleType().id === "ColumnTypes" -->                    <select class="columnAttributeDropDown" data-bind="options: typeChoices, selectedOptions: columnTypes"><\/select>                        <!-- ko if: hasKinds() -->                        <span style="padding: 4px;">%ColumnPickerColumnsThatAre%<\/span>                        <select class="columnAttributeDropDown" data-bind="options: kindChoices, selectedOptions: columnKinds"><\/select>                        <!-- /ko -->                    <!-- /ko -->                    <flexstatic class="buttonBox" data-bind="visible: $parent.allowMultipleRules">                        <input style="width: 20px;" type="button" value="+" data-bind="click: function(data, event) { $parent.createNewRule(data, true) }, enable: !$parent.allowDuplicates()" />                        <input style="width: 20px;" type="button" value="-" data-bind="click: function(data, event) { $parent.removeRule(data) }, enable: $parent.rules().length > 1" />                    <\/flexstatic>                <\/hflexbox>                <!-- /ko -->            <\/div>        <\/flexcontent>    <\/flexfill>    <flexstatic>        <hflexbox>            <flexfill><\/flexfill>            <flexstatic class="icon tick" data-bind="click: function(data, event) { if (!hasErrors()) { saveRulesAndClose()} }"><\/flexstatic>         <\/hflexbox>    <\/flexstatic><\/vflexbox>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._columnPickerMarkup"),
function(n){n._columnPickerOldDesignMarkup='<div class="columnPicker">    <h1 data-bind="text: singleColumnSelection() ? DataLab.LocalizedResources.singleColumnSelectHeading : DataLab.LocalizedResources.multipleColumnSelectHeading"><\/h1>    <flexfill style="min-height: 210px">        <flexcontent class="ruleSection">            <!-- ko if: !singleColumnSelection() -->            <input id="AllowDuplicatesCheckbox" type="checkbox" data-bind="checked: allowDuplicates" />            <label for="AllowDuplicatesCheckbox" data-bind="text: DataLab.LocalizedResources.allowDuplicatesInSelectionLabel"><\/label>            <!-- /ko -->            <div class="ruleTable">                <!-- ko if: !allowDuplicates() && !singleColumnSelection() -->                <hflexbox class="ruleRow">                    <flexstatic>                        <label for="RulesStartingChoice" data-bind="text: DataLab.LocalizedResources.rulesStartingChoiceLabel"><\/label>                        <select id="RulesStartingChoice" class="startingChoice" data-bind="options: startingChoices, value: startingChoice, optionsText: \'name\'"><\/select>                    <\/flexstatic>                <\/hflexbox>                <!-- /ko -->                <!-- ko foreach: visibleRules -->                <hflexbox class="ruleRow" data-bind="validate: { value:  isFirstRule }">                    <flexstatic>                        <select class="ruleCategoryChoice" data-bind="options: ruleCategoryChoices, value: ruleCategory, optionsText: \'name\', optionsValue: \'exclude\', oninit: setWidthToStartingChoiceLabelWidth "><\/select>                        <select class="ruleTypeChoice" data-bind="options: ruleChoices, value: ruleType, optionsText: \'name\'"><\/select>                    <\/flexstatic>                    <!-- ko if: ruleType().id === "ColumnNames" -->                    <hflexbox class="columnNameList" data-bind="validate: { value: currentColumn }, click: setNameInputFocused, css: {hasItems: selectedColumns().length > 0 || invalidColumns().length > 0}">                        <!-- ko foreach: selectedColumns -->                        <flexstatic class="columnNameBox">                            <span data-bind="text: $data"><\/span>                            <span class="removeColumnName" data-bind="click: $parent.removeColumnName"><\/span>                        <\/flexstatic>                        <!-- /ko -->                        <!-- ko foreach: invalidColumns -->                        <flexstatic class="columnNameBoxInvalid">                            <span data-bind="text: $data"><\/span>                            <span class="removeColumnName" data-bind="click: $parent.removeInvalidColumnName"><\/span>                        <\/flexstatic>                        <!-- /ko -->                        <flexfill>                            <!-- ko if: $parent.hasSchema -->                            <input type="text" class="itemTextBoxInput" data-bind="hasfocus: nameInputFocused, attr: { placeholder: placeholderText }, style: { \'minWidth\': selectedColumns().length === 0 ? \'250px\' : \'50px\' }, itemTextBox: { validColumnNames: selectedColumns, invalidColumnNames: invalidColumns }, columnPickerAutocomplete: { array: $parent.autocompleteArray, dependentObservable: currentColumn, allowAnyEntry: $parent.schemaIsInaccurate }" />                            <!-- /ko -->                            <!-- ko ifnot: $parent.hasSchema -->                            <input type="text" class="itemTextBoxInput" data-bind="hasfocus: nameInputFocused, attr: { placeholder: placeholderText }, style: { \'minWidth\': selectedColumns().length === 0 ? \'250px\' : \'50px\' }, itemTextBox: { validColumnNames: selectedColumns, invalidColumnNames: invalidColumns }, value: currentColumn" />                            <!-- /ko -->                        <\/flexfill>                        <div class="textWidthSpan"><\/div>                    <\/hflexbox>                    <!-- /ko -->                    <!-- ko if: ruleType().id === "ColumnIndexes" -->                    <input class="columnIndicesInput" type="text" placeholder="Enter column indices" data-bind="value: indexList, validatedInputBox: { value: indexList } " />                    <!-- /ko -->                    <!-- ko if: ruleType().id === "ColumnTypes" -->                    <select class="columnAttributeDropDown" data-bind="options: typeChoices, selectedOptions: columnTypes"><\/select>                    <!-- ko if: hasKinds() -->                    <span style="padding: 4px;">%ColumnPickerColumnsThatAre%<\/span>                    <select class="columnAttributeDropDown" data-bind="options: kindChoices, selectedOptions: columnKinds"><\/select>                    <!-- /ko -->                    <!-- /ko -->                    <flexstatic class="buttonBox" data-bind="visible: $parent.allowMultipleRules">                        <input style="width: 20px;" type="button" value="+" data-bind="click: function(data, event) { $parent.createNewRule(data, true) }, enable: !$parent.allowDuplicates()" />                        <input style="width: 20px;" type="button" value="-" data-bind="click: function(data, event) { $parent.removeRule(data) }, enable: $parent.rules().length > 1" />                    <\/flexstatic>                <\/hflexbox>                <!-- /ko -->            <\/div>        <\/flexcontent>    <\/flexfill>    <flexstatic>        <hflexbox>            <flexfill><\/flexfill>            <flexstatic class="icon tick" data-bind="click: function(data, event) { if (!hasErrors()) { saveRulesAndClose()} }"><\/flexstatic>        <\/hflexbox>    <\/flexstatic><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._columnPickerOldDesignMarkup"),
function(n){n._competitionSubmissionStep1Markup='<script type="text/html" id="CompetitionSubmissionStep1Template">    <div class="fx-dialog-template competition-submission-wizard-step">        <div class="preamble">%competitionSubmissionWizardStep1Preamble%<\/div>        <div class="datalab-dialog">            <!--<label for="submission-name">%competitionSubmissionWizardStep1SubmissionNameLabel%<\/label>-->            <input id="submission-name" type="text" class="submissionNameInput" data-bind="value: submissionName, validatedInputBox: { value: submissionName }" />        <\/div>    <\/div><\/script>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._competitionSubmissionStep1Markup"),
function(n){n._competitionSubmissionStep2Markup='<script type="text/html" id="CompetitionSubmissionStep2Template">    <div class="fx-dialog-template competition-submission-wizard-step">        <div class="datalab-dialog">            <!-- ko if: status() === ExperimentEditor.CompetitionSubmission.SubmissionStatus.Unstarted || status() === ExperimentEditor.CompetitionSubmission.SubmissionStatus.Validating -->            <div class="activity-in-progress animation"><\/div>            <!-- ko if: status() === ExperimentEditor.CompetitionSubmission.SubmissionStatus.Validating -->            <div class="activity-in-progress description">%competitionSubmissionWizardStep2Validating%<\/div>            <!-- /ko -->            <!-- /ko -->            <!-- ko if: status() === ExperimentEditor.CompetitionSubmission.SubmissionStatus.ErrorEncountered || status() === ExperimentEditor.CompetitionSubmission.SubmissionStatus.ValidationFailed || (status() === ExperimentEditor.CompetitionSubmission.SubmissionStatus.ValidationPassed && warnings().length > 0) -->            <div class="competition-submission-validation-results">                <!-- ko if: errors().length === 0 && status() !== ExperimentEditor.CompetitionSubmission.SubmissionStatus.ErrorEncountered -->                <div class="preamble">%competitionSubmissionWizardStep2WarningOnlyPreamble%<\/div>                <!-- /ko -->                <!-- ko if: errors().length > 0 -->                <div class="validation-results-container">                    <div class="validation-errors-header">                        <!-- ko if: errors().length === 1 -->                        <span data-bind="text: errors().length"><\/span> %competitionSubmissionWizardStep2Error%                        <!-- /ko -->                        <!-- ko if: errors().length > 1 -->                        <span data-bind="text: errors().length"><\/span> %competitionSubmissionWizardStep2Errors%                        <!-- /ko -->                    <\/div>                    <!-- ko foreach: errors -->                    <div class="validation-error-item" data-bind="text: $data.summary"><\/div>                    <!-- ko if: $data.details -->                    <textarea readonly class="validation-error-details" data-bind="text: $data.details"><\/textarea>                    <!-- /ko -->                    <!-- /ko -->                <\/div>                <!-- /ko -->                <!-- ko if: warnings().length > 0 -->                <div class="validation-results-container">                    <div class="validation-warnings-header">                        <!-- ko if: warnings().length === 1 -->                        <span data-bind="text: warnings().length"><\/span> %competitionSubmissionWizardStep2Warning%                        <!-- /ko -->                        <!-- ko if: warnings().length > 1 -->                        <span data-bind="text: warnings().length"><\/span> %competitionSubmissionWizardStep2Warnings%                        <!-- /ko -->                    <\/div>                    <!-- ko foreach: warnings -->                    <div class="validation-warning-item" data-bind="text: $data.summary"><\/div>                    <!-- /ko -->                <\/div>                <!-- /ko -->            <\/div>            <!-- /ko -->            <!-- ko if: status() === ExperimentEditor.CompetitionSubmission.SubmissionStatus.ValidationPassed && warnings().length === 0 -->            <div class="competition-submission-validation-results">                <div class="validation-results-container">                    <div class="validation-success-header">%competitionSubmissionWizardStep2NoErrors%<\/div>                    <div class="validation-success-message">%competitionSubmissionWizardStep2ReadyToSubmit%<\/div>                <\/div>            <\/div>            <!-- /ko -->        <\/div>    <\/div><\/script>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._competitionSubmissionStep2Markup"),
function(n){n._competitionSubmissionStep3Markup='<script type="text/html" id="CompetitionSubmissionStep3Template">    <div class="fx-dialog-template competition-submission-wizard-step">        <div class="datalab-dialog">            <!-- ko if: status() === ExperimentEditor.CompetitionSubmission.SubmissionStatus.Submitting -->            <div class="preamble">%competitionSubmissionWizardStep3VisitGalleryPreamble%<\/div>            <!-- /ko -->        <\/div>    <\/div><\/script>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._competitionSubmissionStep3Markup"),
function(n){n._competitionSubmissionTermAcceptanceStepMarkup='<script type="text/html" id="CompetitionSubmissionTermAcceptanceStepTemplate">    <div class="fx-dialog-template competition-submission-wizard-step term-acceptance">        <div class="datalab-dialog">            <textarea readonly class="terms">%competitionSubmissionTerms%<\/textarea>            <div class="acceptTermsCheckboxContainer">                <input type="checkbox" class="acceptTermsCheckbox" data-bind="checked: isTermAccepted">                %competitionSubmissionWizardTermAcceptanceStepAcceptTermsCheckboxLabel%            <\/div>        <\/div>    <\/div><\/script>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._competitionSubmissionTermAcceptanceStepMarkup"),
function(n){n._confirmationDialogMarkup='<h2 data-bind="text: title"><\/h2><p data-bind="text: text"><\/p>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._confirmationDialogMarkup"),
function(n){n._copyExperimentDialogMarkup='<h2>%copyExperimentDialogCopyExperiment%<\/h2><label>%copyExperimentDialogExperimentName%<\/label><input type="text" data-bind="validatedInputBox: { value: experimentName }" /> <label>%copyExperimentDialogDestinationWorkspace%<\/label><select data-bind="options: workspaceOptions, optionsText: \'FriendlyName\', value: destinationWorkspace, visible: workspaceInfoAvailable"><\/select><div class="copy-experiment-noWorkspaces" data-bind="visible: !workspaceInfoAvailable()">%copyExperimentDialogWorkspaceInfoNotAvailable%<\/div>            <div class="dialog-warning copy-experiment-warning" >%copyExperimentDialogCopyExperimentWarning%<\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._copyExperimentDialogMarkup"),
function(n){n._copyExperimentFromGalleryDialogMarkup='<h2 data-bind="text: title"><\/h2><!-- ko with: workspaceSelector --><label>%copyExperimentFromGalleryDialogDestinationWorkspace%<\/label><select data-bind="options: workspaces, optionsText: \'displayName\', value: destinationWorkspace, visible: workspaceInfoAvailable"><\/select><div class="copy-experiment-noWorkspaces" data-bind="visible: !workspaceInfoAvailable()">%copyExperimentDialogWorkspaceInfoNotAvailable%<\/div><!-- /ko -->'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._copyExperimentFromGalleryDialogMarkup"),
function(n){n._copyExperimentFromGalleryMultiGeoDialogMarkup='<h2 data-bind="text: title"><\/h2><!-- ko with: workspaceSelector --><label for="location-select">%copyExperimentFromGalleryGeoRegions%<\/label><select id="location-select" data-bind="options: locations, optionsText: \'location\', value: selectedLocation"><\/select><label for="workspace-select">%copyExperimentFromGalleryGeoWorkspaces%<\/label><select id="workspace-select" data-bind="options: workspaces, optionsText: \'displayName\', value: destinationWorkspace, visible: workspaceInfoAvailable() && !loadingWorkspaces() "><\/select><div class="copy-experiment-loading" data-bind="visible: loadingWorkspaces"><img src="../../../Content/Images/icon-status-status-dots-anim-16.gif" /><\/div><div class="copy-experiment-loading-message" data-bind="visible: loadingWorkspaces">%copyExperimentFromGalleryGeoLoading%<\/div><div class="copy-experiment-gallery-noWorkspaces" data-bind="visible: !workspaceInfoAvailable() && !loadingWorkspaces()">%copyExperimentFromGalleryDialogWorkspaceInfoNotAvailable%<\/div><!-- /ko -->'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._copyExperimentFromGalleryMultiGeoDialogMarkup"),
function(n){n._createWebServiceGraphFromTrainedModelDialogMarkup='<h2>Create Web Service<\/h2><div>    <div>        <label for="create-web-service-name" data-bind="text: \'%createWebServiceGraphNameLabel%\'"><\/label>        <input id="create-web-service-name" type="text" data-bind="value: name" />    <\/div>    <div>        <label for="create-web-service-description" data-bind="text: \'%createWebServiceGraphDescriptionLabel%\'"><\/label>        <textarea rows="4" id="create-web-service-description" data-bind="value: description" />    <\/div>        <div style="color: gray" data-bind="text: \'createWebServiceGraphTrainedModelCopyText\'">    <\/div><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._createWebServiceGraphFromTrainedModelDialogMarkup"),
function(n){n._createWebServiceGraphFromTransformDialogMarkup='<h2>Create Web Service<\/h2><div>    <div>        <label for="create-web-service-name" data-bind="text: \'%createWebServiceGraphNameLabel%\'"><\/label>        <input id="create-web-service-name" type="text" data-bind="value: name" />    <\/div>    <div>        <label for="create-web-service-description" data-bind="text: \'%createWebServiceGraphDescriptionLabel%\'"><\/label>        <textarea rows="4" id="create-web-service-description" data-bind="value: description" />    <\/div>        <div style="color: gray" data-bind="text: \'createWebServiceGraphTransformCopyText\'">    <\/div><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._createWebServiceGraphFromTransformDialogMarkup"),
function(n){n._dataGatewayDescriptionDialogMarkup='<div id="dataGatewayNameDialog">    <h2 data-bind="text: gatewayName"><\/h2>    <label>%newDataGatewayDescriptionLabel%<\/label>    <textarea class="description" data-bind="value: gatewayDescription, placeholder: \'%newDataGatewayDescriptionPlaceholder%\'"><\/textarea><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._dataGatewayDescriptionDialogMarkup"),
function(n){n._dataGatewayDownloadAndRegisterMarkup='<div id="dataGatewayDownloadDialog" >    <p class="Title" data-bind="text: gatewayName"><\/p>    <!-- ko if: transitionedToRegistered() -->        <p class="PrimaryAction"><span class="gatewayIconGood">%dataGatewayRegistered%<\/span><\/p>        <p>%dataGatewayRegisteredPostamble%<\/p>        <!-- ko if: gatewayHost() -->            <label>%host%<\/label>            <p data-bind="text: gatewayHost()" ><\/p>        <!-- /ko -->    <!-- /ko -->    <!-- ko if: (!registered() || !transitionedToRegistered()) -->        <p>%dataGatewayInstallPreamble%<\/p>        <!-- ko if: installLocalUrl() -->            <a class="PrimaryAction" data-bind="attr: { href: installLocalUrl }" >%dataGatewayInstallHereText%<\/a>            <p class="PrimaryAction">%or%<\/p>        <!-- /ko -->        <a  class="PrimaryAction"href="http://go.microsoft.com/fwlink/?LinkId=271260" target="_blank">%dataGatewayDownloadLinkText%<\/a>         <p>%dataGateway64BitPreferred%<\/p>    <!-- /ko -->    <!-- ko if: (!registered() && gatewayRegistrationKey()) -->        <p>%dataGatewayRegistrationKeyPreample%<\/p>        <label>%dataGatewayRegistrationKeyLabel%<\/label>        <div data-bind="fxsCopyButton: gatewayRegistrationKey" ><\/div>        <p class="gatewayStatus">            <span class="gatewayIconWarn">%dataGatewayRegistrationNeeded%<\/span>            <a href="" class="refreshLink" data-bind="click: refreshStatus, visible: !refreshingStatus()">%refreshStatus%<\/a>        <\/p>        <p>%dataGatewayRegistrationPostamble%<\/p>    <!-- /ko -->    <!-- ko if: (registered() && !transitionedToRegistered()) -->        <p>            <button data-bind="click: regenerateKey, enable: !regeneratingKey()">%dataGatewayRegenerateRegistrationKey%<\/button><br>            <span class="gatewayIconWarn">%dataGatewayRegeneateWarning%<\/span>        <\/p>    <!-- /ko --><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._dataGatewayDownloadAndRegisterMarkup"),
function(n){n._disabledFeatureDialogMarkup='<div class="trial-dialog">    <h1 class="dialog-title" data-bind="text: title"><\/h1>    <div class="dialog-description" data-bind="foreach: description">        <p data-bind="html: $data"><\/p>    <\/div>    <div class="dialog-button-container">        <button class="dialog-green-button dialog-button-left" data-bind="click: signIn">%trialDialogSignInNow%<\/button>        <button class="dialog-gray-button dialog-button-right autofocus" data-bind="click: dismiss">%trialDialogReturnToTrial%<\/button>    <\/div>    <!-- ko with: link -->    <a class="dialog-link" style="font-size: 10px" href="#" target="_blank" data-bind="attr: { href: url }, text: text"><\/a>    <!-- /ko --><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._disabledFeatureDialogMarkup"),
function(n){n._editorSurfaceMarkup='<script type="text/html" id="experimentSvgTemplate">    <svg xmlns="http://www.w3.org/2000/svg"         xmlns:xlink="http://www.w3.org/1999/xlink"         data-bind="contextMenu: $data.menuBuilder"         class="svgRoot"         preserveAspectRatio="xMidYMid meet"         width="100%" height="100%">        <g>            <!-- this <g> must be first -->            <!-- ko if: $data -->            <!-- TODO [1149812]: Bind to observable maps directly -->            <!-- ko foreach:DataLab.Util.values(experimentViewModel().connections()) -->            <path class="connectionHitTest" data-bind="attr:{d:path},event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp}" />            <path class="connection"                  data-bind="attr:{class:getClassId($parent.experimentViewModel().displayFlowType()),d:path},event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp}" />            <!-- /ko -->            <!-- ko foreach:DataLab.Util.values(experimentViewModel().nodes()) -->            <g data-bind="attr:{class:belongsToCurrentFlow($parent.experimentViewModel().displayFlowType())?\'\':\'disabledFlow\'}">                <rect rx="10" ry="10"                      data-bind="attr:{class:getClassId($parent.experimentViewModel().displayFlowType()),x:x,y:y,width:width,height:height,id:\'node-\' + graphNode.id},contextMenu:$root.menuBuilder,event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp,dblclick:$root.entityDoubleClick,mouseover:onMouseIn,mouseout:onMouseOut}">                    <title data-bind="text: tooltip"><\/title>                <\/rect>                <!-- ko foreach: DataLab.Util.values(inputPorts) -->                <g class="portElement" data-bind="attr:{transform:translation,class:getClassId($parents[1].experimentViewModel().displayFlowType()),\'data-portname\':portModel.name}">                    <g data-bind="contextMenu:$root.menuBuilder,                                      event:{                                          mousedown:$root.entityMouseDown,                                          mouseup:$root.entityMouseUp,                                          dblclick:$root.entityDoubleClick,                                          mouseenter:showLabel,                                          mouseleave: function(data, event) {                                              if ($(\'.portTextLabel\').length === 0) {                                                   hideLabel();                                              }                                            }                                          },                                      balloon:{message:balloonMessage}">                        <!-- Creates a bounding box around the port circle -->                        <rect class="portNoHighlight" height="14" width="16" x="-4" y="-7"><\/rect>                        <!-- ko if: !portModel.isInputPortForPublish() -->                        <!-- ko if: !portModel.isConnected() -->                        <circle r="5" cx="4" />                        <!-- /ko -->                        <!-- ko if: portModel.isConnected() -->                        <polygon points="-1,0 9,0 4,6" />                        <!-- /ko -->                        <!-- /ko -->                        <!-- ko if: portModel.isInputPortForPublish() && !showFullLabel() -->                        <image data-bind="attrWithNamespace: { \'xlink:href\': portModel.publishIcon }" height="32" width="32" x="-12" y="-16"><\/image>                        <!-- /ko -->                    <\/g>                <\/g>                <!-- /ko -->                <!-- ko foreach: DataLab.Util.values(outputPorts) -->                <g data-bind="attr:{transform:translation,class:getClassId($parents[1].experimentViewModel().displayFlowType()),\'data-portname\':portModel.name}">                    <g data-bind="contextMenu:$root.menuBuilder,                                      event:{                                          mousedown:$root.entityMouseDown,                                          mouseup:$root.entityMouseUp,                                          dblclick:$root.entityDoubleClick,                                          mouseenter:showLabel,                                          mouseleave:function(data, event) {                                            if ($(\'.portTextLabel\').length === 0) {                                                 hideLabel();                                            }                                          }                                      },                                      balloon:{message:balloonMessage}">                        <!-- Creates a bounding box around the port circle -->                        <rect class="portNoHighlight"                              height="14"                              width="16"                              x="-4"                              y="-7">                        <\/rect>                        <!-- ko if: !portModel.isOutputPortForPublish() -->                        <!-- ko if: portModel.isConnected() -->                        <circle class="connectedOutputPort" r="5" cx="4" />                        <!-- /ko -->                        <!-- ko if: !portModel.isConnected() -->                        <circle r="5" cx="4" />                        <!-- /ko -->                        <!-- /ko -->                        <!-- ko ifnot: $parent.selected()  && $index() < 9 -->                        <!-- ko if: portModel.isOutputPortForPublish() && !showFullLabel() -->                        <image data-bind="attrWithNamespace: { \'xlink:href\': portModel.publishIcon }" height="32" width="32" x="-12" y="-16"><\/image>                        <!-- /ko -->                        <!-- /ko -->                        <!-- ko if: $parent.selected() && $index() < 9 -->                        <g class="outputPortNumber">                            <!-- work around KO css binding not working for SVG elements -->                            <circle r="12.5" cx="4" data-bind="attr: { class: highlighted() ? \'active\' : \'\' }"><\/circle>                        <\/g>                        <!-- /ko -->                    <\/g>                <\/g>                <!-- ko if: $parent.selected() && $index() < 9 -->                <g class="outputPortNumber">                    <text dy="4" data-bind="text: $index() + 1 + \'\', attr: { transform: translation }"><\/text>                <\/g>                <!-- /ko -->                <!-- /ko -->                              <text class="staticText" data-bind="attr:{class:textClassId,x:labelPosX,y:labelPosY()+15}">                    <tspan data-bind="truncatedText:{label:label, maxWidth:labelMaxWidth}, visible: $root.renderThumbnail" />                <\/text>                <svg data-bind="attr: { x: iconPosX(), y: iconPosY() }" style="overflow: visible">                    <text data-bind="text: iconSymbol, attr: { \'class\': \'graphNode-icon \' + iconClass }" x="0" y="0" dy="25" width="25" height="25"><\/text>                <\/svg>                <svg data-bind="attr: { x: x() + width() - 40, y: labelPosY() + 2 }" class="nodeStatus">                    <image data-bind="hoverBalloon:{                                message:balloonMessage,                                forceBalloon:forceBalloon                            },                            click: $data.nodeIconClicked,                            event:{                                mousedown:$root.entityMouseDown,                                mouseup:$root.entityMouseUp,                                dblclick:$root.entityDoubleClick                            },                            contextMenu:$root.menuBuilder,                            attrWithNamespace:{                                \'xlink:href\':statusIconURL                            }"                           height="16"                           width="16">                    <\/image>                <\/svg>                <!-- ko if: hasComment() -->                <svg data-bind="attr: { x: x() + width() - 20, y: labelPosY() + 5 }" class="expander">                    <text data-bind="click: showHideComment,                            event:{                                mousedown:$root.entityMouseDown,                                mouseup:$root.entityMouseUp                            }, text: commentCollapsedExpandedIconSymbol,                            contextMenu:$root.menuBuilder"                          dy="1em"                          height="10"                          width="10">                    <\/text>                <\/svg>                <!-- /ko -->            <\/g>            <!-- /ko -->            <!-- ko ifnot: $root.renderThumbnail -->            <!-- Third loop to ensure port label tooltips are painted on top of everything else -->            <!-- ko foreach:DataLab.Util.values(experimentViewModel().nodes()) -->            <!-- ko ifnot: isConnection() -->            <!-- ko foreach: DataLab.Util.values(inputPorts) -->            <!-- ko if: showFullLabel() -->            <g data-bind="portTextLabel: { label: portModel.friendlyName + \' (\' + portTypes + \')\', model: $data }, portTooltipTransform: { x:tooltipPosX, y:tooltipPosY, name: portModel.friendlyName }, event: { mouseout:hideLabel, mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp, dblclick: $root.entityDoubleClick }, contextMenu:$root.menuBuilder" />            <!-- /ko -->            <!-- /ko -->            <!-- ko foreach: DataLab.Util.values(outputPorts) -->            <!-- ko if: showFullLabel() -->            <g data-bind="event: { mouseout:hideLabel, mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp, dblclick: $root.entityDoubleClick }, contextMenu:$root.menuBuilder">                <g data-bind="portTextLabel: { label: portModel.friendlyName + \' (\' + portTypes + \')\', model: $data, noIcon: $parent.selected() && $index() < 9 ? \'true\' : \'\' }, portTooltipTransform: { x:tooltipPosX, y:tooltipPosY, name: portModel.friendlyName }"><\/g>                <!-- ko if: $parent.selected() && $index() < 9 -->                <g class="outputPortNumber" data-bind="attr: { transform: translation }">                    <circle r="12.5" cx="4" class="active"><\/circle>                    <text dy="4" data-bind="text: $index() + 1 + \'\'"><\/text>                <\/g>                <!-- /ko -->            <\/g>            <!-- /ko -->            <!-- /ko -->            <!-- /ko -->            <!-- /ko -->            <!-- ko if: stateMachine.dragging() === ExperimentEditor.DraggingMode.SelectionRect -->            <!-- ko with: selectionManager -->            <rect class="selectionRect" data-bind="attr:{x:curX,y:curY,width:width,height:height}"><\/rect>            <!-- /ko -->            <!-- /ko -->            <!-- ko with: connector -->            <!-- ko if: isPreview -->            <path class="connector" fill="none" pointer-events="none" data-bind="visible:visible,attr:{d:path}" />            <!-- /ko -->            <!-- ko ifnot: isPreview -->            <line class="connector" pointer-events="none" data-bind="visible:visible,attr:{x1:x1,y1:y1,x2:x2,y2:y2}"><\/line>            <g data-bind="attr:{transform:translation}" class="port idlePort">                <polygon points="0,0 4,7 8,0" />            <\/g>            <!-- /ko -->            <!-- /ko -->            <!-- /ko -->            <!-- /ko -->        <\/g>    <\/svg><\/script><!-- ko ifnot: $root.renderThumbnail --><!-- ExperimentEditor control template markup --><div class="experimentEditorContainer" data-bind="attr:{class:classId}">    <div class="experimentCanvas">        <!-- ko if: shouldShowHelpWatermark -->        <div class="watermarkGraph"><\/div>        <span class="watermarkTextbox">            %experimentEditorWatermarkText%        <\/span>        <!-- /ko -->        <!-- ko if: DataLab.Features.miniMapInExperimentEditorEnabled()-->        <div class="miniMapAnchorDiv">        <\/div>        <!-- /ko -->        <!-- Experiment Editor SVG template start here -->        <div class="customElements">            <!-- ko template: { name: \'experimentSvgTemplate\', data: $data } --><!-- /ko -->            <div class="xe-overlay">            <!-- Div overlay for comments -->            <!-- ko foreach:DataLab.Util.values(experimentViewModel().nodes()) -->                <div class="staticText" data-bind="attr:{class:textClassId}, style:{left:labelPosX() + \'px\',top:labelPosY() + \'px\'}, text: label"><\/div>                <div class="comment" data-bind="attr:{class:commentClass,title:tooltip},style:{left:commentPosX, top:commentPosY,width:commentWidth},visible:!editingComment(),contextMenu:$root.menuBuilder,event:{mouseup:$root.entityMouseUp,mouseover:onMouseIn,mouseout:onMouseOut}">                    <pre class="text" data-bind="text:commentToShow,style:{height:(linesToShow()*20+\'px\')},event:{mousedown:$root.entityMouseDown,dblclick:$root.entityDoubleClick}">&nbsp;<\/pre>                <\/div>                <!-- /ko -->            <\/div>        <\/div>        <!-- This is here because text areas should behave like text areas when you click, drag and scroll -->        <div class="nativeElements">            <div class="xe-overlay">                <!-- ko foreach:DataLab.Util.values(experimentViewModel().nodes()) -->                <textarea class="comment" data-bind="style:{left:commentPosX,top:commentPosY,width:commentWidth},visible:editingComment,value:comment,hasfocus:editingComment,event:{keydown:$root.commentsEventHandler}">                <\/textarea>                <!-- /ko -->            <\/div>        <\/div>            <\/div>    <div id="controlPanelContainer">        <div id="controlPanel"><\/div>        <div id="displayFlowSwitch" data-bind="visible:experimentViewModel().experiment.isWebServiceExperiment()">            <div class="displayFlowSwitchIcon"                 data-bind="css: { experimentFlow: experimentViewModel().displayFlowType() === \'experiment\', webServiceFlow: experimentViewModel().displayFlowType() === \'webservice\'},                            click: experimentViewModel().displayFlowToggle.bind(experimentViewModel()),                            attr: { title: experimentViewModel().displayFlowType() === \'experiment\' ? \'%toggleToWebServiceViewTooltip%\' : \'%toggleToExperimentViewTooltip%\' }"><\/div>        <\/div>    <\/div>    <div class="experiment-statusAlertsContainer">        <div class="experiment-statusAlerts" data-bind="text: draftSaveLabel"><\/div>        <div class="experiment-statusAlerts" data-bind="text: refreshStatusLabel"><\/div>    <\/div><\/div><!-- /ko -->'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._editorSurfaceMarkup"),
function(n){n._experimentEditorMarkup='<div class="experiment-container">    <div class="xe-utilityPanelRoot"         style="display: none;"         data-bind="visible: !readOnlyMode(),                    resize: {                        direction: \'right\',                        parentContainerSelector: \'.experiment-container\',                        minSize: 254,                        id: \'palette\'                    },                    collapse: {                        collapseButtonSelector: \'.paletteExpander\',                        collapsed: paletteIsCollapsed,                        collapseFrom: \'right\',                        collapsedSize: 36,                        id: \'palette\'                    }">        <div class="icon paletteExpander"><\/div>        <div class="xe-paletteTitle">%datasetsModulesTrainedModelsLabel%<\/div>        <div class="xe-paletteContent">        <div class="xe-searchBox">            <input tabindex="3" type="text" data-bind="value:searchText, valueUpdate:[\'input\',\'keyup\']" placeholder="%palletteSearchBoxPlaceholder%" />            <span class="xe-searchIcon icon-Discovery"><\/span>        <\/div>        <div class="xe-utilityPanel"><\/div>    <\/div>    <\/div>    <div class="experiment-container-right">        <div tabindex="5" class="xe-propertyPanel">            <div class="propertyEditorRoot"><\/div>        <\/div>        <div class="headerExperimentEditorContainer">            <!-- ko if: projectViewModel.experimentVMs().length > 1 -->            <div tabindex="1" class="project-header">                <ul class="project-experiments-tabs" id="project-experiments-tabs">                    <!-- ko foreach: projectViewModel.experimentVMs() -->                    <li data-bind="text: roleName,                        attr: { title: roleName },                        click: navigate,                        css: { active: active(),                                inactive: !active() },                        style: { \'border-left\': $index() === 0 ? \'1px solid #d9d9d9\' : false }" />                    <!-- /ko -->                <\/ul>            <\/div>            <!-- /ko -->            <div tabindex="2" class="experiment-header" data-bind="style: { top: projectViewModel.experimentVMs().length > 1 ? \'52px\' : \'0px\' }">                <input class="experiment-description"                       id="experiment-description"                       type="text"                       placeholder="Enter experiment name here"                       data-bind="validatedInputBox: {                                        value: experiment.description,                                        disabled: readOnlyMode                                      },                                      hasfocus: descriptionFocus,                                  visible: experimentEditorViewModel.experimentViewModel().experimentLoaded,                                      attr: { disabled: readOnlyMode }" />                <div class="experiment-stateLabel" data-bind="text: experimentEditorViewModel.experimentViewModel().experimentStateDisplay().statusLabel, visible: experimentEditorViewModel.experimentViewModel().experimentLoaded"><\/div>                <img class="experiment-stateIcon" data-bind="hoverBalloon: { message: experimentEditorViewModel.experimentViewModel().experimentStateDisplay().iconHoverBalloon },                                      visible: experimentEditorViewModel.experimentViewModel().experimentLoaded,                                      attr: { src: experimentEditorViewModel.experimentViewModel().experimentStateDisplay().statusIconUrl }" />            <\/div>            <div tabindex="3" class="experimentEditorRoot" data-bind="style: { top: projectViewModel.experimentVMs().length > 1 ? \'96px\' : \'44px\', stopBinding: true }"><\/div>        <\/div>    <\/div>    <div class="customUX hidden">    <\/div>    <div class="prefetchImages"><\/div><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._experimentEditorMarkup"),
function(n){n._experimentSaveAsDialogMarkup='<div id="experimentSaveAsDialog">    <h1 class="aux-dialogHeader">%experimentSaveAsDialogHeading%<\/h1>    <h2 class="aux-dialogSubHeader">%experimentSaveAsDialogHeader%<\/h2>    <div class="formContainer">        <div class="fieldLabel">            <span>%experimentSaveAsDialogExperimentName%<\/span>        <\/div>        <input class="enterField" type="text" data-bind="validatedInputBox: { value: experimentName }, attr: { placeholder: experimentName().length===0 ? DataLab.LocalizedResources.experimentSaveAsDialogEnterHere : \'\' }" />    <\/div>    <!-- ko if: workspaceSelectorEnabled() -->    <div class="formContainer">        <div class="fieldLabel">%copyExperimentDialogDestinationWorkspace%<\/div>        <select data-bind="options: workspaceOptions, optionsText: \'DisplayText\', value: destinationWorkspace, optionsAfterRender: disableUnavailableOptions.bind($data)"><\/select>        <div class="dialog-warning copy-experiment-warning" data-bind="visible: !destinationIsCurrentWorkspace()">%copyExperimentDialogCopyExperimentWarning%<\/div>    <\/div>    <!-- /ko --><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._experimentSaveAsDialogMarkup"),
function(n){n._experimentSaveAsMarkup='<div class="experimentSaveAsDialog">    <h1>%experimentSaveAsDialogHeading%<\/h1>    <div class="contentDiv">        <label class="enterNameLabel">%experimentSaveAsDialogExperimentName%<\/label>        <div class="experimentNameHelpLink dlwux-sprite-icon-drawer-help" data-bind="click: launchSaveAsHelp"><\/div>        <input type="text" class="enterField" data-bind="validatedInputBox: { value: name }, attr: { placeholder: name().length===0 ? DataLab.LocalizedResources.experimentSaveAsDialogEnterHere : \'\' }" style="font-size: 18px;" />    <\/div>    <div class="icon customUXTick" data-bind="click: saveNameAndClose"><\/div> <\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._experimentSaveAsMarkup"),
function(n){n._expiredTrialDialogMarkup='<div class="trial-dialog">    <h1 class="dialog-title">%trialDialogExpiredTrialTitle%<\/h1>    <div class="dialog-description" data-bind="html: descriptionHtml"><\/div>    <div class="dialog-button-container">        <button class="dialog-green-button dialog-button-left" data-bind="click: signIn">%trialDialogSignIn%<\/button>        <button class="dialog-gray-button dialog-button-right" data-bind="click: endTrial">%trialDialogEndTrial%<\/button>    <\/div>    <a class="dialog-link" href="%trialDialogLearnMoreUrl%" target="_blank">%trialDialogLearnMore%<\/a><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._expiredTrialDialogMarkup"),
function(n){n._feedbackControlMarkup='<div title="%feedbackHoverText%"     class="datalab-feedback"     data-bind="css: { expanded: isExpanded() }">    <!-- left -->    <div class="datalab-feedback-left"         data-bind="css: { expanded: isExpanded() }">        <div class="datalab-feedback-left-question"             data-bind="css: { expanded: isExpanded() }, text: question">            %feedbackWhatDidYouLike%        <\/div>        <textarea class="datalab-feedback-textarea"                    placeholder="%feedbackPlaceholder%"                    data-bind="click: expand, css: { expanded: isExpanded() }, value: feedbackText, valueUpdate: \'input\', attr: { maxlength: MAX_LENGTH }"><\/textarea>        <div class="datalab-feedback-character-counter" data-bind="text: remainingLengthText, visible: isExpanded"><\/div>    <\/div>    <!-- right -->    <div class="datalab-feedback-right"         data-bind="css: { expanded: isExpanded() }">        <a class="datalab-feedback-rightImage datalab-feedback-iconSmileyHappy selected"           title="%feedbackSendASmile%"           data-bind="click: smileyHappySelected, css: { selected: isHappy() }"           href="#">        <\/a>        <a class="datalab-feedback-rightImage datalab-feedback-iconSmileySad"           title="%feedbackSendAFrown%"           data-bind="click: smileySadSelected, css: { selected: !isHappy() }"           href="#">        <\/a>        <a class="datalab-feedback-bottomValidation"           title="%feedbackSubmitFeedback%"           data-bind="click: sendFeedback"           href="#">        <\/a>    <\/div><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._feedbackControlMarkup"),
function(n){n._helpSearchMarkup='<div class="helpSearch">    <!-- ko if: !helpSearchEnabled()-->    <div class=\'helpIcon helpIconNoSearch\'><\/div>    <!-- /ko -->    <!-- ko if: helpSearchEnabled() -->    <div class=\'helpIcon helpIconWithSearch\'><\/div>    <input id="searchBox" type=\'text\' placeholder="%helpSearchPlaceholder%" maxlength="100" data-bind="value: queryInput,                                                                                   valueUpdate: \'input\',                                                                                              event: { keydown: onKeyDownEvent }" />    <div id="helpSearchResults" data-bind="slideVisible: isSearchResultsVisible,                                           animating: isSearchResultsAnimating">        <div id=\'helpResultsDownArrow\' data-bind="click: hideResults"><\/div>                <div class="helpResultsTitle" id="resultsExistTitle" data-bind="visible: !hasErrors()">            <span data-bind="visible: searchResults().length !== 0">%helpSearchHelpContentFor%<\/span>            <span data-bind="visible: searchResults().length === 0">%helpSearchNoResults%<\/span>            <i data-bind="text: currentQuery"><\/i>        <\/div>        <div class="helpResultsTitle" data-bind="visible: hasErrors">            %helpSearchNoResults%         <\/div>        <ul id="helpSearchQueryResults" data-bind="visible: searchResults().length !== 0">            <!-- ko foreach: searchResults -->            <li class=\'helpSearchResult\' data-bind="text: moduleName,                                                    click: $root.searchResultClicked"><\/li>            <!-- /ko -->        <\/ul>                <!-- ko if: synonymResults().length !== 0 -->        <div id=\'helpResultsDivider\'><\/div>        <div class=\'helpResultsTitle\' id="semanticSynonymsExistTitle">%helpSearchDidYouMean%<\/div>        <ul id="semanticSynonymsQueryResults">            <!-- ko foreach: synonymResults -->            <li class=\'semanticSynonym\' data-bind="text: $data,                                                   click: $parent.synonymResultClicked"><\/li>            <!-- /ko -->        <\/ul>        <!-- /ko -->    <\/div>    <div id="contextualHelpResults" style="display:none"><\/div>    <div id=\'helpLoader\' data-bind="visible: isLoading" />    <!-- /ko --><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._helpSearchMarkup"),
function(n){n._invitationDialogMarkup="<div class='invitationDialogContent'>    <div class=\"invitationDialogConnectInstructions\"><span>%accessPermissionInstructions%<\/span><\/div>    <span id='invitationDialogInstructions' data-bind=\"text: instructions,css:{invitationDialogInstructionsError: error}\"><\/span>    <br />    <div contenteditable='true' spellcheck='false' class='invitationDialogAddressesBox' data-bind=\"event:{keypress: pressHandler}\"><\/div>    <div class='invitationDialogRoleSelector'>        Add as:        <select data-bind='value: role'>            <option value='User'>%user%<\/option>            <option value='Owner'>%owner%<\/option>        <\/select>        <span data-bind='text:roleDescription' style='margin-left: 10px'><\/span>    <\/div><\/div>"}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._invitationDialogMarkup"),
function(n){n._limitedFeatureDialogMarkup='<div class="trial-dialog">    <h1 class="dialog-title" data-bind="text: title"><\/h1>    <div class="dialog-description" data-bind="foreach: description">        <p data-bind="html: $data"><\/p>    <\/div>    <div class="dialog-button-container">        <button class="dialog-green-button dialog-button-left" data-bind="click: signUp">%trialDialogShowMeHow%<\/button>        <button class="dialog-gray-button dialog-button-right autofocus" data-bind="click: dismiss">%trialDialogNotNow%<\/button>    <\/div>    <!-- ko with: link -->    <a class="dialog-link" style="font-size: 10px" href="#" target="_blank" data-bind="attr: { href: url }, text: text"><\/a>    <!-- /ko --><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._limitedFeatureDialogMarkup"),
function(n){n._menuMarkup='<script type="text/html" id="menuItemTemplate">    <!-- ko if:(!menuItem.divider()) -->    <li class="datalab-contextMenuItem"        data-bind="event: {mouseup:onActivated,mousedown:onMouseDown},                   subMenu:{activate:subMenu, menuSelector:parentMenu, displayCallback: onSubMenuDisplayed},                   css: {disabled:!enabled(), enabled:enabled(), hasSubmenu: subMenu}">        <!-- ko if:(menuItem.iconClass() !== \'\') -->        <div data-bind="attr:{class: \'menuItemImage \' + menuItem.iconClass() }"><\/div>        <!-- /ko -->        <span data-bind="text: menuItem.label"><\/span>        <!-- ko if: subMenu -->        <div class="datalab-contextMenu datalab-nocontext" style="position: absolute;">            <ul data-bind=\'template: { name: "menuItemTemplate", foreach: subMenu.items }\'><\/ul>        <\/div>        <div class="ee-rightarrow"><\/div>        <!-- /ko -->        <!-- ko if: !subMenu -->            <!-- ko if: menuItem.enabledTooltip() && enabled() -->            <div class="contextMenuToolTip" data-bind="hoverBalloon: { message: menuItem.enabledTooltip() } "><\/div>            <!-- /ko -->            <!-- ko if: menuItem.disabledTooltip() && !enabled() -->            <div class="contextMenuToolTip" data-bind="hoverBalloon:  { message: menuItem.disabledTooltip() } "><\/div>            <!-- /ko -->        <!-- /ko -->    <\/li>    <!-- /ko -->    <!-- ko if:menuItem.divider() -->    <li class="datalab-contextMenuItem divider"><\/li>    <!-- /ko --><\/script><script type="text/html" id="datalab-contextMenuTemplate">    <div class="datalab-contextMenu datalab-nocontext" style="position: absolute;" data-bind="style: { zIndex: zIndex }, event: {contextmenu:menu.contextMenuMouseUp}">        <ul class="datalab-contextMenu" data-bind="template: { name: \'menuItemTemplate\', foreach: menu.items }"><\/ul>    <\/div><\/script>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._menuMarkup"),
function(n){n._miniMapMarkup='<div class="miniMapAndLauncherContainer">    <div class="miniMapLauncher" data-bind="click: toggleExpandCollapse, attr: { title: DataLab.LocalizedResources.showHideMiniMap } ">    <\/div>    <div class="miniMapContainer miniMapBackground miniMapInvisible"         data-bind="visible: !miniMapCollapsed()">        <div class="miniMapDiv"><\/div>        <svg xmlns="http://www.w3.org/2000/svg"             xmlns:xlink="http://www.w3.org/1999/xlink"             data-bind="visible: !miniMapCollapsed(), event: { mouseleave: draggingStarted() ? highlightDragStop : null, mouseup: draggingStarted() ? highlightDragStop : null, mousemove: draggingStarted() ? highlightDrag : null }"             class="miniMapPositionHighlightSvg"             preserveAspectRatio="xMidYMid meet"             width="100%" height="100%">            <rect class="miniMapPositionHighlightRect"                  data-bind="attr: { x: positionHighlight().x, y: positionHighlight().y, width: positionHighlight().width, height: positionHighlight().height },                      event:{ mousedown: highlightDragStart }" />            <!--now add rectangles to shadow the non-highlighted part of the graph by having a slight opacity. They should not intersect since opacity is additive. -->            <rect class="miniMapShadowRect"                  data-bind="attr: { x: 0, y: 0, width: Math.max(mapWidth, 0), height: Math.max(positionHighlight().y, 0) }" />            <rect class="miniMapShadowRect"                  data-bind="attr: { x: 0, y: positionHighlight().y, width: Math.max(positionHighlight().x,0), height: Math.max(positionHighlight().height,0) }" />            <rect class="miniMapShadowRect"                  data-bind="attr: { x: 0, y: positionHighlight().y + positionHighlight().height, width: Math.max(mapWidth,0), height: Math.max(mapHeight - positionHighlight().y - positionHighlight().height,0) }" />            <rect class="miniMapShadowRect"                  data-bind="attr: { x: positionHighlight().x + positionHighlight().width, y: positionHighlight().y, width: Math.max(mapWidth - positionHighlight().x - positionHighlight().width,0), height: Math.max(positionHighlight().height,0) }" />        <\/svg>    <\/div><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._miniMapMarkup"),
function(n){n._moduleErrorMarkup='<div class="errorAndOutputLogDialog">    <h1 data-bind="text: dialogHeading"><\/h1>    <flexfill style="min-height: 210px">        <vflexbox>            <flexstatic class="errorDescription">                <span data-bind="text: errorDescription"><\/span>                <!-- ko if: errorInfo().hasErrorId -->                <span class="errorLinkParentheses">. (<\/span>                <a class="errorHelpLink" data-bind="attr: { href: errorHelpLink }, text: errorLinkLabel, click: launchErrorHelp"><\/a>                <span class ="errorLinkParentheses">)<\/span>                <!-- /ko -->            <\/flexstatic>            <flexstatic>                <span>%moduleErrorForumPrompt%<\/span>                <a class="" data-bind="click: launchForum" href="#">%moduleErrorForumLink%<\/a>            <\/flexstatic>            <flexstatic data-bind="visible: chatVisible">                <span>%moduleErrorChatPrompt%<\/span>                <a data-bind="click: toggleChat" href="#">%moduleErrorChatLink%<\/a>            <\/flexstatic>            <textarea class="smallLogMessage" readonly wrap="off" data-bind="text: errorDetails, visible: errorInfo().containsAdditionalInformation"><\/textarea>            <div>                <div class="dlwux-fx-dialog-ok icon moduleErrorTick" data-bind="click: close"><\/div>            <\/div>        <\/vflexbox>    <\/flexfill><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._moduleErrorMarkup"),
function(n){n._newDataGatewayStep1Markup='<script type="text/html" id="NewDataGatewayStep1Template">    <div id="dataGatewayNameDialog" class="fx-dialog-template datalab-dialog">        <p>%dataGatewayPreamble%<\/p>        <label>%newDataGatewayNameLabel%<\/label>        <input type="text" class="gatewayName" data-bind="value: gatewayName, validatedInputBox: { value: gatewayName }, enable: nameEnabled" />        <label>%newDataGatewayDescriptionLabel%<\/label>        <textarea class="description" data-bind="value: description, placeholder: \'%newDataGatewayDescriptionPlaceholder%\', enable: nameEnabled"><\/textarea>    <\/div><\/script>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._newDataGatewayStep1Markup"),
function(n){n._newDatasetMenuMarkup="<div class='fxs-drawerdetails-new-dataset'>    <div data-bind='text: detailMessage'><\/div><\/div>"}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._newDatasetMenuMarkup"),
function(n){n._newExperimentMenuMarkup=" <div class='fxs-drawerdetails-new-experiment'>     <div class='search-box'>         <div class=\"icon-Discovery\"><\/div>         <input type='text' placeholder='%newExperimentMenuSearchPlaceholder%' data-bind='value : searchText, valueUpdate : [\"input\", \"keyup\"]'>     <\/div>    <div class='experiment-tile-list'>        <div data-bind='text: DataLab.LocalizedResources.newExperimentMenuMicrosoftSamplesHeader'><\/div>        <!-- ko foreach:sampleExperiments -->             <!-- ko if: isBlankTemplate -->            <div class='experiment-tile' data-bind='visible: isVisible, click: $parent.onExperimentSelected'>                <div class='blank-experiment-preview'>                    <img class='blank-icon' data-bind='attr: {src: icon}' />                <\/div>                <div class='blank-name' data-bind='text: title'><\/div>            <\/div>            <!-- /ko -->                    <!-- ko if: isGuidedExperiment -->            <div class='guided-experiment-tile' data-bind='visible: isVisible, click: $parent.onExperimentSelected'>                <div class='guided-experiment-name'>%guidedExperimentName%<\/div>            <\/div>            <!-- /ko -->                        <!-- ko if: !isBlankTemplate && !isGuidedExperiment -->            <div class='experiment-tile' data-bind='visible: isVisible, click: $parent.onExperimentSelected'>                <div class='name' data-bind='text: title'><\/div>                <div class='experiment-preview'>                    <img class='icon' data-bind='attr: {src: icon}' />                <\/div>            <\/div>            <!-- /ko -->        <!-- /ko -->    <\/div><\/div>"}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._newExperimentMenuMarkup"),
function(n){n._newExperimentMenuWithCommunityMarkup=' <div class=\'fxs-drawerdetails-new-experiment fxs-drawerdetails-new-notebook\'>    <vflexbox class="loading-shield" data-bind="visible: loading()">        <div class="loading-label" data-bind=\'text: DataLab.LocalizedResources.newExperimentMenuLoading\'><\/div>    <\/vflexbox>    <div class=\'search-box\'>        <div class="icon-Discovery"><\/div>        <input type=\'text\' data-bind=\'value : searchTextInstantValue, valueUpdate : ["input", "keyup"], attr: { placeholder: searchBoxPlaceholder }\'>    <\/div>    <hflexbox class=\'experiment-list-container notebook-list-container\' data-bind="visible: !loading()">        <hflexbox class="experiment-list-header-container">            <div>                <img class="experiment-list-title-icon" src="/Content/Images/ExperimentCard/icons_msftSample.svg" />                <span class="experiment-list-title" data-bind=\'text: DataLab.LocalizedResources.newExperimentMenuMicrosoftSamplesHeader\'><\/span>            <\/div>            <span data-bind=\'style: { marginRight: viewMoreSamplesMargin }, visible: !searchTextDelayedValue().trim()\'>                <a class="experiment-list-view-more" href="#" target="_blank" data-bind=\'attr: { href: viewMoreSamplesLink }, text: DataLab.LocalizedResources.newExperimentMenuViewMoreInGallery\'><\/a>                <div class="view-more-popout-image dlwux-sprite-popout-icon"><\/div>            <\/span>        <\/hflexbox>        <hflexbox class=\'experiment-card-list\'>            <!-- ko foreach: cards -->            <div data-bind="template: { name: templateName }, visible: isVisible()"><\/div>            <!-- /ko -->        <\/hflexbox>    <\/hflexbox><\/div><!-- Experiment templates --><script type="text/html" id="blank-experiment-card-template">    <vflexbox class="blankExperimentCard" data-bind=\'click: $parent.onCardSelected\'>        <img class=\'blank-icon\' src=\'/Content/SampleExperimentIcons/PlusBlankExperiment.svg\' />        <span class=\'blank-name\'>%newExperimentMenuBlankExperiment%<\/span>    <\/vflexbox><\/script><script type="text/html" id="tour-experiment-card-template">    <vflexbox class="tourExperimentCard" data-bind=\'click: $parent.onCardSelected\'>        <div class=\'tour-name\'>%guidedExperimentName%<\/div>    <\/vflexbox><\/script><script type="text/html" id="experiment-card-template">    <div class="experimentCard" data-bind=\'hoverStatus: overlayIsActive\'>        <!-- ko if: overlayIsActive -->        <div class="hoverOverlay">            <button class="studioOpen" data-bind="click: $parent.onCardSelected">%newExperimentMenuOpenInStudio%<\/button>            <div class="galleryViewContainer">                <a class="galleryViewLabel" href="#" target="_blank" data-bind="attr: { href: viewInGalleryLink }">%newExperimentMenuViewInGallery%<\/a>                <div class="popoutImage dlwux-sprite-popout-icon"><\/div>            <\/div>            <div class="description" data-bind="ellipsisDiv: catalogEntity.summary"><\/div>        <\/div>        <!-- /ko -->        <div class="headerContainer">            <div class="header" data-bind="visible: !$parent.loading(), ellipsisDiv: catalogEntity.name"><\/div>        <\/div>        <img class="screenShot" data-bind="attr:{src: catalogEntity.image_url}" />        <div class="algoContainer">            <!-- ko if: algorithmList -->            <span class="algoIcon"><\/span>            <div class="algoTextContainer" data-bind="ellipsisDiv: algorithmList"><\/div>            <!-- /ko -->        <\/div>    <\/div><\/script><!-- Jupyter Notebook templates --><script id="blank-notebook-card-template" type="text/html">    <div class="notebook-card-blank" data-bind="click: $parent.onCardSelected">        <div class="notebook-card-icon-container">            <img class="notebook-card-icon" src="#" data-bind="attr: { src: icon, \'class\': \'notebook-card-icon \' + iconClass }" />        <\/div>        <div class="title" data-bind="text: nameLabel"><\/div>        <div class="subtitle" data-bind="text: subtitle"><\/div>    <\/div><\/script><script id="example-notebook-card-template" type="text/html">    <div class="notebook-card-sample" data-bind="click: $parent.onCardSelected">        <div class="title" data-bind="ellipsisDiv: nameLabel"><\/div>        <div class="notebook-card-icon-container">            <img class="notebook-card-icon" src="#" data-bind="attr: { src: icon, \'class\': \'notebook-card-icon \' + iconClass }" />        <\/div>        <div class="description" data-bind="text: description"><\/div>    <\/div><\/script><!-- TODO: refactor experiment-card-template and gallery-notebook-card-template into one template --><script id="gallery-notebook-card-template" type="text/html">    <div class="experimentCard notebook-card-gallery-sample" data-bind="hoverStatus: overlayIsActive">        <!-- ko if: overlayIsActive -->        <div class="hoverOverlay">            <button class="studioOpen" data-bind="click: $parent.onCardSelected">%newNotebookMenuOpenNotebook%<\/button>            <div class="galleryViewContainer">                <a class="galleryViewLabel" href="#" target="_blank" data-bind="attr: { href: viewInGalleryLink }">%newExperimentMenuViewInGallery%<\/a>                <div class="popoutImage dlwux-sprite-popout-icon"><\/div>            <\/div>            <div class="description" data-bind="ellipsisDiv: catalogEntity.summary"><\/div>        <\/div>        <!-- /ko -->        <img class="languageIcon" data-bind="attr: { src: languageImage }" />            <div class="headerContainer">            <div class="header" data-bind="visible: !$parent.loading(), ellipsisDiv: catalogEntity.name"><\/div>        <\/div>        <img class="screenShot" data-bind="attr: { src: catalogEntity.image_url }" />        <div class="tagContainer" data-bind="foreach: tagList">            <a class="tag" data-bind="text: $data"><\/a>        <\/div>        <\/div><\/script>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._newExperimentMenuWithCommunityMarkup"),
function(n){n._newModuleMenuMarkup="<div class='fxs-drawerdetails-new-module'>    <div data-bind='text: detailMessage'><\/div><\/div>"}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._newModuleMenuMarkup"),
function(n){n._newNotebookMenuMarkup='<div class="fxs-drawerdetails-new-notebook">    <div class="notebook-list-container">        <!-- ko foreach: blankNotebooks -->        <div class="notebook-card-blank" data-bind="click: $parent.onCardSelected, template: { name: \'notebook-blank-template\', data: $data }"><\/div>        <!-- /ko -->        <!-- ko foreach: exampleNotebooks -->        <div class="notebook-card-sample" data-bind="click: $parent.onCardSelected, template: { name: \'notebook-sample-template\', data: $data }"><\/div>        <!-- /ko -->    <\/div>    <script id="notebook-blank-template" type="text/html">        <div class="notebook-card-icon-container">            <img class="notebook-card-icon" src="#" data-bind="attr: { src: icon, \'class\': \'notebook-card-icon \' + iconClass }" />        <\/div>        <div class="title" data-bind="text: nameLabel"><\/div>        <div class="subtitle" data-bind="text: subtitle"><\/div>    <\/script>    <script id="notebook-sample-template" type="text/html">        <div class="title" data-bind="ellipsisDiv: nameLabel"><\/div>        <div class="notebook-card-icon-container">            <img class="notebook-card-icon" src="#" data-bind="attr: { src: icon, \'class\': \'notebook-card-icon \' + iconClass }" />        <\/div>        <div class="description" data-bind="text: description"><\/div>    <\/script><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._newNotebookMenuMarkup"),
function(n){n._newProjectMenuMarkup='<div class="fxs-drawerdetails-new-project">    <div class="new-project-name-input-container drawer-form-item">       <label for="new-project-name-input" data-bind="text: DataLab.LocalizedResources.projectQuickCreateLabelName"><\/label>\t   <input            id="new-project-name-input"            type="text"            data-bind="value: name, attr: {placeholder: DataLab.LocalizedResources.projectQuickCreateNamePlaceHolder, maxlength: nameMaxLength}"><\/input>\t<\/div>        <div class="new-project-description-input-container drawer-form-item">       <label for="new-project-description-input" data-bind="text: DataLab.LocalizedResources.projectQuickCreateLabelDescription"><\/label>\t   <textarea            id="new-project-description-input"            data-bind="value: description, attr: {placeholder: DataLab.LocalizedResources.projectQuickCreateDescriptionPlaceHolder, maxlength: descriptionMaxLength}">       <\/textarea>    <\/div>\t    <div class="new-project-create-button-container drawer-form-item fxs-drawermenu">        <label for="new-project-create-button" data-bind="text: DataLab.LocalizedResources.projectQuickCreateLabelCreateProject"><\/label>        <div id="new-project-create-button" class="fxs-drawermenu-ok" data-bind="click: createProject">            <span class=\'sprite\'><\/span>        <\/div>    <\/div><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._newProjectMenuMarkup"),
function(n){n._outputPromotionDialogMarkup='<h2>%SaveOutputAsANewDataset%<\/h2><!-- This markup is repeated in all dialogs for creating new datasets --><div class="dataset-form" data-bind="with: resource">    <div class="deprecate-header">        <input type="checkbox" data-bind="checked: deprecate"/>%uploadDatasetDialogNewVersionOfDataset%    <\/div>    <div class="animation-wrapper" data-bind="css: { hide: deprecate() }">        %uploadDatasetDialogEnterName%        <input type="text" data-bind="validatedInputBox: { value: _name }, enable: !deprecate()">    <\/div>    <div class="animation-wrapper" data-bind="css: { hide: !deprecate() }">        %uploadDatasetDialogExistingDataset%        <div class="datalab-validation-wrapper">                    <div class="datalab-validation-icon" data-bind="validate: { value: resourceToDeprecate }"><\/div>            <div class="datalab-validation-icon heuristic-hint" data-bind="style: { \'visibility\': hint() ? \'visible\' : \'hidden\', \'opacity\': hint() ? \'1\' : \'0\' }"><\/div>            <select data-bind="options: availableResources, value: resourceToDeprecate, enable: deprecate, optionsCaption: DataLab.LocalizedResources.ChooseDatasetToDeprecateAndEllipsis"><\/select>        <\/div>    <\/div><\/div>%uploadDatasetDialogDescription%<textarea rows="4" data-bind="value: resource.description"><\/textarea>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._outputPromotionDialogMarkup"),
function(n){n._paletteMarkup='<script type="text/html" id="palette">    <div class="xe-palette"         data-bind="jQueryCollapse: {                        collapseButtonSelector: \'.xe-paletteHeader\',                        contentSelector: \'.xe-paletteContent\',                        collapsed: isCollapsed,                        collapseFrom: \'bottom\',                        id: path ? path : name()                    }">        <div class="xe-paletteHeader">            <hflexbox>                <div class="paletteCategory-expander"><\/div>                <!-- ko if: icon !== null -->                <span data-bind="attr: { \'class\': \'paletteCategory-icon \' + icon }"><\/span>                <!-- /ko -->                <div class="paletteCategory-title" data-bind="text: name, visible: !isEmpty(), css: { expanded: !isCollapsed() }"><\/div>            <\/hflexbox>        <\/div>        <div class="xe-paletteContent">            <!-- ko foreach:items -->                <hflexbox class="xe-paletteItem"                      data-bind="attr: { id: id, class: classId, title: tooltip },                                mouseCapture: { mouseMove: $root.mouseMove, mouseUp: $root.mouseUp },                                event: { mousedown: $root.mouseDown, dblclick: $root.activate },                                visible:isVisible">                    <flexfill class="xe-paletteItemText" data-bind="text: name" ><\/flexfill>                    <flexstatic class="paletteGripper"><\/flexstatic>                <\/hflexbox>            <!-- /ko -->                    <!-- ko foreach:childCategories -->                <!-- ko if: !isEmpty() -->                    <div data-bind="template: { name: \'palette\' }"><\/div>                <!-- /ko -->            <!-- /ko -->        <\/div>    <\/div><\/script><!-- ko foreach: categories -->    <!-- ko if: !isEmpty() -->        <div data-bind="template: { name: \'palette\' }"><\/div>    <!-- /ko --><!-- /ko -->'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._paletteMarkup"),
function(n){n._pauseUserWithSpinnerMarkup='<vflexbox class="loadingMessageContainer">    <img src="/Content/Images/spinner-md.gif">    <div class="loadingText" data-bind="text:title"><\/div><\/vflexbox>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._pauseUserWithSpinnerMarkup"),
function(n){n._projectDetailMarkup='<div id="projects">    <div id="grid">        this is the detail page        <div>proj pane<\/div>        <div data-bind="with: project">            <div data-bind="text: Name"><\/div>            <div>                <span>                    <span>description: <\/span>                    <span data-bind="text: Description"><\/span>                <\/span>            <\/div>        <\/div>        <!-- ko if: experiments().length > 0-->        <div>            <div>Experiments<\/div>            <ul data-bind="foreach: experiments">                <li>                    <span data-bind="text: name, click: toggleDetails"><\/span>                    <!-- ko if: showDetails-->                    <ul>                        <li data-bind="text: owner"><\/li>                        <li data-bind="text: lastModified"><\/li>                        <li data-bind="click: navigateToExperiment">testLink<\/li>                    <\/ul>                    <!-- /ko-->                <\/li>            <\/ul>        <\/div>        <!-- /ko-->        <!-- ko if: notebooks().length > 0-->        <div>            <div>Notebooks<\/div>            <ul data-bind="foreach: notebooks">                <li>                    <span data-bind="text: name, click: toggleDetails"><\/span>                    <!-- ko if: showDetails-->                    <ul>                        <li data-bind="text: lastModified"><\/li>                    <\/ul>                    <!-- /ko-->                <\/li>            <\/ul>        <\/div>        <!-- /ko-->        <!-- ko if: webServices().length > 0-->        <div>            <div>Web Services<\/div>            <ul data-bind="foreach: webServices">                <li data-bind="text: name, click: toggleDetails"><\/li>                <!-- ko if: showDetails-->                <li data-bind="text: lastModified"><\/li>                <!-- /ko-->            <\/ul>        <\/div>        <!-- /ko-->    <\/div><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._projectDetailMarkup"),
function(n){n._projectListMarkup='<div id="projects">    <div id="grid">\t\tthis is the grid pane        <ul data-bind="foreach: projectsList">            <li class="dummyProject" data-bind="text: Name, click: $parent.selectProject"><\/li>        <\/ul>\t<\/div>    <div id="propertyPane" data-bind="with: projectDetailViewModel">        <div>proj pane<\/div>        <!-- ko if: project -->        <div data-bind="click: navigateToProject">link to project<\/div>        <div data-bind="with: project">            <div data-bind="text: Name"><\/div>        <div>            <span>                    <span>description: <\/span>                    <span data-bind="text: Description"><\/span>            <\/span>        <\/div>        <\/div>        <!-- ko if: experiments().length > 0-->        <div>            <div>Experiments<\/div>            <ul data-bind="foreach: experiments">                <li>                    <span data-bind="text: name, click: toggleDetails"><\/span>                <!-- ko if: showDetails-->                <ul>                    <li data-bind="text: owner"><\/li>                    <li data-bind="text: lastModified"><\/li>                    <li data-bind="click: navigateToExperiment">testLink<\/li>                <\/ul>                <!-- /ko-->                <\/li>            <\/ul>        <\/div>        <!-- /ko-->        <!-- ko if: notebooks().length > 0-->        <div>            <div>Notebooks<\/div>            <ul data-bind="foreach: notebooks">                <li>                    <span data-bind="text: name, click: toggleDetails"><\/span>                <!-- ko if: showDetails-->                    <ul>                        <li data-bind="text: lastModified"><\/li>                    <\/ul>                <!-- /ko-->                <\/li>            <\/ul>        <\/div>        <!-- /ko-->        <!-- ko if: webServices().length > 0-->        <div>            <div>Web Services<\/div>            <ul data-bind="foreach: webServices">                <li data-bind="text: name, click: toggleDetails"><\/li>                <!-- ko if: showDetails-->                <li data-bind="text: lastModified"><\/li>                <!-- /ko-->            <\/ul>        <\/div>        <!-- /ko-->        <!-- /ko-->        <!-- ko if: !project() -->            <div>No Project selected<\/div>        <!-- /ko-->    <\/div><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._projectListMarkup"),
function(n){n._propertyEditorMarkup='<script type="text/html" id="inputParameter">    <input type="text"           class="datalab-gridCellPropertyItem"           data-bind="validatedInputBox: { value: property.value, disabled: ($root.readOnlyMode() || isDisabled()) },                      hasfocus: focus,                      readonly:  $root.readOnlyMode() || isDisabled(),                      css: { disabled: $root.readOnlyMode() || isDisabled() },                      event: { focus: $root.onParameterFocus, keydown: $root.onParameterReturn },                      autocomplete: { array: autocompleteArray, dependentObservable: property.value }" /><\/script><script type="text/html" id="textAreaParameter">    <div style="position: relative"         data-bind="resize: {                        direction: \'bottom\',                        parentContainerSelector: \'.propertyEditor-right\',                        minSize: 125,                        maxSize: 9999,                        id: property.label                    }">        <div class="monaco-container datalab-gridCellPropertyItem"             data-bind="monaco: {                            value: property.value,                            mimetype: monacoMimeType,                            containerWidth: $root.width,                            insertSpaces: untabify,                            expandOnFocus: true                        },                        validatedInputBox: {value: property.value},                        style: { backgroundColor: ($root.readOnlyMode() || isDisabled()) ? \'rgba(0, 0, 0, 0.05)\' : \'\' },                        css: { focused: focus},                        readonly: $root.readOnlyMode() || isDisabled()">        <\/div>    <\/div><\/script><script type="text/html" id="checkboxParameter">    <input type="checkbox"           class="datalab-gridCellPropertyItem"           data-bind="checkboxvalue: { value: property.value, choices: property.descriptor.choices },                      hasfocus: focus,                      disable: ($root.readOnlyMode() || isDisabled()),                      css: { disabled: ($root.readOnlyMode() || isDisabled()) },                      event: { focus: $root.onParameterFocus }" /><\/script><script type="text/html" id="multiSelectParameter">    <div class=".datalab-gridCellTextArea"         data-bind="multiSelectMenu: enumItems">        <hflexbox class="datalab-gridCellPropertyItem multiSelectButton">            <div class="datalab-gridCellPropertyItem"                 data-bind="text: buttonLabel"><\/div>            <div style="float:right">&#9660<\/div>        <\/hflexbox>        <ul data-bind="foreach: enumItems" class="datalab-gridCellPropertyItem multiSelectMenu">            <li data-bind="css: classString">                <a href=" #" data-bind="text: displayValue" />            <\/li>        <\/ul>    <\/div><\/script><script type="text/html" id="selectParameter">    <select class="datalab-gridCellPropertyItem"            data-bind="value: property.value,                   hasfocus: focus,                   options: property.descriptor.choices,                   optionsText: \'displayValue\',                   optionsValue: \'value\',                   disable: ($root.readOnlyMode() || isDisabled()),                   css: { disabled: ($root.readOnlyMode() || isDisabled()) },                   event: { focus: $root.onParameterFocus }"><\/select><\/script><script type="text/html" id="dataGatewayNameParameter">    <select class="datalab-gridCellPropertyItem"            data-bind="value: property.value,                   hasfocus: focus,                   options: choices,                   optionsText: \'displayValue\',                   optionsValue: \'value\',                   disable: ($root.readOnlyMode() || isDisabled()),                   css: { disabled: ($root.readOnlyMode() || isDisabled()) },                   event: { focus: $root.onParameterFocus }"><\/select><\/script><script type="text/html" id="staticTextProperty">    <div class="datalab-gridCellPropertyItem datalab-staticProperty"         data-bind="text: property.value, attr: { title: property.value }, style: { whiteSpace: property.name === \'Status details\' ? \'normal\' : \'nowrap\' }">    <\/div><\/script><script type="text/html" id="editableTextAreaProperty">    <div class="editableTextAreaProperty" data-bind="editableTextArea: {}">        <textarea class="datalab-gridCellPropertyItem editableTextArea" data-bind="value: $parent.property.value, css: { disabled: $data.isReadOnly }"><\/textarea>        <span class="characterLimitReachedWarning">            <span class="charactersLeftCount"><\/span>            %charactersLeft%        <\/span>    <\/div><\/script><script type="text/html" id="credentialParameter">    <input type="password"           class="datalab-gridCellPropertyItem"           data-bind="validatedInputBox: { value: property.value, disabled: ($root.readOnlyMode() || isDisabled()) },                      disable: $root.readOnlyMode() || isDisabled(),                      hasfocus: focus,                      css: { disabled:$root.readOnlyMode() || isDisabled() }" /><\/script><script type="text/html" id="dataGatewayCredentialParameter">    <div data-bind="css: invalidClass()">        <div class="dataGatewayCredentialsValue">            <!-- ko if: property.value() -->            <span data-bind="text: DataLab.LocalizedResources.dataGatewayCredentialValuesSet" class="gatewayIconGood"><\/span>            <!-- /ko -->            <!-- ko if: !(property.value()) -->            <span data-bind="text: DataLab.LocalizedResources.dataGatewayCredentialValuesRequired"><\/span>            <!-- /ko -->        <\/div>    <\/div>    <input type="button"           class="datalab-gridCellPropertyItem"           data-bind="disable: $root.readOnlyMode() || isDisabled() || !canEnterValue(),                      click: enterValue,                      value: DataLab.LocalizedResources.dataGatewayEnterCredentials,                      hasfocus: focus" />    <div data-bind="if: showClickOnceWarning">        <span data-bind="text: DataLab.LocalizedResources.clickOnceWarning" class="gatewayIconWarn"><\/span>    <\/div><\/script><script type="text/html" id="columnPickerParameter">    <div class="datalab-gridCellPropertyItem columnPickerRules"         data-bind="columnPickerRuleDisplay: property.value,                      css: { disabled: (isDisabled()) }">    <\/div>    <input type="button"           class="datalab-gridCellPropertyItem"           data-bind="value: DataLab.LocalizedResources.launchColumnSelector,                      click: $root.openColumnPicker,                      disable: $root.readOnlyMode() || isDisabled() || launchDisabled" /><\/script><script type="text/html" id="usePreviousResultsParameter">    <div class="propertyEditor-headingCell" data-bind="attr:{title:DataLab.LocalizedResources.usePreviousResultsLabelTooltip}">        <input id="usePreviousResultsCheckbox"               type="checkbox"               class="datalab-gridCellPropertyItem textAreaProperty"               data-bind="checked: property.value" />        <div class="datalab-usePreviousResultsLabel textAreaProperty"             data-bind="text: DataLab.LocalizedResources.usePreviousResultsLabel">        <\/div>    <\/div><\/script><script type="text/html" id="parameterRangeParameter">    <span class="parameterRangeLabel"           data-bind="text: DataLab.LocalizedResources.useRangeBuilderLabel"           style="font-size:12px;line-height: 16.25px; font-family: Segoe UI;">    <\/span>    <input id="UseRangeBuilderCheckbox"           type="checkbox"           class="datalab-gridCellPropertyItem"           data-bind="checked: useRangeBuilder,                      disable: $root.readOnlyMode(),                      css: { disabled: $root.readOnlyMode()}" />    <!-- ko if: !useRangeBuilder() -->    <input type="text"           class="datalab-gridCellPropertyItem"           data-bind="value: literalList,                      validatedInputBox: { value: literalList, disabled: $root.readOnlyMode()},                      readonly: $root.readOnlyMode(),                      css: { disabled: $root.readOnlyMode()}" />    <!-- /ko -->    <!-- ko if: useRangeBuilder() -->    <div>        <span>            <span data-bind="text: DataLab.LocalizedResources.ParameterRangeLabel"                  style="font-size: 12px;line-height: 16.25px; font-family: Segoe UI;">            <\/span>            <span id="ParameterRangeAsString"                  data-bind="text: rangeString"                   style="font-size: 12px;line-height: 16.25px; font-family: Segoe UI;">            <\/span>        <\/span>        <!-- ko if: isLogarithmic() -->        <div class="parameterRangeSlider"             data-bind="slider: [logMin, logMax],                        sliderOptions: {min: logMinLimit, max: logMaxLimit, range:true, step: logSliderStep, values: [logMin, logMax], disabled: $root.readOnlyMode()}"             style="margin: 5px 10px">        <\/div>        <!-- /ko -->        <!-- ko if: !isLogarithmic() -->        <div class="parameterRangeSlider"             data-bind="slider: [minValue, maxValue],                        sliderOptions: {min: sliderMin, max: sliderMax, range:true, step: linSliderStep, values: [sliderMin, sliderMax], disabled: $root.readOnlyMode()}"             style="margin: 5px 10px">        <\/div>        <!-- /ko -->        <div>            <span class="parameterRangeLabel"                   data-bind="text: DataLab.LocalizedResources.rangeBuilderCount"                   style="font-size: 12px;line-height: 16.25px; font-family: Segoe UI;">            <\/span>            <input class="parameterRangeCount"                   id="rangeBuilderCount"                   type="text"                   data-bind="value: countValidatable,                              validatedInputBox: { value: countValidatable, disabled: $root.readOnlyMode()},                              readonly: $root.readOnlyMode(),                              css: { disabled: $root.readOnlyMode()}"                   style="width:40px; border: 1px solid #ccc; padding-left: 5px; padding-right: 5px; background-color: #fff;" />        <\/div>        <!-- ko if: logCapable -->        <div>            <span class="parameterRangeLabel"                   data-bind="text: DataLab.LocalizedResources.rangeBuilderLogarithmicScaleCheckbox"                   style="font-size: 12px;line-height: 16.25px; font-family: Segoe UI;">            <\/span>            <input id="LogarithmicCheckbox"                   type="checkbox"                   class="datalab-gridCellPropertyItem"                   data-bind="checked: isLogarithmic,                              disable: $root.readOnlyMode(),                              css: { disabled: $root.readOnlyMode()}" />        <\/div>        <!-- /ko -->    <\/div>    <!-- /ko --><\/script><script type="text/html" id="linkProperty">    <div class="propertyLink">        <a href=\'#\' data-bind="attr: { title: property.tooltip, href: (property.endpoint && property.endpoint.Size === -1) ? \'#\' : property.value},                      hasfocus: focus,                      event: { focus: $root.onParameterFocus, click: onClick },                      text: property.label"           target="_blank">        <\/a>    <\/div>    <div class="propertyLinkMetaData" data-bind="visible: (property.endpoint && property.endpoint.Size === -1)">&nbsp;(none)<\/div><\/script><script type="text/html" id="buttonProperty">    <div class="propertyEditor-staticValueCell">        <div class="datalab-gridCellTextArea">            <div class=" propertyeditor-statictextareaitem propertyeditor-headingcellwrapper"                 data-bind="css: { isButton: templateType() === \'buttonProperty\' }, visible: property.value() === false || property.value()">                <button data-bind="attr: { title: property.tooltip, name: property.label},                           hasfocus: focus,                           event: { focus: $root.onParameterFocus, click: onClick },                           text: property.label,                           disable: clickDisabled"><\/button>            <\/div>            <div class="propertyLinkMetaData" data-bind="visible: (property.endpoint && property.endpoint.Size === -1)">&nbsp;(none)<\/div>        <\/div>    <\/div><\/script><script type="text/html" id="propertyKey">    <!-- ko if: isExperimentLevel() && !$root.readOnlyMode() -->    <div>        <input type="text"               class="datalab-gridCellPropertyItem"               data-bind="validatedInputBox: { value: property.validatableName },                              event: { blur: property.textboxBlur, keydown: property.textboxKeydown },                              visible: property.isEditingName" />        <div class="datalab-gridCellKey"             data-bind="attr: { title: property.tooltip },                    text: property.label,                    click: property.toggleEditingName,                    visible: !property.isEditingName()">        <\/div>    <\/div>    <!-- /ko -->    <!-- ko ifnot: isExperimentLevel() && !$root.readOnlyMode() -->    <!-- ko if: templateType() === \'linkProperty\' -->    <hflexbox class="datalab-gridCellKey" data-bind="template: { name: \'linkProperty\' }"><\/hflexbox>    <!-- /ko -->    <!-- ko if: templateType() === \'buttonProperty\' -->    <hflexbox class="datalab-gridCellKey" data-bind="template: { name: \'buttonProperty\' }"><\/hflexbox>    <!-- /ko -->    <!-- ko if: templateType() !== \'linkProperty\' && templateType() !== \'buttonProperty\' -->    <div class="datalab-gridCellKey" data-bind="attr: { title: property.tooltip }, text: property.label"><\/div>    <!-- /ko -->    <!-- /ko --><\/script><script type="text/html" id="propertyItem">    <div class="propertyEditor-textAreaItem">        <div class="propertyEditor-headingCellWrapper" data-bind="css: { propertyEditorHeadingCellWrapperEditingName: property.isEditingName, isLink: templateType() === \'linkProperty\' }">            <div class="propertyEditor-headingCell">                <div class="propertyEditor-sideButtonWrapper">                    <div class="parameterIsLinked linkStatus propertyEditorButton"                         data-bind="style: { visibility: property.isLinked() && !isExperimentLevel() ? \'visible\' : \'hidden\' },                                    event: { click: $root.focusLinkedWebServiceParameter },                                    attr: { title: DataLab.Util.format(DataLab.LocalizedResources.parameterIsLinkedToWebServiceParameter, linkedParameterName()) }">                    <\/div>                    <!-- ko if: !isExperimentLevel() && isLinkable -->                    <div class="propertyEditorButton dropMenu"                         data-bind="dropMenu: $root.menuBuilder">                    <\/div>                    <!-- /ko -->                    <!-- ko if: isExperimentLevel() && !$root.readOnlyMode() -->                    <div class="propertyEditorButton dropMenu"                          data-bind="dropMenu: $root.webServiceParameterMenuBuilder">                    <\/div>                    <!-- /ko -->                    <!-- ko if: templateType() === "textAreaParameter" -->                    <!-- ko if: showPopupIcon() -->                    <div class="propertyEditorButton"                         data-bind="event:{ mousedown: $root.openScriptEditor}, attr: {title: DataLab.LocalizedResources.experimentEditorPropertiesPaneScriptEditorPopOut}">                        <span class="icon icon-openscripteditor"><\/span>                    <\/div>                    <!-- /ko -->                    <!-- /ko -->                <\/div>                <!-- ko if: templateType() === \'checkboxParameter\' -->                <div data-bind="template: { name: \'checkboxParameter\' },                                visible: !isExperimentLevel() || property.hasDefaultValue()">                <\/div>                <!-- /ko -->                <div class="datalab-gridCellKeyWrapper"                     data-bind="template: { name: \'propertyKey\' }">                <\/div>            <\/div>        <\/div>        <!-- ko if: templateType() !== \'checkboxParameter\' && templateType() !== \'linkProperty\' && templateType() !== \'buttonProperty\' -->        <!-- ko if: !isExperimentLevel() || property.hasDefaultValue() -->        <div class="propertyEditor-valueCellWrapper">            <div class="datalab-gridCellTextArea" data-bind="template: { name: templateType }"><\/div>        <\/div>        <!-- /ko -->        <!-- /ko -->    <\/div>    <!-- ko foreach: childParameters -->    <!-- ko if: property.isRelevant() -->    <div data-bind="template: { name: \'propertyItem\' }"><\/div>    <!-- /ko -->    <!-- /ko --><\/script><script type="text/html" id="checkboxProperty">    <input type="checkbox"           class="datalab-gridCellPropertyItem"           data-bind="checked: property.value,                        hasfocus: focus,                        disable: $root.readOnlyMode(),                        css: { disabled: $root.readOnlyMode() },                        event: { focus: $root.onParameterFocus }" />    <div class="datalab-gridCellKeyWrapper"         data-bind="template: { name: \'propertyKey\' }">    <\/div><\/script><script type="text/html" id="staticPropertyItem">    <div class="propertyEditor-staticTextAreaItem propertyEditor-headingCellWrapper"         data-bind="css: { isLink: templateType() === \'linkProperty\', isButton: templateType() === \'buttonProperty\' }, style: { height: property.name === \'Status details\' ? \'100%\': \'22px\' }, visible: property.value() === false || property.value()">        <!-- ko if: templateType() !== \'linkProperty\' && templateType() !== \'checkboxProperty\' && templateType() !== \'buttonProperty\' -->        <div class="propertyEditor-staticHeadingCell">            <div class="datalab-gridCellKeyWrapper"                 data-bind="template: { name: \'propertyKey\' }">            <\/div>        <\/div>        <!-- /ko -->        <div class="propertyEditor-staticValueCell">            <div class="datalab-gridCellTextArea" data-bind="template: { name: templateType }"><\/div>        <\/div>    <\/div><\/script><div data-bind="resize: {                    direction: \'left\',                    parentContainerSelector: \'.experiment-container-right\',                    minSize: 278,                    id: \'propertyEditor\'                },                collapse: {                    collapseButtonSelector: \'.drawerExpander\',                    collapsed: drawerIsCollapsed,                    animationEnded: openCloseAnimationEnded,                    collapseFrom: \'left\',                    collapsedSize: 36,                    id: \'propertyEditor\'                }"     class="datalab-propertyEditor">    <vflexbox class="propertyEditorContainer">        <flexstatic style="height:30px;">            <flexcontent>                <hflexbox class="propertyEditorHeader">                    <flexfill><span class="drawerExpandedTitle">%drawerTitle%<\/span><\/flexfill>                    <flexstatic class="drawerExpander"><\/flexstatic>                <\/hflexbox>            <\/flexcontent>        <\/flexstatic>        <flexstatic class="drawerTitle">%drawerTitle%<\/flexstatic>        <flexfill class="propertyEditorContentContainer">            <flexcontent>                <div class="propertyEditor-right">                    <!-- ko if: graphNode() -->                    <div class="propertyEditor-entityParameters"                         data-bind="jQueryCollapse: {                                        collapseButtonSelector: \'.propertyEditor-heading\',                                        contentSelector: \'.propertyEditor-content\',                                        collapsed: entityParamsCollapsed,                                        collapseFrom: \'bottom\',                                        id: \'entityParameters\'}">                        <div class="propertyEditor-heading">                            <div class="propertyEditor-expander"><\/div>                            <h2 class="propertyEditor-expanderHeader" data-bind="text: selectedGraphNodeName"><\/h2>                        <\/div>                        <div class="propertyEditor-content">                            <!-- ko if: graphNode() instanceof ExperimentEditor.Module-->                            <div class="noParameters" data-bind="style: { display: Object.keys(graphNode().graphNode.parameters).length === 0 &&                                                                                  !graphNode().statusDetails.property.value() ? \'block\' : \'none\' }">%PropertyEditorNoParameter%<\/div>                            <!-- ko foreach: nodeParameters -->                            <!-- ko if: !isStaticContent()-->                            <div class="textAreaProperty" data-bind="template: { name: \'propertyItem\' }"><\/div>                            <!-- /ko -->                            <!-- ko if: isStaticContent()-->                            <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' }"><\/div>                            <!-- /ko -->                            <!-- /ko -->                            <!-- ko if: !(graphNode().isDeterministic) -->                            <!-- ko if: window.DataLab.Features.showUsePreviousResultsOption() -->                            <!-- ko with: graphNode().usePreviousResults -->                            <div class="textAreaProperty" data-bind="template: { name: \'usePreviousResultsParameter\' }"><\/div>                            <!-- /ko -->                            <!-- /ko -->                            <!-- /ko -->                            <!-- ko with: graphNode().startTime -->                            <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' },                                                                                 style: { display: property.value() ? \'block\' : \'none\' }"><\/div>                            <!-- /ko -->                            <!-- ko with: graphNode().endTime -->                            <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' },                                                                                 style: { display: property.value() ? \'block\' : \'none\' }"><\/div>                            <!-- /ko -->                            <!-- ko with: graphNode().elapsedTime -->                            <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' },                                                                                 style: { display: property.value() ? \'block\' : \'none\' }"><\/div>                            <!-- /ko -->                            <div data-bind="style: { display: graphNode().statusDetails.property.value() ? \'block\' : \'none\' }">                                <!-- ko with: graphNode().statusCode -->                                <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' }"><\/div>                                <!-- /ko -->                                <!-- ko with: graphNode().statusDetails -->                                <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' }"><\/div>                                <!-- /ko -->                            <\/div>                            <div data-bind="style: { display: graphNode().statusCode.property.value() !== \'NotStarted\' &&                                                              graphNode().statusCode.property.value() !== \'Canceled\' ? \'block\' : \'none\' }">                                <!-- ko with: graphNode().outputLog -->                                <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' },                                                                                     style: { display: property.value() ? \'block\' : \'none\' }"><\/div>                                <!-- /ko -->                            <\/div>                            <div data-bind="style: { display: graphNode().statusCode.property.value() !== \'NotStarted\' &&                                                              graphNode().statusCode.property.value() !== \'Finished\' &&                                                              graphNode().statusCode.property.value() !== \'Canceled\' ? \'block\' : \'none\' }">                                <!-- ko with: graphNode().errorLog -->                                <div class="textAreaProperty" data-bind="template: { name: \'buttonProperty\' },                                                                                     style: { display: property.value() ? \'block\' : \'none\' }"><\/div>                                <!-- /ko -->                            <\/div>                            <div data-bind="style: { display: graphNode().statusCode.property.value() !== \'NotStarted\' &&                                                              graphNode().statusCode.property.value() !== \'Canceled\' &&                                                              graphNode().statusCode.property.value() !== \'Running\' ? \'block\' : \'none\' }">                            <\/div>                            <!-- /ko -->                            <!-- ko if: graphNode() instanceof ExperimentEditor.WebServicePort-->                            <!-- ko foreach: nodeParameters -->                            <div class="textAreaProperty" data-bind="template: { name: \'propertyItem\' }"><\/div>                            <!-- /ko -->                            <!-- /ko -->                            <!-- ko if: graphNode() instanceof ExperimentEditor.Dataset-->                            <!-- ko with: graphNode().author -->                            <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' }"><\/div>                            <!-- /ko -->                            <!-- ko with: graphNode().size -->                            <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' }"><\/div>                            <!-- /ko -->                            <!-- ko with: graphNode().format -->                            <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' }"><\/div>                            <!-- /ko -->                            <!-- ko with: graphNode().createdOn -->                            <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' }"><\/div>                            <!-- /ko -->                            <!-- ko with: graphNode().viewDataset -->                            <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' }"><\/div>                            <!-- /ko -->                            <!-- /ko -->                            <!-- ko if: graphNode() instanceof ExperimentEditor.TrainedModel -->                            <!-- ko with: graphNode().author -->                            <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' }"><\/div>                            <!-- /ko -->                            <!-- ko with: graphNode().createdOn -->                            <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' }"><\/div>                            <!-- /ko -->                            <!-- ko with: graphNode().trainingExperiment -->                            <div class=textAreaProperty data-bind="template: { name: \'staticPropertyItem\' }"><\/div>                            <!-- /ko -->                            <!-- /ko -->                            <!-- ko if: graphNode() instanceof ExperimentEditor.Transform -->                            <!-- ko with: graphNode().author -->                            <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' }"><\/div>                            <!-- /ko -->                            <!-- ko with: graphNode().createdOn -->                            <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' }"><\/div>                            <!-- /ko -->                            <!-- ko with: graphNode().trainingExperiment -->                            <div class=textAreaProperty data-bind="template: { name: \'staticPropertyItem\' }"><\/div>                            <!-- /ko -->                            <!-- /ko -->                        <\/div>                    <\/div>                    <!-- /ko -->                    <!-- ko if: experimentEditorViewModel.experimentViewModel().webServiceParameters.count() > 0 -->                    <div class="propertyEditor-globalParameters"                         data-bind="jQueryCollapse: {                                        collapseButtonSelector: \'.propertyEditor-heading\',                                        contentSelector: \'.propertyEditor-content\',                                        collapsed: globalParamsCollapsed,                                        collapseFrom: \'bottom\',                                        id: \'globalParameters\'                                    }">                        <div class="propertyEditor-heading">                            <div class="propertyEditor-expander"><\/div>                            <h2 class="propertyEditor-expanderHeader">%WebServiceParameters%<\/h2>                        <\/div>                        <div class="propertyEditor-content">                            <!-- ko foreach:DataLab.Util.values(experimentEditorViewModel.experimentViewModel().webServiceParameters()) -->                            <div data-bind="template: { name: \'propertyItem\' }"><\/div>                            <!-- /ko -->                        <\/div>                    <\/div>                    <!-- /ko -->                    <!-- Competition Section -->                    <!-- ko if: window.DataLab.Features.competitionExperimentSupportEnabled() && experimentEditorViewModel.experimentViewModel().experimentLoaded && !graphNode() && experimentEditorViewModel.experimentViewModel().isCompetitionExperiment() -->                     <div class="propertyEditor-competitionProperties"                         data-bind="jQueryCollapse: {                                        collapseButtonSelector: \'.propertyEditor-heading\',                                        contentSelector: \'.propertyEditor-content\',                                        collapsed: competitionPropertiesCollapsed,                                        collapseFrom: \'bottom\',                                        id: \'competitionProperties\'                                    }">                        <div class="propertyEditor-heading">                            <div class="propertyEditor-expander"><\/div>                            <h2 class="propertyEditor-expanderHeader">%CompetitionProperties%<\/h2>                        <\/div>                        <div class="propertyEditor-content">                            <div class="competition-steps">                                <!-- We want to include the first step “Copy starter experiment”, and mark it always completed. This gives user a sense of progress and differentiation to the rest of the steps. -->                                <div class="competition-step isCompleted">%competitionStatusCreateStarterExperiment%<\/div>                                <div class="competition-step" data-bind="css: { isCompleted: $root.CompetitionProperties.isScoringExperimentCreated() }">%competitionStatusCreateScoringExperiment%<\/div>                                <div class="competition-step" data-bind="css: { isCompleted: $root.CompetitionProperties.isWebServicePublished() }">%competitionStatusCreateWebService%<\/div>                                <div class="competition-step" data-bind="css: { isCompleted: $root.CompetitionProperties.isSubmittedToCompetition() }">%competitionStatusSubmitWebService%<\/div>                            <\/div>                            <!-- ko with: competitionUrl -->                            <div class="textAreaProperty viewCompetitionLinkContainer" data-bind="template: { name: \'staticPropertyItem\' }"><\/div>                            <!-- /ko -->                        <\/div>                    <\/div>                    <!-- /ko -->                    <!-- end of Competition Section -->                    <!-- ko if: experimentEditorViewModel.experimentViewModel().experimentLoaded && (!window.DataLab.Features.experimentDescriptionEnabled() || !graphNode()) -->                    <div class="propertyEditor-experimentProperties"                            data-bind="jQueryCollapse: {                                           collapseButtonSelector: \'.propertyEditor-heading\',                                           contentSelector: \'.propertyEditor-content\',                                           collapsed: experimentPropertiesCollapsed,                                           collapseFrom: \'bottom\',                                           id: \'experimentProperties\'                                       }">                        <div class="propertyEditor-heading">                            <div class="propertyEditor-expander"><\/div>                            <h2 class="propertyEditor-expanderHeader">%ExperimentProperties%<\/h2>                        <\/div>                        <div class="propertyEditor-content">                            <!-- ko foreach: experimentEditorViewModel.experimentViewModel().experimentProperties() -->                            <div data-bind="template: { name: \'staticPropertyItem\' }"><\/div>                            <!-- /ko -->                            <!--Experiment Summary and Description-->                            <div data-bind="visible: window.DataLab.Features.experimentDescriptionEnabled()">                                <div class="experimentSummary"                                     data-bind="jQueryCollapse: {                                         collapseButtonSelector: \'.experimentSummary-heading\',                                         contentSelector: \'.experimentSummary-content\',                                         collapsed: experimentSummaryCollapsed,                                         collapseFrom: \'bottom\',                                         id: \'experimentSummary\'                                     }">                                    <div class="experimentSummary-heading">                                        <div class="propertyEditor-expander"><\/div>                                        <h2 class="propertyEditor-expanderHeader">%experimentSummary%<\/h2>                                    <\/div>                                    <div class="experimentSummary-content">                                        <!-- ko with: experimentEditorViewModel.experimentViewModel().summary -->                                        <div data-bind="template: { name: \'editableTextAreaProperty\', data: {maxCharacters: 140, showMaxCharacterWarning: true, placeholderText: property.placeholderText, isReadOnly: $parent.readOnlyMode()}}"><\/div>                                        <!-- /ko -->                                    <\/div>                                <\/div>                                <!-- ko if: !experimentEditorViewModel.experimentViewModel().isSampleExperiment() -->                                <div class="experimentDetails"                                     data-bind="jQueryCollapse: {                                        collapseButtonSelector: \'.experimentDetails-heading\',                                        contentSelector: \'.experimentDetails-content\',                                        collapsed: experimentDetailsCollapsed,                                        collapseFrom: \'bottom\',                                        id: \'experimentDetails\'                                    }">                                    <div class="experimentDetails-heading">                                        <div class="propertyEditor-expander"><\/div>                                        <h2 class="propertyEditor-expanderHeader">%experimentDetailedDescription%<\/h2>                                    <\/div>                                    <div class="experimentDetails-content">                                        <!-- ko with: experimentEditorViewModel.experimentViewModel().details -->                                        <div data-bind="template: { name: \'editableTextAreaProperty\', data: {expandOnFocus: true, placeholderText: property.placeholderText, isReadOnly: $parent.readOnlyMode()} }"><\/div>                                        <!-- /ko -->                                    <\/div>                                <\/div>                                <!-- /ko -->                                <!-- ko if: window.DataLab.Features.communityUXInStudioEnabled() -->                                <!-- ko with: experimentEditorViewModel.experimentViewModel().detailsLink -->                                <div class="original-experiment-documentation-link" data-bind="template: { name: \'linkProperty\' }, visible: property.value()"><\/div>                                <!-- /ko -->                                <!-- /ko -->                            <\/div>                        <\/div>                    <\/div>                    <!-- /ko -->                <\/div>            <\/flexcontent>        <\/flexfill>        <flexstatic class="quickHelpContainer"                    data-bind="resize: {                                   direction: \'top\',                                   parentContainerSelector: \'.propertyEditorContainer\',                                   collapsed: quickHelpCollapsed,                                   minSize: 150,                                   id: \'quickHelp\'                               },                               collapse: {                                    collapseButtonSelector: \'.quickHelpExpander\',                                    collapsed: quickHelpCollapsed,                                    collapseFrom: \'top\',                                    collapsedSize: 36,                                    id: \'quickHelp\'                               }">            <flexcontent>                <vflexbox>                    <flexstatic>                        <hflexbox class="quickHelpHeader">                            <flexfill class="quickHelpTitle">%quickHelpTitle%<\/flexfill>                            <flexstatic class="quickHelpExpander"><\/flexstatic>                        <\/hflexbox>                    <\/flexstatic>                    <flexfill>                        <flexcontent style="padding:5px; width: auto; height: auto; top: 5px; bottom: 5px; left: 5px; right: 0px">                            <div class="quickHelpContent">                                <div data-bind="text: ExperimentEditor.Help.currentHelpTopic"><\/div>                                <!-- ko if: ExperimentEditor.Help.moduleTopicID() -->                                <a class=\'pointerText\' data-bind=\'click:getModuleHelp\'>%quickHelpMore%<\/a>                                <!-- /ko -->                            <\/div>                        <\/flexcontent>                    <\/flexfill>                <\/vflexbox>            <\/flexcontent>        <\/flexstatic>    <\/vflexbox><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._propertyEditorMarkup"),
function(n){n._publishNotebookStep1Markup='<script type="text/html" id="PublishNotebookStep1Template">    <div class="fx-dialog-template publish-to-community-wizard-step">        <div class="datalab-dialog">            <!-- ko if: isRepublish -->            <hflexbox class="publishNameAndDataSelectorContainer">                <label>%publishNotebookNameInputLabel%<\/label>                <div class="publishDataSelectorContainer">                    <input type="checkbox" class="publishDataSelector" data-bind="checked: detailsFromGallery">                    %loadMetadataFromGallery%                <\/div>            <\/hflexbox>            <!-- /ko -->                       <!-- ko ifnot: isRepublish -->            <label>%publishNotebookNameInputLabel%<\/label>            <!-- /ko -->            <input type="text" class="nameInput" data-bind="value: name, validatedInputBox: { value: name }" />            <label>%publishExperimentToCommunityTagsLabel%<\/label>            <!-- ko template: { name: \'TagTextBox\', data: new ExperimentEditor.TagTextBoxViewModel(tags) } --><!-- /ko -->            <label>%publishExperimentToCommunitySummaryLabel%<\/label>            <div data-bind="editableTextArea: {maxCharacters: 140, showMaxCharacterWarning: true}">                <textarea class="summary" data-bind="value: summary, placeholder: \'%publishNotebookSummaryPlaceholder%\'"><\/textarea>                <span class="characterLimitReachedWarning">                    <span class="charactersLeftCount"><\/span>                    %charactersLeft%                <\/span>            <\/div>            <label>%publishExperimentToCommunityDescriptionLabel%<\/label>            <!-- ko ifnot: useMarkdownEditor -->            <textarea class="description" data-bind="value: description, placeholder: \'%publishNotebookDescriptionPlaceholder%\'"><\/textarea>            <!-- /ko -->            <!-- ko if: useMarkdownEditor -->            <markdown-editor params="value: description, placeholder: \'%publishNotebookDescriptionPlaceholder%\'"><\/markdown-editor>            <!-- /ko -->            <hflexbox class="dialog-warning publishConsents">                <input type="checkbox" data-bind="checked: hasConsentedPublishCleaned" />                <label class="publishNotebookConsentLabel">%publishNotebookToGalleryConsent%<\/label>            <\/hflexbox>        <\/div>    <\/div><\/script>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._publishNotebookStep1Markup"),
function(n){n._publishNotebookStep2Markup='<script type="text/html" id="PublishNotebookStep2Template">    <div class="fx-dialog-template publish-to-community-wizard-step">        <div class="datalab-dialog">            <!-- ko if: isRepublish -->            <hflexbox>                <p class="publishExperimentSubtitle">%publishExperimentToCommunityWizardImageSelectionSubTitle%<\/p>                <div class="publishDataSelectorContainer">                    <input type="checkbox" class="publishDataSelector" data-bind="checked: imageFromGallery">                    %publishLoadImageFromGallery%                <\/div>            <\/hflexbox>            <!-- /ko -->            <!-- ko ifnot: isRepublish -->            <p class="publishExperimentSubtitle">%publishExperimentToCommunityWizardImageSelectionSubTitle%<\/p>            <!-- /ko -->            <!-- ko with: imageViewModel -->            <div class="publish-to-community-wizard-image-thumbnail" data-bind="css: { imagePlaceholder: !hasImage() }">                <img data-bind="attr: {src: selectedImageThumbnailSrc}" />            <\/div>            <!-- /ko -->            <div class="radio pushbutton publishImageSelectionMode" data-bind="fxRadio: {                                                        value: uploadImageOption,                                                        values: ExperimentEditor.PublishToCommunityWizardViewModel.uploadImageOptions,                                                        trackedit: false }"><\/div>            <div data-bind="visible: uploadImageOption() === ExperimentEditor.ImageSelectionMode.SelectYourOwn">                <!-- ko with: imageViewModel -->                <!-- ko with: imageUploadViewModel -->                <div>                    <input type="file"                           data-bind="file: selectedImage, fxUpload: {acceptedMimeTypes: [\'image/*\']}" />                    <span style="color: red"                          data-bind="visible: errorMessage, text: errorMessage"><\/span>                <\/div>                <p data-bind="visible: isProcessingSelectedImage, text: DataLab.LocalizedResources.imageUploadProcessingText"><\/p>                <!-- /ko -->                <!-- /ko -->            <\/div>            <div data-bind="visible: uploadImageOption() === ExperimentEditor.ImageSelectionMode.StockImageFromGallery">                <!-- ko with: imageViewModel -->                <div class="imgGalleryContainer" data-bind="foreach: stockImages">                    <div class="imgGalleryBox">                        <img class="imgGallery" data-bind="attr: { src: url }, click: $parent.selectStockImage" />                    <\/div>                <\/div>                <!-- /ko -->            <\/div>        <\/div>    <\/div><\/script>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._publishNotebookStep2Markup"),
function(n){n._publishNotebookStep3Markup='<script type="text/html" id="PublishNotebookStep3Template">    <div class="fx-dialog-template publish-to-community-wizard-step">        <div class="datalab-dialog">            <div class="private-public-publish">                <div class="title-label">%publishExperimentToCommunityVisibilityLabel%<\/div>                <div class="publish-type-option">                    <label class="radio-label"><input type="radio" value="1" class="publish-type-option-button" data-bind="checked: publishTypeString" />%publishExperimentToCommunityPublicPublishLabel%<\/label>                <\/div>                <div class="option-details">%publishNotebookVisibilityPublicExplanation%<\/div>                <div class="publish-type-option" data-bind="css: { \'text-disabled\': isRepublish && !previousPublishTypeHidden }">                    <label class="radio-label"><input type="radio" value="0" class="publish-type-option-button" data-bind="checked: publishTypeString, disable: isRepublish && !previousPublishTypeHidden" />%publishExperimentToCommunityUnlistedPublishLabel%<\/label>                <\/div>                <div class="option-details" data-bind="css: { \'text-disabled\': isRepublish && !previousPublishTypeHidden }">%publishNotebookVisibilityUnlistedExplanation%<\/div>            <\/div>            <!-- ko if: DataLab.Features.publishNotebookOptionIncludeDatasetEnabled() -->            <label>%galleryNotebookOptions%<\/label>            <label class="fx-checkboxlabel"><input type="checkbox" data-bind="checked: includeDataset" /> <span>%galleryIncludeDataset%<\/span><\/label>            <!-- /ko -->        <\/div>    <\/div><\/script>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._publishNotebookStep3Markup"),
function(n){n._publishToCommunityStep1Markup='<script type="text/html" id="PublishToCommunityStep1Template">    <div class="fx-dialog-template publish-to-community-wizard-step">        <div class="datalab-dialog">            <!-- ko if: isRepublish -->            <hflexbox class="publishNameAndDataSelectorContainer">                <label>%experimentSaveAsDialogExperimentName%<\/label>                <div class="publishDataSelectorContainer">                    <input type="checkbox" class="publishDataSelector" data-bind="checked: detailsFromGallery">                    %loadMetadataFromGallery%                <\/div>            <\/hflexbox>            <!-- /ko -->            <!-- ko ifnot: isRepublish -->            <label>%experimentSaveAsDialogExperimentName%<\/label>            <!-- /ko -->            <input type="text" class="publishExperimentName" data-bind="value: experimentName, validatedInputBox: { value: experimentName }" />            <label>%publishExperimentToCommunityTagsLabel%<\/label>            <!-- ko template: { name: \'TagTextBox\', data: new ExperimentEditor.TagTextBoxViewModel(tags) } --><!-- /ko -->            <label>%publishExperimentToCommunitySummaryLabel%<\/label>            <div data-bind="editableTextArea: {maxCharacters: 140, showMaxCharacterWarning: true}">                <textarea class="summary" data-bind="value: summary, placeholder: \'%publishExperimentToCommunitySummaryPlaceholder%\'"><\/textarea>                <span class="characterLimitReachedWarning">                    <span class="charactersLeftCount"><\/span>                    %charactersLeft%                <\/span>            <\/div>            <label>%publishExperimentToCommunityDescriptionLabel%<\/label>            <!-- ko ifnot: useMarkdownEditor -->            <textarea class="description" data-bind="value: description, placeholder: \'%publishExperimentToCommunityDescriptionPlaceholder%\'"><\/textarea>            <!-- /ko -->            <!-- ko if: useMarkdownEditor -->            <markdown-editor params="value: description, placeholder: \'%publishExperimentToCommunityDescriptionPlaceholder%\'"><\/markdown-editor>            <!-- /ko -->            <!-- ko if: hasCredentials -->            <div class="dialog-warning publishConsents">                <label>                    <input type="checkbox" data-bind="checked: hasConsentedCredentials" />                    %publishExperimentToCommunityConsentCredentialsLabel%                <\/label>                <div class="credentialsAbsentWarning">%publishExperimentToCommunityCredentialsAbsentWarningLabel%<\/div>            <\/div>            <!-- /ko -->            <!-- ko if: hasCustomModules && DataLab.Features.publishCustomModulesToGalleryEnabled() -->            <div class="dialog-warning publishConsents">                <label>                    <input type="checkbox" data-bind="checked: hasConsentedCustomModules" />                    %publishExperimentToCommunityConsentCustomModulesLabel%                <\/label>                            <\/div>            <!-- /ko -->        <\/div>    <\/div><\/script>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._publishToCommunityStep1Markup"),
function(n){n._publishToCommunityStep2Markup='<script type="text/html" id="PublishToCommunityStep2Template">    <div class="fx-dialog-template publish-to-community-wizard-step">        <div class="datalab-dialog">            <!-- ko if: isRepublish -->            <hflexbox>                <p class="publishExperimentSubtitle">%publishExperimentToCommunityWizardImageSelectionSubTitle%<\/p>                <div class="publishDataSelectorContainer">                    <input type="checkbox" class="publishDataSelector" data-bind="checked: imageFromGallery">                    Load image from Gallery                <\/div>            <\/hflexbox>            <!-- /ko -->            <!-- ko ifnot: isRepublish -->            <p class="publishExperimentSubtitle">%publishExperimentToCommunityWizardImageSelectionSubTitle%<\/p>            <!-- /ko -->            <!-- ko with: imageViewModel -->            <div class="publish-to-community-wizard-image-thumbnail" data-bind="css: { imagePlaceholder: !hasImage() }">                <img data-bind="attr: {src: selectedImageThumbnailSrc}" />            <\/div>            <!-- /ko -->            <div class="radio pushbutton publishImageSelectionMode" data-bind="fxRadio: {                                                        value: uploadImageOption,                                                        values: ExperimentEditor.PublishToCommunityWizardViewModel.uploadImageOptions,                                                        trackedit: false }"><\/div>            <div data-bind="visible: uploadImageOption() === ExperimentEditor.ImageSelectionMode.SelectYourOwn">                <!-- ko with: imageViewModel -->                <!-- ko with: imageUploadViewModel -->                <div>                    <input type="file"                           data-bind="file: selectedImage, fxUpload: {acceptedMimeTypes: [\'image/*\']}" />                    <span style="color: red"                          data-bind="visible: errorMessage, text: errorMessage"><\/span>                <\/div>                <p data-bind="visible: isProcessingSelectedImage, text: DataLab.LocalizedResources.imageUploadProcessingText"><\/p>                <!-- /ko -->                <!-- /ko -->            <\/div>            <div data-bind="visible: uploadImageOption() === ExperimentEditor.ImageSelectionMode.StockImageFromGallery">                <!-- ko with: imageViewModel -->                <div class="imgGalleryContainer" data-bind="foreach: stockImages">                    <div class="imgGalleryBox">                        <img class="imgGallery" data-bind="attr: { src: url }, click: $parent.selectStockImage" />                    <\/div>                <\/div>                <!-- /ko -->            <\/div>        <\/div>    <\/div><\/script>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._publishToCommunityStep2Markup"),
function(n){n._publishToCommunityStep3Markup='<script type="text/html" id="PublishToCommunityStep3Template">    <div class="fx-dialog-template publish-to-community-wizard-step">        <div class="datalab-dialog">            <div class="private-public-publish">                <div class="title-label">%publishExperimentToCommunityVisibilityLabel%<\/div>                <div class="publish-type-option"><input type="radio" value="1" class="publish-type-option-button" data-bind="checked: publishTypeString" />%publishExperimentToCommunityPublicPublishLabel%<\/div>                <div class="option-details">%publishExperimentToCommunityPublicPublishExplanationLabel%<\/div>                <div class="publish-type-option" data-bind="css: { \'text-disabled\': isRepublish && !previousPublishTypeHidden }"><input type="radio" value="0" class="publish-type-option-button" data-bind="checked: publishTypeString, disable: isRepublish && !previousPublishTypeHidden" />%publishExperimentToCommunityUnlistedPublishLabel%<\/div>                <div class="option-details" data-bind="css: { \'text-disabled\': isRepublish && !previousPublishTypeHidden }">%publishExperimentToCommunityUnlistedPublishExplanationLabel%<\/div>            <\/div>        <\/div>    <\/div><\/script>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._publishToCommunityStep3Markup"),
function(n){n._publishToCommunityStepOnCompleteMarkup='<h2 data-bind="text: header"><\/h2><div class="visitInGalleryLabel" data-bind="text: description"><\/div><label data-bind="text: linkLabel"><\/label><div data-bind="fxsCopyButton: catalogExperimentUrl"><\/div><a class="viewInGallery" data-bind="attr: { href: catalogExperimentUrl }, event: { mouseover: setLinkHoverImage, mouseout: setLinkNoHoverImage }">%publishExperimentToCommunityPublishedExperimentGotoLink%<img data-bind="attr: {src: goToGalleryImage, title: DataLab.LocalizedResources.publishExperimentToCommunityPublishedExperimentGotoLink}" /><\/a><!-- Twitter --><br /><label class="shareWith" data-bind="text: DataLab.LocalizedResources.share"><\/label><!-- Email --><a data-bind="attr: {href: emailLink()}"><img src="/Content/Images/sharing-email.svg" data-bind="attr: {title: DataLab.LocalizedResources.email}" /><\/a> <!-- Twitter --><a data-bind="twitterButton: twitterButtonOptions(), visible: publishVisibility === DataLab.Model.CommunityExperimentVisibility.Public"><\/a><!-- Linked In --><!-- @TODO Coming soon -->'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._publishToCommunityStepOnCompleteMarkup"),
function(n){n._publishWebServiceDialogMarkup='<div id="publishWebServiceDialogContent">    <div>        <label id="wsgNameLabel" for="wsgNameBox">%webServiceGroupNameLabel%<\/label>        <br/>               <input id="wsgNameBox" type="text" data-bind="value: webServiceGroupName" />        <br/><br/>        <div id="webServiceInfoBox">            %publishWebServiceDialogHelpText%        <\/div>    <\/div><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._publishWebServiceDialogMarkup"),
function(n){n._recentWorkMarkup='<div id="recentWork">    <div id="preview" data-bind="visible: thumbnail() || loading()">        <div class="clearfix">            <div class="heading left">%recentWorkThumbnailLabel%<\/div>            <div class="selectorContainer right">                <div class="heading">%recentWorkThumbnailSize%<\/div>                <div id="thumbnailSizeSelector" class="pushbutton"><\/div>            <\/div>        <\/div>                <div id="thumbnailTitleContainer" data-bind="if: thumbnailTitle">            <h2 data-bind="text: thumbnailTitle"><\/h2>        <\/div>        <div id="thumbnailContainer">            <div id="thumbnail" data-bind="attr: { class: thumbnailSize }">                <!-- ko template: { name: \'experimentSvgTemplate\', data: thumbnail, if: thumbnail } --><!-- /ko -->                <div class="spinner" data-bind="css: { thumbnailLoading: loading() }"><\/div>                <div class="shield" data-bind="click: thumbnailOnClick, css: { clickable: thumbnail() }"><\/div>            <\/div>        <\/div>    <\/div>        <div class="selectorContainer">        <div class="heading">%recentWorkFilterBy%<\/div>        <div id="filterSelector" class="pushbutton"><\/div>    <\/div>    <div class="shortExperimentList clearfix" data-bind="visible: selectedFilter() === \'lastModified\'">        <div id="gridLastEdited"><\/div>    <\/div>    <div class="shortExperimentList clearfix" data-bind="visible: selectedFilter() === \'lastRun\'">        <div id="gridLastRun"><\/div>    <\/div>        <div class="shortExperimentList clearfix" data-bind="visible: selectedFilter() === \'lastPublished\'">        <div id="gridLastPublished"><\/div>    <\/div><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._recentWorkMarkup"),
function(n){n._renameNotebookDialogMarkup='<h2 data-bind="text: title"><\/h2><label>%renameNotebookDialogNameInputLabel%<\/label><input type="text" data-bind="validatedInputBox: { value: newNotebookName }, event: { keypress: enterToAccept }" /> '}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._renameNotebookDialogMarkup"),
function(n){n._saveSSIMDatasetMarkup='<h2>Save Dataset From SSIM<\/h2><!-- This markup is repeated in all dialogs for creating new datasets --><div class="dataset-form" data-bind="with: dataset">    <div class="deprecate-header">        <input type="checkbox" data-bind="checked: deprecate"/>%uploadDatasetDialogNewVersionOfDataset%    <\/div>    <div class="animation-wrapper" data-bind="css: { hide: deprecate() }">        %uploadDatasetDialogEnterName%        <input type="text" data-bind="validatedInputBox: { value: _name }, enable: !deprecate()">    <\/div>    <div class="animation-wrapper" data-bind="css: { hide: !deprecate() }">        %uploadDatasetDialogExistingDataset%        <div class="datalab-validation-wrapper">                    <div class="datalab-validation-icon" data-bind="validate: { value: resourceToDeprecate }"><\/div>            <div class="datalab-validation-icon heuristic-hint" data-bind="style: { \'visibility\': hint() ? \'visible\' : \'hidden\', \'opacity\': hint() ? \'1\' : \'0\' }"><\/div>            <select data-bind="options: availableResources, value: resourceToDeprecate, enable: deprecate, optionsCaption: DataLab.LocalizedResources.ChooseDatasetToDeprecateAndEllipsis"><\/select>        <\/div>    <\/div><\/div>    %uploadDatasetDialogDescription%<textarea rows="4" data-bind="value: dataset.description"><\/textarea>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._saveSSIMDatasetMarkup"),
function(n){n._scoreDialogMarkup='<h3 data-bind="text: DataLab.Util.format(\'%scoreDialogTitle%\', wsgName)"><\/h3><div id="scoreDialogContent" class="datalab-dialog">    <div id="parameterPanel" >        <!-- ko if: (inputColumns.length == 0 && webServiceParameters.length == 0) -->            <h2>%scoreDialogNoDataNeeded%<\/h2>        <!-- /ko -->        <!-- ko if: (inputColumns.length > 0) -->            <h2>%scoreDialogEnterDataToPredict%<\/h2>        <div data-bind="foreach: inputColumns">            <div class="field-group">                <!-- ko if: valueType == "Binary" -->                    <input type="checkbox" data-bind="checked: value, attr: { \'id\': name }" />                    <label data-bind="text: name, attr: { \'id\': name + \'_label\', \'for\': name, \'title\': friendlyName }"><\/label>                <!-- /ko -->                <!-- ko if: valueType == "Categorical" -->                    <label data-bind="text: name, attr: { \'id\': name + \'_label\', \'for\': name, \'title\': friendlyName }"><\/label>                <select type="text" data-bind="value: value, options: allowedValues, attr: { \'id\': name }"><\/select>                <!-- /ko -->                <!-- ko if: valueType != "Binary" && valueType != "Categorical" -->                    <label data-bind="text: name, attr: { \'id\': name + \'_label\', \'for\': name, \'title\': friendlyName }"><\/label>                    <input type="text" data-bind="value: value, attr: { \'id\': name }" />                <!-- /ko -->            <\/div>        <\/div>        <!-- /ko -->    <\/div>    <!-- ko if: (webServiceParameters.length > 0) -->        <div id="webServiceParametersPanel" data-bind="style: { \'display\': (webServiceParameters.length > 0) ? \'\' : \'none\' }">            <br />            <h2>%scoreDialogEnterWebServiceParameters%<\/h2>            <div data-bind="foreach: webServiceParameters">                <div class="field-group">                    <!-- ko if: metadata.Type == "Boolean" -->                        <input type="checkbox" data-bind="checked: value, attr: { \'id\':  metadata.Name  + \'_wsp\' }" />                        <label data-bind="text: metadata.Name, attr: { \'for\':  metadata.Name + \'_wsp\', \'title\': metadata.Description }" ><\/label>                    <!-- /ko -->                    <!-- ko if: metadata.Type != "Boolean" -->                        <label data-bind="text: metadata.Name, attr: { \'for\':  metadata.Name + \'_wsp\', \'title\': metadata.Description }" ><\/label>                        <!-- ko if: metadata.Type == "Script" -->                            <textarea data-bind="value: value, attr: { \'id\':  metadata.Name  + \'_wsp\' }" ><\/textarea>                        <!-- /ko -->                        <!-- ko if: metadata.Type == "Enumerated" -->                            <select data-bind="value: value, options: metadata.ParameterRules[0].Values, attr: { \'id\':  metadata.Name  + \'_wsp\' }" ><\/select>                        <!-- /ko -->                        <!-- ko if: metadata.Type == "Credential" -->                            <input type="password" data-bind="value: value, attr: { \'id\':  metadata.Name  + \'_wsp\' }" />                        <!-- /ko -->                        <!-- ko if: metadata.Type != "Script" && metadata.Type != "Enumerated" && metadata.Type != "Credential" -->                            <input type="text" data-bind="value: value, attr: { \'id\':  metadata.Name  + \'_wsp\' }" />                        <!-- /ko -->                    <!-- /ko -->                <\/div>            <\/div>        <\/div>    <!-- /ko --><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._scoreDialogMarkup"),
function(n){n._scriptEditorMarkup='<div class="scriptEditorPopupContainer">    <h1 data-bind="text: property.label"><\/h1>    <div class="scriptEditorContentWrapper">        <div>            <div class="monaco-container"                 data-bind="monaco: {                            value: temporaryPropertyValue,                            mimetype: monacoMimeType,                            containerWidth: 90,                            insertSpaces: untabify                        },                        validatedInputBox: {value: temporaryPropertyValue},                        css: { focused: focus},                        readonly: false">            <\/div>        <\/div>    <\/div>    <flexstatic class="checkmarkContainer">        <hflexbox>            <flexfill><\/flexfill>            <flexstatic class="icon tick" data-bind="click: closeDialogAndSave"><\/flexstatic>        <\/hflexbox>    <\/flexstatic><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._scriptEditorMarkup"),
function(n){n._tagTextBoxMarkup='<script type="text/html" id="TagTextBox">    <hflexbox class="columnNameList" data-bind="validate: { value: currentTag }, click: setNameInputFocused, css: {hasItems: hasTags}">        <!-- ko foreach: tags -->        <flexstatic class="columnNameBox">            <span data-bind="text: $data"><\/span>            <span class="removeColumnName" data-bind="click: $parent.removeTag"><\/span>        <\/flexstatic>        <!-- /ko -->        <flexfill>            <input type="text" class="itemTextBoxInput" data-bind="hasfocus: nameInputFocused, attr: { placeholder: hasTags() ? \'\' : DataLab.LocalizedResources.pressEnterTag }, style: { \'minWidth\': tags().length === 0 ? \'250px\' : \'50px\' }, itemTextBox: { validColumnNames: tags, invalidColumnNames: ko.observableArray([]) }, value: currentTag" />        <\/flexfill>        <div class="textWidthSpan"><\/div>    <\/hflexbox><\/script>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._tagTextBoxMarkup"),
function(n){n._trainedModelPromotionDialogMarkup='<h2>%SaveTrainedModel%<\/h2><!-- This markup is repeated in all dialogs for creating new models --><div class="dataset-form" data-bind="with: resource">    <div class="deprecate-header">        <input type="checkbox" data-bind="checked: deprecate"/>%uploadTrainedModelDialogNewVersionOfTrainedModel%    <\/div>    <div class="animation-wrapper" data-bind="css: { hide: deprecate() }">        %uploadTrainedModelDialogEnterName%        <input type="text" data-bind="validatedInputBox: { value: _name }, enable: !deprecate()">    <\/div>    <div class="animation-wrapper" data-bind="css: { hide: !deprecate() }">        %uploadTrainedModelDialogExistingTrainedModel%        <div class="datalab-validation-wrapper">                    <div class="datalab-validation-icon" data-bind="validate: { value: resourceToDeprecate }"><\/div>            <div class="datalab-validation-icon heuristic-hint" data-bind="style: { \'visibility\': hint() ? \'visible\' : \'hidden\', \'opacity\': hint() ? \'1\' : \'0\' }"><\/div>            <select data-bind="options: availableResources, value: resourceToDeprecate, enable: deprecate, optionsCaption: DataLab.LocalizedResources.ChooseTrainedModelToDeprecateAndEllipsis"><\/select>        <\/div>    <\/div><\/div>%uploadTrainedModelDialogDescription%<textarea rows="4" data-bind="value: resource.description"><\/textarea>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._trainedModelPromotionDialogMarkup"),
function(n){n._transformPromotionDialogMarkup='<h2>%SaveTransform%<\/h2><!-- This markup is repeated in all dialogs for creating new models --><div class="dataset-form" data-bind="with: resource">    <div class="deprecate-header">        <input type="checkbox" data-bind="checked: deprecate"/>%uploadTransformDialogNewVersionOfTransform%    <\/div>    <div class="animation-wrapper" data-bind="css: { hide: deprecate() }">        %uploadTransformDialogEnterName%        <input type="text" data-bind="validatedInputBox: { value: _name }, enable: !deprecate()">    <\/div>    <div class="animation-wrapper" data-bind="css: { hide: !deprecate() }">        %uploadTransformDialogExistingTransform%        <div class="datalab-validation-wrapper">                    <div class="datalab-validation-icon" data-bind="validate: { value: resourceToDeprecate }"><\/div>            <div class="datalab-validation-icon heuristic-hint" data-bind="style: { \'visibility\': hint() ? \'visible\' : \'hidden\', \'opacity\': hint() ? \'1\' : \'0\' }"><\/div>            <select data-bind="options: availableResources, value: resourceToDeprecate, enable: deprecate, optionsCaption: DataLab.LocalizedResources.ChooseTransformToDeprecateAndEllipsis"><\/select>        <\/div>    <\/div><\/div>%uploadTransformDialogDescription%<textarea rows="4" data-bind="value: resource.description"><\/textarea>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._transformPromotionDialogMarkup"),
function(n){n._twoPaneColumnPickerMarkup='<div class="fx-dialog-template">    <div class="datalab-dialog two-pane-picker">        <!-- ko ifnot: isEnabled() -->        <p data-bind="text: disabledText"><\/p>        <!-- /ko -->        <!-- ko if: isEnabled() -->        <hflexbox>            <flexfill>                <div class="picker-header">                    <label>Available Columns<\/label>                    <hflexbox>                        <flexstatic>                            <select class="type-filter" data-bind="options: availableTypes, value: availableColumnsFilterType"><\/select>                        <\/flexstatic>                        <flexfill>                            <div class="xe-genericSearchBox">                                <input type="text" class="select-filter" data-bind="textInput: availableColumnsFilterText, placeholder: filterTextPlaceholder" />                            <\/div>                        <\/flexfill>                    <\/hflexbox>                <\/div>                <select class="column-list" data-bind="options: availableColumnsAfterFiltering, filterValue: availableColumnsFilterText, selectedOptions: chosenAvailableColumns" size="15" multiple><\/select>                <div class="picker-status-bar" data-bind="text: availableColumnsStatusText"><\/div>            <\/flexfill>            <flexstatic class="choice-buttons">                <button data-bind="click: unselectColumns, disable: removeColumnsDisabled">&lt;<\/button><br /><button data-bind="click: selectColumns, disable: chooseColumnsDisabled">&gt;<\/button>            <\/flexstatic>            <flexfill>                <div class="picker-header">                    <label>Selected Columns<\/label>                    <hflexbox>                        <flexstatic>                            <select class="type-filter" data-bind="options: availableTypes, value: selectedColumnsFilterType"><\/select>                        <\/flexstatic>                        <flexfill>                            <div class="xe-genericSearchBox">                                <input type="text" class="select-filter" data-bind="textInput: selectedColumnsFilterText, placeholder: filterTextPlaceholder" />                            <\/div>                        <\/flexfill>                    <\/hflexbox>                <\/div>                <select class="column-list" data-bind="options: selectedColumnsAfterFiltering, filterValue: selectedColumnsFilterText, selectedOptions: chosenSelectedColumns" size="15" multiple><\/select>                <div class="picker-status-bar" data-bind="text: selectedColumnsStatusText"><\/div>            <\/flexfill>        <\/hflexbox>        <hflexbox>            <flexfill><\/flexfill>            <flexstatic class="icon tick" data-bind="click: saveRulesAndClose"><\/flexstatic>        <\/hflexbox>        <!-- /ko -->    <\/div><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._twoPaneColumnPickerMarkup"),
function(n){n._uploadDatasetDialogMarkup='<h2>%uploadDatasetUploadANewDataset%<\/h2><div class="datalab-validation-wrapper">    <div class="datalab-validation-icon" data-bind="validate: { value: fileToUpload }"><\/div>    <label>        %uploadDatasetDialogDataToUpload%    <\/label>     <input type="file" data-bind="file: fileToUpload" />       <\/div><!-- This markup is repeated in all dialogs for creating new datasets --><div class="dataset-form" data-bind="with: dataset">    <div class="deprecate-header">        <input type="checkbox" data-bind="checked: deprecate"/>%uploadDatasetDialogNewVersionOfDataset%    <\/div>    <div class="animation-wrapper" data-bind="css: {hide: deprecate()}">        <label>            %uploadDatasetDialogEnterName%        <\/label>        <input type="text" data-bind="validatedInputBox: { value: _name }, enable: !deprecate()" />    <\/div>    <div class="animation-wrapper" data-bind="css: {hide: !deprecate()}">                <div class="datalab-validation-wrapper">                    <div class="datalab-validation-icon" data-bind="validate: { value: resourceToDeprecate }"><\/div>            <div class="datalab-validation-icon heuristic-hint" data-bind="style: { \'visibility\': hint() ? \'visible\' : \'hidden\', \'opacity\': hint() ? \'1\' : \'0\' }"><\/div>            <label>                %uploadDatasetDialogExistingDataset%            <\/label>            <select data-bind="options: availableResources, value: resourceToDeprecate, enable: deprecate, optionsCaption: DataLab.LocalizedResources.ChooseDatasetToDeprecateAndEllipsis"><\/select>                    <\/div>    <\/div><\/div><div class="datalab-validation-wrapper">    <div class="datalab-validation-icon" data-bind="validate: { value: dataset.dataType }"><\/div>    <label>        %uploadDatasetDialogSelectType%    <\/label>    <select data-bind="options: dataTypes, value: dataset.dataType, optionsText: getDataTypeCaption, optionsCaption: DataLab.LocalizedResources.ChooseADatasetTypeAndEllipsis"><\/select>    <\/div> <label>    %uploadDatasetDialogDescription%<\/label><textarea data-bind="value: dataset.description"><\/textarea>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._uploadDatasetDialogMarkup"),
function(n){n._uploadModuleDialogMarkup='<script type="text/html" id="moduleExampleLinkProperty">    <div class="propertyLink">        <a href=\'#\' data-bind="attr: { title: property.tooltip, href: (property.endpoint && property.endpoint.Size === -1) ? \'#\' : property.value},                      hasfocus: focus,                      event: { focus: $root.onParameterFocus, click: onClick },                      text: property.label"           target="_blank">        <\/a>    <\/div>    <div class="propertyLinkMetaData" data-bind="visible: (property.endpoint && property.endpoint.Size === -1)">&nbsp;(none)<\/div><\/script><h2>%uploadModuleUploadANewModule%<\/h2><div style="width:400px"><span data-bind="text: uploadDialogText"><\/span>    <br />    <a href="//go.microsoft.com/fwlink/?LinkId=524876" target="_blank">%uploadModuleDialogLearnMore%<\/a>    <br /><br />    <!-- ko foreach: uploadDialogExamples -->            <div class="custom-module-example-link" data-bind="template: { name: \'moduleExampleLinkProperty\' }, visible: property.value()"><\/div>    <!-- /ko -->    <br /><br /><\/div><div class="datalab-validation-wrapper">    <div class="datalab-validation-icon" data-bind="validate: { value: fileToUpload }"><\/div>    <label>        %uploadModuleDialogDataToUpload%    <\/label>    <input type="file" data-bind="file: fileToUpload" accept="application/zip" autofocus="autofocus" /><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._uploadModuleDialogMarkup"),
function(n){n._visualizationMarkup='    <div class="visualizationContent">        <hflexbox class="numberRowsColumnsContainer">            <div class="numberRowsColumnsHeader">                <div class="smallHeader">                    %VisualizationRows%                <\/div>                <div data-bind="text: dataTableViewModel.numberOfRows">                <\/div>            <\/div>            <div class="numberRowsColumnsHeader">                <div class="smallHeader">                    %VisualizationColumns%                <\/div>                <div data-bind="text: dataTableViewModel.numberOfColumns">                <\/div>            <\/div>        <\/hflexbox>        <hflexbox class="visualizationTableWrapper">            <div class="dataTableContainer">                <table id="dataTable" data-bind="event: { click: selectColumn }">                    <tbody>                        <tr>                            <th class="emptyCell whiteCell"><\/th>                            <!-- ko foreach: columns -->                            <th class="tableHeader" data-bind="text: name, css: { \'selectedHeader\': selected() }"><\/th>                            <!-- /ko -->                        <\/tr>                        <tr>                            <td class="toggleCell">                                <div class="toggleDiv">                                    <div class="toggleLabelDiv">                                        %VisualizationViewAs%                                    <\/div>                                    <div class="toggleIconDiv">                                        <div data-bind="attr: { class: minimizedGraphsType() === \'Histogram\' ? \'histogramSelectedImage\' : \'histogramIdleImage\' }, event: { \'click\': setHistogramMode }">                                        <\/div>                                        <div data-bind="attr: { class: minimizedGraphsType() !== \'Histogram\' ? \'boxchartSelectedImage\' : \'boxcharIdleImage\' }, event: { \'click\': setBoxchartMode }">                                        <\/div>                                    <\/div>                                <\/div>                            <\/td>                            <!-- ko foreach: columns -->                            <td class="graphCell" data-bind="d3graph: { data: $data.minimizedGraph, minWidth: 44, height: 30, padding: 0, minimized: true }"><\/td>                            <!-- /ko -->                        <\/tr>                        <!-- ko foreach: dataTableViewModel.records -->                        <tr>                            <td class="emptyCell"><\/td>                            <!-- ko foreach: $data -->                            <td data-bind="text: $data"><\/td>                            <!-- /ko -->                        <\/tr>                        <!-- /ko -->                    <\/tbody>                <\/table>            <\/div>            <div data-bind="                resize: {                    direction: \'left\',                    parentContainerSelector: \'.visualizationTableWrapper\',                    minSize: 447,                    id: \'statsAndGraphs\'                },                collapse: {                    collapseButtonSelector: \'.statsAndGraphsExpander\',                    collapsed: statsAndGraphsIsCollapsed,                    collapseFrom: \'left\',                    collapsedSize: 36,                    id: \'statsAndGraphs\'                }"                 class="statsAndGraphs">                <div class="statsAndGraphsExpander"><\/div>                <div class="statsAndGraphsTitle">%statsAndGraphsTitle%<\/div>                         <div class="statsAndGraphsContent">                    <div class="statsContainer" data-bind="                        collapse: {                            collapseButtonSelector: \'.statsAndGraphsSubExpander.statsExpander\',                            collapsed: statsIsCollapsed,                            collapseFrom: \'bottom\',                            collapsedSize: 33,                            id: \'stats\'                        }">                                 <hflexbox class="statsAndGraphsHeader">                            <div class="statsAndGraphsSubExpander statsExpander"><\/div>                            <div>%visualizationStatisticsHeader%<\/div>                        <\/hflexbox>                        <!-- ko if: currentSelectedColumnViewModel !== null -->                        <div class="statsTable">                            <!-- ko with: currentSelectedColumnViewModel -->                            <table>                                <tbody>                                    <!-- ko foreach: columnStatistics -->                                    <tr>                                        <td data-bind="text: name"><\/td>                                        <td data-bind="text: value"><\/td>                                    <\/tr>                                    <!-- /ko -->                                <\/tbody>                            <\/table>                            <!-- /ko -->                        <\/div>                        <!-- /ko -->                    <\/div>                                    <div class="graphVisualizationContainer" data-bind="                        collapse: {                            collapseButtonSelector: \'.statsAndGraphsSubExpander.visualizationExpander\',                            collapsed: visualizationIsCollapsed,                            collapseFrom: \'bottom\',                            collapsedSize: 33,                            id: \'visualization\'                        }">                        <hflexbox class="statsAndGraphsHeader">                            <div class="statsAndGraphsSubExpander visualizationExpander"><\/div>                            <div>%visualizationHeader%<\/div>                        <\/hflexbox>                        <div class="expandedView">                            <div data-bind="style: { \'display\': columnIsSelected() ? \'none\' : \'\' }" class="placeholderGraph graphDiv">                                                <div class="placeholderImage" >                                <\/div>                                <div class="placeholderText">                                    %VisualizationToCreateAGraphSelectAFeatureInTheDataTableBelow%                                <\/div>                            <\/div>                            <div data-bind="style: { \'display\': graphControl().isNull ? \'none\' : \'block\' }" class="graphContainer">                                <div>                                    <div class="graphSubheader" data-bind="text: graphControl().feature">                                    <\/div>                                <\/div>                                <div class="headerDiv">                                    <div class="header graphHeader" data-bind="text: graphControl().graphTypeString">                                    <\/div>                                <\/div>                                <hflexbox class="compareToContainer" data-bind="style: { \'display\': entireDatasetIsPresent ? \'\' : \'none\' }">                                    <div class="compareTo">                                        <div class="graphText inlineDiv">                                            %VisualizationCompareTo%                                        <\/div>                                        <select data-bind="options: graphControl().compareToFeatures, value: graphControl().crossCompareFeature"><\/select>                                    <\/div>                                    <div class="icons">                                        <div title="Create Snapshot" class="inlineDiv snapshotIdle" data-bind="event: { click: takeSnapshot }">                                        <\/div>                                                            <\/div>                                <\/hflexbox>                                <hflexbox id="bodyDiv">                                    <div id="activeSvgDiv" class="inlineDiv activeSvgContainer" data-bind="d3graph: { data: graphControl().graph, minWidth: 380, height: 370, padding: 60, minimized: false, name: \'main\' }">                                    <\/div>                                    <!-- ko foreach: snapshots -->                                    <div class="graphDiv snapshotContainer">                                        <div>                                            <div class="snapshotHeader">                                                <div class="graphSubheader leftDiv" data-bind="text: feature">                                                <\/div>                                                <div title="Close" class="snapshotClose closeIdle rightDiv" data-bind="event: { click: $parent.closeSnapshot.bind($parent) }">                                                <\/div>                                            <\/div>                                            <div data-bind="d3graphcopy: { name: \'main\', visible: visible, animationDuration: animationDuration }" class="svgcopy">                                            <\/div>                                        <\/div>                                    <\/div>                                    <!-- /ko -->                                <\/hflexbox>                            <\/div>                                                    <div class="parameters" data-bind="style: { \'display\': parametersAreVisible() ? \'\' : \'none\' }">                                <div data-bind="style: { \'display\': graphControl().scaleCheckboxesVisible() ? \'\' : \'none\' }">                                    <div class="logScaleDiv" data-bind="style: { \'display\': graphControl().xScaleCheckbox.visible() ? \'\' : \'none\' }">                                        <input type="checkbox" data-bind="checked: graphControl().xScaleCheckbox.value" class="inlineDiv" />                                        <div data-bind="text: graphControl().xScaleCheckbox.label" class="inlineDiv logScaleText">                                        <\/div>                                    <\/div>                                    <div class="logScaleDiv" data-bind="style: { \'display\': graphControl().yScaleCheckbox.visible() ? \'\' : \'none\' }">                                        <input type="checkbox" data-bind="checked: graphControl().yScaleCheckbox.value" class="inlineDiv" />                                        <div data-bind="text: graphControl().yScaleCheckbox.label" class="inlineDiv logScaleText">                                        <\/div>                                    <\/div>                                <\/div>                                <div data-bind="style: { \'display\': graphControl().binCountVisible() ? \'\' : \'none\' }">                                    <div class="graphText binsLabel">                                        %bins%                                    <\/div>                                    <input type="text" class="bins" data-bind="value: graphControl().binCount" />                                <\/div>                                <div data-bind="style: { \'display\': graphControl().categoriesVisible() ? \'\' : \'none\' }">                                    <div class="graphText binsLabel">                                        %VisualizationCategories%                                    <\/div>                                    <input type="text" class="bins" data-bind="value: graphControl().categoriesCount" />                                <\/div>                                <div class="probabilityFunctions" data-bind="style: { \'display\': graphControl().probabilityFunctionsVisible() ? \'\' : \'none\' }">                                    <div class="probabilityFunctionDiv">                                        <input type="checkbox" class="inlineDiv" data-bind="checked: graphControl().cumulativeDistribution" />                                        <div class="inlineDiv probabilityFunctionText">                                            %VisualizationCumulativeDistribution%                                        <\/div>                                    <\/div>                                    <div class="probabilityFunctionDiv">                                        <input type="checkbox" class="inlineDiv" data-bind="checked: graphControl().probabilityDensity" />                                        <div class="inlineDiv probabilityFunctionText">                                            %VisualizationProbabilityDensity%                                        <\/div>                                    <\/div>                                <\/div>                            <\/div>                        <\/div>                    <\/div>                <\/div>            <\/div>        <\/hflexbox>    <\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._visualizationMarkup"),
function(n){n._bubbleMarkup='<div id="bubble-root">    <div id="bubble-container" data-bind="css:{animatedTour: DataLab.Features.animatedTourEnabled()}, visible:overlayVisible, style: { left: bubbleX() + \'px\' , top: bubbleY() + \'px\' }">        <div id="bubble-arrow" data-bind="css:{animatedTour: DataLab.Features.animatedTourEnabled()}, fadeVisible:visible, style: { left: arrowX() + \'px\', top: arrowY() + \'px\' }, css: arrowClassId()"><\/div>        <div id="bubble" data-bind="css:{animatedTour: DataLab.Features.animatedTourEnabled()}, fadeVisible:visible, style: { width: width() + \'px\', height: height() + \'px\' }">            <a class="bubble-close" href="#" id="bubble-close" data-bind="css:{animatedTour: DataLab.Features.animatedTourEnabled()}, click:close">x<\/a>            <div class="bubble-stepNumber animatedTour" data-bind="text: \'STEP \' + currentStepNumber(), visible: DataLab.Features.animatedTourEnabled() && isCurrentStepAProgressStep()"><\/div>            <div class="bubble-title" data-bind="css:{animatedTour: DataLab.Features.animatedTourEnabled()}, text: title()"><\/div>            <div class="bubble-content" data-bind="css:{animatedTour: DataLab.Features.animatedTourEnabled()}, html: content()"><\/div>            <div class="bubble-bottom" data-bind="css:{animatedTour: DataLab.Features.animatedTourEnabled()}">                <div class="bubble-button left back" data-bind="css:{animatedTour: DataLab.Features.animatedTourEnabled()}, visible: shouldShowLeftButton, click: backAsync, text: DataLab.Features.animatedTourEnabled() ? leftButtonText : DataLab.LocalizedResources.bubbleBackButtonText"><\/div>                <div class="bubble-button right next" data-bind="css:{animatedTour: DataLab.Features.animatedTourEnabled()}, visible: shouldShowRightButton, click: nextAsync, text: DataLab.Features.animatedTourEnabled() ? rightButtonText : DataLab.LocalizedResources.bubbleNextButtonText"><\/div>                <div class="bubble-button right finish" data-bind="css:{animatedTour: DataLab.Features.animatedTourEnabled()}, visible: isLastStep(), click: close, html: DataLab.Features.animatedTourEnabled() ? finishButtonText: DataLab.LocalizedResources.bubbleFinishedButtonText"><\/div>                <div class="bubble-button midLeft" data-bind="css:{animatedTour: DataLab.Features.animatedTourEnabled()}, visible: shouldShowMidLeftButton(), click: midLeftButtonAsync, html: midLeftButtonText()"><\/div>                <div class="bubble-button midRight" data-bind="css:{animatedTour: DataLab.Features.animatedTourEnabled()}, visible: shouldShowMidRightButton(), click: midRightButtonAsync, html: midRightButtonText()"><\/div>                <!-- ko if: totalSteps() > 1-->                <ul class="bubble-progress center" data-bind="css:{animatedTour: DataLab.Features.animatedTourEnabled()}, visible: $root.isCurrentStepAProgressStep(), foreach: progressSteps">                    <li data-bind="css: {white: $root.progressSteps()[$index()] == $root.steps()[$root.currentIndex()], animatedTour: DataLab.Features.animatedTourEnabled()}, click: $root.canSkipSteps ? function() { $root.gotoAsync($index()); } : null"><\/li>                <\/ul>                <!-- /ko -->            <\/div>        <\/div>    <\/div>    <div class="bubble-transparent-overlay blockingDiv" data-bind="css:{animatedTour: DataLab.Features.animatedTourEnabled()}, visible:overlayVisible() && showOverlay()">        <!-- ko if: hightlightRect() -->        <div class="bubble-overlay bubble-overlay-top" data-bind="css:{animatedTour: DataLab.Features.animatedTourEnabled()}, style: { height: hightlightRect().top + \'px\' }"><\/div>        <div class="bubble-overlay bubble-overlay-left" data-bind="css:{animatedTour: DataLab.Features.animatedTourEnabled()}, style: { top: hightlightRect().top + \'px\', height: hightlightRect().height + \'px\', width: hightlightRect().left + \'px\' }"><\/div>        <div class="bubble-overlay bubble-overlay-right" data-bind="css:{animatedTour: DataLab.Features.animatedTourEnabled()}, style: { top: hightlightRect().top + \'px\', height: hightlightRect().height + \'px\', left: hightlightRect().left + hightlightRect().width + \'px\' }"><\/div>        <div class="bubble-overlay bubble-overlay-bottom" data-bind="css:{animatedTour: DataLab.Features.animatedTourEnabled()}, style: { top: hightlightRect().top + hightlightRect().height + \'px\' }"><\/div>        <!-- /ko -->    <\/div>    <div class="bubble-element-highlight blockingDiv" data-bind="css:{animatedTour: DataLab.Features.animatedTourEnabled()}, visible:showElementHighlight()">        <div class="bubble-overlay bubble-overlay-top" data-bind="css:{animatedTour: DataLab.Features.animatedTourEnabled()}, style: { height: elementHightlightRect().top + \'px\' }"><\/div>        <div class="bubble-overlay bubble-overlay-left" data-bind="css:{animatedTour: DataLab.Features.animatedTourEnabled()}, style: { top: elementHightlightRect().top + \'px\', height: elementHightlightRect().height + \'px\', width: elementHightlightRect().left + \'px\' }"><\/div>        <div class="bubble-overlay bubble-overlay-right" data-bind="css:{animatedTour: DataLab.Features.animatedTourEnabled()}, style: { top: elementHightlightRect().top + \'px\', height: elementHightlightRect().height + \'px\', left: elementHightlightRect().left + elementHightlightRect().width + \'px\' }"><\/div>        <div class="bubble-overlay bubble-overlay-bottom" data-bind="css:{animatedTour: DataLab.Features.animatedTourEnabled()}, style: { top: elementHightlightRect().top + elementHightlightRect().height + \'px\' }"><\/div>    <\/div><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._bubbleMarkup"),
function(n){n._createWebServiceTutorialStep1Markup="<div>    <h2>Welcome to web service creation<\/h2>    <div>        <p>            Placeholder        <\/p>    <\/div><\/div>"}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._createWebServiceTutorialStep1Markup"),
function(n){n._createWebServiceTutorialStep2Markup="<div>    <h2>Edit your workflow and complete the graph<\/h2>    <div>        <p>            Placeholder        <\/p>    <\/div><\/div>"}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._createWebServiceTutorialStep2Markup"),
function(n){n._createWebServiceTutorialStep3Markup="<div>    <h2>Specify Input and Output, Run and Publish<\/h2>    <div>        <p>            Placeholder        <\/p>    <\/div><\/div>"}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._createWebServiceTutorialStep3Markup"),
function(n){n._binaryClassificationComparisonMarkup='<!-- ko if: loaded --><vflexbox class="pageContainer">    <!-- ko with: plotContainer -->    <div class="viewModelContainer">        <div class="sectionContainer">            <vflexbox>                <div class="tabHeaders">                    <!-- ko foreach: chartNames -->                    <div data-bind="attr: { id: $data + \'-tab\' }, text: $data.toUpperCase(), click: $parent.setCurrentChart, css: { selected: $data === $parent.currentChart() }" class="tab"><\/div>                    <!-- /ko -->                <\/div>                <hflexbox class="chartContainer">                    <div class="graphContainer">                        <div class="yAxisContainer" data-bind="style: { \'marginTop\': height() / 2 + \'px\' }">                            <div class="vertical-text yAxisLabel graphText" data-bind="text: yAxisLabel"><\/div>                        <\/div>                        <div class="chartAndXAxisContainer">                            <svg class="chartArea" data-bind="attr: { height: height(), width: width() }">                                <g data-bind="d3Axes: { xScale: xScale(), yScale: yScale() }" />                                <!-- ko foreach: plotData -->                                <g data-bind="attr: { id: \'curve\' + $index() }">                                    <path class="chartCurve" data-bind="                                    attr: {                                        d: $parent.svgLineFunction()(data),                                        stroke: $parent.colors()[$index()],                                        \'stroke-width\': $index() === $parents[1].currentViewModelIndex() ? 5 : 3,                                        opacity: $index() === $parents[1].currentViewModelIndex() ? 1 : 0.8                                    },                                    click: function() {  $parents[1].setCurrentViewModelIndex($index()) }">                                    <\/path>                                <\/g>                                <!-- /ko -->                            <\/svg>                            <div class="xAxisContainer" data-bind="style: { \'marginLeft\': width() / 2 + \'px\' }">                                <div class="horz-text xAxisLabel graphText" data-bind="text: xAxisLabel"><\/div>                            <\/div>                        <\/div>                        <div class="legendContainer">                            <!-- ko foreach: plotData -->                            <hflexbox class="legendInstance" data-bind="click: function() { $parents[1].setCurrentViewModelIndex($index()) }, css: { selected: $index() === $parents[1].currentViewModelIndex() }">                                <div class="legendColor" data-bind="style: { \'backgroundColor\': $parent.colors()[$index()] }"><\/div>                                <div class="legendLabel" data-bind="text: label"><\/div>                            <\/hflexbox>                            <!-- /ko -->                        <\/div>                    <\/div>                    <!-- ko if: DataLab.Features.miniMapInEvaluateVisualizationEnabled()-->                    <div id="evaluateMiniMapContainer" class="evaluateMiniMapContainer">                        <div id="evaluateMiniMap" data-bind="style: { \'height\': height() * $parent.miniMapProportion + \'px\', \'width\': width() * $parent.miniMapProportion + \'px\' }">                            <div class="customElements">                            <\/div>                        <\/div>                        <div id="zoomControlPanelContainer" class="controlPanel">                        <\/div>                    <\/div>                    <!-- /ko -->                <\/hflexbox>              <\/vflexbox>        <\/div>    <\/div>        <!-- /ko -->    <!-- ko with: currentViewModel -->        <div class="sectionContainer">            <hflexbox>                <!-- ko with: confusionMatrixViewModel -->                <table class="confusionMatrixTable">                    <tr>                        <td class="numeric-box">                            <div class="numeric-header">%rocTruePositive%<\/div>                            <div class="numeric-field" data-bind="text: rows()[0].cells()[0]"><\/div>                        <\/td>                        <td class="numeric-box">                            <div class="numeric-header">%rocFalseNegative%<\/div>                            <div class="numeric-field" data-bind="text: rows()[0].cells()[1]"><\/div>                        <\/td>                    <\/tr>                    <tr>                        <td class="numeric-box">                            <div class="numeric-header">%rocFalsePositive%<\/div>                            <div class="numeric-field" data-bind="text: rows()[1].cells()[0]"><\/div>                        <\/td>                        <td class="numeric-box">                            <div class="numeric-header">%rocTrueNegative%<\/div>                            <div class="numeric-field" data-bind="text: rows()[1].cells()[1]"><\/div>                        <\/td>                    <\/tr>                <\/table>                <!-- /ko -->                <!-- ko with: precisionRecallViewModel -->                <table class="confusionMatrixTable">                    <tr>                    <td class="numeric-box">                        <div class="numeric-header">%rocAccuracy%<\/div>                        <div class="numeric-field" data-bind="text: rows()[0].cells()[0]"><\/div>                    <\/td>                    <td class="numeric-box">                        <div class="numeric-header">%rocPrecision%<\/div>                        <div class="numeric-field" data-bind="text: rows()[0].cells()[1]"><\/div>                    <\/td>                    <tr>                        <td class="numeric-box">                            <div class="numeric-header">%rocRecall%<\/div>                            <div class="numeric-field" data-bind="text: rows()[1].cells()[0]"><\/div>                        <\/td>                        <td class="numeric-box">                            <div class="numeric-header">%rocF1Score%<\/div>                            <div class="numeric-field" data-bind="text: rows()[1].cells()[1]"><\/div>                        <\/td>                    <\/tr>                <\/table>                <!-- /ko -->                <div class="numeric-box thresholdBox">                    <div class="numeric-header">%rocThreshold%<\/div>                    <input class="numeric-field thresholdText" data-bind="value: rawThreshold"/>                <\/div>                <div>                    <input type="range" min="0" max="1" step=".01" data-bind="value: threshold" />                <\/div>                <div class ="numeric-box">                    <div class="numeric-header">%rocCumulativeAuc%<\/div>                    <div class="numeric-field" data-bind="text: auc"><\/div>                <\/div>            <\/hflexbox>            <table class="confusionMatrixTable">                <tr>                    <!-- ko if: positiveLabel() -->                    <td class="numeric-box">                        <div class="numeric-header">%binaryClassificationPositiveLabel%<\/div>                        <div class="numeric-field" data-bind="text: positiveLabel"><\/div>                    <\/td>                    <!-- /ko -->                    <!-- ko if: negativeLabel() -->                    <td class="numeric-box">                        <div class="numeric-header">%binaryClassificationNegativeLabel%<\/div>                        <div class="numeric-field" data-bind="text: negativeLabel"><\/div>                    <\/td>                    <!-- /ko -->                <\/tr>            <\/table>        <\/div>        <!-- ko with: binDataViewModel -->        <div class="sectionContainer">            <table class="buckets-data">                <tr data-bind="foreach: headerRow().cells">                    <th data-bind="text: $data"><\/th>                <\/tr>                <!-- ko foreach: rows() -->                <tr data-bind="foreach: cells">                    <td data-bind="text: $data"><\/td>                <\/tr>                <!-- /ko -->            <\/table>        <\/div>        <!-- /ko -->     <!-- /ko --><\/vflexbox><!-- /ko -->'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._binaryClassificationComparisonMarkup"),
function(n){n._clusteringMarkup='<div class="clusterContainer">    <hflexbox>        <svg class="clusterSvg" data-bind="attr: { height: height, width: width }">            <g class="axesContainer" data-bind="clusteringAxes: { }" />              <!-- ko foreach: clusterViewModels -->            <g>                <ellipse class="clusterEllipse" stroke-width="2" data-bind="                style: { fill: color },                attr: { cx: centroidX(), cy: centroidY(),                    rx: majorAxisLength(), ry: minorAxisLength(),                    transform: ellipseRotation(),                    stroke: color() }">                <\/ellipse>            <\/g>            <!-- /ko -->        <\/svg>        <div class="clusterLegendContainer">            <!-- ko foreach: clusterViewModels -->            <hflexbox class="clusterLegendInstance">                <div class="clusterLegendColor" data-bind="style: { \'backgroundColor\': color }"><\/div>                <div class="clusterLegendLabel" data-bind="text: label"><\/div>            <\/hflexbox>            <!-- /ko -->        <\/div>    <\/hflexbox><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._clusteringMarkup"),
function(n){n._customUXContainerMarkup='<div class="customUXWindow" data-bind="style: { width: width(), height: height() }">    <hflexbox class="visualizationTopHeader">        <!-- ko with: breadcrumbHeader -->        <hflexbox class="breadcrumbHeader">            <!-- ko if: $parent.showBreadcrumbHeader -->            <div class = "breadcrumbHeaderText" data-bind="text: experimentName"><\/div>            <div class = "breadcrumbHeaderSeparator"><\/div>            <div class = "breadcrumbHeaderText" data-bind="text: moduleName"><\/div>            <div class = "breadcrumbHeaderSeparator"><\/div>            <div class = "breadcrumbHeaderText" data-bind="text: portName"><\/div>            <!-- /ko -->            <div class=\'icon close\'><\/div>        <\/hflexbox>        <!-- /ko -->    <\/hflexbox><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._customUXContainerMarkup"),
function(n){n._customUXTabsContainerMarkup='<div class="customUXWindow customUXTabsWindow" data-bind="style: { width: width(), height: height() }">    <vflexbox>        <!--- Header --->        <flexstatic>            <!-- ko if: heading() -->            <h1 data-bind="text: heading"><\/h1>            <!-- /ko -->                        <!-- ko if: showBreadcrumbHeader -->            <hflexbox class="customUXTopHeader">                <hflexbox class="breadcrumbHeader">                    <!-- ko with: breadcrumbHeader -->                    <div class="breadcrumbHeaderText" data-bind="text: experimentName"><\/div>                    <div class="breadcrumbHeaderSeparator"><\/div>                    <div class="breadcrumbHeaderText" data-bind="text: moduleName"><\/div>                    <div class="breadcrumbHeaderSeparator"><\/div>                    <div class="breadcrumbHeaderText" data-bind="text: portName"><\/div>                    <!-- /ko -->                    <div class="icon close" data-bind="click: onClose"><\/div>                <\/hflexbox>            <\/hflexbox>            <!-- /ko -->            <!-- ko ifnot: showBreadcrumbHeader -->            <div class="icon close" data-bind="click: onClose"><\/div>            <!-- /ko -->        <\/flexstatic>        <!--- Content --->        <flexfill class="customUXSections left-nav" data-bind="jQueryTabs: {views: views, onTabActivated: onTabActivated}">            <ul data-bind="foreach: views">                <li data-bind="hoverBalloon: {message: (!isEnabled() ? isDisabledTooltip : \'\')}">                    <a data-bind="text: title"><\/a>                <\/li>            <\/ul>            <!-- ko foreach: views -->            <section>            <!-- ko templateWithHtml: {html: markup, data: viewModel} --><!-- /ko -->            <\/section>            <!-- /ko -->        <\/flexfill>    <\/vflexbox><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._customUXTabsContainerMarkup"),
function(n){n._genericMimeMarkup='<div class="rOutputContainer">    <!-- ko foreach: mimeSections -->    <div class="rOutputLogContainer">        <hflexbox>            <vflexbox class="rExpanderContainer">                <div class="rExpander" data-bind="css: { \'expanded\': show(), \'collapsed\': !show() }, click: function () { $data.show(!$data.show()) }"><\/div>            <\/vflexbox>            <div class="rLogHeader" data-bind="text: title()"> <\/div>        <\/hflexbox>        <div data-bind="style: { display: show() ? \'\' : \'none\' }">            <!-- ko foreach: values -->            <div data-bind="template: { name: $parents[1].getSectionTemplateByMimeType(dataType()) }"><\/div>            <!-- /ko -->        <\/div>    <\/div>    <!-- /ko --><\/div><script id="mimeTextEntry" type="text/html">    <div class="rOutputLog" data-bind="text: data()"><\/div><\/script><script id="mimePngEntry" type="text/html">    <img class="rImage" data-bind="attr: { src: \'data:image/png;base64,\' + data() }" /><\/script>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._genericMimeMarkup"),
function(n){n._jSONMarkup='<div class="JSONContainer" data-bind="text: text"><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._jSONMarkup"),
function(n){n._learnerMarkup='<div class="learnerContainer">    <div class="learnerName" data-bind="text: learnerName"><\/div>    <!-- ko foreach: tables -->    <div class="learnerTableContainer">        <div class="learnerTableHeader" data-bind="text: headerLabel()"><\/div>        <table>            <tr>                <!-- ko foreach: columnNames -->                <th data-bind="text: $data"><\/th>                <!-- /ko -->            <\/tr>            <!-- ko foreach: table -->            <tr class="learnerTable">                <!-- ko foreach: $data -->                <td data-bind="text: $data"><\/td>                <!-- /ko -->            <\/tr>            <!-- /ko -->        <\/table>    <\/div>    <!-- /ko --><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._learnerMarkup"),
function(n){n._multiclassClassificationMarkup='<!-- ko if: loaded --><div class="multiclassViewModelContainer">    <!-- ko foreach: viewModels -->    <div>        <!-- ko if: showMetrics -->        <div class="multiclassSection">            <hflexbox class="multiclassSectionHeader">                <vflexbox class="multiclassExpanderContainer">                    <div class="multiclassExpander" data-bind="                        css: { \'expanded\': !metricsIsCollapsed(), \'collapsed\': metricsIsCollapsed() },                        click: function () { $data.metricsIsCollapsed(!$data.metricsIsCollapsed()) }">                    <\/div>                <\/vflexbox>                <div>%multiclassMetricsHeader%<\/div>            <\/hflexbox>            <div class="metricsTableContainer" data-bind="style: { display: metricsIsCollapsed() ? \'none\' : \'\' }">                <table class="metricsTable">                <tbody>                    <!-- ko foreach: metrics -->                    <tr>                        <!-- ko foreach: $data -->                        <td data-bind="text: $data"><\/td>                        <!-- /ko -->                    <\/tr>                    <!-- /ko -->                <\/tbody>                <\/table>            <\/div>        <\/div>        <!-- /ko -->        <div class="multiclassSection">            <hflexbox class="multiclassSectionHeader">                <vflexbox class="multiclassExpanderContainer">                    <div class="multiclassExpander" data-bind="                        css: { \'expanded\': !confusionMatrixIsCollapsed(), \'collapsed\': confusionMatrixIsCollapsed() },                        click: function () { $data.confusionMatrixIsCollapsed(!$data.confusionMatrixIsCollapsed()) }">                    <\/div>                <\/vflexbox>                <div>%multiclassConfusionMatrixHeader%<\/div>            <\/hflexbox>            <svg class="multiclassSvg" data-bind="attr: { width: width, height: height }, style: { display: confusionMatrixIsCollapsed() ? \'none\' : \'\' }">                <g>                    <!-- ko foreach: superHeaders -->                    <text class="superHeaderText" data-bind="text: label, attr: { x: xCoordinate, y: yCoordinate, transform: transform }"><\/text>                    <!-- /ko -->                    <!-- ko foreach: xClassLabels -->                    <text class="labelHeaderText" data-bind="text: label, attr: { x: xCoordinate, y: yCoordinate, transform: transform }">                        <title data-bind="text: fullLabel"><\/title>                    <\/text>                    <!-- /ko -->                    <!-- ko foreach: yClassLabels -->                    <text class="labelHeaderText" data-bind="text: label, attr: { x: xCoordinate, y: yCoordinate, transform: transform }">                        <title data-bind="text: fullLabel"><\/title>                    <\/text>                    <!-- /ko -->                <\/g>                <g>                    <!-- ko foreach: instances -->                    <rect class="confusionMatrixEntry" data-bind="style: { \'stroke-width\': isMainDiagonalEntry() ? 5 : 1 },                    attr: { width: sideLength, height: sideLength, x: xCoordinate, y: yCoordinate, \'fill-opacity\': fractionOfActualClass }">                        <title data-bind="text: \'%multiclassFrequency%: \' + frequency()"><\/title>                    <\/rect>                    <text class="entryLabel" data-bind="text: frequency() > 0 ? percentOfActualClass : \'\', attr: { x: xCoordinate() + (sideLength() / 2), y: yCoordinate() + (sideLength() / 2) }">                        <title data-bind="text: \'%multiclassFrequency%: \' + frequency()"><\/title>                    <\/text>                    <!-- /ko -->                <\/g>            <\/svg>        <\/div>    <\/div>    <!-- /ko --><\/div><!-- /ko -->'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._multiclassClassificationMarkup"),
function(n){n._rOutputMarkup='<div class="rOutputContainer">    <!-- ko foreach: outputLogs -->    <div class="rOutputLogContainer">        <hflexbox>            <vflexbox class="rExpanderContainer">                <div class="rExpander" data-bind="css: { \'expanded\': show(), \'collapsed\': !show() }, click: function () { $data.show(!$data.show()) }"><\/div>            <\/vflexbox>            <div class="rLogHeader" data-bind="text: label()"> <\/div>        <\/hflexbox>        <div class="rOutputLog" data-bind="text: content(), style: { display: show() ? \'\' : \'none\' }"><\/div>    <\/div>    <!-- /ko -->    <div class="rGraphicsDevice">        <hflexbox>            <vflexbox class="rExpanderContainer">                <div class="rExpander" data-bind="css: { \'expanded\': showGraphicsDevice(), \'collapsed\': !showGraphicsDevice() }, click: function () { $data.showGraphicsDevice(!$data.showGraphicsDevice()) }"><\/div>            <\/vflexbox>            <div class="rLogHeader">%rOutputGraphicsDevice%<\/div>        <\/hflexbox>        <div data-bind="style: { display: showGraphicsDevice() ? \'\' : \'none\' }">            <!-- ko foreach: pngSrcs -->            <img class="rImage" data-bind="attr: { src: $data }" />            <!-- /ko -->        <\/div>    <\/div><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._rOutputMarkup"),
function(n){n._regressionEvaluationMarkup='<div class="multiclassViewModelContainer">    <!-- ko foreach: viewModels -->    <div>        <div class="multiclassSection">            <hflexbox class="multiclassSectionHeader">                <vflexbox class="multiclassExpanderContainer">                    <div class="multiclassExpander" data-bind="                        css: { \'expanded\': !metricsIsCollapsed(), \'collapsed\': metricsIsCollapsed() },                        click: function () { $data.metricsIsCollapsed(!$data.metricsIsCollapsed()) }">                    <\/div>                <\/vflexbox>                <div>%multiclassMetricsHeader%<\/div>            <\/hflexbox>            <div class="metricsTableContainer" data-bind="style: { display: metricsIsCollapsed() ? \'none\' : \'\' }">                <table class="metricsTable">                    <tbody>                        <!-- ko foreach: metrics -->                        <tr>                            <!-- ko foreach: $data -->                            <td data-bind="text: $data"><\/td>                            <!-- /ko -->                        <\/tr>                        <!-- /ko -->                    <\/tbody>                <\/table>            <\/div>        <\/div>        <div class="multiclassSection">            <hflexbox class="multiclassSectionHeader">                <vflexbox class="multiclassExpanderContainer">                    <div class="multiclassExpander" data-bind="                        css: { \'expanded\': !histogramIsCollapsed(), \'collapsed\': histogramIsCollapsed() },                        click: function () { $data.histogramIsCollapsed(!$data.histogramIsCollapsed()) }">                    <\/div>                <\/vflexbox>                <div>%regressionErrorHistogramHeader%<\/div>            <\/hflexbox>            <div class="errorHistogramContainer" data-bind="                    style: { display: histogramIsCollapsed() ? \'none\' : \'\' },                    d3graph: { data: $data.errorHistogram, minWidth: 380, height: 370, padding: 60, minimized: false }">            <\/div>        <\/div>    <\/div>    <!-- /ko --><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._regressionEvaluationMarkup"),
function(n){n._treeEnsembleMarkup='<div id="treeEnsembleViewContainer" class="TreeEnsembleOutputContainer">    <hflexbox class="numberRowsColumnsContainer">        <div class="numberRowsColumnsHeader">            <div class="smallHeader">                %treeEnsembleTreesConstructed%            <\/div>            <div data-bind="text: treeCount">            <\/div>        <\/div>    <\/hflexbox>    <hflexbox class="treeContentWrapper">        <div id="treeThumbnailSidebar" data-bind="event: { scroll: onScroll }">            <!-- ko foreach: treeThumbnailUrls -->            <div class="treeThumbnailContainer" data-bind="event: { click: select }, css: { selectedTreeThumbnail: $parent.selectedTreeIndex() === $index() }">                <div class="treeThumbnailLabel" data-bind="text: $index() + 1"><\/div>                <img class="treeThumbnail" data-bind="attr: { src: thumbnailUrl }" />            <\/div>            <!-- /ko -->            <!-- ko if: showLoadMore -->            <!-- TODO make sure this works, maybe change to link style, localize -->            <div data-bind="event: { click: loadMore }" id="showMoreLink">%treeEnsembleShowMore%<\/div>            <!-- /ko -->        <\/div><!-- this comment gets rid of the gap between the two elements        -->        <div id="treeViewContainer">            <!-- ko with: tree -->            <div id="treeInterface" style="position: relative">                <div id="treeView">                    <div class="customElements">                        <svg id="treeSvg">                            <rect width="100%" height="100%" class="treeBackground" data-bind="event: { click: clearSelection }"/>                            <g id="transformElement">                                <!-- ko foreach: leftEdges -->                                <line class="treeEdge" data-bind="attr: { x1: start.x, y1: start.y, x2: end.x, y2: end.y }, css: { selectedTreeEdge: highlight() }"/>                                <!-- ko if: text -->                                <text class="treeEdgeCaption trueEdgeCaption" data-bind="attr: { x: (start.x + end.x) / 2 - 5, y: (start.y + end.y) / 2 }, text: text"><\/text>                                <!-- /ko -->                                <!-- /ko -->                                <!-- ko foreach: rightEdges -->                                <line class="treeEdge" data-bind="attr: { x1: start.x, y1: start.y, x2: end.x, y2: end.y }, css: { selectedTreeEdge: highlight() }"/>                                <!-- ko if: text -->                                <text class="treeEdgeCaption falseEdgeCaption" data-bind="attr: { x: (start.x + end.x) / 2 + 5, y: (start.y + end.y) / 2 }, text: text"><\/text>                                <!-- /ko -->                                <!-- /ko -->                                <!-- ko foreach: interiorNodes -->                                <!-- ko if: !isPlaceholder() -->                                <circle class="treeNodeBackground interiorTreeNode" data-bind="attr: { cx: x, cy: y, r: radius }, css: { selectedTreeNode: highlight() }"/>                                <text class="treeNodeFeatureName" data-bind="attr: { x: x, y: y }, text: feature()"/>                                <text class="treeNodePredicate" data-bind="attr: { x: x, y: y + 20 }, text: predicate()"/>                                <circle class="treeNodeForeground" data-bind="attr: { cx: x, cy: y, r: radius }, event: { click: selectTreeNode }">                                    <title data-bind="text: fullFeatureName()"/>                                <\/circle>                                <!-- /ko -->                                <!-- /ko -->                                <!-- ko foreach: leafNodes -->                                <circle class="treeNodeBackground leafTreeNode" r="40" data-bind="attr: { cx: x, cy: y }"/>                                <text class="treeNodeFeatureName" data-bind="attr: { x: x, y: y }, text: feature()"/>                                <!-- ko if: showClassPercentage() -->                                <text class="treeNodeClassPercentage" data-bind="attr: { x: x, y: y + 30 }, text: classPercentage()"/>                                <!-- /ko -->                                <path class="treeNodeArc" data-bind="attr: { d: arcPath() }"/>                                <circle class="treeNodeForeground" r="40" data-bind="attr: { cx: x, cy: y }, event: { click: selectTreeNode }">                                    <title data-bind="text: fullFeatureName()" />                                <\/circle>                                <!-- /ko -->                            <\/g>                        <\/svg>                    <\/div>                <\/div>                <hflexbox class="treeToolbarContainer">                    <div id="treeToolbar" class="controlPanel"><\/div>                    <input id="viewMode" class="edgeCaptionCheckbox" type="checkbox"/>                    <label class="edgeCaptionCheckboxLabel">%treeEnsembleEdges%<\/label>                <\/hflexbox>            <\/div>            <!-- /ko -->        <\/div>        <!-- ko with: tree -->        <div id="treeStatistics">            <div class="treeStatisticsTopHeader">%treeEnsembleStatistics%<\/div>            <!-- ko foreach: nodeStatisticsForHighlightedPath -->            <div class="treeStatisticContainer">                <!-- ko if: $data.feature -->                <div class="treeStatisticHeader" data-bind="text: feature"><\/div>                <!-- /ko -->                <table>                    <tbody>                    <!-- ko if: $data.predicate -->                    <tr>                        <td class="treeStatisticName">%treeEnsemblePredicate%<\/td>                        <td class="treeStatisticValue" data-bind="text: predicate"><\/td>                    <\/tr>                    <!-- /ko -->                    <!-- ko if: $data[\'Split Gain\'] -->                    <tr>                        <td class="treeStatisticName">%treeEnsembleSplitGain%<\/td>                        <td class="treeStatisticValue" data-bind="text: $data[\'Split Gain\']"><\/td>                    <\/tr>                    <!-- /ko -->                    <!-- ko if: $data[\'Gain P-Value\'] -->                    <tr>                        <td class="treeStatisticName">%treeEnsembleGainPValue%<\/td>                        <td class="treeStatisticValue" data-bind="text: $data[\'Gain P-Value\']"><\/td>                    <\/tr>                    <!-- /ko -->                    <\/tbody>                <\/table>                <!-- ko if: $data.graph -->                <hflexbox>                    <div class="treeStatisticName">%treeEnsemblePrediction%<\/div>                    <!-- ko if: $data["Prediction Type"] === "Point mass" -->                    <div class="treePredictionValue treeStatisticValue" data-bind="text: graph.xValues[0]"><\/div>                    <!-- /ko -->                    <!-- ko if: $data["Prediction Type"] === "Histogram" -->                    <table>                        <tbody>                            <!-- ko foreach: $data.graph.xValues -->                            <tr>                                <td class="treePredictionValue treeStatisticValue" data-bind="text: $data"><\/td>                                <td>                                    <div class="treePredictionHistogramBar"                                         data-bind="style: { width: ($parent.graph.yPredictionValues[$index()] / $parent.graph.yValueSum) * 100 + \'px\' },                                            attr: { title: $parent.graph.yPredictionValues[$index()] }">                                    <\/div>                                <\/td>                            <\/tr>                            <!-- /ko -->                        <\/tbody>                    <\/table>                    <!-- /ko -->                <\/hflexbox>                <!-- /ko -->            <\/div>            <!-- /ko -->        <\/div>        <!-- /ko -->    <\/hflexbox><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._treeEnsembleMarkup"),
function(n){n._videoMarkup='<video controls data-bind="attr: { src: url, width: width, height: height }, event: { playing: markAsWatched }"><\/video>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._videoMarkup"),
function(n){n._markdownEditorMarkup='<div class="preview-switch">    <div class="toggle-btn">        <input type="radio" name="preview-switch" value="false" data-bind="checked: inPreview.forEditing" /><div><div class="markdown-icon"><\/div>Markdown<\/div>    <\/div>    <div class="toggle-btn">        <input type="radio" name="preview-switch" value="true" data-bind="checked: inPreview.forEditing" /><div><div class="preview-icon"><\/div>Preview<\/div>    <\/div><\/div><div class="editor-container">    <div class="wmd-editor" data-bind="css: { \'in-preview\': inPreview }">        <div data-bind="attr: { id: buttonBarId }"><\/div>        <textarea class="wmd-input" data-bind="attr: { id: inputAreaId }, value: value, placeholder: placeholder"><\/textarea>    <\/div>    <div class="wmd-preview" data-bind="attr: { id: previewAreaId }, css: { \'in-preview\': inPreview }"><\/div><\/div>'}
(ExperimentEditorTemplates||(ExperimentEditorTemplates={}));ExperimentEditorTemplates.
typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||
[];ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._markdownEditorMarkup"),
function(n){function t(t){n.DialogHost&&n.DialogHost.closeActiveDialog();n.DialogHost=
t}n.DialogHost;n.setDialogHost=t}(ExperimentEditor||(ExperimentEditor={}));__extends=
this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(
i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(
n){var t=function(n){function t(t,i){n.call(this);this.falsePositiveRate="fpr";this.
truePositiveRate="tpr";this.precision="precision";this.yRate="yrate";this.truePositive=
"truepositive";this.data=ko.observable(t);this.label=ko.observable(i);this.rocChartsFull=
this.constructChart(t,this.falsePositiveRate,this.truePositiveRate);this.precisionRecallChartsFull=
this.constructChart(t,this.truePositiveRate,this.precision);this.liftChartsFull=
this.constructChart(t,this.yRate,this.truePositive)}return __extends(t,n),t.prototype.
getCurrentChart=function(n){return n==="lift"?this.liftChartsFull:n==="roc"?this.
rocChartsFull:this.precisionRecallChartsFull},t.prototype.constructChart=function(
n,t,i){for(var u,o=n.chart?n.chart:n.charts[0],f=o.data,e=[],s=f.length,r=0;r<s;
r++)u=f[r],e.push([u[t],u[i]]);return{data:e,label:this.label()}},t}(DataLab.Util.
Disposable);n.PlotViewModel=t})(t=n.CustomUX||(n.CustomUX={}))}(ExperimentEditor||
(ExperimentEditor={}));__extends=this.__extends||function(n,t){function r(){this.
constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;
n.prototype=new r},function(n){var t;(function(n){var t=function(){function n(n)
{this.cells=ko.observableArray(n)}return n}(),i;n.Row=t;i=function(n){function i(
i,r){var u=this;r===void 0&&(r=null);n.call(this);this.rows=ko.observableArray();
DataLab.Util.forEach(i,function(n){u.rows.push(new t(n))});this.headerRow=ko.observable(
new t(r))}return __extends(i,n),i}(DataLab.Util.Disposable);n.TableViewModel=i})
(t=n.CustomUX||(n.CustomUX={}))}(ExperimentEditor||(ExperimentEditor={})),function(
n){var t;(function(n){var t=function(){function n(n,t,i,r,u,f,e,o,s,h,c,l){var a=
this;l===void 0&&(l=null);this._graphType=ko.observable(0);this.graphType=ko.computed(
{write:function(n){n===1?a._graphType(DataLab.DataContract.isNumericFeature(s.featureType)?
1:0):a._graphType(n)},read:function(){return a._graphType()}});this.graphType(n);
this.xlog=t;this.ylog=i;this.binCount=r;this.categoryCount=u;this.cumulativeDistibution=
f;this.probabilityDensity=e;this.datatable=o;this.feature=s;this.crossCompareFeature=
h;this.layout=c;this.index=l;this.subscribed=!1}return n}();n.D3GraphViewModel=t}
)(t=n.Visualization||(n.Visualization={}))}(ExperimentEditor||(ExperimentEditor=
{})),function(n){var t;(function(t){var f=n.Visualization,u,i,r;(function(n){n[n.
Histogram=0]="Histogram";n[n.BoxPlot=1]="BoxPlot";n[n.ScatterPlot=2]="ScatterPlot";
n[n.MultiboxPlot=3]="MultiboxPlot";n[n.Crosstab=4]="Crosstab"})(t.GraphType||(t.
GraphType={}));u=t.GraphType;i=function(){function n(){this.visible=ko.observable(
!1);this.value=ko.observable(!1);this.label=ko.observable("")}return n.prototype.
refresh=function(n,t){this.visible(n);this.label(t)},n}();t.ScaleBoxViewModel=i;
r=function(){function n(n,r,f,e){var o=this;this.isNull=r===null;this.compareToFeatures=
n;this.crossCompareFeature=ko.observable("None");this.isNull||(this.crossCompareFeatureContract=
ko.computed(function(){return DataLab.Util.first(r.features,function(n){return n.
name===o.crossCompareFeature()},null)}),this.crossCompareFeatureContract.subscribe(
function(n){n?DataLab.DataContract.isNumericFeature(f.featureType)&&DataLab.DataContract.
isNumericFeature(n.featureType)?o.graphType(2):DataLab.DataContract.isNumericFeature(
f.featureType)||DataLab.DataContract.isNumericFeature(n.featureType)?o.graphType(
3):o.graphType(4):o.graphType(o.mainGraphType)}),this.feature=f.name);this.featureContract=
f;this.mainGraphType=0;this.graphType=ko.observable(this.mainGraphType);this.binCount=
ko.observable(10);this.categoriesCount=ko.observable(5);this.categoriesVisible=ko.
observable(!0);this.binCountVisible=ko.observable(!0);this.xScaleCheckbox=new i(
!0,!0,"");this.yScaleCheckbox=new i(!0,!0,"");this.probabilityDensity=ko.observable(
!1);this.cumulativeDistribution=ko.observable(!1);this.probabilityFunctionsVisible=
ko.observable(!0);this.scaleCheckboxesVisible=ko.computed(function(){return o.xScaleCheckbox.
visible()||o.yScaleCheckbox.visible()});this.parametersVisible=ko.computed(function(
){return o.scaleCheckboxesVisible()||o.binCountVisible()||o.categoriesVisible()||
o.probabilityFunctionsVisible()});this.binCount.subscribe(this.logGraphControlEvent(
"BinCountChanged"));this.categoriesCount.subscribe(this.logGraphControlEvent("CategoriesCountChanged"));
this.probabilityDensity.subscribe(this.logGraphControlEvent("ProbabilityDensityChanged"));
this.cumulativeDistribution.subscribe(this.logGraphControlEvent("CumulativeDistributionChanged"));
this.xScaleCheckbox.value.subscribe(this.logGraphControlEvent("XScaleCheckboxChanged"));
this.yScaleCheckbox.value.subscribe(this.logGraphControlEvent("YScaleCheckboxChanged"));
this.isNull?this.graph=null:(this.graph=new t.D3GraphViewModel(this.graphType(),
this.xScaleCheckbox.value,this.yScaleCheckbox.value,this.binCount,this.categoriesCount,
this.cumulativeDistribution,this.probabilityDensity,r,f,this.crossCompareFeatureContract,
e),this.graphType.subscribe(function(n){o.graph.graphType(n)}),this.createInputsUI(
),this.graphTypeString=ko.computed(function(){return u[o.graph.graphType()]}))}return n.
prototype.setCrossCompareFeature=function(n){DataLab.Util.first(this.compareToFeatures,
function(t){return t===n},!1)&&this.crossCompareFeature(n)},n.prototype.setGraphType=
function(n){(this.graphType()===0||this.graphType()===1)&&this.graphType(n);this.
mainGraphType=n},n.prototype.logGraphControlEvent=function(n){return function(t)
{DataLab.Log.featureUsage({featureID:23,groupID:24,data:JSON.stringify({name:n,value:
t})})}},n.prototype.createInputsUI=function(){var n=this;ko.computed(function(){
var t=DataLab.DataContract.isNumericFeature(n.featureContract.featureType);switch(
n.graph.graphType()){case 0:n.xScaleCheckbox.refresh(t?!0:!1,DataLab.Util.format(
DataLab.LocalizedResources.featureLogScale,n.feature));n.yScaleCheckbox.refresh(
!0,DataLab.LocalizedResources.frequencyLogScale);n.binCountVisible(!0);n.categoriesVisible(
!1);n.probabilityFunctionsVisible(t);break;case 1:n.xScaleCheckbox.refresh(!0,DataLab.
Util.format(DataLab.LocalizedResources.featureLogScale,n.feature));n.yScaleCheckbox.
refresh(!1,"");n.binCountVisible(!1);n.categoriesVisible(!1);n.probabilityFunctionsVisible(
!1);break;case 2:n.xScaleCheckbox.refresh(!0,DataLab.Util.format(DataLab.LocalizedResources.
featureLogScale,n.feature));n.yScaleCheckbox.refresh(!0,DataLab.Util.format(DataLab.
LocalizedResources.featureLogScale,n.crossCompareFeature()));n.binCountVisible(!1);
n.categoriesVisible(!1);n.probabilityFunctionsVisible(!1);break;case 4:n.xScaleCheckbox.
refresh(!1,"");n.yScaleCheckbox.refresh(!1,"");n.binCountVisible(!1);n.categoriesVisible(
!1);n.probabilityFunctionsVisible(!1);break;case 3:n.xScaleCheckbox.refresh(!t,DataLab.
Util.format(DataLab.LocalizedResources.featureLogScale,n.crossCompareFeature()));
n.yScaleCheckbox.refresh(t,DataLab.Util.format(DataLab.LocalizedResources.featureLogScale,
n.feature));n.binCountVisible(!1);n.categoriesVisible(!0);n.probabilityFunctionsVisible(
!1);break;default:throw new Error("Unknown Graph type requested: "+n.graphTypeString(
));}})},n}();t.GraphControlViewModel=r;t.NullGraph=new r([],null,null,null)})(t=
n.Visualization||(n.Visualization={}))}(ExperimentEditor||(ExperimentEditor={})),
function(n){var t=function(){function t(n,t,i){if(t===void 0&&(t=null),i===void 0&&
(i=null),this.optionsOverrides=i,this.hasBeenShown=!1,this.dialogResult=$.Deferred(
),this.dialogHostResultSubscription=null,!n&&n!=="")throw new Error("koTemplate must be provided");
this.koTemplate=n;this.viewModel=t}return t.createFactoryForTemplate=function(n,
i){var r=function(r){return new t(n,r,i)};return r.show=function(n){var t=new this(
n);return t.show()},r},t.prototype.show=function(){var i=this,t;if(this.hasBeenShown)
throw new Error("This dialog has already been shown once and cannot be shown again");
return this.hasBeenShown=!0,this.dialogHostResultSubscription=n.DialogHost.dialogDismissedEvent.
subscribe(function(n){i.dialogHostResultSubscription.dispose();i.onDialogDismissed(
n)}),t=n.DialogHost.showNewDialog(this),t.innerHTML=this.koTemplate,this.viewModel!==
null&&ko.applyBindings(this.viewModel,t),this.dialogResult},t.prototype.close=function(
){if(n.DialogHost.isActiveDialog(this)){n.DialogHost.closeActiveDialog();var t=$(
".fx-dialogpresenter-shield");return t.promise()}return DataLab.Util.when(null)}
,t.prototype.canBeAccepted=function(){return this.viewModel.canBeAccepted?this.viewModel.
canBeAccepted():!0},t.prototype.onDialogDismissed=function(n){if(n.dialog!==this)
{DataLab.Log.error("Dialog received a dismissal notification for a different dialog");
return}this.viewModel&&this.viewModel.dismissed(n);this.dialogResult.resolveWith(
this,[n])},t}();n.DialogView=t}(ExperimentEditor||(ExperimentEditor={}));__extends=
this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(
i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(
n){var t;(function(n){n.placeholderWidth="200px";n.placeholderHeight="155px";n.graphControlWidth=
"500px";n.graphControlheight="448px";n.transitionDuration=500;n.maxPrecision=6;n.
maxPrecisionOfStats=4;n.maxNumberOfRowsToDisplay=100;n.typesToNotReducePrecision=
["System.Int32","System.Int64"]})(t=n.Constants||(n.Constants={}))})(t=n.Visualization||
(n.Visualization={}))}(ExperimentEditor||(ExperimentEditor={})),function(n){var t;
(function(n){function i(n,t){return n&&n.toFixed?parseFloat(n.toFixed(t)):n}var u=
function(){function n(n,t,i,r){this.selected=ko.observable(!1);this.name=n;this.
graphControl=t;this.minimizedGraph=i;this.columnStatistics=ko.observableArray(r)}
return n}(),t,r,f;n.ColumnViewModel=u;t=function(){function t(t){this.feature=t;
this.visible=ko.observable(!0);this.animationDuration=n.Constants.transitionDuration}
return t}();n.SnapshotViewModel=t;n.reduceToFixedPrecision=i;r=function(){function t(
t,r){var s,h,e,f,u,o,v;for(this.numberOfColumns=t.numberOfColumns,this.numberOfRows=
t.numberOfRows,s=Math.min(t.records.length,n.Constants.maxNumberOfRowsToDisplay),
h=t.features,this.records=new Array(s),e=0;e<s;++e){var c=t.records[e],l=Math.min(
r,c.length),a=new Array(l);for(f=0;f<l;++f)u=c[f],u?u.isNan?o=DataLab.LocalizedResources.
visualizationNaN:u.isInf?o=DataLab.LocalizedResources.visualizationInfinity:(v=typeof
u=="number"&&n.Constants.typesToNotReducePrecision.indexOf(h[f].elementType)===-1,
o=v?i(u,n.Constants.maxPrecision):u):o=u,a[f]=o;this.records[e]=a}}return t}();n.
DataTableViewModel=r;f=function(f){function e(t,i,u){var e=this,s,h,o;f.call(this);
this.datatable=t;this.snapshots=ko.observableArray();this.entireDatasetIsPresent=
!0;this.statsDataTable=i;this.statsAndGraphsIsCollapsed=ko.observable(!1);this.statsIsCollapsed=
ko.observable(!1);this.visualizationIsCollapsed=ko.observable(!1);this.statsAndGraphsIsCollapsed.
subscribe(this.createHeightOfResizeBarSubscription(0,function(n){return n?0:null}
));this.statsIsCollapsed.subscribe(this.createHeightOfResizeBarSubscription(0));
this.visualizationIsCollapsed.subscribe(this.createHeightOfResizeBarSubscription(
0));DataLab.Util.first(u.records,function(n){return n.filter(function(n){return n!=
null}).length>0},null)&&(this.entireDatasetIsPresent=!1);this.layout=this.entireDatasetIsPresent?
null:u;s=DataLab.Util.map(DataLab.Util.filter(t.features,function(n){return DataLab.
DataContract.isNumericFeature(n.featureType)}),function(n){return n.name});s.unshift(
"None");this.featureNames=DataLab.Util.map(t.features,function(n){return n.name}
);this.featureNames.unshift("None");h=DataLab.Util.map(t.features,function(n){return n.
featureType});this.minimizedGraphsTypeEnum=ko.observable(0);this.minimizedGraphsType=
ko.computed(function(){return n.GraphType[e.minimizedGraphsTypeEnum()]});this.addFeatureTypeToStatsTable(
h);o=this.entireDatasetIsPresent?this.datatable.numberOfColumns:this.layout.records.
length;this.columns=ko.observableArray(this.constructColumnViewModels(o));this.dataTableViewModel=
new r(t,o);this.graphControl=ko.observable(n.NullGraph);this.currentSelectedColumnIndex=
ko.observable(-1);this.columnIsSelected=ko.computed(function(){return e.currentSelectedColumnIndex(
)>=0});this.currentSelectedColumnViewModel=ko.computed(function(){return e.columnIsSelected(
)?e.columns()[e.currentSelectedColumnIndex()]:null});this.parametersAreVisible=ko.
computed(function(){return e.entireDatasetIsPresent&&e.graphControl().parametersVisible(
)&&e.columnIsSelected()})}return __extends(e,f),e.prototype.constructColumnViewModels=
function(t){var i=this,r=[];return this.datatable.features.forEach(function(f){var
e,o,s;!i.entireDatasetIsPresent&&f.index>=t||(e=new n.GraphControlViewModel(i.featureNames,
i.datatable,i.datatable.features[f.index],i.layout),e.crossCompareFeature.subscribe(
i.createHeightOfResizeBarSubscription(0)),o=i.constructMinimizedGraphViewModel(f.
index),s=i.constructColumnStatistics(f.index),r.push(new u(f.name,e,o,s)))}),r},
e.prototype.constructMinimizedGraphViewModel=function(t){var i=new n.D3GraphViewModel(
this.minimizedGraphsTypeEnum(),ko.observable(!1),ko.observable(!1),ko.observable(
10),ko.observable(0),ko.observable(!1),ko.observable(!1),this.datatable,this.datatable.
features[t],ko.observable(null),this.layout,t);return this.minimizedGraphsTypeEnum.
subscribe(function(n){i.graphType(n)}),i},e.prototype.constructColumnStatistics=
function(n){var t=this,i=this.statsDataTable.features.map(function(n){return n.name}
),r=this.statsDataTable.records[n];return r.map(function(n,r){var u=t.getStatisticValue(
n),f=t.getStatisticName(i[r]);return{name:f,value:u}})},e.prototype.getStatisticName=
function(n){var t=DataLab.LocalizedResources;switch(n){case"Mean":return t.visualizationStatisticMean
case"Median":return t.visualizationStatisticMedian;case"Min":return t.visualizationStatisticMin
case"Max":return t.visualizationStatisticMax;case"Standard Deviation":return t.visualizationStatisticStandardDeviation
case"Unique Values":return t.visualizationStatisticUniqueValues;case"Missing Values":
return t.visualizationStatisticMissingValues;case"Feature Type":return t.visualizationStatisticFeatureType
default:return n}},e.prototype.getStatisticValue=function(t){return t.isNan?DataLab.
LocalizedResources.visualizationNaN:t.isInf?DataLab.LocalizedResources.visualizationInfinity:
i(t,n.Constants.maxPrecisionOfStats)},e.prototype.selectColumn=function(t,i){var
u,r,f;this.setHeightOfResizeBar(n.Constants.transitionDuration);u=$(i.target).closest(
"td,th");r=u.parent().find("td,th").index(u)-1;r!==undefined&&r>=0&&(this.statsAndGraphsIsCollapsed(
!1),i.ctrlKey?this.columnIsSelected()&&(DataLab.Log.customEvent({key:"CtrlClickOnColumnToCompareTo",
type:"Visualize",data:this.datatable.features[r].name}),this.entireDatasetIsPresent&&
this.graphControl().setCrossCompareFeature(this.datatable.features[r].name)):(DataLab.
Log.customEvent({key:"ClickOnColumnToSelect",type:"Visualize",data:this.columns(
)[r].name}),this.columns().forEach(function(n){n.selected(!1)}),this.columns()[r].
selected(!0),this.graphControl(this.columns()[r].graphControl),f=this.currentSelectedColumnIndex(
),this.currentSelectedColumnIndex(r),r!==f&&this.setSelectedColumnStyle(r,f)))},
e.prototype.setSelectedColumnStyle=function(n,t){var i=1,r=this.columns().length+
i,u=function(n){var t=(n+i+1)%r;return DataLab.Util.format("#dataTable td:nth-of-type({0})",
r+"n+"+t)},f=u(n),e=u(t);$(f).addClass("selected");$(e).removeClass("selected")}
,e.prototype.setHeightOfResizeBar=function(n,t){t===void 0&&(t=null);setTimeout(
function(){var n=t===null?Math.max($(".statsAndGraphs .statsAndGraphsContent").height(
)+$(".statsAndGraphs .statsAndGraphsExpander").height(),$(".statsAndGraphs").height(
)):t;$(".statsAndGraphs .resize").height(n)},n)},e.prototype.createHeightOfResizeBarSubscription=
function(n,t){var i=this;return t===void 0&&(t=null),function(r){return i.setHeightOfResizeBar(
n,t!==null?t(r):null)}},e.prototype.setGraphType=function(n){this.minimizedGraphsTypeEnum(
n);this.columns().forEach(function(t){t.graphControl.setGraphType(n)})},e.prototype.
setHistogramMode=function(){this.setGraphType(0);DataLab.Log.featureUsage({featureID:
25,groupID:24})},e.prototype.setBoxchartMode=function(){this.setGraphType(1);DataLab.
Log.featureUsage({featureID:26,groupID:24})},e.prototype.takeSnapshot=function()
{this.snapshots.unshift(new t(this.graphControl().feature));DataLab.Log.customEvent(
{key:"TakeSnapshot",type:"Visualize"})},e.prototype.closeSnapshot=function(n){n.
visible(!1);this.snapshots.remove(n);DataLab.Log.customEvent({key:"CloseSnapshot",
type:"Visualize"})},e.prototype.addFeatureTypeToStatsTable=function(n){for(var t=
this.statsDataTable,i=0;i<t.records.length;i++)t.records[i].push(n[i]);t.features.
push({featureType:"String",name:"Feature Type",elementType:"",index:t.features.length})}
,e}(DataLab.Util.Disposable);n.VisualizationViewModel=f})(t=n.Visualization||(n.
Visualization={}))}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||
function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&
(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(
t){var i=function(i){function r(n){i.call(this);this.precision=3;this.loaded=ko.
observable(!1);n&&this.initializeFromParsedJson(n)}return __extends(r,i),r.initializeFromEndpoint=
function(n,t,i,u){var f=new r;return DataLab.Util.then(u.getModuleOutput(n,t,i),
function(n){f.initializeFromParsedJson(n)}),f},r.prototype.initializeFromParsedJson=
function(i){var r=this,o;this.data=i;this.name=ko.observable(this.getReportName(
this.data.reportName));this.plotViewModel=new t.PlotViewModel(this.data,this.name(
));this.threshold=ko.observable(.5);var u=this.data.chart!==undefined?this.data.
chart:this.data.charts[0],f=u.auc.roc!==undefined?u.auc.roc:u.auc,e=u.min!==undefined?
u.min:0,s=u.max!==undefined?u.max:1;this.rawThreshold=ko.computed(function(){var
t=e+r.threshold()*(s-e);return t.toFixed?n.Visualization.reduceToFixedPrecision(
t,r.precision):t});this.confusionMatrixViewModel=ko.computed(function(){var n=r.
getBucket(u,r.rawThreshold());return new t.TableViewModel([[n.confusionMatrix.tp.
toString(),n.confusionMatrix.fn.toString()],[n.confusionMatrix.fp.toString(),n.confusionMatrix.
tn.toString()]])});this.precisionRecallViewModel=ko.computed(function(){var n=r.
getBucket(u,r.rawThreshold());return new t.TableViewModel([[n.accuracy.toFixed(r.
precision),n.precision.toFixed(r.precision)],[n.recall.toFixed(r.precision),n.f1.
toFixed(r.precision)]])});this.binDataViewModel=this.initializeBinData(u.coarseData);
o=f.toFixed?f.toFixed(this.precision):f.toString();this.auc=ko.observable(o);this.
positiveLabel=ko.observable(u.positiveLabel);this.negativeLabel=ko.observable(u.
negativeLabel);this.currentCmData=ko.observable();this.setCurrentCmData=function(
n){r.currentCmData(n)};this.threshold.subscribe(function(){DataLab.Log.customEvent(
{key:"ThresholdChanged",type:"Visualize",data:r.threshold()});r.threshold()>1?r.
threshold(1):r.threshold()<0&&r.threshold(0)});this.loaded(!0)},r.prototype.getReportName=
function(n){return n==="Scored dataset"||n==="scoredData"?DataLab.LocalizedResources.
binaryClassificationScoredDataset:n==="Scored dataset to compare"||n==="scoredDataToCompare"?
DataLab.LocalizedResources.binaryClassificationScoredDatasetToCompare:DataLab.LocalizedResources.
binaryClassificationScoredDatasetDefault},r.prototype.getBucket=function(n,t){var
i=this.getIndex(n,t);return n.data[i]},r.prototype.getIndex=function(n,t){for(var
f,r=n.data,e=r.length,u=0,i=0;i<e;i++)if(f=r[i].probability,f<t)u=i;else break;return u}
,r.prototype.initializeBinData=function(n){var r=this,u=[],i=DataLab.LocalizedResources,
f=[i.binaryClassificationScoreBin,i.binaryClassificationNumberOfPositiveExamples,
i.binaryClassificationNumberOfNegativeExamples,i.binaryClassificationFractionAboveThreshold,
i.binaryClassificationAccuracy,i.binaryClassificationF1Score,i.binaryClassificationPrecision,
i.binaryClassificationRecall,i.binaryClassificationNegativePrecision,i.binaryClassificationNegativeRecall,
i.binaryClassificationCumulativeAuc];return n=n.sort(function(n,t){return t.BinStart-
n.BinStart}),DataLab.Util.forEach(n,function(n){var t=[],i;t.push("("+n.BinStart.
toFixed(3)+","+n.BinEnd.toFixed(r.precision)+"]");t.push(n.numPos);t.push(n.numNeg);
i=(n.tp+n.fp)/(n.tp+n.fp+n.fn+n.tn);t.push(i.toFixed(r.precision));t.push(n.accuracy.
toFixed(r.precision));t.push(n.f1.toFixed(r.precision));t.push(n.precision.toFixed(
r.precision));t.push(n.recall.toFixed(r.precision));t.push(n.negPrecision.toFixed(
r.precision));t.push(n.negRecall.toFixed(r.precision));t.push(n.AUC.toFixed(r.precision));
u.push(t)}),new t.TableViewModel(u,f)},r}(DataLab.Util.Disposable);t.BinaryClassificationUXViewModel=
i})(t=n.CustomUX||(n.CustomUX={}))}(ExperimentEditor||(ExperimentEditor={}));__extends=
this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(
i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(
n){function i(n){return $(n).children(":gt(0)")}function u(n){var r=$(n).find("ul li a"),
t=i(n);t.uniqueId();t.each(function(n,t){var i=$(t).attr("id"),u=r.get(n);$(u).attr(
"href","#"+i)})}var t=function(){function n(n,t){var i=this;this.isEnabled=n;this.
isDisabledTooltip=t;this.isEnabled=n?n:ko.observable(!0);this.isDisabled=ko.computed(
function(){return!i.isEnabled()});this.isDisabledTooltip=t?t:ko.observable("")}return n}
(),f,r;n.Disableable=t,function(n){function t(n){var t=n.filter(function(n){return n.
isDisabled()});return t.map(function(n,t){return t})}function i(n){var t,i=n.some(
function(n,i){if(n.isEnabled())return t=i,!0});if(!i)throw new Error("At least one item must be enabled.");
return t}n.getDisabledIndices=t;n.getFirstEnabledIndex=i}(t=n.Disableable||(n.Disableable=
{}));f=function(n){function t(t,i,r,u,f){n.call(this,u,f);this.markup=t;this.viewModel=
i;this.title=r}return __extends(t,n),t}(t);n.TabView=f;r=function(){function n()
{var n=this;this.activeTabView=ko.observable();this.onTabActivated=function(t,i)
{n.activeTabView(i)};this.heading=ko.computed(function(){var i=n.activeTabView(),
t;return i&&(t=i.viewModel,t.heading&&t.heading())?t.heading():null})}return n}(
);n.JQueryTabsContainer=r;ko.bindingHandlers.jQueryTabs={init:function(n,f,e,o,s)
{var l=f()||{},c,h;return ko.applyBindingsToDescendants(s,n),c=l.views(),u(n),h=
Object.create(l),l.onTabActivated&&(h.activate=function(t,r){var u=i(n).index(r.
oldPanel),f=i(n).index(r.newPanel);l.onTabActivated(c[u],c[f])}),delete h.views,
delete h.onTabActivated,h.disabled=t.getDisabledIndices(c),h.active=t.getFirstEnabledIndex(
c),o instanceof r&&o.activeTabView(c[h.active]),$(n).jQueryUITabs(h),{controlsDescendantBindings:
!0}},update:function(n,i){var r=i()||{},f=r.views(),e=t.getDisabledIndices(f);setTimeout(
function(){u(n);$(n).jQueryUITabs("refresh");$(n).jQueryUITabs("option","disabled",
e)},0)}}})(t=n.JQueryTabs||(n.JQueryTabs={}))}(ExperimentEditor||(ExperimentEditor=
{}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t;(function(t){function r(n){var i=$(document.activeElement).
is('input[type="text"]:focus, textarea:focus')&&!$(document.activeElement).attr(
"readonly");if(n.keyCode!==8||i){if(n.keyCode===27)return t.close()}else return n.
preventDefault()}function e(r,f,e,o,s,h,c,l){var a,v,y,p,w,b;if(e===void 0&&(e="100%"),
o===void 0&&(o="100%"),c===void 0&&(c=!0),l===void 0&&(l=""),v=[new n.JQueryTabs.
TabView(r,f,null)],i={views:v,onCloseAction:s},y=new DataLab.Util.DisposableEventListener(
document,"keydown",function(n){var i=$(document.activeElement).is('input[type="text"]:focus, textarea:focus')&&
!$(document.activeElement).attr("readonly");if(n.keyCode!==8||i){if(n.keyCode===
27)return t.close()}else return n.preventDefault()}),f.registerForDisposal(y),$(
".customUX").removeClass("hidden"),h!=null?(p=ExperimentEditorTemplates._customUXContainerMarkup,
w=new u(o,e,null,h),$(".customUX").append(p),b=document.querySelector(".customUX .customUXWindow"),
ko.applyBindings(w,b),$(".customUXWindow").append("<div class='visualizationContentWrapper'>"+
r+"<\/div>"),a=document.querySelector(".customUX .visualizationContentWrapper")):
($(".customUX").append("<div class='customUXWindow "+l+"' style='height: "+e+"; width: "+
o+"'><\/div>"),c&&$(".customUXWindow").append("<div class='icon close'><\/div>"),
$(".customUXWindow").append("<div class='customUXWindowContentWrapper'>"+r+"<\/div>"),
a=document.querySelector(".customUX .customUXWindow")),c){$(".customUXWindow .icon.close").
off("mousedown");$(".customUXWindow .icon.close").on("mousedown",function(){t.close(
)});$(".customUXWindow .dlwux-fx-dialog-ok").off("mousedown");$(".customUXWindow .dlwux-fx-dialog-ok").
one("mousedown",function(){t.close()})}ko.applyBindings(f,a);f.initialize&&f.initialize(
);t.isOpen(!0)}function o(n,f,e,o,s){var h,c,l;if(f===void 0&&(f="100%"),e===void
0&&(e="100%"),i)throw new Error("CustomUX is already open");i={views:n,onCloseAction:
o};$(document).on("keydown",r);$(".customUX").removeClass("hidden");h=ExperimentEditorTemplates.
_customUXTabsContainerMarkup;c=new u(e,f,n,s);$(".customUX").append(h);l=document.
querySelector(".customUX .customUXWindow");ko.applyBindings(c,l);t.isOpen(!0)}function s(
){var n=document.querySelector(".customUX .customUXWindow");if(i){if(i.onCloseAction&&
i.onCloseAction())return;i.views.forEach(function(n){n.viewModel.dispose&&n.viewModel.
dispose()});i=null}$(document).off("keydown",r);$(".customUXWindow .icon.close").
off("mousedown");$(".customUX").addClass("hidden");n&&($(n).remove(),ko.cleanNode(
n));t.isOpen(!1)}var f,i,u;t.isOpen=ko.observable(!1);f=function(n){function t(t,
i,r,u,f){n.call(this,t,i,r,u,f);this.markup=t;this.viewModel=i;this.title=r}return __extends(
t,n),t}(n.JQueryTabs.TabView);t.CustomUXView=f;i=null;t.handleKeyDown=r;t.open=e;
t.openMultipleViews=o;t.close=s;u=function(n){function i(t,i,r,u){n.call(this);this.
width=ko.observable(t);this.height=ko.observable(i);this.views=ko.observableArray(
r);this.breadcrumbHeader=ko.observable(u);this.showBreadcrumbHeader=ko.observable(
typeof u!="undefined")}return __extends(i,n),i.prototype.onClose=function(){t.close(
)},i}(n.JQueryTabs.JQueryTabsContainer)})(t=n.CustomUX||(n.CustomUX={}))}(ExperimentEditor||
(ExperimentEditor={})),function(n){function t(t,i){var r=$.Deferred(),u={title:t,
text:i,dismissed:function(n){n.accepted?r.resolve():r.reject()}};return n.DialogViews.
Confirmation.show(u),DataLab.Util.when(r.promise())}n.auxConfirm=t}(ExperimentEditor||
(ExperimentEditor={})),function(n){var t;(function(n){var i,r,u,f,e,o,s,h,t,c,l,
a,v;(function(n){n.Module="module";n.Dataset="dataset";n.TrainedModel="trainedmodel";
n.Transform="transform";n.Connection="connection";n.InputPort="inputport";n.OutputPort=
"outputport";n.Entity="entity";n.WebServicePort="web service port"})(i=n.EntityType||
(n.EntityType={})),function(n){n[n.Left=0]="Left";n[n.Center=1]="Center";n[n.Right=
2]="Right"}(n.MouseButton||(n.MouseButton={}));r=n.MouseButton,function(n){n[n.Gecko=
0]="Gecko";n[n.Webkit=1]="Webkit";n[n.IE9=2]="IE9";n[n.IE10=3]="IE10";n[n.IE11=4]=
"IE11";n[n.Edge=5]="Edge";n[n.Unknown=6]="Unknown"}(n.Browser||(n.Browser={}));u=
n.Browser;n.CurrentBrowser;n.CurrentBrowser=/MSIE 9/.test(navigator.userAgent)?2:
/MSIE 10/.test(navigator.userAgent)?3:/Trident/.test(navigator.userAgent)&&/rv:11/.
test(navigator.userAgent)?4:/Edge/.test(navigator.userAgent)?5:/AppleWebKit/.test(
navigator.userAgent)?1:/Gecko/.test(navigator.userAgent)&&!/Trident/.test(navigator.
userAgent)?0:6;n.errorHelpLinkGuidStart="60822377-DA7A-40B8-";n.errorHelpLinkGuidEnd=
"-D185D1509344";n.saveAsHelpLinkGuid="e548ed9d-064b-42fd-a1b7-4c34eccb88f8";n.rScriptEditorFocusWidth=
600;n.rScriptEditorFocusHeight=400,function(t){t[t.Escape=27]="Escape";t[t.A=65]=
"A";t[t.Delete=46]="Delete";t[t.Minus=n.CurrentBrowser===0?173:189]="Minus";t[t.
KeypadMinus=109]="KeypadMinus";t[t.Equals=n.CurrentBrowser===0?61:187]="Equals";
t[t.KeypadPlus=107]="KeypadPlus";t[t.Zero=48]="Zero";t[t.KeypadZero=96]="KeypadZero";
t[t.Nine=57]="Nine";t[t.KeypadNine=105]="KeypadNine";t[t.C=67]="C";t[t.M=77]="M";
t[t.S=83]="S";t[t.V=86]="V";t[t.X=88]="X";t[t.F2=113]="F2";t[t.Return=13]="Return";
t[t.SpaceBar=32]="SpaceBar";t[t.F1=112]="F1";t[t.Tab=9]="Tab"}(n.Key||(n.Key={})
);f=n.Key,function(n){n.Height=20}(e=n.ContextMenuItem||(n.ContextMenuItem={})),
function(n){n.DefaultWidth=140}(o=n.ContextMenu||(n.ContextMenu={})),function(n)
{n.zoomToFitPadding=40}(s=n.Layout||(n.Layout={}));n.RectWidth=280;n.RectHeight=
50,function(n){n.Height=24;n.Width=24;n.XOffset=10}(h=n.Icon||(n.Icon={})),function(
n){n.Width=10;n.HalfWidth=n.Width/2;n.Height=5;n.HalfHeight=n.Height/2;n.InYPos=
6;n.OutYPos=16;n.Offset=12}(t=n.Port||(n.Port={})),function(n){n.InPortYPos=10;n.
OutPortYPos=-10;n.PortOffset=12;n.MaxSize=18;n.ReducedLength=15;n.ModuleBuffer=25;
n.ModuleXOffset=45;n.ModuleYOffset=15;n.RectYOffset=3;n.MaxWidth=186;n.Height=15}
(c=n.Label||(n.Label={})),function(n){n.RectXOffset=-5;n.RectYOffset=-2;n.WidthOffset=
23;n.HeightOffset=5;n.PortYOffset=4;n.RectClass="tooltipRect";n.Class="staticText";
n.XPos="0"}(l=n.Tooltip||(n.Tooltip={})),function(n){n.SplinePointMax=t.Height*15;
n.SplinePointMin=t.Height*3}(a=n.Connector||(n.Connector={})),function(n){n.Experiment=
"experiment";n.WebService="webservice"}(v=n.ExperimentDataFlowType||(n.ExperimentDataFlowType=
{}));n.maxModulePackageUploadSizeInBytes=2093796557;n.maxModulePackageUploadSizeDescription=
"1.95 gigabytes";n.maxUploadSizeInBytes=2093796557;n.maxUploadSizeInBytesNew=21474836480;
n.maxUploadSizeDescription="1.95 gigabytes";n.maxUploadSizeDescriptionNew="20 gigabytes"}
)(t=n.Constants||(n.Constants={}))}(ExperimentEditor||(ExperimentEditor={})),function(
n){var t;(function(n){function t(){DataLab.Util.initializeTemplateIfNecessary("datalab-contextMenuTemplate",
ExperimentEditorTemplates._menuMarkup)}function i(t,i){var r={menu:null,of:null,
zIndex:0},u,f;if(!t)throw new Error("menu is undefined or null.");if(r.menu=t,r.
menu.items().length==0)return!1;r.of=i;r.zIndex=2e3;u=$("<div><\/div>").appendTo(
"body");ko.renderTemplate("datalab-contextMenuTemplate",r,null,u,"replaceNode");
f={my:"left top",at:"right bottom",of:i,offset:"0 0",collision:"fit fit"};$(".datalab-contextMenu").
position(f);n.menuIsOpen=!0}n.menuIsOpen;n.targetViewModel=null;n.initialize=t;n.
removeContextMenu=function(){n.menuIsOpen&&($(".datalab-contextMenu").remove(),n.
menuIsOpen=!1)};n.spawnMenu=i})(t=n.MenuControl||(n.MenuControl={}));t.initialize(
)}(ExperimentEditor||(ExperimentEditor={})),function(n){var t=function(){function t(
t,i,r){var u=this;this.menuItem={label:ko.observable(t.label||""),divider:ko.observable(
t.divider||!1),iconClass:ko.observable(t.iconClass||""),enabledTooltip:ko.observable(
t.enabledTooltip||""),disabledTooltip:ko.observable(t.disabledTooltip||""),command:
t.command,items:ko.observableArray(t.items||[]),subMenuTargetViewModel:ko.observable(
t.subMenuTargetViewModel)};this.parentMenu=r;this.targetViewModel=i;this.onSubMenuDisplayed=
$.noop;t.items&&t.items.length>0?(this.subMenu=new n.MenuViewModel({items:t.items},
t.subMenuTargetViewModel||i,r),t.subMenuTargetViewModel instanceof n.OutputPort&&
(this.onSubMenuDisplayed=function(n){t.subMenuTargetViewModel.highlighted(n)})):
this.subMenu=null;this.onMouseDown=function(n,t){t.preventDefault();t.stopPropagation(
)};this.onActivated=function(t,i){i.preventDefault();i.stopPropagation();u.enabled(
)&&u.menuItem.command&&(n.MenuControl.removeContextMenu(),u.menuItem.command.execute(
u.targetViewModel))};this.enabled=ko.computed(function(){return u.subMenu!==null||
u.menuItem.command&&u.menuItem.command.canExecute()})}return t}();n.MenuItemViewModel=
t}(ExperimentEditor||(ExperimentEditor={})),function(n){var t=function(){function t(
t,i,r){var u,f;if(r===void 0&&(r=null),!t)throw new Error("menuData cannot be null.");
for(this.classId=ko.observable("datalab-contextMenu"),this.items=ko.observableArray(
),this.targetViewModel=i,this.parentMenu=r,this.items([]),u=0;u<t.items.length;++u)
f=t.items[u],this.items.push(new n.MenuItemViewModel(f,this.targetViewModel,this))}
return t.prototype.contextMenuMouseUp=function(n,t){t.preventDefault()},t}();n.MenuViewModel=
t}(ExperimentEditor||(ExperimentEditor={})),function(n){n.EntityTypes={};n.EntityTypes[
0]=n.Constants.EntityType.Entity;n.EntityTypes[1]=n.Constants.EntityType.Module;
n.EntityTypes[2]=n.Constants.EntityType.Dataset;n.EntityTypes[3]=n.Constants.EntityType.
InputPort;n.EntityTypes[4]=n.Constants.EntityType.OutputPort;n.EntityTypes[5]=n.
Constants.EntityType.Connection;n.EntityTypes[6]=n.Constants.EntityType.TrainedModel;
n.EntityTypes[7]=n.Constants.EntityType.WebServicePort;n.EntityTypes[n.Constants.
EntityType.Entity]=0;n.EntityTypes[n.Constants.EntityType.Module]=1;n.EntityTypes[
n.Constants.EntityType.Dataset]=2;n.EntityTypes[n.Constants.EntityType.InputPort]=
3;n.EntityTypes[n.Constants.EntityType.OutputPort]=4;n.EntityTypes[n.Constants.EntityType.
Connection]=5;n.EntityTypes[n.Constants.EntityType.TrainedModel]=6;n.EntityTypes[
n.Constants.EntityType.WebServicePort]=7;var t=function(){function t(n){this.type=
n;this.labelTimerDelay=250;this.selected=ko.observable(!1);this.hovered=ko.observable(
!1);this.showFullLabel=ko.observable(!1);this.isTruncated=ko.observable(!1);this.
labelWidth=ko.observable(0);this.labelHeight=ko.observable(0);this.belongsToExperimentFlow=
ko.observable(!0);this.belongsToWebServiceFlow=ko.observable(!1)}return t.prototype.
remove=function(){},Object.defineProperty(t.prototype,"x",{get:function(){throw"abstract property 'x' must be overriden";
},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(
){throw"abstract property 'y' must be overriden";},enumerable:!0,configurable:!0}),
Object.defineProperty(t.prototype,"width",{get:function(){throw"abstract property 'width' must be overriden";
},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:
function(){throw"abstract property 'width' must be overriden";},enumerable:!0,configurable:
!0}),t.prototype.getType=function(){return this.type},t.prototype.hit=function()
{return!1},t.prototype.translate=function(n,t){this.x(this.x()+n);this.y(this.y(
)+t)},t.prototype.isModule=function(){return this.type==n.EntityTypes[n.Constants.
EntityType.Module]},t.prototype.isData=function(){return this.type==n.EntityTypes[
n.Constants.EntityType.Dataset]},t.prototype.isTrainedModel=function(){return this.
type==n.EntityTypes[n.Constants.EntityType.TrainedModel]},t.prototype.isTransform=
function(){return this.type==n.EntityTypes[n.Constants.EntityType.Transform]},t.
prototype.isConnection=function(){return this.type==n.EntityTypes[n.Constants.EntityType.
Connection]},t.prototype.entityAtPoint=function(){return null},t.prototype.containsPoint=
function(){return!1},t.prototype.showLabel=function(){var n=this;this.labelTimer=
setTimeout(function(){n.showFullLabel(!0)},this.labelTimerDelay)},t.prototype.hideLabel=
function(){this.labelTimer&&clearTimeout(this.labelTimer);this.showFullLabel(!1)}
,t.prototype.onMouseIn=function(){this.hovered(!0)},t.prototype.onMouseOut=function(
){this.hovered(!1)},t.prototype.startValidating=function(){},t.prototype.updateValidState=
function(){},t.prototype.belongsToCurrentFlow=function(t){return t===n.Constants.
ExperimentDataFlowType.Experiment?this.belongsToExperimentFlow():this.belongsToWebServiceFlow(
)},t.prototype.getClassId=function(t){return this.belongsToCurrentFlow(t)?t===n.
Constants.ExperimentDataFlowType.Experiment?this.classId():this.classId()+" blueStroke":
t===n.Constants.ExperimentDataFlowType.Experiment?this.classId()+" disabledFlow blueStroke":
this.classId()+" disabledFlow"},t}();n.Entity=t;ko.bindingHandlers.truncatedText=
{init:function(n,t){var i=ko.utils.unwrapObservable(t()),r=ko.utils.unwrapObservable(
i.label);n.textContent=r},update:function(n,t,i,r){var s=ko.utils.unwrapObservable(
t()),h=ko.utils.unwrapObservable(s.label),c=ko.utils.unwrapObservable(s.maxWidth),
o;if(n.textContent=h,n.getComputedTextLength()<c)n.textContent=h,r.isTruncated(!1)
else{for(var l=n.textContent,f=0,e=l.length,u=(f+e)/2;f<u;)n.textContent=l.substring(
0,u)+"...",n.getComputedTextLength()>=c?e=u:f=u,u=Math.floor((f+e)/2);r.isTruncated(
!0)}o=$(n).closest("text")[0];r.labelHeight(o.getBBox().height);r.labelWidth(o.getBBox(
).width)}};ko.bindingHandlers.portTextLabel={init:function(t,i){var r=document.createElementNS(
"http://www.w3.org/2000/svg","rect"),f=document.createElementNS("http://www.w3.org/2000/svg",
"text"),u=null,e=ko.utils.unwrapObservable(i());r.setAttribute("class",n.Constants.
Tooltip.RectClass);t.setAttribute("class","portTextLabel");t.appendChild(r);t.appendChild(
f);e.noIcon||(u=document.createElementNS("http://www.w3.org/2000/svg","image"),t.
appendChild(u))},update:function(t,i){var e=ko.utils.unwrapObservable(i()),h=e.label,
o=e.model,f=$(t).children("rect")[0],r=$(t).children("text")[0],u=$(t).children(
"image")[0],s;r.textContent=h;r.setAttribute("class",n.Constants.Tooltip.Class);
r.setAttribute("x",(n.Constants.Tooltip.RectXOffset+21).toString());r.setAttribute(
"y",(n.Constants.Tooltip.RectYOffset+16).toString());f.setAttribute("width",(r.getBBox(
).width+n.Constants.Tooltip.WidthOffset).toString());f.setAttribute("height",(r.
getBBox().height+n.Constants.Tooltip.HeightOffset).toString());f.setAttribute("x",
n.Constants.Tooltip.RectXOffset.toString());f.setAttribute("y",n.Constants.Tooltip.
RectYOffset.toString());u&&(s=o.parent.isData()?"/Libraries/Images/arrow_label_32.svg":
o.parent.isTrainedModel()?"/Libraries/Images/TM_output_flask_32.svg":"/Libraries/Images/ArrowLabel.png",
u.setAttributeNS("http://www.w3.org/1999/xlink","href",s),u.setAttribute("width",
"32"),u.setAttribute("height","32"),u.setAttribute("x",(n.Constants.Tooltip.RectXOffset-
12).toString()),u.setAttribute("y",(n.Constants.Tooltip.RectYOffset-4).toString(
)))}};ko.bindingHandlers.anchorTransform={init:function(){},update:function(t,i)
{var r=ko.utils.unwrapObservable(i()),u=ko.utils.unwrapObservable(r.x),f=ko.utils.
unwrapObservable(r.y),e="translate("+u+","+(f-n.Constants.Tooltip.RectYOffset)+")";
t.setAttribute("transform",e)}};ko.bindingHandlers.portTooltipTransform={init:function(
){},update:function(n,t){var i=ko.utils.unwrapObservable(t()),f=ko.utils.unwrapObservable(
i.x),e=ko.utils.unwrapObservable(i.y),o=i.name,r=$(n).children("text")[0],s=r.textContent,
u;r.textContent=o;r.textContent=s;u="translate("+f+","+e+")";n.setAttribute("transform",
u)}}}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(
n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[
i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(
i,r){var u=this;t.call(this,n.EntityTypes[n.Constants.EntityType.Connection]);this.
inputPort=i;this.outputPort=r;this.ix=ko.computed(function(){return this.inputPort.
x()+n.Constants.Port.HalfWidth},this);this.iy=ko.computed(function(){return this.
inputPort.y()},this);this.ox=ko.computed(function(){return this.outputPort.x()+n.
Constants.Port.HalfWidth},this);this.oy=ko.computed(function(){return this.outputPort.
y()+n.Constants.Port.Height},this);this.controlPointDistance=ko.computed(function(
){return Math.min(n.Constants.Connector.SplinePointMax,Math.max(n.Constants.Connector.
SplinePointMin,Math.abs((this.inputPort.y()-(this.outputPort.y()+n.Constants.Port.
Height))/2)))},this);this.path=ko.computed(function(){return"M"+(this.inputPort.
x()+n.Constants.Port.HalfWidth-1)+","+this.inputPort.y()+"C "+(this.inputPort.x(
)+n.Constants.Port.HalfWidth-1)+","+(this.inputPort.y()-this.controlPointDistance(
))+","+(this.outputPort.x()+n.Constants.Port.HalfWidth-1)+","+(this.outputPort.y(
)+n.Constants.Port.Height+this.controlPointDistance())+","+(this.outputPort.x()+
n.Constants.Port.HalfWidth-1)+","+(this.outputPort.y()+n.Constants.Port.Height)}
,this);this.classId=ko.computed(function(){var n="";return this.inputPort.portModel.
connectionIsInCycle()&&(n+="error "),n+(this.selected()?"selectedConnection":"defaultConnection")}
,this);this.hidden=ko.observable(!1);this.selected.subscribe(function(n){n&&u.inputPort.
classId()==="port connectedPort"?(u.inputPort.portState(DataLab.Model.Constants.
PortState.Selected),u.outputPort.portState(DataLab.Model.Constants.PortState.Selected)):
(u.inputPort.portState(DataLab.Model.Constants.PortState.Default),u.outputPort.portState(
DataLab.Model.Constants.PortState.Default))});this.belongsToExperimentFlow=ko.computed(
function(){return u.inputPort.parent.belongsToExperimentFlow()&&u.outputPort.parent.
belongsToExperimentFlow()});this.belongsToWebServiceFlow=ko.computed(function(){
return u.inputPort.parent.belongsToWebServiceFlow()&&u.outputPort.parent.belongsToWebServiceFlow(
)})}return __extends(i,t),i.createFromPorts=function(t,r){if(t instanceof n.InputPort&&
r instanceof n.OutputPort)return new i(t,r);if(t instanceof n.OutputPort&&r instanceof
n.InputPort)return new i(r,t);throw"Expected one InputPort and one OutputPort";}
,Object.defineProperty(i.prototype,"key",{get:function(){return i.getConnectionKeyForPorts(
this.inputPort,this.outputPort)},enumerable:!0,configurable:!0}),i.getConnectionKeyForPorts=
function(n,t){return DataLab.Util.tuple(n.portModel,t.portModel).id},Object.defineProperty(
i.prototype,"x",{get:function(){return this.inputPort.x},enumerable:!0,configurable:
!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this.inputPort.
y},enumerable:!0,configurable:!0}),i.prototype.remove=function(){t.prototype.remove.
call(this);this.inputPort.portModel.disconnectFrom(this.outputPort.portModel)},i.
prototype.hit=function(n,t,i,r){var u={x:this.inputPort.x(),y:this.inputPort.y()},
f={x:this.outputPort.x(),y:this.outputPort.y()};return u.x>=n&&f.x<=i&&u.y>=t&&f.
y<=r&&f.x>=n&&u.x<=i&&f.y>=t&&u.y<=r?!0:!1},i}(n.Entity);n.Connection=t}(ExperimentEditor||
(ExperimentEditor={}));__extends=this.__extends||function(n,t){function r(){this.
constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;
n.prototype=new r},function(n){var t=function(t){function i(i,r,u){var f=this,e,
o;if(t.call(this,u),this.connections=ko.observableArray(),this.portState=ko.observable(
DataLab.Model.Constants.PortState.Default),this.hostRelativeX=ko.observable(0),this.
hostRelativeY=ko.observable(0),!i)throw"'parent' parameter is required";if(!r)throw"'portModel' parameter is required";
for(this.portModel=r,this._parent=i,this.balloonMessage=ko.observable(null),this.
portTypes="",e=0;e<this.portModel.descriptor.allowedDataTypes.length;e++)o=this.
portModel.descriptor.allowedDataTypes[e],this.portTypes+=o.toString(),e<this.portModel.
descriptor.allowedDataTypes.length-1&&(this.portTypes+=", ");this.classId=ko.computed(
function(){switch(this.portState()){case DataLab.Model.Constants.PortState.Compatible:
return DataLab.Model.Constants.PortClass+" "+DataLab.Model.Constants.PortState.Compatible
case DataLab.Model.Constants.PortState.Incompatible:return DataLab.Model.Constants.
PortClass+" "+DataLab.Model.Constants.PortState.Incompatible;case DataLab.Model.
Constants.PortState.Default:return this.portModel.isConnected()?DataLab.Model.Constants.
PortClass+" "+DataLab.Model.Constants.PortState.Connected:DataLab.Model.Constants.
PortClass+" "+DataLab.Model.Constants.PortState.Default;case DataLab.Model.Constants.
PortState.Replaceable:return DataLab.Model.Constants.PortClass+" "+DataLab.Model.
Constants.PortState.Replaceable;case DataLab.Model.Constants.PortState.Selected:
return DataLab.Model.Constants.PortClass+" "+DataLab.Model.Constants.PortState.Selected
default:throw"Unknown port compatibility type";}},this);this._x=ko.computed(function(
){return f.parent.x()+f.hostRelativeX()});this._y=ko.computed(function(){return f.
parent.y()+f.hostRelativeY()});this.labelPosX=ko.computed(function(){return f.x(
)+n.Constants.Port.HalfWidth});this.translation=ko.computed(function(){return"translate("+
f.x()+","+f.y()+")"});this.labelMaxWidth=ko.observable(Number.POSITIVE_INFINITY);
this.labelYOffset=ko.observable(0);this.labelPosY=ko.computed(function(){return f.
y()-n.Constants.Label.InPortYPos});this.tooltipPosX=ko.computed(function(){return f.
labelPosX()});this.tooltipPosY=ko.computed(function(){return f.labelPosY()});this.
tooltipBoxPosX=ko.computed(function(){return f.tooltipPosX()-f.labelWidth()/2});
this.infoIcon="/Libraries/Images/ArrowLabel.png";this.belongsToExperimentFlow=ko.
computed(function(){return f.connections().length?f.connections().some(function(
n){return n.belongsToExperimentFlow()}):f.parent.belongsToExperimentFlow()});this.
belongsToWebServiceFlow=ko.computed(function(){return f.connections().length?f.connections(
).some(function(n){return n.belongsToWebServiceFlow()}):f.parent.belongsToWebServiceFlow(
)})}return __extends(i,t),Object.defineProperty(i.prototype,"x",{get:function(){
return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,
"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(
i.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:
!0}),i.prototype.getCX=function(){return this.x()+n.Constants.Port.HalfWidth},i.
prototype.getCY=function(){return this.y()},i.prototype.entityAtPoint=function(n,
t){return this.containsPoint(n,t)?this:null},i.prototype.containsPoint=function(
t,i){var r=this.x(),u=this.y();return t>=r&&t<=r+n.Constants.Port.HalfWidth*2&&i>=
u&&i<=u+n.Constants.Port.Height},i.prototype.addConnection=function(n){this.connections(
).indexOf(n)<0&&this.connections.push(n)},i.prototype.removeConnection=function(
n){var t=this.connections().indexOf(n);t>=0&&this.connections.remove(n)},i.prototype.
getClassId=function(i){var r=t.prototype.getClassId.call(this,i);return this.belongsToCurrentFlow(
i)&&i!==n.Constants.ExperimentDataFlowType.Experiment?r+" whiteFill":this.belongsToCurrentFlow(
i)||i!==n.Constants.ExperimentDataFlowType.Experiment?r:r+" whiteFill"},i}(n.Entity),
i,r;n.PortViewModel=t;i=function(t){function i(i,r){var u=this;t.call(this,i,r,n.
EntityTypes[n.Constants.EntityType.InputPort]);this.labelPosY=ko.computed(function(
){return u.y()-n.Constants.Label.InPortYPos-u.labelYOffset()})}return __extends(
i,t),i}(t);n.InputPort=i;r=function(t){function i(i,r){t.call(this,i,r,n.EntityTypes[
n.Constants.EntityType.OutputPort]);this.labelPosY=ko.computed(function(){return this.
y()+n.Constants.Label.OutPortYPos+this.labelYOffset()},this);this.highlighted=ko.
observable(!1)}return __extends(i,t),i.prototype.getCY=function(){return this.y(
)+n.Constants.Port.Height},i}(t);n.OutputPort=r}(ExperimentEditor||(ExperimentEditor=
{}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var r=DataLab.Model,t,i,u;(function(n){n.XOffset=200;n.YOffset=
40;n.GraphNodeYOffset=45-n.YOffset;n.WidthBuffer=17;n.HeightOffset=45;n.LineHeight=
20;n.MaxLinesToShow=3})(t=n.Comments||(n.Comments={})),function(n){n.Rate=75;n.Trigger=
3}(i=n.Growth||(n.Growth={}));u=function(u){function f(i,f){var e=this,o,s;if(u.
call(this,f),this.portState=ko.observable(DataLab.Model.Constants.PortState.Default),
this.iconClass="",!i)throw"'graphNode' parameter is required to be non-null";this.
graphNode=i;this.valid=ko.observable(!0);this.labelPosX=ko.computed(function(){return e.
x()+n.Constants.Label.ModuleXOffset});this.labelPosY=ko.computed(function(){return e.
y()+n.Constants.Label.ModuleYOffset});this.forceBalloon=new ko.subscribable;this.
graphNode.height(n.Constants.RectHeight);this.ports={};this.inputPorts={};this.outputPorts=
{};DataLab.Util.forEach(this.graphNode.ports,function(t){var i;if(t instanceof r.
InputPort)i=e.inputPorts[t.name]=new n.InputPort(e,t);else if(t instanceof r.OutputPort)
i=e.outputPorts[t.name]=new n.OutputPort(e,t);else throw"Unknown port type";e.ports[
t.name]=i});this.statusIconURL=ko.computed(function(){return"/Content/Images/icon-none.svg"}
);Object.freeze(this.ports);Object.freeze(this.inputPorts);Object.freeze(this.outputPorts);
this.relayout();this.labelMaxWidth=n.Constants.Label.MaxWidth;this.tooltipPosX=ko.
computed(function(){return e.labelPosX()});this.tooltipPosY=ko.computed(function(
){return e.labelPosY()-n.Constants.Tooltip.RectYOffset});this.hasComment=ko.computed(
function(){return e.graphNode.comment()!==""});this.commentPosX=ko.computed(function(
){var n=e.labelPosX();return n+"px"});this.commentPosY=ko.computed(function(){var
i=e.labelPosY()+n.Constants.Label.Height+t.GraphNodeYOffset;return i+"px"});this.
commentWidth=ko.computed(function(){return e.width()-n.Constants.Label.ModuleXOffset*
2+"px"});this.linesToShow=ko.computed(function(){var i,r;if(e.graphNode.commentCollapsed(
))return 0;for(i=1;i<=t.MaxLinesToShow&&e.commentLargerThanDiv(t.LineHeight*(i-1)
,e.comment());)i=i+1;return r=DataLab.Util.values(e.outputPorts),e.graphNode.height(
n.Constants.RectHeight+t.LineHeight*(i-1)),e.relayoutPorts(r,e.width(),e.height(
)),i-1});this.commentCollapsedExpandedIconURL=ko.computed(function(){return e.graphNode.
commentCollapsed()?"/Libraries/Images/icon-chevron-collapsed.svg":"/Libraries/Images/icon-chevron-expanded.svg"}
);o=n.GetIconSymbol("icon-properties_chevron_collapsed");s=n.GetIconSymbol("icon-properties_chevron_expanded");
this.commentCollapsedExpandedIconSymbol=ko.computed(function(){return e.graphNode.
commentCollapsed()?o:s});this.showHideComment=function(){var i=DataLab.Util.values(
e.outputPorts);e.graphNode.commentCollapsed(!e.graphNode.commentCollapsed());e.graphNode.
height(n.Constants.RectHeight+t.LineHeight*e.linesToShow());e.relayoutPorts(i,e.
width(),e.height())};this.commentToShow=ko.computed(function(){if(!e.commentLargerThanDiv(
t.LineHeight*t.MaxLinesToShow,e.comment()))return e.graphNode.comment();for(var n=
0;!e.commentLargerThanDiv(t.LineHeight*t.MaxLinesToShow,e.comment().slice(0,n)+" ...");
)n=n+1;return e.comment().slice(0,n-1)+" ..."});this.editingComment=ko.observable(
!1);this.commentClass=ko.computed(function(){var n=e.graphNode.commentCollapsed(
)?" collapsed":"",t=e.selected()?" selected":"";return"comment"+n+t});this.iconPosX=
ko.computed(function(){return e.x()+n.Constants.Icon.XOffset});this.iconPosY=ko.
computed(function(){return e.y()+(n.Constants.RectHeight-n.Constants.Icon.Height)
/2});this.textClassId=ko.computed(function(){return"staticText"});this.icon="";this.
iconSymbol=""}return __extends(f,u),Object.defineProperty(f.prototype,"x",{get:function(
){return this.graphNode.x},enumerable:!0,configurable:!0}),Object.defineProperty(
f.prototype,"y",{get:function(){return this.graphNode.y},enumerable:!0,configurable:
!0}),Object.defineProperty(f.prototype,"width",{get:function(){return this.graphNode.
width},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"height",
{get:function(){return this.graphNode.height},enumerable:!0,configurable:!0}),Object.
defineProperty(f.prototype,"comment",{get:function(){return this.graphNode.comment}
,enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"balloonMessage",
{get:function(){return this.graphNode.balloonMessage},enumerable:!0,configurable:
!0}),Object.defineProperty(f.prototype,"label",{get:function(){throw"abstract property 'label' must be overriden";
},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"tooltip",{get:
function(){var n="";return n+=this.graphNode.name+". ",this.graphNode.description&&
(n+=(n!==""?"\n":"")+this.graphNode.description),n},enumerable:!0,configurable:!0}),
f.prototype.findClosestInputPort=function(n,t){return this.findClosestPort(this.
inputPorts,n,t)},f.prototype.findClosestOutputPort=function(n,t){return this.findClosestPort(
this.outputPorts,n,t)},f.prototype.remove=function(){u.prototype.remove.call(this);
this.graphNode.remove()},f.prototype.hit=function(n,t,i,r){var u={x:this.x(),y:this.
y()},f={x:this.x()+this.width(),y:this.y()+this.height()};return u.x<n?!1:u.y<t?
!1:f.x>i?!1:f.y>r?!1:!0},f.prototype.entityAtPoint=function(n,t){var r,i;if(this.
boundingBoxContainsPoint(n,t)){for(r in this.ports)if(i=this.ports[r].entityAtPoint(
n,t),i!==null)return i;return this.containsPoint(n,t)?this:null}return null},f.prototype.
containsPoint=function(n,t){return n>=this.x()&&n<=this.x()+this.width()&&t>=this.
y()&&t<=this.y()+this.height()},f.prototype.boundingBoxContainsPoint=function(t,
i){var r=i+n.Constants.Port.HalfHeight,u=this.height()+n.Constants.Port.Height;return t>=
this.x()&&t<=this.x()+this.width()&&r>=this.y()&&i<=this.y()+u},f.prototype.relayout=
function(){var t=DataLab.Util.values(this.inputPorts),r=DataLab.Util.values(this.
outputPorts),u=Math.max(t.length,r.length),f=Math.max(0,(u-i.Trigger)*i.Rate);this.
width(n.Constants.RectWidth+f);this.relayoutPorts(t,this.width(),this.height());
this.relayoutPorts(r,this.width(),this.height())},f.prototype.getCompatibilityClass=
function(){switch(this.portState()){case DataLab.Model.Constants.PortState.Compatible:
return"compatible";case DataLab.Model.Constants.PortState.CompatibleSnapped:return"compatible snapped"
case DataLab.Model.Constants.PortState.Incompatible:return"incompatible";case DataLab.
Model.Constants.PortState.Default:return"idle";case DataLab.Model.Constants.PortState.
Replaceable:return"replaceable";default:throw new Error("Unknown node compatibility type");
}},f.prototype.findClosestPort=function(n,t,i){var f=function(n,t,i,r){return Math.
sqrt(Math.pow(n-i,2)+Math.pow(t-r,2))},r=null,u=Number.MAX_VALUE;return DataLab.
Util.forEach(n,function(n){var e=f(t,i,n.getCX(),n.getCY());e<u&&(u=e,r=n)}),r},
f.prototype.relayoutPorts=function(t,i,r){var u=i/(t.length+1);t.forEach(function(
t){var i=(t.portModel.ordinal+1)*u-n.Constants.Port.HalfWidth,f=t instanceof n.InputPort?
0:r;t.hostRelativeX(i);t.hostRelativeY(f);t.labelMaxWidth(u*2-n.Constants.Port.HalfWidth*
4)})},f.prototype.editComment=function(){this.editingComment(!0)},f.prototype.commentLargerThanDiv=
function(n,t){var i=document.createElement("div"),r;return(i.setAttribute("class",
"comment"),i.style.width=this.commentWidth(),i.style.visibility="hidden",r=document.
createElement("pre"),r.setAttribute("class","text"),i.appendChild(r),document.body.
appendChild(i),t&&($(r).text(t),i.clientHeight>n))?(document.body.removeChild(i),
!0):(document.body.removeChild(i),!1)},f}(n.Entity);n.GraphNodeViewModel=u}(ExperimentEditor||
(ExperimentEditor={})),function(n){var t;(function(n){n.R="r";n.Python="text/x-python";
n.Hive="hql";n.Sql="sql";n.PlainText="text/plain";n.JavaScript="text/javascript";
n.TypeScript="text/typescript"})(t=n.MonacoMimeTypes||(n.MonacoMimeTypes={}));ko.
bindingHandlers.monaco={init:function(t,i,r,u){var f=ko.utils.unwrapObservable(i(
)),h=ko.utils.unwrapObservable(f.value),v=ko.utils.unwrapObservable(f.mimetype);
h=h===null?"":h;var y=require("vs/editor/core/constants"),p={value:h,mode:v,glyphMargin:
!1,readOnly:!1,lineNumbersMinChars:2,automaticLayout:!0,scrollBeyondLastLine:!1,
insertSpaces:f.insertSpaces},e=Monaco.Editor.create(t,p);ko.utils.domNodeDisposal.
addDisposeCallback(t,function(){e&&(c(),e.destroy(),e=null)});$(t).find(".monaco-editor").
css("background-color","transparent");var o=e.getModel(),l=o.getValue(),w=f.value.
subscribe(function(n){l!=n&&(l=n,o.isDisposed()||o.getValue()===n||o.setValue(n))}
);ko.utils.domNodeDisposal.addDisposeCallback(t,function(){w.dispose()});o.addListener(
y.EventType.ModelContentChanged,function(){f.value(o.getValue())});var s=$(".propertyEditorContainer").
parent().width(),a=n.Constants.rScriptEditorFocusWidth,c=function(){var i=$(".propertyEditorContainer").
parent(),c=$(".experiment-container-right"),o=$(".quickHelpContainer"),r=t.parentElement.
collapseResizeManager,f,e,h;if($.contains(t,document.activeElement)){if(i.length>
0&&c.length>0){if(s=i.width(),s<n.Constants.rScriptEditorFocusWidth)for(f=n.Constants.
rScriptEditorFocusWidth,i.width(f);i[0].getBoundingClientRect().left<c[0].getBoundingClientRect(
).left;){if(f=f-10,f<s){i.width(s);break}i.width(f)}a=i.width()}if(o.length>0&&r)
for(h=o[0].getBoundingClientRect().bottom-o[0].getBoundingClientRect().height-25,
e=n.Constants.rScriptEditorFocusHeight,r.resize(e),h=o[0].getBoundingClientRect(
).bottom-o[0].getBoundingClientRect().height;h<t.parentElement.getBoundingClientRect(
).bottom;){if(e=e-10,e<r.minSize){r.resize(r.minSize);break}r.resize(e)}u.focus(
!0)}else r&&r.resize(r.minSize),i.length>0&&i.width()===a&&i.width(s),u.focus(!1)}
;f.expandOnFocus&&(e.addListener("focus",function(){DataLab.Log.featureUsage({featureID:
150,groupID:148});c()}),e.addListener("blur",function(){c()}))},update:function(
){}}}(ExperimentEditor||(ExperimentEditor={})),function(n){var t;(function(n){var
t;(function(n){n.DarkBlue="#3C679A";n.DarkRed="#9D3D3A";n.Green="#7D9844";n.Turquoise=
"#668C83";n.Blue="#388CA2";n.BurntOrange="#CB7833";n.Red="#BE4B48";n.DarkGreen="#98B984";
n.Purple="#7D60A0";n.Teal="#46AAC5";n.Orange="#F69240";n.LightBlue="#A5B6D3";n.LightRed=
"#D5A5A4";n.LightGreen="#C1D2A7";n.LightPurple="#B6ABC5";n.Grey="#F0F0F0";n.ColorTable=
[n.DarkBlue,n.DarkRed,n.Green,n.Turquoise,n.Blue,n.BurntOrange,n.Red,n.DarkGreen,
n.Purple,n.Teal,n.Orange,n.LightBlue,n.LightRed,n.LightGreen,n.LightPurple]})(t=
n.Constants||(n.Constants={}))})(t=n.CustomUX||(n.CustomUX={}))}(ExperimentEditor||
(ExperimentEditor={}));__extends=this.__extends||function(n,t){function r(){this.
constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;
n.prototype=new r},function(n){var t;(function(n){var t=function(t){function i(i)
{var r=this,u,f,e;for(t.call(this),this.rocPlot={plotName:DataLab.LocalizedResources.
rocPlotName,xAxisLabel:DataLab.LocalizedResources.rocPlotXAxis,yAxisLabel:DataLab.
LocalizedResources.rocPlotYAxis,xScale:null,yScale:null},this.prPlot={plotName:DataLab.
LocalizedResources.prPlotName,xAxisLabel:DataLab.LocalizedResources.prPlotXAxis,
yAxisLabel:DataLab.LocalizedResources.prPlotYAxis,xScale:null,yScale:null},this.
liftPlot={plotName:DataLab.LocalizedResources.liftPlotName,xAxisLabel:DataLab.LocalizedResources.
liftPlotXAxis,yAxisLabel:DataLab.LocalizedResources.liftPlotYAxis,xScale:null,yScale:
null},this.padding=50,this.plotAreaWidth=500,this.plotAreaHeight=500,this.plotViewModels=
i,u=[this.rocPlot,this.prPlot,this.liftPlot],this.chartNames=ko.observableArray(
u.map(function(n){return n.plotName})),this.colors=ko.observableArray(n.Constants.
ColorTable),this.chartNameToDescription={},f=0;f<u.length;f++)this.chartNameToDescription[
u[f].plotName]=u[f];this.currentChart=ko.observable(this.rocPlot.plotName);this.
xAxisLabel=ko.computed(function(){return r.chartNameToDescription[r.currentChart(
)].xAxisLabel});this.yAxisLabel=ko.computed(function(){return r.chartNameToDescription[
r.currentChart()].yAxisLabel});e=function(n){return r.plotViewModels.map(function(
t){return t.getCurrentChart(n)})};this.plotData=ko.computed(function(){return e(
r.currentChart())});this.height=ko.observable(this.plotAreaHeight);this.width=ko.
observable(this.plotAreaWidth);DataLab.Util.forEach(u,function(n){var s=e(n.plotName),
u=function(n){return s.map(function(t){return t.data.map(function(t){return t[n]}
)}).reduce(function(n,t){return n.concat(t)})},f=u(0),o=u(1),t,i;n===r.liftPlot?
(t=[d3.min(f),d3.max(f)],i=[d3.min(o),d3.max(o)]):(t=[0,1],i=[0,1]);n.xScale=d3.
scale.linear().domain(t).range([r.padding,r.width()-r.padding]);n.yScale=d3.scale.
linear().domain(i).range([r.height()-r.padding,r.padding])});this.xScale=ko.computed(
function(){return r.chartNameToDescription[r.currentChart()].xScale});this.yScale=
ko.computed(function(){return r.chartNameToDescription[r.currentChart()].yScale}
);this.setCurrentChart=function(n){r.currentChart(n)};this.setCurrentChart(this.
rocPlot.plotName);this.svgLineFunction=ko.computed(function(){return d3.svg.line(
).x(function(n){return r.xScale()(n[0])}).y(function(n){return r.yScale()(n[1])}
).interpolate("linear")})}return __extends(i,t),i.prototype.drawAxes=function(n,
t,i){var r=d3.select(".chartArea"),u,f;r.selectAll(".axis").remove();r.selectAll(
".gridLine").remove();u=d3.svg.axis().scale(n).orient("bottom");f=d3.svg.axis().
scale(t).orient("left");r.insert("g",":first-child").attr("class","axis").attr("id",
"xAxis").attr("transform","translate(0,"+(this.height()-this.padding)+")").call(
u);r.insert("g",":first-child").attr("class","axis").attr("id","yAxis").attr("transform",
"translate("+this.padding+",0)").call(f);r.insert("g",":first-child").attr("class",
"gridLine").attr("transform","translate(0,"+(this.height()-this.padding)+")").call(
u.tickSize(-(this.height()-2*this.padding),0,0).tickFormat(""));r.insert("g",":first-child").
attr("class","gridLine").attr("transform","translate("+this.padding+",0)").call(
f.tickSize(-(this.width()-2*this.padding),0,0).tickFormat(""));i==="roc"&&r.insert(
"path",":first-child").attr("class","gridLine diagonalGridLine").attr("d","M "+n.
range()[0]+" "+t.range()[0]+" L "+n.range()[1]+" "+t.range()[1])},i}(DataLab.Util.
Disposable);n.PlotContainerViewModel=t;ko.bindingHandlers.d3Axes={init:function(
){},update:function(n,t,i,r,u){var f=u.$data;f.drawAxes(t().xScale,t().yScale,f.
currentChart())}}})(t=n.CustomUX||(n.CustomUX={}))}(ExperimentEditor||(ExperimentEditor=
{})),function(n){function t(n){var t=document.createElement("input");return t.setAttribute(
"type",n),t.type!=="text"}n.isInputSupported=t}(ExperimentEditor||(ExperimentEditor=
{}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t,i;(function(n){var t;(function(n){n.SliderZoomIncrement=
.25})(t=n.ZoomControl||(n.ZoomControl={}))})(t=n.Constants||(n.Constants={}));i=
function(i){function r(r,u,f,e){var o=this,h,c,s,l;if(i.call(this),this.containerDiv=
r,this.canvasDiv=u,this.minScale=f!==undefined?f:.2,this.minScale<=0)throw"Minimum zoom value must be positive";
if(this.maxScale=e!==undefined?e:4,this.maxScale<=this.minScale)throw"Maximum zoom value must be greater than the minimum";
this.zoomSteps=0;this.scale=1;this.zoomFactor=1.1;this.minZoomSteps=Math.log(this.
minScale)/Math.log(this.zoomFactor);this.maxZoomSteps=Math.log(this.maxScale)/Math.
log(this.zoomFactor);this.zoomWithoutAnimation=new ko.subscribable;this.zoomWithAnimation=
new ko.subscribable;this.zoomToFit=new ko.subscribable;h=this.canvasDiv.querySelector(
".customElements");h.addEventListener(h.onmousewheel===undefined?"DOMMouseScroll":
"mousewheel",function(n){return o.handleMouseWheelZoom(n)});c=function(i,r,u){var
f,e;if($(".xe-zoomControl").length!=0)throw"Element with class .xe-zoomControl exists before it is created!, possible of name collision ";
f="&nbsp;";n.isInputSupported("range")&&(f="<input class='xe-zoomControlSlider' type='range' min='"+
r+"' max='"+u+"' value='1.0' step='"+t.ZoomControl.SliderZoomIncrement+"'><\/input>");
e="<div class='xe-zoomOut xe-zoomIcon' title='"+DataLab.LocalizedResources.zoomOut+
"'><\/div>"+f+"<div class='xe-zoomIn xe-zoomIcon' title='"+DataLab.LocalizedResources.
zoomIn+"'><\/div><div class='xe-actualSize xe-zoomIcon' title='"+DataLab.LocalizedResources.
zoomToActualSize+"'><\/div><div class='xe-zoomToFit xe-zoomIcon' title='"+DataLab.
LocalizedResources.zoomToFit+"'><\/div>";o.registerForDisposal(new DataLab.Util.
DisposableSetHTML(i,e))};c(r,this.minZoomSteps,this.maxZoomSteps,this.zoomInImage,
this.zoomOutImage,this.actualSizeImage);this.zoominButton=this.containerDiv.querySelector(
".xe-zoomIn");this.zoomoutButton=this.containerDiv.querySelector(".xe-zoomOut");
this.actualSizeButton=this.containerDiv.querySelector(".xe-actualSize");this.zoomSlider=
this.containerDiv.querySelector(".xe-zoomControlSlider");this.zoomToFitButton=this.
containerDiv.querySelector(".xe-zoomToFit");this.actualSizeButton.addEventListener(
"click",function(n){n.preventDefault();o.handleReset()});this.zoominButton.addEventListener(
"click",function(n){n.preventDefault();o.handleZoomIn()});this.zoomoutButton.addEventListener(
"click",function(n){n.preventDefault();o.handleZoomOut()});this.zoomToFitButton.
addEventListener("click",function(n){n.preventDefault();o.handleZoomToFit()});this.
zoomSlider!==null&&(s=!1,l=new n.MouseCapture(this.zoomSlider,function(){},function(
){s=!1}),this.registerForDisposal(l),this.zoomSlider.addEventListener("change",function(
n){n.preventDefault();var i=parseFloat(n.currentTarget.value),r=i-o.zoomSteps,t=
o.calculateNewZoom(r);s?(o.zoomWithoutAnimation.notifySubscribers({scale:t}),o.scale=
t):(o.zoomWithAnimation.notifySubscribers({scale:t}),s=!0)}));this.registerForDisposal(
new DataLab.Util.DisposableEventListener(this.canvasDiv,"keydown",function(n){switch(
n.keyCode){case t.Key.Minus:case 109:o.handleZoomOut();break;case t.Key.Equals:case
107:o.handleZoomIn();break;case 48:case 96:o.handleZoomToFit();break;case 57:case
105:o.handleReset()}}))}return __extends(r,i),r.prototype.getClosestValidScale=function(
n){var t=this.computeZoomStepForScale(n);return Math.pow(this.zoomFactor,t)},r.prototype.
setScale=function(n){var t=this.computeZoomStepForScale(n),i=Math.pow(this.zoomFactor,
t);return this.zoomSlider&&(this.zoomSlider.value=t.toString()),this.zoomSteps=t,
this.scale=i,i},r.prototype.getScale=function(){return this.scale},r.prototype.computeZoomStepForScale=
function(n){var t;return t=n>this.maxScale?this.maxScale:n,t=n<this.minScale?this.
minScale:t,Math.log(t)/Math.log(this.zoomFactor)},r.prototype.handleReset=function(
){this.zoomWithAnimation.notifySubscribers({scale:this.calculateNewZoom(-this.zoomSteps)})}
,r.prototype.handleZoomIn=function(){this.zoomWithoutAnimation.notifySubscribers(
{scale:this.calculateNewZoom(1)})},r.prototype.handleZoomOut=function(){this.zoomWithoutAnimation.
notifySubscribers({scale:this.calculateNewZoom(-1)})},r.prototype.handleMouseWheelZoom=
function(n){var t;t=n.detail?-n.detail/3:n.wheelDelta/120;this.zoomWithoutAnimation.
notifySubscribers({scale:this.calculateNewZoom(t),x:n.clientX,y:n.clientY})},r.prototype.
handleZoomToFit=function(){this.zoomToFit.notifySubscribers(!0)},r.prototype.calculateNewZoom=
function(n){var t=Math.max(this.minZoomSteps,Math.min(this.zoomSteps+n,this.maxZoomSteps));
return Math.pow(this.zoomFactor,t)},r}(DataLab.Util.Disposable);n.ZoomControl=i}
(ExperimentEditor||(ExperimentEditor={})),function(n){var t=function(){function n(
n,t,i){this.svgRoot=n;this.getViewDimensions=t;this.svgTransformElement=i}return n.
prototype.clientToDomainCoordinates=function(n,t){var i=this.svgRoot.createSVGPoint(
),r=this.getViewDimensions(),u;i.x=n-r.x;i.y=t-r.y;try{u=this.svgTransformElement.
getCTM().inverse()}catch(f){return DataLab.Log.customEvent({key:"SVGMatrixInverseFailed",
type:"SVGInteraction",data:JSON.stringify({CTMMatrix:this.svgTransformElement.getCTM(
),x:n,y:t})}),i}return i.matrixTransform(u)},n}();n.CoordinateHelper=t}(ExperimentEditor||
(ExperimentEditor={}));__extends=this.__extends||function(n,t){function r(){this.
constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;
n.prototype=new r},function(n){var t=function(){function n(n,t,i,r,u,f,e,o,s,h,c,
l){this._svgRoot=n;this._coordinateHelper=t;this._zoomControl=i;this._getViewDimensions=
r;this._changeCallback=u;this._getTopLeft=f;this._animationComplete=e;this._svgTransformElement=
o;this._updateScrollbars=s;this._overlayDivs=h;this._getBounds=c;this._matrixTransform=
l}return Object.defineProperty(n.prototype,"svgRoot",{get:function(){return this.
_svgRoot},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"coordinateHelper",
{get:function(){return this._coordinateHelper},enumerable:!0,configurable:!0}),Object.
defineProperty(n.prototype,"zoomControl",{get:function(){return this._zoomControl}
,enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"getViewDimensions",
{get:function(){return this._getViewDimensions},enumerable:!0,configurable:!0}),
Object.defineProperty(n.prototype,"changeCallback",{get:function(){return this._changeCallback}
,enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"getTopLeft",
{get:function(){return this._getTopLeft},enumerable:!0,configurable:!0}),Object.
defineProperty(n.prototype,"animationComplete",{get:function(){return this._animationComplete}
,enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"svgTransformElement",
{get:function(){return this._svgTransformElement},enumerable:!0,configurable:!0}),
Object.defineProperty(n.prototype,"updateScrollbars",{get:function(){return this.
_updateScrollbars},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,
"overlayDivs",{get:function(){return this._overlayDivs},enumerable:!0,configurable:
!0}),Object.defineProperty(n.prototype,"getBounds",{get:function(){return this._getBounds}
,enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"matrixTransform",
{get:function(){return this._matrixTransform},enumerable:!0,configurable:!0}),n}
(),i=function(i){function r(n,r,u,f,e,o,s,h,c,l,a){var y,p,v,w,b,k;i.call(this);
y=n.transform.baseVal;p=y.appendItem(r.createSVGTransform());this.initOnly=new t(
r,u,f,e,o,s,h,n,c,l,a,p);this.currentPanZoomAnimation=null;this.lastAnimatedScale=
this.initOnly.zoomControl.getScale();this.topLeftDest=null;v=this;w=this.initOnly.
zoomControl.zoomWithoutAnimation.subscribe(function(n){v.zoomToEventWithoutAnimation(
n)});this.registerForDisposal(new DataLab.Util.DisposableKnockoutObject(w));b=this.
initOnly.zoomControl.zoomWithAnimation.subscribe(function(n){v.zoomToEventWithAnimation(
n)});this.registerForDisposal(new DataLab.Util.DisposableKnockoutObject(b));k=this.
initOnly.zoomControl.zoomToFit.subscribe(function(){v.zoomToFitWithAnimation()});
this.registerForDisposal(new DataLab.Util.DisposableKnockoutObject(k))}return __extends(
r,i),Object.defineProperty(r.prototype,"currentAnimation",{get:function(){return this.
currentPanZoomAnimation},enumerable:!0,configurable:!0}),r.prototype.getPanLimits=
function(t){t===void 0&&(t=this.initOnly.zoomControl.getScale());var i=this.initOnly.
getBounds(),f=this.initOnly.getViewDimensions(),r=f.width/t,u=f.height/t;return i.
width===0&&i.height===0?{x:this.initOnly.getTopLeft().x/t,y:this.initOnly.getTopLeft(
).y/t,width:r,height:u}:{x:Math.min(i.x-(r-n.Constants.RectWidth),this.initOnly.
getTopLeft().x/t),y:Math.min(i.y-(u-n.Constants.RectHeight),this.initOnly.getTopLeft(
).y/t),width:Math.max(i.width+(r-n.Constants.RectWidth)*2,r),height:Math.max(i.height+
(u-n.Constants.RectHeight)*2,u)}},r.prototype.zoom=function(n){var t=this.initOnly.
coordinateHelper.clientToDomainCoordinates(this.viewCenter.x,this.viewCenter.y);
this.zoomToPoint(n,t.x,t.y)},r.prototype.zoomToEventWithoutAnimation=function(n)
{var i=n.x?n.x:this.viewCenter.x,r=n.y?n.y:this.viewCenter.y,t=this.initOnly.coordinateHelper.
clientToDomainCoordinates(i,r);this.zoomToPointWithoutAnimation(n.scale,t.x,t.y)}
,r.prototype.zoomToEventWithAnimation=function(n){var i=n.x?n.x:this.viewCenter.
x,r=n.y?n.y:this.viewCenter.y,t=this.initOnly.coordinateHelper.clientToDomainCoordinates(
i,r);this.zoomToPointWithAnimation(n.scale,t.x,t.y)},Object.defineProperty(r.prototype,
"viewCenter",{get:function(){var n=this.initOnly.getViewDimensions();return{x:n.
x+n.width/2,y:n.y+n.height/2,matrixTransform:null}},enumerable:!0,configurable:!0}),
r.prototype.animateToLocation=function(t,i,r){var u=this,e,f,o;r===void 0&&(r=this.
initOnly.zoomControl.getScale());e=this.initOnly.zoomControl.getScale();this.topLeftDest=
{x:t,y:i,matrixTransform:null};this.currentPanZoomAnimation&&!this.currentPanZoomAnimation.
animationStopped&&(this.currentPanZoomAnimation.stop(),e=this.lastAnimatedScale);
f={};f.x={start:this.initOnly.getTopLeft().x,end:t};f.y={start:this.initOnly.getTopLeft(
).y,end:i};f.scale={start:e,end:r};this.currentPanZoomAnimation=new n.Animation(
function(n){u.setOriginAndZoom(n.x,n.y,n.scale);u.lastAnimatedScale=n.scale;u.initOnly.
zoomControl.setScale(n.scale)},f,n.Constants.AnimatedZoomDuration);this.currentPanZoomAnimation.
start();o=this.currentPanZoomAnimation.animationEnded.subscribe(function(n){u.initOnly.
zoomControl.setScale(n.scale);u.initOnly.animationComplete();o.dispose()})},r.prototype.
getDestinationOrigin=function(){return this.currentPanZoomAnimation&&!this.currentPanZoomAnimation.
animationStopped?this.topLeftDest:this.initOnly.getTopLeft()},r.prototype.zoomToPointWithoutAnimation=
function(n,t,i){var r=this.zoomToPoint(n,t,i);this.currentPanZoomAnimation&&!this.
currentPanZoomAnimation.animationStopped&&this.currentPanZoomAnimation.stop();this.
setOriginAndZoom(r.x,r.y,r.scale);this.initOnly.zoomControl.setScale(r.scale);this.
initOnly.updateScrollbars()},r.prototype.zoomToPointWithAnimation=function(n,t,i)
{var r=this.zoomToPoint(n,t,i);this.animateToLocation(r.x,r.y,r.scale)},r.prototype.
zoomToPoint=function(n,t,i){var r=this.initOnly.getBounds(),u=this.initOnly.svgRoot.
createSVGPoint();u.x=Math.min(r.x+r.width,Math.max(r.x,t));u.y=Math.min(r.y+r.height,
Math.max(r.y,i));var f=u.matrixTransform(this.initOnly.matrixTransform.matrix),e=
-(f.x-u.x*n),o=-(f.y-u.y*n);return{scale:n,x:e,y:o}},r.prototype.zoomToFitWithAnimation=
function(){var n=this.computeZoomToFitLocation();this.animateToLocation(n.domainX,
n.domainY,n.scale)},r.prototype.computeZoomToFitLocation=function(){var t=this.initOnly.
getBounds(),r=this.initOnly.getViewDimensions(),u=(r.width-2*n.Constants.Layout.
zoomToFitPadding)/t.width,f=(r.height-2*n.Constants.Layout.zoomToFitPadding)/t.height,
i=this.initOnly.zoomControl.getClosestValidScale(Math.min(u,f)),e=t.x*i-(r.width-
t.width*i)/2,o=t.y*i-(r.height-t.height*i)/2;return{domainX:e,domainY:o,scale:i}}
,r.prototype.setOriginAndZoom=function(n,t,i,r){var l,u,h,f;i===void 0&&(i=this.
initOnly.zoomControl.getScale());r===void 0&&(r=!1);var e=n,o=t,c=this.initOnly.
getViewDimensions(),s=this.getPanLimits(i);for(e=i*Math.max(e/i,s.x),o=i*Math.max(
o/i,s.y),e=i*Math.min((e+c.width)/i,s.x+s.width)-c.width,o=i*Math.min((o+c.height)
/i,s.y+s.height)-c.height,l=this.initOnly.svgRoot.createSVGMatrix().translate(-e,
-o).scale(i),this.initOnly.getTopLeft().x=e,this.initOnly.getTopLeft().y=o,this.
initOnly.matrixTransform.setMatrix(l),u=this.initOnly.svgTransformElement.getCTM(
),h="matrix("+u.a+","+u.b+","+u.c+","+u.d+","+u.e+","+u.f+")",f=0;f<this.initOnly.
overlayDivs.length;f++)$(this.initOnly.overlayDivs.item(f)).css("-webkit-transform",
h),$(this.initOnly.overlayDivs.item(f)).css("transform",h),$(this.initOnly.overlayDivs.
item(f)).css("-ms-transform",h),$(this.initOnly.overlayDivs.item(f)).css("-moz-transform",
h);r||this.initOnly.updateScrollbars();$(this.initOnly.svgRoot).trigger("originAndZoomChangedEvent");
this.initOnly.changeCallback({domainX:n,domainY:t,scale:i})},r.prototype.pan=function(
n,t){this.setOriginAndZoom(this.initOnly.getTopLeft().x-n,this.initOnly.getTopLeft(
).y-t)},r.prototype.fitExperimentWithoutAnimation=function(){var t=this.computeZoomToFitLocation(
);t.scale>1&&(t.scale=1,t.domainX=this.initOnly.getBounds().x-(this.initOnly.getViewDimensions(
).width-this.initOnly.getBounds().width)/2,t.domainY=this.initOnly.getBounds().y-
n.Constants.InitialZoomToFitYOffSet);this.setOriginAndZoom(t.domainX,t.domainY,t.
scale,!0);this.initOnly.zoomControl.setScale(t.scale)},r}(DataLab.Util.Disposable);
n.ZoomHelper=i}(ExperimentEditor||(ExperimentEditor={})),function(n){var t=function(
){function n(n,t){var i=document.createElement("div");i.setAttribute("class","xe-zoomIcon panButton");
i.setAttribute("title",DataLab.LocalizedResources.clickToPan);n.appendChild(i);i.
addEventListener("click",function(n){t(n)});i.addEventListener("mousedown",function(
n){n.stopPropagation()})}return n}();n.PanHelper=t}(ExperimentEditor||(ExperimentEditor=
{}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t;(function(t){var i=function(i){function r(n,r){var f=this,
e,u,o;for(i.call(this),this.buttonDragMode=!1,this.spaceDragMode=!1,this.miniMapProportion=
.8,this.loaded=ko.observable(!1),e=n.reports,this.viewModels=[],u=0;u<e.length;u++)
this.viewModels.push(new t.BinaryClassificationUXViewModel(e[u]));this.currentViewModelIndex=
ko.observable(0);this.currentViewModel=ko.computed(function(){return f.viewModels[
f.currentViewModelIndex()]});this.setCurrentViewModelIndex=function(n){f.currentViewModelIndex(
n)};o=this.viewModels.map(function(n){return n.plotViewModel});this.plotContainer=
ko.observable(new t.PlotContainerViewModel(o));r&&(this.experimentViewInfo=r.experimentViewInfo,
this.nodeId="node-"+r.moduleId);this.loaded(!0)}return __extends(r,i),r.prototype.
getViewDimensions=function(){var n=$("#evaluateMiniMap").get(0);return{x:n.getBoundingClientRect(
).left,y:n.getBoundingClientRect().top,width:n.clientWidth,height:n.clientHeight}}
,r.prototype.setPanning=function(n){n===!1?($("#evaluateMiniMap").draggable("disable"),
$("#evaluateMiniMap").removeClass("ui-state-disabled"),$("#evaluateMiniMapContainer").
css("cursor","auto")):($("#evaluateMiniMap").draggable("enable"),$("#evaluateMiniMapContainer").
css("cursor","all-scroll"));this.draggable=n},r.prototype.togglePanning=function(
){this.setPanning(!this.draggable)},r.prototype.setUpMiniMapElement=function(){var
i=$(".customElements").children(".svgRoot"),n=$("#evaluateMiniMap").children(".customElements"),
t;i.clone().appendTo(n);t=n.children(".svgRoot");this.svgRoot=n.children(".svgRoot").
get(0);this.svgTransformElement=t.children().get(0);t.find("tspan").show();d3.select(
"#evaluateMiniMap").selectAll(".selectedEntity").classed("selectedEntity",!1);d3.
select("#evaluateMiniMap").selectAll("#"+this.nodeId).classed("selectedEntity",!0);
d3.select("#evaluateMiniMap").selectAll(".portTextLabel").remove();d3.select("#evaluateMiniMap").
selectAll(".outputPortNumber").remove();this.svgTransformElement.transform.baseVal.
clear()},r.prototype.setUpZoomControl=function(){var u=$("#zoomControlPanelContainer").
get(0),t,i,e;this.zoomControl=new n.ZoomControl(u,$("#evaluateMiniMap").get(0));
t=this;$("#evaluateMiniMap").draggable({start:function(n){i={x:n.pageX,y:n.pageY}}
,drag:function(n,r){var u=n.pageX-i.x,f=n.pageY-i.y;i={x:n.pageX,y:n.pageY};t.zoomHelper.
pan(u,f);r.position.left=0;r.position.top=0}});this.setPanning(!1);e=new n.PanHelper(
u,function(){t.spaceDragMode!==!0&&(t.buttonDragMode=!t.buttonDragMode,t.togglePanning(
))});this.registerForDisposal(this.zoomControl);var f=function(){return t.getViewDimensions(
)},o=new n.CoordinateHelper(this.svgRoot,f,this.svgTransformElement),s=this.svgRoot.
createSVGPoint(),h=function(){return s},r=function(){},c={length:0,item:function(
){throw"out of range";}},l=function(){return this.svgTransformElement.getBBox()}
;this.zoomHelper=new n.ZoomHelper(this.svgTransformElement,this.svgRoot,o,this.zoomControl,
f,r,h,r,r,c,l)},r.prototype.zoomToModule=function(){var i=this.plotContainer().height(
)*this.miniMapProportion,r=this.plotContainer().width()*this.miniMapProportion,u=
40,t=d3.select("#"+this.nodeId),f=Number(t.attr("width")),e=Number(t.attr("height")),
o=Number(t.attr("x")),s=Number(t.attr("y")),h=(r-2*u)/f,c=(i-2*u)/e,n=Math.min(h,
c),l=-o*n+(r-f*n)/2,a=-s*n+(i-e*n)/2,v=this.svgRoot.createSVGMatrix().translate(
l,a).scale(n);this.svgTransformElement.transform.baseVal.getItem(0).setMatrix(v)}
,r.prototype.initialize=function(){DataLab.Features.miniMapInEvaluateVisualizationEnabled(
)&&this.experimentViewInfo&&(this.setUpMiniMapElement(),this.setUpZoomControl(),
this.zoomToModule())},r}(DataLab.Util.Disposable);t.BinaryClassificationComparisonUXViewModel=
i})(t=n.CustomUX||(n.CustomUX={}))}(ExperimentEditor||(ExperimentEditor={})),function(
n){var t;(function(n){var t;(function(n){n.numericAxisLabelPrecision=2;n.defaultBinCount=
10;n.defaultCategoryCount=5})(t=n.Constants||(n.Constants={}))})(t=n.D3Graph||(n.
D3Graph={}))}(ExperimentEditor||(ExperimentEditor={})),function(n){var t;(function(
n){function t(n){var r=[],t,i;for(t in n)n.hasOwnProperty(t)&&(i={},i.name=t,i.value=
n[t],r.push(i));return r}function i(n,t){return n.reduce(function(n,i){var r=n[t(
i)];return r?r.push(i):n[t(i)]=[i],n},{})}function r(t){return t.toString().length>=
5?d3.format("0."+n.Constants.numericAxisLabelPrecision+"g")(t):t}function u(n){return n.
toString().length>=11?n.toString().slice(0,8)+"...":n}function f(n,t,i,r,u){t&&n.
append("g").attr("class","axis").attr("id","xAxis").attr("transform","translate(0,"+
(r-u)+")").call(t).selectAll("text").style("text-anchor","end").attr("dy",".65em").
attr("transform",function(){return"rotate(-35)"});i&&n.append("g").attr("class",
"axis").attr("id","yAxis").attr("transform","translate("+u+",0)").call(i)}function e(
n,t,i,r,u,f,e){n.append("text").attr("text-anchor","middle").attr("x",f+(u-f-e)/
2).attr("y",r-f/20).attr("class","graphText").text(t);n.append("text").attr("text-anchor",
"middle").attr("x",f/4).attr("y",r/2-e/2).attr("transform","rotate(-90 "+f/4+","+
(r/2-e/2)+")").attr("class","graphText").text(i)}function o(n,t){return t.label.
replace("{0}",n.name)}function s(n,r,u,f){var l=r.index,o=t(i(n,function(n){return n[
l]})),c,e,s,h;for(o=o.sort(function(n,t){return t.value.length-n.value.length}),
c=[],e=0;e<o.length;e++)if(e===u&&f)s={},s.x="Other",s.dx="",s.y=o[e].value.length,
s.name="Other",s.data=o[e].value,c.push(s);else if(e!==u||f)e>u?(c[u].y+=o[e].value.
length,c[u].data.concat(o[e].value)):(h={},h.x=o[e].name,h.dx="",h.y=o[e].value.
length,h.name=o[e].name,h.data=o[e].value,c.push(h));else break;return c}function h(
n){for(var l=d3.scale.quantile().domain(n).range([0,1,2,3]),u=l.quantiles(),f=u[
0],a=u[1],e=u[2],s=e-f,v=e+1.5*s,y=f-1.5*s,o=[],r=n.sort(d3.ascending),t=0,h,c,i;
r[t]<y;)o.push(r[t]),t++;for(h=r[t],t=r.length-1;r[t]>v;)o.push(r[t]),t--;return c=
r[t],i={},i.median=a,i.boxBottom=f,i.boxTop=e,i.whiskerBottom=h,i.whiskerTop=c,i.
outliers=o,i}function c(n,t,i,r,u,f,e){var h=e?"minimizedBoxplot":"boxplot",o=i(
t.boxTop),s=e?0:500;n.append("line").attr("class",h).attr("x1",r).attr("y1",o).attr(
"x2",r).attr("y2",o).transition().attr("y1",i(t.whiskerBottom)).attr("y2",i(t.whiskerTop)).
duration(s);n.append("line").attr("class",h).attr("x1",r-f/2).attr("y1",o).attr(
"x2",r+f/2).attr("y2",o).transition().attr("y1",i(t.whiskerBottom)).attr("y2",i(
t.whiskerBottom)).duration(s);n.append("line").attr("class",h).attr("x1",r-f/2).
attr("y1",o).attr("x2",r+f/2).attr("y2",o).transition().attr("y1",i(t.whiskerTop)).
attr("y2",i(t.whiskerTop)).duration(s);n.append("rect").attr("class",h).attr("x",
r-u/2).attr("y",i(t.boxTop)).attr("width",u).attr("height",0).transition().attr(
"height",i(t.boxBottom)-i(t.boxTop)).duration(s);n.append("line").attr("class",h).
attr("x1",r-u/2).attr("y1",o).attr("x2",r+u/2).attr("y2",o).transition().attr("y1",
i(t.median)).attr("y2",i(t.median)).duration(s);n.selectAll("circle").data(t.outliers).
enter().append("circle").attr("class","scatterplotPoint").attr("cx",r).attr("cy",
function(n){return i(n)}).attr("r",0).transition().attr("r",e?1:3).duration(s).delay(
e?0:300)}n.Scales=[{name:"linear",index:0,label:"{0}",func:function(n){return n}
},{name:"log",index:1,label:"log({0})",func:function(n){return Math.log(n)}}];n.
ObjectToArray=t;n.UniqueValueCounts=i;n.NumericAxisFormatter=r;n.CategoricalAxisFormatter=
u;n.AddAxes=f;n.AddAxisLabels=e;n.GenerateAxisLabel=o;n.CategoricalHistogramBins=
s;n.BoxplotLayout=h;n.CreateBoxplotElements=c;var l=function(){function n(n,r,u)
{var f=t(i(n,function(n){return n[r.index]})),o=t(i(n,function(n){return n[u.index]}
)),s=f.map(function(r){return{xValueName:r.name,yValues:t(i(r.value,function(n){
return n[u.index]})).map(function(t){return{xValueName:r.name,yValueName:t.name,
count:t.value.length,percentOfTotal:t.value.length/n.length}})}}),e;this.instances=
s.reduce(function(n,t){return n.concat(t.yValues)},[]);e=function(n){return n.name}
;this.xCategories=f.map(e);this.yCategories=o.map(e);this.numberOfXCategories=f.
length;this.numberOfYCategories=o.length}return n}();n.CrosstabLayout=l})(t=n.D3Graph||
(n.D3Graph={}))}(ExperimentEditor||(ExperimentEditor={}));V=ExperimentEditor.Visualization,
function(n){var t;(function(n){function t(t,i,r,u,f){var s=DataLab.DataContract.
isNumericFeature(i.featureType),h,o,e,l;if(h=s?function(n){return r(parseFloat(n[
i.index]))}:function(n){return n[i.index]},s){var a=function(n,t,i){return isFinite(
i[t])},v=t.map(h),c=v.filter(a);o=c.length;e=d3.layout.histogram().bins(f)(c)}else
l=!1,o=t.length,e=n.CategoricalHistogramBins(t,i,f,l);return e.NumberOfRecords=o,
e}function i(n,t,i,r,u,f,e,o,s,h,c){var d=n.append("g"),g=u.NumberOfRecords,a=d3.
scale.linear().domain([0,1]).range([t-i,r]),w=function(n){return function(t){return t.
endpoint?e(t.x):e(t.x)+n}},nt=d3.svg.line().x(w(f/2)).y(function(n){return a(n.numElements/
g)}).interpolate("basis"),ut=d3.svg.area().x(w(f)).y0(a(0)).y1(function(n){return a(
n.cy)}).interpolate("basis"),p={},v,l,y,b,k;for(p.x=o,p.y=0,p.numElements=0,p.endpoint=
!0,v={},v.x=s,v.y=0,v.numElements=0,v.endpoint=!0,l=[p].concat(u).concat([v]),y=
0;y<l.length;y++)b=l[y],k=b.numElements/g,b.cy=y===0?k:l[y-1].cy+k;var ft=d3.svg.
area().x(w(f)).y0(a(0)).y1(a(0)).interpolate("basis"),tt=ft(l),it=ut(l);d.append(
"path").attr("d",tt).attr("class","dfCurve cdf").attr("id","cdfCurve").attr("data-startPoints",
tt).attr("data-endPoints",it).style("visibility",c?"visible":"hidden").transition(
).attr("d",it).delay(150).duration(300);var rt=d3.svg.line().x(w(f/2)).y(a(0)).interpolate(
"basis"),et=rt(l),ot=nt(l);d.append("path").attr("d",rt(l)).attr("class","dfCurve pdf").
attr("id","pdfCurve").attr("data-startPoints",et).attr("data-endPoints",ot).style(
"visibility",h?"visible":"hidden").transition().attr("d",nt(l)).delay(150).duration(
300)}function r(r,u,f,e,o,s,h,c,l,a,v,y,p){var wt=parseInt(s),k=v/2,b=v,bt=e.func,
ht=o.func,kt=f.index,d=DataLab.DataContract.isNumericFeature(f.featureType),w,ft,
ct,et,tt,it,nt,rt,vt,yt,pt;y?(ft=y.records?y.records[kt][0]:y,w=ft.Bins,w.NumberOfRecords=
ft.NumberOfRecords):w=t(u.records,f,bt,ht,wt);ct=w.NumberOfRecords;w=w.map(function(
n){n.numElements=n.y;var t=ht(n.y);return n.y=isFinite(t)?t:0,n});w.NumberOfRecords=
ct;et=w.length-n.Constants.defaultBinCount;et>0&&(l+=et*20,r.attr("width",l));var
dt=function(n){return n.x},gt=function(n){return n.x+n.dx},ni=function(n){return n.
y},lt=d3.min(w,dt),at=d3.max(w,gt),g;if(g=d?d3.scale.linear().domain([lt,at]).range(
[b,l-k]):d3.scale.ordinal().domain(["  "].concat(w.map(function(n){return n.x})).
concat(["   "])).rangePoints([b,l-k]),tt=d3.scale.linear().domain([0,d3.max(w,ni)]).
range([a-b,k]),!p){for(it=[],w.length>0&&d&&it.push(w[0].x),nt=0;nt<w.length;nt++)
it.push(w[nt].x+w[nt].dx);rt=d3.svg.axis().scale(g).tickValues(it).orient("bottom");
vt=d3.svg.axis().scale(tt).orient("left").tickFormat(n.NumericAxisFormatter);d?rt.
tickFormat(n.NumericAxisFormatter):rt.tickFormat(n.CategoricalAxisFormatter);n.AddAxes(
r,rt,vt,a,b);d3.select("#xAxis").selectAll("g").selectAll("text").append("title").
text(function(n){return n});yt=n.GenerateAxisLabel(f,e);pt=n.GenerateAxisLabel({
name:DataLab.LocalizedResources.frequency},o);n.AddAxisLabels(r,yt,pt,a,l,b,k)}var
ot=p?1:6,ti=d?w.length:w.length+2,st=(l-b-k)/ti-ot,ut=r.selectAll("rect").data(w).
enter().append("rect").attr("class","histogramBar").attr("y",a-b).attr("width",st).
attr("height",0);d?ut.attr("x",function(n){return g(n.x)+(p?ot:ot/2)}):ut.attr("x",
function(n){return g(n.x)-st/2});ut.transition().attr("height",function(n){return a-
b-tt(n.y)}).attr("y",function(n){return tt(n.y)}).duration(p?0:500);p||(ut.append(
"title").text(function(t){return t.numElements+" element"+(t.numElements===1?"":
"s")+"\n"+n.NumericAxisFormatter(t.numElements/w.NumberOfRecords*100)+"%"}),d&&i(
r,a,b,k,w,st,g,lt,at,h,c))}n.createHistogram=r})(t=n.D3Graph||(n.D3Graph={}))}(ExperimentEditor||
(ExperimentEditor={})),function(n){var t;(function(n){function t(t,i,r,u,f,e,o,s,
h){var v=r.index,d=u.func,c,g=i.records,w,b;if(s){if(c=s.records[v][1],!c)return}
else{var nt=g.map(function(n){return d(parseFloat(n[v]))}),tt=function(n,t,i){return isFinite(
i[t])},it=nt.filter(tt);c=n.BoxplotLayout(it)}var y=c.outliers.concat([c.whiskerBottom,
c.whiskerTop]),rt=d3.min(y),ut=d3.max(y),a=o/2,l=o,p=d3.scale.linear().domain([rt,
ut]).range([e-l,a]);h||(w=d3.svg.axis().scale(p).orient("left").tickFormat(n.NumericAxisFormatter),
n.AddAxes(t,null,w,e,l),b=n.GenerateAxisLabel(r,u),n.AddAxisLabels(t,b,"",e,f,l,
a));var ft=l+(f-l-a)/2,k=(f-l-a)/(h?4:6),et=k*.8;n.CreateBoxplotElements(t,c,p,ft,
k,et,h)}n.createBoxplot=t})(t=n.D3Graph||(n.D3Graph={}))}(ExperimentEditor||(ExperimentEditor=
{})),function(n){var t;(function(n){function t(t,i,r,u,f,e,o,s,h){var g=i.records,
nt=f.func,tt=e.func,y=h/2,l=h,a=function(n){return nt(parseFloat(n[r.index]))},v=
function(n){return tt(parseFloat(n[u.index]))},it=function(n,t,i){return isFinite(
a(i[t]))&&isFinite(v(i[t]))},c=g.filter(it),p=d3.scale.linear().domain([d3.min(c,
a),d3.max(c,a)]).range([l,o-y]),w=d3.scale.linear().domain([d3.min(c,v),d3.max(c,
v)]).range([s-l,y]),rt=d3.svg.axis().scale(p).orient("bottom").tickFormat(n.NumericAxisFormatter),
ut=d3.svg.axis().scale(w).orient("left").tickFormat(n.NumericAxisFormatter),b,k,
d;n.AddAxes(t,rt,ut,s,l);b=n.GenerateAxisLabel(r,f);k=n.GenerateAxisLabel(u,e);n.
AddAxisLabels(t,b,k,s,o,l,y);d=t.selectAll("circle").data(c).enter().append("circle").
attr("class","scatterplotPoint").attr("r",0).attr("cx",function(n){return p(a(n))}
).attr("cy",function(n){return w(v(n))});d.transition().attr("r",3).duration(500)}
n.createScatterplot=t})(t=n.D3Graph||(n.D3Graph={}))}(ExperimentEditor||(ExperimentEditor=
{}));C=DataLab.DataContract,function(n){var t;(function(n){function t(t,i,r,u,f,
e,o,s,h){var tt=parseInt(e),it=i.records,a=h/2,l=h,c=n.CategoricalHistogramBins(
it,r,tt,!1),rt=u.index,p,k,d,v,y,nt;c.map(function(n){var t=n.data.map(function(
n){return f.func(parseFloat(n[rt]))});return n.data=t.filter(function(n,t,i){return isFinite(
i[t])}),n.min=d3.min(n.data),n.max=d3.max(n.data),n});p=c.length-n.Constants.defaultCategoryCount;
p>0&&(o+=p*40,t.attr("width",o));var ut=d3.min(c.map(function(n){return n.min})),
ft=d3.max(c.map(function(n){return n.max})),w=d3.scale.ordinal().domain(["  "].concat(
c.map(function(n){return n.name})).concat(["   "])).rangePoints([l,o-a]),b=d3.scale.
linear().domain([ut,ft]).range([s-l,a]),et=d3.svg.axis().scale(w).orient("bottom").
tickFormat(n.CategoricalAxisFormatter),ot=d3.svg.axis().scale(b).orient("left").
tickFormat(n.NumericAxisFormatter);n.AddAxes(t,et,ot,s,l);d3.select("#xAxis").selectAll(
"g").selectAll("text").append("title").text(function(n){return n});k=r.name;d=n.
GenerateAxisLabel(u,f);n.AddAxisLabels(t,k,d,s,o,l,a);var g=(o-l-a-(c.length+2)*
4)/(c.length+2),st=g*.8;for(v=0;v<c.length;v++)y=c[v],nt=t.append("g"),y.data.length>
0&&n.CreateBoxplotElements(nt,n.BoxplotLayout(y.data),b,w(y.x),g,st,!1)}n.createMultiboxplot=
t})(t=n.D3Graph||(n.D3Graph={}))}(ExperimentEditor||(ExperimentEditor={})),function(
n){var t;(function(n){function t(t,i,r,u,f,e,o,s,h){var v=h/2,l=h+50,a=45,c=new n.
CrosstabLayout(i.records,r,u),y=a*(c.numberOfXCategories+1)+v+l,p=a*(c.numberOfYCategories+
1)+v+l,w,d,g;y>o&&(o=y,t.attr("width",y));p>s&&(s=p,t.attr("height",p));var b=d3.
scale.ordinal().domain(["  "].concat(c.xCategories).concat(["   "])).rangePoints(
[l,o-v]),k=d3.scale.ordinal().domain(["  "].concat(c.yCategories).concat(["   "])).
rangePoints([s-l,v]),it=d3.svg.axis().scale(b).orient("bottom").tickFormat(n.CategoricalAxisFormatter),
rt=d3.svg.axis().scale(k).orient("left").tickFormat(n.CategoricalAxisFormatter);
n.AddAxes(t,it,rt,s,l);w=function(n){d3.select(n).selectAll("g").selectAll("text").
append("title").text(function(n){return n})};w("#xAxis");w("#yAxis");d=n.GenerateAxisLabel(
r,f);g=n.GenerateAxisLabel(u,e);n.AddAxisLabels(t,d,g,s,o,l,v);var nt=function(n)
{return function(t){return b(t.xValueName)-(n?0:a/2)}},tt=function(n){return function(
t){return k(t.yValueName)-(n?0:a/2)}},ut=d3.max(c.instances,function(n){return n.
percentOfTotal}),ft=t.append("g").selectAll("rect").data(c.instances).enter().append(
"rect").attr("class","crosstabRect").attr("width",a).attr("height",a).attr("fill-opacity",
0).attr("x",nt(!1)).attr("y",tt(!1)),et=t.append("g").selectAll("text").data(c.instances).
enter().append("text").attr("class","crosstabLabel").text(function(n){return n.count}
).attr("x",nt(!0)).attr("y",tt(!0));ft.transition().attr("fill-opacity",function(
n){return n.percentOfTotal/ut}).duration(500)}n.createCrosstab=t})(t=n.D3Graph||
(n.D3Graph={}))}(ExperimentEditor||(ExperimentEditor={})),function(n){var t;(function(
t){function i(n,t){var i=d3.select(n);i.style("visibility",t?"visible":"hidden");
t&&i.attr("d",i.attr("data-startPoints")).transition().attr("d",i.attr("data-endPoints"))}
function r(r,u){var e=u(),f=e.data,v,h,a,y,p,w;if(f){v=d3.select(r);v.select("*").
remove();var o=e.minWidth,s=e.height,c=e.padding,b=e.minimized,k=e.name,l=v.append(
"svg").attr("width",o).attr("height",s).attr("class","activeSvg");k&&(t.svgMap[k]=
$(r).find("svg")[0]);h=f.xlog()?t.Scales[1]:t.Scales[0];a=f.ylog()?t.Scales[1]:t.
Scales[0];switch(f.graphType()){case 0:n.D3Graph.createHistogram(l,f.datatable,f.
feature,h,a,f.binCount(),f.probabilityDensity.peek(),f.cumulativeDistibution.peek(
),o,s,c,f.layout,b);break;case 1:n.D3Graph.createBoxplot(l,f.datatable,f.feature,
h,o,s,c,f.layout,b);break;case 2:n.D3Graph.createScatterplot(l,f.datatable,f.feature,
f.crossCompareFeature(),h,a,o,s,c);break;case 3:DataLab.DataContract.isNumericFeature(
f.feature.featureType)?(y=f.feature,p=f.crossCompareFeature(),w=a):(y=f.crossCompareFeature(
),p=f.feature,w=h);n.D3Graph.createMultiboxplot(l,f.datatable,p,y,w,f.categoryCount(
),o,s,c);break;case 4:n.D3Graph.createCrosstab(l,f.datatable,f.feature,f.crossCompareFeature(
),h,a,o,s,c)}f.subscribed||(f.probabilityDensity.subscribe(function(n){i("#pdfCurve",
n)}),f.cumulativeDistibution.subscribe(function(n){i("#cdfCurve",n)}),f.subscribed=
!0)}}t.svgMap=Object.create(null);t.CreateGraph=r})(t=n.D3Graph||(n.D3Graph={}))}
(ExperimentEditor||(ExperimentEditor={})),function(n){ko.bindingHandlers.d3graph=
{init:function(t,i){ko.utils.domNodeDisposal.addDisposeCallback(t,function(){delete
n.D3Graph.svgMap[i().name]})},update:function(t,i,r,u){n.D3Graph.CreateGraph(t,i,
u)}}}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(
n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[
i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(t){var
u=function(t){function u(n){var r=this,u,e,f;t.call(this);this.sideLength=60;this.
superHeaderPadding=80;this.headerPadding=100;this.rightPadding=80;this.degreeOfRotation=
35;this.precision=6;u=n.averageAccuracy!==undefined;u&&this.createMetricsTable(n);
this.showMetrics=ko.observable(u);this.metricsIsCollapsed=ko.observable(!1);this.
confusionMatrixIsCollapsed=ko.observable(!1);e=this.superHeaderPadding+this.headerPadding+
this.rightPadding;f=ko.computed(function(){return e+r.sideLength*n.classLabels.length}
);this.height=f;this.width=f;this.xAxisScale=d3.scale.ordinal().domain(n.classLabels).
rangePoints([this.headerPadding+this.superHeaderPadding,this.width()-this.rightPadding-
this.sideLength]);this.yAxisScale=d3.scale.ordinal().domain(n.classLabels).rangePoints(
[this.headerPadding+this.superHeaderPadding,this.height()-this.rightPadding-this.
sideLength]);this.xClassLabels=ko.observableArray(n.classLabels.map(function(n){
return new i(n,0,0,"translate("+(r.xAxisScale(n)-r.headerPadding/4)+","+r.superHeaderPadding+
") rotate("+r.degreeOfRotation+")",!0)}));this.yClassLabels=ko.observableArray(n.
classLabels.map(function(n){return new i(n,r.superHeaderPadding,r.yAxisScale(n),
"",!0)}));this.instances=this.convertFrequencyMatrixToInstances(n.frequencyMatrix,
n.classLabels);this.superHeaders=ko.observableArray([new i(DataLab.LocalizedResources.
multiclassPredictedClass,this.width()/2,this.superHeaderPadding/2,"",!1),new i(DataLab.
LocalizedResources.multiclassActualClass,0,0,"translate("+this.superHeaderPadding/
2+","+this.height()/2+") rotate(-90)",!1)])}return __extends(u,t),u.prototype.convertFrequencyMatrixToInstances=
function(n,t){for(var f,o,i,e,s=[],u=0;u<n.length;u++)for(f=n[u],o=f.reduce(function(
n,t){return n+t}),i=0;i<f.length;i++)if(e=f[i],e!==0||u===i){var h=t[u],c=t[i],l=
new r(h,c,e,o!==0?e/o:0,this.xAxisScale(c)-this.sideLength/2,this.yAxisScale(h)-
this.sideLength/2,this.sideLength);s.push(l)}return ko.observableArray(s)},u.prototype.
createMetricsTable=function(t){var r=this,i=function(t){return t.toFixed?n.Visualization.
reduceToFixedPrecision(t,r.precision):t};this.metrics=[[DataLab.LocalizedResources.
multiclassOverallAccuracy,i(t.overallAccuracy)],[DataLab.LocalizedResources.multiclassAverageAccuracy,
i(t.averageAccuracy)],[DataLab.LocalizedResources.multiclassMicroAveragedPrecision,
i(t.microAveragedPrecision)],[DataLab.LocalizedResources.multiclassMacroAveragedPrecision,
i(t.macroAveragedPrecision)],[DataLab.LocalizedResources.multiclassMicroAveragedRecall,
i(t.microAveragedRecall)],[DataLab.LocalizedResources.multiclassMacroAveragedRecall,
i(t.macroAveragedRecall)]]},u}(DataLab.Util.Disposable),r,i;t.MulticlassConfusionMatrixViewModel=
u;r=function(){function n(n,t,i,r,u,f,e){this.trueLabel=ko.observable(n);this.predictedLabel=
ko.observable(t);this.frequency=ko.observable(i);this.fractionOfActualClass=ko.observable(
r);this.percentOfActualClass=ko.observable((r*100).toFixed(1)+"%");this.isMainDiagonalEntry=
ko.observable(n===t);this.xCoordinate=ko.observable(u);this.yCoordinate=ko.observable(
f);this.sideLength=ko.observable(e)}return n}();t.MulticlassConfusionMatrixInstanceViewModel=
r;i=function(){function t(t,i,r,u,f){this.fullLabel=ko.observable(t);this.label=
ko.observable(f?n.D3Graph.CategoricalAxisFormatter(t):t);this.xCoordinate=ko.observable(
i);this.yCoordinate=ko.observable(r);this.transform=ko.observable(u)}return t}();
t.LabelViewModel=i})(t=n.CustomUX||(n.CustomUX={}))}(ExperimentEditor||(ExperimentEditor=
{}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t;(function(n){var t=function(t){function i(i){t.call(this);
this.loaded=ko.observable(!1);var r=i.matrices,u=r.map(function(t){return new n.
MulticlassConfusionMatrixViewModel(t)});this.viewModels=ko.observableArray(u);this.
loaded(!0)}return __extends(i,t),i}(DataLab.Util.Disposable);n.MulticlassClassificationUXViewModel=
t})(t=n.CustomUX||(n.CustomUX={}))}(ExperimentEditor||(ExperimentEditor={}));__extends=
this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(
i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(
n){var i=function(n){function i(i){var f=this,r,u;n.call(this);this.pngSrcBase="data:image/png;base64,";
r={label:DataLab.LocalizedResources.rOutputStandardOutput,content:i["Standard Output"],
show:!0};u={label:DataLab.LocalizedResources.rOutputStandardError,content:i["Standard Error"],
show:!1};this.showGraphicsDevice=ko.observable(!0);this.outputLogs=ko.observableArray(
[new t(r),new t(u)]);this.pngSrcs=ko.observableArray(i["Graphics Device"].map(function(
n){return f.pngSrcBase+n}))}return __extends(i,n),i}(DataLab.Util.Disposable),t;
n.ROutputViewModel=i;t=function(n){function t(t){n.call(this);this.label=ko.observable(
t.label);this.content=ko.observable(t.content);this.show=ko.observable(t.show)}return __extends(
t,n),t}(DataLab.Util.Disposable);n.OutputLogViewModel=t})(t=n.CustomUX||(n.CustomUX=
{}))}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(
n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[
i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(n){var
r=function(n){function i(i){n.call(this);this.pngSrcBase="data:image/png;base64,";
var r=i.sections.map(function(n){return new t(n)});this.mimeSections=ko.observableArray(
r)}return __extends(i,n),i.prototype.getSectionTemplateByMimeType=function(n){switch(
n){case"img/png;base64":return"mimePngEntry";case"text/plain":default:return"mimeTextEntry"}
},i}(DataLab.Util.Disposable),t,i;n.GenericMimeViewModel=r;t=function(n){function t(
t){n.call(this);this.title=ko.observable(t.title);this.show=ko.observable(!0);var
r=t.values.map(function(n){return new i(n)});this.values=ko.observableArray(r)}return __extends(
t,n),t}(DataLab.Util.Disposable);n.MimeSectionViewModel=t;i=function(n){function t(
t){n.call(this);this.dataType=ko.observable(t.dataType);this.data=ko.observable(
t.data)}return __extends(t,n),t}(DataLab.Util.Disposable);n.MimeSubSectionViewModel=
i})(t=n.CustomUX||(n.CustomUX={}))}(ExperimentEditor||(ExperimentEditor={}));__extends=
this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(
i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(
n){var t=function(n){function t(t){n.call(this);this.text=t.object}return __extends(
t,n),t}(DataLab.Util.Disposable);n.JSONViewModel=t})(t=n.CustomUX||(n.CustomUX={
}))}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(
n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[
i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(t){var
r=function(t){function r(n){var i,r,u,f;t.call(this);i=n.learner;this.learnerName=
ko.observable(DataLab.Util.addSpaceAfterCapitals(i.name));r=[];i.settings&&(u=this.
isDataTable(i.settings)?this.constructLearnerTableViewModelFromDataTable(i.settings,
DataLab.LocalizedResources.learnerSettings,DataLab.Util.addSpaceAfterCapitals,null):
this.constructLearnerTableViewModelFromObject(i.settings,DataLab.LocalizedResources.
learnerSettings,DataLab.LocalizedResources.learnerSettingsName,DataLab.LocalizedResources.
learnerSettingsValue,DataLab.Util.addSpaceAfterCapitals,null),r.push(u));i.weights&&
(f=this.isDataTable(i.weights)?this.constructLearnerTableViewModelFromDataTable(
i.weights,DataLab.LocalizedResources.learnerFeatureWeights,null,this.reducePrecisionWithTypeCheck):
this.constructLearnerTableViewModelFromObject(i.weights,DataLab.LocalizedResources.
learnerFeatureWeights,DataLab.LocalizedResources.learnerFeatureWeightsName,DataLab.
LocalizedResources.learnerFeatureWeightsValue,null,this.reducePrecisionWithTypeCheck),
r.push(f));this.tables=ko.observableArray(r)}return __extends(r,t),r.prototype.constructLearnerTableViewModelFromDataTable=
function(n,t,r,u){var e=this,f;return r&&DataLab.Util.forEach(n.records,function(
n){n[0]=r(n[0].toString())}),u&&DataLab.Util.forEach(n.records,function(n){for(var
t=1;t<n.length;t++)n[t]=u(n[t])}),f=n.features.map(function(n){return e.getLocalizedColumnName(
n.name)}),new i(n.records,t,f)},r.prototype.constructLearnerTableViewModelFromObject=
function(n,t,r,u,f,e){var o=DataLab.Util.getAllPropertyNames(n);return new i(o.map(
function(t){var i={name:f?f(t):t,value:e?e(n[t]):n[t]};return[i.name,i.value]}),
t,[r,u])},r.prototype.isDataTable=function(n){return n.records!==undefined&&n.features!==
undefined&&n.records instanceof Array&&n.features instanceof Array},r.prototype.
getLocalizedColumnName=function(n){return n==="Setting"?DataLab.LocalizedResources.
learnerSettingsName:n==="Value"?DataLab.LocalizedResources.learnerSettingsValue:
n==="Feature"?DataLab.LocalizedResources.learnerFeatureWeightsName:n==="Weight Mean"?
DataLab.LocalizedResources.learnerWeightMean:n==="Weight Standard Deviation"?DataLab.
LocalizedResources.learnerWeightStandardDeviation:n},r.prototype.reducePrecisionWithTypeCheck=
function(t){return typeof t=="number"?DataLab.Util.reducePrecision(t,n.Visualization.
Constants.maxPrecision):t},r}(DataLab.Util.Disposable),i;t.LearnerViewModel=r;i=
function(n){function t(t,i,r){n.call(this);this.table=t;this.headerLabel=ko.observable(
i);this.columnNames=ko.observableArray(r)}return __extends(t,n),t}(DataLab.Util.
Disposable);t.LearnerTableViewModel=i})(t=n.CustomUX||(n.CustomUX={}))}(ExperimentEditor||
(ExperimentEditor={})),function(n){var t;(function(n){var t=function(){function n(
){this.left=ko.observable(0);this.top=ko.observable(0);this.width=ko.observable(
0);this.height=ko.observable(0);this.refreshed=new ko.subscribable}return n.prototype.
refresh=function(){var n=$(window);this.left(n.scrollLeft());this.top(n.scrollTop(
));this.width(n.width());this.height(n.height());this.refreshed.notifySubscribers(
this)},n.getInstance=function(){return n.instance||(n.instance=new n,n.instance.
refresh(),$(window).resize(function(){return n.instance.refresh()}),$(window).scroll(
function(){return n.instance.refresh()})),n.instance},n}();n.ViewPort=t})(t=n.Bubble||
(n.Bubble={}))}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||
function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&
(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(
t){function u(n,t){return n.isLeaf()?t.isLeaf()?n.getLeaf().offset==t.getLeaf().
offset:!1:t.isLeaf()?!1:n.getInterior().offset==t.getInterior().offset}var i=function(
){function n(n){this.index=n}return n.fromLeaf=function(t){return new n(~t.offset)}
,n.fromInterior=function(t){return new n(t.offset)},n.interiorRoot=function(){return new
n(0)},n.leafRoot=function(){return new n(-1)},n.prototype.isLeaf=function(){return this.
index<0},n.prototype.getLeaf=function(){if(!this.isLeaf())throw"node is not leaf";
return{offset:~this.index}},n.prototype.getInterior=function(){if(this.isLeaf())
throw"node is not interior";return{offset:this.index}},n}(),r,f,e,o;t.NodeIdentifier=
i;r=function(){function n(n,t,i,r,u,f){if(this.xScalingFactor=80,this.yScalingFactor=
100,this.radius=40,this.comparisonTolerance=.0001,this.almostTwoPi=(1-this.comparisonTolerance)
*2*Math.PI,this.selectTreeNode=function(n){n.tree.selectNode(n.index)},this.index=
n,this.x=this.xScalingFactor*t,this.y=this.yScalingFactor*i,this.tree=r,this.highlight=
ko.observable(!1),this.feature=ko.observable(null),this.predicate=ko.observable(
null),this.fullFeatureName=ko.observable(null),this.isLeaf=ko.observable(n.isLeaf(
)),this.classPercentage=ko.observable(null),this.showClassPercentage=ko.observable(
!1),this.arcPath=ko.observable(null),this.nodeStatistics=u,this.isPlaceholder=ko.
observable(f),this.isLeaf()){this.computeClassPercentageAndArcPath(u);return}var
e=this.index.getInterior().offset;this.feature(this.tree.featureLabels[e]);this.
predicate(this.tree.predicateLabels[e]);this.fullFeatureName(this.tree.fullFeatureNames[
e]);this.tree.isNodeLoaded(n)||(this.feature(DataLab.LocalizedResources.treeEnsembleExpand),
this.predicate(null))}return n.prototype.computeClassPercentageAndArcPath=function(
n){var t,i,u,f,r,e,o;n["Prediction Type"]==="Histogram"?(u=n.graph.yPredictionValues.
reduce(function(n,t){return n+t}),i=n.graph.yPredictionValues[0]/u,t=i*2*Math.PI,
this.showClassPercentage(!0)):(i=1,t=2*Math.PI);Math.abs(2*Math.PI-t)<this.comparisonTolerance&&
(t=this.almostTwoPi);f=this.computeArcPath(t);this.arcPath(f);r=n.graph.xValues[
0];e=this.tree.formatFeatureLabel(r);this.feature(e);this.fullFeatureName(r);o=(i*
100).toFixed(0);this.classPercentage(o+"%")},n.prototype.computeArcPath=function(
n){var t=this.x,i=this.y-this.radius,r=this.radius*Math.sin(n),u=this.radius*Math.
cos(n),f=this.x+r,e=this.y-u,o=n>Math.PI?1:0;return DataLab.Util.format("M {0},{1} A {2},{3} 0 {4} 1 {5} {6}",
t.toString(),i.toString(),this.radius.toString(),this.radius.toString(),o.toString(
),f.toString(),e.toString())},n}();t.TreeNode=r;f=function(){function n(n,t){this.
start=n;this.end=t;this.highlight=ko.observable(!1);this.text=ko.observable(null)}
return n}();t.TreeEdge=f;e=function(t){function e(n,u){var o=this,f,e,s;if(t.call(
this),this.isLoadingNodes=!1,this.edgeCaptions=!1,this.buttonDragMode=!1,this.spaceDragMode=
!1,this.maxFeatureNameLength=14,this.predicatePrecision=4,f=this,this.nodeProvider=
{getInteriorNodeStatistics:function(n){return u.getInteriorNodeStatistics(f.serverInteriorIds[
n.offset])},getLeafNodeStatistics:function(n){return u.getLeafNodeStatistics(f.serverLeafIds[
n.offset])},getSubtree:function(n,t){u.getSubtree(f.serverInteriorIds[n.offset],
t)}},this.interiorNodes=ko.observableArray([]),this.featureLabels=[],this.predicateLabels=
[],this.fullFeatureNames=[],this.leftChild=[],this.rightChild=[],this.leafNodes=
ko.observableArray([]),this.leftEdges=ko.observableArray([]),this.rightEdges=ko.
observableArray([]),this.serverInteriorIds=[],this.serverLeafIds=[],this.nodeStatisticsForHighlightedPath=
ko.observableArray([]),n.interiorXs.length===0){e=i.fromLeaf({offset:0});s=this.
nodeProvider.getLeafNodeStatistics(e.getLeaf());s.done(function(t){o.leafNodes.push(
new r(e,n.leafXs[0],n.leafYs[0],o,t))});return}this.featureLabels.push(null);this.
predicateLabels.push(null);this.leftChild.push(null);this.rightChild.push(null);
this.interiorNodes.push(new r(i.fromInterior({offset:0}),0,0,this,null,!0));this.
serverInteriorIds.push(null);this.replaceNodeWithTree({offset:0},n,!0)}return __extends(
e,t),e.prototype.nodeToParentMap=function(n){return n.isLeaf()?{offset:this.leafNodeToParentNode[
n.getLeaf().offset]}:{offset:this.interiorNodeToParentNode[n.getInterior().offset]}}
,e.prototype.updateTreeViewHeight=function(){var n=$("#treeViewContainer").innerHeight(
);$("#treeView").height(n)},e.prototype.isRoot=function(n){var t=this.interiorNodes(
).length==0;return t?u(n,i.leafRoot()):u(n,i.interiorRoot())},e.prototype.updateTreeViewWidth=
function(){var n=$("#treeEnsembleViewContainer").innerWidth(),t=$("#treeThumbnailSidebar").
outerWidth(),i=n-t;$("#treeViewContainer").width(i)},e.prototype.updateTreeViewLayout=
function(){this.updateTreeViewHeight();this.updateTreeViewWidth()},e.prototype.getViewDimensions=
function(){var n=$("#treeView").get(0);return{x:n.getBoundingClientRect().left,y:
n.getBoundingClientRect().top,width:n.clientWidth,height:n.clientHeight}},e.prototype.
setPanning=function(n){n===!1?($("#treeInterface").draggable("disable"),$("#treeInterface").
removeClass("ui-state-disabled"),$("#treeViewContainer").css("cursor","auto")):(
$("#treeInterface").draggable("enable"),$("#treeViewContainer").css("cursor","all-scroll"));
this.draggable=n},e.prototype.togglePanning=function(){this.setPanning(!this.draggable)}
,e.prototype.updateCaptions=function(){var n=this,t="",i="";this.edgeCaptions&&(
t=DataLab.LocalizedResources.treeEnsembleTrue,i=DataLab.LocalizedResources.treeEnsembleFalse);
n.leftEdges().forEach(function(n){n.text(t)});n.rightEdges().forEach(function(n)
{n.text(i)})},e.prototype.loadSubtree=function(n){var t=this;Shell.UI.Spinner.show(
);this.nodeProvider.getSubtree(n,function(i){t.replaceNodeWithTree(n,i,!1)})},e.
prototype.initialize=function(){var r=$("#treeToolbar").get(0),t,i,s;if(r){this.
zoomControl=new n.ZoomControl(r,$("#treeInterface").get(0));t=this;$("#treeInterface").
draggable({start:function(n){i={x:n.pageX,y:n.pageY}},drag:function(n,r){var u=n.
pageX-i.x,f=n.pageY-i.y;i={x:n.pageX,y:n.pageY};t.zoomHelper.pan(u,f);r.position.
left=0;r.position.top=0}});this.setPanning(!1);s=new n.PanHelper(r,function(){t.
spaceDragMode!==!0&&(t.buttonDragMode=!t.buttonDragMode,t.togglePanning())});$("#viewMode").
on("change",function(n){t.edgeCaptions=n.currentTarget.checked;t.updateCaptions(
)});$("#treeInterface").keydown(function(n){n.which===32&&t.buttonDragMode===!1&&
(t.setPanning(!0),t.spaceDragMode=!0)});$("#treeInterface").keyup(function(n){n.
which===32&&t.spaceDragMode===!0&&(t.setPanning(!1),t.spaceDragMode=!1)});this.registerForDisposal(
this.zoomControl);var u=$("#treeSvg").get(0),f=$("#transformElement").get(0),e=function(
){return t.getViewDimensions()},h=new n.CoordinateHelper(u,e,f),c=u.createSVGPoint(
),l=function(){t.updateTreeViewLayout()},a=function(){return c},o=function(){},v=
{length:0,item:function(){throw"out of range";}},y=function(){return f.getBBox()}
;this.zoomHelper=new n.ZoomHelper(f,u,h,this.zoomControl,e,l,a,o,o,v,y);this.registerForDisposal(
new DataLab.Util.DisposableKnockoutObject(n.Bubble.ViewPort.getInstance().refreshed.
subscribe(function(){t.updateTreeViewLayout()})));this.updateTreeViewLayout();this.
zoomHelper.fitExperimentWithoutAnimation()}},e.prototype.assignParentNodes=function(
n,t,i){for(var u,r=0;r<n.length;++r)if(u=n[r],u!=null){if(u.isLeaf()){t[u.getLeaf(
).offset]=r;continue}i[u.getInterior().offset]=r}},e.prototype.setupNodeToParentMap=
function(n,t){this.leafNodeToParentNode=new Array(n.length);this.interiorNodeToParentNode=
new Array(t.length);this.assignParentNodes(n,this.leafNodeToParentNode,this.interiorNodeToParentNode);
this.assignParentNodes(t,this.leafNodeToParentNode,this.interiorNodeToParentNode)}
,e.prototype.nodePairToEdgeWithCollection=function(n,t){var i=u(this.leftChild[t.
offset],n),r=u(this.rightChild[t.offset],n),f=i&&r,e=!(i||r);if(f||e)throw"expected child to be exclusively either left or right not both";
return i?{edge:this.leftEdges()[t.offset],collection:this.leftEdges,splits:this.
leftChild}:{edge:this.rightEdges()[t.offset],collection:this.rightEdges,splits:this.
rightChild}},e.prototype.nodePairToEdge=function(n,t){return this.nodePairToEdgeWithCollection(
n,t).edge},e.prototype.addNodes=function(n,t,i,u,f,e){for(var s,h,o=n;o<t.length;
o++)s=f(o),h=new r(s,t[o],i[o],this,e[o]),u.push(h)},e.prototype.createEdgeFromNodeSplit=
function(n,t){var r=this.interiorNodes()[n.offset],e={x:r.x,y:r.y},i=t[n.offset];
if(i==null)return null;var u=i.isLeaf()?this.leafNodes()[i.getLeaf().offset]:this.
interiorNodes()[i.getInterior().offset],o={x:u.x,y:u.y};return new f(e,o)},e.prototype.
addEdges=function(n,t,i,r){for(var f,u=n;u.offset<=t.offset;u={offset:u.offset+1})
(f=this.createEdgeFromNodeSplit(u,i),f!=null)&&r.push(f)},e.prototype.setHighlightInteriorNode=
function(n,t){this.interiorNodes()[n.offset].highlight(t)},e.prototype.setHighlightLeafNode=
function(n,t){this.leafNodes()[n.offset].highlight(t)},e.prototype.setHighlightEdge=
function(n,t,i){var r=this.nodePairToEdge(n,t);r.highlight(i)},e.prototype.setHighlightNodesUpToRoot=
function(n,t){var f=n,r,u;if(n.isLeaf()){if(this.setHighlightLeafNode(n.getLeaf(
),t),this.interiorNodes().length===0)return;r=this.nodeToParentMap(n);this.setHighlightEdge(
f,r,t)}else r=n.getInterior();while(!this.isRoot(i.fromInterior(r)))this.setHighlightInteriorNode(
r,t),u=r,r=this.nodeToParentMap(i.fromInterior(u)),this.setHighlightEdge(i.fromInterior(
u),r,t);this.setHighlightInteriorNode(r,t)},e.prototype.switchHighlightingToNodeToRoot=
function(n){this.previouslyHighlighted&&this.setHighlightNodesUpToRoot(this.previouslyHighlighted,
!1);this.setHighlightNodesUpToRoot(n,!0);this.previouslyHighlighted=n},e.prototype.
clearSelection=function(){this.previouslyHighlighted&&this.setHighlightNodesUpToRoot(
this.previouslyHighlighted,!1);this.previouslyHighlighted=null;this.nodeStatisticsForHighlightedPath(
[])},e.prototype.populateStatistics=function(n){for(var r=[],t,i,u,f;n.length>0;
)t=n.pop(),t.isLeaf()?(u=t.getLeaf().offset,i=this.leafNodes()[u]):(f=t.getInterior(
).offset,i=this.interiorNodes()[f]),r.push(i.nodeStatistics);this.nodeStatisticsForHighlightedPath(
r)},e.prototype.selectNode=function(n){if(!this.isLoadingNodes&&!this.buttonDragMode&&
!this.spaceDragMode)if(this.isNodeLoaded(n)){this.switchHighlightingToNodeToRoot(
n);var t=[];if(t.push(n),!this.isRoot(n)){for(n=i.fromInterior(this.nodeToParentMap(
n));!this.isRoot(n);)t.push(n),n=i.fromInterior(this.nodeToParentMap(n));t.push(
n)}this.populateStatistics(t)}else this.clearSelection(),this.loadSubtree(n.getInterior(
))},e.prototype.isNodeLoaded=function(n){if(n.isLeaf())return!0;var t=this.leftChild[
n.getInterior().offset];return!!t},e.prototype.graphToPreview=function(n){return{
columnWidth:5,labels:n.xValues,predictValues:n.yPredictionValues,trainValues:n.yTrainingValues}}
,e.prototype.replaceNodeWithTree=function(n,t,u){var f=this,c,l,e,s;this.isLoadingNodes=
!0;var p=this.interiorNodes().length,w=this.leafNodes().length,o=function(n){return n.
isLeaf()?i.fromLeaf({offset:n.getLeaf().offset+w}):i.fromInterior({offset:n.getInterior(
).offset+p-1})},h=n.offset;for(this.replaceNodeWithSubtreeRoot(h,t,o),c=t.leftChild.
length,e=1;e<c;++e)this.predicateLabels.push(this.formatPredicateLabel(t.predicate[
e])),this.featureLabels.push(this.formatFeatureLabel(t.feature[e])),this.fullFeatureNames.
push(t.feature[e]),this.serverInteriorIds.push(new i(t.interiorIds[e]).getInterior(
)),t.leftChild[e]==null?(this.leftChild.push(null),this.rightChild.push(null)):(
this.leftChild.push(o(new i(t.leftChild[e]))),this.rightChild.push(o(new i(t.rightChild[
e]))));for(e=0;e<t.leafXs.length;++e)this.serverLeafIds.push(new i(t.leafIds[e]).
getLeaf());this.setupNodeToParentMap(this.leftChild,this.rightChild);var a=function(
n){return o(i.fromInterior({offset:n}))},v=function(n){return o(i.fromLeaf({offset:
n}))},y=[];for(e=0;e<t.leafIds.length;e++)s=v(e).getLeaf(),y[e]=this.nodeProvider.
getLeafNodeStatistics(s);for(l=[],e=0;e<t.interiorIds.length;e++)s=a(e).getInterior(
),l[e]=this.nodeProvider.getInteriorNodeStatistics(s);DataLab.Util.when.apply(null,
y).done(function(){var e=[].slice.apply(arguments);e=e.map(function(n){return f.
formatNodeStatistics(n)});DataLab.Util.when.apply(null,l).done(function(){var o=
[].slice.apply(arguments);o=o.map(function(n){return f.formatNodeStatistics(n)});
f.interiorNodes.replace(f.interiorNodes()[h],new r(new i(h),t.interiorXs[0],t.interiorYs[
0],f,o[0]));f.addNodes(1,t.interiorXs,t.interiorYs,f.interiorNodes,a,o);f.addNodes(
0,t.leafXs,t.leafYs,f.leafNodes,v,e);f.addEdges(n,n,f.leftChild,f.leftEdges);f.addEdges(
n,n,f.rightChild,f.rightEdges);var b=c-1,s={offset:f.leftChild.length-1},y={offset:
s.offset-b+1};if(f.addEdges(y,s,f.leftChild,f.leftEdges),f.addEdges(y,s,f.rightChild,
f.rightEdges),!f.isRoot(i.fromInterior(n))){var p=i.fromInterior(n),w=f.nodeToParentMap(
p),l=f.nodePairToEdgeWithCollection(p,w);l.collection.replace(l.edge,f.createEdgeFromNodeSplit(
w,l.splits))}try{u&&(f.zoomHelper.fitExperimentWithoutAnimation(),f.isLoadingNodes=
!1)}catch(k){}finally{Shell.UI.Spinner.hide()}})})},e.prototype.replaceNodeWithSubtreeRoot=
function(n,t,r){this.predicateLabels[n]=this.formatPredicateLabel(t.predicate[0]);
this.featureLabels[n]=this.formatFeatureLabel(t.feature[0]);this.fullFeatureNames[
n]=t.feature[0];this.leftChild[n]=r(new i(t.leftChild[0]));this.rightChild[n]=r(
new i(t.rightChild[0]));this.serverInteriorIds[n]=new i(t.interiorIds[0]).getInterior(
)},e.prototype.formatPredicateLabel=function(t){var i="≤",r=t.split(i);if(r.length<=
1)return t;var u=r[1],f=parseFloat(u),e=n.Visualization.reduceToFixedPrecision(f,
this.predicatePrecision);return DataLab.Util.format("{0}{1}",i,e.toString())},e.
prototype.formatNodeStatistics=function(t){function e(i){var r=t[i];r&&(t[i]=n.Visualization.
reduceToFixedPrecision(parseFloat(r),f))}var r=t.graph,i,u,f;return r&&(i=t.graph.
yPredictionValues,i&&(u=i.reduce(function(n,t){return n+t}),r.yValueSum=u)),f=6,
e("Split Gain"),e("Gain P-Value"),t},e.prototype.formatFeatureLabel=function(n){
var t=n;return n.length>this.maxFeatureNameLength&&(t=n.slice(0,this.maxFeatureNameLength)+
"..."),t},e}(DataLab.Util.Disposable);t.Tree=e;o=function(n){function t(t){n.call(
this);this.numberOfTreesToLoadOnInitialize=15;this.numberOfTreesToLoadPerRequest=
5;this.scrollBottomToTriggerAdditionalThumbnails=100;this.showLoadMore=ko.observable(
!0);this.loadMore=function(n){var t=n.treeThumbnailUrls().length,i=Math.min(t+this.
numberOfTreesToLoadPerRequest,n.treeCount);n.loadTrees(t,i);n.loadThumbnails(t,i)}
;this.onScroll=function(n){var t=n.treeCount==n.treeThumbnailUrls().length;t||n.
isAlmostScrolledToBottom()&&n.loadMore(n)};this.treeCount=t.learner.treeCount;this.
dataProvider=t.dataProvider;this.treeThumbnailUrls=ko.observableArray([]);this.selectedTreeIndex=
ko.observable(0);this.tree=ko.observable(null)}return __extends(t,n),t.prototype.
unloadedTreesRemaining=function(){return this.treeCount>this.treeThumbnailUrls().
length},t.prototype.isAlmostScrolledToBottom=function(){var n=$("#treeThumbnailSidebar"),
t=n[0].scrollHeight-n.height()-n.scrollTop();return t<this.scrollBottomToTriggerAdditionalThumbnails}
,t.prototype.dispose=function(){n.prototype.dispose.call(this);Shell.UI.Spinner.
hide();this.tree()&&this.tree().dispose();$(window).off("resize","*",this.resizeHandler)}
,t.prototype.loadTrees=function(n,t){for(var u,i=this,r=n;r<t;r++)u={index:r,thumbnailUrl:
ko.observable(""),select:function(n){Shell.UI.Spinner.show();i.selectedTreeIndex(
n.index);i.dataProvider.getRootSubTreeStructure(n.index,function(t){Shell.UI.Spinner.
show();i.tree()&&i.tree().dispose();var r={getInteriorNodeStatistics:function(t)
{return i.dataProvider.getInteriorNodeStatistics(n.index,t)},getLeafNodeStatistics:
function(t){return i.dataProvider.getLeafNodeStatistics(n.index,t)},getSubtree:function(
t,r){i.dataProvider.getSubTreeStructure(n.index,t,r)}};i.tree(new e(t,r));i.tree(
).initialize()})}},this.treeThumbnailUrls.push(u);this.showLoadMore(this.unloadedTreesRemaining(
))},t.prototype.loadThumbnails=function(){function t(t,i){n.dataProvider.getTreeThumbnail(
t,function(n){i.thumbnailUrl("data:image/png;base64,"+n)})}var n=this;DataLab.Util.
forEach(this.treeThumbnailUrls(),function(n){t(n.index,n)})},t.prototype.initialize=
function(){var t=Math.min(this.treeCount,this.numberOfTreesToLoadOnInitialize),n;
for(this.loadTrees(0,t);this.isAlmostScrolledToBottom()&&this.unloadedTreesRemaining(
);)this.loadMore(this);this.treeThumbnailUrls().length>0&&(n=this.treeThumbnailUrls(
)[0],n.select(n));this.loadThumbnails(0,t)},t}(DataLab.Util.Disposable);t.TreeEnsembleViewModel=
o})(t=n.CustomUX||(n.CustomUX={}))}(ExperimentEditor||(ExperimentEditor={}));__extends=
this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(
i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(
t){var r=function(t){function r(n){var r=this,u,f;t.call(this);this.width=500;this.
height=500;this.padding=50;u=n.clusters;this.computeScales(u);f=n.clusters.map(function(
n){return new i(n,r.xScale,r.yScale)});this.clusterViewModels=ko.observableArray(
f)}return __extends(r,t),r.prototype.drawAxes=function(){var t=d3.select(".clusterSvg"),
u=d3.svg.axis().scale(this.xScale).orient("bottom"),f=d3.svg.axis().scale(this.yScale).
orient("left"),i,r;t.insert("g",":first-child").attr("class","axis").attr("id","xAxis").
attr("transform","translate(0,"+(this.height-this.padding)+")").call(u);t.insert(
"g",":first-child").attr("class","axis").attr("id","yAxis").attr("transform","translate("+
this.padding+",0)").call(f);i=DataLab.LocalizedResources.clusterPrincipalComponent+
" 1";r=DataLab.LocalizedResources.clusterPrincipalComponent+" 2";n.D3Graph.AddAxisLabels(
t,i,r,this.height,this.width,this.padding,this.padding)},r.prototype.computeScales=
function(n){var t=function(n,t){var i=n["centroid"+t],r=n["majorAxis"+t],u=n["minorAxis"+
t];return[i+r,i-r,i+u,i-u]},e=n.map(function(n){return t(n,"X")}),o=n.map(function(
n){return t(n,"Y")}),i=function(n,t){var i=[].concat.apply([],n);return t(i)},r=
e.concat(o),u=i(r,d3.min),f=i(r,d3.max);this.xScale=d3.scale.linear().domain([u,
f]).range([this.padding,this.width-this.padding]);this.yScale=d3.scale.linear().
domain([u,f]).range([this.height-this.padding,this.padding])},r}(DataLab.Util.Disposable),
i;t.ClusteringViewModel=r;i=function(){function n(n,i,r){var u=this;this.label=ko.
observable(DataLab.LocalizedResources.clusterLabel+" "+n.label);this.color=ko.observable(
t.Constants.ColorTable[n.label%t.Constants.ColorTable.length]);this.centroidX=ko.
observable(i(n.centroidX));this.centroidY=ko.observable(r(n.centroidY));this.majorAxisX=
n.majorAxisX;this.majorAxisY=n.majorAxisY;this.minorAxisX=n.minorAxisX;this.minorAxisY=
n.minorAxisY;this.unscaledCentroidX=n.centroidX;this.unscaledCentroidY=n.centroidY;
this.angleOfRotation=n.angleOfRotation;this.ellipseRotation=ko.computed(function(
){var n=u.angleOfRotation/(Math.PI/180);return DataLab.Util.format("rotate({0} {1} {2})",
n.toString(),u.centroidX().toString(),u.centroidY().toString())});this.majorAxisLength=
ko.computed(function(){return u.computeDistance("majorAxis",i,r)});this.minorAxisLength=
ko.computed(function(){return u.computeDistance("minorAxis",i,r)})}return n.prototype.
computeDistance=function(n,t,i){var r=this[n+"X"],u=this[n+"Y"];if(r==0&&u==0)return 3;
var f=t(this.unscaledCentroidX+r),e=i(this.unscaledCentroidY+u),o=Math.pow(f-this.
centroidX(),2),s=Math.pow(e-this.centroidY(),2);return Math.sqrt(o+s)},n}();t.ClusterViewModel=
i;ko.bindingHandlers.clusteringAxes={init:function(){},update:function(n,t,i,r,u)
{var f=u.$data;f.drawAxes()}}})(t=n.CustomUX||(n.CustomUX={}))}(ExperimentEditor||
(ExperimentEditor={}));__extends=this.__extends||function(n,t){function r(){this.
constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;
n.prototype=new r},function(n){var t;(function(t){var r=function(n){function t(t)
{n.call(this);var r=t.evaluationResults,u=r.map(function(n){return new i(n)});this.
viewModels=ko.observableArray(u)}return __extends(t,n),t}(DataLab.Util.Disposable),
i;t.RegressionEvaluationContainerViewModel=r;i=function(t){function i(i){t.call(
this);this.metricsIsCollapsed=ko.observable(!1);this.histogramIsCollapsed=ko.observable(
!1);this.precision=6;this.metrics=this.convertMetricsToTable(i.metrics);var r={name:
DataLab.LocalizedResources.regressionError,index:0,elementType:null,featureType:
"Numeric"},u=i.errorHistogram;this.errorHistogram=new n.Visualization.D3GraphViewModel(
0,ko.observable(!1),ko.observable(!1),ko.observable(10),ko.observable(0),ko.observable(
!1),ko.observable(!1),null,r,ko.observable(null),u,0)}return __extends(i,t),i.prototype.
convertMetricsToTable=function(t){function u(t){return t.toFixed?n.Visualization.
reduceToFixedPrecision(t,r):t}var i=this,r=this.precision;return t.features.map(
function(n,r){var f=i.getMetricName(n.name),e=t.records[0][r];return[f,u(e)]})},
i.prototype.getMetricName=function(n){var t=DataLab.LocalizedResources;switch(n)
{case"Mean Absolute Error":return t.regressionMetricMeanAbsoluteError;case"Root Mean Squared Error":
return t.regressionMetricRootMeanSquaredError;case"Relative Absolute Error":return t.
regressionMetricRelativeAbsoluteError;case"Relative Squared Error":return t.regressionMetricRelativeSquaredError
case"Coefficient of Determination":return t.regressionMetricCoefficientOfDetermination
default:return n}},i}(DataLab.Util.Disposable);t.RegressionEvaluationResult=i})(
t=n.CustomUX||(n.CustomUX={}))}(ExperimentEditor||(ExperimentEditor={})),function(
n){var t;(function(t){var i=function(){function t(){}return t.prototype.createViewModelWithMarkup=
function(t,i,r,u){var l=t.visualizationType,f,e,c,a;switch(l){case"default":var v=
t.data,y=t.statistics,p=t.layout;f=ExperimentEditorTemplates._visualizationMarkup;
e=new n.Visualization.VisualizationViewModel(v,y,p);break;case"binaryClassifierEvaluation":
f=ExperimentEditorTemplates._binaryClassificationComparisonMarkup;c={moduleId:i.
parent.id,experimentViewInfo:u};e=new n.CustomUX.BinaryClassificationComparisonUXViewModel(
{visualizationType:null,reports:[t]},c);break;case"binaryClassifierEvaluationComparison":
f=ExperimentEditorTemplates._binaryClassificationComparisonMarkup;c={moduleId:i.
parent.id,experimentViewInfo:u};e=new n.CustomUX.BinaryClassificationComparisonUXViewModel(
t,c);break;case"multiclassClassifierEvaluation":f=ExperimentEditorTemplates._multiclassClassificationMarkup;
e=new n.CustomUX.MulticlassClassificationUXViewModel(t);break;case"regressionEvaluationResults":
if(DataLab.Features.visualizeRegressionHistogram()){f=ExperimentEditorTemplates.
_regressionEvaluationMarkup;e=new n.CustomUX.RegressionEvaluationContainerViewModel(
t);break}else throw new Error("Regression evaluation visualization data encountered but not enabled");
case"rOutput":f=ExperimentEditorTemplates._rOutputMarkup;e=new n.CustomUX.ROutputViewModel(
t);break;case"genericMime":f=ExperimentEditorTemplates._genericMimeMarkup;e=new n.
CustomUX.GenericMimeViewModel(t);break;case"learner":f=ExperimentEditorTemplates.
_learnerMarkup;e=new n.CustomUX.LearnerViewModel(t);break;case"json":f=ExperimentEditorTemplates.
_jSONMarkup;e=new n.CustomUX.JSONViewModel(t);break;case"treeEnsemble":if(!DataLab.
Features.treeVisualizationEnabled()){a={learner:t.learner.defaultLearner,visualizationType:
"learner"};f=ExperimentEditorTemplates._learnerMarkup;e=new n.CustomUX.LearnerViewModel(
a);break}f=ExperimentEditorTemplates._treeEnsembleMarkup;var o=i.parent.executedExperimentId,
s=i.parent.id,h=i.name,w={getTreeThumbnail:function(n,t){r.getModuleVisualizationDataItem(
o,s,h,"tree"+n.toString()+"-thumbnail","text","plain",DataLab.AjaxClient.ResponseType.
Text).done(function(n){t(n)})},getRootSubTreeStructure:function(n,t){r.getModuleVisualizationDataItem(
o,s,h,"tree"+n.toString()+"-layout","application","json",DataLab.AjaxClient.ResponseType.
JSON).done(function(n){t(n)})},getSubTreeStructure:function(n,t,i){var u="tree"+
n.toString()+"-layout"+t.offset;r.getModuleVisualizationDataItem(o,s,h,u,"application",
"json",DataLab.AjaxClient.ResponseType.JSON).done(function(n){i(n)})},getInteriorNodeStatistics:
function(n,t){var i="tree"+n.toString()+"-node"+t.offset.toString()+"-statistics";
return r.getModuleVisualizationDataItem(o,s,h,i,"application","json",DataLab.AjaxClient.
ResponseType.JSON)},getLeafNodeStatistics:function(t,i){var u=n.CustomUX.NodeIdentifier.
fromLeaf(i),f="tree"+t.toString()+"-node"+u.index.toString()+"-statistics";return r.
getModuleVisualizationDataItem(o,s,h,f,"application","json",DataLab.AjaxClient.ResponseType.
JSON)}},b={learner:t.learner,dataProvider:w};e=new n.CustomUX.TreeEnsembleViewModel(
b);break;case"clustering":f=ExperimentEditorTemplates._clusteringMarkup;e=new n.
CustomUX.ClusteringViewModel(t);break;default:throw new Error("Unknown visualization type requested: "+
l);}return{viewModel:e,markup:f}},t}();t.VisualizationViewModelFactory=i})(t=n.Visualization||
(n.Visualization={}))}(ExperimentEditor||(ExperimentEditor={})),function(n){var t=
function(){function t(){this.endpointTooBig=new ko.subscribable}return t.prototype.
download=function(n){var t=n.BaseUri+n.Location+n.AccessCredential;window.open(t)}
,t.prototype.visualize=function(t,i,r,u){var f=null,e;Shell.UI.Spinner.show();r?
(f=t.parent.executedExperimentId,e=i.getModuleVisualizationData(f,t.parent.id,t.
name)):(f=t.parent.parent.experimentId(),e=i.getDatasetVisualizationData(t.parent.
dataset.id));DataLab.Log.featureUsage({featureID:19,groupID:0,experimentID:f,data:
JSON.stringify({port:t.name,isModule:r,nodeName:t.parent.name})});e.done(function(
r){var f,e,s;try{var h={experimentName:t.parent.parent.description(),moduleName:
t.parent.name,portName:t.friendlyName},c=new n.Visualization.VisualizationViewModelFactory,
o=c.createViewModelWithMarkup(r,t,i,u);n.CustomUX.open(o.markup,o.viewModel,"90%",
"90%",null,h)}catch(l){f=DataLab.LocalizedResources.errorParsingVisualizationFile;
e=new Shell.UI.Notifications.Notification(f,"error");e.setActions([Shell.UI.Notifications.
Buttons.close()]);Shell.UI.Notifications.add(e);s=f+" "+l.message;DataLab.Log.customEvent(
{key:"Visualization_Failed",type:"Visualization",data:s})}}).fail(function(n){var
t=DataLab.LocalizedResources.errorGettingVisualizationData,i=DataLab.Util.getErrorDetails(
n),r=new Shell.UI.Notifications.Notification(DataLab.Util.format(t,i),"error"),u;
r.setActions([Shell.UI.Notifications.Buttons.close()]);Shell.UI.Notifications.add(
r);u=t+" "+i;DataLab.Log.customEvent({key:"Visualization_Failed",type:"Visualization",
data:u})}).always(function(){Shell.UI.Spinner.hide()})},t}();n.EndpointDownloader=
t}(ExperimentEditor||(ExperimentEditor={})),function(){function n(n,t){var i=n.filter(
function(n){return n.value===t});if(i.length===1)return i[0]}ko.bindingHandlers.
fxRadio={init:function(t,i){var r=i(),u,f;if("change"in r)throw new Error("This custom binding handles change tracking automatically. Just specify an observable with the 'value' option and it will get set to the selected value.");
if(!ko.isObservable(r.value))throw new Error("'value' custom binding option must be a Knockout observable. Oobservable can contain initial value.");
if(u=r.value,typeof u()=="undefined"&&u(r.values[0].value),f={value:n(r.values,u(
)),values:r.values,trackedit:r.trackedit,change:function(n,t){var i=t.value.value;
u(i)}},typeof f.value=="undefined")throw new Error("The observable has a value not found in the values array.");
$(t).fxRadio(f)}}}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||
function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&
(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(
t){function s(n){var t=n.elementType?n.elementType.typeName:"",i;switch(n.type){
case"Binary":case"Categorical":case"String":return[n.type];case"Numeric":return i=
[r.Numeric],["float","double","complex64","complex128"].indexOf(t)>=0?i.push(r.Double):
["sbyte","byte","short","ushort","int","uint","long","ulong"].indexOf(t)>=0&&i.push(
r.Integer),i;case"Ordinal":return[r.Categorical];case"Object":if(n.elementType){
if(t==="timespan")return[r.TimeSpan];if(t==="datetime")return[r.DateTime]}return[
];default:return[]}}var i=function(){function n(){}return n.equals=function(n,t)
{return n.id===t.id&&n.exclude===t.exclude},n.findRule=function(t,i){if(typeof t==
"string")var f=t,r=i,u=n.all.filter(function(n){return n.id===f&&n.exclude===r})
else var r=t,e=i,u=n.all.filter(function(n){return n.exclude===r&&n.columnKind===
e});return u.length>0?u[0]:n.ColumnNames},n.AllColumns={id:"AllColumns",name:"All columns",
exclude:!1,hidden:!0,inSingleColumnMode:!1,inAllowDuplicatesMode:!1},n.NoColumns=
{id:"NoColumns",name:"No columns",exclude:!0,hidden:!0,inSingleColumnMode:!1,inAllowDuplicatesMode:
!1},n.ColumnNames={id:"ColumnNames",name:"column names",exclude:!1,hidden:!1,inSingleColumnMode:
!0,inAllowDuplicatesMode:!0},n.ColumnIndices={id:"ColumnIndexes",name:"column indices",
exclude:!1,hidden:!1,inSingleColumnMode:!0,inAllowDuplicatesMode:!0},n.ColumnTypes=
{id:"ColumnTypes",name:"column type",exclude:!1,hidden:!1,inSingleColumnMode:!0,
inAllowDuplicatesMode:!1},n.ExcludeColumnNames={id:"ColumnNames",name:"column names",
exclude:!0,hidden:!1,inSingleColumnMode:!1,inAllowDuplicatesMode:!1},n.ExcludeColumnIndices=
{id:"ColumnIndexes",name:"column indices",exclude:!0,hidden:!1,inSingleColumnMode:
!1,inAllowDuplicatesMode:!1},n.ExcludeColumnTypes={id:"ColumnTypes",name:"column type",
exclude:!0,hidden:!1,inSingleColumnMode:!1,inAllowDuplicatesMode:!1},n.Features=
{id:"Features",serializedId:"ColumnTypes",name:"all features",columnKind:"Feature",
exclude:!1,hidden:!1,inSingleColumnMode:!0,inAllowDuplicatesMode:!1},n.Scores={id:
"Scores",serializedId:"ColumnTypes",name:"all scores",columnKind:"Score",exclude:
!1,hidden:!1,inSingleColumnMode:!0,inAllowDuplicatesMode:!1},n.Labels={id:"Labels",
serializedId:"ColumnTypes",name:"all labels",columnKind:"Label",exclude:!1,hidden:
!1,inSingleColumnMode:!0,inAllowDuplicatesMode:!1},n.ExcludeFeatures={id:"Features",
serializedId:"ColumnTypes",name:"all features",columnKind:"Feature",exclude:!0,hidden:
!1,inSingleColumnMode:!1,inAllowDuplicatesMode:!1},n.ExcludeScores={id:"Scores",
serializedId:"ColumnTypes",name:"all scores",columnKind:"Score",exclude:!0,hidden:
!1,inSingleColumnMode:!1,inAllowDuplicatesMode:!1},n.ExcludeLabels={id:"Labels",
serializedId:"ColumnTypes",name:"all labels",columnKind:"Label",exclude:!0,hidden:
!1,inSingleColumnMode:!1,inAllowDuplicatesMode:!1},n.all=[n.AllColumns,n.NoColumns,
n.ColumnNames,n.ColumnIndices,n.ColumnTypes,n.Features,n.Scores,n.Labels,n.ExcludeColumnNames,
n.ExcludeColumnIndices,n.ExcludeColumnTypes,n.ExcludeFeatures,n.ExcludeScores,n.
ExcludeLabels,],n}(),e,r,u,f,o;t.RuleType=i;e=function(){function n(){}return n.
Include={id:"include",name:"Include",exclude:!1,inFirstRule:!0},n.Exclude={id:"exclude",
name:"Exclude",exclude:!0,inFirstRule:!1},n.all=[n.Include,n.Exclude],n}();r=function(
){function n(){}return n.String="String",n.Integer="Integer",n.Double="Double",n.
Boolean="Boolean",n.DateTime="DateTime",n.TimeSpan="TimeSpan",n.Categorical="Categorical",
n.Numeric="Numeric",n.All="All",n}();t.ColumnType=r;u=function(){function n(){}return n.
All="All",n.Feature="Feature",n.Score="Score",n.Label="Label",n}();t.ColumnKind=
u;f=function(n){function t(f,o,s,h,c,l,a){var v=this,y,p;s===void 0&&(s=[]);h===
void 0&&(h=[]);c===void 0&&(c=[]);l===void 0&&(l=[]);n.call(this);this.ruleType=
ko.observable(f);this.ruleCategory=ko.observable(f.exclude);this.selectedColumns=
ko.observableArray(s);this.invalidColumns=ko.observableArray(h);this.columnTypes=
ko.observableArray(c);this.columnKinds=ko.observableArray(l);this.hasRuleTypeError=
ko.observable(!1);this.hasIndexRuleError=ko.observable(!1);this.hasNameRuleError=
ko.observable(!1);this.hasKinds=ko.computed(function(){return v.columnKinds().length>
0&&v.columnKinds()[0]!==u.All});this.registerForDisposal(new DataLab.Util.DisposableKnockoutObject(
this.typeChoices=ko.computed(function(){return v.hasKinds()?o.typeChoices:o.typeChoices.
filter(function(n){return n!==u.All})},this)));this.registerForDisposal(new DataLab.
Util.DisposableKnockoutObject(this.kindChoices=ko.computed(function(){return o.kindChoices}
,this)));this.hasError=ko.computed(function(){return v.hasRuleTypeError()||v.hasIndexRuleError(
)||v.hasNameRuleError()},this);this.registerForDisposal(new DataLab.Util.DisposableKnockoutObject(
this.allowDuplicates=ko.computed(function(){return o.allowDuplicates()},this)));
this.nameInputFocused=ko.observable(!0);this.setNameInputFocused=function(){v.nameInputFocused(
!0)};this.placeholderText=ko.computed(function(){return v.nameInputFocused()||v.
selectedColumns().length!==0?"":DataLab.LocalizedResources.pressEnterColumnName}
);this.columnIndexRegExp=new RegExp("^\\s*(-?\\d+)\\s*$");this.columnRangeRegExp=
new RegExp("^\\s*(\\d+)\\s*-\\s*(\\d+)\\s*$");this.validateIndices=function(){var
i=v.indexList().split(","),n=null,r=i.some(function(i){var r;if(v.columnIndexRegExp.
test(i))r=Number(v.columnIndexRegExp.exec(i)[1]),n=t.validateColumnIndex(r,a);else
if(v.columnRangeRegExp.test(i)){var u=v.columnRangeRegExp.exec(i),f=Number(u[1]),
e=Number(u[2]);n=t.validateColumnRange(f,e,a)}else n=DataLab.LocalizedResources.
columnPickerInputMustBeAListOfPositiveIndicesOrRanges;return!!n});return v.hasIndexRuleError(
r),n};y=this.ruleType().id===i.ColumnIndices.id?s.join(","):"";this.indexList=DataLab.
Validation.validatableObservable(y,this.validateIndices);this.ruleType().id===i.
ColumnIndices.id&&(this.indexList.startValidating(),this.indexList.validate());this.
validateRuleType=function(){var n;return v.isFirstRule()&&v.allowDuplicates()&&(v.
ruleType().exclude||!(v.ruleType().id===i.ColumnNames.id||v.ruleType().id===i.ColumnIndices.
id))&&(n=DataLab.LocalizedResources.columnPickerSelectionRules),v.isFirstRule()&&
v.ruleType().exclude&&(n=DataLab.LocalizedResources.columnPickerFirstRuleNoExlude),
n?v.hasRuleTypeError(!0):v.hasRuleTypeError(!1),n};this.registerForDisposal(new DataLab.
Util.DisposableKnockoutObject(p=ko.computed(function(){return o.firstRule()===v}
)));this.isFirstRule=DataLab.Validation.validatableObservable(p,this.validateRuleType);
this.isFirstRule.startValidating();this.isFirstRule.validate();this.validateNamesSelection=
function(){var n;return o.singleColumnSelection()?v.selectedColumns().length!==1&&
(n=DataLab.LocalizedResources.columnPickerInputNameList):v.selectedColumns().length===
0&&(n=DataLab.LocalizedResources.columnPickerInputMultipleNamesList),v.invalidColumns(
).length>0&&(n=DataLab.LocalizedResources.columnPickerInvalidNames),n?v.hasNameRuleError(
!0):v.hasNameRuleError(!1),n};this.currentColumn=DataLab.Validation.validatableObservable(
"",this.validateNamesSelection);this.ruleType().id===i.ColumnNames.id&&(this.currentColumn.
startValidating(),this.currentColumn.validate());this.currentColumn.subscribe(function(
){if(v.currentColumn()!==""){var n=DataLab.Util.Str.getArrayFromCommaSeparatedString(
v.currentColumn());n.forEach(function(n){n!==""&&(v.selectedColumns().indexOf(n)===
-1||v.allowDuplicates()?v.selectedColumns.push(n):v.invalidColumns.push(n))})}v.
currentColumn.startValidating();v.currentColumn.validate();v.currentColumn("")});
this.allowDuplicates.subscribe(function(){v.isFirstRule.startValidating();v.isFirstRule.
validate()});this.ruleType.subscribe(function(){v.isFirstRule.startValidating();
v.isFirstRule.validate();v.hasIndexRuleError(!1);v.hasNameRuleError(!1);v.selectedColumns.
removeAll();v.invalidColumns.removeAll();v.ruleType().id===i.ColumnNames.id&&(v.
currentColumn(""),v.currentColumn.startValidating(),v.currentColumn.validate());
v.ruleType().id===i.ColumnIndices.id&&(v.indexList(""),v.indexList.startValidating(
),v.indexList.validate());v.ruleType().id===i.ColumnTypes.id&&(v.columnTypes([v.
typeChoices()[0]]),v.columnKinds([v.kindChoices()[0]]));v.ruleType().columnKind&&
(v.columnTypes([r.All]),v.columnKinds([v.ruleType().columnKind]))});this.removeColumnName=
function(n){v.selectedColumns.remove(n);v.currentColumn.startValidating();v.currentColumn.
validate();DataLab.Log.customEvent({key:"RemoveColumnName",type:"ColumnPicker",data:
JSON.stringify({columns:n})})};this.removeInvalidColumnName=function(n){v.invalidColumns.
remove(n);v.currentColumn.startValidating();v.currentColumn.validate();DataLab.Log.
customEvent({key:"RemoveColumnNameInvalid",type:"ColumnPicker",data:JSON.stringify(
{columns:n})})};this.indexList.subscribe(function(){if(v.selectedColumns.removeAll(
),v.indexList()!==""){var n=v.indexList().split(",");n.forEach(function(n){if(v.
columnIndexRegExp.test(n))v.selectedColumns.push(v.columnIndexRegExp.exec(n)[1])
else if(v.columnRangeRegExp.test(n)){var t=v.columnRangeRegExp.exec(n);v.selectedColumns.
push(t[1]+"-"+t[2])}})}});this.registerForDisposal(new DataLab.Util.DisposableKnockoutObject(
this.ruleChoices=ko.computed(function(){var t=i.all.filter(function(n){return o.
singleColumnSelection()&&!n.inSingleColumnMode?!1:o.allowDuplicates()&&!n.inAllowDuplicatesMode||
n.exclude!==v.ruleCategory()||n.hidden&&v.ruleType()!==n||o.hiddenRuleTypes.indexOf(
n)!==-1?!1:!0}),n=t.map(function(n){return n}),r=n.some(function(n){return i.equals(
n,v.ruleType())});return r||v.ruleType(n[0]),n},this)));this.registerForDisposal(
new DataLab.Util.DisposableKnockoutObject(this.ruleCategoryChoices=ko.computed(function(
){return e.all.filter(function(n){return!v.isFirstRule()||n.inFirstRule})},this)))}
return __extends(t,n),t.prototype.toJSON=function(){var n=this.ruleType().id===i.
ColumnTypes.id||this.ruleType().serializedId===i.ColumnTypes.id;return{ruleType:
this.ruleType().serializedId?this.ruleType().serializedId:this.ruleType().id,columns:
function(n,t){return t===i.ColumnNames.id||t===i.ColumnIndices.id?n.selectedColumns(
):undefined}(this,this.ruleType().id),exclude:this.ruleType().exclude,columnTypes:
n?this.columnTypes():undefined,columnKinds:n?this.columnKinds():undefined}},t.prototype.
setWidthToStartingChoiceLabelWidth=function(n){var t=$("label[for='RulesStartingChoice']").
first().outerWidth(!0);$(n).css("min-width",t)},t.validateColumnIndex=function(n,
i){return i===void 0&&(i=null),t.validateColumnRange(n,n,i)},t.validateColumnRange=
function(n,t,i){i===void 0&&(i=null);var u=i&&i.columnAttributes&&i.columnAttributes.
length,r=null;return n<=0||t<=0?r=DataLab.LocalizedResources.columnPickerIndicesMustBeGreaterThan:
t<n?r=DataLab.LocalizedResources.columnPickerInvalidRange:u&&t>u&&(r=DataLab.Util.
format(DataLab.LocalizedResources.columnPickerIndicesOutOfRange,u.toString())),r}
,t}(DataLab.Util.Disposable);t.ColumnPickerRule=f;o=function(t){function e(o,h,c)
{var l=this,v,y,p,a;t.call(this);this.typeChoices=["String","Integer","Double","Boolean",
"DateTime","TimeSpan","Categorical","Numeric","All"];this.kindChoices=["All","Feature",
"Score","Label"];this.hasSchema=ko.observable(c?!0:!1);this.hiddenRuleTypes=ko.observableArray(
[]);this.validColumnNamesFromSchema=[];c&&(this.schemaIsInaccurate=ko.observable(
c.isInaccurate==2),this.autocompleteArray=ko.observableArray([]),DataLab.Util.forEach(
c.columnAttributes,function(n){l.validColumnNamesFromSchema.push(n.name);l.autocompleteArray.
push({label:DataLab.Util.encodeAsHtml(n.name),value:'"'+n.name+'"',isInaccurate:
n.isInaccurate})}),this.schemaIsInaccurate()||(this.typeChoices=[r.All],this.kindChoices=
[u.All],y=new DataLab.Util.StringSet,DataLab.Util.forEach(c.columnAttributes,function(
n){y.unionWith(s(n));!v&&n.isFeature&&(v=!0)}),this.typeChoices.push.apply(this.
typeChoices,y.toArray()),v?this.kindChoices.push("Feature"):this.hiddenRuleTypes.
push(i.Features,i.ExcludeFeatures),Object.keys(c.scoreColumns).length!==0?this.kindChoices.
push("Score"):this.hiddenRuleTypes.push(i.Scores,i.ExcludeScores),Object.keys(c.
labelColumns).length!==0?this.kindChoices.push("Label"):this.hiddenRuleTypes.push(
i.Labels,i.ExcludeLabels)));this.validateColumns=function(n){var t=[],i=[];return t=
n.filter(function(n){return l.validColumnNamesFromSchema.indexOf(n)>=0}),i=n.filter(
function(n){return l.validColumnNamesFromSchema.indexOf(n)===-1}),{valid:t,invalid:
i}};this.rules=DataLab.Util.Disposable.observableArrayOfDisposables([]);this.firstRule=
ko.computed(function(){return l.rules()[0]});this.allowDuplicates=ko.observable(
!1);this.singleColumnSelection=ko.observable(h);this.startingChoices=ko.observable(
[i.AllColumns,i.NoColumns]);this.startingChoice=ko.observable(i.NoColumns);this.
createStartingChoices([i.AllColumns,i.NoColumns],this.startingChoice);this.heading=
ko.computed(function(){return l.singleColumnSelection()?DataLab.LocalizedResources.
singleColumnSelectHeading:DataLab.LocalizedResources.multipleColumnSelectHeading}
);this.startingChoice.subscribe(function(){var n=l.rules().length>0&&l.rules()[0].
ruleType().id===i.AllColumns.id;l.startingChoice()===i.AllColumns?n||l.rules.unshift(
new f(i.AllColumns,l,[],[],[],[],c)):n&&l.rules.shift()});this.firstRule.subscribe(
function(){l.firstRule()&&i.equals(l.firstRule().ruleType(),i.AllColumns)&&l.startingChoice(
i.AllColumns)});this.allowMultipleRules=ko.computed(function(){return!l.allowDuplicates(
)&&!l.singleColumnSelection()},this);this.allowDuplicates.subscribe(function(){var
n,t;if(l.allowDuplicates()){if(DataLab.Log.featureUsage({featureID:31,groupID:27}),
l.rules().length>1&&l.rules.splice(1,l.rules().length-1),l.rules().length>0&&l.rules(
)[0].ruleType().id===i.ColumnNames.id)for(n=0;n<l.firstRule().invalidColumns().length;
)l.firstRule().selectedColumns.indexOf(l.firstRule().invalidColumns()[n])>=0&&(l.
firstRule().selectedColumns.push(l.firstRule().invalidColumns()[n]),l.firstRule(
).invalidColumns.splice(n,1),n=n-1),n=n+1}else if(DataLab.Log.featureUsage({featureID:
32,groupID:27}),l.rules().length>0&&l.firstRule().ruleType().id===i.ColumnNames.
id)for(n=0;n<l.firstRule().selectedColumns().length;){for(t=0;t<n;t++)l.firstRule(
).selectedColumns()[n]===l.firstRule().selectedColumns()[t]&&(l.firstRule().invalidColumns.
push(l.firstRule().selectedColumns()[n]),l.firstRule().selectedColumns.splice(n,
1),n=n-1);n=n+1}l.rules().length>0&&(l.firstRule().currentColumn.startValidating(
),l.firstRule().currentColumn.validate())});try{p=o();p.length!==0&&(a=e.parseRules(
p,function(n,t){var r=l.hasSchema()&&t.id===i.ColumnNames.id&&n.columns?l.validateColumns(
n.columns):{valid:n.columns,invalid:[]},u=n.columnTypes,e=n.columnKinds;l.rules.
push(new f(t,l,r.valid,r.invalid,u,e,c))}),a.isFilter!==null&&a.isFilter!==undefined&&
this.allowDuplicates(!a.isFilter))}catch(w){DataLab.Log.exception(w,"Failed to parse column picker rules JSON when attempting ColumnPickerViewModel construction.")}
this.rules().length===0&&(this.rules([new f(i.ColumnNames,this,[],[],[],[],c)]),
this.allowDuplicates(!1));this.visibleRules=ko.computed(function(){return l.rules(
).length>0&&l.rules()[0].ruleType().hidden?l.rules.slice(1):l.rules()});this.createNewRule=
function(n,t){var r,u,e,o;t===void 0&&(t=!1);r=new f(i.ColumnIndices,l,[],[],[],
[],c);n?(u=l.rules().indexOf(n),e=l.createRulesJSONString(),l.rules.splice(u+1,0,
r)):l.rules.push(r);o=l.createRulesJSONString();t&&DataLab.Log.featureUsage({featureID:
28,groupID:27,data:JSON.stringify({oldRules:e,newRules:o,insertIndex:u})})};this.
removeRule=function(n){var i=l.createRulesJSONString(),t;l.rules.remove(n);t=l.createRulesJSONString(
);DataLab.Log.featureUsage({featureID:29,groupID:27,data:JSON.stringify({oldRules:
i,newRules:t,ruleRemoved:n})})};this.createRulesJSONString=function(){return JSON.
stringify({isFilter:!l.allowDuplicates(),rules:l.rules()})};this.saveRulesAndClose=
function(){var t=l.createRulesJSONString();o(encodeURIComponent(t));n.CustomUX.close(
);DataLab.Log.featureUsage({featureID:30,groupID:27,data:JSON.stringify({rules:t})})}
;this.hasErrors=ko.computed(function(){var n=!1;return l.rules().forEach(function(
t){if(t.hasError()){n=!0;return}}),n},this);this.rules.subscribe(function(){if(l.
rules().length===0)l.createNewRule();else if(l.rules().length>1&&!l.allowMultipleRules(
))throw new Error(DataLab.LocalizedResources.onlyOneRuleAllowedError);})}return __extends(
e,t),e.parseRules=function(n,t){var f=JSON.parse(decodeURIComponent(n));return f.
rules.forEach(function(n){var s=i.findRule(n.ruleType,n.exclude),e=n.columnTypes,
f=n.columnKinds,h,c,o;s.id===i.ColumnTypes.id&&(h=!e||e.length===0||e[0]===r.All,
c=f&&f.length===1&&f[0]!==u.All,c&&h&&(o=i.findRule(n.exclude,f[0]),n.ruleType=o.
id,s=o,n.columnKinds=f));s.id===i.ColumnTypes.id&&e&&e.length===1&&e[0]===r.All&&
f&&f.length===1&&f[0]===u.All&&(o=i.findRule(i.AllColumns.id,n.exclude),n.ruleType=
o.id,s=o,n.columnTypes=[],n.columnKinds=[]);t(n,s)}),f},e.prototype.createStartingChoices=
function(n,t){var i=new Object(null),r;n.forEach(function(n){return i[n.name]=n}
);r=ko.pureComputed({read:function(){return t().name},write:function(n){return t(
i[n])}});this.startingChoicesFxRadioOptions={values:n.map(function(n){return{text:
n.name,value:n.name}}),value:r,trackedit:!1}},e}(DataLab.Util.Disposable);t.ColumnPickerViewModel=
o})(t=n.ColumnPicker||(n.ColumnPicker={}))}(ExperimentEditor||(ExperimentEditor=
{}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t;(function(t){var i=function(n){function i(r,u,f,e){var o=
this;n.call(this,r,u,f);this.schema=f;this.rulesToUse=e;this.selectedColumns=ko.
observableArray();this.chosenSelectedColumns=ko.observableArray();this.chosenAvailableColumns=
ko.observableArray();this.availableColumnsFilterText=ko.observable().extend({rateLimit:
{timeout:500,method:"notifyWhenChangesStop"}});this.selectedColumnsFilterText=ko.
observable().extend({rateLimit:{timeout:500,method:"notifyWhenChangesStop"}});this.
disabledText=DataLab.Util.deferredPureComputed(function(){return!o.hasSchema()||
o.schemaIsInaccurate()?DataLab.LocalizedResources.columnPickerByNameDisabledError:
o.rules().length!==1?DataLab.LocalizedResources.columnPickerColumnsAlreadySelectedError:
t.RuleType.equals(t.RuleType.ColumnNames,o.rules()[0].ruleType())?o.schema&&o.schema.
columnAttributes.length>i.MAX_COLUMNS_SUPPORTED_BY_VIEW?DataLab.Util.format(DataLab.
LocalizedResources.columnPickerTooLargeDatasetError,String(i.MAX_COLUMNS_SUPPORTED_BY_VIEW)):
void 0:DataLab.LocalizedResources.columnPickerColumnsAlreadySelectedError});this.
isEnabled=DataLab.Util.deferredPureComputed(function(){return!o.disabledText()});
this.removeColumnsDisabled=DataLab.Util.deferredPureComputed(function(){return o.
chosenSelectedColumns().length===0});this.chooseColumnsDisabled=DataLab.Util.deferredPureComputed(
function(){return o.chosenAvailableColumns().length===0});this.filterTextPlaceholder=
ko.observable(DataLab.LocalizedResources.columnPickerSearchColumns);this.availableTypesFromSchema=
ko.observable(new DataLab.Util.StringSet);this.availableTypes=DataLab.Util.deferredPureComputed(
function(){return["All Types"].concat(o.availableTypesFromSchema().toArray())});
this.availableColumnsFilterType=ko.observable();this.selectedColumnsFilterType=ko.
observable();this.columnNameToAttributesMap=Object.create(null);this.availableColumnsStatusText=
DataLab.Util.deferredPureComputed(function(){var n=o.availableColumns().length,t=
o.availableColumnsAfterFiltering().length;return n===t?DataLab.Util.format(DataLab.
LocalizedResources.columnPickerColumnsAvailable,String(n)):DataLab.Util.format(DataLab.
LocalizedResources.columnPickerColumnsAvailableShowing,String(n),String(t))});this.
selectedColumnsStatusText=DataLab.Util.deferredPureComputed(function(){var n=o.selectedColumns(
).length,t=o.selectedColumnsAfterFiltering().length;return n===t?DataLab.Util.format(
DataLab.LocalizedResources.columnPickerColumnsSelected,String(n)):DataLab.Util.format(
DataLab.LocalizedResources.columnPickerColumnsSelectedShowing,String(n),String(t))}
);this.setFromRule=function(n){if(n){var t=_.clone(n.selectedColumns());o.selectedColumns(
t)}else o.selectedColumns([])};this.selectColumns=function(){var n=o.selectedColumns(
).concat(o.chosenAvailableColumns());o.selectedColumns(n)};this.unselectColumns=
function(){var n=new DataLab.Util.StringSet(o.selectedColumns());n.exceptWith(o.
chosenSelectedColumns());o.selectedColumns(n.toArray())};e&&(this.rules=e);f&&f.
columnAttributes.forEach(function(n){o.columnNameToAttributesMap[n.name]=n;o.availableTypesFromSchema(
).add(n.type)});r()||(this.startingChoice(t.RuleType.NoColumns),this.rules([new t.
ColumnPickerRule(t.RuleType.ColumnNames,this,[],[],[],[])]));this.rule=DataLab.Util.
deferredPureComputed(function(){var n=o.rules();return o.isEnabled()?n[0]:null});
this.rule()&&this.setFromRule(this.rule());this.registerForDisposal(new DataLab.
Util.DisposableSubscription(this.rule.extend({rateLimit:{method:"notifyWhenChangesStop",
timeout:1e3}}).subscribe(function(n){o.setFromRule(n)})));this.registerForDisposal(
new DataLab.Util.DisposableSubscription(this.selectedColumns.subscribe(function(
){if(o.isEnabled()){var n=_.clone(o.selectedColumns());o.rule().selectedColumns(
n)}})));this.selectedColumnsAfterFiltering=DataLab.Util.deferredPureComputed(function(
){var n=_.clone(o.selectedColumns()),t;return o.selectedColumnsFilterText()&&(n=
n.filter(function(n){return n.toLocaleLowerCase().indexOf(o.selectedColumnsFilterText(
).toLocaleLowerCase())!==-1})),t=o.selectedColumnsFilterType(),t!=="All Types"&&
(n=n.map(function(n){return o.columnNameToAttributesMap[n]}).filter(function(n){
return n.type===t}).map(function(n){return n.name})),n});this.availableColumns=DataLab.
Util.deferredPureComputed(function(){var n=new DataLab.Util.StringSet(f.columnAttributes.
map(function(n){return n.name}));return n.exceptWith(o.selectedColumns()),n.toArray(
)});this.availableColumnsAfterFiltering=DataLab.Util.deferredPureComputed(function(
){var n=_.clone(o.availableColumns()),i=o.availableColumnsFilterText(),t;return i&&
(n=n.filter(function(n){return n.toLocaleLowerCase().indexOf(i.toLocaleLowerCase(
))!==-1})),t=o.availableColumnsFilterType(),t!=="All Types"&&(n=n.map(function(n)
{return o.columnNameToAttributesMap[n]}).filter(function(n){return n.type===t}).
map(function(n){return n.name})),n})}return __extends(i,n),i.MAX_COLUMNS_SUPPORTED_BY_VIEW=
1e4,i}(n.ColumnPicker.ColumnPickerViewModel);t.TwoPaneColumnPickerViewModel=i})(
t=n.ColumnPicker||(n.ColumnPicker={}))}(ExperimentEditor||(ExperimentEditor={}));
__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i
in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r}
,function(n){var t=function(t){function i(i,r){t.call(this);return new n.ScriptEditorParameterViewModel(
i,r)}return __extends(i,t),i}(DataLab.Util.Disposable);n.ScriptEditorViewModel=t}
(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(n,t)
{function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);
r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(t){var i=
function(t){function i(i,r,u){var f=this;t.call(this);this.errorInfo=ko.observable(
new DataLab.Model.ErrorLogInfo);this.errorHelpLink=ko.observable("");this.errorLinkLabel=
ko.observable("");this.showingDetails=ko.observable(!1);this.errorInfo().updateErrorLogInfo(
i,r,u);this.dialogHeading=r+DataLab.LocalizedResources.moduleErrorTitle;this.errorDetails=
ko.observable(this.errorInfo().errorMessage()+"\n"+DataLab.LocalizedResources.moduleErrorStartTime+
this.errorInfo().startTime()+"\n"+DataLab.LocalizedResources.moduleErrorEndTime+
this.errorInfo().endTime());this.errorDescription=ko.observable(this.errorInfo().
trimmedErrorMessage());this.chatVisible=ko.computed(function(){return n.ShellControls.
ChatViewModel.getInstance().showChatButton()});this.errorInfo().errorId()!==""&&
(this.errorLinkLabel(DataLab.Util.format(DataLab.LocalizedResources.errorId,this.
errorInfo().errorId())),this.errorHelpLink(n.Constants.errorHelpLinkGuidStart+this.
errorInfo().errorId()+n.Constants.errorHelpLinkGuidEnd));this.launchErrorHelp=function(
){n.Help.openHelpWindow(f.errorHelpLink())};this.toggleChat=function(){n.ShellControls.
ChatViewModel.getInstance().toggle()};this.launchForum=function(){var n=window.open(
DataLab.LocalizedResources.errorForumLink,"_blank");n&&n.focus()}}return __extends(
i,t),i}(DataLab.Util.Disposable);t.ModuleErrorViewModel=i})(t=n.ModuleError||(n.
ModuleError={}))}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||
function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&
(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){function g(t)
{return t!==n.MonacoMimeTypes.PlainText}function nt(t){t=t.toLowerCase().trim();
var r=t?(t.match(/\.[0-9a-z]+$/)||[""])[0]:"",i=null;switch(r){case".r":i=n.MonacoMimeTypes.
R;break;case".py":i=n.MonacoMimeTypes.Python;break;case".hql":i=n.MonacoMimeTypes.
Hive;break;case".ql":i=n.MonacoMimeTypes.Hive;break;case".sql":i=n.MonacoMimeTypes.
Sql;break;case".js":i=n.MonacoMimeTypes.JavaScript;break;case".ts":i=n.MonacoMimeTypes.
TypeScript;break;default:i=n.MonacoMimeTypes.PlainText}return i}var ut,r,t,s,u,e,
h,c,l,a,v,f,o,tt,y,it,p,w,rt,b,i,k,d;(function(n){n[n.Textbox=0]="Textbox";n[n.Checkbox=
1]="Checkbox";n[n.Textarea=2]="Textarea";n[n.Select=3]="Select";n[n.Link=4]="Link";
n[n.Button=5]="Button";n[n.Credential=6]="Credential";n[n.ColumnPicker=7]="ColumnPicker";
n[n.ParameterRange=8]="ParameterRange";n[n.EditableText=9]="EditableText";n[n.MultiSelect=
10]="MultiSelect";n[n.DataGatewaySelector=11]="DataGatewaySelector"})(n.PropertyItemType||
(n.PropertyItemType={}));ut=n.PropertyItemType;r=function(n){function t(t){n.call(
this);this.childParameters=ko.observableArray();this.property=t;this.isStaticContent=
ko.observable(!1);this.type=null;this.currentError=ko.observable("");this._isExperimentLevel=
ko.observable(t instanceof DataLab.Model.WebServiceParameter);var i=t instanceof
DataLab.Model.ModuleNodeParameter&&t.descriptor instanceof DataLab.Model.ModeModuleParameterDescriptor;
this.isLinkable=!i;this.focus=ko.observable(!1);this.templateType=function(){throw new
Error("PropertyViewModel is abstract.");};this.linkedParameterName=ko.computed(function(
){if(t instanceof DataLab.Model.ModuleNodeParameter){var n=t.linkedWebServiceParameter(
);if(n)return n.name}return""})}return __extends(t,n),Object.defineProperty(t.prototype,
"isDisabled",{get:function(){throw new Error("PropertyViewModel is abstract.");}
,enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isExperimentLevel",
{get:function(){return this._isExperimentLevel},enumerable:!0,configurable:!0}),
t.experimentPropertyFactory=function(n){if(n instanceof DataLab.Model.LinkProperty)
return new o(n);if(n instanceof DataLab.Model.StaticProperty)return new p(n);if(
n instanceof DataLab.Model.BooleanProperty)return new w(n);throw new Error("Unexpected property type on experiment");
},t}(DataLab.Util.Disposable);n.PropertyViewModel=r;t=function(t){function i(r,u)
{var f=this;if(t.call(this,r),this.autocompleteArray=r.autocompleteArray,r.descriptor
instanceof DataLab.Model.BooleanModuleParameterDescriptor)this.type=1;else if(r.
descriptor instanceof DataLab.Model.MultiChoiceModuleParameterDescriptor)this.type=
10;else if(r.descriptor instanceof DataLab.Model.ChoiceModuleParameterDescriptor)
this.type=3,r.descriptor instanceof DataLab.Model.ModeModuleParameterDescriptor&&
r.childParameters&&DataLab.Util.forEach(r.childParameters,function(n){DataLab.Util.
forEach(n,function(n){var t=i.createParameterViewModel(n,u);f.registerForDisposal(
t);f.childParameters.push(t)})});else if(r.descriptor instanceof DataLab.Model.ScriptModuleParameterDescriptor)
{if(!(this instanceof n.MonacoParameterViewModel))throw new Error("Attempted to instantiate PropertyViewModel for Script directly. Use factory method createParameterViewModel instead.");
this.type=2}else this.type=r.descriptor instanceof DataLab.Model.CredentialModuleParameterDescriptor?
6:r.descriptor instanceof DataLab.Model.ColumnPickerModuleParameterDescriptor?7:
r.descriptor instanceof DataLab.Model.ParameterRangeModuleParameterDescriptor?8:
r.descriptor instanceof DataLab.Model.DataGatewayNameModuleParameterDescriptor?11:
0;this.linkClass=ko.computed(function(){var n=f.property.isLinked()?"parameterIsLinked ":
"parameterIsNotLinked ";return n+"linkStatus propertyEditorButton"});this._isDisabled=
ko.computed(function(){return!1});this.templateType=function(){switch(f.type){case
1:return"checkboxParameter";case 3:return"selectParameter";case 2:return"textAreaParameter"
case 0:return"inputParameter";case 6:return"credentialParameter";case 7:return"columnPickerParameter"
case 8:return"parameterRangeParameter";case 10:return"multiSelectParameter";case
11:return"DataGatewayNameParameter"}}}return __extends(i,t),i.createParameterViewModel=
function(n,t){return n.descriptor instanceof DataLab.Model.ScriptModuleParameterDescriptor?
new v(n,t):n.descriptor instanceof DataLab.Model.ColumnPickerModuleParameterDescriptor?
new s(n,t):n.descriptor instanceof DataLab.Model.ParameterRangeModuleParameterDescriptor?
u.createParameterRangeViewModel(n,t):n.descriptor instanceof DataLab.Model.MultiChoiceModuleParameterDescriptor?
new h(n,t):n.descriptor instanceof DataLab.Model.DataGatewayNameModuleParameterDescriptor?
new k(n,t):n.descriptor instanceof DataLab.Model.CredentialModuleParameterDescriptor&&
n.name=="Server User and Password"&&n.descriptor.credentialDescriptor&&n.descriptor.
credentialDescriptor.CredentialType==="SqlAzureCredential"?new d(n,t):new i(n,t)}
,Object.defineProperty(i.prototype,"isDisabled",{get:function(){return this._isDisabled}
,enumerable:!0,configurable:!0}),i.prototype.validate=function(){var n=this.property;
return n.validate()},i}(r);n.ParameterViewModel=t;s=function(t){function i(i,r){
var s=this,f,o,u,e,h;t.call(this,i,r);this.isLinkable=!1;this.launchDisabled=ko.
observable(!1);f=i.descriptor;o=decodeURIComponent(i.value());o[0]!=="{"&&o[0]!==
"["&&i.descriptor.defaultValue&&i.descriptor.defaultValue!==""&&(u=new n.ColumnPicker.
ColumnPickerViewModel(i.value,f.singleColumnSelection),e=[],u.rules.removeAll(),
h=i.descriptor.defaultValue.split("|"),h.forEach(function(t){var i=t.trim().replace(
/([A-Z])/g,",$1").split(",").slice(1);i.length===1?i[0]==="All"&&e.push(new n.ColumnPicker.
ColumnPickerRule(n.ColumnPicker.RuleType.AllColumns,u)):e.push(new n.ColumnPicker.
ColumnPickerRule(n.ColumnPicker.RuleType.ColumnTypes,u,[],[],[i[0]],[i[1]]))}),e.
length>0&&(u.rules(e),e=[]),u.rules().length>0&&i.value(u.createRulesJSONString(
)),u.dispose());this.openColumnPicker=function(){function o(t){var e,o;if(Shell.
UI.Spinner.hide(),DataLab.Features.columnPickerRulesRedesignEnabled()){var u=new
n.ColumnPicker.ColumnPickerViewModel(i.value,f.singleColumnSelection,t),r=new n.
ColumnPicker.TwoPaneColumnPickerViewModel(i.value,f.singleColumnSelection,t,u.rules),
s=[new n.CustomUX.CustomUXView(ExperimentEditorTemplates._twoPaneColumnPickerMarkup,
r,DataLab.LocalizedResources.columnPickerByName,r.isEnabled,r.disabledText),new n.
CustomUX.CustomUXView(ExperimentEditorTemplates._columnPickerMarkup,u,DataLab.LocalizedResources.
columnPickerWithRules)];n.CustomUX.openMultipleViews(s,"450px","900px")}else e=new
n.ColumnPicker.ColumnPickerViewModel(i.value,f.singleColumnSelection,t),o=ExperimentEditorTemplates.
_columnPickerOldDesignMarkup,n.CustomUX.open(o,e,"350px","710px")}var u,t,e;s.launchDisabled(
!0);Shell.UI.Spinner.show();u=null;t=null;i.parent&&(u=i.parent.ports[f.columnPickerFor],
t=u.connectedOutputPort);e=DataLab.Util.when(null);DataLab.Features.schemaPropagationEnabled(
)?u&&(e=DataLab.Model.computeSchemaOfInputPort(r,u)):t&&t.schemaEndpoint&&(t.parent
instanceof DataLab.Model.DatasetNode?e=r.getDatasetSchema(t.parent.dataset.id):t.
parent instanceof DataLab.Model.ModuleNode&&(e=r.getModuleOutputSchema(t.parent.
executedExperimentId,t.parent.id,t.name)));e.done(function(n){o(n)}).fail(function(
){o()}).always(function(){s.launchDisabled(!1)})}}return __extends(i,t),i}(t);n.
ColumnPickerParameterViewModel=s;u=function(n){function t(t,i){var u=this,o,r,e,
f;n.call(this,t,i);this.type=8;o=decodeURIComponent(this.property.value());r=t.descriptor;
this.title=t.descriptor.friendlyName;this.minLimit=r.minLimit;this.maxLimit=r.maxLimit;
this.sliderMin=r.sliderMin;this.sliderMax=r.sliderMax;this.logCapable=r.isLog;this.
hasIndexRuleError=ko.observable(!1);o[0]!=="{"&&o[0]!=="["&&t.descriptor.defaultValue&&
t.descriptor.defaultValue!==""?(e=r.sliderMax-r.sliderMin,r.isInt?(this.minValue=
ko.observable(Math.round(r.sliderMin+.1*e)),this.maxValue=ko.observable(Math.round(
r.sliderMax-.1*e))):(this.minValue=ko.observable(r.sliderMin+.1*e),this.maxValue=
ko.observable(r.sliderMax-.1*e)),this.count="3",this.isLogarithmic=ko.observable(
!1),this.defaultLiteralValue=r.defaultValue.replace(/;/g,","),this.useRangeBuilder=
ko.observable(!1)):(f=JSON.parse(o),this.minValue=ko.observable(f.minValue),this.
maxValue=ko.observable(f.maxValue),this.count=f.count,this.isLogarithmic=ko.observable(
f.isLogarithmic),this.defaultLiteralValue=f.literal,this.useRangeBuilder=ko.observable(
f.useRangeBuilder));this.logMinLimit=this.sliderMin<=0&&this.logCapable?.0001:Math.
log(this.sliderMin);this.logMaxLimit=Math.log(this.sliderMax);this.makeJsonString=
function(){var n=encodeURIComponent(JSON.stringify({ParameterType:u.parameterType,
useRangeBuilder:u.useRangeBuilder(),literal:u.literalList(),isLogarithmic:u.isLogarithmic(
),minValue:u.minValue(),maxValue:u.maxValue(),count:u.countValidatable()}));u.property.
value(n)}}return __extends(t,n),t.createParameterRangeViewModel=function(n,t){var
r=n.descriptor,i;return i=r.isInt?new c(n,t):new l(n,t),i.finishConstruction(),i}
,t.prototype.finishConstruction=function(){var n=this,t=new RegExp("^\\s*(\\d+)\\s*$");
this.validateCount=function(){var i,r,u;return t.test(n.countValidatable())?(r=t.
exec(n.countValidatable())[1],u=1+n.maxValue()-n.minValue(),Number(r)>=u&&n.parameterType==
"Integer"?i=DataLab.Util.format(DataLab.LocalizedResources.parameterRangeErrorTooManyPoints,
u.toString()):Number(r)<1&&(i=DataLab.LocalizedResources.parameterRangeCountMustBeInteger)):
i=DataLab.LocalizedResources.parameterRangeCountMustBeInteger,i?n.hasIndexRuleError(
!0):n.hasIndexRuleError(!1),i};this.countValidatable=DataLab.Validation.validatableObservable(
this.count,this.validateCount);this.countValidatable.startValidating();this.countValidatable.
validate();this.validateItems=function(){var i=n.literalList().split(","),t;return i.
forEach(function(i){var u,r;if(n.literalItemRegExp.test(i)){if(u=n.literalItemRegExp.
exec(i)[1],Number(u)<n.minLimit){t=DataLab.Util.format(DataLab.LocalizedResources.
parameterRangeErrorMustBeGreaterThan,n.minLimit.toString());return}if(Number(u)>
n.maxLimit){t=DataLab.Util.format(DataLab.LocalizedResources.parameterRangeErrorMustBeLessThan,
n.maxLimit.toString());return}}else if(n.literalRangeRegExp.test(i)){if(r=n.literalRangeRegExp.
exec(i),Number(r[1])<n.minLimit){t=DataLab.Util.format(DataLab.LocalizedResources.
parameterRangeErrorMustBeGreaterThan,n.minLimit.toString());return}if(Number(r[2])>
n.maxLimit){t=DataLab.Util.format(DataLab.LocalizedResources.parameterRangeErrorMustBeLessThan,
n.maxLimit.toString());return}if(Number(r[2])<Number(r[1])){t=DataLab.LocalizedResources.
parameterRangeInvalidRange;return}}else{n.parameterType==="Integer"?t=DataLab.LocalizedResources.
parameterRangeInputMustBeIntegersOrRanges:n.parameterType==="Double"&&(t=DataLab.
LocalizedResources.parameterRangeInputMustBeDoubles);return}}),t?n.hasIndexRuleError(
!0):n.hasIndexRuleError(!1),t};this.literalList=DataLab.Validation.validatableObservable(
this.defaultLiteralValue,this.validateItems);this.literalList.startValidating();
this.literalList.validate();this.rangeString=ko.computed(function(){var t,i,r;return n.
parameterType==="Integer"?t=""+n.minValue()+" - "+n.maxValue():(i=n.minValue()<1?
n.minValue().toExponential(2):n.minValue().toPrecision(3),r=n.maxValue()<1?n.maxValue(
).toExponential(2):n.maxValue().toPrecision(3),t=""+i+" - "+r),t},this);this.minValue.
subscribe(function(){n.countValidatable.validate()});this.maxValue.subscribe(function(
){n.countValidatable.validate()});this.countValidatable.subscribe(function(){n.makeJsonString(
)});this.literalList.subscribe(function(){n.makeJsonString()});this.minValue.subscribe(
function(){n.makeJsonString()});this.maxValue.subscribe(function(){n.makeJsonString(
)});this.useRangeBuilder.subscribe(function(){n.makeJsonString()});this.isLogarithmic.
subscribe(function(){n.makeJsonString()})},t}(t);n.ParameterRangeViewModel=u;e=function(
){function n(n,t,i){var r=this;this.value=n;this.displayValue=t;this.isSelected=
ko.observable(i);this.classString=ko.computed(function(){return r.isSelected()?"multiselectSelected":
"multiselectNotSelected"},this)}return n}();n.EnumItemViewModel=e;h=function(n){
function t(t,i){var r=this,u,f,o;n.call(this,t,i);t.value.validate=function(){return[
]};u=decodeURIComponent(this.property.value());this.type=10;f=t.descriptor;this.
enumItems=ko.observableArray([]);u[0]!=="{"&&u[0]!=="["&&t.descriptor.defaultValue?
f.choices().forEach(function(n){r.enumItems().push(new e(n.value,n.displayValue,
n.value===f.defaultValue))}):(o=JSON.parse(u),o.enumItems.forEach(function(n){r.
enumItems.push(new e(n.value,n.displayValue,n.selected))}));this.buttonLabel=ko.
computed(function(){var n=[];return r.enumItems().forEach(function(t){t.isSelected(
)&&n.push(t.displayValue)}),n.length===0?DataLab.LocalizedResources.MultiselectLabelNoneSelected:
n.length===1?n[0]:DataLab.Util.format(DataLab.LocalizedResources.MultiselectLabelManySelected,
n.length.toString())});this.JSONString=ko.computed(function(){var t=[],n;return r.
enumItems().forEach(function(n){t.push({value:n.value,displayValue:n.displayValue,
selected:n.isSelected()})}),n=encodeURIComponent(JSON.stringify({enumItems:t})),
r.property.value(n),n})}return __extends(t,n),t}(t);n.EnumSweepViewModel=h;c=function(
n){function t(t,i){var r=this;n.call(this,t,i);this.logMin=ko.computed({read:function(
){return Math.log(r.minValue())},write:function(n){r.minValue(Math.round(Math.exp(
n)))},owner:this});this.logMax=ko.computed({read:function(){return Math.log(r.maxValue(
))},write:function(n){r.maxValue(Math.round(Math.exp(n)))},owner:this});this.linSliderStep=
1;this.logSliderStep=(this.logMaxLimit-this.logMinLimit)*.005;this.parameterType=
"Integer";this.literalItemRegExp=new RegExp("^\\s*(-?\\d+)\\s*$");this.literalRangeRegExp=
new RegExp("^\\s*(-?\\d+)\\s*-\\s*(-?\\d+)\\s*$")}return __extends(t,n),t}(u);n.
IntegerParameterRangeViewModel=c;l=function(n){function t(t,i){var r=this;n.call(
this,t,i);this.logMin=ko.computed({read:function(){return Math.log(r.minValue())}
,write:function(n){r.minValue(Math.exp(n))},owner:this});this.logMax=ko.computed(
{read:function(){return Math.log(r.maxValue())},write:function(n){r.maxValue(Math.
exp(n))},owner:this});this.linSliderStep=(this.sliderMax-this.sliderMin)*.005;this.
logSliderStep=(this.logMaxLimit-this.logMinLimit)*.005;this.parameterType="Double";
this.literalItemRegExp=new RegExp("^\\s*((-?\\d+\\.?\\d*((e|E)-?\\d+))|(-?\\d*\\.?\\d+))\\s*$");
this.literalRangeRegExp=new RegExp("^\\s*((-?\\d+\\.?\\d*((e|E)-?\\d+))|(-?\\d*\\.?\\d+))\\s*$")}
return __extends(t,n),t}(u);n.DoubleParameterRangeViewModel=l;a=function(n){function t(
t,i){if(n.call(this,t,i),!(t.descriptor instanceof DataLab.Model.ScriptModuleParameterDescriptor)
)throw new Error("MonacoParameterViewModel must be passed a ScriptModuleParameterDescriptor");
var r=t.descriptor.scriptName;this.monacoMimeType=nt(r);this.untabify=g(this.monacoMimeType)}
return __extends(t,n),t}(t);n.MonacoParameterViewModel=a;v=function(t){function i(
i,r){function f(){var t=i.value(),r=this.views[0].viewModel.temporaryPropertyValue(
),n;if(t!==r&&(n=confirm(DataLab.LocalizedResources.scriptEditorHasChangesConfirmation),
!n))return!0}var u=this;t.call(this,i,r);this.launchDisabled=ko.observable(!1);this.
showPopupIcon=ko.observable(!1);this.temporaryPropertyValue=DataLab.Validation.validatableObservable(
i.value(),i.validateValue);!this.isExperimentLevel()&&DataLab.Features.enableScriptEditorPopup(
)&&this.showPopupIcon(!0);this.openScriptEditor=function(){DataLab.Log.featureUsage(
{featureID:149,groupID:148});u.launchDisabled(!0);var t=new n.ScriptEditorViewModel(
i,r);n.CustomUX.open(ExperimentEditorTemplates._scriptEditorMarkup,t,"90%","90%",
f,null,!0,"scriptEditorDialogWindow")};this.closeDialogAndSave=function(){return u.
launchDisabled(!1),i.value(u.temporaryPropertyValue()),n.CustomUX.close(),!0}}return __extends(
i,t),i}(a);n.ScriptEditorParameterViewModel=v;n.isUntabifyNeeded=g;n.getMimeTypeForScriptName=
nt;f=function(n){function t(t){n.call(this,t);this.isStaticContent(!0);this._isDisabled=
ko.computed(function(){return!0})}return __extends(t,n),Object.defineProperty(t.
prototype,"isDisabled",{get:function(){return this._isDisabled},enumerable:!0,configurable:
!0}),t}(r);n.StaticContentPropertyViewModel=f;o=function(n){function t(t,i){n.call(
this,t);this.type=4;this.templateType=function(){return"linkProperty"};this.onClick=
i?function(n,t){t.preventDefault();i(t)}:function(){}}return __extends(t,n),t}(f);
n.LinkPropertyViewModel=o;tt=function(n){function t(t,i){var r=this;i?n.call(this,
t,function(){r.endpoint()&&r.endpoint().Size!==-1&&i.download(r.endpoint())}):n.
call(this,t);this.endpoint=t.endpoint}return __extends(t,n),Object.defineProperty(
t.prototype,"endpointDownloader",{set:function(n){var t=this;this.onClick=function(
i,r){r.preventDefault();t.endpoint()&&t.endpoint().Size!==-1&&n.download(t.endpoint(
))}},enumerable:!0,configurable:!0}),t}(o);n.EndpointPropertyViewModel=tt;y=function(
n){function t(t,i){n.call(this,t);this.type=5;this.templateType=function(){return"buttonProperty"}
;this.onClick=i?function(n,t){t.preventDefault();i(t)}:function(){}}return __extends(
t,n),t}(f);n.ButtonPropertyViewModel=y;it=function(t){function i(i,r,u,f,e){var o=
this;t.call(this,i);this.endpoint=i.endpoint;this.moduleName=r;this.clickDisabled=
ko.observable(!1);this.onClick=function(t,i){o.clickDisabled()||(o.clickDisabled(
!0),i&&i.preventDefault(),o.endpoint()&&o.endpoint().Size>0?o.property.id===0?(Shell.
UI.Spinner.show(),DataLab.Log.customEvent({key:"TryingToLoadModuleErrorMessageOnUserClick",
type:"ModuleErrorMessageLoad"}),DataLab.Util.then(f.getModuleErrorLog(e,u),function(
t){Shell.UI.Spinner.hide();var i=new n.ModuleError.ModuleErrorViewModel(t,r,u),f=
i.errorInfo().containsAdditionalInformation()?"330px":"190px";n.CustomUX.open(ExperimentEditorTemplates.
_moduleErrorMarkup,i,f,"550px")}).fail(function(){Shell.UI.Spinner.hide();var n=
new Shell.UI.Notifications.Notification(DataLab.LocalizedResources.moduleErrorDialogCouldNotLoad,
"error");n.setActions([Shell.UI.Notifications.Buttons.close(function(){})]);Shell.
UI.Notifications.add(n);DataLab.Log.customEvent({key:"FailedToLoadModuleErrorMessageOnUserClick",
type:"ModuleErrorMessageLoadFailed"})}).always(function(){o.clickDisabled(!1)})):
o.clickDisabled(!1):o.clickDisabled(!1))}}return __extends(i,t),i}(y);n.EndpointDialogPropertyViewModel=
it;p=function(n){function t(t){n.call(this,t);this.type=0;this.templateType=function(
){return"staticTextProperty"}}return __extends(t,n),t}(f);n.StaticTextPropertyViewModel=
p;w=function(n){function t(t){n.call(this,t);this.type=1;this.templateType=function(
){return"checkboxProperty"}}return __extends(t,n),t}(r);n.CheckboxPropertyViewModel=
w;rt=function(n){function t(t){n.call(this,t);this.type=9;this.templateType=function(
){return"editableTextAreaProperty"}}return __extends(t,n),t}(r);n.EditableTextPropertyViewModel=
rt;b="++++";i=[];i[1]=DataLab.LocalizedResources.notRegistered;i[3]=DataLab.LocalizedResources.
offline;i[2]=DataLab.LocalizedResources.online;i[4]=DataLab.LocalizedResources.online;
k=function(t){function r(i,r){var u=this;t.call(this,i,r);this.addNewChoice=new DataLab.
Model.ChoiceParameterValue(b,DataLab.LocalizedResources.addNewDataGatewayChoice);
this.refreshingGateways=!1;this.isPollingGateways=!1;this.dataGatewayBackend=r.getDataGatewayBackend(
);this.property.value()===this.addNewChoice.value&&this.property.value("");this.
existingChoice=new DataLab.Model.ChoiceParameterValue(this.property.value(),this.
property.value());this.choices=ko.observableArray([this.existingChoice,this.addNewChoice]);
this.gatewayListFresh=!1;this.dataGatewayBackend.getGatewaysCached().then(this.refreshChoices.
bind(this));i.value.validate=function(){if(i instanceof DataLab.Model.ModuleNodeParameter)
{var n=i.descriptor.validate(u.property.value());if(n)return[n]}return u.gatewayListFresh?
u.gatewayIsValid(u.property.value(),u.choices())?[]:[DataLab.LocalizedResources.
validationInvalidDataGateway]:[]};this.type=11;this.templateType=function(){return"dataGatewayNameParameter"}
;this.registerForDisposal(new DataLab.Util.DisposableSubscription(this.property.
value.subscribe(function(n){u.oldValue=n},null,"beforeChange")));this.registerForDisposal(
new DataLab.Util.DisposableSubscription(this.property.value.subscribe(function(t)
{if(t===u.addNewChoice.value){var i=new n.NewDataGatewayWizardViewModel(u.dataGatewayBackend,
function(n){if(n){u.gatewayListFresh=!1;u.ensurePollingGateways();var t=u.existingChoice;
u.existingChoice=new DataLab.Model.ChoiceParameterValue(n,n);u.choices.unshift(u.
existingChoice);u.property.value(n);t&&u.choices.remove(t)}else u.existingChoice?
u.property.value(u.existingChoice.value):u.oldValue&&u.oldValue!==u.addNewChoice.
value&&u.gatewayIsValid(u.oldValue,u.choices())?u.property.value(u.oldValue):u.choices(
).length>1&&u.property.value(u.choices()[0].value)});i.show()}else u.existingChoice&&
u.property.value()&&u.property.value().toUpperCase()!==u.existingChoice.value.toUpperCase(
)&&(u.choices.remove(u.existingChoice),u.existingChoice=null)})))}return __extends(
r,t),r.prototype.gatewayIsValid=function(n,t){if(n)for(var i=0;i<t.length;i++)if(
t[i].value&&t[i]!==this.existingChoice&&t[i]!==this.addNewChoice&&t[i].value.toUpperCase(
)===n.toUpperCase())return!0;return!1},r.prototype.refreshChoices=function(n){var
t=n.map(function(n){return new DataLab.Model.ChoiceParameterValue(n.GatewayName,
n.GatewayName+(i[n.Status]?" ("+i[n.Status]+")":""))});this.gatewayIsValid(this.
property.value(),t)?this.existingChoice=null:(this.existingChoice||(this.existingChoice=
new DataLab.Model.ChoiceParameterValue(this.property.value(),this.property.value(
))),t.push(this.existingChoice));t.push(this.addNewChoice);this.choices(t);this.
gatewayListFresh=!0},r.prototype.ensurePollingGateways=function(){this.isPollingGateways||
(this.isPollingGateways=!0,this.refreshingGateways||this.refreshGateways())},r.prototype.
stopPollingGateways=function(){this.isPollingGateways=!1},r.prototype.refreshDone=
function(n){var t=this;this.refreshChoices(n);this.refreshingGateways=!1;this.isPollingGateways&&
(clearTimeout(this.refreshGatewaysTimeoutID),this.refreshGatewaysTimeoutID=setTimeout(
function(){t.isPollingGateways&&!t.refreshingGateways&&t.refreshGateways()},1e4))}
,r.prototype.refreshGateways=function(){this.refreshingGateways||(this.refreshingGateways=
!0,clearTimeout(this.refreshGatewaysTimeoutID),this.dataGatewayBackend.getGateways(
).then(this.refreshDone.bind(this)))},r.prototype.dispose=function(){t.prototype.
dispose.call(this);this.stopPollingGateways()},r}(t);n.DataGatewayNameParameterViewModel=
k;d=function(t){function i(i,r){var u=this,e,o,f;if(t.call(this,i,r),this.dataGatewayBackend=
r.getDataGatewayBackend(),this.generatingLink=ko.observable(!1),this.showClickOnceWarning=
!n.clickOnceApplicationLikelyToWork(),this.templateType=function(){return"dataGatewayCredentialParameter"}
,this.canEnterValue=ko.pureComputed(function(){return!u.generatingLink()&&u.gatewayName&&
u.gatewayName()&&u.serverName&&u.serverName()&&u.databaseName&&u.databaseName()?
!0:!1}),this.invalidClass=ko.pureComputed(function(){return u.property.value()?"":
"fx-validation-invalid"}),e=i.credentialKeyParts,e)for(o=0;o<e.length;o++)f=e[o],
f.parameterType===DataLab.DataContract.ModuleParameterType.DataGatewayName?this.
gatewayName=f.value:this.serverName?this.databaseName=f.value:this.serverName=f.
value;this.gatewayName&&this.registerForDisposal(new DataLab.Util.DisposableSubscription(
this.gatewayName.subscribe(function(n){n!==b&&u.keyChanged()})));this.serverName&&
this.registerForDisposal(new DataLab.Util.DisposableSubscription(this.serverName.
subscribe(function(){u.keyChanged()})));this.databaseName&&this.registerForDisposal(
new DataLab.Util.DisposableSubscription(this.databaseName.subscribe(function(){u.
keyChanged()})))}return __extends(i,t),i.prototype.keyChanged=function(){this.property.
value("");clearTimeout(this.pollingTimeout)},i.prototype.currentKey=function(){return this.
gatewayName()+this.serverName()+this.databaseName()},i.prototype.enterValue=function(
){var n=this,i=this.currentKey(),t;if(i===this.requestKey&&!this.property.value(
)){this.launchClickOnce();return}this.requestKey=i;this.generatingLink(!0);t=this.
dataGatewayBackend.getCredentialEntryRequest(this.gatewayName(),this.serverName(
),this.databaseName());t.then(function(t){n.generatingLink(!1);n.request=t;n.property.
value("");n.launchClickOnce()});t.fail(function(t){n.requestKey=null;n.generatingLink(
!1);DataLab.Util.showErrorNotification({title:DataLab.LocalizedResources.dataGatewayFailedGetEnterCredsURL});
DataLab.Log.warn("Getting Data Gateway credential entry click-once URL failed.",
"DataGatewayUI",t)})},i.prototype.launchClickOnce=function(){window.open(this.request.
ClickOnceUrl,"_blank");clearTimeout(this.pollingTimeout);this.pollingTimeout=setTimeout(
this.checkForEnteredValue.bind(this),5e3)},i.prototype.checkForEnteredValue=function(
){var n=this;(clearTimeout(this.pollingTimeout),this.currentKey()===this.requestKey)&&
this.dataGatewayBackend.getAreCredentialsEntered(this.request.Id).then(function(
t){t?n.dataGatewayBackend.getEnteredCredentials(n.request.Id).then(function(t){n.
currentKey()===n.requestKey&&n.property.value(t)}):n.pollingTimeout=setTimeout(n.
checkForEnteredValue.bind(n),4e3)})},i}(t);n.DataGatewayCredentialParameterViewModel=
d}(ExperimentEditor||(ExperimentEditor={})),function(n){function t(n){var t="icon-module",
i;if(!n)return t;i=n.split("\\");switch(i[0]){case"Saved Datasets":return"icon-data_set"
case"Trained Models":return"icon-trained_model";case"Transforms":return"icon-custom_transform"
case"Data Format Conversions":return"icon-data_format";case"Data Input and Output":
return"icon-data_input";case"Data Transformation":return"icon-transformation";case"Feature Selection":
return"icon-discover";case"Statistical Functions":return"icon-math_statistics";case"Time Series":
return"icon-time_series";case"Machine Learning":return"icon-machine_learning";case"OpenCV Library Modules":
return"icon-computer_vision";case"R Language Modules":return"icon-R_language";case"Python Language Modules":
return"icon-python_module";case"Text Analytics":return"icon-text_analytics";case"Custom Modules":
return"icon-custom_module";case DataLab.Constants.ResourceCategory.WebService:return"icon-web_service"
case"Deprecated":return"icon-Deprecated";default:return t}}function r(n){var t="",
r=document.createElement("span");return r.className=n,document.body.appendChild(
r),t=window.getComputedStyle(r,":before").getPropertyValue("content"),t=DataLab.
Util.Str.removeSurroundingQuotes(t),document.body.removeChild(r),t.length!==1&&(
t=i[n]),t}n.GetIconForCategory=t;var i={"icon-Discovery":"","icon-properties_webservice_parameter":
"","icon-properties_chevron_collapsed":"","icon-properties_chevron_expanded":"",
"icon-properties_parameter_menu":"","icon-Deprecated":"","icon-custom_transform":
"","icon-web_service":"","icon-computer_vision":"","icon-data_format":"","icon-data_input":
"","icon-data_output":"","icon-data_set":"","icon-discover":"","icon-machine_learning":
"","icon-math_statistics":"","icon-module":"","icon-preview":"","icon-python_module":
"","icon-R_language":"","icon-text_analytics":"","icon-time_series":"","icon-trained_model":
"","icon-transformation":"","icon-custom_module":""};n.GetIconSymbol=r}(ExperimentEditor||
(ExperimentEditor={}));__extends=this.__extends||function(n,t){function r(){this.
constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;
n.prototype=new r},function(n){var t;(function(t){function f(){var n=$(ExperimentEditorTemplates.
_helpSearchMarkup).prependTo(".fxs-drawertaskbar-tray");ko.applyBindings(new r(DataLab.
Features.semanticHelpSearch()),n[0])}var u=function(){function n(n,t,i){this.moduleName=
n;this.guid=t;this.position=i}return n}(),i,r;(function(n){n[n.Opening=0]="Opening";
n[n.Closing=1]="Closing";n[n.Opened=2]="Opened";n[n.Closed=3]="Closed"})(i||(i={
}));r=function(t){function i(n){var i=this,r;t.call(this);this.helpSearchEnabled=
ko.observable(n);this.queryInput=ko.observable("");this.currentQuery=ko.observable(
"");this.queuedQuery=ko.observable(null);this.searchResults=ko.observableArray([
]);this.synonymResults=ko.observableArray([]);this.isLoading=ko.observable(!1);this.
hasErrors=ko.observable(!1);this.isSearchResultsVisible=ko.observable(!1);this.isSearchResultsAnimating=
ko.observable(!1);this.synonymResultClicked=this.synonymResultClicked.bind(this);
this.searchResultClicked=this.searchResultClicked.bind(this);this.menuState=ko.computed(
function(){return i.isLoading()?0:i.isSearchResultsAnimating()?i.isSearchResultsVisible(
)?0:1:i.isSearchResultsVisible()?2:3});r=null;this.menuState.subscribe(function(
){r!==i.menuState()&&i.onMenuStateChange();r=i.menuState()});this.queuedQuery.subscribe(
function(n){n&&i.menuState()===2&&i.hideResults()})}return __extends(i,t),i.prototype.
onMenuStateChange=function(){switch(this.menuState()){case 3:if(this.queuedQuery(
)){var n=this.queuedQuery();this.queuedQuery(null);this.submitQuery(n)}break;case
2:this.queuedQuery()&&this.hideResults()}},i.prototype.onKeyDownEvent=function(n,
t){return t.which==13&&this.queryInput().length!=0&&(this.menuState()===3?this.submitQuery(
this.queryInput()):this.queuedQuery(this.queryInput())),!0},i.prototype.hideResults=
function(){this.isSearchResultsVisible(!1)},i.prototype.searchResultClicked=function(
t){var i={searchQuery:this.currentQuery(),resultIndex:t.position,resultGUID:t.guid,
moduleName:t.moduleName};DataLab.Log.featureUsage({featureID:41,groupID:39,data:
i});n.Help.openHelpWindow(t.guid)},i.prototype.synonymResultClicked=function(n){
var t={searchQuery:this.currentQuery(),semanticSynonym:n};DataLab.Log.featureUsage(
{featureID:42,groupID:39,data:t});this.queryInput(n);this.queuedQuery(n)},i.prototype.
submitQuery=function(n){var t=this,i={searchQuery:n};DataLab.Log.featureUsage({featureID:
40,groupID:39,data:i});this.isLoading(!0);this.searchResults.removeAll();this.synonymResults.
removeAll();this.hasErrors(!1);$.ajax({url:"/api/helpsearch/search/?query="+encodeURIComponent(
n)}).done(function(i){var r=0;i.QueryResults.map(function(n){t.searchResults.push(
new u(n.ModuleName,n.GUID,r++))});$.ajax({url:"/api/helpsearch/synonyms/?query="+
encodeURIComponent(n)}).done(function(n){t.synonymResults(n)}).fail(function(){}
).always(function(){t.isSearchResultsVisible(!0);t.isLoading(!1);t.currentQuery(
n)})}).fail(function(){t.hasErrors(!0);t.currentQuery(n);t.isSearchResultsVisible(
!0);t.isLoading(!1)})},i}(DataLab.Util.Disposable);t.Initialize=f})(t=n.HelpSearch||
(n.HelpSearch={}))}(ExperimentEditor||(ExperimentEditor={})),function(n){var t;(
function(t){function u(n,i,r){i===void 0&&(i=null);r===void 0&&(r="");t.currentHelpTopic(
n);t.moduleTopicID(i);t.resourceName(r)}function r(n){var t=d;return n&&(t=n.match(
/^machine/)?k+n:b+n),t}function i(n,t){t===void 0&&(t="");DataLab.Log.featureUsage(
{featureID:22,groupID:0,data:JSON.stringify({topicId:n,anchor:t})});var i;n==null&&
n=="";i=window.open(r(n),f,"");i&&i.focus()}function g(){n.HelpSearch.Initialize(
);var t=function(){var t="",r="";return cdm.currentExtension&&cdm.currentExtension.
name==="ListExperiments"?t=s:cdm.currentActiveItem instanceof DataLabViews.RecentWorkView?
t=e:cdm.currentActiveItem instanceof DataLabViews.ExperimentListView?t=h:cdm.currentActiveItem
instanceof DataLabViews.ExperimentLineageView?t=p:cdm.currentActiveItem instanceof
DataLabViews.ExperimentView?t=o:cdm.currentExtension&&cdm.currentExtension.name===
"Datasets"?t=w:cdm.currentActiveItem instanceof DataLabViews.WelcomeView?t=c:cdm.
currentExtension&&cdm.currentExtension.name==="Settings"?t=l:cdm.currentActiveItem
instanceof n.CredentialsPivot?t=v:cdm.currentActiveItem instanceof n.UsersPivot?
t=y:cdm.currentExtension&&cdm.currentExtension.name==="WebServiceGroups"&&(t=a),
i(t,r),DataLab.Log.customEvent({key:r,type:"Help"}),!1};$(".helpSearch").children(
".helpIcon").click(t);$("html").keydown(function(n){if(n.keyCode===112)return n.
preventDefault(),n.stopPropagation(),t(),!1});(n.Constants.CurrentBrowser===2||n.
Constants.CurrentBrowser===3||n.Constants.CurrentBrowser===4)&&(window.onhelp=t,
document.onhelp=t)}function nt(){i(t.moduleTopicID())}t.currentHelpTopic=ko.observable(
"");t.moduleTopicID=ko.observable(null);t.resourceName=ko.observable("");t.setHelpContent=
u;var f=DataLab.Util.format(DataLab.LocalizedResources.helpStudioHelpName,DataLab.
LocalizedResources.productName),e="6cfeb32e-6aa1-4bce-91e6-ed38a7b0c4df",o="e1a8c2a1-3a47-43a9-b228-20869cdf898b",
s="057b7239-f796-40d1-b60c-dd721e35c3fc",h="6cfeb32e-6aa1-4bce-91e6-ed38a7b0c4df",
c="e76c990c-bb44-4dea-b834-39d4c4e864ec",l="384efded-6c42-4c7f-968d-7993263a3269",
a="631fbe7a-8e23-460f-892b-0d66bbd04b47",v="13a22b84-5132-47d7-9b93-9b2fd476b0ff",
y="20ff2e97-6a44-4312-88b6-64457f0583d8",p="fd68e26d-66b0-4267-bbef-0378a8b367f4",
w="4fe54478-1837-45ef-ae58-393d2cb4eeec",b=typeof environment=="undefined"?"https://sandboxmsdnstage.redmond.corp.microsoft.com/library/":
environment.referenceHelpBaseURL,k="http://azure.microsoft.com/en-us/documentation/articles/",
d="http://go.microsoft.com/fwlink/?LinkId=524824";t.getTopicUrl=r;t.openHelpWindow=
i;t.Initialize=g;t.QuickHelpMoreInfo=nt})(t=n.Help||(n.Help={}))}(ExperimentEditor||
(ExperimentEditor={}));__extends=this.__extends||function(n,t){function r(){this.
constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;
n.prototype=new r},function(n){var i=function(){function n(n,t,i,r){var u=this;this.
isVisible=ko.observable(!0);this.classId=ko.observable("xe-paletteItem xe-"+r+"PaletteItem");
this.id=ko.observable(n);this.name=ko.observable(t);this.description=ko.observable(
i);this.type=ko.observable(r);this.tooltip=ko.computed(function(){var n=u.name();
return u.description()&&(n=n+"\n"+u.description()),n})}return n}(),t,r;n.PaletteItem=
i;t=function(t){function r(i,u,f){var e=this,o,s;f===void 0&&(f=null);t.call(this);
this.name=ko.observable(null);this.items=ko.observableArray();this.childCategories=
ko.observableArray();this.resourceCache=u;this.hasVisibleItems=ko.computed(function(
){return e.items().some(function(n){return n.isVisible()})});this.hasVisibleChildCategories=
ko.computed(function(){return e.childCategories().some(function(n){return!n.isEmpty(
)})});this.isEmpty=ko.computed(function(){return!e.hasVisibleItems()&&!e.hasVisibleChildCategories(
)});this.path=i;this.path?(o=i.split("\\"),this.name(o[o.length-1])):this.name(DataLab.
Constants.ResourceCategory.Uncategorized);this.currentSearchFilter="";this.isCollapsed=
ko.observable(!0);this.isCollapsedWhenSearchEmpty=!0;this.isCollapsed.subscribe(
function(n){e.currentSearchFilter||(e.isCollapsedWhenSearchEmpty=n)});f&&(s=f.keys(
).sort(),s.forEach(function(n){e.childCategories.push(new r(n,e.resourceCache,f.
lookup(n)))}));u&&(this.registerForDisposal(new DataLab.Util.DisposableSubscription(
this.resourceCache.resourceFamilyUpdated.subscribe(function(){e.updatePaletteItemsFromResourceCache(
)})),new DataLab.Util.DisposableSubscription(this.resourceCache.items.subscribe(
function(){e.updatePaletteItemsFromResourceCache()}))),this.updatePaletteItemsFromResourceCache(
));this.icon=this.path?this.path.split("\\").length===1?n.GetIconForCategory(this.
path):null:n.GetIconForCategory(this.name())}return __extends(r,t),r.prototype.applyPaletteSearch=
function(n){this.currentSearchFilter=n;var t=!1;return this.childCategories().forEach(
function(i){i.applyPaletteSearch(n)&&(t=!0)}),this.applyCurrentSearchFilterToItems(
this.items()),this.currentSearchFilter?this.isCollapsed(this.isEmpty()):this.isCollapsed(
this.isCollapsedWhenSearchEmpty),!this.isEmpty()},r.prototype.applyCurrentSearchFilterToItems=
function(n){var i=this,t=/[^A-Za-z0-9 ]/g,r=this.currentSearchFilter.toLowerCase(
).replace(t," ");n.forEach(function(n){var e,u,f,o;if(n.name()===null)throw new Error(
i.name()+" palette item: name is null.");e=n.name().toLowerCase().replace(t," ");
u=n.description()===null?"":n.description();u=u.toLowerCase().replace(t," ");f=i.
path===null?"":i.path;f=f.toLowerCase().replace(t," ");o=i.name().toLowerCase().
replace(t," ");e.indexOf(r)!==-1||u.indexOf(r)!==-1||f.indexOf(r)!==-1||o.indexOf(
r)!==-1?n.isVisible(!0):n.isVisible(!1)})},r.prototype.updatePaletteItemsFromResourceCache=
function(){var t=this,n=DataLab.Util.filter(this.resourceCache.items(),function(
n){return n.category===t.path&&n.isLatest()}).map(function(n){return t.createPaletteItemForResource(
n)});n.sort(function(n,t){return n.name().localeCompare(t.name())});this.applyCurrentSearchFilterToItems(
n);this.items(n)},r.prototype.createPaletteItemForResource=function(n){return new
i(n.id,n.name(),n.description(),this.getEntityTypeOfResource(n))},r.prototype.getEntityTypeOfResource=
function(t){if(t instanceof DataLab.Model.Module)return n.Constants.EntityType.Module;
if(t instanceof DataLab.Model.Dataset)return n.Constants.EntityType.Dataset;if(t
instanceof DataLab.Model.TrainedModel)return n.Constants.EntityType.TrainedModel;
if(t instanceof DataLab.Model.Transform)return n.Constants.EntityType.Transform;
throw new Error("EntityType is unknown for resource");},r}(DataLab.Util.Disposable);
n.PaletteCategory=t;r=function(i){function r(r,u,f,e,o,s){var h=this,a,c,l;if(i.
call(this),this.canceled=!1,this.firstModuleCategoryIndex=0,this.categories=ko.observableArray(
),!f||!e||!o||!s)throw new Error("Dataset, Trained model, Transforms, and Module caches must be provided.");
this.datasetCache=f;this.moduleCache=e;this.trainedModelCache=o;this.transformModulesCache=
s;a=u.lookup(DataLab.Constants.ResourceCategory.Dataset);this.categories.push(new
t(DataLab.Constants.ResourceCategory.Dataset,f,a));this.categories.push(new t(DataLab.
Constants.ResourceCategory.TrainedModel,o));this.categories.push(new t(DataLab.Constants.
ResourceCategory.Transform,s));this.firstModuleCategoryIndex=this.categories().length;
c=r.keys().sort();l=DataLab.Constants.ResourceCategory.Deprecated;c=c.filter(function(
n){return n!=l});c.forEach(function(n){h.categories.push(new t(n,e,r.lookup(n)))}
);this.categories.push(new t(null,e));this.categories.push(new t(l,e,r.lookup(l)));
r.subscribeToCollectionChanges(function(n){var u,i;if(n.type===0)for(u=n.key,i=h.
firstModuleCategoryIndex;i<h.categories().length;i++)if(u.localeCompare(h.categories(
)[i].name())<0||i===h.categories().length){h.categories().splice(i,0,new t(u,e,r.
lookup(u)));h.categories.notifySubscribers(null);break}});this.isDragging=ko.observable(
!1);this.mouseDown=function(t,i){i.button===0&&(n.Help.setHelpContent(t.description(
),t.type()===n.Constants.EntityType.Module?DataLab.Util.resurrectDashesInGUID(t.
id().split(".")[1]):null,t.name()),h.isDragging(!0),h.dragResponder.paletteDragStart(
i,t),h.canceled=!1)};this.mouseUp=function(n,t){t.button===0&&(h.dragResponder.paletteDragEnd(
t),h.isDragging(!1))};this.mouseMove=function(n,t){h.isDragging()&&(t.preventDefault(
),t.stopPropagation(),h.canceled||h.dragResponder.paletteDragMoved(t))};this.activate=
function(n,t){h.activationAction&&h.activationAction(n,t)};this.applyPaletteSearch(
"")}return __extends(r,i),r.prototype.registerActivationEvent=function(n){this.activationAction=
n},r.prototype.applyPaletteSearch=function(n){this.categories().forEach(function(
t){t.applyPaletteSearch(n)})},r.prototype.cancelDrag=function(){this.canceled=!0;
this.dragResponder.paletteDragCancel()},r}(DataLab.Util.Disposable);n.PaletteViewModel=
r}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(n,
t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);
r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(
i,r){var u=this;t.call(this,i,n.EntityTypes[n.Constants.EntityType.Module]);this.
moduleNode=i;this.graphNodeType=0;this.statusIconURL=ko.computed(function(){return u.
valid()?u.moduleNode.statusCode.value()===DataLab.DataContract.State.NotStarted&&
u.moduleNode.parent&&u.moduleNode.parent.statusCode()!==DataLab.DataContract.State.
InDraft?"/Content/Images/icon-notstarted.svg":u.moduleNode.statusCode.value()===
DataLab.DataContract.State.Running?"/Content/Images/Processing.gif":u.moduleNode.
statusCode.value()===DataLab.DataContract.State.Finished?"/Content/Images/icon-complete.svg":
u.moduleNode.statusCode.value()===DataLab.DataContract.State.Failed?"/Content/Images/icon-error.svg":
"/Content/Images/icon-none.svg":"/Content/Images/icon-validation-invalid.svg"});
this.classId=ko.computed(function(){var n=u.moduleNode.statusCode.value(),t=(u.hovered(
)?" hoveredEntity":"")+(u.selected()?" selectedEntity":"")+" "+u.getCompatibilityClass(
);return"rectEntity module "+n+t});this.subscribeToParameters(this.moduleNode.parameters);
this.startTime=new n.StaticTextPropertyViewModel(this.moduleNode.startTime);this.
endTime=new n.StaticTextPropertyViewModel(this.moduleNode.endTime);this.elapsedTime=
new n.StaticTextPropertyViewModel(this.moduleNode.elapsedTime);this.statusCode=new
n.StaticTextPropertyViewModel(this.moduleNode.statusCode);this.statusDetails=new
n.StaticTextPropertyViewModel(this.moduleNode.statusDetails);this.outputLog=new n.
EndpointPropertyViewModel(this.moduleNode.outputLog);this.errorLog=new n.EndpointDialogPropertyViewModel(
this.moduleNode.errorLog,this.moduleNode.name,this.moduleNode.id,r,this.moduleNode.
executedExperimentId);this.usePreviousResults=new n.CheckboxPropertyViewModel(new
DataLab.Model.BooleanProperty("name","LABEL","TOOLTIP",i.usePreviousResults,undefined));
this.isDeterministic=i.isDeterministic;this.outputEndpoints=[];DataLab.Util.forEach(
this.moduleNode.outputEndpoints,function(t){u.outputEndpoints.push(new n.EndpointPropertyViewModel(
t))});this.nodeIconClicked=function(n,t){if(u.moduleNode.statusCode.value()===DataLab.
DataContract.State.Failed&&u.valid())u.errorLog.onClick(u.errorLog,t)};this.icon=
n.GetIconForCategory(this.moduleNode.module_.category);this.iconSymbol=n.GetIconSymbol(
this.icon);ko.computed(function(){DataLab.Log.featureUsage({featureID:151,groupID:
151,data:u.usePreviousResults.property.value()})})}return __extends(i,t),Object.
defineProperty(i.prototype,"label",{get:function(){return this.moduleNode.module_.
name()},enumerable:!0,configurable:!0}),i.prototype.startValidating=function(){this.
moduleNode.startValidating()},i.prototype.updateValidState=function(){var n=this.
moduleNode.validate();n.length>0?n[0].errorMessages.length>0?(this.moduleNode.balloonMessage(
n[0].errorMessages[0]),this.valid(!1)):DataLab.Log.error("An error object had no error messages."):
(this.moduleNode.statusCode.value()!==DataLab.DataContract.State.Failed&&this.moduleNode.
balloonMessage(""),this.valid(!0))},i.prototype.subscribeToParameters=function(n)
{var t=this;DataLab.Util.forEach(n,function(n){n.value.errorMessage.subscribe(function(
){t.updateValidState()});n.descriptor instanceof DataLab.Model.ModeModuleParameterDescriptor&&
(n.value.subscribe(function(){t.updateValidState()}),DataLab.Util.forEach(n.childParameters,
function(n){t.subscribeToParameters(n)}))})},i}(n.GraphNodeViewModel);n.Module=t}
(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(n,t)
{function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);
r.prototype=t.prototype;n.prototype=new r},function(n){var t=DataLab.LocalizedResources,
i=function(i){function r(n,r){i.call(this);this.experimentEditorViewModel=n;this.
readOnlyMode=ko.observable(!1);this.currentTarget=ko.observable(null);this.commands=
r;this.menuMap=Object.create(null);this.menuMap.inputPortMenu={name:"contextMenu",
items:[]};this.menuMap.trainedModelMenu={name:"contextMenu",items:[{label:t.experimentEditorContextMenuDelete,
iconClass:"menu-delete",command:this.commands.delete_},{label:t.experimentEditorContextMenuCopy,
iconClass:"menu-copy",command:this.commands.copy},{label:t.experimentEditorContextMenuCut,
iconClass:"menu-cut",command:this.commands.cut},{label:t.experimentEditorContextMenuPaste,
iconClass:"menu-paste",command:this.commands.paste},]};this.menuMap.transformMenu=
{name:"contextMenu",items:[{label:t.experimentEditorContextMenuDelete,iconClass:
"menu-delete",command:this.commands.delete_},{label:t.experimentEditorContextMenuCopy,
iconClass:"menu-copy",command:this.commands.copy},{label:t.experimentEditorContextMenuCut,
iconClass:"menu-cut",command:this.commands.cut},{label:t.experimentEditorContextMenuPaste,
iconClass:"menu-paste",command:this.commands.paste},]};this.menuMap.mainMenu={name:
"contextMenu",items:[{label:t.experimentEditorContextMenuDelete,iconClass:"menu-delete",
command:this.commands.delete_},{label:t.experimentEditorContextMenuCopy,iconClass:
"menu-copy",command:this.commands.copy},{label:t.experimentEditorContextMenuCut,
iconClass:"menu-cut",command:this.commands.cut},{label:t.experimentEditorContextMenuPaste,
iconClass:"menu-paste",command:this.commands.paste},{label:null,divider:!0},{label:
t.experimentEditorContextMenuRefresh,iconClass:"refresh",command:this.commands.refreshExperiment},
{label:t.experimentEditorContextMenuViewPriorRun,iconClass:"file",command:this.commands.
navigateToParent},]};this.menuMap.multiSelectMenu={name:"contextMenu",items:[{label:
t.experimentEditorContextMenuDelete,iconClass:"menu-delete",command:this.commands.
delete_},{label:t.experimentEditorContextMenuCopy,iconClass:"menu-copy",command:
this.commands.copy},{label:t.experimentEditorContextMenuCut,iconClass:"menu-cut",
command:this.commands.cut},{label:t.experimentEditorContextMenuPaste,iconClass:"menu-paste",
command:this.commands.paste}]}}return __extends(r,i),r.prototype.build=function(
t){var u;this.currentTarget(t);var f=this.experimentEditorViewModel.selectionManager.
selectedEntities.count(),r=null,i=null;return f>1?i=this.menuMap.multiSelectMenu:
(t instanceof n.InputPort?(u={name:this.menuMap.inputPortMenu.name,items:this.menuMap.
inputPortMenu.items.slice(0)},i=u):t instanceof n.Module?r=this.createModuleMenuItems(
t):t instanceof n.Dataset?r=this.createDatasetMenuItems(t):t instanceof n.TrainedModel?
i=this.menuMap.trainedModelMenu:t instanceof n.Transform?i=this.menuMap.transformMenu:
t instanceof n.OutputPort?r=this.createOutputPortMenuItems(t):t instanceof n.ExperimentEditorViewModel&&
(i=this.menuMap.mainMenu),r&&(i={name:"contextMenu",items:r})),i},r.prototype.createPortMenuItems=
function(n){n===void 0&&(n=null);var r=DataLab.Features.toolTipInEEContextMenusEnabled(
)?t.VisualizeDisabledTooltip:"",i=[{label:t.experimentEditorContextMenuDownload,
iconClass:"menu-download",command:this.experimentEditorViewModel.createViewOutputCommand(
n)},{label:t.experimentEditorContextMenuSaveAsDataset,iconClass:"menu-dataset",command:
this.experimentEditorViewModel.createPromoteOutputCommand(n)},{label:t.experimentEditorContextMenuSaveAsTrainedModel,
iconClass:"menu-trainedmodel",command:this.experimentEditorViewModel.createPromoteTrainerOutputCommand(
n)},{label:t.experimentEditorContextMenuSaveAsTransform,iconClass:"menu-transformation",
command:this.experimentEditorViewModel.createPromoteTransformOutputCommand(n)},{
label:t.experimentEditorContextMenuVisualize,iconClass:"menu-visualize",command:
this.experimentEditorViewModel.createVisualizeDataCommand(n),disabledTooltip:r}];
return DataLab.Features.enableOutputPortApiCodeEnabled()&&Array.prototype.push.apply(
i,[{label:null,divider:!0},{label:t.experimentEditorContextMenuApiCode,iconClass:
"menu-copy",command:this.experimentEditorViewModel.createShowOutputPortApiCodeCommand(
n)}]),i},r.prototype.createPortDatasetMenuItems=function(n){n===void 0&&(n=null);
var r=DataLab.Features.toolTipInEEContextMenusEnabled()?t.VisualizeDisabledTooltip:
"",i=[{label:t.experimentEditorContextMenuDownload,iconClass:"menu-download",command:
this.commands.downloadDataset},{label:t.experimentEditorContextMenuVisualize,iconClass:
"menu-visualize",command:this.experimentEditorViewModel.createVisualizeDataCommand(
n),disabledTooltip:r}];return DataLab.Features.enableOutputPortApiCodeEnabled()&&
Array.prototype.push.apply(i,[{label:null,divider:!0},{label:t.experimentEditorContextMenuApiCode,
iconClass:"menu-copy",command:this.experimentEditorViewModel.createShowOutputPortApiCodeCommand(
n)}]),i},r.prototype.createNotebookMenuItems=function(n,i){var u,r;return i===void
0&&(i=null),u=DataLab.User?DataLab.User.isWorkspaceOwner:!1,u&&DataLab.FeaturesExtensions.
canEnableNotebookContextMenu()&&(r=[{label:t.contextMenuNotebookPython3,iconClass:
"menu-python",command:this.experimentEditorViewModel.createOpenNotebookCommand(DataLab.
Constants.NotebookLanguage.Python3,i)},{label:t.contextMenuNotebookPython2,iconClass:
"menu-python",command:this.experimentEditorViewModel.createOpenNotebookCommand(DataLab.
Constants.NotebookLanguage.Python2,i)}],DataLab.Features.rNotebookInContextMenuEnabled(
)&&r.push({label:t.contextMenuNotebookR,iconClass:"menu-r",command:this.experimentEditorViewModel.
createOpenNotebookCommand(DataLab.Constants.NotebookLanguage.R,i)}),Array.prototype.
push.apply(n,[{label:null,divider:!0},{label:t.contextMenuOpenInNotebook,iconClass:
"menu-notebook",items:r}])),n},r.prototype.createOutputPortMenuItems=function(t)
{t===void 0&&(t=null);var i=null;return i=t.parent instanceof n.Module?this.createPortMenuItems(
t):t.parent instanceof n.Dataset?this.createPortDatasetMenuItems(t):null,i&&(i=this.
createNotebookMenuItems(i,t)),i},r.prototype.appendOutputPortMenuItems=function(
n,t){var r=this,i;t.length>0&&(n.push({label:null,divider:!0}),i=t.map(function(
n,t){return{label:n.portModel.name,iconClass:t<10?"menu-output"+(t+1):"view",items:
r.createOutputPortMenuItems(n),subMenuTargetViewModel:n}}),Array.prototype.push.
apply(n,i))},r.prototype.createModuleMenuItems=function(n){n===void 0&&(n=null);
var i=[{label:t.experimentEditorContextMenuDelete,iconClass:"menu-delete",command:
this.commands.delete_},{label:t.experimentEditorContextMenuCopy,iconClass:"menu-copy",
command:this.commands.copy},{label:t.experimentEditorContextMenuCut,iconClass:"menu-cut",
command:this.commands.cut},{label:t.experimentEditorContextMenuPaste,iconClass:"menu-paste",
command:this.commands.paste}],r=DataLab.Util.values(n.outputPorts);return this.appendOutputPortMenuItems(
i,r),Array.prototype.push.apply(i,[{label:null,divider:!0},{label:t.experimentEditorContextMenuViewLog,
iconClass:"menu-log",items:[{label:t.experimentEditorContextMenuOutputLog,iconClass:
"file",command:this.commands.viewStdOut},{label:t.experimentEditorContextMenuErrorLog,
iconClass:"file",command:this.commands.viewStdErr}]},{label:null,divider:!0},{label:
t.experimentEditorContextMenuEditComment,iconClass:"menu-comment",command:this.commands.
editComment},{label:null,divider:!0},{label:t.experimentEditorContextMenuHelp,iconClass:
"menu-help",command:this.commands.showHelp}]),i},r.prototype.createDatasetMenuItems=
function(n){n===void 0&&(n=null);var i=[{label:t.experimentEditorContextMenuDelete,
iconClass:"menu-delete",command:this.commands.delete_},{label:t.experimentEditorContextMenuCopy,
iconClass:"menu-copy",command:this.commands.copy},{label:t.experimentEditorContextMenuCut,
iconClass:"menu-cut",command:this.commands.cut},{label:t.experimentEditorContextMenuPaste,
iconClass:"menu-paste",command:this.commands.paste}],r=DataLab.Util.values(n.outputPorts);
return this.appendOutputPortMenuItems(i,r),Array.prototype.push.apply(i,[{label:
null,divider:!0},{label:t.experimentEditorContextMenuDownload,iconClass:"menu-download",
command:this.commands.downloadDataset}]),this.createNotebookMenuItems(i,n)},r}(DataLab.
Util.Disposable);n.ExperimentEditorMenuBuilder=i}(ExperimentEditor||(ExperimentEditor=
{})),function(n){var t=function(){function n(n,t,i){t===void 0&&(t=null);i===void
0&&(i=null);this.executeCallback=n;this.canExecute=t||ko.observable(!0);this.target=
i}return n.prototype.execute=function(n){this.executeCallback(n)},n}();n.CallbackCommand=
t}(ExperimentEditor||(ExperimentEditor={})),function(n){function i(n){return n?n:
new t}var t=function(){function n(){this.canExecute=ko.observable(!1)}return n.prototype.
execute=function(){throw new Error("Null command; cannot be executed");},n}();n.
NullCommand=t;n.optionalCommand=i}(ExperimentEditor||(ExperimentEditor={}));__extends=
this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(
i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(
t){function i(n){function r(n){switch(n.type){case 2:this.deselectEntity(n.oldValue)}
}function u(n){var t;switch(n.type){case 0:t=n.newValue;t.selected(!0);break;case
2:t=n.oldValue;t.selected(!1)}}var i=this;t.call(this);this.visible=ko.observable(
"hidden");this.startX=ko.observable(0);this.startY=ko.observable(0);this.curX=ko.
observable(0);this.curY=ko.observable(0);this.width=ko.observable(0);this.height=
ko.observable(0);this.startCapture=!1;this._selectedGraphNodes=DataLab.observableMap(
);this._selectedConnections=DataLab.observableMap();this.registerForDisposal(this.
_selectedEntities=DataLab.observableMapUnion(this._selectedGraphNodes,this._selectedConnections),
this._selectedGraphNodeModels=this._selectedGraphNodes.transform(function(n){return n.
graphNode}));this.selectionChangeCallback=null;this.experimentViewModel=n;this.registerForDisposal(
new DataLab.Util.DisposableSubscription(n.subscribe(function(n){n.selectableEntities.
subscribeToCollectionChanges(r.bind(i))})));this._selectedEntities.subscribeToCollectionChanges(
u.bind(this))}return __extends(i,t),i.prototype.isVisible=function(){return this.
visible()==="visible"},Object.defineProperty(i.prototype,"selectedGraphNodes",{get:
function(){return this._selectedGraphNodes},enumerable:!0,configurable:!0}),Object.
defineProperty(i.prototype,"selectedConnections",{get:function(){return this._selectedConnections}
,enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedEntities",
{get:function(){return this._selectedEntities},enumerable:!0,configurable:!0}),Object.
defineProperty(i.prototype,"selectedGraphNodeModels",{get:function(){return this.
_selectedGraphNodeModels},enumerable:!0,configurable:!0}),i.prototype.deselectEntity=
function(t){var i,r,u;t instanceof n.Connection?(i=t,r=n.Connection.getConnectionKeyForPorts(
i.inputPort,i.outputPort),this._selectedConnections.remove(r)):(u=t,this._selectedGraphNodes.
remove(u.graphNode.id))},i.prototype.selectAll=function(){var t=this;this.experimentViewModel(
).connections.forEach(function(i){var r=n.Connection.getConnectionKeyForPorts(i.
inputPort,i.outputPort);t._selectedConnections.put(r,i)});this.experimentViewModel(
).experimentNodes.forEach(function(n){t._selectedGraphNodes.put(n.graphNode.id,n)}
)},i.prototype.resetSelection=function(){var n=this;this._selectedConnections.modify(
function(){n._selectedConnections.clear();n._selectedGraphNodes.clear()})},i.prototype.
modifySelection=function(n){this.selectedEntities.modify(function(){n()})},i.prototype.
selectEntity=function(t){var i,u,r;t instanceof n.Connection?(i=t,u=n.Connection.
getConnectionKeyForPorts(i.inputPort,i.outputPort),this._selectedConnections.put(
u,i)):(r=t,this._selectedGraphNodes.put(r.graphNode.id,r))},i.prototype.toggleEntitySelection=
function(n){n.selected()?this.deselectEntity(n):this.selectEntity(n)},i.prototype.
beginRectSelection=function(n,t){this.startCapture=!0;this.width(0);this.height(
0);this.startX(n);this.startY(t);this.curX(n);this.curY(t);this.visible("visible")}
,i.prototype.endRectSelection=function(n,t,i){var r=this;return this.updateRectSelection(
n,t),this.startCapture&&(this.visible("hidden"),this.modifySelection(function(){
DataLab.Util.forEach(i,function(n){n.hit(r.curX(),r.curY(),r.curX()+r.width(),r.
curY()+r.height())&&r.selectEntity(n)})}),this.width(0),this.height(0),this.startX(
n),this.startY(t),this.curX(n),this.curY(t),this.startCapture=!1),this.selectedEntities.
count()>0},i.prototype.cancelRectSelection=function(){this.visible("hidden");this.
width(0);this.height(0);this.startCapture=!1},i.prototype.updateRectSelection=function(
n,t){(this.width(Math.abs(n-this.startX())),this.height(Math.abs(t-this.startY())),
this.width()!==0&&this.height()!==0)&&(n>this.startX()&&t>this.startY()||(n>this.
startX()&&t<this.startY()?this.curY(t):n<this.startX()&&t<this.startY()?(this.curX(
n),this.curY(t)):this.curX(n)))},i}(DataLab.Util.Disposable);n.SelectionManager=
t}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(n,
t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);
r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(
i){var r=this;t.call(this,i,n.EntityTypes[n.Constants.EntityType.Dataset]);this.
datasetNode=i;this.graphNodeType=1;this.path=ko.computed(function(){return"M"+(r.
x()+13)+","+r.y()+"Q"+(r.x()-13)+","+(r.y()+30)+","+(r.x()+13)+","+(r.y()+60)+"L"+
(r.x()+187)+","+(r.y()+60)+"Q"+(r.x()+213)+","+(r.y()+30)+","+(r.x()+187)+","+r.
y()+"Z"});this.classId=ko.computed(function(){var n=(r.hovered()?" hoveredEntity":
"")+(r.selected()?" selectedEntity":"")+" "+r.getCompatibilityClass();return"rectEntity data"+
n});this.author=new n.StaticTextPropertyViewModel(this.datasetNode.author);this.
size=new n.StaticTextPropertyViewModel(this.datasetNode.size);this.format=new n.
StaticTextPropertyViewModel(this.datasetNode.format);this.createdOn=new n.StaticTextPropertyViewModel(
this.datasetNode.createdOn);this.viewDataset=new n.EndpointPropertyViewModel(this.
datasetNode.viewDataset);this.icon=n.GetIconForCategory(i.dataset.category);this.
iconSymbol=n.GetIconSymbol(this.icon)}return __extends(i,t),Object.defineProperty(
i.prototype,"datasetPort",{get:function(){return DataLab.Util.first(this.outputPorts,
function(){return!0})},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,
"label",{get:function(){return this.datasetNode.dataset.name()},enumerable:!0,configurable:
!0}),i}(n.GraphNodeViewModel);n.Dataset=t}(ExperimentEditor||(ExperimentEditor={
}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t=function(t){function i(i){var r=this;t.call(this,i,n.EntityTypes[
n.Constants.EntityType.TrainedModel]);this.trainedModelNode=i;this.graphNodeType=
2;this.path=ko.computed(function(){return"M"+(r.x()+13)+","+r.y()+"Q"+(r.x()-13)+
","+(r.y()+30)+","+(r.x()+13)+","+(r.y()+60)+"L"+(r.x()+187)+","+(r.y()+60)+"Q"+
(r.x()+213)+","+(r.y()+30)+","+(r.x()+187)+","+r.y()+"Z"});this.classId=ko.computed(
function(){var n=(r.hovered()?" hoveredEntity":"")+(r.selected()?" selectedEntity":
"")+" "+r.getCompatibilityClass();return"rectEntity data"+n});this.author=new n.
StaticTextPropertyViewModel(this.trainedModelNode.author);this.format=new n.StaticTextPropertyViewModel(
this.trainedModelNode.format);this.createdOn=new n.StaticTextPropertyViewModel(this.
trainedModelNode.createdOn);this.trainedModelNode.trainingExperiment.value(DataLabViews.
calculateNavigationPathToExperiment(this.trainedModelNode.trainedModel.experimentId));
this.trainingExperiment=new n.LinkPropertyViewModel(this.trainedModelNode.trainingExperiment,
function(){DataLabViews.navigateToExperiment(r.trainedModelNode.trainedModel.experimentId)}
);this.icon=n.GetIconForCategory(this.trainedModelNode.trainedModel.category);this.
iconSymbol=n.GetIconSymbol(this.icon)}return __extends(i,t),Object.defineProperty(
i.prototype,"trainedModelPort",{get:function(){return DataLab.Util.first(this.outputPorts,
function(){return!0})},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,
"label",{get:function(){return this.trainedModelNode.trainedModel.name()},enumerable:
!0,configurable:!0}),i}(n.GraphNodeViewModel);n.TrainedModel=t}(ExperimentEditor||
(ExperimentEditor={}));__extends=this.__extends||function(n,t){function r(){this.
constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;
n.prototype=new r},function(n){var t=function(t){function i(i){var r=this;t.call(
this,i,n.EntityTypes[n.Constants.EntityType.Transform]);this.transformNode=i;this.
graphNodeType=4;this.path=ko.computed(function(){return"M"+(r.x()+13)+","+r.y()+
"Q"+(r.x()-13)+","+(r.y()+30)+","+(r.x()+13)+","+(r.y()+60)+"L"+(r.x()+187)+","+
(r.y()+60)+"Q"+(r.x()+213)+","+(r.y()+30)+","+(r.x()+187)+","+r.y()+"Z"});this.classId=
ko.computed(function(){var n=(r.hovered()?" hoveredEntity":"")+(r.selected()?" selectedEntity":
"")+" "+r.getCompatibilityClass();return"rectEntity data"+n});this.author=new n.
StaticTextPropertyViewModel(this.transformNode.author);this.format=new n.StaticTextPropertyViewModel(
this.transformNode.format);this.createdOn=new n.StaticTextPropertyViewModel(this.
transformNode.createdOn);this.transformNode.trainingExperiment.value(DataLabViews.
calculateNavigationPathToExperiment(this.transformNode.transform.experimentId));
this.trainingExperiment=new n.LinkPropertyViewModel(this.transformNode.trainingExperiment,
function(){DataLabViews.navigateToExperiment(r.transformNode.transform.experimentId)}
);this.icon=n.GetIconForCategory(this.transformNode.transform.category);this.iconSymbol=
n.GetIconSymbol(this.icon)}return __extends(i,t),Object.defineProperty(i.prototype,
"transformPort",{get:function(){return DataLab.Util.first(this.outputPorts,function(
){return!0})},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,
"label",{get:function(){return this.transformNode.transform.name()},enumerable:!0,
configurable:!0}),i}(n.GraphNodeViewModel);n.Transform=t}(ExperimentEditor||(ExperimentEditor=
{}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var i=function(n){function t(t){n.call(this,t);this.autocompleteArray=
t.autocompleteArray;this.isLinkable=!1;this.templateType=function(){return"inputParameter"}
;this._isDisabled=ko.computed(function(){return!1})}return __extends(t,n),t.prototype.
validate=function(){var n=this.property;return n.validate()},Object.defineProperty(
t.prototype,"isDisabled",{get:function(){return this._isDisabled},enumerable:!0,
configurable:!0}),t}(n.PropertyViewModel),t;n.WebServicePortParameter=i;t=function(
t){function i(i){var r=this;t.call(this,i,n.EntityTypes[n.Constants.EntityType.WebServicePort]);
this.webServicePortNode=i;this.graphNodeType=3;this.path=ko.computed(function(){
return"M"+(r.x()+13)+","+r.y()+"Q"+(r.x()-13)+","+(r.y()+30)+","+(r.x()+13)+","+
(r.y()+60)+"L"+(r.x()+187)+","+(r.y()+60)+"Q"+(r.x()+213)+","+(r.y()+30)+","+(r.
x()+187)+","+r.y()+"Z"});this.classId=ko.computed(function(){var n=(r.hovered()?
" hoveredEntity":"")+(r.selected()?" selectedEntity":"")+" "+r.getCompatibilityClass(
);return"rectEntity data blueFill"+n});this.iconSymbol=i.type===0?n.GetIconSymbol(
"icon-data_input"):n.GetIconSymbol("icon-data_output");this.iconClass="whiteFill";
this.textClassId=ko.computed(function(){return"staticText whiteFill"})}return __extends(
i,t),Object.defineProperty(i.prototype,"label",{get:function(){return this.webServicePortNode.
name},enumerable:!0,configurable:!0}),i}(n.GraphNodeViewModel);n.WebServicePort=
t}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(n,
t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);
r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(
r,u){var f=this,e,o,s;t.call(this);this.displayFlowType=ko.observable(n.Constants.
ExperimentDataFlowType.Experiment);this.experiment=r;this.experimentLoaded=ko.observable(
!1);this.workspace=u;this.readOnlyMode=ko.observable(!1);this.connections=DataLab.
observableMap();this.tempNodes=DataLab.observableMap();DataLab.Features.experimentDescriptionEnabled(
)&&(this.summary=new n.EditableTextPropertyViewModel(this.experiment.summary),e=
new DataLab.Model.EditableTextProperty(DataLab.LocalizedResources.experimentDetailedDescription,
DataLab.LocalizedResources.experimentDetailedDescriptionPlaceholder,ko.observable(
""),null),this.details=new n.EditableTextPropertyViewModel(e),this.experiment.experimentId(
)&&(this.isSampleExperiment()||u.getExperimentDetailsAsync(this.experiment.experimentId(
)).done(function(n){n&&(o=/^"?(.+?)?"?$/g.exec(n)[1],o=window.unescape(o),e.value(
o))})),this.registerForDisposal(new DataLab.Util.DisposableSubscription(this.experiment.
experimentId.subscribe(function(n){n&&e.value()&&u.updateExperimentDetailsAsync(
n,e.value())}))),e.value.subscribe(function(n){if(o!==n&&f.experiment.experimentId(
)){o=n;var t=window.escape(n);u.updateExperimentDetailsAsync(f.experiment.experimentId(
),t)}}),this.detailsLink=new n.LinkPropertyViewModel(this.experiment.originalExperimentDocumentation,
function(){window.open(f.detailsLink.property.value(),"_blank")}),this.displayFlowType.
subscribe(function(t){DataLab.Log.featureUsage({featureID:t===n.Constants.ExperimentDataFlowType.
Experiment?69:70,groupID:68,experimentID:f.experiment.experimentId()})}));this.registerForDisposal(
new DataLab.Util.DisposableSubscription(this.experiment.connectionAdded.subscribe(
function(t){f.addConnection(f.getViewModelForPort(t.input),f.getViewModelForPort(
t.output));var i=f.getViewModelForNode(t.input.parent);i instanceof n.Module&&i.
updateValidState()})),this.experimentNodes=r.nodes.transform(function(n){return f.
createNodeViewModel(n)}),this.nodes=DataLab.observableMapUnion(this.tempNodes,this.
experimentNodes),this.webServiceParameters=r.parameters.transform(function(t){return n.
ParameterViewModel.createParameterViewModel(t,u)}),new DataLab.Util.DisposableSubscription(
this.experiment.connectionRemoved.subscribe(function(t){f.removeConnection(f.getViewModelForPort(
t.input),f.getViewModelForPort(t.output));var i=f.getViewModelForNode(t.input.parent);
i instanceof n.Module&&(i.startValidating(),i.updateValidState())})));this.experiment.
forEachConnection(function(n,t){f.addConnection(f.getViewModelForPort(n),f.getViewModelForPort(
t))});this.registerForDisposal(this.selectableEntities=DataLab.observableMapUnion(
this.nodes,this.connections));s=[];DataLab.Util.forEach(this.experiment.properties(
),function(t){s.push(n.PropertyViewModel.experimentPropertyFactory(t))});this.experimentProperties=
ko.observableArray(s);this.experimentStateUpdateRunningTime=function(){if(f.experiment.
statusCode()===DataLab.DataContract.State.Running&&f.experimentStateDisplay){var
n=DataLab.Util.getElapsedTimeMilliseconds(new Date(f.experiment.startTime()),new
Date);n>=0?f.experimentStateDisplay().statusLabel(DataLab.LocalizedResources.experimentStateRunning+
" ("+DataLab.Util.formatElapsedTime(n,0)+")"):f.experimentStateDisplay().statusLabel(
DataLab.LocalizedResources.experimentStateRunning)}else clearInterval(f.experimentStateIntervalID)}
;this.experimentStateDisplay=ko.computed(function(){if(f.readOnlyMode()&&f.experiment.
statusCode()!==DataLab.DataContract.State.Running&&f.experiment.statusCode()!==DataLab.
DataContract.State.NotStarted)return{statusLabel:ko.observable(DataLab.LocalizedResources.
experimentStateLocked),statusIconUrl:"/Content/Images/icon-locked_gray.svg",iconHoverBalloon:
DataLab.LocalizedResources.experimentStateLockedHover};switch(f.experiment.statusCode(
)){case DataLab.DataContract.State.InDraft:return clearInterval(f.experimentStateIntervalID),
f.experiment.validate().length===0||f.experiment.nodes.length===0?{statusLabel:ko.
observable(DataLab.LocalizedResources.experimentStateInDraft),statusIconUrl:"/Content/Images/icon-none.svg",
iconHoverBalloon:""}:{statusLabel:ko.observable(DataLab.LocalizedResources.experimentStateInDraft),
statusIconUrl:"/Content/Images/icon-validation-invalid.svg",iconHoverBalloon:DataLab.
LocalizedResources.experimentStateInDraftHoverErrors};case DataLab.DataContract.
State.Finished:return clearInterval(f.experimentStateIntervalID),{statusLabel:ko.
observable(DataLab.LocalizedResources.experimentStateFinishedRunning),statusIconUrl:
"/Content/Images/icon-complete.svg",iconHoverBalloon:""};case DataLab.DataContract.
State.Running:f.experimentStateIntervalID=setInterval(f.experimentStateUpdateRunningTime,
1e3);var n=DataLab.Util.getElapsedTimeMilliseconds(new Date(f.experiment.startTime(
)),new Date);return n>=0?{statusLabel:ko.observable(DataLab.LocalizedResources.experimentStateRunning+
" ("+DataLab.Util.formatElapsedTime(n,0)+")"),statusIconUrl:"/Content/Images/processing.gif",
iconHoverBalloon:DataLab.LocalizedResources.experimentStateRunningHover}:{statusLabel:
ko.observable(DataLab.LocalizedResources.experimentStateRunning),statusIconUrl:"/Content/Images/processing.gif",
iconHoverBalloon:DataLab.LocalizedResources.experimentStateRunningHover};case DataLab.
DataContract.State.Failed:return clearInterval(f.experimentStateIntervalID),{statusLabel:
ko.observable(DataLab.LocalizedResources.experimentStateFailed+" "+f.experiment.
endTime()),statusIconUrl:"/Content/Images/icon-error.svg",iconHoverBalloon:DataLab.
LocalizedResources.experimentStateFailedHover};case DataLab.DataContract.State.NotStarted:
return{statusLabel:ko.observable(DataLab.LocalizedResources.experimentStateQueued),
statusIconUrl:"/Content/Images/ajax-loader.gif",iconHoverBalloon:DataLab.LocalizedResources.
experimentStateQueuedHover};default:return{statusLabel:ko.observable(""),statusIconUrl:
"/Content/Images/icon-none.svg",iconHoverBalloon:""}}},this);this.isCompetitionExperiment=
ko.computed(function(){return f.experiment&&f.experiment.getTag(i.CompetitionUrlTagSearchRegex).
length>0});this.registerForDisposal(new n.ExperimentDataFlowWalker(this.nodes,this.
connections))}return __extends(i,t),i.prototype.addPublishOutputPort=function(n)
{this.experiment.addPublishOutputPort(n.portModel)},i.prototype.addPublishInputPort=
function(n){this.experiment.addPublishInputPort(n.portModel)},i.prototype.removePublishOutputPort=
function(n){this.experiment.removePublishOutputPort(n.portModel)},i.prototype.removePublishInputPort=
function(n){this.experiment.removePublishInputPort(n.portModel)},i.prototype.createModule=
function(t,i,r){var u,f;return(i===void 0&&(i=0),r===void 0&&(r=0),this.readOnlyMode(
))?null:(u=new DataLab.Model.ModuleNode(t,this.workspace),u.x(i),u.y(r),f=new n.
Module(u,this.workspace),this.tempNodes.put(u.id,f),f)},i.prototype.createDataset=
function(t,i,r){var u,f;return(i===void 0&&(i=0),r===void 0&&(r=0),this.readOnlyMode(
))?null:(u=new DataLab.Model.DatasetNode(t),u.x(i),u.y(r),f=new n.Dataset(u),this.
tempNodes.put(u.id,f),f)},i.prototype.createTrainedModel=function(t,i,r){var u,f;
return(i===void 0&&(i=0),r===void 0&&(r=0),this.readOnlyMode())?null:(u=new DataLab.
Model.TrainedModelNode(t),u.x(i),u.y(r),f=new n.TrainedModel(u),this.tempNodes.put(
u.id,f),f)},i.prototype.createTransformModule=function(t,i,r){var u,f;return(i===
void 0&&(i=0),r===void 0&&(r=0),this.readOnlyMode())?null:(u=new DataLab.Model.TransformNode(
t),u.x(i),u.y(r),f=new n.Transform(u),this.tempNodes.put(u.id,f),f)},i.prototype.
createWebServicePort=function(t,i,r){var e=this,u,f;return(i===void 0&&(i=0),r===
void 0&&(r=0),this.readOnlyMode())?null:(u=new DataLab.Model.WebServicePortNode(
t,null,function(n){return e.experiment.getWebServicePortNodes(n)},this.workspace.
applicationCache.dataTypeRegistry),u.x(i),u.y(r),f=new n.WebServicePort(u),this.
tempNodes.put(u.id,f),f)},i.prototype.addNode=function(t){if(this.tempNodes.remove(
t.graphNode.id),DataLab.Features.trialLimitationsEnabled()&&t.graphNode instanceof
DataLab.Model.ModuleNode){var i=t.graphNode.module_;if(!DataLab.Trial.isNumberOfModulesUnrestricted(
)&&this.experiment.getNumberOfModules()>=DataLab.Trial.getMaxNumberOfModules())return DataLab.
Log.featureUsage({featureID:60,groupID:56,experimentID:this.experiment.experimentId(
),moduleID:i.id,data:i.name()}),n.showExceededNumberOfModulesLimitDialog(),null;
if(!DataLab.Trial.isModuleEnabledById(i.familyId))return DataLab.Log.featureUsage(
{featureID:58,groupID:56,experimentID:this.experiment.experimentId(),moduleID:i.
id,data:i.name()}),n.showDisabledModuleDialog(i.familyId,i.name()),null}return this.
experiment.addNode(t.graphNode),this.getViewModelForNode(t.graphNode)},i.prototype.
removeSelected=function(){var n=this;this.readOnlyMode()||(this.connections.modify(
function(){DataLab.Util.forEach(n.connections(),function(n){n.selected()&&n.remove(
)})}),this.connections.modify(function(){DataLab.Util.forEach(n.nodes(),function(
n){n.selected()&&n.remove()})}))},i.prototype.editSelected=function(){this.readOnlyMode(
)||DataLab.Util.forEach(this.nodes(),function(n){if(n.selected()){n.editComment(
);return}})},i.prototype.findEntityAtPoint=function(n,t){var r=this.selectableEntities(
),u,i;for(u in r)if(i=r[u].entityAtPoint(n,t),i!==null&&i.containsPoint(n,t))return i;
return null},i.prototype.getViewModelForNode=function(n){var t=this.nodes.lookup(
n.id);if(t.graphNode!==n)throw"Node viewmodel does not wrap the expected model";
return t},i.prototype.getViewModelForPort=function(n){var i=this.getViewModelForNode(
n.parent),t=i.ports[n.name];if(t.portModel!==n)throw"Port viewmodel does not wrap the expected model";
return t},i.prototype.isSampleExperiment=function(){var n=window.environment,t;return n&&
n.globalWorkspaceId?(t=new RegExp("^"+window.environment.globalWorkspaceId),t.test(
this.experiment.experimentId())):!1},i.prototype.displayFlowToggle=function(){this.
displayFlowType(this.displayFlowType()===n.Constants.ExperimentDataFlowType.Experiment?
n.Constants.ExperimentDataFlowType.WebService:n.Constants.ExperimentDataFlowType.
Experiment)},i.prototype.createNodeViewModel=function(t){if(t instanceof DataLab.
Model.ModuleNode)return new n.Module(t,this.workspace);if(t instanceof DataLab.Model.
DatasetNode)return new n.Dataset(t);if(t instanceof DataLab.Model.TrainedModelNode)
return new n.TrainedModel(t);if(t instanceof DataLab.Model.TransformNode)return new
n.Transform(t);if(t instanceof DataLab.Model.WebServicePortNode)return new n.WebServicePort(
t);throw"Unknown graph node type.";},i.prototype.addConnection=function(t,i){var
r=new n.Connection(t,i);if(this.connections.lookup(r.key)!==undefined)throw"Connection already exists for the given port pair";
return this.connections.put(r.key,r),t.addConnection(r),i.addConnection(r),r},i.
prototype.removeConnection=function(t,i){var u=n.Connection.getConnectionKeyForPorts(
t,i),r=this.connections.lookup(u);if(r===undefined)throw"Connection doest not exist for the given port pair";
return this.connections.remove(u),t.removeConnection(r),i.removeConnection(r),r}
,i.CompetitionUrlTagPrefix="CompetitionUri:",i.CompetitionUrlTagSearchRegex=new RegExp(
"^"+i.CompetitionUrlTagPrefix,"i"),i.CompetitionTenantIdTagPrefix="CompTenantId:",
i.CompetitionTenantIdSearchRegex=new RegExp("^"+i.CompetitionTenantIdTagPrefix,"i"),
i.GalleryUriTagPrefix="CompetitionGalleryUri:",i.GalleryUriTagSearchRegex=new RegExp(
"^"+i.GalleryUriTagPrefix,"i"),i}(DataLab.Util.Disposable);n.ExperimentViewModel=
t}(ExperimentEditor||(ExperimentEditor={})),function(n){var t=function(){function t(
){this.x1=ko.observable(0);this.y1=ko.observable(0);this.x2=ko.observable(0);this.
y2=ko.observable(0);this.counter=ko.observable(0);this.visible=ko.observable(!1);
this.isPreview=ko.observable(!0);this.translation=ko.computed(function(){return"translate("+
(this.x2()-n.Constants.Port.HalfWidth)+","+this.y2()+")"},this);this.controlPointDistance=
ko.computed(function(){var t=Math.min(n.Constants.Connector.SplinePointMax,Math.
max(n.Constants.Connector.SplinePointMin,Math.abs((this.y2()-this.y1())/2)));return this.
snappedPort instanceof n.OutputPort?-t:t},this);this.path=ko.computed(function()
{return"M"+this.x2()+","+this.y2()+"C "+this.x2()+","+(this.y2()-this.controlPointDistance(
))+","+this.x1()+","+(this.y1()+this.controlPointDistance())+","+this.x1()+","+this.
y1()},this);this.p0=null;this.p1=null;this.hiddenConnection=null;this.snappedPort=
null}return t.prototype.onMouseMove=function(t,i,r){var e=this,u,f;if(r){if(u=null,
r instanceof n.GraphNodeViewModel?u=this.p0 instanceof n.InputPort?r.findClosestOutputPort(
t,i):r.findClosestInputPort(t,i):(r instanceof n.InputPort||r instanceof n.OutputPort)&&
(u=r),this.lastCandidatePort&&this.lastCandidatePort!==u&&this.lastCandidatePort.
balloonMessage(null),u&&u.portModel.isCompatible(this.p0.portModel)){this.snapToPort(
u);u.parent.portState(DataLab.Model.Constants.PortState.CompatibleSnapped);return}
u&&(this.setCandidatePort(u),u.portModel.parent===this.p0.portModel.parent||u instanceof
n.OutputPort&&this.p0 instanceof n.OutputPort||u instanceof n.InputPort&&this.p0
instanceof n.InputPort?u.balloonMessage(null):(u.parent.portState(DataLab.Model.
Constants.PortState.Incompatible),u.balloonMessage("Cannot connect "+this.p0.portTypes+
" to "+u.portTypes+".")))}else this.snappedPort&&this.snappedPort.parent.portState(
DataLab.Model.Constants.PortState.Compatible),this.lastCandidatePort&&(f=DataLab.
Util.first(this.lastCandidatePort.parent.ports,function(n){return e.p0.portModel.
compatibilityWithPort(n.portModel)===DataLab.Model.Constants.PortState.Compatible}
,null),f?this.lastCandidatePort.parent.portState(DataLab.Model.Constants.PortState.
Compatible):this.lastCandidatePort.parent.portState(DataLab.Model.Constants.PortState.
Default)),this.setCandidatePort(null);this.unsnap();this.x2(t);this.y2(i-n.Constants.
Port.HalfHeight);this.isPreview(!1)},t.prototype.reset=function(){this.p0=null;this.
p1=null;this.visible(!1);this.x1(0);this.y1(0);this.x2(0);this.y2(0);this.counter(
0);this.isPreview(!0);this.showHiddenConnection();this.setCandidatePort(null);this.
lastCandidatePort=null},t.prototype.startConnection=function(n){if(!n)throw new Error(
"Source port isn't a port view model.");this.p0=n;this.x1(n.getCX());this.y1(n.getCY(
));this.x2(n.getCX());this.y2(n.getCY());this.visible(!0);this.counter(this.counter(
)+1);this.snappedPort=null;this.showHiddenConnection();this.setCandidatePort(null)}
,t.prototype.endConnection=function(t,i,r){var u,f,e;(t instanceof n.GraphNodeViewModel||
t instanceof n.PortViewModel)&&(this.p1=t instanceof n.GraphNodeViewModel?this.p0
instanceof n.InputPort?t.findClosestOutputPort(i,r):t.findClosestInputPort(i,r):
t,this.p1&&(u=this.p0.portModel.compatibilityWithPort(this.p1.portModel),this.p0.
portModel.isWebServicePort||this.p1.portModel.isWebServicePort?(f=this.p0.portModel.
isWebServicePort?this.p0:this.p1,e=f===this.p0?this.p1:this.p0,(u===DataLab.Model.
Constants.PortState.Compatible||u===DataLab.Model.Constants.PortState.Replaceable)&&
(f.portModel.disconnect(f.portModel.connectedNonWebServicePorts()),e.portModel.disconnect(
e.portModel.connectedWebServicePorts()),f.portModel.connectTo(e.portModel))):u===
DataLab.Model.Constants.PortState.Compatible?(this.p0 instanceof n.InputPort&&this.
p0.portModel.isConnected()&&this.p0.portModel.disconnect(this.p0.portModel.connectedNonWebServicePorts(
)),this.p0.portModel.connectTo(this.p1.portModel)):u===DataLab.Model.Constants.PortState.
Replaceable&&(this.p1.portModel.disconnect(this.p1.portModel.connectedNonWebServicePorts(
)),this.p0.portModel.connectTo(this.p1.portModel))));this.reset()},t.prototype.snapToPort=
function(t){if(this.snappedPort=t,this.x2(this.snappedPort.getCX()),this.y2(this.
snappedPort.getCY()),this.isPreview(!0),!this.p0.portModel.isWebServicePort&&!t.
portModel.isWebServicePort){var i=null;i=this.snappedPort instanceof n.InputPort?
this.snappedPort.connections()[0]:this.p0.connections()[0];i?this.hideConnection(
i):this.showHiddenConnection()}},t.prototype.unsnap=function(){this.snappedPort=
null;this.showHiddenConnection()},t.prototype.showHiddenConnection=function(){this.
hiddenConnection&&(this.hiddenConnection.hidden(!1),this.hiddenConnection=null)}
,t.prototype.hideConnection=function(n){this.showHiddenConnection();this.hiddenConnection=
n;this.hiddenConnection.hidden(!0)},t.prototype.setCandidatePort=function(n){this.
lastCandidatePort&&this.lastCandidatePort.balloonMessage(null);this.lastCandidatePort=
n},t}();n.Connector=t}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||
function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&
(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t,u,f,i,r;
(function(n){n.PanMode="panMode ";n.Panning="panning ";n.Idle="idle ";n.MovingEntities=
"movingEntities ";n.MakingConnection="makingConnection ";n.MultiSelecting="multiSelecting "}
)(t=n.XEInteractionClasses||(n.XEInteractionClasses={})),function(n){n[n.MouseDown=
0]="MouseDown";n[n.MouseUp=1]="MouseUp";n[n.MouseMove=2]="MouseMove";n[n.PanButtonClicked=
3]="PanButtonClicked";n[n.DeleteKeyPressed=4]="DeleteKeyPressed";n[n.EscapeKeyPressed=
5]="EscapeKeyPressed";n[n.ShiftAPressed=6]="ShiftAPressed";n[n.F2KeyPressed=7]="F2KeyPressed";
n[n.ControlXPressed=8]="ControlXPressed";n[n.SpacebarDown=9]="SpacebarDown";n[n.
SpacebarUp=10]="SpacebarUp"}(n.XEInteractionAction||(n.XEInteractionAction={}));
u=n.XEInteractionAction,function(n){n[n.None=0]="None";n[n.Entities=1]="Entities";
n[n.Connection=2]="Connection";n[n.SelectionRect=3]="SelectionRect"}(n.DraggingMode||
(n.DraggingMode={}));f=n.DraggingMode,function(n){var t;(function(n){n.ConnectionPendingThreshhold=
5})(t=n.XEStateMachine||(n.XEStateMachine={}))}(i=n.Constants||(n.Constants={}));
r=function(r){function u(n){var i=this;r.call(this);this.viewModel=n;this.lastMouseCoords=
{x:0,y:0,matrixTransform:null};this.lastDomainCoords={x:0,y:0,matrixTransform:null};
this.mouseDownCoords={x:0,y:0,matrixTransform:null};this.mouseDownEvent=null;this.
panModeOn=ko.observable(!1);this.leftMousePanning=ko.observable(!1);this.centerMousePanning=
ko.observable(!1);this.spacebarHeld=ko.observable(!1);this.dragging=ko.observable(
0);this.connectionDragPending=ko.observable(!1);this.atRest=ko.computed(function(
){return i.centerMousePanning()===!1&&i.dragging()===0&&i.leftMousePanning()===!1}
);this.classes=ko.computed(function(){var n=(i.panModeOn()||i.spacebarHeld()?t.PanMode:
"")+(i.centerMousePanning()||i.leftMousePanning()?t.Panning:"");switch(i.dragging(
)){case 1:n+=t.MovingEntities;break;case 2:n+=t.MakingConnection;break;case 3:n+=
t.MultiSelecting;break;default:n+=t.Idle}return n})}return __extends(u,r),u.prototype.
handleAction=function(t,r,u){var e=this,f,c,l,a,v,o,s,h;r===void 0&&(r=null);u===
void 0&&(u=null);r&&(f=this.viewModel.coordinateConverter.clientToDomainCoordinates(
r.clientX,r.clientY),c=r.clientX-this.lastMouseCoords.x,l=r.clientY-this.lastMouseCoords.
y,a=f.x-this.lastDomainCoords.x,v=f.y-this.lastDomainCoords.y);switch(t){case 0:
if(!r.target||!r.target.getAttribute("outputlabel")||r.button!==0||this.panModeOn(
)||this.spacebarHeld()?this.connectionDragPending(!1):this.connectionDragPending(
!0),r.button===1)this.centerMousePanning(!0);else if(r.button===0)u instanceof n.
Module?n.Help.setHelpContent(u.moduleNode.module_.description(),DataLab.Util.resurrectDashesInGUID(
u.moduleNode.module_.id.split(".")[1]),u.moduleNode.module_.name()):u instanceof
n.Dataset?n.Help.setHelpContent(u.datasetNode.dataset.description(),null,u.datasetNode.
dataset.name()):u instanceof n.WebServicePort?n.Help.setHelpContent(u.webServicePortNode.
description,null,u.webServicePortNode.name):u||n.Help.setHelpContent(""),this.panModeOn(
)||this.spacebarHeld()?this.leftMousePanning(!0):this.dragging()===0&&(u instanceof
n.PortViewModel?(DataLab.Log.customEvent({key:"Port_StartConnection",type:"Dragging",
data:JSON.stringify(u.portModel.descriptor)}),this.viewModel.startConnection(u),
this.dragging(2)):u instanceof n.GraphNodeViewModel||u instanceof n.Connection?(
(r.ctrlKey?!r.shiftKey:r.shiftKey)?this.viewModel.selectionManager.toggleEntitySelection(
u):u.selected()?this.viewModel.selectionManager.selectEntity(u):this.viewModel.selectionManager.
modifySelection(function(){e.viewModel.selectionManager.resetSelection();e.viewModel.
selectionManager.selectEntity(u)}),this.dragging(1)):u===null&&(r.shiftKey||this.
viewModel.selectionManager.resetSelection(),this.viewModel.beginMultiSelect(f),this.
dragging(3)));else if(r.button===2)u instanceof n.Module?n.Help.setHelpContent(u.
moduleNode.module_.description(),DataLab.Util.resurrectDashesInGUID(u.moduleNode.
module_.id.split(".")[1]),u.moduleNode.module_.name()):u instanceof n.Dataset?n.
Help.setHelpContent(u.datasetNode.dataset.description(),null,u.datasetNode.dataset.
name()):u instanceof n.GraphNodeViewModel||u instanceof n.Connection?u.selected(
)||this.viewModel.selectionManager.modifySelection(function(){e.viewModel.selectionManager.
resetSelection();e.viewModel.selectionManager.selectEntity(u)}):u||n.Help.setHelpContent(
"");else return;this.mouseDownCoords=f;this.mouseDownEvent=r;this.mouseDownEntity=
u;break;case 1:if(r.button===1)this.centerMousePanning(!1);else if(r.button===0)
if(this.leftMousePanning())this.leftMousePanning(!1);else{switch(this.dragging())
{case 2:this.viewModel.endConnection(u,f);break;case 3:this.viewModel.endMultiSelect(
f)}this.dragging(0)}else return;break;case 3:this.panModeOn(!this.panModeOn());break
case 2:if(this.leftMousePanning()||this.centerMousePanning()||this.spacebarHeld(
)){this.viewModel.panResponder.pan(c,l);break}else this.connectionDragPending()&&
(o=this.mouseDownEvent.clientX-r.clientX,s=this.mouseDownEvent.clientY-r.clientY,
Math.sqrt(o*o+s*s)>i.XEStateMachine.ConnectionPendingThreshhold&&(this.connectionDragPending(
!1),this.viewModel.startConnection(this.mouseDownEntity),this.dragging(2)));switch(
this.dragging()){case 1:this.viewModel.moveEntities(a,v);break;case 2:this.viewModel.
moveConnection(f);break;case 3:this.viewModel.updateMultiSelect(f)}break;case 5:
switch(this.dragging()){case 3:this.viewModel.selectionManager.cancelRectSelection(
);this.dragging(0);break;case 2:this.viewModel.cancelConnection();this.dragging(
0);break;case 1:h={x:this.mouseDownCoords.x-this.lastDomainCoords.x,y:this.mouseDownCoords.
y-this.lastDomainCoords.y,matrixTransform:null};this.viewModel.moveEntities(h.x,
h.y);this.dragging(0);break;default:this.viewModel.selectionManager.resetSelection(
)}break;case 6:this.viewModel.selectionManager.selectAll();break;case 4:this.atRest(
)&&this.viewModel.removeSelected();break;case 7:this.atRest()&&this.viewModel.editSelected(
);break;case 8:this.atRest()&&this.viewModel.cut();break;case 9:this.spacebarHeld(
!0);break;case 10:this.spacebarHeld(!1)}r&&(f=this.viewModel.coordinateConverter.
clientToDomainCoordinates(r.clientX,r.clientY),this.lastMouseCoords={x:r.clientX,
y:r.clientY,matrixTransform:null},this.lastDomainCoords={x:f.x,y:f.y,matrixTransform:
null})},u}(DataLab.Util.Disposable);n.XEInteractionStateMachine=r}(ExperimentEditor||
(ExperimentEditor={})),function(n){var t=function(){function n(n){if(!n)throw"Commands must operate on an experiment";
this.experimentEditorViewModel=n;this.experiment=this.experimentEditorViewModel.
experimentViewModel().experiment}return n.prototype.run=function(){throw"Command doesn't have a defined run function";
},n.prototype.undo=function(){throw"Command doesn't have a defined undo function";
},n}();n.Command=t}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||
function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&
(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(
n){function t(t,i){n.call(this,i);this.nodesToAdd=t}return __extends(t,n),t.prototype.
run=function(){var n=this;this.experiment.nodes.modify(function(){n.nodesToAdd.forEach(
function(t){n.experiment.addNode(t,t.x(),t.y())})})},t.prototype.undo=function()
{var n=this;this.experiment.nodes.modify(function(){n.nodesToAdd.forEach(function(
n){n.remove()})})},t}(n.Command);n.AddNodesCommand=t}(ExperimentEditor||(ExperimentEditor=
{}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t=function(t){function i(n,i){t.call(this,i);this._connections=
n}return __extends(i,t),Object.defineProperty(i.prototype,"connections",{get:function(
){return this._connections},enumerable:!0,configurable:!0}),i.prototype.run=function(
){var t=this,i=this.experimentEditorViewModel.experimentViewModel();i.connections.
modify(function(){t._connections.forEach(function(i){i.inputPort.connectTo(i.outputPort);
var r=t.experimentEditorViewModel.experimentViewModel(),u=n.Connection.getConnectionKeyForPorts(
r.getViewModelForPort(i.inputPort),r.getViewModelForPort(i.outputPort))})})},i.prototype.
undo=function(){var n=this,t=this.experimentEditorViewModel.experimentViewModel(
);t.connections.modify(function(){n._connections.forEach(function(n){n.inputPort.
disconnectFrom(n.outputPort)})})},i}(n.Command);n.AddConnectionsCommand=t}(ExperimentEditor||
(ExperimentEditor={}));__extends=this.__extends||function(n,t){function r(){this.
constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;
n.prototype=new r},function(n){var r=DataLab.DataContract.v2,i=DataLab.Model,t,u;
(function(n){n.PasteCascadeX=n.RectWidth/5;n.PasteCascadeY=n.RectHeight/2;n.PasteBoundary=
n.RectWidth*2})(t=n.Constants||(n.Constants={}));u=function(u){function f(n,t,i,
f,e,o){var s=this;o===void 0&&(o=null);u.call(this,t);this.clipboard=n;this.pastedItemCount=
0;this.viewTopLeft=f;this.experimentBounds=i;this.addConnectionsCommand=null;this.
addNodesCommand=null;this.itemsPasted=new ko.subscribable;this.selectedNonModuleResourceIds=
{};this.nodesAddedPromise=r.createNodes(n,t.moduleCache,t.datasetCache,t.trainedModelCache,
t.transformModulesCache,function(){return},function(n){return s.experimentEditorViewModel.
experiment.nodes.lookup(n.Id)?null:n.Id},e);DataLab.Features.trialLimitationsEnabled(
)&&o&&(this.validate=o)}return __extends(f,u),f.prototype.run=function(){var n=this;
this.nodesAddedPromise.done(function(t){(!n.validate||n.validate(t))&&(n.addNodesCommand||
n.createAddNodesCommand(t),n.addNodesCommand.run(),n.addConnectionsCommand||n.createAddConnectionsCommand(
t),n.addConnectionsCommand.run(),n.selectPastedContent(),n.addNodesCommand.nodesToAdd.
length>0?n.itemsPasted.notifySubscribers(n.placementRect):n.itemsPasted.notifySubscribers(
null))})},f.prototype.undo=function(){this.addConnectionsCommand&&this.addNodesCommand&&
(this.addConnectionsCommand.undo(),this.addNodesCommand.undo())},f.prototype.calculatePlacement=
function(n){var u=null,r=null,e=Infinity,i,f;return n.forEach(function(n){n.y()<
e&&(e=n.y(),r=n)}),i={x:this.experimentBounds.x-t.PasteBoundary,y:this.experimentBounds.
y-t.PasteBoundary,width:this.experimentBounds.width+2*t.PasteBoundary,height:this.
experimentBounds.height+2*t.PasteBoundary},u=i.x<this.clipboard.X+this.clipboard.
Width&&i.y<this.clipboard.Y+this.clipboard.Height&&i.x+i.width>=this.clipboard.X&&
i.y+i.height>=this.clipboard.Y?{x:this.clipboard.X,y:this.clipboard.Y,matrixTransform:
null}:{x:this.viewTopLeft.x,y:this.viewTopLeft.y,matrixTransform:null},u.x+=r.x(
),u.y+=r.y(),f=this.experimentEditorViewModel.calculatePlacement(u),{x:f.x-r.x(),
y:f.y-r.y(),width:this.clipboard.Width,height:this.clipboard.Height}},f.prototype.
createAddNodesCommand=function(t){function f(n){var i=t.nodesToContract[n.id].Id;
e.selectedNonModuleResourceIds[i]=!0;delete t.nodesToContract[n.id];delete t.contractToNodes[
i]}var r=this,e=this,u;DataLab.Util.forEach(t.contractToNodes,function(n){var t;
n instanceof i.DatasetNode?(t=n.dataset.id,r.experiment.getDatasetNode(t)&&f(n)):
n instanceof i.TrainedModelNode?(t=n.trainedModel.id,r.experiment.getTrainedModelNode(
t)&&f(n)):n instanceof i.TransformNode&&(t=n.transform.id,r.experiment.getTrainedModelNode(
t)&&f(n))});u=DataLab.Util.values(t.contractToNodes);u.length>0&&(this.placementRect=
this.calculatePlacement(u),DataLab.Util.forEach(u,function(n){var t=n.x(),i=n.y(
);n.x(t+r.placementRect.x);n.y(i+r.placementRect.y)}));this.addNodesCommand=new n.
AddNodesCommand(u,this.experimentEditorViewModel)},f.prototype.createAddConnectionsCommand=
function(t){function f(n){return n&&e.selectedNonModuleResourceIds[n.id]}var u=this,
e=this,i=[],o=r.createConnections(t,function(n,r){var h=t.contractToNodes[r.InputNodeId],
o=u.experiment.nodes.lookup(r.OutputNodeId),s,e;f(o)&&n.IsInput&&(s=h.inputPorts[
n.PortName],e=o.outputPorts[r.OutputPortName],e&&i.push({inputPort:s,outputPort:
e}))});this.clipboard.EgressConnections.forEach(function(n){var o=t.contractToNodes[
n.OutputNodeId],s,e,r;o&&(s=o.outputPorts[n.OutputPortName],e=u.experiment.nodes.
lookup(n.InputNodeId),f(e)&&(r=e.inputPorts[n.InputPortName],r&&!r.isConnected()&&
i.push({inputPort:r,outputPort:s})))});this.addConnectionsCommand=new n.AddConnectionsCommand(
i.concat(o),this.experimentEditorViewModel)},f.prototype.selectPastedContent=function(
){var i=this,t=this.experimentEditorViewModel.experimentViewModel();this.experimentEditorViewModel.
selectionManager.resetSelection();this.addNodesCommand.nodesToAdd.forEach(function(
n){var r=t.getViewModelForNode(n);i.experimentEditorViewModel.selectionManager.selectEntity(
r)});this.addConnectionsCommand.connections.forEach(function(r){var u=t.getViewModelForPort(
r.inputPort),f=t.getViewModelForPort(r.outputPort),e=n.Connection.getConnectionKeyForPorts(
u,f),o=t.connections.lookup(e);i.experimentEditorViewModel.selectionManager.selectEntity(
o)})},f}(n.Command);n.PasteCommand=u}(ExperimentEditor||(ExperimentEditor={}));__extends=
this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(
i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(
t){function i(n,i,r){t.call(this,r);this.inputPort=n;this.outputPort=i}return __extends(
i,t),i.prototype.run=function(){this.inputPort.isConnectedTo(this.outputPort)&&this.
inputPort.disconnectFrom(this.outputPort)},i.prototype.undo=function(){this.inputPort.
connectTo(this.outputPort);var t=this.experimentEditorViewModel.experimentViewModel(
),i=n.Connection.getConnectionKeyForPorts(t.getViewModelForPort(this.inputPort),
t.getViewModelForPort(this.outputPort));this.experimentEditorViewModel.selectionManager.
selectEntity(t.connections.lookup[i])},i}(n.Command);n.DeleteConnectionCommand=t}
(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(n,t)
{function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);
r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(
i,r){var u=this;t.call(this,r);this.deletedNodes=[];this.deleteConnectionCommands=
[];i.forEach(function(t){DataLab.Util.forEach(t.inputPorts,function(t){DataLab.Util.
forEach(t.connectedPorts(),function(i){u.deleteConnectionCommands.push(new n.DeleteConnectionCommand(
t,i,u.experimentEditorViewModel))})});DataLab.Util.forEach(t.outputPorts,function(
t){DataLab.Util.forEach(t.connectedPorts(),function(i){u.deleteConnectionCommands.
push(new n.DeleteConnectionCommand(i,t,u.experimentEditorViewModel))})});u.deletedNodes.
push(t)})}return __extends(i,t),i.prototype.run=function(){this.deleteConnectionCommands.
forEach(function(n){n.run()});this.deletedNodes.forEach(function(n){n.remove()})}
,i.prototype.undo=function(){var n=this;this.deletedNodes.forEach(function(t){n.
experiment.addNode(t)});this.deleteConnectionCommands.forEach(function(n){n.undo(
)})},i}(n.Command);n.DeleteNodesCommand=t}(ExperimentEditor||(ExperimentEditor={
})),function(n){var t,i;(function(n){n.ClipboardName="DataLabClipboard"})(t=n.Constants||
(n.Constants={})),function(n){function r(n){i[t.ClipboardName]=n}function u(){return i[
t.ClipboardName]}function f(){delete i[t.ClipboardName]}var i=Shell.Utilities.isLocalStorageAvailable(
)?localStorage:{};n.write=r;n.read=u;n.clear=f}(i=n.Clipboard||(n.Clipboard={}))}
(ExperimentEditor||(ExperimentEditor={})),function(n){var t;(function(n){function r(
r,u){if(n.hide(),t!==null)throw new Error("Expected balloon element to be unset after hiding");
t=$("<div class='datalab-moduleBalloon validation'><\/div>").appendTo("body").fxBalloon(
{position:"top"});r&&(i=u,t.children("div.fx-balloon-content").text(r),t.fxBalloon(
"show",u.getBoundingClientRect()))}function u(n){n===void 0&&(n=i);t&&n===i&&(t.
fxBalloon("destroy"),t.remove(),t=null)}var t=null,i;n.show=r;n.hide=u})(t=n.Balloon||
(n.Balloon={}))}(ExperimentEditor||(ExperimentEditor={})),function(n){var t;(function(
n){function f(n){var t=new RegExp(u,"g");return n&&(n=n.replace(t,"_")),n}function h(
n){var i=new RegExp(u),t;return/\S/.test(n)?i.test(n)?(t=s.join(", "),DataLab.Util.
format(DataLab.LocalizedResources.notebookNameIllegalCharacterError,t)):null:DataLab.
LocalizedResources.notebookNameWhitespaceError}function c(n,t){Shell.UI.Spinner.
show();DataLab.Log.featureUsage({featureID:131,groupID:126});n.Notebook.Name=f(n.
Notebook.Name);var i=DataLab.Workspace;t=t||window.open("","_blank");DataLab.Util.
addSpinnerToBlankWindow(t);i.createNotebookAsync(n).always(function(){}).done(function(
n){DataLab.Log.featureUsage({featureID:132,groupID:126,data:n.FamilyId});i.applicationCache.
notebookCache.setItem(n.FamilyId,DataLab.DataContract.deserializeNotebook(n));e(
n.FamilyId,t)}).fail(function(u){t&&!t.closed&&(t.close(),t=null);Shell.UI.Spinner.
hide();var f=r(u,DataLab.LocalizedResources.createNotebookFailed,n.Notebook.Name);
DataLab.Util.showErrorNotification(f);u instanceof DataLab.Util.AjaxError&&u.xmlHttpRequest&&
u.xmlHttpRequest.status===409&&i.applicationCache.notebookCache.loadNewItems();DataLab.
Log.featureUsage({featureID:133,groupID:126,data:f.details});DataLab.Log.error("Call to Create new notebook Failed. "+
JSON.stringify(n))})}function e(n,t){return t=t||window.open("","_blank"),Shell.
UI.Spinner.show(),DataLab.Log.featureUsage({featureID:128,groupID:126,data:n}),DataLab.
Workspace.openNotebookAsync(n).always(function(){Shell.UI.Spinner.hide()}).done(
function(i){DataLab.Log.featureUsage({featureID:129,groupID:126,data:n});t?t.closed||
(t.location.href=i,t=null):window.open(i,"_blank")}).fail(function(i){t&&!t.closed&&
t!==window&&(t.close(),t=null);var u=r(i,DataLab.LocalizedResources.openNotebookFailed,
n);DataLab.Util.showErrorNotification(u);DataLab.Log.error("Call to open notebook failed. "+
JSON.stringify(n));DataLab.Log.featureUsage({featureID:130,groupID:126,data:JSON.
stringify({notebookID:n,error:u.details})})})}function l(n){n=n.split("-").join(
"");var t=n.slice(32);return DataLab.Util.resurrectDashesInGUID(t+n.slice(t.length,
32))}function r(n,t){for(var u=[],i=2;i<arguments.length;i++)u[i-2]=arguments[i];
var e="",r="",f=n.message;return n instanceof o&&n.xmlHttpRequest&&(f=f+" "+n.xmlHttpRequest.
responseText,n.xmlHttpRequest.status===404&&n.xmlHttpRequest.statusText==="OK"?r=
DataLab.LocalizedResources.notebookServiceUnavailable:n.xmlHttpRequest.status===
404?r=DataLab.LocalizedResources.notebookErrorNotFound:n.xmlHttpRequest.status===
409&&(r=DataLab.LocalizedResources.notebookErrorNameConflict)),u.push(r),e=DataLab.
Util.format.apply(null,[t||"{0}"].concat(u)),{title:e,details:f}}function a(n,r)
{switch(r){case 0:switch(n){case i.Python2:case i.Python3:return t.BlankNotebookTemplate
case i.R:return t.BlankRNotebookTemplate}case 1:return t.ExampleNotebookTemplate
case 2:return n===i.R?t.DatasetRNotebookTemplate:t.DatasetNotebookTemplate;case 3:
return n===i.R?t.ModuleRunResultsRNotebookTemplate:t.ModuleRunResultsNotebookTemplate}
throw new Error("unknown notebook language and/or type: "+String(n)+", "+String(
r));}var o=DataLab.Util.AjaxError,v=DataLab.Constants.NotebookType,i=DataLab.Constants.
NotebookLanguage,t=DataLab.Constants.NotebookCreationTemplate,s=["#","%","&","+",
":","\\","/","*","?",'"',"<",">","|","Tab"],u='[#%&+:\\\\/*?"<>|\t]';n.sanitizeNotebookName=
f;n.validateNotebookName=h;n.createAndOpenNotebook=c;n.openNotebookById=e;n.ModuleResultNotebookGuidGenerator=
l;n.getErrorMessage=r;n.getNotebookCreationTemplate=a})(t=n.NotebookHelpers||(n.
NotebookHelpers={}))}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||
function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&
(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var i=DataLab.
Model,f=DataLab.Constants.NotebookType,t,u,r;(function(n){n.GenericCSV="GenericCSV";
n.GenericTSV="GenericTSV";n.PlainText="PlainText"})(t=n.DataTypeIds||(n.DataTypeIds=
{})),function(n){n[n.IsMultiSelecting=0]="IsMultiSelecting";n[n.IsMovingEntity=1]=
"IsMovingEntity";n[n.IsConnecting=2]="IsConnecting";n[n.None=3]="None"}(n.UserActionState||
(n.UserActionState={}));u=n.UserActionState;r=function(r){function u(t,u,f,e,o,s,
h,c){var l=this,a;s===void 0&&(s={});h===void 0&&(h=null);c===void 0&&(c={});r.call(
this);this.paletteDragItem=null;this.currentExperimentHasBeenNonEmpty=ko.observable(
!1);this.isBeingResized=ko.observable(!1);this.refreshStatusLabel=ko.observable(
"");this.newExperimentLoaded=new ko.subscribable;this.parentExperimentId=ko.observable(
);this.experimentOrViewBoundsChanged=new ko.subscribable;this.experimentViewModel=
ko.observable();this.experimentDirty=ko.observable();this.workspace=h;this.workspaceID=
h?h.id:"";this.experimentDisposable=null;this.events=c;this.saveStatus=ko.observable(
{state:0,lastSave:null});this.draftSaveLabel=ko.computed(function(){switch(l.saveStatus(
).state){case 0:return"";case 3:return l.saveStatus().isRetrying?DataLab.LocalizedResources.
DraftState_SaveFailedRetrying:DataLab.LocalizedResources.DraftState_SaveFailed;case
2:return DataLab.LocalizedResources.DraftState_Saving;case 1:return DataLab.Util.
format(DataLab.LocalizedResources.DraftState_SavedAt,l.saveStatus().lastSave.toLocaleTimeString(
))}});this.registerForDisposal(this.experiment=new i.Experiment,this.selectionManager=
new n.SelectionManager(this.experimentViewModel),this.stateMachine=new n.XEInteractionStateMachine(
this),this.statusRefresher=new DataLab.Util.Repeater(function(){return l._experiment.
refresh(l.workspace).done(function(){l.refreshStatusLabel("")}).fail(function(n)
{n instanceof DataLab.Util.AjaxError&&n.xmlHttpRequest.status===404?(l.refreshStatusLabel(
""),l.statusRefresher.stop()):l.refreshStatusLabel(DataLab.LocalizedResources.RefreshStatus_FailedRetrying)}
)},5e3));this.connector=new n.Connector;this.entityActivationCallback=null;this.
moduleCache=t;this.datasetCache=u;this.trainedModelCache=f;this.transformModulesCache=
e;this.endpointDownloader=o;this.lastMouseCoords={x:0,y:0,matrixTransform:null};
this.needsAnimationToContent=new ko.subscribable;this.needsAnimationToNode=new ko.
subscribable;this.experimentOrViewPerturbed=new ko.subscribable;this.experimentOrViewPerturbed.
subscribe(function(){n.Balloon.hide()});this.selectionManager.selectedEntities.subscribe(
function(){l.experimentOrViewPerturbed.notifySubscribers(null)});this.experimentEditorViewModelCommands=
s;a=this.createContextMenuCommands(s);this.registerForDisposal(this.menuBuilder=
new n.ExperimentEditorMenuBuilder(this,a));this.setCommandAvailabilities(a);this.
animationComplete=new ko.subscribable;ko.computed(function(){return l.experimentViewModel(
).readOnlyMode()}).subscribe(function(n){l.menuBuilder.readOnlyMode(n)},this.menuBuilder,
"change");this.shouldShowHelpWatermark=ko.computed(function(){return!l.currentExperimentHasBeenNonEmpty(
)&&l._experiment.isDraft()});this.entityMouseDown=function(n,t){t.preventDefault(
);t.stopPropagation();$(t.target).closest(".expanded .text").length===1&&n.selected(
)?n.editComment():l.stateMachine.handleAction(0,t,n)};this.entityMouseUp=function(
t,i){i.preventDefault();i.stopPropagation();(t instanceof n.OutputPort||t instanceof
n.InputPort)&&(l.stateMachine.dragging()!==2||l.connector.p0===t)&&n.ContextMenuEventHandler(
i,t,l.menuBuilder);l.stateMachine.handleAction(1,i,t)};this.entityDoubleClick=function(
t,i){if(t instanceof n.Module&&!l.experimentViewModel().readOnlyMode()){l.experiment.
isDraft()||l.cloneHandler();t.editComment();return}l.activate(t,i.ctrlKey||i.shiftKey)}
;this.commentsEventHandler=function(n,t){return t.stopPropagation(),t.keyCode===
27?(t.target.blur(),!1):!0};this.panButtonClicked=function(n){n.preventDefault();
n.stopPropagation();l.stateMachine.handleAction(3,n,null)};this.classId=ko.computed(
function(){var n="xe-surface";return l.experimentViewModel().readOnlyMode()&&(n+=
" readOnly"),n+(" "+l.stateMachine.classes())});this.setLastPositionForExperiment=
new ko.subscribable}return __extends(u,r),Object.defineProperty(u.prototype,"experiment",
{get:function(){return this._experiment},set:function(t){var r=this,u,f;this._experiment!==
t&&(n.Help.setHelpContent(""),this._experiment=t,this.parentExperimentId(this._experiment.
parentExperimentId),this.experimentDisposable&&this.experimentDisposable.dispose(
),this.registerForDisposal(this.experimentDisposable=new DataLab.Util.Disposable),
u=new n.ExperimentViewModel(this._experiment,this.workspace),this.experimentViewModel(
u),this.draftStateMachine=new i.DraftStateMachine(this.workspace,this._experiment),
this.experimentDisposable.registerForDisposal(new DataLab.Util.DisposableSubscription(
this.draftStateMachine.dirty.subscribe(function(n){r.experimentDirty(n)})),new DataLab.
Util.DisposableSubscription(this.draftStateMachine.saveStatus.subscribe(function(
n){r.saveStatus(n)})),u,this.draftStateMachine),this.isAutoRefreshing&&(f=this._experiment.
statusCode(),f===DataLab.DataContract.State.InDraft&&this.experiment.parentExperimentId?
this.workspace.getExperimentAsync(this.experiment.parentExperimentId).done(function(
n){r._experiment.dirtyIfNeeded(n);n.statusCode()===DataLab.DataContract.State.Failed||
n.statusCode()===DataLab.DataContract.State.Finished?r._experiment.refresh(r.workspace):
r.setRefreshConditions(n)}).fail(function(){r.refreshStatusLabel(DataLab.LocalizedResources.
RefreshStatus_Failed)}):this.setRefreshConditions(this._experiment)),this.observeEmptinessOfNewExperiment(
),this.experimentOrViewBoundsChanged.notifySubscribers(null),this.newExperimentLoaded.
notifySubscribers(null),this.dirtySubscription&&this.dirtySubscription.dispose(),
this.experimentViewModel().readOnlyMode()&&this.experimentViewModel().experiment.
statusCode()!==DataLab.DataContract.State.NotStarted&&this.experimentViewModel().
experiment.statusCode()!==DataLab.DataContract.State.Running||(this.dirtySubscription=
this._experiment.dirtyStatus.isDirty.subscribe(function(n){n&&!r._experiment.isDraft(
)&&r.cloneHandler()})))},enumerable:!0,configurable:!0}),u.prototype.stopAutoRefresh=
function(){this.isAutoRefreshing&&(this.isAutoRefreshing=!1,this.statusRefresher.
stop())},u.prototype.rememberExperimentPosition=function(n){this.setLastPositionForExperiment.
notifySubscribers(n)},u.prototype.registerEntityActivationEvent=function(n){if(this.
entityActivationCallback!==null)throw new Error("Activation callback already registered");
this.entityActivationCallback=n},u.prototype.registerCloneHandler=function(n){this.
cloneHandler=n},u.prototype.removeSelected=function(){this.experimentViewModel().
readOnlyMode()||(!this._experiment.isDraft()&&this._experiment&&this.cloneHandler(
),this.experimentViewModel().removeSelected(),this.selectionManager.resetSelection(
),this.experimentOrViewBoundsChanged.notifySubscribers(null),this.experimentOrViewPerturbed.
notifySubscribers(null))},u.prototype.editSelected=function(){this.experimentViewModel(
).editSelected();this.experimentOrViewPerturbed.notifySubscribers(null)},u.prototype.
startConnection=function(n){this.experimentViewModel().readOnlyMode()||(this._experiment.
isDraft()||this.cloneHandler(),this.highlightNodesAndPorts(n),this.connector.startConnection(
n),this.experimentOrViewPerturbed.notifySubscribers(null))},u.prototype.moveConnection=
function(n){if(!this.experimentViewModel().readOnlyMode()){this._experiment.isDraft(
)||this.cloneHandler();var t=this.experimentViewModel().findEntityAtPoint(n.x,n.
y);this.connector.onMouseMove(n.x,n.y,t)}},u.prototype.cancelConnection=function(
){this.connector.reset();this.highlightNodesAndPorts(null)},u.prototype.endConnection=
function(n,t){this.experimentViewModel().readOnlyMode()||(this._experiment.isDraft(
)||this.cloneHandler(),this.connector.endConnection(n,t.x,t.y),this.highlightNodesAndPorts(
null),this.experimentOrViewPerturbed.notifySubscribers(null))},u.prototype.activate=
function(n,t){t===void 0&&(t=!1);this.entityActivationCallback&&this.entityActivationCallback(
n,t)},u.prototype.onMouseMove=function(n){n.preventDefault();this.stateMachine.handleAction(
2,n)},u.prototype.beginMultiSelect=function(n){this.selectionManager.beginRectSelection(
n.x,n.y);this.experimentOrViewPerturbed.notifySubscribers(null)},u.prototype.updateMultiSelect=
function(n){this.selectionManager.updateRectSelection(n.x,n.y)},u.prototype.endMultiSelect=
function(n){this.selectionManager.endRectSelection(n.x,n.y,this.experimentViewModel(
).selectableEntities());this.experimentOrViewPerturbed.notifySubscribers(null)},
u.prototype.moveEntities=function(n,t){if(!this.experimentViewModel().readOnlyMode(
)){var i=this.experimentViewModel().nodes();DataLab.Util.forEach(i,function(i){i.
selected()&&i.translate(n,t)});this.experimentOrViewBoundsChanged.notifySubscribers(
null);this.experimentOrViewPerturbed.notifySubscribers(null)}},u.prototype.addModuleById=
function(n,t,i){t===void 0&&(t=0);i===void 0&&(i=0);var r=this.createModule(n,t,
i),u=r.graphNode.id;return this.experimentViewModel().addNode(r),this.experimentOrViewBoundsChanged.
notifySubscribers(null),this.experimentViewModel().nodes.lookup(u)},u.prototype.
addDatasetById=function(n,t,i){t===void 0&&(t=0);i===void 0&&(i=0);var r=this.createDataset(
n,t,i),u=r.graphNode.id;return this.experimentViewModel().addNode(r),this.experimentOrViewBoundsChanged.
notifySubscribers(null),this.experimentViewModel().nodes.lookup(u)},u.prototype.
addTrainedModelById=function(n,t,i){t===void 0&&(t=0);i===void 0&&(i=0);var r=this.
createTrainedModel(n,t,i),u=r.graphNode.id;return this.experimentViewModel().addNode(
r),this.experimentOrViewBoundsChanged.notifySubscribers(null),this.experimentViewModel(
).nodes.lookup(u)},u.prototype.addTransformById=function(n,t,i){t===void 0&&(t=0);
i===void 0&&(i=0);var r=this.createTransformModule(n,t,i),u=r.graphNode.id;return this.
experimentViewModel().addNode(r),this.experimentOrViewBoundsChanged.notifySubscribers(
null),this.experimentViewModel().nodes.lookup(u)},u.prototype.createModule=function(
n,t,i){t===void 0&&(t=0);i===void 0&&(i=0);var r=this.moduleCache.getItemIfCached(
n);if(!r)throw"No module found with the given id.";return this.experimentViewModel(
).createModule(r,t,i)},u.prototype.createDataset=function(n,t,i){t===void 0&&(t=
0);i===void 0&&(i=0);var r=this.datasetCache.getItemIfCached(n);if(!r)throw"No dataset found with the given id.";
return this.experimentViewModel().createDataset(r,t,i)},u.prototype.createTrainedModel=
function(n,t,i){t===void 0&&(t=0);i===void 0&&(i=0);var r=this.trainedModelCache.
getItemIfCached(n);if(!r)throw"No trained model found with the given id.";return this.
experimentViewModel().createTrainedModel(r,t,i)},u.prototype.createTransformModule=
function(n,t,i){t===void 0&&(t=0);i===void 0&&(i=0);var r=this.transformModulesCache.
getItemIfCached(n);if(!r)throw"No transform found with the given id.";return this.
experimentViewModel().createTransformModule(r,t,i)},u.prototype.createWebServicePort=
function(n,t,i){return t===void 0&&(t=0),i===void 0&&(i=0),this.experimentViewModel(
).createWebServicePort(DataLab.Model.WebServicePortType[n],t,i)},u.prototype.createNode=
function(t,i,r,u){if(t===n.Constants.EntityType.Module)return this.createModule(
i,r,u);if(t===n.Constants.EntityType.Dataset)return this.createDataset(i,r,u);if(
t===n.Constants.EntityType.TrainedModel)return this.createTrainedModel(i,r,u);if(
t===n.Constants.EntityType.Transform)return this.createTransformModule(i,r,u);if(
t===n.Constants.EntityType.WebServicePort)return this.createWebServicePort(i,r,u);
throw"Unknown node entity type";},u.prototype.paletteDragStart=function(n){this.
paletteItem=n;this.experimentOrViewPerturbed.notifySubscribers(null)},u.prototype.
paletteDragEnter=function(t){if(this.paletteItem){var i=t.x-n.Constants.RectWidth/
2,r=t.y-n.Constants.RectHeight/2;this.paletteDragItem=this.createNode(this.paletteItem.
type(),this.paletteItem.id(),i,r)}this.lastMouseCoords=t},u.prototype.paletteDragMove=
function(n){if(this.paletteDragItem){var t=n.x-this.lastMouseCoords.x,i=n.y-this.
lastMouseCoords.y;this.paletteDragItem.translate(t,i)}this.lastMouseCoords=n;this.
experimentOrViewBoundsChanged.notifySubscribers(null)},u.prototype.paletteDragLeave=
function(){this.paletteDragItem&&(this.experimentViewModel().tempNodes.remove(this.
paletteDragItem.graphNode.id),this.paletteDragItem.remove(),this.paletteDragItem=
null,this.experimentOrViewBoundsChanged.notifySubscribers(null))},u.prototype.paletteDragEnd=
function(){var t=null,i,r,e,u,f;if(this.paletteDragItem){if(this._experiment.isDraft(
)||this.cloneHandler(),this.paletteDragItem instanceof n.Dataset&&(i=this.experiment.
getDatasetNode(this.paletteDragItem.datasetNode.dataset.id),i&&(t=this.experimentViewModel(
).getViewModelForNode(i),this.experimentViewModel().tempNodes.remove(this.paletteDragItem.
graphNode.id))),this.paletteDragItem instanceof n.TrainedModel)r=this.experiment.
getTrainedModelNode(this.paletteDragItem.trainedModelNode.trainedModel.id),r&&(t=
this.experimentViewModel().getViewModelForNode(r),this.experimentViewModel().tempNodes.
remove(this.paletteDragItem.graphNode.id));else if(this.paletteDragItem instanceof
n.Module)e=!0,e&&DataLab.Log.featureUsage({featureID:36,groupID:38,experimentID:
this._experiment&&this._experiment.experimentId(),moduleID:this.paletteDragItem.
moduleNode.module_.id,data:this.paletteDragItem.moduleNode.module_.name()});else
if(this.paletteDragItem instanceof n.WebServicePort&&(u=this.paletteDragItem,DataLab.
Log.featureUsage({featureID:53,groupID:52,workspaceID:this.workspace&&this.workspace.
id,experimentID:this._experiment&&this._experiment.experimentId()}),u.webServicePortNode.
type===0&&this.experiment.getWebServicePortNodes(u.webServicePortNode.type).length>
0&&!DataLab.Features.multiInputSupportEnabled())){if(this.experimentViewModel().
tempNodes.remove(this.paletteDragItem.graphNode.id),this.events.onAlert)this.events.
onAlert(DataLab.LocalizedResources.multipleWebServicePortNotSupported);return}t||
(f=this.experimentViewModel().addNode(this.paletteDragItem),f&&(this.selectionManager.
resetSelection(),this.selectionManager.selectEntity(f)));this.experimentOrViewBoundsChanged.
notifySubscribers(null)}return this.paletteDragItem=null,this.experimentOrViewPerturbed.
notifySubscribers(null),t},u.prototype.copy=function(){var t=this.selectionManager.
selectedGraphNodeModels,i;t.count()>0&&(i=JSON.stringify(DataLab.DataContract.v2.
SerializedSubgraph(t)),n.Clipboard.write(i))},u.prototype.cut=function(){var t,i,
r;this.experimentViewModel().readOnlyMode()||(this._experiment.isDraft()||this.cloneHandler(
),t=this.selectionManager.selectedGraphNodeModels,t.count()>0&&(i=JSON.stringify(
DataLab.DataContract.v2.SerializedSubgraph(t)),n.Clipboard.write(i)),r=new n.DeleteNodesCommand(
DataLab.Util.values(t()),this),r.run(),this.experimentOrViewBoundsChanged.notifySubscribers(
null),this.experimentOrViewPerturbed.notifySubscribers(null))},u.prototype.paste=
function(){var t=this,r=this.experimentView.getViewInfo(),u=n.Clipboard.read(),f,
e,i,o;this.experimentViewModel().readOnlyMode()||(this._experiment.isDraft()||this.
cloneHandler(),u&&(f=JSON.parse(u),e=function(i){var u,f,r;if(DataLab.Features.trialLimitationsEnabled(
)){if(u=DataLab.Util.values(i.contractToNodes).filter(function(n){return n instanceof
DataLab.Model.ModuleNode}),!DataLab.Trial.isNumberOfModulesUnrestricted()&&(f=u.
length+t._experiment.getNumberOfModules(),f>DataLab.Trial.getMaxNumberOfModules(
)))return DataLab.Log.featureUsage({featureID:60,groupID:56,experimentID:t._experiment&&
t._experiment.experimentId()}),n.showExceededNumberOfModulesLimitDialog(),!1;if(
r=DataLab.Util.first(u,function(n){return!DataLab.Trial.isModuleEnabledById(n.module_.
familyId)},null),r)return DataLab.Log.featureUsage({featureID:58,groupID:56,experimentID:
t._experiment&&t._experiment.experimentId(),moduleID:r.module_.name()}),n.showDisabledModuleDialog(
r.module_.familyId,r.module_.name()),!1}return!0},i=new n.PasteCommand(f,this,r.
experimentBounds,r.topLeft,this.workspace,e),o=i.itemsPasted.subscribe(function(
n){n&&t.needsAnimationToContent.notifySubscribers(n);o.dispose()}),i.run(),this.
experimentOrViewBoundsChanged.notifySubscribers(null)),this.experimentOrViewPerturbed.
notifySubscribers(null))},u.prototype.refreshExperiment=function(){var n=this;return this.
statusRefresher.doActionNow().fail(function(){n.refreshStatusLabel(DataLab.LocalizedResources.
RefreshStatus_Failed)})},u.prototype.startAutoRefresh=function(){this.isAutoRefreshing=
!0},u.prototype.observeEmptinessOfNewExperiment=function(){var t=this,n;this.currentExperimentHasBeenNonEmpty(
!this._experiment.isEmpty());this._experiment.isEmpty()&&(n=new DataLab.Util.DisposableSubscription(
this._experiment.isEmpty.subscribe(function(i){i||t.currentExperimentHasBeenNonEmpty(
!0);n.dispose()})),this.experimentDisposable.registerForDisposal(n))},u.prototype.
createContextMenuCommands=function(t){var r=this,i={promoteOutput:null,promoteTrainerOutput:
null,promoteTransformOutput:null,openPython2NotebookFromPort:null,openPython3NotebookFromPort:
null,editComment:null,viewOutput:null,viewStdOut:null,viewStdErr:null,downloadDataset:
null,visualizeData:null,setPublishPort:null,unsetPublishPort:null,delete_:null,refreshExperiment:
null,navigateToParent:null,copy:null,cut:null,paste:null,showHelp:null,promoteCreateWebService:
null,showOutputPortApiCode:null};return i.promoteOutput=this.createPromoteOutputCommand(
),i.promoteTrainerOutput=this.createPromoteTrainerOutputCommand(),i.promoteTransformOutput=
this.createPromoteTransformOutputCommand(),i.promoteCreateWebService=n.optionalCommand(
t.promoteCreateWebService),i.editComment=new n.CallbackCommand(function(n){n.editComment(
)}),i.viewOutput=this.createViewOutputCommand(),i.viewStdOut=new n.CallbackCommand(
function(n){r.endpointDownloader.download(n.moduleNode.outputLog.endpoint())}),i.
viewStdErr=new n.CallbackCommand(function(n){n.errorLog.onClick(n.errorLog,null)}
),i.showHelp=new n.CallbackCommand(function(){n.Help.QuickHelpMoreInfo()}),DataLab.
FeaturesExtensions.canEnableNotebookContextMenu()&&(i.openPython2NotebookFromPort=
this.createOpenNotebookCommand(DataLab.Constants.NotebookLanguage.Python2),i.openPython3NotebookFromPort=
this.createOpenNotebookCommand(DataLab.Constants.NotebookLanguage.Python3)),DataLab.
Features.enableOutputPortApiCodeEnabled()&&(i.showOutputPortApiCode=this.createShowOutputPortApiCodeCommand(
)),i.downloadDataset=new n.CallbackCommand(function(t){if(t instanceof n.OutputPort)
r.endpointDownloader.download(t.portModel.outputEndpoint);else if(t instanceof n.
Dataset)r.endpointDownloader.download(t.datasetNode.datasetPort.outputEndpoint);
else throw new Error("Unknown view model type when trying to view a dataset");}),
i.visualizeData=this.createVisualizeDataCommand(),i.setPublishPort=new n.CallbackCommand(
function(t){t instanceof n.OutputPort?r.experimentViewModel().addPublishOutputPort(
t):t instanceof n.InputPort&&r.experimentViewModel().addPublishInputPort(t)}),i.
unsetPublishPort=new n.CallbackCommand(function(t){t instanceof n.OutputPort?r.experimentViewModel(
).removePublishOutputPort(t):t instanceof n.InputPort&&r.experimentViewModel().removePublishInputPort(
t)}),i.delete_=new n.CallbackCommand(function(){r.removeSelected()}),i.refreshExperiment=
n.optionalCommand(t.refreshExperiment),i.navigateToParent=n.optionalCommand(t.navigateToParent),
i.copy=new n.CallbackCommand(function(){r.copy()}),i.cut=new n.CallbackCommand(function(
){r.cut()}),i.paste=new n.CallbackCommand(function(){r.paste()}),i},u.prototype.
setCommandAvailabilities=function(t){var i=this,r=[t.viewOutput,t.visualizeData,
t.promoteOutput,t.promoteTrainerOutput,t.promoteTransformOutput];t.showOutputPortApiCode&&
r.push(t.showOutputPortApiCode);r.forEach(function(n){return n.target(i.menuBuilder.
currentTarget)});t.viewStdErr.canExecute=ko.computed(function(){var r=i.menuBuilder.
currentTarget(),t;return r instanceof n.Module&&(t=r,(t.moduleNode.statusCode.value(
)===DataLab.DataContract.State.Finished||t.moduleNode.statusCode.value()===DataLab.
DataContract.State.Failed)&&t.moduleNode.errorLog.value())?!0:!1});t.setPublishPort.
canExecute=ko.computed(function(){var t,r;return i.experimentViewModel().readOnlyMode(
)?!1:(t=i.menuBuilder.currentTarget(),t instanceof n.PortViewModel?(r=t,r.portModel.
isDatasetDataType()):!1)});t.unsetPublishPort.canExecute=ko.computed(function(){
return i.experimentViewModel().readOnlyMode()?!1:!0});t.promoteCreateWebService.
canExecute=null!=t.promoteTrainerOutput.canExecute?t.promoteTrainerOutput.canExecute:
t.promoteTransformOutput.canExecute;t.viewStdOut.canExecute=ko.computed(function(
){var r=i.menuBuilder.currentTarget(),t;return r instanceof n.Module&&(t=r,(t.moduleNode.
statusCode.value()===DataLab.DataContract.State.Finished||t.moduleNode.statusCode.
value()===DataLab.DataContract.State.Failed)&&t.moduleNode.outputLog.value())?!0:
!1});t.editComment.canExecute=ko.computed(function(){return!i.experimentViewModel(
).readOnlyMode()});t.delete_.canExecute=ko.computed(function(){return i.selectionManager.
selectedEntities.count()>0&&!i.experimentViewModel().readOnlyMode()});t.navigateToParent.
canExecute=ko.computed(function(){return i.parentExperimentId()!==null});t.copy.
canExecute=ko.computed(function(){return i.selectionManager.selectedGraphNodes.count(
)>0});t.cut.canExecute=ko.computed(function(){return i.selectionManager.selectedGraphNodes.
count()>0&&!i.experimentViewModel().readOnlyMode()});t.paste.canExecute=ko.computed(
function(){return!i.experimentViewModel().readOnlyMode()})},u.prototype.highlightNodesAndPorts=
function(t){DataLab.Util.forEach(this.experimentViewModel().nodes(),function(r){
var u=DataLab.Model.Constants.PortState.Default;DataLab.Util.forEach(r.ports,function(
r){var e=t instanceof n.OutputPort&&r instanceof n.OutputPort||t instanceof n.InputPort&&
r instanceof n.InputPort,f;t==null||t===r||e?r.portState(i.Constants.PortState.Default):
r.portState(t.portModel.compatibilityWithPort(r.portModel));t===null||t===r?u=DataLab.
Model.Constants.PortState.Default:(f=t.portModel.compatibilityWithPort(r.portModel),
(f===DataLab.Model.Constants.PortState.Compatible||f===DataLab.Model.Constants.PortState.
Replaceable)&&(u=DataLab.Model.Constants.PortState.Compatible))});r.portState(u)}
)},u.prototype.setRefreshConditions=function(t){var i=this,r=t.statusCode(),u;(r===
DataLab.DataContract.State.NotStarted||r===DataLab.DataContract.State.Running)&&
(this.statusRefresher.start(),this.experimentDisposable.registerForDisposal(u=new
DataLab.Util.DisposableSubscription(t.statusCode.subscribe(function(){var r=t.statusCode(
);if((r===DataLab.DataContract.State.Failed||r===DataLab.DataContract.State.Finished||
r===DataLab.DataContract.State.Canceled)&&(i.statusRefresher.stop(),u.dispose()),
DataLab.Features.trialLimitationsEnabled()&&r===DataLab.DataContract.State.Canceled)
switch(t.statusDetails()){case DataLab.DataContract.CancellationReason.ExceededRuntimeLimit:
DataLab.Log.featureUsage({featureID:63,groupID:56,experimentID:i._experiment&&i.
_experiment.experimentId()});n.showExceededRuntimeLimitDialog()}}))))},u.prototype.
calculatePlacement=function(t){var i;do i=!0,this.experiment.nodes.forEach(function(
r){t.x===r.x()&&t.y===r.y()&&(t.x+=n.Constants.PasteCascadeX,t.y+=n.Constants.PasteCascadeY,
i=!1)});while(!i);return{x:t.x,y:t.y,matrixTransform:null}},u.prototype.getNumberOfModulesToBePasted=
function(n){return n&&n.Nodes?DataLab.Util.filter(n.Nodes,function(n){return n.NodeType===
0}).length:0},u.prototype.createViewOutputCommand=function(t){var r=this;t===void
0&&(t=null);var i=ko.observable(t),u=function(n){n=ko.utils.unwrapObservable(i())||
n;r.endpointDownloader.download(n.portModel.outputEndpoint)},f=ko.computed(function(
){var r=ko.utils.unwrapObservable(i()),t,u;return r instanceof n.OutputPort&&(t=
r,t.parent instanceof n.Module&&t.portModel.outputEndpoint&&t.portModel.outputEndpoint.
Size>=0&&!t.portModel.isVisualizable()&&(u=t.parent,(t.portModel.descriptor.allowedDataTypes.
some(function(n){return n.dataTypeId==="ILearnerDotNet"||n.dataTypeId==="ITransformDotNet"||
n.dataTypeId==="IClusterDotNet"})===!1||DataLab.Features.authorizeDownloadILearnerEnabled(
)&&(t.portTypes==="ILearnerDotNet"||t.portTypes==="IClusterDotNet"))&&u.moduleNode.
statusCode.value()===DataLab.DataContract.State.Finished))?!0:!1});return new n.
CallbackCommand(u,f,i)},u.prototype.createVisualizeDataCommand=function(t){var i=
this;t===void 0&&(t=null);var r=ko.observable(t),u=function(t){if(t=ko.utils.unwrapObservable(
r())||t,t instanceof n.OutputPort){var u=t;i.endpointDownloader.visualize(t.portModel,
i.workspace,u.parent.isModule(),i.experimentView.getViewInfo())}},f=ko.computed(
function(){var u=ko.utils.unwrapObservable(r()),t,f,i;return u instanceof n.OutputPort&&
((t=u,t.parent.isData()&&(f=t.parent,f.datasetNode.dataset.visualizeEndPoint!=undefined))||
(i=t.parent,t.portModel.isVisualizable()&&i.moduleNode&&i.moduleNode.statusCode.
value()===DataLab.DataContract.State.Finished))?!0:!1});return new n.CallbackCommand(
u,f,r)},u.prototype.createPromoteOutputCommand=function(t){t===void 0&&(t=null);
var i=ko.observable(t),r=n.optionalCommand(this.experimentEditorViewModelCommands.
promoteOutput),u=function(n){return r.execute(n)},f=ko.computed(function(){var r=
ko.utils.unwrapObservable(i()),t,u;return r instanceof n.OutputPort&&(t=r,t.parent
instanceof n.Module&&t.portModel.outputEndpoint&&t.portModel.outputEndpoint.Size>=
0&&t.portModel.descriptor.allowedDataTypes.filter(function(n){return!n.allowPromotion}
).length===0&&(u=t.parent,u.moduleNode.statusCode.value()===DataLab.DataContract.
State.Finished))?!0:!1});return new n.CallbackCommand(u,f,i)},u.prototype.createPromoteTrainerOutputCommand=
function(t){t===void 0&&(t=null);var i=ko.observable(t),r=n.optionalCommand(this.
experimentEditorViewModelCommands.promoteTrainerOutput),u=function(n){return r.execute(
n)},f=ko.computed(function(){var r=ko.utils.unwrapObservable(i()),t,u;return r instanceof
n.OutputPort&&(t=r,t.parent instanceof n.Module&&t.portModel.outputEndpoint&&t.portModel.
outputEndpoint.Size>=0&&t.portModel.descriptor.allowedDataTypes.filter(function(
n){return!n.allowModelPromotion}).length===0&&(u=t.parent,u.moduleNode.statusCode.
value()===DataLab.DataContract.State.Finished&&t.portModel.descriptor.allowedDataTypes.
some(function(n){return n.dataTypeId==="ILearnerDotNet"||n.dataTypeId==="IClusterDotNet"}
)))?!0:!1});return new n.CallbackCommand(u,f,i)},u.prototype.createPromoteTransformOutputCommand=
function(t){t===void 0&&(t=null);var i=ko.observable(t),r=n.optionalCommand(this.
experimentEditorViewModelCommands.promoteTransformOutput),u=function(n){return r.
execute(n)},f=ko.computed(function(){var r=ko.utils.unwrapObservable(i()),t,u;return r
instanceof n.OutputPort&&(t=r,t.parent instanceof n.Module&&t.portModel.outputEndpoint&&
t.portModel.outputEndpoint.Size>=0&&t.portModel.descriptor.allowedDataTypes.filter(
function(n){return!n.allowModelPromotion}).length===0&&(u=t.parent,u.moduleNode.
statusCode.value()===DataLab.DataContract.State.Finished&&t.portModel.descriptor.
allowedDataTypes.some(function(n){return n.dataTypeId==="ITransformDotNet"})))?!0:
!1});return new n.CallbackCommand(u,f,i)},u.prototype.openNotebookFromExperimentGraphResource=
function(t,i){var o,s,f,l,u,a,h,v,y;if(i===void 0&&(i=null),DataLab.Log.featureUsage(
{featureID:127,groupID:126,data:t}),i instanceof n.Dataset){var c=i,r=DataLab.Util.
resurrectDashesInGUID(c.datasetNode.dataset.familyId.split(".")[1]),e=this.workspace.
applicationCache.notebookCache.getItemIfCached(r);e?f=r:(s={Name:c.datasetNode.name,
FamilyId:r,Language:t,Author:this.workspace.getUserName()},l={TemplateName:n.NotebookHelpers.
getNotebookCreationTemplate(t,2),DatasetName:c.datasetNode.name},o=l)}else i instanceof
n.OutputPort&&(u=i,u.parent instanceof n.Dataset?(r=DataLab.Util.resurrectDashesInGUID(
u.parent.datasetNode.dataset.familyId.split(".")[1]),e=this.workspace.applicationCache.
notebookCache.getItemIfCached(r),e?f=r:(s={Name:u.parent.datasetNode.name,FamilyId:
r,Language:t,Author:this.workspace.getUserName()},a={TemplateName:n.NotebookHelpers.
getNotebookCreationTemplate(t,2),DatasetName:u.parent.datasetNode.name},o=a)):u.
parent instanceof n.Module&&(h=i.parent,r=n.NotebookHelpers.ModuleResultNotebookGuidGenerator(
h.moduleNode.id),e=this.workspace.applicationCache.notebookCache.getItemIfCached(
r),e?f=r:(DataLab.Util.formatDate(new Date),s={Name:DataLab.LocalizedResources.runResultNotebookNamePrefix+
DataLab.Util.formatDate(new Date).replace(/\//g,"-"),FamilyId:r,Language:t,Author:
this.workspace.getUserName()},v={TemplateName:n.NotebookHelpers.getNotebookCreationTemplate(
t,3),ExperimentId:h.moduleNode.executedExperimentId,NodeId:h.moduleNode.id,PortName:
u.portModel.name,DataTypeId:u.portTypes},o=v)));f?n.NotebookHelpers.openNotebookById(
f,DataLab.Util.addSpinnerToBlankWindow()):(y={Notebook:s,Parameters:o},n.NotebookHelpers.
createAndOpenNotebook(y))},u.prototype.createOpenNotebookCommand=function(i,r){var
u=this;r===void 0&&(r=null);var f=ko.observable(r),e=function(n){n=ko.utils.unwrapObservable(
f())||n;u.openNotebookFromExperimentGraphResource(i,r)},o=ko.computed(function()
{var e=ko.utils.unwrapObservable(f()),l=[t.GenericCSV,t.GenericTSV,t.GenericCSV+
"NoHeader",t.GenericTSV+"NoHeader",t.PlainText],o,c,a,v;if(e instanceof n.Dataset)
{var s=e,h=DataLab.Util.resurrectDashesInGUID(s.datasetNode.dataset.familyId.split(
".")[1]),r=u.workspace.applicationCache.notebookCache.getItemIfCached(h);if(r)return i===
r.language;if(o=s.datasetPort.portTypes,$.inArray(o,l)!==-1)return!0}if(e instanceof
n.OutputPort){if(c=e,e.parent instanceof n.Dataset){if(s=c.parent,h=DataLab.Util.
resurrectDashesInGUID(s.datasetNode.dataset.familyId.split(".")[1]),r=u.workspace.
applicationCache.notebookCache.getItemIfCached(h),r)return i===r.language;if(o=s.
datasetPort.portTypes,$.inArray(o,l)!==-1)return!0}else if(e.parent instanceof n.
Module){if(o=c.portTypes,a=e.parent,h=n.NotebookHelpers.ModuleResultNotebookGuidGenerator(
a.moduleNode.id),r=u.workspace.applicationCache.notebookCache.getItemIfCached(h),
r)return i===r.language;if($.inArray(o,l)!==-1&&(c.parent.isData()||(v=c.parent,
v.moduleNode.statusCode.value()===DataLab.DataContract.State.Finished)))return!0}
return!1}});return new n.CallbackCommand(e,o,f)},u.prototype.createShowOutputPortApiCodeCommand=
function(i){var u=this;i===void 0&&(i=null);var r=ko.observable(i),f=function(t)
{t=ko.utils.unwrapObservable(r())||t;var i=t.portModel;u.workspace.getWorkspaceSettingsAsync(
).done(function(t){var r=new n.ApiCodeDialogViewModel(i,t.id,t.authorizationToken);
r.showDialog()}).fail(function(){var t=new n.ApiCodeDialogViewModel(i,undefined,
undefined);t.showDialog()})},e=ko.computed(function(){var u=ko.utils.unwrapObservable(
r()),f;if(u instanceof n.OutputPort){var i=u,e=i.portTypes,o=[t.GenericCSV,t.GenericTSV,
t.GenericCSV+"NoHeader",t.GenericTSV+"NoHeader",t.PlainText];return $.inArray(e,
o)!==-1?i.parent.isData()?!0:(f=i.parent,f.moduleNode.statusCode.value()===DataLab.
DataContract.State.Finished?!0:!1):!1}});return new n.CallbackCommand(f,e,r)},u}
(DataLab.Util.Disposable);n.ExperimentEditorViewModel=r}(ExperimentEditor||(ExperimentEditor=
{})),function(n){var t,r,i;(function(n){n.ScrollbarSizeTestDimensions=100})(t=n.
Constants||(n.Constants={})),function(n){n[n.Vertical=0]="Vertical";n[n.Horizontal=
1]="Horizontal"}(n.ScrollOrientation||(n.ScrollOrientation={}));r=n.ScrollOrientation;
i=function(){function n(n,t,i,r){var u=this;this.scrollDiv=n;this.positionReference=
t;this.viewScrolled=ko.observable();this.orientation=i;this.scrollRange=document.
createElement("div");i===1?(this.scrollDiv.setAttribute("class","horizontalScroll scrollUI"),
this.scrollRange.setAttribute("class","horizontalScrollRange"),this.scrollDiv.style.
right=r.verticalScrollbarWidth.toFixed()+"px",this.clientLength="clientWidth",this.
clientOffset="scrollLeft",this.styleLength="width"):(this.scrollDiv.setAttribute(
"class","verticalScroll scrollUI"),this.scrollRange.setAttribute("class","verticalScrollRange"),
this.scrollDiv.style.bottom=r.horizontalScrollbarHeight.toFixed()+"px",this.clientLength=
"clientHeight",this.clientOffset="scrollTop",this.styleLength="height");this.scrollDiv.
appendChild(this.scrollRange);this.scrollDiv.addEventListener("scroll",function(
){u.suppressScrollEvent?u.suppressScrollEvent=!1:u.viewScrolled.notifySubscribers(
u.scrollDiv[u.clientOffset]/u.scrollRange[u.clientLength])});this.sizeUpdated()}
return n.prototype.sizeUpdated=function(){var n,t=this.positionReference(this.orientation);
n=this.scrollDiv[this.clientLength]/t.elevatorLength;this.scrollRange.style[this.
styleLength]=n.toFixed()+"px";this.suppressScrollEvent=!0;$(this.scrollDiv)[this.
clientOffset](n*t.elevatorOffset)},n.computeDimensions=function(){var n=document.
createElement("div"),i=document.createElement("div"),r,u;return n.setAttribute("style",
"width: "+t.ScrollbarSizeTestDimensions.toFixed()+"px;height: "+t.ScrollbarSizeTestDimensions.
toFixed()+"px;overflow: scroll;position: absolute;opacity: 0;"),i.setAttribute("style",
"width:100%;height: 100%;position: absolute;top: 0px;left: 0px;"),document.body.
appendChild(n),n.appendChild(i),r=t.ScrollbarSizeTestDimensions-i.clientWidth,u=
t.ScrollbarSizeTestDimensions-i.clientHeight,document.body.removeChild(n),{verticalScrollbarWidth:
r,horizontalScrollbarHeight:u}},n}();n.ScrollControl=i}(ExperimentEditor||(ExperimentEditor=
{}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t=function(n){function t(t,i,r){var u=this,f;n.call(this);
this.mouseMoveHandler=i;this.mouseUpHandler=r;this.buttonsDown=0;this.mouseDownOrigin=
t;f=function(){u.buttonsDown++};this.beginCapture=function(){u.buttonsDown===0&&
(u.registerForDisposal(u.mouseMoveDisposableListener=new DataLab.Util.DisposableEventListener(
document,"mousemove",u.mouseMoveHandler,!0),u.mouseUpDisposableListener=new DataLab.
Util.DisposableEventListener(document,"mouseup",u.mouseUpHandler,!0),u.endCapturesDisposableListener=
new DataLab.Util.DisposableEventListener(document,"mouseup",u.endCapture,!0),u.countMouseDownsDisposableListener=
new DataLab.Util.DisposableEventListener(document,"mousedown",f,!0)),u.buttonsDown++)}
;this.endCapture=function(){u.buttonsDown--;u.buttonsDown===0&&(u.mouseMoveDisposableListener.
dispose(),u.mouseUpDisposableListener.dispose(),u.endCapturesDisposableListener.
dispose(),u.countMouseDownsDisposableListener.dispose())};this.registerForDisposal(
new DataLab.Util.DisposableEventListener(this.mouseDownOrigin,"mousedown",this.beginCapture,
!0))}return __extends(t,n),t}(DataLab.Util.Disposable);n.MouseCapture=t;ko.bindingHandlers.
mouseCapture={init:function(n,i,r,u){var f=i();if(!(f.mouseMove&&f.mouseUp))throw"MouseCapture requires mouseMove and mouseUp handlers in binding";
var o=function(n){f.mouseMove(u,n)},s=function(n){f.mouseUp(u,n)},e=new t(n,o,s);
DataLab.Util.Disposable.exemptFromDiposablesInContextAssertion(e);ko.utils.domNodeDisposal.
addDisposeCallback(n,function(){e.dispose()})},update:function(){}}}(ExperimentEditor||
(ExperimentEditor={})),function(n){var t,i,r;(function(n){n.SixtyFPS=1e3/60})(t=
n.Constants||(n.Constants={}));i=window.requestAnimationFrame||window.mozRequestAnimationFrame||
window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.requestAnimationFrame=
i;r=function(){function n(t,i,r,u){r===void 0&&(r=800);u===void 0&&(u=n.defaultEasing);
this.easingFunction=u;this.duration=r;this.startTime=Date.now();this.endTime=this.
startTime+r;this.stepFunction=t;this.animatedProperties=i;this.animationEnded=new
ko.subscribable;this._animationStopped=!1;this.ignoreFrames=!1;for(var f in this.
animatedProperties){if(isNaN(Number(i[f].start)))throw"The property "+f+" lacks a numerical animation start value";
if(isNaN(Number(i[f].end)))throw"The property "+f+" lacks a numerical animation end value";
}}return n.defaultEasing=function(n){return(Math.sin((n-.5)*Math.PI)+1)/2},n.prototype.
start=function(){var n=this;if(this._animationStopped)throw new Error("Cannot start a previously stopped animation.");
window.requestAnimationFrame?window.requestAnimationFrame(function(){n.step()}):
this.legacyIntervalAnimationId=window.setTimeout(function(){n.step()},t.SixtyFPS)}
,n.prototype.stop=function(){if(this._animationStopped)throw new Error("Cannot stop an animation twice.");
this._animationStopped=!0;this.step()},Object.defineProperty(n.prototype,"animationStopped",
{get:function(){return this._animationStopped},enumerable:!0,configurable:!0}),n.
prototype.step=function(){var f=this,n,u,e;if(!this.ignoreFrames){var i=(Date.now(
)-this.startTime)/(this.endTime-this.startTime),o=i<1?this.easingFunction(i):1,r=
{};for(n in this.animatedProperties)u=Number(this.animatedProperties[n].start),e=
Number(this.animatedProperties[n].end),r[n]=u+(e-u)*o;if(this._animationStopped)
{this.animationEnded.notifySubscribers(r);this.ignoreFrames=!0;return}this.stepFunction(
r);i<1?window.requestAnimationFrame?window.requestAnimationFrame(function(){f.step(
)}):window.setTimeout(function(){f.step()},t.SixtyFPS):this.stop()}},n}();n.Animation=
r}(ExperimentEditor||(ExperimentEditor={})),function(n){var t=function(){function n(
t,i,r){r===void 0&&(r=Date);this.name=t;this.cacheLines=i;this.LRUDate=r;this.items=
n.localStorageWrapper[t]?JSON.parse(n.localStorageWrapper[t]):Object.create(null)}
return n.prototype.add=function(t,i){if(this.items[i]){this.items[i]={item:t,timeStamp:
this.LRUDate.now()};n.localStorageWrapper[this.name]=JSON.stringify(this.items);
return}if(Object.keys(this.items).length<this.cacheLines)this.items[i]={item:t,timeStamp:
this.LRUDate.now()};else{var r=Infinity,u=null;DataLab.Util.forEach(this.items,function(
n,t){n.timeStamp<r&&(u=t,r=n.timeStamp)});delete this.items[u];this.items[i]={item:
t,timeStamp:this.LRUDate.now()}}n.localStorageWrapper[this.name]=JSON.stringify(
this.items)},n.prototype.fetch=function(t){var i=this.items[t];return i&&(i.timeStamp=
this.LRUDate.now(),n.localStorageWrapper[this.name]=JSON.stringify(this.items)),
i?i.item:undefined},n.prototype.clear=function(){this.items=Object.create(null)}
,n.localStorageWrapper=Shell.Utilities.isLocalStorageAvailable()?localStorage:Object.
create(null),n}();n.LocalStorageCache=t}(ExperimentEditor||(ExperimentEditor={})
);__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var
i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r}
,function(n){var t,i,r;(function(n){n.ModuleFromPaletteAnimationDuration=350;n.AnimatedZoomDuration=
400;n.InitialZoomToFitYOffSet=50;n.NumberOfCacheLines=50})(t=n.Constants||(n.Constants=
{}));i=function(){function n(n,t,i,r,u,f){this._svgTransformElement=n;this._svgRoot=
t;this._coordinateHelper=i;this._zoomControl=r;this._overlayDivs=u;this._zoomHelper=
f}return Object.defineProperty(n.prototype,"svgTransformElement",{get:function()
{return this._svgTransformElement},enumerable:!0,configurable:!0}),Object.defineProperty(
n.prototype,"svgRoot",{get:function(){return this._svgRoot},enumerable:!0,configurable:
!0}),Object.defineProperty(n.prototype,"coordinateHelper",{get:function(){return this.
_coordinateHelper},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,
"zoomControl",{get:function(){return this._zoomControl},enumerable:!0,configurable:
!0}),Object.defineProperty(n.prototype,"zoomHelper",{get:function(){return this.
_zoomHelper},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"overlayDivs",
{get:function(){return this._overlayDivs},enumerable:!0,configurable:!0}),n}();r=
function(r){function u(u,f){var o=this,e,s,h,l,b,k,d,g,c;if(r.call(this),e=this,
!u)throw new Error("Experiment editor control must have a div for its view.");if(
this.rootContainerDiv=u,this.registerForDisposal(new DataLab.Util.DisposableSetHTML(
this.rootContainerDiv,ExperimentEditorTemplates._editorSurfaceMarkup)),this.experimentCanvasDiv=
this.rootContainerDiv.querySelector(".experimentEditorContainer"),this.registerForDisposal(
new DataLab.Util.DisposableKOApplyBindings(f,this.experimentCanvasDiv)),!this.experimentCanvasDiv)
throw new Error("Experiment editor control's root container div is missing experiment editor container");
if(this.canvasEventDiv=this.experimentCanvasDiv.querySelector(".customElements"),
s=this.experimentCanvasDiv.querySelector("svg"),s===null)throw new Error("The required root <svg> element does not exist");
if(h=s.querySelector("g"),h===null)throw new Error("The required root <svg><g> element does not exist");
if(this.registerForDisposal(new DataLab.Util.DisposableSubscription(f.needsAnimationToNode.
subscribe(function(n){o.animateToGraphNode(n)})),new DataLab.Util.DisposableSubscription(
f.needsAnimationToContent.subscribe(function(n){o.bringRectIntoView(n)}))),this.
viewModel=f,this.viewModel.coordinateConverter=this,this.topLeft=s.createSVGPoint(
),this.viewModel.experimentView=this,this.controlPanelDiv=this.rootContainerDiv.
querySelector("#controlPanel"),!this.controlPanelDiv)throw new Error("Required control panel div does not exist.");
l=new n.ZoomControl(this.controlPanelDiv,this.rootContainerDiv);this.registerForDisposal(
l);var y=this.experimentCanvasDiv.querySelectorAll(".xe-overlay"),ot=new n.PanHelper(
this.controlPanelDiv,function(n){e._viewModel.panButtonClicked(n)}),a=function()
{return e.getViewDimensions()},p=new n.CoordinateHelper(s,a,h),nt=function(n){e.
viewModel.experimentOrViewPerturbed.notifySubscribers(null);e.rememberPositionForExperiment(
n,e.viewModel.experiment.experimentId())},tt=function(){return e.topLeft},it=function(
){e.viewModel.animationComplete.notifySubscribers(null);DataLab.TestMessaging.postMessage(
{type:DataLab.TestMessaging.Constants.AnimationComplete})},rt=function(){e.updateScrollbars(
)},w=function(){return e.getExperimentBounds()},ut=new n.ZoomHelper(h,s,p,l,a,nt,
tt,it,rt,y,w);DataLab.Features.miniMapInExperimentEditorEnabled()&&(b=function()
{return e.getGraphTransform()},k=function(n,t){return e.pan(n,t)},this.miniMapControl=
new n.XEMiniMap(this.rootContainerDiv,b,a,w,k,this.viewModel.experimentOrViewBoundsChanged,
this.viewModel.experimentOrViewPerturbed,this.viewModel.newExperimentLoaded),this.
registerForDisposal(this.miniMapControl),d=ExperimentEditorTemplates._miniMapMarkup,
this.registerForDisposal(new DataLab.Util.DisposableSetHTML($(".miniMapAnchorDiv").
get(0),d)),g=document.querySelector(".miniMapAndLauncherContainer"),this.registerForDisposal(
new DataLab.Util.DisposableKOApplyBindings(this.miniMapControl,g)),this.controlPanelDiv.
parentElement.classList.add("marginToAllowForMiniMap"));this.initOnly=new i(h,s,
p,l,y,ut);this.viewModel.panResponder=this.initOnly.zoomHelper;var ft=this.rootContainerDiv.
querySelector(".xe-surface").appendChild(document.createElement("div")),et=this.
rootContainerDiv.querySelector(".xe-surface").appendChild(document.createElement(
"div")),v=this.rootContainerDiv.querySelector(".xe-surface").appendChild(document.
createElement("div"));v.setAttribute("class","scrollSpacer scrollUI");c=n.ScrollControl.
computeDimensions();v.style.width=c.verticalScrollbarWidth.toFixed()+"px";v.style.
height=c.horizontalScrollbarHeight.toFixed()+"px";this.calculateScrollPosition=function(
n){var r=n==0?"y":"x",t=n==0?"height":"width",u=o.viewModel.experimentView.getViewInfo(
),f=o.getViewDimensions(),s=f[t]/e.initOnly.zoomControl.getScale(),i=e.initOnly.
zoomHelper.getPanLimits(),h=u.topLeft[r]/e.initOnly.zoomControl.getScale()-i[r];
return{elevatorLength:s/i[t],elevatorOffset:h/i[t]}};this.scrollVertical=new n.ScrollControl(
et,this.calculateScrollPosition,0,c);this.scrollVertical.viewScrolled.subscribe(
function(n){var t=e.initOnly.zoomHelper.getPanLimits();e.initOnly.zoomHelper.setOriginAndZoom(
e.topLeft.x,(n*t.height+t.y)*e.initOnly.zoomControl.getScale(),e.initOnly.zoomControl.
getScale(),!0)});this.scrollHorizontal=new n.ScrollControl(ft,this.calculateScrollPosition,
1,c);this.scrollHorizontal.viewScrolled.subscribe(function(n){if(!o.viewModel.isBeingResized(
)){var t=e.initOnly.zoomHelper.getPanLimits();e.initOnly.zoomHelper.setOriginAndZoom(
(n*t.width+t.x)*e.initOnly.zoomControl.getScale(),e.topLeft.y,e.initOnly.zoomControl.
getScale(),!0)}});this.registerForDisposal(new DataLab.Util.DisposableEventListener(
window,"resize",function(){e.updateScrollbars()}),new DataLab.Util.DisposableSubscription(
this.viewModel.isBeingResized.subscribe(function(){e.scrollHorizontal.sizeUpdated(
)})),new DataLab.Util.DisposableSubscription(this.viewModel.experimentOrViewBoundsChanged.
subscribe(function(){e.scrollHorizontal.sizeUpdated()})));this.setupEventHandlers(
this.canvasEventDiv);this.isDraggingNewEntity=!1;this.experimentPositionCache=new
n.LocalStorageCache("experimentPosition",t.NumberOfCacheLines);this.registerForDisposal(
new DataLab.Util.DisposableSubscription(this.viewModel.newExperimentLoaded.subscribe(
function(){var t=o.experimentPositionCache.fetch(e.viewModel.experimentViewModel(
).experiment.experimentId()),n;t?(e.initOnly.zoomControl.setScale(t.scale),e.initOnly.
zoomHelper.setOriginAndZoom(t.domainX,t.domainY)):(n=o.experimentPositionCache.fetch(
e.viewModel.experiment.parentExperimentId),n?(e.initOnly.zoomControl.setScale(n.
scale),e.initOnly.zoomHelper.setOriginAndZoom(n.domainX,n.domainY)):e.initOnly.zoomHelper.
fitExperimentWithoutAnimation())})),new DataLab.Util.DisposableSubscription(this.
viewModel.setLastPositionForExperiment.subscribe(function(n){e.rememberPositionForExperiment(
{domainX:e.topLeft.x,domainY:e.topLeft.y,scale:e.initOnly.zoomControl.getScale()},
n)})))}return __extends(u,r),u.prototype.clearPositionCache=function(){this.experimentPositionCache.
clear()},u.prototype.updateScrollbars=function(){this.scrollHorizontal.sizeUpdated(
);this.scrollVertical.sizeUpdated()},Object.defineProperty(u.prototype,"currentPanZoomAnimation",
{get:function(){return this.initOnly.zoomHelper.currentAnimation},enumerable:!0,
configurable:!0}),Object.defineProperty(u.prototype,"viewModel",{get:function(){
return this._viewModel},set:function(n){this._viewModel!==n&&(this._viewModel=n,
this.viewModelDisposable&&this.viewModelDisposable.dispose(),this.registerForDisposal(
this.viewModelDisposable=new DataLab.Util.Disposable),this.viewModelDisposable.registerForDisposal(
new DataLab.Util.DisposableSubscription(this.viewModel.experimentDirty.subscribe(
function(n){if(n){if(!window.isExperimentEditorTestPage){var t="You have unsaved changes in this experiment, which will be lost if you leave this page.";
Shell.UI.Navigation.setConfirmNavigateAway(t);$(window).bind("onbeforeunload",function(
){return t})}}else Shell.UI.Navigation.removeConfirmNavigateAway(),$(window).unbind(
"onbeforeunload")}))))},enumerable:!0,configurable:!0}),u.prototype.getPanLimits=
function(n){return n===void 0&&(n=this.initOnly.zoomControl.getScale()),this.initOnly.
zoomHelper.getPanLimits(n)},u.prototype.getScale=function(){return this.initOnly.
zoomControl.getScale()},u.prototype.paletteDragMoved=function(n){n.preventDefault(
);var t=this.getViewDimensions(),i=this.initOnly.coordinateHelper.clientToDomainCoordinates(
n.clientX,n.clientY);n.clientX>=t.x&&n.clientY>=t.y&&n.clientX<t.x+t.width&&n.clientY<
t.y+t.height?this.isDraggingNewEntity===!1?(this.isDraggingNewEntity=!0,this.viewModel.
paletteDragEnter(i)):this.viewModel.paletteDragMove(i):this.paletteDragCancel()}
,u.prototype.rememberPositionForExperiment=function(n,t){this.experimentPositionCache.
add(n,t)},u.prototype.paletteDragStart=function(n,t){this.viewModel.paletteDragStart(
t)},u.prototype.paletteDragEnd=function(n){var t;this.isDraggingNewEntity=!1;var
i=this.viewModel.paletteDragEnd(),e=this.initOnly.coordinateHelper.clientToDomainCoordinates(
n.clientX,n.clientY),r=this.initOnly.svgTransformElement.getCTM(),u="matrix("+r.
a+","+r.b+","+r.c+","+r.d+","+r.e+","+r.f+")";for(t=0;t<this.initOnly.overlayDivs.
length;t++)$(this.initOnly.overlayDivs.item(t)).css("-webkit-transform",u),$(this.
initOnly.overlayDivs.item(t)).css("transform",u),$(this.initOnly.overlayDivs.item(
t)).css("-ms-transform",u),$(this.initOnly.overlayDivs.item(t)).css("-moz-transform",
u);if(i){var f=this.initOnly.zoomControl.getScale(),o=(i.x()-(e.x-this.topLeft.x/
f-i.width()/2))*f,s=(i.y()-(e.y-this.topLeft.y/f-i.height()/2))*f;this.initOnly.
zoomHelper.animateToLocation(o,s);this.viewModel.selectionManager.resetSelection(
);this.viewModel.selectionManager.selectEntity(i)}},u.prototype.paletteDragCancel=
function(){this.viewModel.paletteDragLeave();this.isDraggingNewEntity=!1},u.prototype.
zoom=function(n){this.initOnly.zoomHelper.zoom(n)},u.prototype.pan=function(n,t)
{this.initOnly.zoomHelper.pan(n,t)},u.prototype.getViewDimensions=function(){var
n=null,t,i;try{n=this.experimentCanvasDiv.getBoundingClientRect()}catch(r){n=null;
DataLab.Log.customEvent({key:"ExceptionTelemetry",type:"getBoundingClientRectThrewException",
data:JSON.stringify(r)})}return t={x:n?n.left:0,y:n?n.top:0,width:this.experimentCanvasDiv.
clientWidth,height:this.experimentCanvasDiv.clientHeight},i=document.querySelector(
".experiment-header"),i&&(t.height-=i.clientHeight),t},Object.defineProperty(u.prototype,
"viewCenter",{get:function(){return this.initOnly.zoomHelper.viewCenter},enumerable:
!0,configurable:!0}),u.prototype.addEntityToCenter=function(i,r){var f=this,l=this.
viewModel.experimentViewModel().experiment.getDatasetNode(i.id()),a=this.viewModel.
experimentViewModel().experiment.getTrainedModelNode(i.id()),v=this.viewModel.experimentViewModel(
).experiment.getTransformNode(i.id()),h=function(n){var t=f.viewModel.experimentViewModel(
).getViewModelForNode(n);f.animateToGraphNode(t);f.viewModel.selectionManager.resetSelection(
);f.viewModel.selectionManager.selectEntity(t)},s,c,p;if(l){h(l);return}if(a){h(
a);return}if(v){h(v);return}var y=this.initOnly.zoomHelper.viewCenter,o=this.initOnly.
coordinateHelper.clientToDomainCoordinates(r.clientX,r.clientY),u=this.viewModel.
createNode(i.type(),i.id(),o.x,o.y),e=this.initOnly.coordinateHelper.clientToDomainCoordinates(
y.x-u.width()/2,y.y-u.height()/2);e=this.viewModel.calculatePlacement(e);s={};s.
x={start:o.x,end:e.x};s.y={start:o.y,end:e.y};c=new n.Animation(function(n){u.x(
n.x);u.y(n.y)},s,t.ModuleFromPaletteAnimationDuration);p=c.animationEnded.subscribe(
function(){var t=f.viewModel.experimentViewModel().addNode(u),i;t&&(u instanceof
n.Module&&(i=!0,i&&DataLab.Log.featureUsage({featureID:37,groupID:38,experimentID:
f._viewModel.experiment.experimentId(),moduleID:u.moduleNode.module_.id,data:u.moduleNode.
module_.name()})),f.viewModel.selectionManager.resetSelection(),f.viewModel.selectionManager.
selectEntity(t));f.bringRectIntoView({x:e.x,y:e.y,width:u.width(),height:u.height(
)});DataLab.TestMessaging.postMessage({type:DataLab.TestMessaging.Constants.AnimationComplete});
p.dispose()});c.start()},u.prototype.clientToDomainCoordinates=function(n,t){return this.
initOnly.coordinateHelper.clientToDomainCoordinates(n,t)},u.prototype.getExperimentBounds=
function(){for(var u,i,n=_.clone(this.initOnly.svgTransformElement.getBBox()),r=
this.experimentCanvasDiv.querySelectorAll("div.comment"),t=0;t<r.length;t++)u=r.
item(t).getBoundingClientRect().bottom,i=this.initOnly.coordinateHelper.clientToDomainCoordinates(
0,u),i.y>n.y+n.height&&(n.height=i.y-n.y);return n},u.prototype.zoomToFitWithAnimation=
function(){this.initOnly.zoomHelper.zoomToFitWithAnimation()},u.prototype.getViewInfo=
function(){return{topLeft:this.topLeft,experimentBounds:this.getExperimentBounds(
)}},u.prototype.getGraphTransform=function(){return this.initOnly.svgTransformElement.
getCTM()},u.prototype.getDestinationOrigin=function(){return this.initOnly.zoomHelper.
getDestinationOrigin()},u.prototype.animateToGraphNode=function(n){this.bringRectIntoView(
{x:n.x(),y:n.y(),width:n.width(),height:n.height()})},u.prototype.setupEventHandlers=
function(t){var i=this,r=function(n){i.viewModel.entityMouseUp(null,n)},u,f,e;t.
addEventListener("mouseup",r);u=function(n){r(n)};t.addEventListener("mousedown",
function(n){i.viewModel.entityMouseDown(null,n)});f=function(n){i.viewModel.onMouseMove(
n)};e=function(n){n.preventDefault();$(n.target).closest(".experimentCanvas").length===
0&&(n.stopPropagation(),u(n))};this.registerForDisposal(new n.MouseCapture(t,f,e));
t.addEventListener("mousedown",function(){i.rootContainerDiv.focus()},!0);this.registerForDisposal(
new DataLab.Util.DisposableEventListener(this.rootContainerDiv,"keydown",function(
t){switch(t.keyCode){case 46:i.viewModel.stateMachine.handleAction(4);t.stopImmediatePropagation(
);t.preventDefault();break;case 65:t.shiftKey&&i.viewModel.stateMachine.handleAction(
6);break;case 27:i.viewModel.stateMachine.handleAction(5);break;case 113:i.viewModel.
stateMachine.handleAction(7);break;case 67:t.ctrlKey&&(t.preventDefault(),i.viewModel.
copy());break;case 83:t.ctrlKey&&(t.preventDefault(),i.viewModel.draftStateMachine.
validateForSaveDraft()||i.viewModel.draftStateMachine.saveDraft().fail(function(
t){DataLab.Features.trialLimitationsEnabled()&&n.tryShowDialogForTrialRestriction(
t)}));break;case 88:t.ctrlKey&&(t.preventDefault(),i.viewModel.stateMachine.handleAction(
8));break;case 86:if(t.ctrlKey){t.preventDefault();var r=i.initOnly.zoomControl.
getScale(),u={x:i.topLeft.x/r,y:i.topLeft.y/r,matrixTransform:null};i.viewModel.
paste()}break;case 32:t.altKey||t.shiftKey||t.ctrlKey||i.viewModel.stateMachine.
handleAction(9)}}),new DataLab.Util.DisposableEventListener(this.rootContainerDiv,
"keyup",function(n){n.keyCode===32&&i.viewModel.stateMachine.handleAction(10)}))}
,u.prototype.bringRectIntoView=function(n){var t=this.getViewDimensions(),i=this.
initOnly.zoomControl.getScale();if(t.x=this.topLeft.x/i,t.y=this.topLeft.y/i,t.width/=
i,t.height/=i,n){var u=this.topLeft.x/i,f=this.topLeft.y/i,r=!1;n.width=Math.min(
t.width,n.width);n.height=Math.min(t.height,n.height);n.x<t.x?(u=n.x,r=!0):n.x+n.
width>t.x+t.width&&(u+=n.x+n.width-(t.x+t.width),r=!0);n.y<t.y?(f=n.y,r=!0):n.y+
n.height>t.y+t.height&&(f+=n.y+n.height-(t.y+t.height),r=!0);r?this.initOnly.zoomHelper.
animateToLocation(u*i,f*i,i):this.viewModel.animationComplete.notifySubscribers(
null)}},u}(DataLab.Util.Disposable);n.ExperimentEditorControl=r}(ExperimentEditor||
(ExperimentEditor={}));__extends=this.__extends||function(n,t){function r(){this.
constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;
n.prototype=new r},function(n){var t=function(n){function t(t,i){var u=this,r;if(
n.call(this),!t)throw new Error("Palette control has no backing div.");if(this.rootContainerDiv=
t,!i)throw new Error("Palette control must have a backing view model.");this.paletteViewModel=
i;this.registerForDisposal(new DataLab.Util.DisposableSetHTML(this.rootContainerDiv,
ExperimentEditorTemplates._paletteMarkup),new DataLab.Util.DisposableKOApplyBindings(
this.paletteViewModel,this.rootContainerDiv),new DataLab.Util.DisposableSubscription(
this.paletteViewModel.isDragging.subscribe(function(n){n?u.registerForDisposal(r=
new DataLab.Util.DisposableEventListener(document.body,"keydown",function(n){n.keyCode===
27&&(u.paletteViewModel.cancelDrag(),r.dispose())})):r&&r.dispose()})))}return __extends(
t,n),t}(DataLab.Util.Disposable);n.PaletteControl=t}(ExperimentEditor||(ExperimentEditor=
{}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t=function(t){function i(i){var r=this;t.call(this);this.
currentTarget=ko.observable(null);this.experimentEditorViewModel=i;this.unlinkCommand=
new n.CallbackCommand(function(n){n.property.ensureUnlinked();r.featureUsage(46)}
);this.unlinkCommand.canExecute=ko.computed(function(){if(r.currentTarget()&&!r.
experimentEditorViewModel.experimentViewModel().readOnlyMode()){var n=r.currentTarget(
),t=n.property;return t.isLinked()}return!1});this.newLinkCommand=new n.CallbackCommand(
function(n){if(n.property instanceof DataLab.Model.ModuleNodeParameter){var t=r.
experimentEditorViewModel.experimentViewModel().experiment;t.promoteModuleParameter(
n.property);r.featureUsage(44)}else throw new Error("Can't link parameter "+n.property.
name);});this.newLinkCommand.canExecute=ko.computed(function(){return!r.experimentEditorViewModel.
experimentViewModel().readOnlyMode()})}return __extends(i,t),i.prototype.build=function(
t){var u=this,i,r;return this.currentTarget(t),i={width:120,name:"propertyMenu",
items:[]},i.items.push({label:DataLab.LocalizedResources.setAsWebServiceParameter,
command:this.newLinkCommand}),i.items.push({label:null,divider:!0,command:null}),
r=t.property,DataLab.Util.forEach(this.experimentEditorViewModel.experiment.parameters(
),function(t){var f,e;r.parameterType==t.parameterType&&(f=new n.CallbackCommand(
function(){r.ensureUnlinked();r.linkToWebServiceParameter(t);u.featureUsage(45)}
),f.canExecute=ko.computed(function(){return!u.experimentEditorViewModel.experimentViewModel(
).readOnlyMode()}),e={label:DataLab.Util.format(DataLab.LocalizedResources.setToWebServiceParameter,
t.name),command:f},r.linkedWebServiceParameter()===t&&(e.iconClass="check"),i.items.
push(e))}),i.items.length>2&&i.items.push({label:null,divider:!0,command:null}),
i.items.push({label:DataLab.LocalizedResources.unsetWebServiceParameter,command:
this.unlinkCommand}),i},i.prototype.featureUsage=function(n){DataLab.Log.featureUsage(
{featureID:n,groupID:43,experimentID:this.experimentEditorViewModel.experiment.experimentId(
)})},i}(DataLab.Util.Disposable);n.PropertyEditorMenuBuilder=t}(ExperimentEditor||
(ExperimentEditor={}));__extends=this.__extends||function(n,t){function r(){this.
constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;
n.prototype=new r},function(n){var t=function(t){function i(i,r,u){var f=this;t.
call(this);this.graphNode=ko.observable();this.nodeParameters=ko.observableArray(
);this.graphNode.subscribe(function(){if(f.disposeAllNodeParameters(),f.graphNode(
)){var i=f.graphNode(),t=i.graphNode,e=[];if(t instanceof DataLab.Model.ModuleNode)
DataLab.Util.forEach(t.parameters,function(i){if(i instanceof DataLab.Model.ModuleNodeParameter)
e.push(n.ParameterViewModel.createParameterViewModel(i,u));else throw new Error(
"Unexpected parameter type on module "+t.id);}),i.outputLog.endpointDownloader=r,
DataLab.Util.forEach(i.outputEndpoints,function(n){n.endpointDownloader=r});else
if(t instanceof DataLab.Model.WebServicePortNode)e.push(new n.WebServicePortParameter(
t.nameParameter));else if(t instanceof DataLab.Model.DatasetNode)i.viewDataset.endpointDownloader=
r;else if(!(t instanceof DataLab.Model.TrainedModelNode)&&!(t instanceof DataLab.
Model.TransformNode))throw new Error("Unexpected node type. Node Id: "+t.id);f.nodeParameters(
e)}});this.openColumnPicker=function(t){t instanceof n.ColumnPickerParameterViewModel&&
t.openColumnPicker()};this.openScriptEditor=function(t){t instanceof n.ScriptEditorParameterViewModel&&
t.openScriptEditor()};this.getModuleHelp=function(){n.Help.QuickHelpMoreInfo()};
this.registerForDisposal(this.menuBuilder=new n.PropertyEditorMenuBuilder(i));this.
registerForDisposal(this.webServiceParameterMenuBuilder=new n.WebServiceParameterMenuBuilder(
i));this.quickHelpCollapsed=ko.observable(!1);this.drawerIsCollapsed=ko.observable(
!1);this.globalParamsCollapsed=ko.observable(!1);this.entityParamsCollapsed=ko.observable(
!1);this.experimentPropertiesCollapsed=ko.observable(!1);this.experimentSummaryCollapsed=
ko.observable(!1);this.experimentDetailsCollapsed=ko.observable(!1);this.competitionPropertiesCollapsed=
ko.observable(!1);this.openCloseAnimationEnded=new ko.subscribable;this.experimentEditorViewModel=
i;this.readOnlyMode=ko.observable(!1);this.lastVisitedParameter=null;this.animatingDrawer=
ko.observable(!1);this.animatingDrawer.subscribe(function(n){f.experimentEditorViewModel.
isBeingResized(n)});this.experiment=ko.observable(null);this.navigateToParent=new
ko.subscribable;this.navigateToWebService=new ko.subscribable;this.experimentEditorViewModel.
experimentViewModel.subscribe(function(){var t=f.experimentEditorViewModel.experimentViewModel(
);$.each(t.experimentProperties(),function(i,r){if(r instanceof n.LinkPropertyViewModel)
{var u=r,e;u.property===t.experiment.publishedWebServiceLinkProperty?(e=DataLabViews.
calculateNavigationPathToWebService(u.property.value()),u.property.value(e),u.onClick=
function(n,t){t.preventDefault();f.navigateToWebServiceHandler()}):u.property===
t.experiment.priorRunLinkProperty&&(e=DataLabViews.calculateNavigationPathToExperiment(
u.property.value()),u.property.value(e),u.onClick=function(n,t){t.preventDefault(
);f.navigateToParentHandler()})}})});this.lastX=0;this.hasParentExperiment=ko.computed(
function(){var n=f.experiment()?f.experiment().parentExperimentId:null;return n!==
null});this.competitionPropertiesViewModel=null;this.competitionUrl=ko.computed(
function(){var i,t,r;return!DataLab.Features.competitionExperimentSupportEnabled(
)||!f.experiment()?null:(i=f.experiment(),t=i.originalExperimentDocumentation.value(
),t||(r=i.getTag(n.ExperimentViewModel.GalleryUriTagSearchRegex),t=r.length>0?r[
0].substring(n.ExperimentViewModel.GalleryUriTagPrefix.length):"/"),new n.LinkPropertyViewModel(
new DataLab.Model.LinkProperty(DataLab.LocalizedResources.goToCompetitionText,t),
function(){window.open(t,"_blank")}))});this.setupEventHandlers()}return __extends(
i,t),i.prototype.setProjectExperimentLocator=function(t){var i=this;DataLab.Features.
competitionExperimentSupportEnabled()&&t?(this.registerForDisposal(this.competitionPropertiesViewModel=
new n.CompetitionPropertiesViewModel(t)),new DataLab.Util.DisposableSubscription(
this.experiment.subscribe(function(){i.competitionPropertiesViewModel.experiment(
i.experiment())}))):this.competitionPropertiesViewModel=null},i.prototype.disposeAllNodeParameters=
function(){this.nodeParameters().forEach(function(n){n.dispose()});this.nodeParameters.
removeAll()},i.prototype.dispose=function(){this.disposeAllNodeParameters();t.prototype.
dispose.call(this)},Object.defineProperty(i.prototype,"selectedGraphNodeName",{get:
function(){return this.graphNode().graphNode instanceof DataLab.Model.ModuleNode?
this.graphNode().graphNode.module_.name():this.graphNode().graphNode instanceof DataLab.
Model.DatasetNode?this.graphNode().graphNode.dataset.name():this.graphNode().graphNode
instanceof DataLab.Model.TrainedModelNode?this.graphNode().graphNode.trainedModel.
name():this.graphNode().graphNode instanceof DataLab.Model.TransformNode?this.graphNode(
).graphNode.transform.name():this.graphNode().graphNode instanceof DataLab.Model.
WebServicePortNode?this.graphNode().graphNode.name:void 0},enumerable:!0,configurable:
!0}),Object.defineProperty(i.prototype,"CompetitionProperties",{get:function(){return this.
competitionPropertiesViewModel},enumerable:!0,configurable:!0}),i.prototype.setNode=
function(n){this.graphNode(n)},i.prototype.onCommit=function(n,t){if(t.type==="blur"||
t.type==="keyup"&&t.which===13){var i=t.currentTarget;i.value!==n.property.value(
)&&n.property.value(i.value)}},i.prototype.clearModuleParameters=function(){this.
graphNode(null)},i.prototype.navigateToParentHandler=function(){this.navigateToParent.
notifySubscribers(null)},i.prototype.navigateToWebServiceHandler=function(){this.
navigateToWebService.notifySubscribers(null)},i.prototype.navigateToParameter=function(
n){var t=this,u,i;if(n instanceof DataLab.Model.ModuleNodeParameter){var f=n.parent,
r=this.experimentEditorViewModel.experimentViewModel().getViewModelForNode(f),e=
this.experimentEditorViewModel.animationComplete.subscribe(function(){t.experimentEditorViewModel.
selectionManager.modifySelection(function(){t.experimentEditorViewModel.selectionManager.
resetSelection();t.experimentEditorViewModel.selectionManager.selectEntity(r)});
var i=t.viewModelForProperty(n);i.focus(!0);e.dispose()});this.drawerIsCollapsed(
)?(i=this.openCloseAnimationEnded.subscribe(function(){t.experimentEditorViewModel.
needsAnimationToNode.notifySubscribers(r);i.dispose()}),this.toggleDrawer()):this.
experimentEditorViewModel.needsAnimationToNode.notifySubscribers(r)}else if(n instanceof
DataLab.Model.WebServiceParameter)u=this.viewModelForProperty(n),this.drawerIsCollapsed(
)?(i=this.openCloseAnimationEnded.subscribe(function(){u.focus(!0);i.dispose()}),
this.toggleDrawer()):u.focus(!0);else throw new Error("Unknown parameter type to navigate.");
},i.prototype.toggleDrawer=function(){this.animatingDrawer(!0);this.drawerIsCollapsed(
!this.drawerIsCollapsed())},i.prototype.setupEventHandlers=function(){var n=this;
this.removeParameterClicked=function(t,i){i.preventDefault();i.stopPropagation();
i.button===0&&n.experimentEditorViewModel.experiment.removeWebServiceParameter(t.
property)};this.focusLinkedWebServiceParameter=function(t,i){if(i.preventDefault(
),i.stopPropagation(),i.button===0){var r=t.property.linkedWebServiceParameter(),
u=n.viewModelForProperty(r);u.focus(!0)}};this.nextParameterClicked=function(t,i)
{if(i.button===0){var r=null,u=null,f=t.property.linkedParameters;DataLab.Util.forEach(
f,function(t){t.isRelevant()&&(u===n.lastVisitedParameter&&(r=t),u=t)});r||(r=DataLab.
Util.first(f,function(n){return n.isRelevant()},null));r&&n.navigateToParameter(
r)}};this.prevParameterClicked=function(t,i){if(i.button===0){var r=null,u=null,
f=t.property.linkedParameters;DataLab.Util.forEach(f,function(t){t.isRelevant()&&
(t===n.lastVisitedParameter&&(r=u),u=t)});r||(r=u);r&&n.navigateToParameter(r)}}
;this.onParameterFocus=function(t){n.lastVisitedParameter=t.property};this.onParameterReturn=
function(n,t){return t.stopPropagation(),t.keyCode===13&&n.focus(!1),!0}},i.prototype.
viewModelForProperty=function(n){var i=this,t=null;if(n instanceof DataLab.Model.
WebServiceParameter?t=this.experimentEditorViewModel.experimentViewModel().webServiceParameters.
lookup(n.id):this.nodeParameters().forEach(function(r){t||(r.property===n?t=r:r.
childParameters().length>0&&(t=i.findModePropertyViewModel(r.childParameters(),n)))}
),!t)throw new Error("Could not find view model for property.");return t},i.prototype.
findModePropertyViewModel=function(n,t){var r=this,i=null;return n.forEach(function(
n){i||(n.property===t?i=n:n.childParameters().length>0&&(i=r.findModePropertyViewModel(
n.childParameters(),t)))}),i},i}(DataLab.Util.Disposable);n.PropertyEditorViewModel=
t}(ExperimentEditor||(ExperimentEditor={})),function(n){var t=function(){function n(
n,t,i,r){var u,f,e,o;if(this.resourcePromotionStartedEvent=new ko.subscribable,this.
outputPort=n,this.promoteFunc=r,u=n.portModel,f=u.parent,!(f instanceof DataLab.
Model.ModuleNode))throw new Error("Only module output ports can be saved as datasets.");
e=f;o=u.name+" (saved from "+e.module_.name()+")";this.resource=t;var l=n.portModel.
parent.executedExperimentId,h=n.portModel.parent.id,c=n.portModel.name,s=DataLab.
Util.first(i.items(),function(n){return n.experimentId?n.moduleId===h&&n.outputName===
c:!1},null);s?(this.resource.deprecate(!0),this.resource.resourceToDeprecate(s.name(
)),this.resource.hint(!0)):this.resource.name(o)}return n.prototype.canBeAccepted=
function(){return this.resource.startValidating(),this.resource.isValid()},n.prototype.
dismissed=function(n){n.accepted?(DataLab.Log.info("Output promotion dialog accepted"),
this.promote()):DataLab.Log.info("Output promotion dialog cancelled")},n.prototype.
promote=function(){var n=this.promoteFunc(this.outputPort.portModel,this.resource.
name(),this.resource.familyId(),this.resource.description());this.resourcePromotionStartedEvent.
notifySubscribers(n)},n}();n.OutputPromotionDialogViewModel=t}(ExperimentEditor||
(ExperimentEditor={})),function(n){var t=function(){function n(n,t){this.name=ko.
observable();this.description=ko.observable();this.name(n);this.handler=t}return n.
prototype.canBeAccepted=function(){return!0},n.prototype.dismissed=function(n){n.
accepted&&this.handler(this.name(),this.description())},n}();n.CreateWebServiceFromTrainedModelDialogViewModel=
t}(ExperimentEditor||(ExperimentEditor={})),function(n){var t;(function(t){function i(
){t.OutputPromotion=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates.
_outputPromotionDialogMarkup);t.Confirmation=n.DialogView.createFactoryForTemplate(
ExperimentEditorTemplates._confirmationDialogMarkup,{size:["auto","auto"]});t.UploadDataset=
n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._uploadDatasetDialogMarkup);
t.UploadCustomModulePackage=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates.
_uploadModuleDialogMarkup);t.SaveSSSIMDataset=n.DialogView.createFactoryForTemplate(
ExperimentEditorTemplates._saveSSIMDatasetMarkup);t.InteractiveScore=n.DialogView.
createFactoryForTemplate(ExperimentEditorTemplates._scoreDialogMarkup);t.TrainedModelPromotion=
n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._trainedModelPromotionDialogMarkup);
t.TransformModulePromotion=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates.
_transformPromotionDialogMarkup);t.FeedbackControl=n.DialogView.createFactoryForTemplate(
ExperimentEditorTemplates._feedbackControlMarkup);t.CreateWebServiceFromTrainedModel=
n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._createWebServiceGraphFromTrainedModelDialogMarkup);
t.Spinner=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._pauseUserWithSpinnerMarkup,
{size:["600px","400px"],postRenderDialog:function(){this.element.css("padding","0");
this.element.find(".fx-dialog-ok").hide();this.element.find(".fx-dialog-close").
hide()}});t.PublishToCommunityStepOnComplete=n.DialogView.createFactoryForTemplate(
ExperimentEditorTemplates._publishToCommunityStepOnCompleteMarkup);t.ShowApiCode=
n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._apiCodeDialogMarkup);
t.CopyExperiment=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates.
_copyExperimentDialogMarkup,{size:["360px","255px"]});t.CopyExperimentFromGallery=
DataLab.Features.multiGeoNavigationEnabled()?n.DialogView.createFactoryForTemplate(
ExperimentEditorTemplates._copyExperimentFromGalleryMultiGeoDialogMarkup,{size:[
"360px","205px"]}):n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates.
_copyExperimentFromGalleryDialogMarkup,{size:["360px","125px"]});t.RenameNotebook=
n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._renameNotebookDialogMarkup,
{size:["360px","108px"]});t.DataGatewayUpdateDescription=n.DialogView.createFactoryForTemplate(
ExperimentEditorTemplates._dataGatewayDescriptionDialogMarkup);t.DataGatewayDownloadAndRegister=
n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._dataGatewayDownloadAndRegisterMarkup,
{size:[400,400]});t.ExperimentSaveAs=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates.
_experimentSaveAsDialogMarkup,{size:["auto","auto"]})}t.OutputPromotion;t.Confirmation;
t.UploadDataset;t.UploadCustomModulePackage;t.SaveSSSIMDataset;t.InteractiveScore;
t.TrainedModelPromotion;t.TransformModulePromotion;t.FeedbackControl;t.CreateWebServiceFromTrainedModel;
t.Spinner;t.PublishToCommunityStepOnComplete;t.ShowApiCode;t.CopyExperiment;t.CopyExperimentFromGallery;
t.RenameNotebook;t.DataGatewayUpdateDescription;t.DataGatewayDownloadAndRegister;
t.ExperimentSaveAs;t.createViews=i})(t=n.DialogViews||(n.DialogViews={}))}(ExperimentEditor||
(ExperimentEditor={})),function(n){var t;(function(n){function r(n){var r=$.Deferred(
);return t(n,0,r,DataLab.Workspace.getUnpackStatusAsync.bind(DataLab.Workspace)),
i.when(r.promise())}function u(n){var t=$.Deferred();return this.pollOnPackageHandler(
n,0,t,DataLab.Workspace.getExperimentStoragePackageAsync.bind(DataLab.Workspace)),
i.when(t.promise())}function f(n){var r=$.Deferred();return t(n,0,r,DataLab.Workspace.
getNotebookUnpackStatusAsync.bind(DataLab.Workspace)),i.when(r.promise())}function e(
n){var r=$.Deferred();return t(n,0,r,DataLab.Workspace.getNotebookStoragePackageAsync.
bind(DataLab.Workspace)),i.when(r.promise())}function t(n,i,r,u){u(n.ActivityId).
done(function(n){if(n.Status==="Pending"){i>16&&r.reject(new Error("Exceeded retry count"));
var f=Math.pow(2,i)*50;setTimeout(function(){t(n,i+1,r,u)},f)}else n.Status==="Complete"?
r.resolve(n):r.reject(new Error("Unknown status returned for unpacking package"))}
).fail(function(n){return r.reject(n)})}var i=DataLab.Util;n.pollOnUnpack=r;n.pollOnPack=
u;n.pollOnNotebookUnpack=f;n.pollOnNotebookPack=e;n.pollOnPackageHandler=t})(t=n.
Packages||(n.Packages={}))}(ExperimentEditor||(ExperimentEditor={}));__extends=this.
__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(
i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(
t){function i(i,r,u){var f=this,e;t.call(this);this.searchText=ko.observable("");
this.paletteIsCollapsed=ko.observable(!0);this.workspace=i;this.graphFetcher=r;this.
endpointDownloader=new n.EndpointDownloader;this.registerForDisposal(this.experimentEditorViewModel=
new n.ExperimentEditorViewModel(i.moduleCache,i.datasetCache,i.trainedModelCache,
i.transformModulesCache,this.endpointDownloader,{promoteOutput:new n.CallbackCommand(
function(n){return f.promoteOutputToDataset(n)}),promoteTrainerOutput:new n.CallbackCommand(
function(n){return f.promoteOutputToModel(n)}),promoteTransformOutput:new n.CallbackCommand(
function(n){return f.promoteOutputToTransform(n)}),refreshExperiment:new n.CallbackCommand(
function(){f.refreshExperiment()}),navigateToParent:new n.CallbackCommand(function(
){return f.navigateToParent()}),promoteCreateWebService:new n.CallbackCommand(function(
n){return f.promoteCreateWebService(n)})},i,{onAlert:function(n){return f.alertHandler(
n)}}),this.propertyEditorViewModel=new n.PropertyEditorViewModel(this.experimentEditorViewModel,
this.endpointDownloader,this.workspace),this.paletteViewModel=new n.PaletteViewModel(
this.workspace.moduleCategoryRegistry,this.workspace.applicationCache.datasetCategoryRegistry,
this.workspace.datasetCache,this.workspace.moduleCache,this.workspace.trainedModelCache,
this.workspace.transformModulesCache),this.webServiceViewModel=new n.ExperimentWebServiceViewModel);
this.alertHandler=null;this.experiment.setDraftState(!u);this.experiment.experimentId(
u);this.paletteIsCollapsed=ko.observable(!1);this.experimentId=ko.observable(u);
u||(this.experiment.dirtyStatus.startDirtying(),this.experiment.dirtyForPublishStatus.
startDirtying());this.descriptionFocus=ko.observable(!0);this.userWorkspaceExperiment=
ko.computed(function(){return f.experiment.experimentId()?f.experiment.experimentId(
).split(".")[0]===f.workspace.id:!0});this.readOnlyMode=ko.computed(function(){return!f.
experiment.isLeaf()||!f.userWorkspaceExperiment()||f.experiment.statusCode()===DataLab.
DataContract.State.Running||f.experiment.statusCode()===DataLab.DataContract.State.
NotStarted});ko.computed(function(){f.experimentEditorViewModel.experimentViewModel(
).readOnlyMode(f.readOnlyMode());f.propertyEditorViewModel.readOnlyMode(f.readOnlyMode(
))});this.experimentEditorViewModel.registerEntityActivationEvent(this.activateEntity.
bind(this));this.experimentEditorViewModel.registerCloneHandler(function(){f.clone(
)});this.propertyEditorViewModel.navigateToParent.subscribe(function(){f.navigateToParent(
)});this.propertyEditorViewModel.navigateToWebService.subscribe(function(){f.navigateToWebService(
)});this.refreshExperimentHandler=null;this.searchText.extend({rateLimit:{timeout:
400,method:"notifyWhenChangesStop"}}).subscribe(function(n){DataLab.Log.featureUsage(
{featureID:17,groupID:16,experimentID:u,data:n});f.paletteViewModel.applyPaletteSearch(
n)});e=null;this.registerForDisposal(new DataLab.Util.DisposableSubscription(this.
experimentEditorViewModel.selectionManager.selectedGraphNodes.subscribeToCollectionChanges(
function(){var t=f.experimentEditorViewModel.selectionManager.selectedGraphNodes;
e&&e instanceof n.Module&&(e.startValidating(),e.updateValidState());t.count()===
1?(e=DataLab.Util.first(t(),function(t){return t instanceof n.Module||t instanceof
n.Dataset||t instanceof n.TrainedModel||t instanceof n.Transform||t instanceof n.
WebServicePort},null),e?f.propertyEditorViewModel.setNode(e):f.propertyEditorViewModel.
clearModuleParameters()):(f.propertyEditorViewModel.clearModuleParameters(),e=null)}
)),new DataLab.Util.DisposableSubscription(this.experimentEditorViewModel.newExperimentLoaded.
subscribe(function(){f.propertyEditorViewModel.experiment(f.experimentEditorViewModel.
experiment);f.experiment.isDraft()&&f.promptForUpgradeIfNodesAreEligible()})));this.
endpointDownloader.endpointTooBig.subscribe(function(){var n=DataLab.LocalizedResources.
viewModelDataTooLarge;f.alertHandler?f.alertHandler(n):alert(n)});this.nodesEligibleForUpgradeHandler=
function(){DataLab.Log.info("Nodes are eligible for upgrade in the current experiment, but no prompt handler is installed.")}
;this.paletteViewModel.categories().splice(-1,0,this.webServiceViewModel.webServiceCategory);
this.projectViewModel=new n.ProjectViewModel(i,function(){return f.experiment});
this.propertyEditorViewModel.setProjectExperimentLocator(this.projectViewModel)}
return __extends(i,t),Object.defineProperty(i.prototype,"experiment",{get:function(
){return this.experimentEditorViewModel?this.experimentEditorViewModel.experimentViewModel(
).experiment:null},enumerable:!0,configurable:!0}),i.prototype.registerNavigateToParentHandler=
function(n){this.navigateToParentHandler=n},i.prototype.registerNavigateToWebServiceHandler=
function(n){this.navigateToWebServiceHandler=n},i.prototype.registerOutputPromotionProgressHandler=
function(n){this.outputPromotionProgressHandler=n},i.prototype.registerNodeUpgradeEligibilityHandler=
function(n){this.nodesEligibleForUpgradeHandler=n},i.prototype.registerAlertHandler=
function(n){this.alertHandler=n},i.prototype.registerCannotSaveDraftHandler=function(
n){this.cannotSaveDraftHandler=n},i.prototype.refreshExperiment=function(){return this.
experimentEditorViewModel.refreshExperiment()},i.prototype.startAutoRefresh=function(
){this.experimentEditorViewModel.startAutoRefresh()},i.prototype.loadFromService=
function(){var n=this,t=$.Deferred(),i;return this.graphFetcher&&this.experimentId(
)?(i=this.graphFetcher.loadFromService(this.experimentId()),i.done(function(i){n.
descriptionFocus(!0);n.onRefreshFromNewExperiment&&(i.onRefreshFromNewExperiment=
n.onRefreshFromNewExperiment);n.experimentEditorViewModel.experiment=i;n.propertyEditorViewModel.
experiment(n.experimentEditorViewModel.experiment);i.experimentParameterInUse&&(
n.alertHandler(DataLab.LocalizedResources.experimentParameterDeletedNotification),
i.experimentParameterInUse=!1,DataLab.Log.featureUsage({featureID:51,groupID:43,
experimentID:n.experiment.experimentId()}));t.resolve()}).fail(function(n){t.reject(
n)})):t.resolve(),DataLab.Util.when(t)},i.prototype.navigateToParent=function(){
var n=this.experimentEditorViewModel.experiment.parentExperimentId;this.experimentEditorViewModel.
rememberExperimentPosition(this.experimentEditorViewModel.experiment.experimentId(
));this.navigateToParentHandler(n)},i.prototype.navigateToWebService=function(){
var n=this.experimentEditorViewModel.experiment.publishedWebServiceGroupId;this.
navigateToWebServiceHandler(n)},i.prototype.clone=function(n){this.experiment.isDraft(
)||(this.experiment.dirtyStatus.stopDirtying(),this.experiment.dirtyForPublishStatus.
stopDirtying(),this.experiment.parentExperimentId=this.experiment.experimentId(),
this.experimentEditorViewModel.parentExperimentId(this.experiment.parentExperimentId),
this.createExperimentCopy(n));DataLab.Log.info("Starting editing the experiment after cloning",
"ExperimentEditorContainerViewModel.clone",this.experiment.experimentId())},i.prototype.
copy=function(t,i){var u=this,f,r;t===void 0&&(t="");i===void 0&&(i=!1);this.experiment.
dirtyStatus.stopDirtying();this.experiment.dirtyForPublishStatus.stopDirtying();
this.experimentEditorViewModel.stopAutoRefresh();this.experimentEditorViewModel.
experimentViewModel().experimentProperties.remove(function(n){return n.property===
u.experiment.priorRunLinkProperty||n.property===u.experiment.publishedWebServiceLinkProperty}
);this.experiment.nodes.forEach(function(n){n instanceof DataLab.Model.ModuleNode&&
n.statusCode.value(DataLab.DataContract.State.NotStarted)});i&&(f=this.experiment.
tags().filter(function(n){return!DataLab.Constants.GalleryUriTagRegExp.test(n)}),
this.experiment.tags(f));DataLab.Features.competitionExperimentSupportEnabled()&&
(r=this.experiment.tags(),r.some(function(t){return n.ExperimentViewModel.CompetitionUrlTagSearchRegex.
test(t)})&&(Array.prototype.push.apply(r,[n.ExperimentViewModel.GalleryUriTagPrefix+
this.experiment.originalExperimentDocumentation.value()]),this.experiment.tags(r)));
this.experiment.parentExperimentId=null;this.createExperimentCopy();this.experiment.
publishedWebServiceGroupId=null;this.experimentEditorViewModel.parentExperimentId(
null);this.experiment.description(t);this.projectViewModel.init();DataLab.Log.info(
"Starting editing the experiment after copying","ExperimentEditorContainerViewModel.copy",
this.experiment.experimentId())},i.prototype.createExperimentCopy=function(n){this.
experiment.experimentId(null);this.experimentId(null);this.experiment.setDraftState(
!0);this.experiment.isLeaf(!0);this.experiment.publishedModelPackageId=null;n||this.
promptForUpgradeIfNodesAreEligible();this.experiment.dirtyStatus.startDirtying();
this.experiment.dirtyForPublishStatus.startDirtying();this.experiment.dirtyStatus.
clean();this.experiment.dirtyForPublishStatus.clean()},i.prototype.submit=function(
){return this.experimentEditorViewModel.draftStateMachine.submitExperiment()},i.
prototype.update=function(){return this.experimentEditorViewModel.draftStateMachine.
updateExperiment()},i.prototype.publish=function(){return this.workspace.publishExperimentAsync(
this.experiment)},i.prototype.save=function(){var n=this.experiment.saveError();
return n?(this.cannotSaveDraftHandler(n),DataLab.Util.fail(new Error(n))):(this.
readOnlyMode()||this.clone(),this.experimentEditorViewModel.draftStateMachine.saveDraft(
))},i.prototype.discard=function(){var n=this;return this.projectViewModel&&this.
projectViewModel.findExperiment(function(t){return t.experimentId()===n.experiment.
experimentId()&&t.role===DataLab.DataContract.ExperimentRole.Scoring})&&DataLab.
Log.featureUsage({featureID:78,groupID:72,experimentID:this.experiment.experimentId(
)}),this.experimentEditorViewModel.draftStateMachine.discardDraft()},i.prototype.
cancel=function(){return this.workspace.cancelExperimentAsync(this.experiment.experimentId(
))},i.prototype.firstTimePublishWebService=function(t){var i=this,r=$.Deferred(),
e=function(n){return r.reject(n)},u=[],f;return DataLab.Features.competitionExperimentSupportEnabled(
)&&this.experimentEditorViewModel.experimentViewModel().isCompetitionExperiment(
)&&(f=this.experimentEditorViewModel.experimentViewModel().experiment,Array.prototype.
push.apply(u,f.getTag(n.ExperimentViewModel.CompetitionUrlTagSearchRegex)),Array.
prototype.push.apply(u,f.getTag(n.ExperimentViewModel.CompetitionTenantIdSearchRegex)),
Array.prototype.push.apply(u,f.getTag(n.ExperimentViewModel.GalleryUriTagSearchRegex))),
this.workspace.createWebServiceGroupAsync(t,DataLab.LocalizedResources.webServiceGroupDefaultDescription,
!1,u).done(function(n){var t=function(t){var u,o,f,l;if(i.workspace.deleteWebServiceGroupAsync(
n),u=null,t.xmlHttpRequest!==null&&t.xmlHttpRequest!==undefined&&t.xmlHttpRequest.
status>=400)try{if(o=$.parseXML(t.xmlHttpRequest.responseText),f=o.querySelector(
"Error"),f!==null){var e=f.querySelector("ErrorCode"),s=f.querySelector("MessageDetail"),
h=f.querySelector("Message"),c=o.querySelector("ExceptionMessage");e!==null?e.textContent===
"UnsupportedModuleType"?(l=s!==null?s.textContent:"",u=DataLab.Util.format(DataLab.
LocalizedResources.publishWebServiceUnsupportedModule,l)):u=e.textContent==="MixedVersions"?
DataLab.LocalizedResources.publishWebServiceModuleVersionIsOld:e.textContent:u=(h!==
null?h.textContent+" ":"")+(c!==null?c.textContent:"")}}catch(a){}u!==null?(u+=DataLab.
Util.ajaxErrorMetas(t).join(", "),r.reject(new DataLab.Util.AjaxError(u,t.xmlHttpRequest))):
r.reject(t)},u=function(u){u.xmlHttpRequest&&u.xmlHttpRequest.status==400?(i.workspace.
deleteWebServiceGroupAsync(n),r.reject(new DataLab.Util.AjaxError(DataLab.LocalizedResources.
publishWebServiceErrorWithTooManyColumns,u.xmlHttpRequest))):t(u)};i.workspace.createModelPackageAsync(
n,i.experiment,i.workspace).done(function(u){i.workspace.registerWebServiceAsync(
n,u).done(function(f){i.experiment.publishedWebServiceGroupId=n;i.experiment.publishedModelPackageId=
u;i.workspace.updateDraftAsync(i.experiment).done(function(){r.resolve(n,u,f)}).
fail(t)}).fail(t)}).fail(u)}).fail(e),DataLab.Util.when(r)},i.prototype.republishWebService=
function(n,t){var i=this,r=$.Deferred(),u=function(n){return r.reject(n)};return DataLab.
Util.then(this.workspace.createModelPackageAsync(n,this.experiment,this.workspace),
function(f){return DataLab.Util.then(i.workspace.updateWebServiceAsync(n,t,f,null,
null),function(){return i.experiment.publishedModelPackageId=f,DataLab.Util.then(
i.workspace.updateDraftAsync(i.experiment),function(){r.resolve(f)},u)},u)},u),DataLab.
Util.when(r)},i.prototype.publishExperimentToCommunity=function(t,i){var f=this,
r,u;return i===void 0&&(i=null),r=DataLab.Features.packingGeoPath()?DataLab.Util.
then(DataLab.Workspace.createExperimentStoragePackageForCommunityAsync(this.experimentId(
),!0,this.experiment.description()),function(t){return n.Packages.pollOnPack(t)}
):DataLab.Util.then(DataLab.Workspace.createExperimentStoragePackageAsync(this.experimentId(
),!0,this.experiment.description()),function(t){return n.Packages.pollOnPack(t)}
),u=DataLab.Util.then(r,function(n){return f.workspace.createCommunityExperimentAsync(
t,n.Location,i)}),DataLab.Util.then(u,function(n){return n})},i.prototype.validate=
function(){var r=this,n=this.experimentEditorViewModel.experiment.validate(),t=!1,
i;if(this.experimentEditorViewModel.experimentViewModel().experimentNodes.forEach(
function(n){n.updateValidState()}),n.length>0)if(n[0].erroneousObject instanceof
DataLab.Model.GraphNode){var u=n[0].erroneousObject,f=this.experimentEditorViewModel.
experimentViewModel().getViewModelForNode(u),e=this.experimentEditorViewModel.animationComplete.
subscribe(function(){f.forceBalloon.notifySubscribers(null);e.dispose()});this.experimentEditorViewModel.
selectionManager.modifySelection(function(){r.experimentEditorViewModel.selectionManager.
resetSelection();r.experimentEditorViewModel.selectionManager.selectEntity(f)});
this.experimentEditorViewModel.needsAnimationToNode.notifySubscribers(u);t=!0}else
n[0].erroneousObject instanceof DataLab.Model.ModuleNodeParameter?(i=n[0].erroneousObject,
this.propertyEditorViewModel.navigateToParameter(i),t=!0):n[0].erroneousObject instanceof
DataLab.Model.WebServiceParameter?(i=n[0].erroneousObject,this.propertyEditorViewModel.
navigateToParameter(i),t=!0):n[0].erroneousObject===this.experiment.description&&
(this.descriptionFocus(!0),t=!0);return{allErrors:n,unhandledErrors:t?n.slice(1):
n,valid:n.length===0}},i.prototype.promoteOutputToDataset=function(t){var i=this,
u=new DataLab.Model.UnsavedResource(this.workspace,this.workspace.datasetCache,this.
workspace.datasetUploadsInProgress,DataLab.Constants.DatasetName),r=new n.OutputPromotionDialogViewModel(
t,u,this.workspace.datasetCache,this.workspace.promoteOutputToDatasetAsync.bind(
this.workspace)),f=r.resourcePromotionStartedEvent.subscribe(function(n){i.outputPromotionProgressHandler&&
i.outputPromotionProgressHandler(n);f.dispose()});n.DialogViews.OutputPromotion.
show(r)},i.prototype.promoteOutputToModel=function(t){var i=this,u=new DataLab.Model.
UnsavedResource(this.workspace,this.workspace.trainedModelCache,this.workspace.trainedModelUploadsInProgress,
DataLab.Constants.TrainedModelName),r=new n.OutputPromotionDialogViewModel(t,u,this.
workspace.trainedModelCache,this.workspace.promoteOutputToTrainedModelAsync.bind(
this.workspace)),f=r.resourcePromotionStartedEvent.subscribe(function(n){i.outputPromotionProgressHandler&&
i.outputPromotionProgressHandler(n);f.dispose()});n.DialogViews.TrainedModelPromotion.
show(r)},i.prototype.promoteOutputToTransform=function(t){var i=this,u=new DataLab.
Model.UnsavedResource(this.workspace,this.workspace.transformModulesCache,this.workspace.
transformModuleUploadsInProgress,DataLab.Constants.TransformModuleName),r=new n.
OutputPromotionDialogViewModel(t,u,this.workspace.transformModulesCache,this.workspace.
promoteOutputToTransformModuleAsync.bind(this.workspace)),f=r.resourcePromotionStartedEvent.
subscribe(function(n){i.outputPromotionProgressHandler&&i.outputPromotionProgressHandler(
n);f.dispose()});n.DialogViews.TransformModulePromotion.show(r)},i.prototype.promoteCreateWebService=
function(t){var i=this,r=new n.CreateWebServiceFromTrainedModelDialogViewModel(this.
experiment.description()+" (Scoring)",function(n,r){i.createTrainedModelAndWebServiceGraph(
n,r,t)});n.DialogViews.CreateWebServiceFromTrainedModel.show(r)},i.prototype.createTrainedModelAndWebServiceGraph=
function(n,t,i){var r=this;Shell.UI.Spinner.show();this.workspace.promoteOutputToTrainedModelAsync(
i.portModel,n,"",t).done(function(t){var c,f,s,h;if(r.copy(n),r.experimentEditorViewModel.
selectionManager.resetSelection(),r.experimentEditorViewModel.selectionManager.selectEntity(
i.parent),c=r.experimentEditorViewModel.addTrainedModelById(t.id,50,200),f=DataLab.
Util.first(r.experimentEditorViewModel.moduleCache.items(),function(n){return n.
familyId.indexOf(DataLab.Constants.WellKnownResource.ScoreGenericModuleFamilyId)>
-1}),f){var l=r.experimentEditorViewModel.addModuleById(f.id,50,300),a=DataLab.Util.
first(l.inputPorts),v=DataLab.Util.first(c.outputPorts);a.portModel.connectTo(v.
portModel)}r.save();var e=$("<div/>").fxsWizard(),u=e.fxsWizard("getViewModel"),
o=new $.fxs.fxsWizard.WizardStep;o.content(ExperimentEditorTemplates._createWebServiceTutorialStep1Markup);
s=new $.fxs.fxsWizard.WizardStep;s.content(ExperimentEditorTemplates._createWebServiceTutorialStep2Markup);
h=new $.fxs.fxsWizard.WizardStep;h.content(ExperimentEditorTemplates._createWebServiceTutorialStep3Markup);
u.steps.push(o);u.steps.push(s);u.steps.push(h);u.currentStep(o);e.fxsWizard("open");
Impl.UI.Dialogs.ModalPresenter.open(e)}).fail(function(n){r.alertHandler&&r.alertHandler(
n.message)}).always(function(){Shell.UI.Spinner.hide()})},i.prototype.createTransformAndWebServiceGraph=
function(n,t,i){var r=this;Shell.UI.Spinner.show();this.workspace.promoteOutputToTransformModuleAsync(
i.portModel,n,"",t).done(function(t){var c,f,s,h;if(r.copy(n),r.experimentEditorViewModel.
selectionManager.resetSelection(),r.experimentEditorViewModel.selectionManager.selectEntity(
i.parent),c=r.experimentEditorViewModel.addTransformById(t.id,50,200),f=DataLab.
Util.first(r.experimentEditorViewModel.moduleCache.items(),function(n){return n.
familyId.indexOf(DataLab.Constants.WellKnownResource.TransformFamilyId)>-1}),f){
var l=r.experimentEditorViewModel.addModuleById(f.id,50,300),a=DataLab.Util.first(
l.inputPorts),v=DataLab.Util.first(c.outputPorts);a.portModel.connectTo(v.portModel)}
r.save();var e=$("<div/>").fxsWizard(),u=e.fxsWizard("getViewModel"),o=new $.fxs.
fxsWizard.WizardStep;o.content(ExperimentEditorTemplates._createWebServiceTutorialStep1Markup);
s=new $.fxs.fxsWizard.WizardStep;s.content(ExperimentEditorTemplates._createWebServiceTutorialStep2Markup);
h=new $.fxs.fxsWizard.WizardStep;h.content(ExperimentEditorTemplates._createWebServiceTutorialStep3Markup);
u.steps.push(o);u.steps.push(s);u.steps.push(h);u.currentStep(o);e.fxsWizard("open");
Impl.UI.Dialogs.ModalPresenter.open(e)}).fail(function(n){r.alertHandler&&r.alertHandler(
n.message)}).always(function(){Shell.UI.Spinner.hide()})},i.prototype.activateEntity=
function(t){var r=null,i,u;if(t instanceof n.OutputPort){if(i=t.parent,i instanceof
n.Module&&i.moduleNode.statusCode.value()!==DataLab.DataContract.State.Finished)
return;i.graphNodeType===1||i.graphNodeType===2||i.graphNodeType===4?(r=t.portModel.
outputEndpoint,DataLab.Log.featureUsage({featureID:18,groupID:0,experimentID:this.
experimentId(),data:JSON.stringify({port:t.portModel.name,isModule:i.isModule(),
nodeType:i.graphNodeType,nodeName:i.graphNode.name})})):t.portModel.isVisualizable(
)?this.endpointDownloader.visualize(t.portModel,this.workspace,t.parent.isModule(
)):t.parent instanceof n.Module&&i.statusCode.property.value()===DataLab.DataContract.
State.Running||(t.portModel.descriptor.allowedDataTypes.some(function(n){return n.
dataTypeId==="ILearnerDotNet"||n.dataTypeId==="IClusterDotNet"})?DataLab.Features.
authorizeDownloadILearnerEnabled()?r=t.portModel.outputEndpoint:(u=new Shell.UI.
Notifications.Notification(DataLab.LocalizedResources.cannotDownloadThisTypeOfData,
"error"),u.setActions([Shell.UI.Notifications.Buttons.close(function(){})]),Shell.
UI.Notifications.add(u),DataLab.Log.customEvent({key:"TentativeToDownloadUnauthorizedDataType",
type:"DownloadData"})):t.portModel.descriptor.allowedDataTypes.some(function(n){
return n.dataTypeId==="ITransformDotNet"})?DataLab.Features.authorizeDownloadILearnerEnabled(
)?r=t.portModel.outputEndpoint:(u=new Shell.UI.Notifications.Notification(DataLab.
LocalizedResources.cannotDownloadThisTypeOfData,"error"),u.setActions([Shell.UI.
Notifications.Buttons.close(function(){})]),Shell.UI.Notifications.add(u),DataLab.
Log.customEvent({key:"TentativeToDownloadUnauthorizedDataType",type:"DownloadData"})):
(r=t.portModel.outputEndpoint,DataLab.Log.featureUsage({featureID:18,groupID:0,experimentID:
this.experimentId(),moduleID:i.isModule()&&i.graphNode.module_.id,data:JSON.stringify(
{port:t.portModel.name,isModule:i.isModule(),nodeType:i.graphNodeType,nodeName:i.
graphNode.name})})))}r&&this.endpointDownloader.download(r)},i.prototype.promptForUpgradeIfNodesAreEligible=
function(){var n,i,t;this.experiment.disableNodesUpdate()||(n=this.experiment.findNodesEligibleForUpgrade(
),n.length>0&&(i=n.some(function(n){return n instanceof DataLab.Model.ModuleNode&&
!n.module_.isLatestClientVersion}),i?(DataLab.Log.info("The current graph contains nodes eligible for upgrade. The user will be prompted to upgrade them.",
"ExperimentEditorContainerViewModel.promptForUpgradeIfNodesAreEligible",{eligibleNodeCount:
n.length}),this.nodesEligibleForUpgradeHandler(n)):(DataLab.Log.info("The current graph contains nodes eligible for upgrade. The graph will be updated.",
"ExperimentEditorContainerViewModel.promptForUpgradeIfNodesAreEligible",{eligibleNodeCount:
n.length}),t=this.workspace,this.experiment.upgradeNodes(t.moduleCache,t.datasetCache,
t.trainedModelCache,t.transformModulesCache,t))))},i}(DataLab.Util.Disposable);n.
ExperimentEditorContainerViewModel=t}(ExperimentEditor||(ExperimentEditor={}));__extends=
this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(
i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(
n){function t(t,i){if(n.call(this),!t)throw new Error("Property editor root div does not exist");
if(this.rootContainerDiv=t,!i)throw new Error("argument: viewModel cannot be undefined or null");
this.viewModel=i;this.registerForDisposal(new DataLab.Util.DisposableSetHTML(this.
rootContainerDiv,ExperimentEditorTemplates._propertyEditorMarkup),new DataLab.Util.
DisposableKOApplyBindings(i,this.rootContainerDiv))}return __extends(t,n),t}(DataLab.
Util.Disposable);n.PropertyEditorControl=t}(ExperimentEditor||(ExperimentEditor=
{}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var i,t;(function(n){var t;(function(n){n.Id="#propertyEditorRoot"}
)(t=n.PropertyEditor||(n.PropertyEditor={}))})(i=n.Constants||(n.Constants={}));
t=function(t){function i(i,r){t.call(this);this.shield=null;this.parentDiv=i;this.
experimentEditorContainerViewModel=r;i.experimentEditorContainer=this;this.registerForDisposal(
new DataLab.Util.DisposableSetHTML(i,ExperimentEditorTemplates._experimentEditorMarkup),
new DataLab.Util.DisposableKOApplyBindings(r,i.querySelector(".headerExperimentEditorContainer")),
new DataLab.Util.DisposableKOApplyBindings(r,i.querySelector(".xe-utilityPanelRoot")));
this.registerForDisposal(this.xeControl=new n.ExperimentEditorControl(i.querySelector(
".experimentEditorRoot"),r.experimentEditorViewModel),this.paletteView=new n.PaletteControl(
i.querySelector(".xe-utilityPanel"),r.paletteViewModel),this.propertyEditorControl=
new n.PropertyEditorControl(i.querySelector(".propertyEditorRoot"),r.propertyEditorViewModel));
r.paletteViewModel.registerActivationEvent(this.xeControl.addEntityToCenter.bind(
this.xeControl));r.paletteViewModel.dragResponder=this.xeControl}return __extends(
i,t),i.prototype.zoomToFitIfSample=function(){this.experimentEditorContainerViewModel.
userWorkspaceExperiment()||this.xeControl.zoomToFitWithAnimation()},i.prototype.
zoomToFitWithAnimation=function(){var n=$.Deferred(),t;return this.xeControl.zoomToFitWithAnimation(
),t=this.xeControl.viewModel.animationComplete.subscribe(function(){n.resolve()}
),n.promise().done(function(){t.dispose()})},i.prototype.dispose=function(){n.Balloon.
hide();delete this.parentDiv.experimentEditorContainer;t.prototype.dispose.call(
this)},i.prototype.block=function(){if(Shell.UI.Spinner.show(),!this.shield){this.
shield=$('<div class="shield" />');var n=$(this.parentDiv).find(".experiment-container");
n.length===1&&(n.append(this.shield),this.shield.focus())}},i.prototype.unblock=
function(){this.shield&&(this.shield.remove(),this.shield=null);Shell.UI.Spinner.
hide()},i}(DataLab.Util.Disposable);n.ExperimentEditorContainer=t}(ExperimentEditor||
(ExperimentEditor={})),function(n){var t=function(){function n(n,t){this.webServiceGroupName=
ko.observable(n);this.error=t}return n}();n.PublishWebServiceDialogViewModel=t}(
ExperimentEditor||(ExperimentEditor={})),function(n){var r=function(){function n(
n,t,i,r,u){this.valueType=t;this.value=ko.observable(i);this.name=n;this.friendlyName=
r;this.allowedValues=u}return n}(),t,i,u;n.InputColumnViewModel=r;t=function(){function n(
n,t){this.metadata=n;this.value=ko.observable(t)}return n}();n.WebServiceParameterViewModel=
t;i=function(){function n(n,t){this.title=n;this.message=t}return n}();n.ScoreDialogErrorInfo=
i;u=function(){function n(n,i,u,f){var o=this;if(this.wsgName=i.Name,this.wsgId=
i.Id,n.Inputs&&n.Inputs.length>0&&n.Inputs[0].Schema){var s=JSON.parse(n.Inputs[
0].Schema),h=n.Inputs[0].Id,e=n.InputsMetadata?n.InputsMetadata[h]:null;this.inputColumns=
$.map(s.columnAttributes,function(n){var i=e&&e[n.name]?e[n.name]:n.name,t=[];return n.
domain&&n.domain.categories&&(t=n.domain.categories),new r(n.name,n.type,o.getDefaultValue(
n.type,t),i,t)})}else this.inputColumns=[];this.webServiceParameters=n.GlobalParametersMetadata?
$.map(n.GlobalParametersMetadata,function(n){var i;if(n.DefaultValue)i=n.DefaultValue
else if(n.Type==DataLab.DataContract.ModuleParameterType.Enumerated)try{i=n.ParameterRules[
0].Values[0]}catch(r){DataLab.Log.exception(r,"Failed to get enumeration values for Web Service Parameter")}
else switch(n.Type){case DataLab.DataContract.ModuleParameterType.Boolean:i=!0;break
case DataLab.DataContract.ModuleParameterType.Double:case DataLab.DataContract.ModuleParameterType.
Float:i=0;break;case DataLab.DataContract.ModuleParameterType.Int:i=0}return new
t(n,i)}):[];this.webserviceId=u;this.workspace=f}return n.prototype.dismissed=function(
n){var i=this,t,r,u;n.accepted&&(t=new Shell.UI.Notifications.Progress(DataLab.Util.
format(DataLab.LocalizedResources.webServiceTestProgressTitle,this.wsgName),"active",
!0),t.setDismissable(!0),t.setActions([Shell.UI.Notifications.Buttons.close(function(
){Shell.UI.Notifications.remove(t)})]),Shell.UI.Notifications.add(t),r={},$.each(
this.inputColumns,function(n,t){r[t.name]=t.value()}),u={},$.each(this.webServiceParameters,
function(n,t){u[t.metadata.Name]=t.value()}),this.workspace.invokeScoreWebServiceAsync(
this.wsgId,this.webserviceId,r,u).done(function(n){var r=i.getScoringResultSummary(
n);r?t.setTitle(DataLab.Util.format(DataLab.LocalizedResources.webServiceTestSuccessAndResultSummary,
i.wsgName,r)):t.setTitle(DataLab.Util.format(DataLab.LocalizedResources.webServiceTestSuccessTitle,
i.wsgName));t.setStatus("success");t.addStep(DataLab.Util.format(DataLab.LocalizedResources.
webServiceTestResultStepTitle,JSON.stringify(n)),"success")}).fail(function(n){t.
setStatus("error");var r=i.getScoringErrorInfo(n);t.setTitle(r.title);t.setDetailsText(
r.message)}))},n.prototype.canBeAccepted=function(){return!0},n.prototype.getScoringResultSummary=
function(n){var i,f,r,u,t;if(n&&typeof n=="object"&&(i=n.Results,i))for(f in i)if(
r=i[f],r&&r.type==="table"&&(u=r.value,u&&(t=u.Values,t&&typeof t.length=="number"&&
t.length>0)))return JSON.stringify(t[0]);return null},n.prototype.getScoringErrorInfo=
function(n){var r=[],u="",t=null,f;return n instanceof DataLab.Util.AjaxError&&n.
xmlHttpRequest?n.xmlHttpRequest.responseText&&(t=this.tryParseJson(n.xmlHttpRequest.
responseText),t&&(t.error&&(t=t.error),t.message?u=t.message:t.Message&&(u=t.Message)),
n.xmlHttpRequest.status===401||n.xmlHttpRequest.status===403||n.xmlHttpRequest.status===
404?r.push(DataLab.LocalizedResources.webServiceNotReady):n.xmlHttpRequest.status<
500&&t&&t.details&&t.details.length>0&&$.map(t.details,function(n){n&&n.code&&n.
message&&r.push(DataLab.Util.format("{0}: {1}",n.code,n.message))}),t&&(f=t.code?
t.code:t.ErrorCode,f&&r.push(DataLab.Util.format(DataLab.LocalizedResources.infoErrorCode,
f))),r=r.concat(DataLab.Util.ajaxErrorMetas(n))):r.push(DataLab.LocalizedResources.
unexpectedError),new i(DataLab.Util.format(DataLab.LocalizedResources.webServiceTestFailureTitle,
this.wsgName,u),r.join(", "))},n.prototype.tryParseJson=function(n){var t;try{t=
JSON.parse(n)}catch(i){t=null}return t},n.prototype.getDefaultValue=function(n,t)
{switch(n){case"Numeric":return 0;case"Binary":return!1;case"Categorical":return t.
length>0?t[0]:"";default:return""}},n}();n.ScoreDialogViewModel=u}(ExperimentEditor||
(ExperimentEditor={})),function(n){n.WebServiceGroupType={name:"WebServiceGroup",
displayName:DataLab.LocalizedResources.webServiceGroupDisplayName,dataFunction:function(
n){return{data:[{name:n.WebServiceGroup,displayName:n.WebServiceGroup}]}}};var t=
function(){function n(n,t,i,r){this.Id=n;this.Url=t;this.Type=i;this.CreationTime=
r}return n}();n.WebService=t}(DataLabViews||(DataLabViews={}));__extends=this.__extends||
function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&
(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(
n){function t(t){n.call(this);this.extensionName=t}return __extends(t,n),t.prototype.
isViewExtensionStillActive=function(){return cdm.currentExtension===Shell.extensionIndex[
this.extensionName]},t}(DataLab.Util.Disposable);n.ViewBase=t}(DataLabViews||(DataLabViews=
{}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t;(function(t){var i=function(t){function i(i,r){var u=this;
t.call(this);this.hasErrors=ko.observable(!0);this.name=DataLab.Validation.validatableObservable(
r+DataLab.LocalizedResources.copyForNewExperimentName,function(n){return/\S/.test(
n)?(u.hasErrors(!1),null):(u.hasErrors(!0),DataLab.LocalizedResources.experimentNameError)}
);this.name.subscribe(function(){u.name.startValidating();u.name.validate()});this.
launchSaveAsHelp=function(){n.Help.openHelpWindow(n.Constants.saveAsHelpLinkGuid)}
;this.save=function(){i(u.name())};this.saveNameAndClose=function(){u.name.startValidating(
);u.name.validate();u.hasErrors()||(u.save(),n.CustomUX.close(),DataLab.Log.customEvent(
{key:"Close",type:"SaveAs",data:i()}))}}return __extends(i,t),i}(DataLab.Util.Disposable);
t.ExperimentSaveAsViewModel=i})(t=n.ExperimentSaveAs||(n.ExperimentSaveAs={}))}(
ExperimentEditor||(ExperimentEditor={})),function(n){var t=function(){function n(
n){var t=this;this.tags=n;this.nameInputFocused=ko.observable(!1);this.setNameInputFocused=
function(){t.nameInputFocused(!0)};this.removeTag=function(n){t.tags.remove(n)};
this.currentTag=DataLab.Validation.validatableObservable("",$.noop);this.currentTag.
subscribe(function(){if(t.currentTag()!==""){var n=DataLab.Util.Str.getArrayFromCommaSeparatedString(
t.currentTag());n.forEach(function(n){n!==""&&t.tags().indexOf(n)===-1&&t.tags.push(
n)})}t.currentTag.startValidating();t.currentTag.validate();t.currentTag("")});this.
hasTags=ko.computed(function(){return t.tags().length>0})}return n}();n.TagTextBoxViewModel=
t}(ExperimentEditor||(ExperimentEditor={})),function(n){var t=function(){function n(
n,t,i){var r=this,u;this.wizardContentViewModel=n;this.onWizardClosingEvent=new ko.
subscribable;this.enableOrDisableNextSteps=function(n){r.wizardInternalViewModel.
lockOrUnlockNextSteps(n)};this.enableOrDisablePreviousSteps=function(n){r.wizardInternalViewModel.
lockOrUnlockPreviousSteps(n)};this.enableOrDisableCompleteButton=function(n){r.wizardInternalViewModel.
completeButtonEnabled(n)};u=t;i.closing=function(t){var i=n.onWizardClosing(t);return i&&
r.onWizardClosingEvent.notifySubscribers(t),i};this.wizard=$("<div/>").fxsWizard(
i);this.wizardInternalViewModel=this.wizard.fxsWizard("getViewModel");n.registerForDisposal(
new DataLab.Util.DisposableSubscription(n.areNextStepsDisabled.subscribe(this.enableOrDisableNextSteps)),
new DataLab.Util.DisposableSubscription(n.arePreviousStepsDisabled.subscribe(this.
enableOrDisablePreviousSteps)),new DataLab.Util.DisposableSubscription(n.isCompleteButtonEnabled.
subscribe(this.enableOrDisableCompleteButton)));u.forEach(function(n){r.wizardInternalViewModel.
steps.push(n)});this.wizardInternalViewModel.currentStep(u[0]);this.enableOrDisableNextSteps(
n.areNextStepsDisabled());this.enableOrDisablePreviousSteps(n.arePreviousStepsDisabled(
));this.enableOrDisableCompleteButton(n.isCompleteButtonEnabled())}return n.prototype.
show=function(){this.wizard.fxsWizard("open");Impl.UI.Dialogs.ModalPresenter.open(
this.wizard)},n}();n.WizardView=t}(ExperimentEditor||(ExperimentEditor={}));__extends=
this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(
i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var r=DataLab.
Model.CommunityExperimentVisibility,i,t;(function(n){n[n.SelectYourOwn=0]="SelectYourOwn";
n[n.StockImageFromGallery=1]="StockImageFromGallery"})(n.ImageSelectionMode||(n.
ImageSelectionMode={}));i=n.ImageSelectionMode;t=function(t){function i(i,r){var
u=this;r===void 0&&(r=null);t.call(this);this.experimentViewModel=i;this.summary=
ko.observable("");this.description=ko.observable("");this.tags=ko.observableArray(
);this.hasConsentedCredentials=ko.observable(!1);this.hasConsentedCustomModules=
ko.observable(!1);this.uploadImageOption=ko.observable(0);this.onWizardClosingEvent=
new ko.subscribable;this.onWizardCompleted=ko.observable(!1);this.isRepublish=!!r;
this.detailsFromGallery=ko.observable(this.isRepublish&&r.galleryExperimentName!==
"");this.previousPublishTypeHidden=this.isRepublish?r.hidden:!1;this.publishTypeString=
ko.observable(null);this.isRepublish&&(this.previousPublishTypeHidden?this.publishTypeString(
0..toString()):this.publishTypeString(1..toString()));this.imageViewModel=new n.
ImageSelectorViewModel;this.imageFromGallery=ko.observable(this.isRepublish&&r.galleryExperimentImageUrl!==
"");this.experimentEditorExperimentName=i.experiment.description();this.experimentName=
DataLab.Validation.validatableObservable(this.experimentEditorExperimentName,DataLab.
Model.Experiment.validateDescription);this.experimentName.startValidating();DataLab.
Features.experimentDescriptionEnabled()&&(this.summary(i.summary.property.value(
)),this.description(i.details.property.value()));this.detailsFromGallery()&&(this.
experimentEditorDescription=this.description(),this.experimentEditorExperimentName=
this.experimentName(),this.experimentEditorSummary=this.summary(),this.experimentEditorTags=
[],this.experimentName(r.galleryExperimentName),this.description(r.galleryExperimentDescription),
this.summary(r.galleryExperimentSummary),this.tags(r.galleryExperimentTags),this.
detailsFromGallery.subscribe(function(n){n?(u.experimentEditorDescription=u.description(
),u.experimentEditorExperimentName=u.experimentName(),u.experimentEditorSummary=
u.summary(),u.experimentEditorTags=u.tags(),u.description(u.galleryDescription),
u.experimentName(u.galleryExperimentName),u.summary(u.gallerySummary),u.tags(u.galleryTags)):
(u.galleryDescription=u.description(),u.galleryExperimentName=u.experimentName(),
u.gallerySummary=u.summary(),u.galleryTags=u.tags(),u.description(u.experimentEditorDescription),
u.experimentName(u.experimentEditorExperimentName),u.summary(u.experimentEditorSummary),
u.tags(u.experimentEditorTags))}));this.imageFromGallery()&&(this.imageViewModel.
selectedStockImgUrl(r.galleryExperimentImageUrl),this.imageFromGallery.subscribe(
function(n){n?u.imageViewModel.selectedStockImgUrl(r.galleryExperimentImageUrl):
u.imageViewModel.selectedStockImgUrl(null)}));this.isValid=ko.computed(function(
){return u.experimentName.isValid()});this.hasCredentials=i.experiment.firstModuleWithCredentials(
)?!0:!1;this.hasCustomModules=i.experiment.firstCustomModule()?!0:!1;this.useMarkdownEditor=
!!DataLab.Features.markdownInPublishDialogEnabled();this.areNextStepsDisabled=ko.
computed(function(){return!u.isValid()||u.imageViewModel.imageUploadViewModel.isProcessingSelectedImage(
)||u.hasCredentials&&!u.hasConsentedCredentials()||u.hasCustomModules&&DataLab.Features.
publishCustomModulesToGalleryEnabled()&&!u.hasConsentedCustomModules()});this.arePreviousStepsDisabled=
ko.computed(function(){return!1});this.publishType=ko.computed(function(){var n=
null;return u.publishTypeString()&&(n=Number(u.publishTypeString())),n});this.isCompleteButtonEnabled=
ko.computed(function(){return u.publishType()!==null})}return __extends(i,t),i.prototype.
getPublishableExperiment=function(){if(this.onWizardCompleted()){if(!this.isValid(
))throw new Error("Cannot generate a PublishableExperiment with validation errors still present.");
}else throw new Error("Cannot generate a PublishableExperiment if the Publish To Community Wizard was not completed.");
return new DataLab.Model.PublishableExperiment(this.experimentViewModel.experiment,
this.experimentName(),this.summary(),this.description(),this.publishType(),this.
tags(),this.imageViewModel.imageUploadViewModel.finalImageContent(),this.imageViewModel.
imageUploadViewModel.finalImageContent()?"":this.imageViewModel.selectedStockImgUrl(
))},i.prototype.onWizardClosing=function(n){this.onWizardCompleted(!0);return n.
completed?DataLab.Log.customEvent({key:"WizardCompleted",type:"PublishToCommunity",
data:JSON.stringify({publishType:this.publishType()})}):DataLab.Log.customEvent(
{key:"WizardCanceled",type:"PublishToCommunity"}),!0},i.uploadImageOptions=[{text:
DataLab.LocalizedResources.publishExperimentToCommunityWizardImageSelectionCustomImageTab,
value:0},{text:DataLab.LocalizedResources.publishExperimentToCommunityWizardImageSelectionStockImagesTab,
value:1}],i}(DataLab.Util.Disposable);n.PublishToCommunityWizardViewModel=t}(ExperimentEditor||
(ExperimentEditor={})),function(){function t(n){return function(){var i=550,t=420,
r=screen.height,e=screen.width,o=Math.round(e/2-i/2),u=0,f;return r>t&&(u=Math.round(
r/2-t/2)),f="scrollbars=yes,resizable=yes,toolbar=no,location=yes,width="+i+",height="+
t+",left="+o+",top="+u,window.open(n,"twitter",f),!1}}var n={count:"none",hashtags:
"AzureML"};ko.bindingHandlers.twitterButton={init:function(i,r){var e=r(),o=$.extend(
{},n,e),u="https://twitter.com/intent/tweet?"+DataLab.Util.param(o),f;$(i).addClass(
"twitter-share-button");$(i).attr("href",u);$(i).click(t(u));f=$("<img />").attr(
{src:"/Content/Images/sharing-twitter.svg",title:DataLab.LocalizedResources.twitterButtonTitle});
$(i).append(f)}}}(ExperimentEditor||(ExperimentEditor={})),function(n){var t=DataLab.
LocalizedResources,i=function(){function n(n,i){var r=this;this.header=ko.observable(
t.publishExperimentToCommunityPublishedExperimentHeader);this.description=ko.observable(
t.publishExperimentToCommunityPublishedExperimentVisitGalleryLabel);this.linkLabel=
ko.observable(t.publishExperimentToCommunityPublishedExperimentLinkLabel);this.goToGalleryImage=
ko.observable("/Content/Images/rightArrowLink.png");this.catalogExperimentUrl=ko.
observable(n);this.publishVisibility=i;this.defaultPromotionTitle=ko.observable(
t.publishExperimentToCommunitySharePromotionTitle);this.defaultPromotionText=ko.
observable(DataLab.Util.format(t.publishExperimentToCommunitySharePromotionText,
t.productNameMedium));this.twitterButtonOptions=ko.computed(function(){return{url:
r.catalogExperimentUrl(),text:r.defaultPromotionText(),hashtags:"AzureML",title:
t.publishExperimentToCommunityTwitterButtonTitle}});this.emailBody=ko.computed(function(
){return r.defaultPromotionText()+"\n\n"+r.catalogExperimentUrl()});this.emailSubject=
ko.computed(function(){return r.defaultPromotionTitle()});this.emailLink=ko.computed(
function(){return"mailto:?"+DataLab.Util.param({Subject:r.emailSubject(),Body:r.
emailBody()})})}return n.prototype.setLinkHoverImage=function(){this.goToGalleryImage(
"/Content/Images/rightArrowLinkOnHover.png")},n.prototype.setLinkNoHoverImage=function(
){this.goToGalleryImage("/Content/Images/rightArrowLink.png")},n.prototype.dismissed=
function(){},n}();n.PublishToCommunityOnCompleteViewModel=i}(ExperimentEditor||(ExperimentEditor=
{}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t=function(n){function t(t){n.call(this);this.title=t}return __extends(
t,n),t}(DataLab.Util.Disposable);n.PauseUserWithSpinnerViewModel=t}(ExperimentEditor||
(ExperimentEditor={}));var buttonBarId="wmd-button-bar",inputAreaId="wmd-input",
previewAreaId="wmd-preview",ScorllingSource;(function(n){n[n.EDIT=0]="EDIT";n[n.
PREVIEW=1]="PREVIEW"})(ScorllingSource||(ScorllingSource={})),function(n){function i(
n,i){return new t(n.value,n.placeholder,i.element,n.idPostfix||null)}var t=function(
){function n(n,t,i,r){this.inPreview=ko.observable(!1);this.value=n;this.placeholder=
ko.observable(t);r=r||"";this.inPreview.forEditing=ko.computed({read:function(){
return this.inPreview().toString()},write:function(n){this.inPreview(n==="true")}
,owner:this});this.buttonBarId=ko.observable(buttonBarId+r);this.inputAreaId=ko.
observable(inputAreaId+r);this.previewAreaId=ko.observable(previewAreaId+r);this.
textareaElement=$(i).find("textarea")[0];this.previewElement=$(i).find(".wmd-preview")[
0];this.textareaElement&&this.previewElement&&(this.textareaElement.addEventListener(
"scroll",_.throttle(this.syncScrolling.bind(this,0),200)),this.textareaElement.addEventListener(
"keydown",this.handleTabKey.bind(this)),this.previewElement.addEventListener("scroll",
_.throttle(this.syncScrolling.bind(this,1),200)));this.setupMarkdown()}return n.
prototype.handleTabKey=function(n){var e,u;if(n.keyCode===9){var f="    ",t=this.
textareaElement,i=t.selectionStart,r=t.selectionEnd;i>r&&(e=i,i=r,r=e);u=t.value;
t.value=u.substring(0,i)+f+u.substring(r);t.selectionStart=t.selectionEnd=i+f.length;
n.preventDefault()}},n.prototype.syncScrolling=function(n){var t=this;requestAnimationFrame(
function(){var f=n===0?t.textareaElement:t.previewElement,h=n===0?t.previousEditorScrollPosition:
t.previousPreviewScrollPosition,e=n===0?t.previewElement:t.textareaElement,o=f.scrollHeight,
i=f.scrollTop,r,s=e.scrollHeight,u=f.clientHeight;i!==h&&o>u&&s>u&&(r=0|i/(o-u)*
(s-u),e.scrollTop=r,n===0?(t.previousEditorScrollPosition=i,t.previousPreviewScrollPosition=
r):(t.previousPreviewScrollPosition=i,t.previousEditorScrollPosition=r))})},n.prototype.
setupMarkdown=function(){var n=this;this.converter=window.Markdown.getSanitizingConverter(
);this.editor=new window.Markdown.Editor(this.converter,"",{strings:{linkdialog:
"<p><b>Insert Hyperlink<\/b><\/p><p>http://example.com/<\/p>",imagedialog:"<p><b>Insert Image<\/b><\/p><p>http://example.com/images/diagram.jpg<\/p>"}});
setTimeout(function(){n.editor.run()},0)},n}();n.MarkdownEditor=t;n.createMarkdownEditorViewModel=
i;n.markdownEditorRegisterInfo={componentName:"markdown-editor",viewModel:{createViewModel:
i},template:ExperimentEditorTemplates._markdownEditorMarkup}}(ExperimentEditor||
(ExperimentEditor={})),function(n){var t={canCloseWithEscape:!0},i=function(){function n(
n){n===void 0&&(n=null);this.dialog=null;this.options=$.extend(!0,t,n)}return n.
prototype.show=function(n,t,i){var r,u,f;i===void 0&&(i=null);r=this;u=function(
){Shell.UI.DialogPresenter.show({template:$.templates(t),init:function(){if(this.
element.find(".fx-dialog-ok").css("display","none"),this.element.find(".fx-dialog-close").
css("display","none"),this.element.css("padding-bottom",this.element.css("padding-top")),
this.element.css("min-height","0"),ko.applyBindings(n,this.element.get(0)),r.dialog=
this,r.autofocus(this.element.get(0)),!r.options.canCloseWithEscape){var t=this.
close;this.close=function(n){n.which!==$.ui.keyCode.ESCAPE&&t.call(this,n)}}},size:
i})};this.closeAnyActiveDialog();f=$(".fx-dialogpresenter-shield");f.promise().done(
u)},n.prototype.close=function(n){n===void 0&&(n=null);this.dialog&&this.dialog.
close(n||{preventDefault:$.noop});this.dialog=null},n.prototype.closeAnyActiveDialog=
function(){var n=$(".fx-dialog"),t;n.length>0&&n.is(":data(fx-fxDialog)")&&(t=document.
createEvent("CustomEvent"),t.initEvent("close",!0,!0),n.fxDialog("close",t))},n.
prototype.autofocus=function(n){var i=n.getElementsByClassName("autofocus")[0],r=
n.getElementsByTagName("button")[0],t=i||r;t&&setTimeout(function(){return t.focus(
)})},n}();n.StrippedDialog=i}(ExperimentEditor||(ExperimentEditor={})),function(
n){function a(n){return $('<a target="_blank"><\/a>').attr("href",n.url).text(n.
text).get(0).outerHTML}function v(n){var t=n.links||[],i=t.map(a),r=[$("<div />").
text(n.text).html()].concat(i);return DataLab.Util.format.apply(null,r)}function y(
){var i=new n.StrippedDialog({canCloseWithEscape:!1}),r=DataLab.Trial.getTimeLimit(
),u={descriptionHtml:DataLab.Util.format(t.trialDialogExpiredTrialDescription,r.
toString(),DataLab.Util.format('<a href="{0}" target="_blank">{1}<\/a>',t.microsoftAccountUrl,
t.microsoftAccount)),signIn:function(){DataLab.Log.featureUsage({featureID:61,groupID:
0});window.open("/Home/Free","_self")},endTrial:function(n,t){DataLab.Log.featureUsage(
{featureID:62,groupID:0});i&&i.close(t);window.open("/","_self")}};i.show(u,ExperimentEditorTemplates.
_expiredTrialDialogMarkup,["450px",null])}function o(){var n={title:t.trialDialogDisabledFeatureTitle,
description:[{text:t.trialDialogDisabledFeatureDescription,links:[{text:t.microsoftAccount,
url:t.microsoftAccountUrl}]}],link:{text:t.trialDialogSeeFeatures,url:t.trialDialogSeeFeaturesUrl}};
new i(n).show()}function p(){var n=$.extend(!0,f);n.description[0].text=t.trialDialogDisabledDatasetUploadDescription;
new i(n,59).show()}function w(){var n=$.extend(!0,f);n.description[0].text=t.trialDialogDisabledModuleUploadDescription;
new i(n,59).show()}function s(u,e){var o,s,h;u===void 0&&(u=null);e===void 0&&(e=
null);o=$.extend(!0,f);u&&(e||(u=u.toLowerCase(),s=DataLab.Workspace.applicationCache.
moduleCache.getLatestResourceInFamily(u),e=s&&s.name()));u&&e?(h=u.slice(u.indexOf(
".")+1),o.description=[{text:t.trialDialogDisabledModuleDescriptionNamed,links:[
{text:e,url:n.Help.getTopicUrl(r.resurrectDashesInGUID(h))},{text:t.microsoftAccount,
url:t.microsoftAccountUrl}]}]):o.description[0].text=t.trialDialogDisabledModuleDescription;
new i(o,58).show()}function b(){var n=$.extend(!0,f);n.description[0].text=t.trialDialogDisabledWebServicePublishDescription;
new i(n).show()}function k(){var n=$.extend(!0,f);n.description[0].text=t.trialDialogDisabledPublishToCommunityDescription;
new i(n).show()}function h(n){n===void 0&&(n=null);n=n||DataLab.Trial.getMaxNumberOfModules(
);var f=null;DataLab.Trial.getWorkspaceType()===1?(f={title:t.trialDialogOops,description:
[{text:r.format(t.trialDialogExceededModuleCountLimitDescriptionForFree,n.toString(
),"{0}","{1}"),links:[{text:t.azureSubscription,url:u},{text:t.standardWorkspace,
url:e}]}],link:{text:t.trialDialogLearnMore,url:t.trialDialogLearnMoreUrl}},new i(
f,60,null,ExperimentEditorTemplates._limitedFeatureDialogMarkup).show()):(f={title:
t.trialDialogOops,description:[{text:r.format(t.trialDialogExceededModuleCountLimitDescription,
n.toString(),"{0}","{1}"),links:[{text:t.azureSubscription,url:u},{text:t.standardWorkspace,
url:e}]}],link:{text:t.trialDialogLearnMore,url:t.trialDialogLearnMoreUrl}},new i(
f,60,null,ExperimentEditorTemplates._limitedFeatureDialogMarkup).show())}function c(
n){n===void 0&&(n=null);n=typeof n=="number"&&n||DataLab.Trial.getStorageLimit()/
Math.pow(2,30);var f={title:t.trialDialogOops,description:[{text:r.format(DataLab.
Trial.isWorkspaceTypeAnonymous()?t.trialDialogExceededStorageLimitDescriptionAnonymous:
t.trialDialogExceededStorageLimitDescription,n.toFixed(0),"{0}"),links:[{text:t.
azureSubscription,url:u}]}],link:{text:t.trialDialogLearnMore,url:t.trialDialogLearnMoreUrl}};
new i(f,60,null,ExperimentEditorTemplates._limitedFeatureDialogMarkup).show()}function d(
){var n=null;DataLab.Trial.getWorkspaceType()===1?(n={title:t.trialDialogOops,description:
[{text:t.trialDialogParallelRunDisabledDescriptionForFree,links:[{text:t.azureSubscription,
url:u},{text:t.standardWorkspace,url:e}]}],link:{text:t.trialDialogLearnMore,url:
t.trialDialogLearnMoreUrl}},new i(n,60,null,ExperimentEditorTemplates._limitedFeatureDialogMarkup).
show()):(n={title:t.trialDialogOops,description:[{text:t.trialDialogParallelRunDisabledDescription,
links:[{text:t.microsoftAccount,url:t.microsoftAccountUrl}]}],link:{text:t.trialDialogLearnMore,
url:t.trialDialogLearnMoreUrl}},new i(n,65).show())}function g(n){n===void 0&&(n=
null);n=n||DataLab.Trial.getModuleRunTimeLimit();var f=null;DataLab.Trial.getWorkspaceType(
)===1?(f={title:t.trialDialogOops,description:[{text:r.format(t.trialDialogExceededModuleRuntimeLimitDescriptionForFree,
n.toString(),"{0}","{1}"),links:[{text:t.azureSubscription,url:u},{text:t.standardWorkspace,
url:e}]}],link:{text:t.trialDialogLearnMore,url:t.trialDialogLearnMoreUrl}},new i(
f,60,null,ExperimentEditorTemplates._limitedFeatureDialogMarkup).show()):(f={title:
t.trialDialogOops,description:[{text:r.format(t.trialDialogExceededModuleRuntimeLimitDescription,
n.toString(),"{0}"),links:[{text:t.microsoftAccount,url:t.microsoftAccountUrl}]}],
link:{text:t.trialDialogLearnMore,url:t.trialDialogLearnMoreUrl}},new i(f,63).show(
))}function nt(n){var i,t,r;if(!(n instanceof DataLab.Util.AjaxError))return!1;i=
n.xmlHttpRequest;t=new DataLab.Trial.RestrictedFeatureError(i);switch(t.feature)
{case DataLab.DataContract.CancellationReason.ExceededStorageLimit:return DataLab.
Log.featureUsage({featureID:64,groupID:56}),c(t.value),!0;case DataLab.DataContract.
CancellationReason.ModulesRestriction:switch(t.type){case"MaxLimit":return DataLab.
Log.featureUsage({featureID:60,groupID:56}),h(t.value),!0;case"Value":return DataLab.
Log.featureUsage({featureID:58,groupID:56}),r=t.value?(environment.globalWorkspaceId+
"."+t.value).toLowerCase():null,s(r),!0}break;case DataLab.DataContract.CancellationReason.
DatasetRestriction:case DataLab.DataContract.CancellationReason.CustomModulesRestriction:
case DataLab.DataContract.CancellationReason.WebServicesRestriction:case DataLab.
DataContract.CancellationReason.WorkspaceTypeRestriction:return DataLab.Log.featureUsage(
{featureID:66,groupID:56}),o(),!0}return!1}var r=DataLab.Util,t=DataLab.LocalizedResources,
tt=DataLab.Constants.FeatureId,u="http://go.microsoft.com/fwlink/?LinkId=524172",
e="http://go.microsoft.com/fwlink/?LinkId=524173",l="http://go.microsoft.com/fwlink/?LinkId=524171",
f={title:t.trialDialogDisabledFeatureTitle,description:[{text:"",links:[{text:t.
microsoftAccount,url:t.microsoftAccountUrl}]}],link:{text:t.trialDialogLearnMore,
url:t.trialDialogLearnMoreUrl}},i=function(){function t(t,i,r,u){var f=this;i===
void 0&&(i=0);r===void 0&&(r=null);u===void 0&&(u=ExperimentEditorTemplates._disabledFeatureDialogMarkup);
this._signInFeatureId=61;this._closeFeatureId=62;this._signUpFeatureId=67;this.signIn=
function(){DataLab.Log.featureUsage({featureID:f._signInFeatureId,groupID:f._groupId});
window.open("/Home/Free","_self")};this.dismiss=function(n,t){DataLab.Log.featureUsage(
{featureID:f._closeFeatureId,groupID:f._groupId});f._dialog&&f._dialog.close(t)}
;this.signUp=function(n,t){DataLab.Log.featureUsage({featureID:f._signUpFeatureId,
groupID:f._groupId});window.open(l,"_blank");f._dialog&&f._dialog.close(t)};this.
title=t.title;this.description=t.description.map(v);this.link=t.link;this._groupId=
i;this._dialog=new n.StrippedDialog(r);this._templateMarkup=u}return t.prototype.
show=function(){this._dialog.show(this,this._templateMarkup,["430px",null])},t}(
);n.showExpiredTrialDialog=y;n.showDisabledFeatureDialog=o;n.showDisabledDatasetUploadDialog=
p;n.showDisabledModuleUploadDialog=w;n.showDisabledModuleDialog=s;n.showDisabledWebServicePublishDialog=
b;n.showDisabledPublishToCommunityDialog=k;n.showExceededNumberOfModulesLimitDialog=
h;n.showExceededStorageLimitDialog=c;n.showParallelRunDisabledDialog=d;n.showExceededRuntimeLimitDialog=
g;n.tryShowDialogForTrialRestriction=nt}(ExperimentEditor||(ExperimentEditor={})
);__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var
i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r}
,function(n){var t=function(n){function t(t,i,r,u,f,e,o,s){var h=this,c;n.call(this);
this.mapHeight=150;this.mapWidth=210;this.mapPadding=8;this.canvasDiv=t;this.getViewDimensions=
r;this.getGraphTransform=i;this.getExperimentBounds=u;this.pan=f;this.experimentChanged=
!1;this.graphSvg=$(".customElements").children(".svgRoot");c=!0;typeof Storage!=
"undefined"&&Shell.Utilities.isLocalStorageAvailable()&&(c=localStorage.getItem(
"MiniMapCollapsed")==="true");this.miniMapCollapsed=ko.observable(c);this.experimentLoaded=
ko.observable(!1);this.positionHighlight=ko.observable({x:0,y:0,width:0,height:0});
this.draggingStarted=ko.observable(!1);this.callUpdateOnExperimentChangeMethod=function(
){h.updateOnExperimentChange()};this.callUpdatePositionHighlightMethod=function(
){h.updatePositionHighlight()};this.callStartUpdatesMethod=function(){h.startUpdates(
)};ko.computed(function(){h.miniMapCollapsed()||!h.experimentLoaded()||h.miniMapInitialized||
h.initializeMap();h.miniMapCollapsed()&&h.updateIntervalId&&(clearInterval(h.updateIntervalId),
h.updateIntervalId=null,h.miniMapInitialized=!1,h.experimentChanged=!1);typeof Storage!=
"undefined"&&Shell.Utilities.isLocalStorageAvailable()&&localStorage.setItem("MiniMapCollapsed",
h.miniMapCollapsed()?"true":"false");var n=h.miniMapCollapsed()?164:165;DataLab.
Log.featureUsage({featureID:n,groupID:162})});new DataLab.Util.DisposableSubscription(
e.subscribe(function(){h.callStartUpdatesMethod()}));new DataLab.Util.DisposableSubscription(
o.subscribe(function(){h.callStartUpdatesMethod()}));new DataLab.Util.DisposableSubscription(
s.subscribe(function(){$(".miniMapContainer").removeClass("miniMapInvisible");h.
experimentLoaded(!0)}));$(document).one("experimentLoaded",function(){$(".miniMapContainer").
removeClass("miniMapInvisible");h.experimentLoaded(!0)});this.toggleExpandCollapse=
function(){h.miniMapCollapsed(!h.miniMapCollapsed())};this.registerForDisposal(new
DataLab.Util.DisposableEventListener(this.canvasDiv,"keydown",function(n){switch(
n.keyCode){case 77:h.toggleExpandCollapse()}}))}return __extends(t,n),t.prototype.
updateMap=function(){var i,r,n,u;if(this.miniMapInitialized){if(this.mapSvg=this.
graphSvg.clone(),this.mapSvg.find("tspan").show(),n=this.getExperimentBounds(),u=
!1,n&&n.width>0&&n.height>0){i=(this.mapWidth-2*this.mapPadding)/n.width;r=(this.
mapHeight-2*this.mapPadding)/n.height;var t=Math.min(i,r),f=-n.x*t+(this.mapWidth-
n.width*t)/2,e=-n.y*t+(this.mapHeight-n.height*t)/2;this.graphToMapTransform=this.
mapSvg.get(0).createSVGMatrix().translate(f,e).scale(t);this.mapSvg.children().get(
0).transform.baseVal.getItem(0).setMatrix(this.graphToMapTransform);this.experimentEmpty=
!1}else this.experimentEmpty=!0;this.mapDivElement.empty();this.mapSvg.appendTo(
this.mapDivElement);this.updatePositionHighlight()}},t.prototype.updateOnExperimentChange=
function(){this.experimentChanged?(this.experimentChanged=!1,this.updateMap()):(
clearInterval(this.updateIntervalId),this.updateIntervalId=null)},t.prototype.startUpdates=
function(){this.miniMapCollapsed()||(this.experimentChanged=!0,this.updateIntervalId||
(this.updateMap(),this.updateIntervalId=setInterval(this.callUpdateOnExperimentChangeMethod,
2e3)))},t.prototype.highlightDragStart=function(n,t){DataLab.Log.featureUsage({featureID:
163,groupID:162});this.draggingStarted(!0);this.draggingStartX=t.clientX;this.draggingStartY=
t.clientY},t.prototype.highlightDragStop=function(){this.draggingStarted(!1)},t.
prototype.highlightDrag=function(n,t){var i,r;if(this.draggingStarted()){i=t.clientX-
this.draggingStartX;r=t.clientY-this.draggingStartY;this.draggingStartX=t.clientX;
this.draggingStartY=t.clientY;var f=this.getGraphTransform().a,e=1/this.graphToMapTransform.
a,u=e*f,o=-i*u,s=-r*u;this.pan(o,s)}},t.prototype.updatePositionHighlight=function(
){var n=this.getGraphTransform(),f=this.getViewDimensions(),s;if(!(n&&f)||this.experimentEmpty)
{this.positionHighlight({x:0,y:0,width:0,height:0});return}var r=1/n.a,u={x:-n.e*
r,y:-n.f*r,width:(f.width-n.e)*r,height:(f.height-n.f)*r},t=this.graphToMapTransform.
a*u.x+this.graphToMapTransform.e,i=this.graphToMapTransform.d*u.y+this.graphToMapTransform.
f,h=this.graphToMapTransform.a*u.width+this.graphToMapTransform.e,c=this.graphToMapTransform.
d*u.height+this.graphToMapTransform.f,e=h-t,o=c-i;t>this.mapWidth-this.mapPadding&&
(t=this.mapWidth-this.mapPadding);i>this.mapHeight-this.mapPadding&&(i=this.mapHeight-
this.mapPadding);t+e<this.mapPadding&&(e=this.mapPadding-t);i+o<this.mapPadding&&
(o=this.mapPadding-i);s={x:t,y:i,width:e,height:o};this.positionHighlight(s)},t.
prototype.initializeMap=function(){if(!this.miniMapCollapsed()){this.mapDivElement=
$(".miniMapDiv");this.miniMapInitialized=!0;this.updateMap();$(this.graphSvg).on(
"originAndZoomChangedEvent",this.callUpdatePositionHighlightMethod)}},t.prototype.
dispose=function(){$(this.graphSvg).off("originAndZoomChangedEvent");this.canvasDiv=
null;this.updateIntervalId&&(clearInterval(this.updateIntervalId),this.updateIntervalId=
null);this.updateStartStop=null},t}(DataLab.Util.Disposable);n.XEMiniMap=t}(ExperimentEditor||
(ExperimentEditor={}));__extends=this.__extends||function(n,t){function r(){this.
constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;
n.prototype=new r},function(n){function r(t,i,r){var u,f,e;return i===void 0&&(i=
null),r===void 0&&(r=null),typeof i=="string"&&i.toLowerCase()!==DataLab.Workspace.
id.toLowerCase()?(u=r||"",u=u+"/Home/ViewWorkspace/"+i,f=Shell.UI.Navigation.calculateNavigationPath(
{extension:n.experimentExtensionName,type:"Experiment",name:t,view:"ViewExperiment"}),
e=u+f,e):Shell.UI.Navigation.calculateNavigationPath({extension:n.experimentExtensionName,
type:n.ExperimentType.name,name:t})}function u(t,i,u){if(i===void 0&&(i=null),u===
void 0&&(u=null),i||u){var f=r(t,i,u);window.location.href=f}else Shell.UI.Navigation.
navigate({extension:n.experimentExtensionName,type:n.ExperimentType.name,name:t})}
function h(t){Shell.UI.Navigation.navigate({extension:n.experimentExtensionName,
type:n.ExperimentLineageType.name,name:t})}function f(t){Shell.UI.Navigation.navigate(
{extension:n.dataflowExtensionName,type:n.DataflowType.name,name:t})}function c(
t){return Shell.UI.Navigation.calculateNavigationPath({extension:n.webServiceGroupExtensionName,
type:n.WebServiceGroupType.name,name:t})}function t(t){Shell.UI.Navigation.navigate(
{extension:n.webServiceGroupExtensionName,type:n.WebServiceGroupType.name,name:t})}
var o=DataLab.Util.format,s=DataLab.Util.formatDataSize,i=DataLab.LocalizedResources,
e;n.experimentExtensionName="Experiments";n.dataflowExtensionName="Dataflows";n.
webServiceGroupExtensionName="WebServiceGroups";n.ExperimentType={name:"Experiment",
displayName:DataLab.LocalizedResources.experiment,dataFunction:function(n){return{
data:[{name:n.Experiment,displayName:n.Experiment}]}},draftExperimentId:"Draft"};
n.ExperimentLineageType={name:"ExperimentLineage",displayName:DataLab.LocalizedResources.
runHistory,dataFunction:function(n){return{data:[{name:n.ExperimentLineage,displayName:
n.ExperimentLineage}]}}};n.DataflowType={name:"Dataflow",displayName:DataLab.LocalizedResources.
dataflow,dataFunction:function(n){return{data:[{name:n.Dataflow,displayName:n.Dataflow}]}}
};n.calculateNavigationPathToExperiment=r;n.navigateToExperiment=u;n.navigateToExperimentLineage=
h;n.navigateToDataflow=f;n.calculateNavigationPathToWebService=c;n.navigateToWebService=
t;e=function(r){function e(i,f,e){var o=this,h,s;r.call(this,n.experimentExtensionName);
this.runCommandShown=!0;this.projectViewModelListening=!1;this.notifications=[];
DataLab.Log.info("Opening the experiment viewer","ExperimentView",f);this._renderArea=
i;this.commandsDisabled=ko.observable(!1);h=this._renderArea.querySelector("#ExperimentEditor");
this.registerForDisposal(this.xeViewModel=new ExperimentEditor.ExperimentEditorContainerViewModel(
e,{loadFromService:function(n){return e.getExperimentAsync(n)}},f===n.ExperimentType.
draftExperimentId?null:f),this.xeControlContainer=new ExperimentEditor.ExperimentEditorContainer(
h,this.xeViewModel));this.xeViewModel.registerAlertHandler(function(n){var t=new
Shell.UI.Notifications.Notification(n,"error");o.addNotification(t);t.setActions(
[Shell.UI.Notifications.Buttons.close(function(){DataLab.Util.removeElementFromArray(
o.notifications,t)})])});this.xeViewModel.registerOutputPromotionProgressHandler(
function(n){var t=new Shell.UI.Notifications.Progress(DataLab.LocalizedResources.
promotionSavingIntermediateOutput,"active",!0);o.addNotification(t);n.done(function(
n){t.setTitle(DataLab.Util.format(DataLab.LocalizedResources.outputSavedAs,n.name(
)));t.setStatus("success");t.setActions([Shell.UI.Notifications.Buttons.close(function(
){DataLab.Util.removeElementFromArray(o.notifications,t)})])}).fail(function(n){
if(DataLab.Features.trialLimitationsEnabled()&&ExperimentEditor.tryShowDialogForTrialRestriction(
n)){DataLab.Util.removeElementFromArray(o.notifications,t);Shell.UI.Notifications.
remove(t);return}var i=DataLab.Util.getErrorDetails(n);t.setTitle(DataLab.LocalizedResources.
savingIntermediateOutputFailed+i);t.setStatus("error");t.setActions([Shell.UI.Notifications.
Buttons.close(function(){DataLab.Util.removeElementFromArray(o.notifications,t)}
)])})});this.xeViewModel.registerNavigateToParentHandler(function(n){n&&u(n)});this.
xeViewModel.registerNavigateToWebServiceHandler(function(n){n&&t(n)});s=function(
n){o.upgradeNotificationOpen&&n.which===8&&n.preventDefault()};this.xeViewModel.
registerNodeUpgradeEligibilityHandler(function(){var n=new Shell.UI.Notifications.
Confirmation(DataLab.LocalizedResources.autoUpgradeModulesAndDatasets,"active"),
t=o.xeViewModel.experiment,i;o.upgradeNotificationOpen=!0;i=function(){Shell.UI.
Notifications.remove(n)};n.setActions([new Shell.UI.Notifications.Buttons.ok(function(
){t===o.xeViewModel.experiment&&t.upgradeNodes(e.moduleCache,e.datasetCache,e.trainedModelCache,
e.transformModules,e);o.upgradeNotificationOpen=!1;DataLab.Util.removeElementFromArray(
o.notifications,n);DataLab.Log.featureUsage({featureID:1,groupID:0,experimentID:
o.xeViewModel.experiment.experimentId()})})]);o.addNotification(n);DataLab.Log.customEvent(
{key:"Upgrade_Popup",type:"Experiment",data:JSON.stringify(o.xeViewModel.experiment.
experimentId())});$(document).on("keydown",s)});this.xeViewModel.registerCannotSaveDraftHandler(
function(n){var t=new Shell.UI.Notifications.Confirmation(n,"active");t.setActions(
[new Shell.UI.Notifications.Buttons.ok(function(){DataLab.Util.removeElementFromArray(
o.notifications,t)})]);o.addNotification(t)});this._updateSidebarTitle(this.xeViewModel.
experiment.description());this.registerForDisposal(this.descriptionSubscription=
new DataLab.Util.DisposableSubscription(this.xeViewModel.experiment.description.
subscribe(function(){o._updateSidebarTitle(o.xeViewModel.experiment.description(
))})),new DataLab.Util.DisposableSubscription(this.xeViewModel.experimentEditorViewModel.
newExperimentLoaded.subscribe(function(){o._updateSidebarTitle(o.xeViewModel.experiment.
description());o.descriptionSubscription.dispose();o.registerForDisposal(o.descriptionSubscription=
new DataLab.Util.DisposableSubscription(o.xeViewModel.experiment.description.subscribe(
function(){o._updateSidebarTitle(o.xeViewModel.experiment.description())})))})));
this.createScoreGraphOperation=new ExperimentEditor.CreateScoringGraphOperation(
this.xeViewModel,this.xeControlContainer);this.updateScoreGraphOperation=new ExperimentEditor.
UpdateScoringGraphOperation(this.xeViewModel,this.xeControlContainer);this.xeViewModel.
onRefreshFromNewExperiment=function(n,t){(n.statusCode()===DataLab.DataContract.
State.Running||n.statusCode()===DataLab.DataContract.State.NotStarted)&&t.statusCode(
)===DataLab.DataContract.State.Finished&&(o.updateScoreGraphOperation.isEnabled(
)?ExperimentEditor.GuideTours.showUpdatingScoringGraphCommandTour():o.createScoreGraphOperation.
isEnabled()&&!DataLab.Features.animatedTourEnabled()?ExperimentEditor.GuideTours.
showCreatingScoringGraphCommandTour():o.xeViewModel.experiment.isWebServiceExperiment(
)&&ExperimentEditor.GuideTours.showPublishWebServiceCommandTour())};this.prepareWebServiceOperation=
new ExperimentEditor.PrepareWebServiceOperation(this.xeViewModel,this.xeControlContainer);
this.upgradeNotificationOpen=!1;$(window).on("hashchange",function(){o.removeNotifications(
);$(document).unbind("keydown",s);o.upgradeNotificationOpen=!1});cdm.setActiveItem(
this);document.querySelector("#tabcontainer .itemtitle").textContent=""}return __extends(
e,r),e.prototype.addNotification=function(n){this.notifications.push(n);Shell.UI.
Notifications.add(n)},e.prototype.removeNotifications=function(){this.notifications.
forEach(function(n){Shell.UI.Notifications.remove(n)})},e.prototype.validateExperiment=
function(){var i=this,n=this.xeViewModel.validate(),t;if(n.valid||n.unhandledErrors.
length===n.allErrors.length){if(n.unhandledErrors.length>0)return n.unhandledErrors[
0].errorMessages.length>0?(t=new Shell.UI.Notifications.Confirmation(n.unhandledErrors[
0].errorMessages[0],"active"),DataLab.Log.customEvent({key:"validateExperiment",
type:"ErrorNotification",data:JSON.stringify(n.unhandledErrors[0].errorMessages[
0])}),t.setActions([Shell.UI.Notifications.Buttons.close(function(){DataLab.Util.
removeElementFromArray(i.notifications,t)})]),this.addNotification(t)):DataLab.Log.
error("Encountered an IObjectError with no error message"),!1}else return!1;return!0}
,e.prototype.publish=function(){var n=this,t,i;DataLab.Log.info("Publishing experiment",
"ExperimentView:publish",this.xeViewModel.experiment.experimentId());DataLab.Log.
featureUsage({featureID:6,groupID:15,experimentID:this.xeViewModel.experimentId(
)});t=window.location.hash;this.validateExperiment()&&(this.commandsDisabled(!0),
i=this.xeViewModel.experiment.isDraft()?this.xeViewModel.save():DataLab.Util.when(
),i.done(function(){n.xeViewModel.publish().done(function(i){n.xeViewModel.experimentEditorViewModel.
rememberExperimentPosition(i);DataLab.Log.customEvent({key:"PublishAsDataflow",type:
"ShellUICommands"});window.location.hash===t&&f(i);n.commandsDisabled(!1)}).fail(
function(t){if(t!=="CredentialValidationSUO6"){var r=DataLab.Util.getErrorDetails(
t),i=new Shell.UI.Notifications.Notification(DataLab.Util.format(DataLab.LocalizedResources.
publishFailed,r),"error");i.setActions([Shell.UI.Notifications.Buttons.close(function(
){DataLab.Util.removeElementFromArray(n.notifications,i)})]);n.addNotification(i);
DataLab.Log.customEvent({key:"PublishAsDataflow_Failed",type:"ShellUICommands"})}
n.commandsDisabled(!1)})}))},e.prototype.submit=function(){var t=this,i;DataLab.
Log.info("Submitting experiment","ExperimentView:submit",this.xeViewModel.experiment.
experimentId());i=window.location.hash;this.validateExperiment()&&(this.xeViewModel.
experiment.statusCode()!==DataLab.DataContract.State.InDraft&&this.xeViewModel.clone(
!0),this.commandsDisabled(!0),DataLab.Log.featureUsage({featureID:4,groupID:3,experimentID:
this.xeViewModel.experimentId()}),Shell.UI.Spinner.show(),this.xeViewModel.submit(
).done(function(r){t.xeViewModel.experiment.setDraftState(!1);t.xeViewModel.experimentEditorViewModel.
rememberExperimentPosition(r.ExperimentId);window.location.hash===i&&n.navigateToExperiment(
r.ExperimentId);t.commandsDisabled(!1)}).fail(function(n){var e=!1,f,i;if(DataLab.
Features.trialLimitationsEnabled()&&(e=ExperimentEditor.tryShowDialogForTrialRestriction(
n)),n instanceof DataLab.Util.AjaxError&&n.xmlHttpRequest&&n.xmlHttpRequest.status!==
412&&!e){var o=DataLab.Constants.ExperimentSubmissionFailedRegExp,r="",u=n.xmlHttpRequest.
responseText,s="";o.test(n.xmlHttpRequest.responseText)&&(f=n.xmlHttpRequest.responseText.
match(o),u=f[1],r=f[2]);s=r===""?DataLab.Util.format(DataLab.LocalizedResources.
experimentSubmissionFailedNoRequestId,u):DataLab.Util.format(DataLab.LocalizedResources.
experimentSubmissionFailedWithRequestId,r,u);i=new Shell.UI.Notifications.Notification(
s,"error");i.setActions([Shell.UI.Notifications.Buttons.close(function(){DataLab.
Util.removeElementFromArray(t.notifications,i)})]);t.addNotification(i);DataLab.
Log.customEvent({key:"ExperimentSubmission_Failed",type:"ShellUICommands"})}t.xeViewModel.
experiment.setDraftState(!0);t.commandsDisabled(!1)}).always(function(){Shell.UI.
Spinner.hide()}))},e.prototype.createScoringGraphCommand=function(){var n=this;this.
updateScoreGraphOperation.initialize(this.xeViewModel,this.xeControlContainer);this.
updateScoreGraphOperation.isUpdatable()?(this.commandsDisabled(!0),this.updateScoreGraphOperation.
runAsync().always(function(){n.commandsDisabled(!1)})):(this.commandsDisabled(!0),
this.createScoreGraphOperation.initialize(this.xeViewModel,this.xeControlContainer),
this.createScoreGraphOperation.runAsync().always(function(){n.commandsDisabled(!1)}
))},e.prototype.prepareWebServiceCommand=function(){this.prepareWebServiceOperation.
initialize(this.xeViewModel,this.xeControlContainer);this.prepareWebServiceOperation.
runAsync()},e.prototype.handlePublishWebServiceCommand=function(){var e=this,u,i,
f,r,n,t;if(!DataLab.Trial.isWebServicePublishEnabled()){DataLab.Log.featureUsage(
{featureID:57,groupID:56,experimentID:this.xeViewModel.experimentId()});ExperimentEditor.
showDisabledWebServicePublishDialog();return}if(u=!0,i=this.xeViewModel.experiment,
i.allowPublish())DataLab.Features.multiInputSupportEnabled()&&i.getPublishInputPorts(
).length>=1?u=!1:DataLab.Features.multiInputSupportEnabled()||i.getPublishInputPorts(
).length!==1||(u=!1);else{n=DataLab.LocalizedResources.cannotPublishDirtyExperiment;
t=new Shell.UI.Notifications.Notification(n,"error");t.setActions([Shell.UI.Notifications.
Buttons.close()]);Shell.UI.Notifications.add(t);DataLab.Log.customEvent({key:"PublishWebService_Error",
type:"ShellUICommands",data:n});return}if(u)f=DataLab.LocalizedResources.confirmPublishWithoutPorts,
r=new Shell.UI.Notifications.Confirmation(f,"active"),r.setActions([new Shell.UI.
Notifications.Buttons.yes(function(){Shell.UI.Notifications.remove(r);e.launchPublishWebServiceDialog(
);DataLab.Log.customEvent({key:"PublishWebService_Yes",type:"ShellUICommands"})}
),new Shell.UI.Notifications.Buttons.no(function(){Shell.UI.Notifications.remove(
r);DataLab.Log.customEvent({key:"PublishWebService_No",type:"ShellUICommands"})}
)]),Shell.UI.Notifications.add(r);else if(i.validatePortsForPublishAndSetSubgraph(
))this.launchPublishWebServiceDialog(),DataLab.Log.customEvent({key:"PublishWebService",
type:"ShellUICommands"});else{n=DataLab.LocalizedResources.cannotPublishInvalidPublishPorts;
t=new Shell.UI.Notifications.Notification(n,"error");t.setActions([Shell.UI.Notifications.
Buttons.close()]);Shell.UI.Notifications.add(t);DataLab.Log.customEvent({key:"PublishWebService_Error",
type:"ShellUICommands",data:n});return}},e.prototype.launchPublishWebServiceDialog=
function(){var n=this,t=this.xeViewModel.experiment.publishedWebServiceGroupId;if(
t)return DataLab.Util.then(this.xeViewModel.workspace.getWebServiceGroupAsync(t),
function(i){var r=new Shell.UI.Notifications.Confirmation(DataLab.Util.format(DataLab.
LocalizedResources.publishWebServiceOverwritingConfirmationTitle,i.Name),"active");
r.setDetailsText(DataLab.LocalizedResources.publishWebServiceOverwritingConfirmationDetails);
r.setActions([new Shell.UI.Notifications.Buttons.yes(function(){n.republishWebService(
t,i.StagingWebService.Id);DataLab.Util.removeElementFromArray(n.notifications,r);
DataLab.Log.customEvent({key:"PublishWebServiceLaunchDialogOverwritingService_Yes",
type:"ShellUICommands"});DataLab.Log.featureUsage({featureID:7,groupID:3,experimentID:
n.xeViewModel.experimentId()})}),new Shell.UI.Notifications.Buttons.no(function(
){Shell.UI.Notifications.remove(r);DataLab.Util.removeElementFromArray(n.notifications,
r);DataLab.Log.customEvent({key:"PublishWebServiceLaunchDialogOverwritingService_No",
type:"ShellUICommands"})})]);n.addNotification(r)});this.firstTimePublishWebService(
this.xeViewModel.experiment.description());DataLab.Log.featureUsage({featureID:5,
groupID:3,experimentID:this.xeViewModel.experimentId()})},e.prototype.firstTimePublishWebService=
function(n){var i=this;return Shell.UI.Spinner.show(),this.xeViewModel.firstTimePublishWebService(
n).done(function(n){t(n)}).fail(function(n){i.showErrorNotification(DataLab.LocalizedResources.
publishWebServiceErrorConfirmationTitle,n.message)}).always(function(){Shell.UI.
Spinner.hide()})},e.prototype.republishWebService=function(n,i){var r=this;return Shell.
UI.Spinner.show(),this.xeViewModel.republishWebService(n,i).done(function(){t(n)}
).fail(function(n){r.showErrorNotification(DataLab.LocalizedResources.publishWebServiceErrorConfirmationTitle,
n.message)}).always(function(){Shell.UI.Spinner.hide()})},e.prototype.handlePublishToCommunityCommand=
function(){var f;if(!DataLab.Trial.isPublishToCommunityEnabled()){DataLab.Log.featureUsage(
{featureID:104,groupID:56,experimentID:this.xeViewModel.experimentId()});ExperimentEditor.
showDisabledPublishToCommunityDialog();return}var r=this.xeViewModel.experiment,
t=null,n,e=r.storageUsedByDatasets,u=r.firstCustomModule();u&&!DataLab.Features.
publishCustomModulesToGalleryEnabled()?(f=DataLab.LocalizedResources.publishExperimentToCommunityValidationError_CustomModule_Title,
n=DataLab.Util.format(f,u.name),t=DataLab.LocalizedResources.publishExperimentToCommunityValidationError_CustomModule_Message,
DataLab.Log.customEvent({key:"PublishExperimentToCommunity_ValidationError",type:
"ShellUICommands",data:n+" "+t})):environment.communityDatasetStorageLimit>0&&e>
environment.communityDatasetStorageLimit?(n=o(i.publishExperimentToCommunityValidationError_LargeDataset_Title,
s(environment.communityDatasetStorageLimit)),DataLab.Log.customEvent({key:"PublishExperimentToCommunity_DatasetsValidationError",
type:"ShellUICommands",data:n})):r.allowPublish()?(this.launchPublishToCommunityDialog(
),DataLab.Log.featureUsage({featureID:54,groupID:3,experimentID:this.xeViewModel.
experimentId()}),DataLab.Log.customEvent({key:"PublishExperimentToCommunity",type:
"ShellUICommands"})):(n=t=DataLab.LocalizedResources.cannotPublishDirtyExperiment,
DataLab.Log.customEvent({key:"PublishExperimentToCommunity_DirtyError",type:"ShellUICommands",
data:t}));n&&this.showErrorNotification(n,t)},e.prototype.launchPublishToCommunityDialog=
function(){var r=this,u;this.commandsDisabled(!0);DataLab.Util.initializeTemplateIfNecessary(
"TagTextBox",ExperimentEditorTemplates._tagTextBoxMarkup);var t=this.xeViewModel.
experimentEditorViewModel.experimentViewModel(),n=null,i=null;t.experiment.tags(
).forEach(function(t){DataLab.Constants.GalleryUriTagRegExp.test(t)&&(n=t.match(
DataLab.Constants.GalleryUriTagRegExp)[1])});DataLab.Features.republishToGalleryEnabled(
)&&n?(Shell.UI.Spinner.show(),u=n.match(DataLab.Constants.GalleryIdRegExp)[1],ExperimentEditor.
Community.GalleryQueryUtil.queryCatalogById(u).done(function(u){i={galleryExperimentDescription:
u.description,galleryExperimentName:u.name,galleryExperimentSummary:u.summary,galleryExperimentImageUrl:
u.image_url,galleryExperimentTags:u.tags,hidden:u.hidden};Shell.UI.Spinner.hide(
);r.launchPublishDialog(t,i,n)}).fail(function(){Shell.UI.Spinner.hide();i={galleryExperimentDescription:
"",galleryExperimentName:"",galleryExperimentSummary:"",galleryExperimentImageUrl:
"",galleryExperimentTags:[],hidden:null};r.launchPublishDialog(t,i,n)})):this.launchPublishDialog(
t)},e.prototype.launchPublishDialog=function(n,t,i){var o=this,r,u,f,e;t===void 0&&
(t=null);i===void 0&&(i=null);r=new ExperimentEditor.PublishToCommunityWizardViewModel(
n,t);u=new $.fxs.fxsWizard.WizardStep;u.contentTemplateOptions({name:DataLab.Util.
initializeTemplateIfNecessary("PublishToCommunityStep1Template",ExperimentEditorTemplates.
_publishToCommunityStep1Markup,DataLab.Features.markdownInPublishDialogEnabled()&&
[ExperimentEditor.markdownEditorRegisterInfo]),data:r});u.title(DataLab.LocalizedResources.
publishExperimentToCommunityWizardExperimentDescriptionTitle);f=new $.fxs.fxsWizard.
WizardStep;f.contentTemplateOptions({name:DataLab.Util.initializeTemplateIfNecessary(
"PublishToCommunityStep2Template",ExperimentEditorTemplates._publishToCommunityStep2Markup),
data:r});f.title(DataLab.LocalizedResources.publishExperimentToCommunityWizardImageSelectionTitle);
e=new $.fxs.fxsWizard.WizardStep;e.contentTemplateOptions({name:DataLab.Util.initializeTemplateIfNecessary(
"PublishToCommunityStep3Template",ExperimentEditorTemplates._publishToCommunityStep3Markup),
data:r});e.title(DataLab.LocalizedResources.publishExperimentToCommunityWizardSettingsTitle);
var h=[u,f,e],c=t?DataLab.LocalizedResources.republishExperimentToCommunityWizardTitle:
DataLab.LocalizedResources.publishExperimentToCommunityWizardTitle,l={size:[690,
735],autoLock:!1,title:c},s=new ExperimentEditor.WizardView(r,h,l);s.onWizardClosingEvent.
subscribe(function(n){if(n.completed){var t=r.getPublishableExperiment();o.publishToCommunity(
t,i).always(function(){return o.commandsDisabled(!1)})}else o.commandsDisabled(!1)}
);s.show()},e.prototype.onPublishToCommunityComplete=function(n,t){var i=this.xeViewModel.
experiment.tags(),r=!1,u;this.xeViewModel.experiment.tags().forEach(function(n){
DataLab.Constants.GalleryUriTagRegExp.test(n)&&(r=!0)});r===!1&&(i.push("galleryUri:"+
n),this.xeViewModel.experiment.tags(i),this.xeViewModel.update());u=new ExperimentEditor.
PublishToCommunityOnCompleteViewModel(n,t);ExperimentEditor.DialogViews.PublishToCommunityStepOnComplete.
show(u)},e.prototype.publishToCommunity=function(n,t){var i=this,r;return t===void
0&&(t=null),r=new ExperimentEditor.PauseUserWithSpinnerViewModel(DataLab.LocalizedResources.
publishExperimentToCommunityPauseOnPublishingMessage),ExperimentEditor.CustomUX.
open(ExperimentEditorTemplates._pauseUserWithSpinnerMarkup,r,"400px","600px",null,
null,!1),DataLab.Util.then(this.xeViewModel.publishExperimentToCommunity(n,t).always(
function(){ExperimentEditor.CustomUX.close()}),function(t){t=JSON.parse(t);return i.
onPublishToCommunityComplete(t,n.visibility)}).fail(function(n){i.showErrorNotification(
DataLab.LocalizedResources.publishExperimentToCommunityErrorTitle,n.message)})},
e.prototype.save=function(){var n=this;this.commandsDisabled(!0);DataLab.Log.featureUsage(
{featureID:8,groupID:3,exerimentID:this.xeViewModel.experimentId()});this.xeViewModel.
save().fail(function(n){DataLab.Features.trialLimitationsEnabled()&&ExperimentEditor.
tryShowDialogForTrialRestriction(n)}).always(function(){n.commandsDisabled(!1)})}
,e.prototype.confirmDiscard=function(){var n=this,t=new Shell.UI.Notifications.Confirmation(
DataLab.LocalizedResources.discardDraftAreYouSureQuestion,"active");t.setActions(
[new Shell.UI.Notifications.Buttons.yes(function(){n.discard();DataLab.Util.removeElementFromArray(
n.notifications,t);DataLab.Log.featureUsage({featureID:10,groupID:3,exerimentID:
n.xeViewModel.experimentId()})}),new Shell.UI.Notifications.Buttons.no(function(
){Shell.UI.Notifications.remove(t);DataLab.Util.removeElementFromArray(n.notifications,
t);DataLab.Log.featureUsage({featureID:11,groupID:3,exerimentID:n.xeViewModel.experimentId(
)})})]);this.addNotification(t)},e.prototype.discard=function(){var t=this;DataLab.
Log.info("Discarding the experiment draft","ExperimentView:discard",this.xeViewModel.
experiment.experimentId());this.commandsDisabled(!0);DataLab.Log.customEvent({key:
"Discard",type:"ShellUICommands"});this.xeViewModel.discard().done(function(){t.
xeViewModel.experiment.parentExperimentId?(Shell.UI.Spinner.show(),DataLab.Util.
then(t.xeViewModel.workspace.getExperimentAsync(t.xeViewModel.experiment.parentExperimentId),
function(){t.xeViewModel.navigateToParent();Shell.UI.Spinner.hide()})):Shell.UI.
Navigation.navigate({extension:n.experimentExtensionName})}).always(function(){t.
commandsDisabled(!1)})},e.prototype.saveAs=function(){var n=this,t,i;this.commandsDisabled(
!0);t=ko.observable(null);i=new ExperimentEditor.ExperimentSaveAs.ExperimentSaveAsViewModel(
t,this.xeViewModel.experimentEditorViewModel.experimentViewModel().experiment.description(
));ExperimentEditor.CustomUX.open(ExperimentEditorTemplates._experimentSaveAsMarkup,
i,"206px","600px",function(){n.commandsDisabled(!1)});t.subscribe(function(){t()&&
(n.xeViewModel.copy(t(),!0),n.commandsDisabled(!0),n.xeViewModel.save().fail(function(
n){DataLab.Features.trialLimitationsEnabled()&&ExperimentEditor.tryShowDialogForTrialRestriction(
n)}).always(function(){n.commandsDisabled(!1)}),DataLab.Log.featureUsage({featureID:
9,groupID:3,exerimentID:n.xeViewModel.experimentId()}))})},e.prototype.cancel=function(
){var n=this;this.commandsDisabled(!0);DataLab.Log.featureUsage({featureID:12,groupID:
3,exerimentID:this.xeViewModel.experimentId()});this.xeViewModel.cancel().done(function(
){n.xeViewModel.refreshExperiment().done(function(){n.commandsDisabled(!1)})})},
e.prototype.refresh=function(){var n=this,t=this.xeViewModel.refreshExperiment();
this.commandsDisabled(!0);DataLab.Log.featureUsage({featureID:13,groupID:3,exerimentID:
this.xeViewModel.experimentId()});t.always(function(){n.isViewExtensionStillActive(
)&&cdm.getActiveItem()!==n&&n._renderArea&&cdm.setActiveItem(n);n.commandsDisabled(
!1)})},e.prototype.open=function(){var n=this,t;this.xeViewModel.startAutoRefresh(
);t=this.xeViewModel.loadFromService();Shell.UI.Spinner.show();this.commandsDisabled(
!0);t.done(function(){if(n.isViewExtensionStillActive()&&n._renderArea&&(n.xeControlContainer.
zoomToFitIfSample(),Shell.UI.Spinner.hide(),n.xeViewModel.experimentEditorViewModel.
experimentViewModel().experimentLoaded(!0),cdm.setActiveItem(n),window.newExperimentGeneration&&
(window.newExperimentGeneration.numTimesNavigateCalled>1?window.newExperimentGeneration.
numTimesNavigateCalled--:(n.xeViewModel.experimentId()===window.newExperimentGeneration.
id&&window.newExperimentGeneration.createCopy(),window.newExperimentGeneration=null)),
n.commandsDisabled(!1),$(document).trigger("experimentLoaded"),n.xeViewModel.experiment&&
n.xeViewModel.experiment.hasMissingResources)){n.validateExperiment();n.xeViewModel.
experiment.statusCode()!==DataLab.DataContract.State.InDraft&&n.xeViewModel.experiment.
isLeaf()&&n.xeViewModel.clone(!0);var t=new Shell.UI.Notifications.Notification(
DataLab.LocalizedResources.experimentContainsMissingResources,"error");n.addNotification(
t);t.setActions([Shell.UI.Notifications.Buttons.close(function(){DataLab.Util.removeElementFromArray(
n.notifications,t)})]);Shell.UI.Notifications.add(t)}DataLab.Performance.intervalEnd(
)}).fail(function(t){if(t instanceof DataLab.Util.AjaxError&&t.xmlHttpRequest.status===
404){n._handleMissingExperiment(t);return}throw t;})},e.prototype._handleMissingExperiment=
function(t){var u=DataLab.Util.format(i.ErrorExperimentNotFound,this.xeViewModel.
experimentId()),r=new Shell.UI.Notifications.Confirmation(u,"active");r.setActions(
[Shell.UI.Notifications.Buttons.close(function(){Shell.UI.Notifications.remove(r);
n.navigateToExperimentList()})]);Shell.UI.Notifications.add(r);DataLab.Log.error(
"experiment not found","ExperimentView",t&&t.message)},e.prototype.showSaveAsDialog=
function(){var n=this.xeViewModel.experiment,t=new ExperimentEditor.ExperimentSaveAsDialogViewModel(
n.description()+DataLab.LocalizedResources.copyForNewExperimentName,this.xeViewModel,
!0);DataLab.Log.customEvent({key:"ExperimentSaveAsDialogOpened",type:"ExperimentView",
data:JSON.stringify({experimentId:n.experimentId()})});ExperimentEditor.DialogViews.
ExperimentSaveAs.show(t)},e.prototype.showLineage=function(){if(this.xeViewModel.
experiment.experimentId())n.navigateToExperimentLineage(this.xeViewModel.experiment.
experimentId());else if(this.xeViewModel.experimentEditorViewModel.parentExperimentId(
))n.navigateToExperimentLineage(this.xeViewModel.experimentEditorViewModel.parentExperimentId(
));else throw"Experiment ID and parent experiment ID cannot both be empty when viewing lineage";
},e.prototype._updateSidebarTitle=function(n){$(".fxshell-nav2-item.selected a span").
text(n).attr("title",n)},e.prototype.setCommands=function(){function i(t,i){return function(
){var r=cdm.currentActiveItem;if(!(r instanceof n.ExperimentView))throw"Expected an ExperimentView to handle command";
DataLab.Log.featureUsage({featureID:i,groupID:0,exerimentID:g});t.call(r)}}var t=
this,lt=this.xeViewModel.workspace.id,g=this.xeViewModel.experiment.experimentId(
),w=this.xeViewModel.projectViewModel,nt=DataLab.DataContract.ExperimentRole.Training,
u=ko.computed(function(){return t.commandsDisabled()||ExperimentEditor.CustomUX.
isOpen()}),c=ko.computed(function(){return u()||t.xeViewModel.readOnlyMode()||t.
xeViewModel.experiment.statusCode()!==DataLab.DataContract.State.Finished}),v,k,
st,l,s;w.loaded()?(v=w.experimentVMs().filter(function(n){return n.experimentId(
)===g})[0],v&&v.role&&(nt=v.role)):this.projectViewModelListening||(this.projectViewModelListening=
!0,this.registerForDisposal(new DataLab.Util.DisposableSubscription(w.loaded.subscribe(
function(){Shell.UI.Commands.clear();t.setCommands()}))));var f=DataLab.DataContract.
State,tt=DataLab.Features.copyToWorkspaceInExperimentViewEnabled()?i(n.ExperimentView.
prototype.showSaveAsDialog,122):i(n.ExperimentView.prototype.saveAs,109),b=new Shell.
UI.Commands.Command(DataLab.LocalizedResources.commandsViewRunHistory,Shell.UI.Icons.
clock,i(n.ExperimentView.prototype.showLineage,107),null,this.commandsDisabled()||
!this.xeViewModel.experimentEditorViewModel.parentExperimentId()&&this.xeViewModel.
experiment.statusCode()===f.InDraft),h,it,rt;DataLab.Features.collapseEditorDrawerCommandsEnabled(
)?(h=new Shell.UI.Commands.Command(DataLab.LocalizedResources.commandsSave,Shell.
UI.Icons.save,null,null,this.commandsDisabled()),k=h.addSubCommands([{text:DataLab.
LocalizedResources.commandsSave,click:i(n.ExperimentView.prototype.save,108),disabled:
this.commandsDisabled()||this.xeViewModel.readOnlyMode()},{text:DataLab.LocalizedResources.
commandsSaveAs,click:tt,disabled:this.commandsDisabled()}]),it=k[0],rt=k[1]):h=new
Shell.UI.Commands.Command(DataLab.LocalizedResources.commandsSave,Shell.UI.Icons.
save,i(n.ExperimentView.prototype.save,108),null,this.commandsDisabled()||this.xeViewModel.
readOnlyMode());var ut=new Shell.UI.Commands.Command(DataLab.LocalizedResources.
commandsSaveAs,Shell.UI.Icons.save,tt,null,this.commandsDisabled()),d=new Shell.
UI.Commands.Command(DataLab.LocalizedResources.commandsDiscardChanges,Shell.UI.Icons[
"delete"],i(n.ExperimentView.prototype.confirmDiscard,110),null,this.commandsDisabled(
)||!this.xeViewModel.experimentEditorViewModel.parentExperimentId()||this.xeViewModel.
readOnlyMode()||!this.xeViewModel.experimentEditorViewModel.experiment.isDraft()),
ft=new Shell.UI.Commands.Command(DataLab.LocalizedResources.commandsPublishAsDataflow,
Shell.UI.Icons.publish,i(n.ExperimentView.prototype.publish,111),null,this.commandsDisabled(
)),et=new Shell.UI.Commands.Command(DataLab.LocalizedResources.commandsRun,Shell.
UI.Icons.play,i(n.ExperimentView.prototype.submit,112),null,this.commandsDisabled(
)||this.xeViewModel.readOnlyMode()||this.xeViewModel.experiment.statusCode()===f.
Running),ot=new Shell.UI.Commands.Command(DataLab.LocalizedResources.commandsCancel,
Shell.UI.Icons.stop,i(n.ExperimentView.prototype.cancel,113),null,this.commandsDisabled(
)||!this.xeViewModel.userWorkspaceExperiment()||this.xeViewModel.experiment.statusCode(
)!==f.Running),o=new Shell.UI.Commands.Command(DataLab.LocalizedResources.commandsRun,
Shell.UI.Icons.play,i(n.ExperimentView.prototype.submit,112),null,this.commandsDisabled(
)||this.xeViewModel.readOnlyMode()||!this.xeViewModel.userWorkspaceExperiment()),
r=new Shell.UI.Commands.Command(DataLab.LocalizedResources.setupWebServiceCommandTitle,
Shell.UI.Icons.publish,null,null,!1),y=r.addSubCommands([{text:DataLab.LocalizedResources.
createScoreGraphCommandTitle,click:i(n.ExperimentView.prototype.createScoringGraphCommand,
116),disabled:!1},{text:DataLab.LocalizedResources.publishWebServiceCommandTitle,
click:i(n.ExperimentView.prototype.handlePublishWebServiceCommand,114),disabled:
c()}]),p=y[0],e=y[1];nt===DataLab.DataContract.ExperimentRole.Scoring?r=new Shell.
UI.Commands.Command(DataLab.LocalizedResources.publishWebServiceCommandTitle,Shell.
UI.Icons.deployWebService,i(n.ExperimentView.prototype.handlePublishWebServiceCommand,
114),null,c()):(st=r._subCommands&&r._subCommands.length,y.length===st&&(l=!0,ko.
computed(function(){var f=t.xeViewModel.experiment.containsTrainingModule(),e=t.
xeViewModel.experiment.isWebServiceExperiment();f&&!l?(r._subCommands=y,l=!0,r.setText(
DataLab.LocalizedResources.setupWebServiceCommandTitle),r.setClick(null)):f||(l&&
(r._subCommands=[],l=!1),e?(r.setIcon&&r.setIcon(Shell.UI.Icons.publish),r.setText(
DataLab.LocalizedResources.publishWebServiceCommandTitle),r.setDisabled(c()),r.setClick(
i(n.ExperimentView.prototype.handlePublishWebServiceCommand,114))):(r.setIcon&&r.
setIcon("/Libraries/Images/prepare-web-service.png"),r.setText(DataLab.LocalizedResources.
setupWebServiceCommandTitle),r.setDisabled(u()||t.xeViewModel.readOnlyMode()||t.
prepareWebServiceOperation.isRunning()),r.setClick(i(n.ExperimentView.prototype.
prepareWebServiceCommand,118))))})));var ht=new Shell.UI.Commands.Command(DataLab.
LocalizedResources.commandsPublishExperimentToCommunity,Shell.UI.Icons.publishToCommunity,
i(n.ExperimentView.prototype.handlePublishToCommunityCommand,115),null,c()),ct=new
Shell.UI.Commands.Command(DataLab.LocalizedResources.commandsRefresh,Shell.UI.Icons.
sync,i(n.ExperimentView.prototype.refresh,117),null,this.commandsDisabled()||s===
f.Finished||s===f.Failed||s===f.InDraft&&!this.xeViewModel.experiment.parentExperimentId),
a=[];DataLab.Features.dataflowsEnabled()&&a.push(ft);s=this.xeViewModel.experiment.
statusCode();DataLab.Features.collapseEditorDrawerCommandsEnabled()?a.push(b,h,d,
o,r):a.push(b,h,ut,d,ct,ot,et,r);DataLab.Features.packingServiceEnabled()&&DataLab.
Features.communityUXInStudioEnabled()&&a.push(ht);Shell.UI.Commands.add(a);ko.computed(
function(){t.updateScoreGraphOperation.isUpdatable()?(p.setText(DataLab.LocalizedResources.
updateScoreGraphCommandTitle),p.setDisabled(u()||t.xeViewModel.readOnlyMode()||t.
xeViewModel.experiment.statusCode()!==f.Finished||!t.updateScoreGraphOperation.isEnabled(
))):(p.setText(DataLab.LocalizedResources.createScoreGraphCommandTitle),p.setDisabled(
u()||t.xeViewModel.readOnlyMode()||t.xeViewModel.experiment.statusCode()!==f.Finished||
!t.createScoreGraphOperation.isEnabled()))});ko.computed(function(){t.xeViewModel.
experiment.isWebServiceExperiment()?(e.setIcon&&e.setIcon(Shell.UI.Icons.publish),
e.setText(DataLab.LocalizedResources.publishWebServiceCommandTitle),e.setDisabled(
c()),e.setClick(i(n.ExperimentView.prototype.handlePublishWebServiceCommand,114))):
(e.setIcon&&e.setIcon("/Libraries/Images/prepare-web-service.png"),e.setText(DataLab.
LocalizedResources.prepareWebServiceCommandTitle),e.setDisabled(u()||t.xeViewModel.
readOnlyMode()||t.prepareWebServiceOperation.isRunning()),e.setClick(i(n.ExperimentView.
prototype.prepareWebServiceCommand,118)))});ko.computed(function(){d.setDisabled(
u()||!t.xeViewModel.experimentEditorViewModel.parentExperimentId()||t.xeViewModel.
readOnlyMode()||!t.xeViewModel.experimentEditorViewModel.experiment.isDraft());et.
setDisabled(u()||t.xeViewModel.readOnlyMode()||t.xeViewModel.experiment.statusCode(
)===f.Running);ot.setDisabled(u()||!t.xeViewModel.userWorkspaceExperiment()||t.xeViewModel.
experiment.statusCode()!==f.Running);o.setDisabled(u()||!t.xeViewModel.userWorkspaceExperiment(
)&&!t.runCommandShown||t.xeViewModel.readOnlyMode()&&t.runCommandShown);r.setDisabled(
u()||t.xeViewModel.readOnlyMode());b.setDisabled(u()||!t.xeViewModel.experimentEditorViewModel.
parentExperimentId()&&t.xeViewModel.experiment.statusCode()===f.InDraft);ht.setDisabled(
c());ft.setDisabled(u());DataLab.Features.collapseEditorDrawerCommandsEnabled()?
(it.setDisabled(u()||!t.xeViewModel.experimentEditorViewModel.experiment.isDraft(
)),rt.setDisabled(u()),h.setDisabled(u())):(h.setDisabled(u()||!t.xeViewModel.experimentEditorViewModel.
experiment.isDraft()),ut.setDisabled(u()))});ko.computed(function(){s=t.xeViewModel.
experiment.statusCode();ct.setDisabled(u()||s===f.Finished||s===f.Failed||s===f.
InDraft&&!t.xeViewModel.experiment.parentExperimentId)});ko.computed(function(){
var r=t.xeViewModel.experiment.statusCode();t.runCommandShown=r===DataLab.DataContract.
State.NotStarted||r===DataLab.DataContract.State.Running?!1:!0;t.runCommandShown?
(o.setText(DataLab.LocalizedResources.commandsRun),o.setIcon(Shell.UI.Icons.play),
o.setClick(i(n.ExperimentView.prototype.submit,112))):(o.setText(DataLab.LocalizedResources.
commandsCancel),o.setIcon(Shell.UI.Icons.stop),o.setClick(i(n.ExperimentView.prototype.
cancel,113)))},this)},e.prototype.dispose=function(){this._renderArea=null;r.prototype.
dispose.call(this)},e.prototype.showErrorNotification=function(n,t){t===void 0&&
(t=null);var i=new Shell.UI.Notifications.Notification(n,"error");return t&&i.setDetailsText(
t),i.setActions([Shell.UI.Notifications.Buttons.close(function(){Shell.UI.Notifications.
remove(i)})]),Shell.UI.Notifications.add(i),i},e}(n.ViewBase);n.ExperimentView=e}
(DataLabViews||(DataLabViews={})),function(n){function i(n){return f[n]}function t(
n){return n.getFullYear()<1970?new Date:n}function r(n,t){var i=t.rowMetadata.dataItem.
ExperimentId;return"<span id='"+i+"'>"+DataLab.Util.encodeAsHtml(n)+"<\/span>"}var
f={NotStarted:"Not Started",InDraft:"Draft",Running:"Running",Failed:"Failed",Finished:
"Finished",Canceled:"Canceled"},u;n.formatExperimentStatusCode=i;n.dateTimeSortFormatter=
t;n.formatExperimentName=r;u=function(){function u(u,f,e,o,s){var h=this,c,l;this.
_renderArea=u;this._data=[];this.listedExperiments=[];this._workspace=f;this._client=
e;this._userName=o;this._selectedRows=[];this._experimentCategory=s;this.formatCheckbox=
function(n,t){var i=t.rowMetadata.dataItem.ExperimentId.split(".")[0]===h._workspace.
id;return i?"<input type='checkbox' class='rowCheckbox' />":"<input type='checkbox' class='rowCheckbox' disabled='true' />"}
;c=[{name:DataLab.LocalizedResources.experimentGridHeaderName,field:"Description",
formatter:r,sorted:s!=="user"?"ascending":undefined,cssClass:"navigationColumn"},
{name:DataLab.LocalizedResources.experimentGridHeaderCreator,field:"Creator",cssClass:
"navigationColumn"},{name:DataLab.LocalizedResources.experimentGridHeaderStatus,
field:"StatusCode",formatter:i,cssClass:"navigationColumn"},{name:DataLab.LocalizedResources.
experimentGridHeaderModificationTime,field:"CreationTime",formatter:DataLab.Util.
formatDate,sorted:s!=="user"?undefined:"descending",sortFormatter:t,cssClass:"navigationColumn"},
{name:DataLab.LocalizedResources.experimentGridHeaderStartTime,field:"StartTime",
formatter:DataLab.Util.formatDate,sortFormatter:t,cssClass:"navigationColumn"},{
name:DataLab.LocalizedResources.experimentGridHeaderEndTime,field:"EndTime",formatter:
DataLab.Util.formatDate,cssClass:"navigationColumn"}];s==="user"&&(l={name:"",field:
"Checkbox",formatter:this.formatCheckbox,cssClass:"checkboxColumn"},c=$.merge([l],
c));this._grid=$(u).find("#grid").wazDataGrid({columns:c,data:this._data,selectable:
!0,multiselect:!0,resizable:!0,rowSelect:function(){cdm.setActiveItem(h);h.deleteCommand&&
h.deleteCommand.setDisabled(h._selectedRows.length===0)}});this._grid.on("click",
".navigationColumn",function(t){var i=$(t.target).closest("tr").view().data,r;i.
rowMetadata&&(r=i.rowMetadata.dataItem.ExperimentId,n.navigateToExperiment(r))});
this._grid.on("click",".rowCheckbox",function(n){var t=$(n.target).closest("tr").
view().data.rowMetadata,r=$(n.target).is(":checked"),i;r?(h._selectedRows.push(t),
DataLab.Log.customEvent({key:"SelectRow",type:"ExperimentListView",data:JSON.stringify(
{selectedRow:t,allSelectedRows:h._selectedRows})})):(i=h._selectedRows.indexOf(t),
h._selectedRows.splice(i,1),DataLab.Log.customEvent({key:"UnselectRow",type:"ExperimentListView",
data:JSON.stringify({selectedRow:t,allSelectedRows:h._selectedRows})}))});cdm.setActiveItem(
this)}return u.prototype.refreshFromService=function(){var t=this,i;Shell.UI.Spinner.
show();i={includeNonLeaf:!1,includeArchived:!1};DataLab.Util.then(this._workspace.
listExperimentsAsync(i),function(i){cdm.currentActiveItem instanceof n.ExperimentListView&&
(DataLab.Performance.intervalEnd(),DataLab.Features.experimentListCategoriesEnabled(
)?t.filterExperimentsByCategory(i):t.filterExperiments(i),t._populateExperimentList(
t.listedExperiments),Shell.UI.Spinner.hide())})},u.prototype.changeExperimentArchiveState=
function(n){var t=this,i=function(n){for(var i=0;i<t.listedExperiments.length;i++)
if(t.listedExperiments[i].ExperimentId===n){t.listedExperiments.splice(i,1);break}
t.refreshFromLocal(t.listedExperiments);Shell.UI.Spinner.hide()};Shell.UI.Spinner.
show();DataLab.Util.forEach(this._selectedRows,function(r){n?DataLab.Util.then(t.
_workspace.archiveExperimentAsync(r.dataItem.ExperimentId),function(){i(r.dataItem.
ExperimentId)},function(){Shell.UI.Spinner.hide()}):DataLab.Util.then(t._workspace.
unarchiveExperimentAsync(r.dataItem.ExperimentId),function(){i(r.dataItem.ExperimentId)}
,function(){Shell.UI.Spinner.hide()})})},u.prototype.setCommands=function(){this.
_experimentCategory==="user"&&(this.deleteCommand=new Shell.UI.Commands.Command(
DataLab.LocalizedResources.deleteItem,Shell.UI.Icons["delete"],this.deleteConfirmation.
bind(this),null,!0),Shell.UI.Commands.add([this.deleteCommand]))},u.prototype.filterExperiments=
function(n){var t=this;this._experimentCategory!=="user"?(this.listedExperiments=
$.grep(n,function(n){return t._isGlobalWorkspaceId(n.ExperimentId.split(".")[0])}
,!1),this.listedExperiments=this.listedExperiments.filter(function(n){return n.Description===
DataLab.Constants.GuidedExperimentDescription?!1:!0}),DataLab.Trial.isWorkspaceTypeAnonymous(
)&&(this.listedExperiments=this.listedExperiments.filter(DataLab.Trial.filterSample))):
this.listedExperiments=$.grep(n,function(n){return t._isUserWorkspaceId(n.ExperimentId.
split(".")[0])},!1)},u.prototype.filterExperimentsByCategory=function(n){var t=this;
this.listedExperiments=n.filter(function(n){var i=t.getExperimentCategory(n);return i===
t._experimentCategory});DataLab.Trial.isWorkspaceTypeAnonymous()&&this._experimentCategory!==
"user"&&(this.listedExperiments=this.listedExperiments.filter(DataLab.Trial.filterSample))}
,u.prototype.refreshFromLocal=function(n){Shell.UI.Spinner.show();this._populateExperimentList(
n);Shell.UI.Spinner.hide()},u.prototype.getExperimentCategory=function(n){return n.
Category?n.Category:"user"},u.prototype._populateExperimentList=function(t){$.observable(
this._data).refresh(t.map(function(t){return{ExperimentId:t.ExperimentId,Description:
t.Description,Creator:t.Creator,CreationTime:t.Status.CreationTime,StartTime:t.Status.
StartTime,EndTime:t.Status.EndTime,StatusCode:t.Status.StatusCode,etag:t.Etag,type:
n.ExperimentType.name}}))},u.prototype.deleteConfirmation=function(){var t=this,
i=this._grid.wazDataGrid("getSelectedRows").length>1?DataLab.LocalizedResources.
confirmDeleteSelectedExperiments:DataLab.LocalizedResources.confirmDeleteSelectedExperiment,
n=new Shell.UI.Notifications.Confirmation(i,"active");JSON.stringify(this._grid.
wazDataGrid("getSelectedRows")[0].dataItem);n.setActions([new Shell.UI.Notifications.
Buttons.yes(function(){DataLab.Log.customEvent({key:"DeleteSelectedExperimentYes",
type:"ExperimentListView",data:JSON.stringify(t._selectedRows)});t.delete()}),new
Shell.UI.Notifications.Buttons.no(function(){DataLab.Log.customEvent({key:"DeleteSelectedExperimentNo",
type:"ExperimentListView"});Shell.UI.Notifications.remove(n)})]);Shell.UI.Notifications.
add(n)},u.prototype.delete=function(){var n=this,r=[],t,i;this._selectedRows.forEach(
function(t){r.push(t);DataLab.Util.first(n.listedExperiments,function(i,r){return n.
listedExperiments[r].ExperimentId===t.dataItem.ExperimentId?(n.listedExperiments.
splice(r,1),!0):!1},null)});t=[];i=!1;r.forEach(function(i){t.push(n._workspace.
deleteExperimentAndAncestorsAsync(i.dataItem.ExperimentId,i.dataItem.etag))});$.
when.apply($,t).fail(function(){i=!0}).always(function(){i?n.refreshFromService(
):n.refreshFromLocal(n.listedExperiments)});this._selectedRows=[]},u.prototype._isGlobalWorkspaceId=
function(n){return n&&n!==this._workspace.id},u.prototype._isUserWorkspaceId=function(
n){return n&&n===this._workspace.id},u}();n.ExperimentListView=u}(DataLabViews||
(DataLabViews={}));__extends=this.__extends||function(n,t){function r(){this.constructor=
n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){function u(n,t,i){i===void 0&&(i="");var r=i?' class="'+i+'"':
"",u=$("<div"+r+">"+n+"<\/div>");return function(n,i){return u.clone().click(function(
){i.dataItem&&t&&t(i.dataItem)})}}var t={Creator:"120px",Status:"100px",Date:"150px",
Button:"70px"},e,i,r;(function(n){n[n.IExperimentInfo=0]="IExperimentInfo";n[n.IWebServiceGroup=
1]="IWebServiceGroup"})(e||(e={}));i={LastModified:"lastModified",LastRun:"lastRun",
LastPublished:"lastPublished"};var f='<img src="/Libraries/Images/preview_24.svg" alt="'+
DataLab.LocalizedResources.recentWorkPreview+'">',s=function(i){function e(e,o){
var c=this,s,h;i.call(this);this._logEventTag="lastEdit";this._data=[];s=u(f,function(
n){DataLab.Log.featureUsage({featureID:33,groupID:0,experimentID:n&&n.ExperimentId});
o()&&n===o().dataItem||o({dataItem:n,Type:0})},"button");h=e.wazDataGrid({columns:
[{name:DataLab.LocalizedResources.recentWorkPreview,formatter:s,sortable:!1,filterable:
!1,width:t.Button,cssClass:"buttonColumn"},{name:DataLab.LocalizedResources.experimentGridHeaderName,
field:"Description",sortable:!1,filterable:!0,cssClass:"navigationColumn"},{name:
DataLab.LocalizedResources.experimentGridHeaderCreator,field:"Creator",sortable:
!1,filterable:!0,width:t.Creator,cssClass:"navigationColumn"},{name:DataLab.LocalizedResources.
experimentGridHeaderStatus,field:"StatusCode",sortable:!1,filterable:!0,width:t.
Status,cssClass:"navigationColumn"},{name:DataLab.LocalizedResources.experimentGridHeaderSaveTime,
field:"CreationTime",formatter:DataLab.Util.formatDate,sortable:!1,filterable:!1,
width:t.Date,cssClass:"navigationColumn"},],data:this._data,selectable:!1,multiselect:
!1,resizable:!0,noRows:DataLab.LocalizedResources.recentWorkNoRows,pagerOptions:
{pageSize:r.MAXRESULTS}});h.on("click",".navigationColumn",function(t){var r=$(t.
target).closest("tr").view().data,i;r.rowMetadata&&(i=r.rowMetadata.dataItem.ExperimentId,
DataLab.Log.customEvent({key:c._logEventTag,type:"OpeningExperiment",experimentID:
i}),n.navigateToExperiment(i))})}return __extends(e,i),e.prototype.update=function(
n){$.observable(this._data).refresh(n.map(function(n){return{ExperimentId:n.ExperimentId,
Description:n.Description,Creator:n.Creator,CreationTime:n.Status.CreationTime,StatusCode:
n.Status.StatusCode,etag:n.Etag}}))},e}(DataLab.Util.Disposable),h=function(i){function e(
e,o){var c=this,s,h;i.call(this);this._logEventTag="lastRun";this._data=[];s=u(f,
function(n){DataLab.Log.featureUsage({featureID:33,groupID:0,experimentID:n&&n.ExperimentId});
o()&&n===o().dataItem||o({dataItem:n,Type:0})},"button");h=e.wazDataGrid({columns:
[{name:DataLab.LocalizedResources.recentWorkPreview,formatter:s,sortable:!1,filterable:
!1,width:t.Button,cssClass:"buttonColumn"},{name:DataLab.LocalizedResources.experimentGridHeaderName,
field:"Description",sortable:!1,filterable:!0,cssClass:"navigationColumn"},{name:
DataLab.LocalizedResources.experimentGridHeaderCreator,field:"Creator",sortable:
!1,filterable:!0,width:t.Creator,cssClass:"navigationColumn"},{name:DataLab.LocalizedResources.
experimentGridHeaderStatus,field:"StatusCode",sortable:!1,filterable:!0,width:t.
Status,cssClass:"navigationColumn"},{name:DataLab.LocalizedResources.experimentGridHeaderStartTime,
field:"StartTime",formatter:DataLab.Util.formatDate,sortable:!1,filterable:!1,width:
t.Date,cssClass:"navigationColumn"},{name:DataLab.LocalizedResources.experimentGridHeaderEndTime,
field:"EndTime",formatter:DataLab.Util.formatDate,sortable:!1,filterable:!1,width:
t.Date,cssClass:"navigationColumn"},],data:this._data,selectable:!1,multiselect:
!1,resizable:!0,noRows:DataLab.LocalizedResources.recentWorkNoRows,pagerOptions:
{pageSize:r.MAXRESULTS}});h.on("click",".navigationColumn",function(t){var r=$(t.
target).closest("tr").view().data,i;r.rowMetadata&&(i=r.rowMetadata.dataItem.ExperimentId,
DataLab.Log.customEvent({key:c._logEventTag,type:"OpeningExperiment",experimentID:
i}),n.navigateToExperiment(i))})}return __extends(e,i),e.prototype.update=function(
n){$.observable(this._data).refresh(n.map(function(n){return{ExperimentId:n.ExperimentId,
Description:n.Description,Creator:n.Creator,StartTime:n.Status.StartTime,EndTime:
n.Status.EndTime,StatusCode:n.Status.StatusCode,etag:n.Etag}}))},e}(DataLab.Util.
Disposable),c=function(i){function e(e,o){var c=this,s,h;i.call(this);this._logEventTag=
"lastPublished";this._data=[];s=u(f,function(n){DataLab.Log.featureUsage({featureID:
34,groupID:0,experimentID:n&&n.Id});o()&&n===o().dataItem||o({dataItem:n,Type:1})}
,"button");h=e.wazDataGrid({columns:[{name:DataLab.LocalizedResources.recentWorkPreview,
formatter:s,sortable:!1,filterable:!1,width:t.Button,cssClass:"buttonColumn"},{name:
DataLab.LocalizedResources.recentWorkLastPublishedHeaderName,field:"Name",sortable:
!1,filterable:!0,cssClass:"navigationColumn"},{name:DataLab.LocalizedResources.recentWorkLastPublishedHeaderCreationTime,
field:"CreationTime",sortable:!1,filterable:!1,cssClass:"navigationColumn"},],data:
this._data,selectable:!1,multiselect:!1,resizable:!0,noRows:DataLab.LocalizedResources.
recentWorkNoRows,pagerOptions:{pageSize:r.MAXRESULTS}});h.on("click",".navigationColumn",
function(t){var r=$(t.target).closest("tr").view().data,i;r.rowMetadata&&(i=r.rowMetadata.
dataItem.Id,DataLab.Log.customEvent({key:c._logEventTag,type:"OpeningExperiment",
data:i}),n.navigateToWebService(i))})}return __extends(e,i),e.prototype.update=function(
n){$.observable(this._data).refresh(n.map(function(n){return{Id:n.Id,Name:n.Name,
CreationTime:DataLab.Util.formatDate(DataLab.Util.parseJsonDate(n.CreationTime))}}
))},e}(DataLab.Util.Disposable),o=function(n){function t(t,i){n.call(this);this.
classId="xe-surface";var r=new ExperimentEditor.ExperimentViewModel(t,i);this.registerForDisposal(
r);this.experimentViewModel=ko.observable(r)}return __extends(t,n),t}(DataLab.Util.
Disposable);n.ExperimentThumbnail=o;r=function(t){function r(n,u){var f=this,e,o,
l,a,w;t.call(this);this.renderThumbnail=!0;this.loading=ko.observable(!1);this._renderArea=
n.get(0);this._experiments=ko.observable([]);this._webServiceGroups=ko.observable(
[]);this._workspace=u;this.thumbnail=ko.observable();this._selectedItem=ko.observable(
);this.thumbnailSize=ko.observable("normal");this.registerForDisposal(new DataLab.
Util.DisposableSetHTML(this._renderArea,ExperimentEditorTemplates._editorSurfaceMarkup+
ExperimentEditorTemplates._recentWorkMarkup));this.setupFilterSelector();this.setupThumbnailSizeSelector(
n);var v=ko.computed(function(){return $.grep(f._experiments()||[],function(n){var
t=n.ExperimentId.split(".")[0];return t===u.id},!1)}),y=ko.computed(function(){return v(
).slice(0).sort(r._compareEditDate)}),p=new s(n.find(r.LASTEDITCONTAINER),this._selectedItem);
this.registerForDisposal(p);y.subscribe(function(n){p.update(n)});e=ko.computed(
function(){return $.grep(v(),function(n){return n.Status.StatusCode!=DataLab.DataContract.
State.InDraft&&n.Status.StatusCode!=DataLab.DataContract.State.NotStarted},!1).sort(
r._compareRunDate)});o=new h(n.find(r.LASTRUNCONTAINER),this._selectedItem);this.
registerForDisposal(o);e.subscribe(function(n){o.update(n)});l=ko.computed(function(
){return f._webServiceGroups()&&f._webServiceGroups().slice(0).sort(r._comparePublishDate)||
[]});a=new c(n.find(r.LASTPUBLISHEDCONTAINER),this._selectedItem);this.registerForDisposal(
a);l.subscribe(function(n){a.update(n)});ko.computed(function(){f._workspace.applicationCache.
allPrefetched()&&f._selectedItem()&&f._renderThumbnail(f._selectedItem,f.thumbnail,
n.find(r.THUMBNAIL))});this.thumbnailTitle=ko.computed(function(){var n=f._selectedItem(
);if(n){if(n.Type===0)return n.dataItem.Description;if(n.Type===1)return n.dataItem.
Name}return null});w=ko.computed(function(){var n=[],t=0;switch(f.selectedFilter(
)){case i.LastModified:n=y();break;case i.LastRun:n=e();break;case i.LastPublished:
n=l();t=1}n[0]&&f._selectedItem({dataItem:n[0],Type:t})},this,{disposeWhen:function(
){return f._selectedItem()}});this.registerForDisposal(new DataLab.Util.DisposableKOApplyBindings(
this,this._renderArea));cdm.setActiveItem(this)}return __extends(r,t),r.prototype.
thumbnailOnClick=function(){var t=this._selectedItem();if(t)switch(t.Type){case 0:
n.navigateToExperiment(t.dataItem.ExperimentId);break;case 1:n.navigateToWebService(
t.dataItem.Id);break;default:DataLab.Log.customEvent({key:"RecentWork",type:"Unknown GridItemType",
data:t.Type})}},r.prototype.refreshFromService=function(){var t=this;Shell.UI.Spinner.
show();var i=DataLab.Util.then(this._workspace.listExperimentsAsync({includeNonLeaf:
!1,includeArchived:!1}),function(i){cdm.currentActiveItem instanceof n.RecentWorkView&&
t._experiments(i)}),r=DataLab.Util.then(this._workspace.listWebServiceGroupsAsync(
),function(i){cdm.currentActiveItem instanceof n.RecentWorkView&&t._webServiceGroups(
i)});$.when(i,r).fail(function(){DataLab.Log.customEvent({key:"RecentWork",type:
"LoadingExperimentsFailed",workspaceID:t._workspace.id});var n=new Shell.UI.Notifications.
Notification(DataLab.LocalizedResources.recentWorkListExperimentsFailure,"error");
n.setActions([new Shell.UI.Notifications.Buttons.close(function(){Shell.UI.Notifications.
remove(n)})]);Shell.UI.Notifications.add(n)}).always(function(){cdm.currentActiveItem
instanceof n.RecentWorkView&&(Shell.UI.Spinner.hide(),DataLab.Performance.intervalEnd(
))})},r.prototype._isGlobalWorkspaceId=function(n){return n&&n!==this._workspace.
id},r._compareEditDate=function(n,t){return n.Status.CreationTime>t.Status.CreationTime?
-1:n.Status.CreationTime<t.Status.CreationTime?1:0},r._compareRunDate=function(n,
t){return n.Status.StartTime>t.Status.StartTime?-1:n.Status.StartTime<t.Status.StartTime?
1:0},r._comparePublishDate=function(n,t){return n.CreationTime>t.CreationTime?-1:
n.CreationTime<t.CreationTime?1:0},r._fitSvg=function(n){var i=5,r,u,t,f;n&&(r=n.
find("svg"),u=r.find("g"),u.length>0&&(t=u[0].getBBox(),f=(t.x-i).toString()+" "+
(t.y-i)+" "+(t.width+2*i)+" "+(t.height+2*i),r[0].setAttribute("viewBox",f)))},r.
prototype._getExperimentIdAsync=function(n){var t=$.Deferred();if(n)switch(n.Type)
{case 0:t.resolve(n.dataItem.ExperimentId);break;case 1:DataLab.Util.then(this._workspace.
getWebServiceGroupAsync(n.dataItem.Id),function(n){n.ModelPackages.length>0?t.resolve(
n.ModelPackages[0].LinkedExperimentId):t.reject()},function(){return t.reject()}
);break;default:DataLab.Log.customEvent({key:"RecentWork",type:"Unknown GridItemType",
data:n.Type});t.reject()}else t.reject();return t.promise()},r.prototype._renderThumbnail=
function(n,t,i){var u=this,f=n(),e,s;f&&(this.loading(!0),e=function(){u.loading(
!1)},s=DataLab.Util.then(this._getExperimentIdAsync(f),this._workspace.getExperimentAsync.
bind(this._workspace),e),DataLab.Util.then(s,function(e){var h,s;cdm.currentActiveItem
instanceof r&&n()===f&&(h=new o(e,u._workspace),u.registerForDisposal(h),s=t(),t(
h),r._fitSvg(i),u.loading(!1),s&&(s.dispose(),s=null))},e))},r.prototype.setupFilterSelector=
function(){var r=this,n=[{text:DataLab.LocalizedResources.recentWorkLastEditedLabel,
value:i.LastModified},{text:DataLab.LocalizedResources.recentWorkLastRunLabel,value:
i.LastRun},{text:DataLab.LocalizedResources.recentWorkLastPublishedLabel,value:i.
LastPublished}],t=n[0],u=function(n,t){DataLab.Log.customEvent({key:"RecentWork",
type:"ExperimentFilterChanged",data:t.value.value});$("#filterSelector").fxRadio(
"setOriginalValue");r.selectedFilter(t.value.value)};$("#filterSelector").fxRadio(
{values:n,value:t,change:u});this.selectedFilter=ko.observable(t.value)},r.prototype.
setupThumbnailSizeSelector=function(n){var u=this,t=[{text:DataLab.LocalizedResources.
recentWorkSizeNormal,value:"sizeNormal"},{text:DataLab.LocalizedResources.recentWorkSizeBig,
value:"sizeBig"}],i=t[0],f=function(t,i){DataLab.Log.featureUsage({featureID:35,
groupID:0,data:i.value.value});$("#thumbnailSizeSelector").fxRadio("setOriginalValue");
u.thumbnailSize(i.value.value);r._fitSvg(n.find(r.THUMBNAIL))};$("#thumbnailSizeSelector").
fxRadio({values:t,value:i,change:f});this.thumbnailSize(i.value)},r.MAXRESULTS=12,
r.LASTEDITCONTAINER="#gridLastEdited",r.LASTRUNCONTAINER="#gridLastRun",r.LASTPUBLISHEDCONTAINER=
"#gridLastPublished",r.THUMBNAIL="#thumbnail",r}(DataLab.Util.Disposable);n.RecentWorkView=
r}(DataLabViews||(DataLabViews={}));__extends=this.__extends||function(n,t){function r(
){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=
t.prototype;n.prototype=new r},function(n){var t;(function(t){function v(n){return n?
n.substr(n.lastIndexOf("/")+1):""}function w(n,t,i){return y(DataLab.Workspace,DataLab.
Workspace.friendlyName,n,t,i)}function y(n,t,i,r,u,f,e,o){Shell.UI.Spinner.show(
);var s=p(n,t,i,r,u,f,o);return DataLab.Util.then(s,function(t){if(t)typeof n=="string"&&
n.toLowerCase()!==DataLab.Workspace.id.toLowerCase()?DataLabViews.navigateToExperiment(
t.ExperimentId,n,e):DataLabViews.navigateToExperiment(t.ExperimentId);else{var i=
new Shell.UI.Notifications.Notification(DataLab.Util.format(DataLab.LocalizedResources.
newExperimentMenuCannotOpen,r),"error");i.setActions([Shell.UI.Notifications.Buttons.
close()]);Shell.UI.Notifications.add(i);DataLab.Log.error("Open gallery experiment failed with return value null. "+
r);Shell.UI.Spinner.hide()}}).fail(function(){var n=new Shell.UI.Notifications.Notification(
DataLab.Util.format(DataLab.LocalizedResources.newExperimentMenuOpenCallFailed,r),
"error");n.setActions([Shell.UI.Notifications.Buttons.close()]);Shell.UI.Notifications.
add(n);DataLab.Log.error("Call to open gallery experiment failed. "+r);Shell.UI.
Spinner.hide()}).always(Shell.UI.Spinner.hide)}function b(n){return typeof n=="string"?
n:n.id}function k(r,u,f){f===void 0&&(f=null);var e=DataLab.Workspace,o=DataLab.
Util.then(e.startGetCommunityNotebookIdAsync(e.id,r,u,f),function(t){return n.Packages.
pollOnNotebookUnpack(t)});return f&&o.done(function(){new i(t.activityServiceUrl).
download(f,"","")}),DataLab.Util.then(o,function(n){return n.NotebookId})}function p(
r,u,f,e,o,s,h){var l,c,a,p=b(r),w=o?o:v(e),d=function(){if(w){var n=new i(t.activityServiceUrl);
n.download(w,"","")}},k,y;return s?(DataLab.Log.featureUsage({featureID:146,groupID:
0}),c=cdm.getActiveItem()._client,k=c.startGetCompetitionExperimentIdFromCommunityAsync.
bind(c),l=DataLab.Util.then(k(p,f,e,s,h),function(t){return n.Packages.pollOnUnpack(
t)})):(typeof r=="string"?(c=cdm.getActiveItem()._client,a=c.startGetCommunityExperimentIdAsync.
bind(c)):(y=r,a=y.startGetCommunityExperimentIdAsync.bind(y)),l=DataLab.Util.then(
a(p,f,e),function(t){return n.Packages.pollOnUnpack(t)})),l.done(d),l}var r,e,u,
o,s,f,h,c,l,a,i;t.galleryBaseUrl="";t.catalogSearchBaseUri="";t.catalogQueryBaseUri=
"";t.msftAuthorId="";t.notebookSamplesCollectionId="";r=function(){function n(n,
t){this.total_count=n;this.value=t}return n}();t.CatalogQueryByFilterResult=r;e=
function(){function n(){}return n}();t.CatalogEntityObject=e;u=function(){function n(
n,t){this.total_count=n;this.value=t}return n.convertToCatalogQueryByFilterResult=
function(n){return new r(n.total_count,_.map(n.value,function(n){return n.entity}
))},n}();t.CatalogQueryByCollectionResult=u;o=function(){function n(){}return n}
();t.Author=o;s=function(){function n(){}return n}();t.Content=s;f=function(){function n(
){}return n.CatalogExperimentSampleSortFunction=function(t,i){if(t.id===i.id)return 0;
if(n.numberedSampleRegEx.test(t.name)&&!n.numberedSampleRegEx.test(i.name))return-1;
if(!n.numberedSampleRegEx.test(t.name)&&n.numberedSampleRegEx.test(i.name))return 1;
if(n.numberedSampleRegEx.test(t.name)&&n.numberedSampleRegEx.test(i.name)){var r=
t.name.match(n.numberedSampleRegEx)[2],u=i.name.match(n.numberedSampleRegEx)[2];
return r===u?0:r<u?-1:1}return t.name===i.name?0:t.name<i.name?-1:1},n.numberedSampleRegEx=
/^(Sample|Tutorial) ([1-9][0-9]*):.*/,n}();t.CatalogEntity=f;h=function(n){function t(
){n.apply(this,arguments)}return __extends(t,n),t}(f);t.CatalogNotebook=h;c=function(
){function n(){}return n.queryCatalogByFilter=function(i){i===void 0&&(i=null);var
r=this.callCatalog(this.constructCatalogQueryUrl("experiment",t.catalogQueryBaseUri,
null,i));return r.done(function(r){return n.validateCatalogResult(r,{baseUri:t.catalogQueryBaseUri,
filter:i})}),r},n.queryCatalogById=function(n){return n===void 0&&(n=null),this.
callCatalog(this.constructCatalogQueryUrl("experiment",t.catalogQueryBaseUri,n))}
,n.searchCatalog=function(n){return n===void 0&&(n=null),this.callCatalog(this.constructCatalogQueryUrl(
"experiment",t.catalogSearchBaseUri,null,n))},n.queryCatalogEntityById=function(
n,i){return this.callCatalog(this.constructCatalogQueryUrl(n,t.catalogQueryBaseUri,
i))},n.queryCatalogEntities=function(i,r){r===void 0&&(r=null);var u=this.constructCatalogQueryUrl(
i,t.catalogQueryBaseUri,null,r),f=this.callCatalog(u);return f.done(function(i){
return n.validateCatalogResult(i,{baseUri:t.catalogQueryBaseUri,url:u})}),f},n.queryCatalogCollection=
function(i,r){r===void 0&&(r=null);var f=this.constructCatalogCollectionsUrl(i,t.
catalogQueryBaseUri,r),e=DataLab.Util.then(this.callCatalog(f),function(n){return u.
convertToCatalogQueryByFilterResult(n)});return e.done(function(i){return n.validateCatalogResult(
i,{baseUri:t.catalogQueryBaseUri,url:f})}),e},n.constructCatalogQueryUrl=function(
n,t,i,r){i===void 0&&(i=null);r===void 0&&(r=null);var u=t+"/"+this._getPathSegement(
n);return u=i?u+"/"+i:u,r?u+"?"+r:u},n.constructCatalogCollectionsUrl=function(n,
i,r){var u,f;if(r===void 0&&(r=null),u=r,f="",!u)switch(n){case"experiment":throw new
Error("querying catalog collections for Experiments is not yet enabled");case"notebook":
u=t.notebookSamplesCollectionId;f="items";break;default:throw new Error("catalog entity type not recognized: "+
String(n));}return i+"/Collections/"+u+"/"+f},n.callCatalog=function(n){var t=jQuery.
Deferred();return $.ajax({type:"get",url:n}).done(function(n){t.resolve(n)}).fail(
function(){t.reject()}),DataLab.Util.when(t.promise())},n.validateCatalogResult=
function(n,t){t===void 0&&(t=null);n.total_count!=null&&n.value instanceof Array||
DataLab.Log.error("invalid catalog query result received","validateCatalogResult",
JSON.stringify(t))},n._getPathSegement=function(n){switch(n){case"experiment":return"experiments"
case"notebook":return"notebooks";default:throw new Error("catalog entity type not recognized: "+
String(n));}},n}();t.GalleryQueryUtil=c,function(n){n[n.Unknown=0]="Unknown";n[n.
View=1]="View";n[n.Publish=2]="Publish";n[n.Comment=3]="Comment";n[n.Open=4]="Open";
n[n.Clone=5]="Clone";n[n.Share=6]="Share"}(l||(l={}));a=function(){function n(){}
return n}();t.activityServiceUrl="";t.multiGeoRegion="";t.multiGeoRegionsList=[];
i=function(){function n(n){this.activityServiceUrl=n}return n.prototype.view=function(
n,t,i){this.postActivity(n,t,i,1)},n.prototype.download=function(n,t,i){this.postActivity(
n,t,i,4)},n.prototype.publish=function(n,t,i){this.postActivity(n,t,i,2)},n.prototype.
comment=function(n,t,i){this.postActivity(n,t,i,3)},n.prototype.open=function(n,
t,i){this.postActivity(n,t,i,4)},n.prototype.clone=function(n,t,i){this.postActivity(
n,t,i,5)},n.prototype.share=function(n,t,i){this.postActivity(n,t,i,6)},n.prototype.
postActivity=function(n,t,i,r){var u=new a;u.EntityId=n;u.UserId=t;u.Context=i;u.
ActivityType=r;$.ajax(this.activityServiceUrl+"/Add",{data:JSON.stringify(u),contentType:
"application/json",type:"POST"})},n}();t.UserActivityClient=i;t.getEntityIdFromCommunityUri=
v;t.copyCommunityExperimentToThisWorkspaceAndNavigateToExperiment=w;t.copyCommunityExperimentToWorkspaceAndNavigateToExperiment=
y;t.copyGalleryNotebook=k;t.copyCommunityExperiment=p})(t=n.Community||(n.Community=
{}))}(ExperimentEditor||(ExperimentEditor={})),function(n){var t=function(){function n(
){}return n.getUserWorkspaces=function(){return n.userWorkspacesPromise?n.userWorkspacesPromise:
(n.userWorkspacesPromise=DataLab.Util.then(DataLab.Workspace.listWorkspacesAsync(
),function(n){return n.sort(function(n,t){return n.FriendlyName.localeCompare(t.
FriendlyName)})}),n.userWorkspacesPromise)},n.getUserWorkspacesFromRegion=function(
n){return DataLab.Util.then(DataLab.Workspace.listUserWorkspacesAsync(n),function(
n){return n.sort(function(n,t){return n.FriendlyName.localeCompare(t.FriendlyName)}
)})},n}();n.UserWorkspacesHelper=t}(ExperimentEditor||(ExperimentEditor={}));__extends=
this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(
i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(
n){function t(){n.call(this);this._numberOfUsers=0;this._disposed=!1}return __extends(
t,n),t.create=function(n){var i=new t;return n.registerForDisposal(i),i},t.prototype.
dispose=function(){this._numberOfUsers>0&&!this._disposed&&Shell.UI.Spinner.hide(
);this._disposed=!0;n.prototype.dispose.call(this)},t.prototype.showFor=function(
n){var t=this;this._disposed||n.state()==="pending"&&(this.start(),n.always(function(
){t.end()}))},t.prototype.start=function(){this._disposed||(this._numberOfUsers+=
1,this._numberOfUsers===1&&Shell.UI.Spinner.show())},t.prototype.end=function(){
this._disposed||(this._numberOfUsers-=1,this._numberOfUsers===0&&Shell.UI.Spinner.
hide())},t}(DataLab.Util.Disposable);n.SharedSpinner=t}(ExperimentEditor||(ExperimentEditor=
{})),function(n){function f(i,r,u,f,e,o,s,h){DataLab.Log.featureUsage({featureID:
105,groupID:0,data:JSON.stringify({packageUri:u,communityUri:f,destinationWorkspaceId:
e.WorkspaceId,locationUri:s,entityType:i})});switch(i){case t.Notebook:Shell.UI.
Spinner.show();var l=n.Community.copyGalleryNotebook(u,f,r),c=DataLab.Util.then(
l,function(t){return n.NotebookHelpers.openNotebookById(t,window)});return c.always(
function(){Shell.UI.Spinner.hide()}).fail(function(){DataLab.Util.showErrorNotification(
{title:DataLab.Util.format(DataLab.LocalizedResources.newNotebookMenuOpenCallFailed,
f)});DataLab.Log.error("Call to open gallery notebook failed. "+f)}),c;case t.Experiment:
return n.Community.copyCommunityExperimentToWorkspaceAndNavigateToExperiment(e.WorkspaceId,
e.FriendlyName,u,f,null,o,s,h);default:DataLab.Log.error("unsupported gallery entity type",
"copyGalleryEntity",JSON.stringify({entityType:i,galleryUri:f}));throw new Error(
"unsupported gallery entity type");}}var t=DataLab.Constants.GalleryEntityTypes,
i=function(){function n(n,t){this.workspace=n;this.displayName=t;this.displayName||
(this.displayName=n.FriendlyName)}return n}(),r,u,e;n.WorkspaceWithDisplayName=i;
r=function(){function n(n){var t=n.split(";");this.location=t[0];this.uri=t[1]}return n}
();n.LocationWithDisplayName=r;u=function(){function t(){var t=this;this.updateWorkspaceList=
function(){t.loadingWorkspaces(!0);t.workspaces([]);var i=DataLab.Features.multiGeoNavigationEnabled(
)?n.UserWorkspacesHelper.getUserWorkspacesFromRegion(t.selectedLocation().location):
n.UserWorkspacesHelper.getUserWorkspaces();i.done(function(n){t.appendWorkspacesToList(
n)}).fail(function(){}).always(function(){t.loadingWorkspaces(!1)})};this.appendWorkspacesToList=
function(n){n.forEach(function(r){var e=r.WorkspaceId===DataLab.Workspace.id,u,f;
u=n.length>1&&e?DataLab.Util.format(DataLab.LocalizedResources.workspaceWithCurrentLabel,
r.FriendlyName):r.FriendlyName;e?(f=new i(r,u),t.workspaces.push(f),t.destinationWorkspace(
f)):t.workspaces.push(new i(r,u))})};this.workspaces=ko.observableArray([]);this.
selectedLocation=ko.observable({location:null,uri:null});this.locations=null;this.
loadingWorkspaces=ko.observable(!1);this.locations=ko.observableArray(n.Community.
multiGeoRegionsList.map(function(n){return new r(n)}));this.selectedLocation=ko.
observable(this.locations().filter(function(t){return t.location===n.Community.multiGeoRegion}
)[0]);this.updateWorkspaceList();this.workspaceInfoAvailable=ko.computed(function(
){return t.workspaces().length>0});this.destinationWorkspace=ko.observable(null);
this.selectedLocation.subscribe(function(){t.updateWorkspaceList()})}return t}();
n.WorkspaceSelectorViewModel=u;n.copyGalleryEntity=f;e=function(){function i(n,i,
r,f){this.packageUri=r;this.communityUri=f;this._entityType=n;this._entityId=i;this.
title=n===t.Notebook?DataLab.LocalizedResources.copyNotebookFromGalleryConfirmationTitle:
DataLab.LocalizedResources.copyExperimentFromGalleryConfirmationTitle;this.workspaceSelector=
new u;this.competitionUri=null;this.competitionTenantId=null}return i.prototype.
dismissed=function(t){var i=this.workspaceSelector.selectedLocation(),r=this.workspaceSelector.
destinationWorkspace();if(t.accepted){var u=DataLab.Features.multiGeoNavigationEnabled(
)&&i.location!==n.Community.multiGeoRegion,e=r.workspace.WorkspaceId.toLowerCase(
)!==DataLab.Workspace.id.toLowerCase(),o=this._entityType===DataLab.Constants.GalleryEntityTypes.
Notebook;u||o&&e?window.location.href=i.uri+"/Home/ViewWorkspace/"+r.workspace.WorkspaceId+
DataLab.Util.format("?unpackConfirmation=false&packageUri={0}&communityUri={1}&competitionUri={2}&competitionTenantId={3}&entityType={4}&entityId={5}",
encodeURIComponent(this.packageUri),encodeURIComponent(this.communityUri),encodeURIComponent(
this.competitionUri),encodeURIComponent(this.competitionTenantId),encodeURIComponent(
this._entityType),encodeURIComponent(this._entityId)):f(this._entityType,this._entityId,
this.packageUri,this.communityUri,r.workspace,this.competitionUri,i.uri,this.competitionTenantId)}
else DataLab.Log.customEvent({key:"CopyExperimentFromGalleryDialogClosed",type:"AllExperimentsView"})}
,i.prototype.canBeAccepted=function(){return this.workspaceSelector.workspaceInfoAvailable(
)&&!this.workspaceSelector.loadingWorkspaces()},i}();n.CopyExperimentFromGalleryDialogViewModel=
e}(ExperimentEditor||(ExperimentEditor={})),function(n){function i(n){var t=$.Deferred(
);return n.done(function(n){t.resolve(n.storageUsedByDatasets)}).fail(function(n)
{t.reject(n)}),t.promise()}function r(n){var u=$.Deferred(),f,o,r,s=t.isPromise(
n)?n:$.Deferred().resolve(n).promise(),e;return s.done(function(n){e=n}),environment.
copyToWorkspaceDatasetStorageLimit>0?i(s).done(function(n){n>environment.copyToWorkspaceDatasetStorageLimit?
(u.reject(),f=t.format(DataLab.LocalizedResources.copyExperiment_LargeDataset_Title,
t.formatDataSize(environment.copyToWorkspaceDatasetStorageLimit)),r=new Shell.UI.
Notifications.Notification(f,"error"),r.setActions([Shell.UI.Notifications.Buttons.
close()]),Shell.UI.Notifications.add(r),DataLab.Log.customEvent({key:"CopyExperimentExceedsMaxDatasetStorage",
type:"CopyExperimentDialogViewModel",data:JSON.stringify({spaceUsed:n,experimentId:
e.experimentId()})})):u.resolve()}).fail(function(n){f=DataLab.Util.format(DataLab.
LocalizedResources.copyExperiment_ValidationFailure_Title);o=DataLab.Util.format(
DataLab.LocalizedResources.copyExperiment_ValidationFailure_Details,n.message);r=
new Shell.UI.Notifications.Notification(f,"error");r.setDetailsText(o);r.setActions(
[Shell.UI.Notifications.Buttons.close()]);Shell.UI.Notifications.add(r);DataLab.
Log.error("CopyExperimentValidationFailed","CopyExperimentDialogViewModel",JSON.
stringify({experimentId:e.experimentId(),message:n.message}));u.reject()}):u.resolve(
),u.promise()}var t=DataLab.Util,u=DataLab.Model;n.validateForCopyAsync=r}(ExperimentEditor||
(ExperimentEditor={})),function(n){function t(n){return n.WorkspaceId===DataLab.
Workspace.id}function i(n){return{FriendlyName:n.FriendlyName,WorkspaceId:n.WorkspaceId,
DisplayText:n.FriendlyName}}var u=DataLab.Model,r=function(){function r(r,u){var
f=this;u instanceof n.ExperimentEditorContainerViewModel?(this.xeViewModel=u,this.
experimentId=this.xeViewModel.experiment.experimentId()):(this.xeViewModel=null,
this.experimentId=u);this.experimentName=DataLab.Validation.validatableObservable(
r,function(n){return/\S/.test(n)?null:DataLab.LocalizedResources.experimentNameError}
);this.experimentName.subscribe(function(){f.experimentName.startValidating();f.
experimentName.validate()});this.workspaceOptions=ko.observableArray([]);this.acceptAction=
this._copyExperimentToDifferentWorkspace;n.UserWorkspacesHelper.getUserWorkspaces(
).done(function(n){n.map(i).forEach(function(n){t(n)||f.workspaceOptions.push(n)}
)}).fail(function(){});this.workspaceInfoAvailable=ko.computed(function(){return f.
workspaceOptions().length>0});this.destinationWorkspace=ko.observable(null);this.
validatedFields=[this.experimentName]}return r.prototype.canBeAccepted=function(
){return this.validatedFields.forEach(function(n){return n.startValidating()}),this.
workspaceInfoAvailable()&&this.validatedFields.every(function(n){return n.isValid(
)})},r.prototype.dismissed=function(n){n.accepted?(DataLab.Log.customEvent({key:
"CopyExperimentStarted",type:"CopyExperiment",data:JSON.stringify({experimentId:
this.experimentId,experimentName:this.experimentName(),destinationWorkspaceId:this.
destinationWorkspace().WorkspaceId})}),DataLab.Log.featureUsage({featureID:81,groupID:
3,data:JSON.stringify({experimentId:this.experimentId,experimentName:this.experimentName,
destinationWorkspaceId:this.destinationWorkspace().WorkspaceId})}),this.acceptAction(
)):DataLab.Log.customEvent({key:"CopyExperimentDialogClosed",type:"AllExperimentsView"})}
,r.prototype._copyExperimentToDifferentWorkspace=function(){var t=this,i=new Shell.
UI.Notifications.Progress(DataLab.Util.format(DataLab.LocalizedResources.copyExperimentDialogCopyExperimentStarted,
this.experimentName(),this.destinationWorkspace().FriendlyName),"active",!1),r;Shell.
UI.Notifications.add(i);i.setValue(10);r=this.xeViewModel?this.xeViewModel.save(
).done(function(){t.experimentId=t.xeViewModel.experiment.experimentId()}).fail(
function(t){DataLab.Features.trialLimitationsEnabled()&&n.tryShowDialogForTrialRestriction(
t)}):$.Deferred().resolve().promise();var u=DataLab.Util.then(r,function(){return DataLab.
Workspace.createExperimentStoragePackageAsync(t.experimentId,!0,t.experimentName(
))}),f=DataLab.Util.then(u,function(n){return t.pollOnPackage(n,i)}),e=DataLab.Util.
then(f,function(n){return DataLab.Workspace.createExperimentFromStoragePackageAsync(
t.destinationWorkspace().WorkspaceId,n.Location)}),o=DataLab.Util.then(e,function(
t){return n.Packages.pollOnUnpack(t)});o.done(function(n){i.setValue(100);var u=
"/Home/ViewWorkspace/"+t.destinationWorkspace().WorkspaceId,f=Shell.UI.Navigation.
calculateNavigationPath({extension:DataLabViews.experimentExtensionName,type:"Experiment",
name:n.ExperimentId,view:"ViewExperiment"}),r=u+f;i.setTitle(DataLab.Util.format(
DataLab.LocalizedResources.copyExperimentDialogCopyExperimentSucceeded,t.experimentName(
),t.destinationWorkspace().FriendlyName));i.setActions([{text:DataLab.LocalizedResources.
copyExperimentDialogLinkToCopy,class_:"dlwux-icon-behavior-arrow-link",click:function(
){window.location.href=r}},Shell.UI.Notifications.Buttons.close(function(){})]);
i.setStatus("success");DataLab.Log.customEvent({key:"CopyExperimentSucceeded",type:
"CopyExperiment",data:JSON.stringify({experimentId:t.experimentId,experimentName:
t.experimentName(),destinationWorkspaceId:t.destinationWorkspace().WorkspaceId,destinationURL:
r})})}).fail(function(n){i.setTitle(DataLab.Util.format(DataLab.LocalizedResources.
copyExperimentDialogCopyExperimentFailed,t.experimentName(),t.destinationWorkspace(
).FriendlyName,n.message));i.setActions([Shell.UI.Notifications.Buttons.close(function(
){})]);i.setStatus("error");DataLab.Log.customEvent({key:"CopyExperimentFailed",
type:"CopyExperiment",data:JSON.stringify({experimentId:t.experimentId,experimentName:
t.experimentName(),destinationWorkspaceId:t.destinationWorkspace().WorkspaceId})})}
)},r.prototype.pollOnPackage=function(n,t){var i=$.Deferred();return this.pollOnPackageHandler(
n,0,i,t),DataLab.Util.when(i.promise())},r.prototype.pollOnPackageHandler=function(
n,t,i,r){var u=this;DataLab.Workspace.getExperimentStoragePackageAsync(n.ActivityId).
done(function(n){var e=n.ItemsComplete===0?0:n.ItemsComplete/(n.ItemsComplete+n.
ItemsPending)*80,f;r.setValue(10+Math.floor(e));n.Status==="Pending"?(t>16&&i.reject(
new Error("Exceeded retry count")),f=Math.pow(2,t)*50,setTimeout(function(){u.pollOnPackageHandler(
n,t+1,i,r)},f)):n.Status==="Complete"?i.resolve(n):i.reject(new Error("Unknown status returned for package"))}
).fail(function(n){return i.reject(n)})},r}();n.CopyExperimentDialogViewModel=r;
n.isCurrentWorkspace=t;n.createWorkspaceOption=i}(ExperimentEditor||(ExperimentEditor=
{})),function(n){function t(n,t){t===void 0&&(t=!1);var i=$("<ol />");return n.forEach(
function(n){var r=$("<span />").text(n.name),u;t&&(u=$("<a />",{href:n.urlHash}).
text(DataLab.LocalizedResources.link),r.append(" [").append(u).append("]"));i.append(
$("<li />").append(r))}),i}n.createListOfDependants=t}(DataLabViews||(DataLabViews=
{}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){function r(){Shell.UI.Navigation.navigate({extension:n.experimentExtensionName,
type:"ListExperiments",name:""})}var t=DataLab.Constants.GalleryEntityTypes,i;n.
azureMLDomainSuffix="";i=function(i){function r(t,u,f,e,o){var s=this,h,c;o===void
0&&(o=!1);i.call(this);this.renderThumbnail=!0;this._renderArea=t;this._data=[];
this.listedExperiments=[];this._workspace=u;this._client=f;this._userName=e;this.
_samplesOnly=o;this.selectedItems=ko.observableArray([]);this.itemsSelectedMessage=
ko.computed(function(){return DataLab.Util.format(DataLab.LocalizedResources.experimentListItemsSelectedMessage,
s.selectedItems().length.toString())});this.pageLoaded=ko.observable(!1);this._sharedSpinner=
ExperimentEditor.SharedSpinner.create(this);this.registerForDisposal(new DataLab.
Util.DisposableSetHTML(this._renderArea.get(0),ExperimentEditorTemplates._editorSurfaceMarkup+
ExperimentEditorTemplates._allExperimentsMarkup));this.formatCheckbox=function(n,
t){var i=t.rowMetadata.dataItem.ExperimentId.split(".")[0]===s._workspace.id;return i?
"<input type='checkbox' class='rowCheckbox' />":"<input type='checkbox' class='rowCheckbox' disabled='true' />"}
;h=[{name:"<div class='icon'><\/div>",field:"Tags",formatter:r.formatExperimentSource,
width:r._GRID_COLUMN_WIDTHS.Source,cssClass:"iconColumn"},{name:DataLab.LocalizedResources.
experimentGridHeaderName,field:"Description",sorted:o?"ascending":undefined,type:
"navigationLink",navigationField:"ExperimentId",width:r._GRID_COLUMN_WIDTHS.Description},
{name:DataLab.LocalizedResources.experimentGridHeaderCreator,field:"Creator",width:
r._GRID_COLUMN_WIDTHS.Creator},{name:DataLab.LocalizedResources.experimentGridHeaderStatus,
field:"StatusCode",formatter:n.formatExperimentStatusCode,width:r._GRID_COLUMN_WIDTHS.
Status},{name:DataLab.LocalizedResources.experimentGridHeaderModificationTime,field:
"CreationTime",formatter:DataLab.Util.formatDate,sorted:o?undefined:"descending",
sortFormatter:n.dateTimeSortFormatter,width:r._GRID_COLUMN_WIDTHS.Date}];o||(c={
name:"",field:"Checkbox",formatter:this.formatCheckbox,cssClass:"checkboxColumn",
sortable:!1,filterable:!1,width:r._GRID_COLUMN_WIDTHS.Button},h=$.merge([c],h));
this._grid=null;this._gridOptions={columns:h,data:this._data,selectable:!0,selectFirstRowByDefault:
!0,multiselect:!1,resizable:!0,noRows:DataLab.LocalizedResources.allExperimentsNoRows,
rowSelect:function(n,t){return s.rowSelect(n,t)},pagerOptions:{pageSize:r._PAGE_SIZE},
filterQueryDelay:r._GRID_SEARCH_DELAY};this._selectedExperiment=ko.observable();
this.thumbnail=ko.observable();this.loading=ko.observable(!1);this.registerForDisposal(
new DataLab.Util.DisposableSubscription(this._selectedExperiment.subscribe(function(
n){s._previousSelectedExperiment=n},null,"beforeChange")));this.registerForDisposal(
new DataLab.Util.DisposableSubscription(this._selectedExperiment.subscribe(function(
t){if(t){if(t!==s._previousSelectedExperiment){DataLab.Log.featureUsage({featureID:
33,groupID:0,experimentID:t.ExperimentId});s.loading(!0);var i=function(){cdm.currentActiveItem===
s&&s.loading(!1)},r=t.Description;s._getSelectedExperimentPromise=DataLab.Util.whenTrue(
s._workspace.applicationCache.allPrefetched,s).pipe(function(){return s._workspace.
getExperimentAsync(t.ExperimentId)},i);s._getSelectedExperimentPromise.done(function(
i){if(cdm.currentActiveItem===s&&s._selectedExperiment()===t&&s._renderArea)try{
var r=new n.ExperimentThumbnail(i,s._workspace);s.registerForDisposal(r);s.thumbnail(
r);s.fitSvg()}catch(u){DataLab.Log.exception(u,"Preview of experiment failed","AllExperimentsView.constructor",
{id:t.ExperimentId})}}).fail(function(n){s._renderArea&&n instanceof DataLab.Util.
AjaxError&&n.xmlHttpRequest&&n.xmlHttpRequest.status===404&&s._handleMissingExperiment(
n,r)}).always(i)}}else s.thumbnail(null),s._getSelectedExperimentPromise=null;s.
_previousSelectedExperiment=null})));this.registerForDisposal(new DataLab.Util.DisposableKOApplyBindings(
this,this._renderArea.get(0)));cdm.setActiveItem(this);this.registerForDisposal(
new DataLab.Util.DisposableEventListener(window,"resize",function(){s.thumbnail(
)&&s.fitSvg()}))}return __extends(r,i),r.formatExperimentSource=function(n){var i=
"Unknown",t;return DataLab.Features.competitionExperimentSupportEnabled()&&n&&(t=
n.filter(function(n){return ExperimentEditor.ExperimentViewModel.CompetitionUrlTagSearchRegex.
test(n)}),t&&t.length>0&&(i="Competition")),"<div class='experiment-source iconColumn'><div class='icon "+
i+"'><\/div><\/div>"},r.prototype.refreshExperimentListFromService=function(){var
t=this,i=this._workspace.listExperimentsAsync({includeNonLeaf:!1,includeArchived:
!1});DataLab.Util.then(i,function(i){cdm.currentActiveItem instanceof n.AllExperimentsView&&
t._renderArea&&(DataLab.Performance.intervalEnd(),t._samplesOnly?(t.listedExperiments=
$.grep(i,function(n){return t._isGlobalWorkspaceId(n.ExperimentId.split(".")[0])}
,!1),t.listedExperiments=t.listedExperiments.filter(function(n){return n.Description===
DataLab.Constants.GuidedExperimentDescription?!1:!0})):t.listedExperiments=$.grep(
i,function(n){return t._isUserWorkspaceId(n.ExperimentId.split(".")[0])},!1),t._populateExperimentList(
t.listedExperiments),t._grid||(t.createGrid(t._gridOptions),t.pageLoaded(!0)))});
this._sharedSpinner.showFor(i)},r.prototype.refreshFromService=function(){this.refreshExperimentListFromService(
);this.handleExperimentUnpackIfNecessary()},r.prototype.handleExperimentUnpackIfNecessary=
function(){var l=this,w=window.location.href,a=DataLab.Util.getQueryParamValueAndRemoveIfPresent(
"unpackConfirmation"),r=DataLab.Util.getQueryParamValueAndRemoveIfPresent("packageUri"),
i=DataLab.Util.getQueryParamValueAndRemoveIfPresent("communityUri"),u=DataLab.Features.
competitionExperimentSupportEnabled()?DataLab.Util.getQueryParamValueAndRemoveIfPresent(
"competitionUri"):null,f=DataLab.Features.competitionExperimentSupportEnabled()?
DataLab.Util.getQueryParamValueAndRemoveIfPresent("competitionTenantId"):null,o=
DataLab.Util.getQueryParamValueAndRemoveIfPresent("entityId")||ExperimentEditor.
Community.getEntityIdFromCommunityUri(i),e=DataLab.Util.getQueryParamValueAndRemoveIfPresent(
"entityType")||t.Experiment,s,h,c;e=e.toLowerCase();var v=new RegExp(n.azureMLDomainSuffix+
"$"),y=$("<a>",{href:document.referrer})[0],p=y.hostname;if(r&&i){if(s=DataLab.Trial.
isWorkspaceTypeAnonymous()||a==="false"&&p.match(v),r=decodeURIComponent(r),i=decodeURIComponent(
i),u=u?decodeURIComponent(u):null,f=f?decodeURIComponent(f):null,e===t.Notebook&&
!DataLab.Features.jupyterNotebooksInGalleryEnabled()){DataLab.Log.error("opening gallery notebook with foof disabled");
return}s?(h=ExperimentEditor.copyGalleryEntity(e,o,r,i,{WorkspaceId:DataLab.Workspace.
id,FriendlyName:DataLab.Workspace.friendlyName},u,null,f),this._sharedSpinner.showFor(
h)):(window.__unpacking=!0,c=ExperimentEditor.UserWorkspacesHelper.getUserWorkspaces(
).done(function(){var n=new ExperimentEditor.CopyExperimentFromGalleryDialogViewModel(
e,o,r,i);n.competitionUri=u;n.competitionTenantId=f;DataLab.Log.customEvent({key:
"CopyExperimentFromGalleryDialogOpened",type:"AllExperimentsView",data:JSON.stringify(
l.selectedItems())});ExperimentEditor.DialogViews.CopyExperimentFromGallery.show(
n)}),this._sharedSpinner.showFor(c))}},r.prototype.setCommands=function(){var n=
this,t;!this._samplesOnly&&this._renderArea&&(this.deleteCommand=new Shell.UI.Commands.
Command(DataLab.LocalizedResources.deleteItem,Shell.UI.Icons["delete"],this.deleteConfirmation.
bind(this),null,!0),Shell.UI.Commands.add([this.deleteCommand]),DataLab.Features.
copyExperimentAcrossWorkspaceEnabled()&&(this.copyCommand=new Shell.UI.Commands.
Command(DataLab.LocalizedResources.copyExperimentCommandName,Shell.UI.Icons.copy,
this.copyDialog.bind(this),null,!0),t=this.copyCommand,ExperimentEditor.UserWorkspacesHelper.
getUserWorkspaces().done(function(i){i.length>1&&n.copyCommand===t&&(n.copyCommand.
setDisabled(n.selectedItems().length!==1),Shell.UI.Commands.add([n.copyCommand]))}
).fail(function(){})))},r.prototype.dispose=function(){this._renderArea=null;this.
_grid=null;i.prototype.dispose.call(this)},r.isDeleteBlockedByDependencies=function(
n){if(n.error instanceof DataLab.Util.AjaxError){var t=n.error;return t.xmlHttpRequest.
status===409}return!1},r.formatDeleteError=function(n){var t,i;return r.isDeleteBlockedByDependencies(
n)?DataLab.Util.format(DataLab.LocalizedResources.cantDeleteExperimentPartOfAWebService,
n.item.Description):(t=n.error.message,n.error instanceof DataLab.Util.AjaxError&&
(i=n.error.xmlHttpRequest.responseText,t=i||t),DataLab.Util.format(DataLab.LocalizedResources.
errorDeletingExperiment,n.item.Description,t))},r.prototype.createGrid=function(
n){var t=this;if(this._renderArea){this._grid=$(this._renderArea).find("#grid").
wazDataGrid(n);this._grid.on("click","tbody .checkboxColumn",function(){t._grid.
wazDataGrid("option","multiselect",!0)});this._grid.on("click",".waz-grid-navigation-link a",
function(n){var t=$(n.target).closest("tr").view().data,i;t.rowMetadata&&(i=t.rowMetadata.
dataItem.ExperimentId,DataLab.Log.customEvent({key:"experimentList",type:"OpeningExperiment",
experimentID:i}))})}},r.prototype.refreshFromLocal=function(n){this._populateExperimentList(
n)},r.prototype._populateExperimentList=function(t){$.observable(this._data).refresh(
t.map(function(t){return{ExperimentId:t.ExperimentId,Description:t.Description,Tags:
t.Tags,Creator:t.Creator,CreationTime:t.Status.CreationTime,StatusCode:t.Status.
StatusCode,etag:t.Etag,type:n.ExperimentType.name}}))},r.prototype.copyDialog=function(
){var n=this;this.selectedItems().length!==0&&ExperimentEditor.validateForCopyAsync(
this._getSelectedExperimentPromise).done(function(){var t=new ExperimentEditor.CopyExperimentDialogViewModel(
n.selectedItems()[0].Description,n.selectedItems()[0].ExperimentId);DataLab.Log.
customEvent({key:"CopyExperimentDialogOpened",type:"AllExperimentsView",data:JSON.
stringify(n.selectedItems())});ExperimentEditor.DialogViews.CopyExperiment.show(
t)})},r.prototype.deleteConfirmation=function(){var i=this,r=$("<div />",{"class":
"dependants-list"}),f=this.selectedItems().map(function(n){return{name:n.Description}}
),u,t;r.append(n.createListOfDependants(f));u=this.selectedItems().length>1?DataLab.
Util.format(DataLab.LocalizedResources.confirmDeleteSelectedExperiments,this.selectedItems(
).length.toString()):DataLab.LocalizedResources.confirmDeleteSelectedExperiment;
t=new Shell.UI.Notifications.Confirmation(u,"active");t.setDetailsUseHtml(!0);t.
setDetailsText(r.get(0).outerHTML);t.setActions([new Shell.UI.Notifications.Buttons.
yes(function(){DataLab.Log.customEvent({key:"DeleteSelectedExperimentYes",type:"AllExperimentsView",
data:JSON.stringify(i.selectedItems())});i.delete()}),new Shell.UI.Notifications.
Buttons.no(function(){DataLab.Log.customEvent({key:"DeleteSelectedExperimentNo",
type:"AllExperimentsView"});Shell.UI.Notifications.remove(t)})]);Shell.UI.Notifications.
add(t)},r.prototype.delete=function(){var n=this,i=[],u,t,f;this.selectedItems().
forEach(function(t){i.push(t);DataLab.Util.first(n.listedExperiments,function(i,
r){return n.listedExperiments[r].ExperimentId===t.ExperimentId?(n.listedExperiments.
splice(r,1),!0):!1},null)});u=[];t=[];i.forEach(function(i){var r=n._workspace.deleteExperimentAndAncestorsAsync(
i.ExperimentId,i.etag);r.fail(function(n){t.push({item:i,error:n})});r=DataLab.Util.
then(r,$.noop,function(){return DataLab.Util.when(null)});u.push(r)});f=$.when.apply(
$,u).done(function(){var f,n,u;t.length>0&&(f=i.length>1?DataLab.Util.format(DataLab.
LocalizedResources.failedToDeleteExperiments,t.length.toString(),i.length.toString(
)):DataLab.LocalizedResources.failedToDeleteExperiment,n=new Shell.UI.Notifications.
Notification(f,"error"),n.setActions([Shell.UI.Notifications.Buttons.ok()]),u=$(
"<ul/>").addClass("bound-height"),t.map(function(n){return r.formatDeleteError(n)}
).forEach(function(n){$("<li/>").text(n).appendTo(u)}),n.setDetailsUseHtml(!0),n.
setDetailsText(u.get(0).outerHTML),Shell.UI.Notifications.add(n))}).always(function(
){cdm.getActiveItem()===n&&(n.selectedItems.removeAll(),t.length>0?n.refreshFromService(
):n.refreshFromLocal(n.listedExperiments))});this._sharedSpinner.showFor(f)},r.prototype.
_isGlobalWorkspaceId=function(n){return n&&n!==this._workspace.id},r.prototype._isUserWorkspaceId=
function(n){return n&&n===this._workspace.id},r.prototype.setPreviewMinimumHeight=
function(){var t=$(r._PREVIEW_PANE_ID),i=t.offset();if(i){var u=$("#aux-body"),n=
$(window).height()-i.top-100;n=Math.max(n,0);t.css("min-height",n.toString()+"px")}
},r.prototype.fitSvg=function(){var i,n,o;if(this._renderArea&&(i=$(this._renderArea).
find(r._SVG_CONTAINER_ID),i.length>0)){this.setPreviewMinimumHeight();var t=i.find(
"svg"),u=t.width(),f=t.height(),e=t.find("g");e.length>0&&u>0&&f>0&&(n=e[0].getBBox(
),n&&n.width&&n.height&&(o=this.computeShrinkToFitViewBox(u,f,n,r._SVG_MAX_ZOOM_IN_FACTOR),
t[0].setAttribute("viewBox",o)))}},r.prototype.previewExperiment=function(n){this.
_selectedExperiment(n)},r.prototype.computeShrinkToFitViewBox=function(n,t,i,r){
var o=i.x,s=i.y,u=i.width,f=i.height,h=Math.min(n/u,t/f),e;return h>r&&(e=h/r,u*=
e,f*=e,o-=(u-i.width)/2,s-=(f-i.height)/2),o.toString()+" "+s+" "+u+" "+f},r.prototype.
rowSelect=function(n,t){var f;if(this._grid){this._grid.wazDataGrid("option","multiselect",
!1);var i=this._grid.find(".rowCheckbox"),r=this._grid.find("tbody.fx-grid-groupdata tr").
toArray().map(function(n){return $.view(n).data.rowMetadata}),u=(t.unselected||[
]).map(function(n){return r.indexOf(n)});t.unselected&&t.unselected.length===1&&
!t.selected&&i[u[0]].checked&&$.observable(t.unselected[0]).setProperty("selected",
!0);t.selected&&u.push(r.indexOf(t.selected));u.filter(function(n){return n>=0&&
n<i.length}).forEach(function(n){r[n].selected||(i[n].checked=r[n].selected)});i.
filter(function(n){return i[n].checked}).length>0&&r.filter(function(n,t){return!i[
t].checked&&r[t].selected}).forEach(function(n){$.observable(n).setProperty("selected",
!1)});f=this._grid.wazDataGrid("getSelectedRows");this.selectedItems(f.map(function(
n){return n.dataItem}));this.deleteCommand&&this.deleteCommand.setDisabled(this.
selectedItems().length===0);this.copyCommand&&this.copyCommand.setDisabled(this.
selectedItems().length!==1);this.selectedItems().length===1?this.previewExperiment(
this.selectedItems()[0]):this.previewExperiment(null)}},r.prototype._handleMissingExperiment=
function(n,t){var r=this,u=DataLab.Util.format(DataLab.LocalizedResources.ErrorNamedExperimentNotFound,
t),i=new Shell.UI.Notifications.Confirmation(u,"active");i.setActions([Shell.UI.
Notifications.Buttons.close(function(){Shell.UI.Notifications.remove(i);r._renderArea&&
r.refreshExperimentListFromService()})]);Shell.UI.Notifications.add(i);DataLab.Log.
error("experiment not found","AllExperimentsView",n&&n.message)},r._SVG_CONTAINER_ID=
"#thumbnailContainer",r._PREVIEW_PANE_ID="#previewPane",r._SVG_MAX_ZOOM_IN_FACTOR=
1,r._PAGE_SIZE=20,r._GRID_COLUMN_WIDTHS={Source:"",Description:"",Creator:"",Status:
"",Date:"",Button:""},r._GRID_SEARCH_DELAY=160,r}(DataLab.Util.Disposable);n.AllExperimentsView=
i;n.navigateToExperimentList=r}(DataLabViews||(DataLabViews={})),function(n){var
t=function(){function t(n,t){this._renderArea=n;this._data=[];this._client=t;var
i=[{name:DataLab.LocalizedResources.name,field:"Description",type:"navigation",navigationField:
"DataflowId"},{name:DataLab.LocalizedResources.id,field:"DataflowId"}];this._grid=
$(n).find("#grid").wazDataGrid({columns:i,data:this._data,selectable:!0,multiselect:
!1,resizable:!0})}return t.prototype.refreshFromService=function(){var n=this;Shell.
UI.Spinner.show();this._client.listDataflowsAsync().done(function(t){Shell.UI.Spinner.
hide();n._populateDataflowList(t)})},t.prototype._populateDataflowList=function(
t){$.observable(this._data).refresh(t.map(function(t){return{Description:t.Description,
DataflowId:t.DataflowId,type:n.DataflowType.name}}))},t}();n.DataflowListView=t}
(DataLabViews||(DataLabViews={})),function(n){var t=function(){function t(t,i,r)
{this._renderArea=t;var u=document.querySelector("#ExperimentEditor"),f={loadFromService:
function(n){return r.getDataflowAsync(n)}};this.xeViewModel=new ExperimentEditor.
ExperimentEditorContainerViewModel(r,f,i);this.xeControlContainer=new ExperimentEditor.
ExperimentEditorContainer(u,this.xeViewModel);this.xeViewModel.registerNavigateToParentHandler(
function(t){t&&n.navigateToExperiment(t)});cdm.setActiveItem(this);document.querySelector(
"#tabcontainer .itemtitle").textContent=""}return t.prototype.dispose=function()
{this.xeControlContainer.dispose();this.xeViewModel.dispose()},t.prototype.open=
function(){var n=this,t=this.xeViewModel.loadFromService();Shell.UI.Spinner.show(
);t.done(function(){Shell.UI.Spinner.hide();cdm.setActiveItem(n)})},t}();n.DataflowView=
t}(DataLabViews||(DataLabViews={})),function(n){var t=_.template("from azureml import Workspace\nws = Workspace(\n"+
"    workspace_id='<%= workspaceId %>',\n"+"    authorization_token='<%= authorizationToken %>'\n"+
")\n"+"ds = ws.datasets['<%= datasetName %>']\n"+"frame = ds.to_dataframe()"),i=
_.template("from azureml import Workspace\nws = Workspace(\n"+"    workspace_id='<%= workspaceId %>',\n"+
"    authorization_token='<%= authorizationToken %>'\n"+")\n"+"experiment = ws.experiments['<%= experimentId %>']\n"+
"ds = experiment.get_intermediate_dataset(\n"+"    node_id='<%= nodeId %>',\n"+"    port_name='<%= portName %>',\n"+
"    data_type_id='<%= typeId %>'\n"+")\nframe = ds.to_dataframe()"),r=_.template(
"library(azureml)\n\n"+'dataset <- "<%= datasetName %>"\n'+"\nws <- workspace(\n"+
'  id = "<%= workspaceId %>",\n'+'  authorization.token = "<%= authorizationToken %>"\n'+
")\nds <- datasets(ws)[[dataset]]\nframe <- as.data.frame(ds)\n"),u=_.template("library(azureml)\n\n"+
'experiment <- "<%= experimentId %>"\n'+'node_id <- "<%= nodeId %>"\n'+"\nws <- workspace(\n"+
'  id = "<%= workspaceId %>",\n'+'  authorization.token = "<%= authorizationToken %>"\n'+
")\nex = experiments(ws)[[experiment]]\n"+'ds <- dataset(ex, node = node_id, port = "<%= portName %>", data.type = "<%= typeId %>")\n'+
"frame <- as.data.frame(ds)\n"),f=function(){function f(n,f,e){var o=this;if(this.
languages=["Python"],this.language=ko.observable(),this.useSecondaryToken=ko.observable(
),this.workspaceTokenToUse=DataLab.Util.deferredComputed(function(){var n=DataLab.
User.isWorkspaceOwner;return n?o.useSecondaryToken()?o.workspaceToken.secondary:
o.workspaceToken.primary:"Unavailable"}),this.datasetName=DataLab.Util.deferredComputed(
function(){var n,t;if(o.targetObject instanceof DataLab.Model.OutputPort?(t=o.targetObject,
t.parent instanceof DataLab.Model.DatasetNode?n=t.parent.name:t.parent instanceof
DataLab.Model.ModuleNode&&(n=t.descriptor.name)):o.targetObject instanceof DataLab.
Model.Dataset&&(n=o.targetObject.name()),!n)throw new Error("No dataset name found");
return n}),this.longCodeTemplates_DataOutputPort={Python:DataLab.Util.deferredComputed(
function(){return t({workspaceId:o.workspaceId,authorizationToken:o.workspaceTokenToUse(
),datasetName:o.datasetName()})}),R:DataLab.Util.deferredComputed(function(){return r(
{workspaceId:o.workspaceId,authorizationToken:o.workspaceTokenToUse(),datasetName:
o.datasetName()})})},this.moduleOutputAccessTemplateData=DataLab.Util.deferredComputed(
function(){var n=o.targetObject,t=n.parent.parent.experimentId(),i,r;return t===
null&&n.parent.parent.parentExperimentId!==null&&(t=n.parent.parent.parentExperimentId),
i=n.parent.id,r=n.descriptor.allowedDataTypes[0].dataTypeId,{workspaceId:o.workspaceId,
authorizationToken:o.workspaceTokenToUse(),experimentId:t,nodeId:i,portName:o.datasetName(
),typeId:r}}),this.longCodeTemplates_InterOutputPort={Python:DataLab.Util.deferredComputed(
function(){return i(o.moduleOutputAccessTemplateData())}),R:DataLab.Util.deferredComputed(
function(){return u(o.moduleOutputAccessTemplateData())})},this.longCode=DataLab.
Util.deferredComputed(function(){var t=o.language(),i,n;if(o.targetObject instanceof
DataLab.Model.OutputPort?(i=o.targetObject,o.showLongCode&&(i.parent instanceof DataLab.
Model.DatasetNode?n=o.longCodeTemplates_DataOutputPort[t]():i.parent instanceof DataLab.
Model.ModuleNode&&(n=o.longCodeTemplates_InterOutputPort[t]()))):o.targetObject instanceof
DataLab.Model.Dataset&&(n=o.longCodeTemplates_DataOutputPort[t]()),!n)throw new Error(
"Could not compute longCode");return n}),!(n instanceof DataLab.Model.OutputPort)
&&!(n instanceof DataLab.Model.Dataset))throw new TypeError("Unsupported type");
this.targetObject=n;this.showLongCode=e!=undefined;this.workspaceId=f;this.showExtraHelp=
!DataLab.User.isWorkspaceOwner;this.workspaceToken={primary:e.primary(),secondary:
e.secondary()};this.showPreviewTag=DataLab.Features.enableOutputPortApiCodeExperience(
).match(/\bPreview\b/)!=null;this.language(this.languages[0]);DataLab.Features.dataAccessCodeSupportRLanguageEnabled(
)&&this.languages.push("R")}return f.prototype.canBeAccepted=function(){return!0}
,f.prototype.dismissed=function(){},f.prototype.showDialog=function(){var t=n.DialogViews.
ShowApiCode.show(this);return $("#long-code-text").click(function(){$(this).select(
)}),t},f}();n.ApiCodeDialogViewModel=f}(ExperimentEditor||(ExperimentEditor={}));
__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i
in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r}
,function(n){var i=DataLab.Util.DisposableSubscription,r=Shell.UI.Notifications,
t=DataLab.LocalizedResources,f=DataLab.Constants.NotebookType,u=function(u){function f(
n,i,r,e){var o=this,s;e===void 0&&(e=null);u.call(this);this._selectedRows=ko.observableArray(
[]);this._renderArea=n;this._data=[];this._client=r;this._options=$.extend({},f.
_defaultOptions,e);this._workspace=i;this._grid=$(n).find("#grid");s=[{name:DataLab.
LocalizedResources.name,field:"Name"},{name:DataLab.LocalizedResources.submittedBy,
field:"Owner"},{name:DataLab.LocalizedResources.description2,field:"Description"},
{name:DataLab.LocalizedResources.datatype,field:"DataTypeId"},{name:DataLab.LocalizedResources.
created,field:"CreatedDate",formatter:DataLab.Util.formatDate,sorted:"descending"},
{name:DataLab.LocalizedResources.size,field:"Size",formatter:waz.formatters.bytesFormatter,
sortFormatter:function(n){return n}}];this._grid.fxDataGrid({columns:s,data:this.
_data,selectable:!0,multiselect:!1,resizable:!0,noRows:t.datasetsNoRows,rowSelect:
function(n,t){return o.onSelect(n,t)},filterQueryDelay:100});this._downloadableTypeIds=
Object.create(null);DataLab.Util.values(this._workspace.applicationCache.dataTypeRegistry.
dataTypes).filter(function(n){return n.allowUpload}).forEach(function(n){return o.
_downloadableTypeIds[n.dataTypeId]=!0});this._downloader=new ExperimentEditor.EndpointDownloader;
this._datasetFilter=this._options.listSamples?function(n){return n.isLatest()&&n.
familyId.lastIndexOf(i.id,0)!==0}:function(n){return n.isLatest()&&n.familyId.lastIndexOf(
i.id,0)===0};this._isBusy=ko.observable(!1);cdm.setActiveItem(this);this._watchCacheChanges(
);this.populateDatasetList()}return __extends(f,u),f.prototype.populateDatasetList=
function(){var n=this,t=DataLab.Util.values(this._workspace.datasetCache.items()),
i=t.filter(function(t){return n._datasetFilter(t)}),r=i.map(function(n){return{Owner:
n.owner,Name:n.name(),Description:n.description(),DataTypeId:n.dataType.dataTypeId,
CreatedDate:n.created,Id:n.id,FamilyId:n.familyId,DownloadLocation:n.downloadLocation,
Dataset:n,Size:n.downloadLocation&&n.downloadLocation.Size||0}});$.observable(this.
_data).refresh(r)},f.prototype.setCommands=function(){var n=this,r,e,o,s,h,c;this.
_downloadCommand=new Shell.UI.Commands.Command(t.datasetListDownloadCommand,Shell.
UI.Icons.download,function(){return n.downloadDataset(n._selectedRows()[0])},null,
!0);Shell.UI.Commands.add(this._downloadCommand);this._options.listSamples||(this.
_deleteCommand=new Shell.UI.Commands.Command(t.datasetListDeleteCommand,Shell.UI.
Icons["delete"],function(){return n.deleteResourceFamily(n._selectedRows()[0])},
null,!0),Shell.UI.Commands.add(this._deleteCommand));DataLab.FeaturesExtensions.
canEnableNotebookContextMenu()&&(this._openNotebookCommand=new Shell.UI.Commands.
Command(t.datasetListNotebookCommand,Shell.UI.Icons.notebook,null,null,!0),r=[{text:
t.notebookLanguagePython2,click:DataLab.Util.wrapWithWindowPreOpener(function(t)
{return n.createAndOpenNotebook(n._selectedRows()[0],DataLab.Constants.NotebookLanguage.
Python2,DataLab.Util.addSpinnerToBlankWindow(t))}),isDisabled:function(){return n.
isLanguageCommandDisabled(n._selectedRows()[0],DataLab.Constants.NotebookLanguage.
Python2)},subCommand:null},{text:t.notebookLanguagePython3,click:DataLab.Util.wrapWithWindowPreOpener(
function(t){return n.createAndOpenNotebook(n._selectedRows()[0],DataLab.Constants.
NotebookLanguage.Python3,DataLab.Util.addSpinnerToBlankWindow(t))}),isDisabled:function(
){return n.isLanguageCommandDisabled(n._selectedRows()[0],DataLab.Constants.NotebookLanguage.
Python3)},subCommand:null}],DataLab.Features.rNotebookInContextMenuEnabled()&&r.
push({text:t.notebookLanguageR,click:DataLab.Util.wrapWithWindowPreOpener(function(
t){return n.createAndOpenNotebook(n._selectedRows()[0],DataLab.Constants.NotebookLanguage.
R,DataLab.Util.addSpinnerToBlankWindow(t))}),isDisabled:function(){return n.isLanguageCommandDisabled(
n._selectedRows()[0],DataLab.Constants.NotebookLanguage.R)},subCommand:null}),r.
forEach(function(t){t.subCommand=n._openNotebookCommand.addSubCommand(t.text,t.click,
t.isDisabled())}),Shell.UI.Commands.add(this._openNotebookCommand));DataLab.Features.
enableOutputPortApiCodeEnabled()&&(this._apicodecopy=new Shell.UI.Commands.Command(
t.datasetListGenerateAccessCodeCommand,Shell.UI.Icons.copy,function(){return n.apicodecopy(
n._selectedRows()[0])},null,!0),Shell.UI.Commands.add(this._apicodecopy));var u=
ko.computed(function(){return n._selectedRows().length===1}),l=ko.computed(function(
){return n._selectedRows().length>0&&n._selectedRows().every(function(t){return t.
Id.lastIndexOf(n._client.workspaceId,0)===0})}),a=ko.computed(function(){return n.
_isBusy()||!u()||!n._selectedRows().every(function(t){return n._downloadableTypeIds[
t.DataTypeId]})}),f=a.subscribe(function(t){return n._downloadCommand.setDisabled(
t)});this.registerForDisposal(new i(f));DataLab.Features.enableOutputPortApiCodeEnabled(
)&&(e={PlainText:!0,GenericCSV:!0,GenericCSVNoHeader:!0,GenericTSV:!0,GenericTSVNoHeader:
!0},o=ko.computed(function(){return n._isBusy()||!u()||!n._selectedRows().every(
function(n){return e[n.DataTypeId]})}),o.subscribe(function(t){return n._apicodecopy.
setDisabled(t)}));DataLab.FeaturesExtensions.canEnableNotebookContextMenu()&&(s=
{PlainText:!0,GenericCSV:!0,GenericCSVNoHeader:!0,GenericTSV:!0,GenericTSVNoHeader:
!0},h=ko.computed(function(){return n._isBusy()||!u()||!n._selectedRows().every(
function(n){return s[n.DataTypeId]})}),h.subscribe(function(t){return n._openNotebookCommand.
setDisabled(t)}),ko.computed(function(){r.forEach(function(n){n.subCommand.setDisabled(
n.isDisabled())})}));this._options.listSamples||(c=ko.computed(function(){return n.
_isBusy()||!u()||!l()}),f=c.subscribe(function(t){return n._deleteCommand.setDisabled(
t)}),this.registerForDisposal(new i(f)))},f.prototype.isLanguageCommandDisabled=
function(n,t){if(!n)return!1;var r=DataLab.Util.resurrectDashesInGUID(n.FamilyId.
split(".")[1]),i=this._workspace.applicationCache.notebookCache.getItemIfCached(
r);return i?i.language!==t:!1},f.prototype.createAndOpenNotebook=function(n,t,i)
{var u=DataLab.Util.resurrectDashesInGUID(n.FamilyId.split(".")[1]),r=this._workspace.
applicationCache.notebookCache.getItemIfCached(u);if(r)ExperimentEditor.NotebookHelpers.
openNotebookById(r.familyId,i);else{var f={Language:t,Author:this._workspace.getUserName(
),Name:n.Name,FamilyId:n.FamilyId.split(".")[1]},e={TemplateName:ExperimentEditor.
NotebookHelpers.getNotebookCreationTemplate(t,2),DatasetName:n.Name},o={Notebook:
f,Parameters:e};ExperimentEditor.NotebookHelpers.createAndOpenNotebook(o,i)}},f.
prototype.apicodecopy=function(n){var t=n.Dataset;this._workspace.getWorkspaceSettingsAsync(
).done(function(n){var i=new ExperimentEditor.ApiCodeDialogViewModel(t,n.id,n.authorizationToken);
i.showDialog()}).fail(function(){var n=new ExperimentEditor.ApiCodeDialogViewModel(
t,undefined,undefined);n.showDialog()})},f.prototype.downloadDataset=function(n)
{this._downloader.download(n.DownloadLocation)},f.prototype.deleteResourceFamily=
function(i){var u=this,o,e,s;this.setBusy();o=f._extractFamilyGuid(i.FamilyId);e=
this._client.getResourceDependantsAsync(o);e.always(function(){return u.setBusy(
!1)});s=DataLab.Util.then(e,function(t){var i=t.WebServiceGroups||[],r;return i.
length>0?(u.showHardDependantsAsync(i),DataLab.Util.when(!1)):t.Experiments&&t.Experiments.
length>0?(r=t.Experiments.map(function(t){return{name:t.Description,urlHash:Shell.
UI.Navigation.calculateNavigationPath({extension:n.experimentExtensionName,type:
"Experiment",name:t.ExperimentId,view:"ViewExperiment"})}}),u.confirmDeletionWithSoftDependantsAsync(
r)):u.confirmDeletetionAsync()});s.fail(function(n){var i=new Shell.UI.Notifications.
Notification(DataLab.Util.format(t.deleteOperationFailed,n.message),"error");i.setActions(
[Shell.UI.Notifications.Buttons.ok()]);Shell.UI.Notifications.add(i)}).done(function(
n){var f,e;n&&(f=new r.Progress(t.deletingDataset,"active",!0),f.setDismissable(
!0),f.setActions([r.Buttons.close()]),r.add(f),e=u._workspace.applicationCache.datasetCache.
deleteFamily(i.FamilyId),e.done(function(){f.setTitle(t.datasetDeleted);f.setStatus(
"success")}).fail(function(n){f.setTitle(DataLab.Util.format(t.deleteOperationFailed,
n.message));f.setStatus("error")}))})},f.prototype.confirmDeletetionAsync=function(
){var r=this,u=t.confirmDeleteDataset,n=new Shell.UI.Notifications.Confirmation(
u,"active"),i=$.Deferred();return n.setActions(Shell.UI.Notifications.ButtonSets.
yesNo(function(){DataLab.Log.customEvent({key:"DeleteSelectedDatasetYes",type:"DatasetListView",
data:JSON.stringify(r._selectedRows)});i.resolve(!0)},function(){DataLab.Log.customEvent(
{key:"DeleteSelectedDatasetNo",type:"DatasetListView"});Shell.UI.Notifications.remove(
n);i.resolve(!1)})),Shell.UI.Notifications.add(n),DataLab.Util.when(i.promise())}
,f.prototype.confirmDeletionWithSoftDependantsAsync=function(i){var u=$.Deferred(
),f=$("<div />",{"class":"dependants-list"}),r;return f.append(n.createListOfDependants(
i)),r=new Shell.UI.Notifications.Confirmation(t.deleteDatasetDependenciesWarning,
"active"),r.setDetailsUseHtml(!0),r.setDetailsText(f.get(0).outerHTML),r.setActions(
Shell.UI.Notifications.ButtonSets.yesNo(function(){u.resolve(!0)},function(){u.resolve(
!1)})),Shell.UI.Notifications.add(r),DataLab.Util.when(u.promise())},f.prototype.
showDependants=function(i){var u=$("<div />",{"class":"dependants-list"}),r;u.append(
$("<p />").text(t.deleteDatasetBlockedByDependencies));u.append(n.createListOfDependants(
i,this._options.showDependantsLinks));r=new Shell.UI.Notifications.Notification(
t.deleteDatasetBlockedByDependencies,"error");r.setDetailsUseHtml(!0);r.setDetailsText(
u.get(0).outerHTML);r.setActions([Shell.UI.Notifications.Buttons.ok()]);Shell.UI.
Notifications.add(r)},f.prototype.showHardDependantsAsync=function(n){var t=n.map(
function(n){return{name:n.Name,urlHash:Shell.UI.Navigation.calculateNavigationPath(
{extension:"WebServiceGroups",type:"WebServiceGroup",name:n.Id,view:"dashboard"})}}
);this.showDependants(t)},f.prototype.setBusy=function(n){n===void 0&&(n=!0);n?(
this._isBusy(!0),cdm.getActiveItem()===this&&Shell.UI.Spinner.show()):(this._isBusy(
!1),cdm.getActiveItem()===this&&Shell.UI.Spinner.hide())},f.prototype.unsetBusy=
function(){this.setBusy(!1)},f.prototype._watchCacheChanges=function(){var n=this,
t=this._workspace.datasetCache.resourceFamilyUpdated.subscribe(function(){return n.
populateDatasetList()});this.registerForDisposal(new i(t))},f.prototype.onSelect=
function(){this._selectedRows(this._grid.fxDataGrid("getSelectedRows").map(function(
n){return n.dataItem}))},f._extractFamilyGuid=function(n){var t=n.split(".");return t.
length>1?t[1]:t[0]},f._defaultOptions={listSamples:!1,showDependantsLinks:!0},f}
(DataLab.Util.Disposable);n.DatasetListView=u}(DataLabViews||(DataLabViews={})),
function(n){var t=function(){function t(t,i,r){var f=this,u;this._data=[];this._workspace=
i;this._experimentId=r;u=[{name:DataLab.LocalizedResources.name,field:"Description",
formatter:n.formatExperimentName,cssClass:"navigationColumn"},{name:DataLab.LocalizedResources.
state,field:"State",cssClass:"navigationColumn"},{name:DataLab.LocalizedResources.
status,field:"StatusCode",formatter:n.formatExperimentStatusCode,cssClass:"navigationColumn"},
{name:DataLab.LocalizedResources.experimentGridHeaderStartTime,field:"StartTime",
formatter:DataLab.Util.formatDate,sorted:"descending",sortFormatter:n.dateTimeSortFormatter,
cssClass:"navigationColumn"},{name:DataLab.LocalizedResources.experimentGridHeaderEndTime,
field:"EndTime",formatter:DataLab.Util.formatDate,cssClass:"navigationColumn"}];
this._grid=$(t).find("#grid").wazDataGrid({columns:u,data:this._data,selectable:
!0,multiselect:!0,resizable:!0,rowSelect:function(){cdm.setActiveItem(f)}});this.
_grid.on("click",".navigationColumn",function(t){var i=$(t.target).closest("tr").
view().data,r;i.rowMetadata&&(r=i.rowMetadata.dataItem.ExperimentId,n.navigateToExperiment(
r))});cdm.setActiveItem(this)}return t.prototype.setCommands=function(){this.backCommand=
new Shell.UI.Commands.Command(DataLab.LocalizedResources.backToExperiment,Shell.
UI.Icons.previous,this.navigateToSource.bind(this),null,!1);Shell.UI.Commands.add(
[this.backCommand])},t.prototype.refreshFromService=function(){var n=this,t;Shell.
UI.Spinner.show();t=DataLab.Util.then(this._workspace.getExperimentInfoAsync(this.
_experimentId),function(t){var r,i,u,f;document.querySelector("#tabcontainer .itemtitle").
textContent=t.Description;t.IsLeaf?n.getLineage(t.ExperimentId,t):(r=/([^\.]*)\.s-id\.([^\.]*)\.\S*/,
r.test(n._experimentId)?(i=n._experimentId.match(r),i.length===3?(u=i[1]+".f-id."+
i[2],f=DataLab.Util.then(n._workspace.getExperimentInfoAsync(u),function(i){i&&i.
IsLeaf?n.getLineage(t.ExperimentId,i):n.getLineage(t.ExperimentId)})):n.getLineage(
t.ExperimentId)):n.getLineage(t.ExperimentId))})},t.prototype.navigateToSource=function(
){n.navigateToExperiment(this._experimentId)},t.prototype.getLineage=function(i,
r){var u=this;r===void 0&&(r=null);DataLab.Util.then(this._workspace.getExperimentLineageAsync(
i),function(i){if(cdm.currentActiveItem instanceof t){if(u._populateExperimentList(
i),r){var f={ExperimentId:r.ExperimentId,Description:r.Description,Creator:r.Creator,
StartTime:r.Status.StartTime,EndTime:new Date(DataLab.Util.minDate),State:"Editable",
StatusCode:r.Status.StatusCode,etag:r.Etag,type:n.ExperimentType.name};r.Status.
StatusCode!==DataLab.DataContract.State.Running&&(r.Status.StatusCode===DataLab.
DataContract.State.NotStarted?f.State="Locked":(r.Status.StatusCode===DataLab.DataContract.
State.Finished||r.Status.StatusCode===DataLab.DataContract.State.Failed)&&(f.EndTime=
new Date(r.Status.EndTime)),$.observable(u._data).insert(0,f))}u._grid.wazDataGrid(
"option").data.forEach(function(n){if(n.ExperimentId===u._experimentId){var t=u.
_grid.wazDataGrid("option").rowMetadata;$.observable(t).insert(0,{dataItem:n,cssClass:
"lineageSource"})}});Shell.UI.Spinner.hide()}})},t.prototype._populateExperimentList=
function(t){$.observable(this._data).refresh(t.map(function(t){return{ExperimentId:
t.ExperimentId,Description:t.Description,Creator:t.Creator,StartTime:t.Status.StartTime,
EndTime:t.Status.EndTime,State:"Locked",StatusCode:t.Status.StatusCode,etag:t.Etag,
type:n.ExperimentType.name}}))},t}();n.ExperimentLineageView=t}(DataLabViews||(DataLabViews=
{})),function(n){var t=function(){function n(n,t,i){this._renderArea=n;this._data=
[];this._client=i;this._moduleCacheOnChange=null;this._workspace=t;var r=[{name:
DataLab.LocalizedResources.name,field:"Name"},{name:DataLab.LocalizedResources.submittedBy,
field:"Owner"},{name:DataLab.LocalizedResources.version,field:"Version"},{name:DataLab.
LocalizedResources.description2,field:"Description"},{name:DataLab.LocalizedResources.
created,field:"CreatedDate",formatter:DataLab.Util.formatDate,sorted:"descending"},
];this._grid=$(n).find("#grid").fxDataGrid({columns:r,data:this._data,selectable:
!1,multiselect:!1,resizable:!0});cdm.setActiveItem(this)}return n.prototype.populateModuleList=
function(){var n=DataLab.Util.map(this._workspace.moduleCache.items(),function(n)
{return n.isLatest()?{Owner:n.owner,Name:n.name(),Version:n.clientVersion,Description:
n.description(),CreatedDate:n.created}:undefined});n=DataLab.Util.filter(n,function(
n){return n===undefined?!1:!0});$.observable(this._data).refresh(n)},n.prototype.
dispose=function(){this._moduleCacheOnChange&&this._moduleCacheOnChange.dispose(
)},n}();n.ModuleListView=t}(DataLabViews||(DataLabViews={}));__extends=this.__extends||
function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&
(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=DataLab.
LocalizedResources,i=function(n){function i(i,r){n.call(this,i,r);this.header(t.
notebookPublishCompletedHeader);this.description(t.notebookPublishCompletedDescription);
this.linkLabel(t.notebookPublishCompletedLinkLabel);this.defaultPromotionTitle(t.
notebookPublishCompletedEmailTitle);this.defaultPromotionText(DataLab.Util.format(
t.notebookPublishCompletedEmailText,DataLab.LocalizedResources.productNameMedium))}
return __extends(i,n),i}(n.PublishToCommunityOnCompleteViewModel);n.NotebookPublishCompletedViewModel=
i}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(n,
t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);
r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(
i,r){var u=this;r===void 0&&(r=null);t.call(this);this.dialogDismissed=ko.observable(
!1);this.resultAccepted=ko.observable(!1);this.title=r?DataLab.LocalizedResources.
renameNotebookDialogRenameTitle:DataLab.LocalizedResources.renameNotebookDialogNameTitle;
this.newNotebookName=DataLab.Validation.validatableObservable(i,function(t){var r=
n.NotebookHelpers.validateNotebookName(t),i;return r?r:(i=null,DataLab.Workspace.
applicationCache.notebookCache.items.forEach(function(n){t===n.name()&&(i=DataLab.
LocalizedResources.renameNotebookDialogSameNameError)}),i)});this.newNotebookName.
subscribe(function(){u.newNotebookName.startValidating()});this.validatedFields=
[this.newNotebookName]}return __extends(i,t),i.prototype.enterToAccept=function(
t,i){return i.keyCode===13&&n.DialogHost?(n.DialogHost.acceptActiveDialog(),!1):
!0},i.prototype.dismissed=function(n){n.accepted&&this.resultAccepted(!0);this.dialogDismissed(
!0)},i.prototype.canBeAccepted=function(){return this.validatedFields.forEach(function(
n){return n.startValidating()}),this.validatedFields.every(function(n){return n.
isValid()})},i}(DataLab.Util.Disposable);n.RenameNotebookDialogViewModel=t}(ExperimentEditor||
(ExperimentEditor={})),function(n){var t=function(){function n(n){this.title=ko.
observable(n)}return n.prototype.dismissed=function(){},n}();n.SpinnerDialogViewModel=
t}(ExperimentEditor||(ExperimentEditor={})),function(n){var i=function(){function n(
){}return n}(),t;n.StockImage=i;t=function(){function n(){}return n.init=function(
t){n.Gallery.forEach(function(n){n.url=t+"/"+n.url})},n.Gallery=[{category:"1",url:
"Gallery_StockImages_AdTargeting.svg"},{category:"1",url:"Gallery_StockImages_Aerospace.svg"},
{category:"1",url:"Gallery_StockImages_Agriculture.svg"},{category:"1",url:"Gallery_StockImages_AnomalyDetection.svg"},
{category:"1",url:"Gallery_StockImages_BinaryClassification.svg"},{category:"1",
url:"Gallery_StockImages_Construction.svg"},{category:"1",url:"Gallery_StockImages_CustomerChurnAnalysis.svg"},
{category:"1",url:"Gallery_StockImages_DecisionForest.svg"},{category:"1",url:"Gallery_StockImages_DecisionTree.svg"},
{category:"1",url:"Gallery_StockImages_Education.svg"},{category:"1",url:"Gallery_StockImages_EnergyUtility.svg"},
{category:"1",url:"Gallery_StockImages_EquipmentMonitoring.svg"},{category:"1",url:
"Gallery_StockImages_Finance.svg"},{category:"1",url:"Gallery_StockImages_Forecasting.svg"},
{category:"1",url:"Gallery_StockImages_FraudDetection.svg"},{category:"1",url:"Gallery_StockImages_General.svg"},
{category:"1",url:"Gallery_StockImages_GeneralStats.svg"},{category:"1",url:"Gallery_StockImages_GovernmentPublicService.svg"},
{category:"1",url:"Gallery_StockImages_Healthcare.svg"},{category:"1",url:"Gallery_StockImages_HypothesisTesting.svg"},
{category:"1",url:"Gallery_StockImages_ImageRecognition.svg"},{category:"1",url:
"Gallery_StockImages_KMeanClustering.svg"},{category:"1",url:"Gallery_StockImages_LinearRegression.svg"},
{category:"1",url:"Gallery_StockImages_LogisticRegression.svg"},{category:"1",url:
"Gallery_StockImages_Manufacturer.svg"},{category:"1",url:"Gallery_StockImages_MarketingAdvertising.svg"},
{category:"1",url:"Gallery_StockImages_Media.svg"},{category:"1",url:"Gallery_StockImages_MulticlassClassification.svg"},
{category:"1",url:"Gallery_StockImages_NeuralNetwork.svg"},{category:"1",url:"Gallery_StockImages_Pharma.svg"},
{category:"1",url:"Gallery_StockImages_Recommendations.svg"},{category:"1",url:"Gallery_StockImages_Retail.svg"},
{category:"1",url:"Gallery_StockImages_SentimentAnalysis.svg"},{category:"1",url:
"Gallery_StockImages_SpamFiltering.svg"},{category:"1",url:"Gallery_StockImages_Sports.svg"},
{category:"1",url:"Gallery_StockImages_SupportVectorMachine.svg"},{category:"1",
url:"Gallery_StockImages_Technology.svg"},{category:"1",url:"Gallery_StockImages_TextAnalysis.svg"},
{category:"1",url:"Gallery_StockImages_TravelLeisure.svg"}],n}();n.CommunityStockImages=
t}(ExperimentEditor||(ExperimentEditor={})),function(n){var t=function(){function t(
){var t=this;this.imageUploadViewModel=new n.ImageUploadViewModel(.5,{maxWidth:960,
maxHeight:640});this.selectedStockImgUrl=ko.observable("");this.stockImages=[];this.
PlaceHolderImageURL="/Content/Images/image-placeholder.svg";this.selectedImageThumbnailSrc=
ko.computed(function(){return t.imageUploadViewModel.finalImageContent()?t.imageUploadViewModel.
finalImageContent().dataUrl:t.selectedStockImgUrl()?t.selectedStockImgUrl():t.PlaceHolderImageURL}
);this.hasImage=ko.computed(function(){return Boolean(t.selectedImageThumbnailSrc(
)!=t.PlaceHolderImageURL)});this.selectStockImage=function(n,i){t.selectedStockImgUrl(
n.url);$(".imgGallery").removeClass("imgGallerySelected");$(i.currentTarget).addClass(
"imgGallerySelected");t.imageUploadViewModel.clearImage()};this.fillStockImages(
)}return t.prototype.fillStockImages=function(){var t=this;n.CommunityStockImages.
Gallery.forEach(function(n){t.stockImages.push(n)})},t}();n.ImageSelectorViewModel=
t}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(n,
t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);
r.prototype=t.prototype;n.prototype=new r},function(n){var u=DataLab.Model.CommunityExperimentVisibility,
i=DataLab.LocalizedResources,t=DataLab.Util,r=function(r){function u(t,i){var u=
this;i===void 0&&(i=null);r.call(this);this.notebook=t;this.summary=ko.observable(
"");this.description=ko.observable("");this.tags=ko.observableArray();this.hasConsentedPublishCleaned=
ko.observable(!1);this.uploadImageOption=ko.observable(0);this.onWizardClosingEvent=
new ko.subscribable;this.onWizardCompleted=ko.observable(!1);this.isRepublish=!!i;
this.detailsFromGallery=ko.observable(this.isRepublish&&i.name!=="");this.previousPublishTypeHidden=
this.isRepublish?i.hidden:!1;this.publishTypeString=ko.observable(null);this.isRepublish&&
(this.previousPublishTypeHidden?this.publishTypeString(0..toString()):this.publishTypeString(
1..toString()));this.imageViewModel=new n.ImageSelectorViewModel;this.imageFromGallery=
ko.observable(this.isRepublish&&i.imageUrl!=="");this.name=DataLab.Validation.validatableObservable(
this.notebook.name(),n.NotebookHelpers.validateNotebookName);this.name.startValidating(
);this.description(this.notebook.description());this.detailsFromGallery()&&(this.
updateDetailsFromSelectedSource(!0),this.detailsFromGallery.subscribe(function(n)
{u.updateDetailsFromSelectedSource(n)}));this.imageFromGallery()&&(this.imageViewModel.
selectedStockImgUrl(i.imageUrl),this.imageFromGallery.subscribe(function(n){n?u.
imageViewModel.selectedStockImgUrl(i.imageUrl):u.imageViewModel.selectedStockImgUrl(
null)}));this.isValid=ko.computed(function(){return u.name.isValid()});this.useMarkdownEditor=
!!DataLab.Features.markdownInPublishDialogEnabled();this.areNextStepsDisabled=ko.
computed(function(){return!u.isValid()||u.imageViewModel.imageUploadViewModel.isProcessingSelectedImage(
)||!u.hasConsentedPublishCleaned()});this.arePreviousStepsDisabled=ko.computed(function(
){return!1});this.publishType=ko.computed(function(){var n=null;return u.publishTypeString(
)&&(n=Number(u.publishTypeString())),n});this.isCompleteButtonEnabled=ko.computed(
function(){return u.publishType()!==null});this.includeDataset=ko.observable(!1)}
return __extends(u,r),u.prototype.getPublishable=function(){if(this.onWizardCompleted(
)){if(!this.isValid())throw new Error("Cannot generate a PublishableNotebook with validation errors still present.");
}else throw new Error("Cannot generate a PublishableNotebook if the Publish To Community Wizard was not completed.");
return new DataLab.Model.PublishableNotebook(this.notebook,this.name(),this.summary(
),this.description(),this.publishType(),this.tags(),this.imageViewModel.imageUploadViewModel.
finalImageContent(),this.imageViewModel.imageUploadViewModel.finalImageContent()?
"":this.imageViewModel.selectedStockImgUrl())},u.prototype.onWizardClosing=function(
n){this.onWizardCompleted(!0);return n.completed?DataLab.Log.customEvent({key:"WizardCompleted",
type:"PublishNotebook",data:JSON.stringify({publishType:this.publishType()})}):DataLab.
Log.customEvent({key:"WizardCanceled",type:"PublishNotebook"}),!0},u.prototype.updateDetailsFromSelectedSource=
function(n){var t,i;n?(t=this._localDetails,i=this._galleryDetails):(t=this._galleryDetails,
i=this._localDetails);t.description=this.description();t.summary=this.summary();
t.name=this.name();t.tags=this.tags();this.description(i.description);this.summary(
i.summary);this.name(i.name);this.tags(i.tags)},u.prototype.launch=function(r){var
e=this,u,f;r===void 0&&(r=null);u=$.Deferred();f=[];t.initializeTemplateIfNecessary(
"TagTextBox",ExperimentEditorTemplates._tagTextBoxMarkup);[{templateId:"PublishNotebookStep1Template",
markup:ExperimentEditorTemplates._publishNotebookStep1Markup,dependency:DataLab.
Features.markdownInPublishDialogEnabled()&&[n.markdownEditorRegisterInfo],title:
i.publishNotebookDescriptionTitle},{templateId:"PublishNotebookStep2Template",markup:
ExperimentEditorTemplates._publishNotebookStep2Markup,dependency:null,title:DataLab.
LocalizedResources.publishExperimentToCommunityWizardImageSelectionTitle},{templateId:
"PublishNotebookStep3Template",markup:ExperimentEditorTemplates._publishNotebookStep3Markup,
dependency:null,title:DataLab.LocalizedResources.publishExperimentToCommunityWizardSettingsTitle}].
forEach(function(n){var i=new $.fxs.fxsWizard.WizardStep;i.contentTemplateOptions(
{name:t.initializeTemplateIfNecessary(n.templateId,n.markup,n.dependency),data:e});
i.title(n.title);f.push(i)});var s=r?DataLab.LocalizedResources.republishExperimentToCommunityWizardTitle:
DataLab.LocalizedResources.publishExperimentToCommunityWizardTitle,h={size:[680,
725],autoLock:!1,title:s},o=new n.WizardView(this,f,h);return o.onWizardClosingEvent.
subscribe(function(n){n.completed?u.resolve(e.getPublishable()):u.resolve(null)}
),o.show(),t.when(u.promise())},u.uploadImageOptions=[{text:DataLab.LocalizedResources.
publishExperimentToCommunityWizardImageSelectionCustomImageTab,value:0},{text:DataLab.
LocalizedResources.publishExperimentToCommunityWizardImageSelectionStockImagesTab,
value:1}],u}(t.Disposable);n.PublishNotebookToGalleryWizardViewModel=r}(ExperimentEditor||
(ExperimentEditor={})),function(n){var t;(function(t){function r(t,r,u){var f=DataLab.
Workspace;return i.then(f.startGetCommunityNotebookIdAsync(f.id,t,r,u),function(
t){return n.Packages.pollOnNotebookUnpack(t)})}function u(t){var r=null,l=function(
n){DataLab.Log.error("Publishing notebook failed","publishNotebook",{});i.showErrorNotification(
{title:DataLab.LocalizedResources.publishNotebookErrorTitle,details:n.message});
r&&r.close()},u=t.galleryId,f=e(u),c;return Shell.UI.Spinner.show(),f.always(function(
){return Shell.UI.Spinner.hide()}),c=i.then(f,function(i){var r=new n.PublishNotebookToGalleryWizardViewModel(
t,i);return r.launch()}),i.then(c,function(n){if(n){DataLab.Log.featureUsage({featureID:
168,groupID:167,data:JSON.stringify({notebookId:t.familyId,galleryId:u})});r=o();
var i=h(n,u);return DataLab.Util.then(i,function(t){var i;return t=JSON.parse(t),
i=r.close(),r=null,DataLab.Util.then(i,function(){return s(t,n.visibility)})})}}
).fail(l)}function f(){var r=n.NewDrawerMenu.NewExperimentMenuFromCatalogUtil.getTopSampleNotebooks(
);return i.then(r,function(i){return n.NewDrawerMenu.NewExperimentMenuFromCatalogUtil.
sortSamplesResult(i,t.CatalogEntity.CatalogExperimentSampleSortFunction)})}function e(
t){return t?DataLab.Util.then(n.Community.GalleryQueryUtil.queryCatalogEntityById(
"notebook",t),function(n){return{description:n.description,name:n.name,summary:n.
summary,imageUrl:n.image_url,tags:n.tags,hidden:n.hidden}}).fail(function(n){return DataLab.
Log.error("failed to obtain details for gallery entity with id "+t+"; "+n.message),
i.when({description:"",name:"",summary:"",imageUrl:"",tags:[],hidden:null})}):i.
when(null)}function o(){var i=new n.SpinnerDialogViewModel(DataLab.LocalizedResources.
publishExperimentToCommunityPauseOnPublishingMessage),t=new n.DialogViews.Spinner(
i);return t.show(),t}function s(t,i){var r=new n.NotebookPublishCompletedViewModel(
t,i);n.DialogViews.PublishToCommunityStepOnComplete.show(r)}function h(t,i){i===
void 0&&(i=null);var r=DataLab.Workspace,u=DataLab.Util.then(r.createNotebookStoragePackageForCommunityAsync(
t.source.id,t.name),n.Packages.pollOnNotebookPack);return DataLab.Util.then(u,function(
n){return r.createCommunityNotebookAsync(t,n.Location,i)})}var i=DataLab.Util,c=
DataLab.Constants.FeatureId;t.importGalleryNotebook=r;t.runPublishNotebookWizard=
u;t.getGalleryNotebookSamples=f})(t=n.Community||(n.Community={}))}(ExperimentEditor||
(ExperimentEditor={}));__extends=this.__extends||function(n,t){function r(){this.
constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;
n.prototype=new r},function(n){var r=DataLab.Util.DisposableSubscription,i=Shell.
UI.Notifications,t=DataLab.LocalizedResources,e=DataLab.Constants.FeatureId,u=DataLab.
Features,f=function(n){function f(i,r,u){var e=this,f;n.call(this);this._selectedRows=
ko.observableArray([]);this._commandsDisabled=ko.observable(!1);this._renderArea=
i;this._data=[];this._client=u;this._workspace=r;f=[{name:t.name,field:"Name",type:
"navigationLink"},{name:t.apiCodeDialogLanguageLabel,field:"Language"},{name:t.lastModified,
field:"ModifiedDate",formatter:DataLab.Util.formatDate,sorted:"descending"},];this.
_grid=$(i).find("#grid").wazDataGrid({columns:f,data:this._data,selectable:!0,selectFirstRowByDefault:
!0,multiselect:!1,resizable:!0,rowSelect:function(n,t){return e.onSelect(n,t)}});
this._grid.on("click",".waz-grid-navigation-link a",function(n){var t=$(n.target).
closest("tr").view().data;t.rowMetadata&&ExperimentEditor.NotebookHelpers.openNotebookById(
t.rowMetadata.dataItem.FamilyId,DataLab.Util.addSpinnerToBlankWindow())});cdm.setActiveItem(
this);this._watchCacheChanges();this.populateNotebookList()}return __extends(f,n),
f.prototype.populateNotebookList=function(){var n=DataLab.Util.values(this._workspace.
notebookCache.items()),t=n.map(function(n){return{Author:n.author,FamilyId:n.familyId,
Language:n.language,ModifiedDate:n.modified,Name:n.name(),Notebook:n}});$.observable(
this._data).refresh(t)},f.prototype.setCommands=function(){var n=this,i,f;this._deleteCommand=
new Shell.UI.Commands.Command(t.deleteItem,Shell.UI.Icons["delete"],function(){return n.
deleteNotebook(n._selectedRows()[0])},null,!0);Shell.UI.Commands.add(this._deleteCommand);
this._renameCommand=new Shell.UI.Commands.Command(t.rename,Shell.UI.Icons.rename,
function(){return n.renameNotebook(n._selectedRows()[0])},null,!0);Shell.UI.Commands.
add(this._renameCommand);u.publishNotebooksToGalleryEnabled()&&(this._publishCommand=
new Shell.UI.Commands.Command(t.commandsPublishExperimentToCommunity,Shell.UI.Icons.
publishToCommunity,function(){return n.publishNotebook(n._selectedRows()[0])},null,
!0),Shell.UI.Commands.add(this._publishCommand));var e=ko.pureComputed(function(
){return n._selectedRows().length!==1||n._commandsDisabled()}),o=ko.pureComputed(
function(){return n._selectedRows().length!==1||n._commandsDisabled()}),s=e.subscribe(
function(t){return n._deleteCommand.setDisabled(t)}),h=o.subscribe(function(t){return n.
_renameCommand.setDisabled(t)});this.registerForDisposal(new r(h),new r(s));this.
_publishCommand&&(i=ko.pureComputed(function(){return n._selectedRows().length!==
1||n._commandsDisabled()}),f=i.subscribe(function(t){return n._publishCommand.setDisabled(
t)}),this.registerForDisposal(new r(f)))},f.prototype._watchCacheChanges=function(
){var n=this,t=this._workspace.notebookCache.resourceFamilyUpdated.subscribe(function(
){return n.populateNotebookList()});this.registerForDisposal(new r(t))},f.prototype.
onSelect=function(){var n=this._grid.wazDataGrid("getSelectedRows");this._selectedRows(
n.map(function(n){return n.dataItem}))},f.prototype.renameNotebook=function(n){var
u=this,i=new ExperimentEditor.RenameNotebookDialogViewModel(n.Name,n.FamilyId),f=
new r(i.dialogDismissed.subscribe(function(){if(i.resultAccepted()&&i.newNotebookName(
)!==n.Name){Shell.UI.Spinner.show();var r=JSON.stringify({notebookId:n.FamilyId,
newName:i.newNotebookName()});DataLab.Log.featureUsage({featureID:123,groupID:124,
data:r});DataLab.Util.whenTrue(u._workspace.applicationCache.allPrefetched).done(
function(){u._workspace.applicationCache.notebookCache.renameFamily(n.FamilyId,i.
newNotebookName()).always(function(){Shell.UI.Spinner.hide()}).fail(function(n){
var i=ExperimentEditor.NotebookHelpers.getErrorMessage(n,t.renameNotebookFailed);
DataLab.Util.showErrorNotification(i);n instanceof DataLab.Util.AjaxError&&n.xmlHttpRequest&&
n.xmlHttpRequest.status===409&&u._workspace.applicationCache.notebookCache.loadNewItems(
)})})}i.dispose();f.dispose()}));this.registerForDisposal(f);ExperimentEditor.DialogViews.
RenameNotebook.show(i);return},f.prototype.deleteNotebook=function(n){var u=this,
f=DataLab.Util.format(t.deleteNotebookConfirmation,n.Name),r=new i.Confirmation(
f,"active");r.setActions([new i.Buttons.yes(function(){var o=JSON.stringify({notebookId:
n.FamilyId}),f,r,e;DataLab.Log.featureUsage({featureID:123,groupID:125,data:o});
f=DataLab.Util.format(t.deleteNotebookProgress,n.Name);r=new i.Progress(f,"active",
!0);r.setDismissable(!0);r.setActions([i.Buttons.close()]);i.add(r);e=u._workspace.
applicationCache.notebookCache.deleteFamily(n.FamilyId);e.done(function(){var i=
DataLab.Util.format(t.deleteNotebookSucceeded,n.Name);r.setTitle(i);r.setStatus(
"success")}).fail(function(i){var u=ExperimentEditor.NotebookHelpers.getErrorMessage(
i,t.deleteNotebookFailed,n.Name);r.setTitle(u.title);u.details&&r.setDetailsText(
u.details);r.setStatus("error")})}),new i.Buttons.no(function(){i.remove(r)})]);
i.add(r);return},f.prototype.publishNotebook=function(n){var i=this,t;if(DataLab.
Log.featureUsage({featureID:123,groupID:169,data:JSON.stringify({notebookId:n.FamilyId})}),
!DataLab.Trial.isPublishToCommunityEnabled()){DataLab.Log.error("disabled feature dialog not implemented",
"publishNotebook");throw new Error("not implemented");}this._commandsDisabled(!0);
t=ExperimentEditor.Community.runPublishNotebookWizard(n.Notebook);t.always(function(
){i._commandsDisabled(!1)})},f}(DataLab.Util.Disposable);n.NotebookListView=f}(DataLabViews||
(DataLabViews={}));__extends=this.__extends||function(n,t){function r(){this.constructor=
n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t=DataLab.LocalizedResources,i=function(n){function i(t,i,
r){n.call(this);this.renderArea=t;this.projectDetailVM=i;this.userName=r;this.registerForDisposal(
new DataLab.Util.DisposableSetHTML(this.renderArea.get(0),ExperimentEditorTemplates.
_projectDetailMarkup));this.registerForDisposal(this.projectDetailVM);this.registerForDisposal(
new DataLab.Util.DisposableKOApplyBindings(this.projectDetailVM,this.renderArea.
get(0)));cdm.setActiveItem(this)}return __extends(i,n),i.prototype.setCommands=function(
){this._editCommand||(this._editCommand=new Shell.UI.Commands.Command(t.editCommand,
Shell.UI.Icons.edit,function(){alert("Editor popup goes here")},null,!1));Shell.
UI.Commands.add(this._editCommand)},i}(DataLab.Util.Disposable);n.ProjectDetailView=
i}(DataLabViews||(DataLabViews={})),function(n){var t;(function(n){var t=function(
){function n(n){this.name=ko.observable(n.name);this.id=ko.observable(n.id);this.
lastModified=ko.observable(n.lastModified.toString());this.showDetails=ko.observable(
!1)}return n.prototype.toggleDetails=function(){this.showDetails(!this.showDetails(
))},n}();n.ResourceDetails=t})(t=n.ProjectCollection||(n.ProjectCollection={}))}
(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(n,t)
{function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);
r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(n){var t=
function(t){function i(n){var i=this;t.call(this);this.project=n;this.registerForDisposal(
new DataLab.Util.DisposableSubscription(this.project.subscribe(function(){i.updateAssetList(
)})));this.experiments=ko.observableArray([]);this.notebooks=ko.observableArray(
[]);this.datasets=ko.observableArray([]);this.webServices=ko.observableArray([]);
this.modules=ko.observableArray([]);this.trainedModels=ko.observableArray([]);this.
updateAssetList()}return __extends(i,t),i.prototype.createExperimentDetails=function(
t){return new n.ResourceDetails({name:t,id:t,lastModified:new Date})},i.prototype.
createNotebookDetails=function(t){return new n.ResourceDetails({name:t,id:t,lastModified:
new Date})},i.prototype.createDataSourceDetails=function(t){return new n.ResourceDetails(
{name:t,id:t,lastModified:new Date})},i.prototype.createWebServiceDetails=function(
t){return new n.ResourceDetails({name:t,id:t,lastModified:new Date})},i.prototype.
createModuleDetails=function(t){return new n.ResourceDetails({name:t,id:t,lastModified:
new Date})},i.prototype.createTrainedModuleDetails=function(t){return new n.ResourceDetails(
{name:t,id:t,lastModified:new Date})},i.prototype.updateAssetList=function(){var
n=this.project();n&&(n.Assets.experiments&&this.experiments(n.Assets.experiments.
map(this.createExperimentDetails)),n.Assets.notebooks&&this.notebooks(n.Assets.notebooks.
map(this.createNotebookDetails)),n.Assets.dataSources&&this.datasets(n.Assets.dataSources.
map(this.createDataSourceDetails)),n.Assets.webServices&&this.webServices(n.Assets.
webServices.map(this.createWebServiceDetails)),n.Assets.modules&&this.modules(n.
Assets.modules.map(this.createModuleDetails)),n.Assets.trainedModels&&this.trainedModels(
n.Assets.trainedModels.map(this.createTrainedModuleDetails)))},i}(DataLab.Util.Disposable);
n.ProjectDetailsViewModel=t})(t=n.ProjectCollection||(n.ProjectCollection={}))}(
ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(n,t)
{function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);
r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(
i){var r=this;t.call(this,i);this.navigateToExperiment=function(){n.navigateToExperiment(
r.id())};this.owner=ko.observable(i.owner)}return __extends(i,t),i}(ExperimentEditor.
ProjectCollection.ResourceDetails),i;n.ExperimentDetails=t;i=function(i){function r(
n,t,r){i.call(this,n,t,r);this.project=n}return __extends(r,i),r.prototype.createExperimentDetails=
function(n){return new t({name:n,id:n,lastModified:new Date,owner:"rihorn"})},r.
prototype.navigateToProject=function(){n.navigateToProject(this.project().Id)},r}
(ExperimentEditor.ProjectCollection.ProjectDetailsViewModel);n.ProjectDetailViewModel=
i}(DataLabViews||(DataLabViews={}));__extends=this.__extends||function(n,t){function r(
){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=
t.prototype;n.prototype=new r},function(n){function u(){Shell.UI.Navigation.navigate(
{extension:n.projectsExtensionName,type:"ListProjects",name:""})}function f(t){Shell.
UI.Navigation.navigate({extension:n.projectsExtensionName,type:n.ProjectType.name,
name:t})}var i=DataLab.LocalizedResources,r=DataLab.Util.DisposableSubscription,
t;n.projectsExtensionName="Projects";n.ProjectType={name:"Project",displayName:DataLab.
LocalizedResources.ProjectDisplayName,dataFunction:function(n){return{data:[{name:
n.Project,displayName:n.Project}]}}};n.navigateToProjectList=u;n.navigateToProject=
f;t=function(n){function t(t,i,r){n.call(this);this.renderArea=t;this.projectListVM=
i;this.userName=r;this.registerForDisposal(new DataLab.Util.DisposableSetHTML(this.
renderArea.get(0),ExperimentEditorTemplates._projectListMarkup));this._listArea=
$(t).find("#grid");this._listArea.on("click",".dummyProject",function(){});this.
registerForDisposal(this.projectListVM);this.registerForDisposal(new DataLab.Util.
DisposableKOApplyBindings(this.projectListVM,this.renderArea.get(0)));cdm.setActiveItem(
this)}return __extends(t,n),t.prototype.dispose=function(){this.renderArea=null;
n.prototype.dispose.call(this)},t.prototype.setCommands=function(){var n=this,t;
this._deleteCommand=new Shell.UI.Commands.Command(i.deleteItem,Shell.UI.Icons["delete"],
function(){n.projectListVM.deleteProject().done(function(){})},null,!0);Shell.UI.
Commands.add(this._deleteCommand);t=this.projectListVM.deleteEnabled.subscribe(function(
t){n._deleteCommand.setDisabled(!t)});this.registerForDisposal(new r(t))},t.prototype.
populateProjectList=function(){},t._PROPERTY_PANE_ID="#propertyPane",t}(DataLab.
Util.Disposable);n.ProjectListView=t}(DataLabViews||(DataLabViews={}));__extends=
this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(
i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(
t){function i(i,r){var u=this;t.call(this);this.workspace=i;this.client=r;this.projectsList=
ko.observableArray([]);this.selectedProject=ko.observable(null);this.populateList(
);this.projectDetailViewModel=new n.ProjectDetailViewModel(this.selectedProject,
i,r);this.selectProject=function(n){u.selectedProject(n)};this.registerForDisposal(
this.projectDetailViewModel);this.deleteEnabled=ko.pureComputed(function(){return u.
selectedProject&&u.selectedProject()!=null})}return __extends(i,t),i.prototype.deleteProject=
function(){var n=this;return this.workspace.deleteProjectAsync(this.selectedProject(
)).done(function(){n.populateList();n.selectedProject(null)})},i.prototype.populateList=
function(){var n=this;Shell.UI.Spinner.show();this.workspace.getProjectsAsync().
done(function(t){n.projectsList(t);Shell.UI.Spinner.hide()})},i.prototype.navigateToProject=
function(){n.navigateToProject(this.selectedProject().Name)},i}(DataLab.Util.Disposable);
n.ProjectListViewModel=t}(DataLabViews||(DataLabViews={}));__extends=this.__extends||
function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&
(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var r=DataLab.
Util.DisposableSubscription,i=Shell.UI.Notifications,t=DataLab.LocalizedResources,
u=function(u){function f(n,i,r,e){var s=this,o;e===void 0&&(e=null);u.call(this);
this._selectedRows=ko.observableArray([]);this._renderArea=n;this._data=[];this.
_client=r;this._options=$.extend({},f._defaultOptions,e);this._workspace=i;this.
_grid=$(n).find("#grid");o=[{name:DataLab.LocalizedResources.name,field:"Name"},
{name:DataLab.LocalizedResources.submittedBy,field:"Owner"},{name:DataLab.LocalizedResources.
description2,field:"Description"},{name:DataLab.LocalizedResources.datatype,field:
"DataTypeId"},{name:DataLab.LocalizedResources.created,field:"CreatedDate",formatter:
DataLab.Util.formatDate,sorted:"descending"}];this._grid.fxDataGrid({columns:o,data:
this._data,selectable:!0,multiselect:!1,resizable:!0,noRows:t.trainedModelsNoRows,
rowSelect:function(n,t){return s.onSelect(n,t)},filterQueryDelay:100});this._isBusy=
ko.observable(!1);cdm.setActiveItem(this);this._watchCacheChanges();this.populateList(
)}return __extends(f,u),f.prototype.populateList=function(){var n=DataLab.Util.values(
this._workspace.trainedModelCache.items()),t=n.map(function(n){return{Owner:n.owner,
Name:n.name(),Description:n.description(),DataTypeId:n.dataType.dataTypeId,CreatedDate:
n.created,Id:n.id,FamilyId:n.familyId}});$.observable(this._data).refresh(t)},f.
prototype.setCommands=function(){var n=this;this._deleteCommand=new Shell.UI.Commands.
Command(DataLab.LocalizedResources.deleteItem,Shell.UI.Icons["delete"],function(
){return n.deleteResourceFamily(n._selectedRows()[0])},null,!0);Shell.UI.Commands.
add(this._deleteCommand);var t=ko.computed(function(){return n._selectedRows().length===
1}),i=ko.computed(function(){return n._selectedRows().length>0&&n._selectedRows(
).every(function(t){return t.Id.lastIndexOf(n._client.workspaceId,0)===0})}),u=ko.
computed(function(){return n._isBusy()||!t()||!i()}),f=u.subscribe(function(t){return n.
_deleteCommand.setDisabled(t)});this.registerForDisposal(new r(f))},f.prototype.
deleteResourceFamily=function(r){var u=this,o,e,s;this.setBusy();o=f._extractFamilyGuid(
r.FamilyId);e=this._client.getResourceDependantsAsync(o);e.always(function(){return u.
setBusy(!1)});s=DataLab.Util.then(e,function(t){var i=t.WebServiceGroups||[],r;return i.
length>0?(u.showHardDependantsAsync(i),DataLab.Util.when(!1)):t.Experiments&&t.Experiments.
length>0?(r=t.Experiments.map(function(t){return{name:t.Description,urlHash:Shell.
UI.Navigation.calculateNavigationPath({extension:n.experimentExtensionName,type:
"Experiment",name:t.ExperimentId,view:"ViewExperiment"})}}),u.confirmDeletionWithSoftDependantsAsync(
r)):u.confirmDeletetionAsync()});s.fail(function(n){var i=new Shell.UI.Notifications.
Notification(DataLab.Util.format(t.deleteOperationFailed,n.message),"error");i.setActions(
[Shell.UI.Notifications.Buttons.ok()]);Shell.UI.Notifications.add(i)}).done(function(
n){var f,e;n&&(f=new i.Progress(t.deletingTrainedModel,"active",!0),f.setDismissable(
!0),f.setActions([i.Buttons.close()]),i.add(f),e=u._workspace.applicationCache.trainedModelCache.
deleteFamily(r.FamilyId),e.done(function(){f.setTitle(t.trainedModelDeleted);f.setStatus(
"success")}).fail(function(n){f.setTitle(DataLab.Util.format(t.deleteOperationFailed,
n.message));f.setStatus("error")}))})},f.prototype.confirmDeletetionAsync=function(
){var r=this,u=t.confirmDeleteTrainedModel,n=new Shell.UI.Notifications.Confirmation(
u,"active"),i=$.Deferred();return n.setActions(Shell.UI.Notifications.ButtonSets.
yesNo(function(){DataLab.Log.customEvent({key:"DeleteSelectedTrainedModelYes",type:
"TrainedModelListView",data:JSON.stringify(r._selectedRows)});i.resolve(!0)},function(
){DataLab.Log.customEvent({key:"DeleteSelectedTrainedModelNo",type:"TrainedModelListView"});
Shell.UI.Notifications.remove(n);i.resolve(!1)})),Shell.UI.Notifications.add(n),
DataLab.Util.when(i.promise())},f.prototype.confirmDeletionWithSoftDependantsAsync=
function(i){var u=$.Deferred(),f=$("<div />",{"class":"dependants-list"}),r;return f.
append(n.createListOfDependants(i)),r=new Shell.UI.Notifications.Confirmation(t.
deleteTrainedModelDependenciesWarning,"active"),r.setDetailsUseHtml(!0),r.setDetailsText(
f.get(0).outerHTML),r.setActions(Shell.UI.Notifications.ButtonSets.yesNo(function(
){u.resolve(!0)},function(){u.resolve(!1)})),Shell.UI.Notifications.add(r),DataLab.
Util.when(u.promise())},f.prototype.showDependants=function(i){var u=$("<div />",
{"class":"dependants-list"}),r;u.append($("<p />").text(t.deleteTrainedModelBlockedByDependencies));
u.append(n.createListOfDependants(i,this._options.showDependantsLinks));r=new Shell.
UI.Notifications.Notification(t.deleteTrainedModelBlockedByDependencies,"error");
r.setDetailsUseHtml(!0);r.setDetailsText(u.get(0).outerHTML);r.setActions([Shell.
UI.Notifications.Buttons.ok()]);Shell.UI.Notifications.add(r)},f.prototype.showHardDependantsAsync=
function(n){var t=n.map(function(n){return{name:n.Name,urlHash:Shell.UI.Navigation.
calculateNavigationPath({extension:"WebServiceGroups",type:"WebServiceGroup",name:
n.Id,view:"dashboard"})}});this.showDependants(t)},f.prototype.setBusy=function(
n){n===void 0&&(n=!0);n?(this._isBusy(!0),cdm.getActiveItem()===this&&Shell.UI.Spinner.
show()):(this._isBusy(!1),cdm.getActiveItem()===this&&Shell.UI.Spinner.hide())},
f.prototype.unsetBusy=function(){this.setBusy(!1)},f.prototype._watchCacheChanges=
function(){var n=this,t=this._workspace.trainedModelCache.resourceFamilyUpdated.
subscribe(function(){return n.populateList()});this.registerForDisposal(new r(t))}
,f.prototype.onSelect=function(){this._selectedRows(this._grid.fxDataGrid("getSelectedRows").
map(function(n){return n.dataItem}))},f._extractFamilyGuid=function(n){var t=n.split(
".");return t.length>1?t[1]:t[0]},f._defaultOptions={showDependantsLinks:!0},f}(
DataLab.Util.Disposable);n.TrainedModelListView=u}(DataLabViews||(DataLabViews={
}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t=function(){function n(n,t,i){this.columnName=n;this.columnType=
t;this.columnFriendlyName=i;this.columnDisplayName=DataLab.Util.format(DataLab.LocalizedResources.
modelPackageConfigColumnSchemaTemplate,this.columnName,this.columnType)}return n}
(),i,r,u;n.InputOutputViewModel=t;i=function(){function n(n){var t=this;this.name=
n.Name;this.type=n.Type;this.description=n.Description;this.defaultValue=n.DefaultValue;
this.parameterRules=n.ParameterRules;this.displayName=ko.computed(function(){return t.
name+" ("+t.type+")"})}return n}();n.WebServiceParameterViewModel=i;r=function()
{function r(n,t){this.allowAnonymousTest=ko.observable(!1);this.diagnosticsMode=
ko.observable(!1);this.sampleDataEnabled=ko.observable(!1);this.webServiceGroupId=
n;this._workspace=t;this.description=ko.observable("");this.name=ko.observable("");
this.inputs=ko.observableArray();this.outputs=ko.observableArray();this.globalParameters=
ko.observableArray()}return r.prototype.refreshFromService=function(t){var i=this;
DataLab.Util.then(this._workspace.getWebServiceGroupAsync(this.webServiceGroupId),
function(r){var u,e,f;(cdm.currentActiveItem==null||cdm.currentActiveItem instanceof
n.WebServiceGroupConfigContainerViewModel&&r!=null&&r.Id==i.webServiceGroupId)&&
(i.webServiceGroup=r,u=r.StagingWebService,u?(e=u.ModelPackageId,i.modelPackageInfo=
r.ModelPackages.filter(function(n){return n.Id===e})[0]):i.modelPackageInfo=r.ModelPackages[
r.ModelPackages.length-1],f=u.DiagnosticsSettings,i._existingDiagnosticsMode=f!=
null&&f.DiagnosticsTraceLevel!=DataLab.DataContract.DiagnosticsTraceLevel.None,i.
name(r.Name),i.description(r.Description),i.allowAnonymousTest(r.StagingWebService.
AllowAnonymousTest),i.diagnosticsMode(i._existingDiagnosticsMode),i.refreshedFromServiceHandler(
t,i))})},r.prototype.loadSchema=function(){var s,f,c,h,o,u,l,e,r;if(this.modelPackageStatusCode=
n.WebServiceGroupDashboardView.getProductionStatus(this.modelPackageInfo),this.allowAnonymousTest(
this.webServiceGroup.StagingWebService.AllowAnonymousTest),this.diagnosticsMode(
this._existingDiagnosticsMode),this.sampleDataEnabled(this.webServiceGroup.StagingWebService.
SampleDataEnabled),this.modelPackageInfo.Inputs!==null&&this.modelPackageInfo.Inputs.
length>0&&this.modelPackageInfo.Inputs[0]!==null&&(s=JSON.parse(this.modelPackageInfo.
Inputs[0].Schema),s!=null&&(f=$.map(s.columnAttributes,function(n){return new t(
n.name,n.type,"")}))),this.modelPackageInfo.InputsMetadata!==null&&f!==undefined&&
(u=this.modelPackageInfo.InputsMetadata[this.modelPackageInfo.Inputs[0].Id],u!==
undefined&&u!==null))for(r=0;r<f.length;r++)c=f[r],e=u[c.columnName],e!==undefined&&
(f[r].columnFriendlyName=e);if(this.modelPackageInfo.Outputs!=null&&this.modelPackageInfo.
Outputs.length>0&&this.modelPackageInfo.Outputs[0]!==null&&(h=JSON.parse(this.modelPackageInfo.
Outputs[0].Schema),h!=null&&(o=$.map(h.columnAttributes,function(n){return new t(
n.name,n.type,"")}))),this.modelPackageInfo.OutputsMetadata!==null&&o!=undefined&&
(u=this.modelPackageInfo.OutputsMetadata[this.modelPackageInfo.Outputs[0].Id],u!==
undefined&&u!==null))for(r=0;r<o.length;r++)l=o[r],e=u[l.columnName],e!==undefined&&
(o[r].columnFriendlyName=e);this.inputs(f);this.outputs(o);this.modelPackageInfo.
GlobalParametersMetadata&&this.globalParameters(this.modelPackageInfo.GlobalParametersMetadata.
map(function(n){return new i(n)}));this._existingFriendlyNames=this.getFriendlyNames(
)},r.prototype.getFriendlyNames=function(){var n=[];return this.globalParameters(
)&&$.each(this.globalParameters(),function(t,i){n.push(i.description)}),this.inputs(
)&&$.each(this.inputs(),function(t,i){n.push(i.columnFriendlyName)}),this.outputs(
)&&$.each(this.outputs(),function(t,i){n.push(i.columnFriendlyName)}),n.join("")}
,r.prototype.update=function(){var t=this,o=$.Deferred(),s={},u={},h={},f={},c=[
],l=this._existingFriendlyNames!=this.getFriendlyNames(),e,i,a;l&&(this.modelPackageInfo.
GlobalParametersMetadata&&(c=this.globalParameters().map(function(n){return{Name:
n.name,Type:n.type,DefaultValue:n.defaultValue,Description:n.description,ParameterRules:
n.parameterRules}})),this.outputs()&&($.each(this.outputs(),function(n,t){s[t.columnName]=
t.columnFriendlyName}),this.modelPackageInfo.Outputs[0]!==undefined&&(u[this.modelPackageInfo.
Outputs[0].Id]=s)),this.inputs()&&($.each(this.inputs(),function(n,t){h[t.columnName]=
t.columnFriendlyName}),this.modelPackageInfo.Inputs[0]!==undefined&&(f[this.modelPackageInfo.
Inputs[0].Id]=h)));var v=this.webServiceGroup.Name!=this.name()||this.webServiceGroup.
Description!=this.description()||this.webServiceGroup.StagingWebService.AllowAnonymousTest!=
this.allowAnonymousTest(),y=this._existingDiagnosticsMode!=this.diagnosticsMode(
)||this.sampleDataEnabled()!=this.webServiceGroup.StagingWebService.SampleDataEnabled,
r=[];return l&&r.push(this._workspace.updateModelPackageAsync(this.webServiceGroup.
Id,this.modelPackageInfo.Id,this.modelPackageStatusCode,f,u,c).done(function(){(
cdm.currentActiveItem==null||cdm.currentActiveItem instanceof n.WebServiceGroupConfigContainerViewModel)&&
(t._existingFriendlyNames=t.getFriendlyNames())}).fail(function(){(cdm.currentActiveItem==
null||cdm.currentActiveItem instanceof n.WebServiceGroupConfigContainerViewModel)&&
t.errorSchemaUpdateHandler()})),v&&r.push(this._workspace.updateWebServiceGroupAsync(
this.webServiceGroup.Id,this.name(),this.description(),this.allowAnonymousTest(),
this.webServiceGroup.Tags).fail(function(){(cdm.currentActiveItem==null||cdm.currentActiveItem
instanceof n.WebServiceGroupConfigContainerViewModel)&&t.errorNameUpdateHandler(
)})),y&&(e=this.diagnosticsMode()?DataLab.DataContract.DiagnosticsTraceLevel.All:
DataLab.DataContract.DiagnosticsTraceLevel.None,i=this.webServiceGroup.StagingWebService.
DiagnosticsSettings,i===null?i={DiagnosticsBESJobsPath:null,DiagnosticsConnectionString:
null,DiagnosticsExpiryTime:null,DiagnosticsRRSInitializationsPath:null,DiagnosticsRRSRequestsPath:
null,DiagnosticsTraceLevel:e}:i.DiagnosticsTraceLevel=e,r.push(this._workspace.updateWebServiceAsync(
this.webServiceGroup.Id,this.webServiceGroup.StagingWebService.Id,this.modelPackageInfo.
Id,i,this.sampleDataEnabled()).done(function(){(cdm.currentActiveItem==null||cdm.
currentActiveItem instanceof n.WebServiceGroupConfigContainerViewModel)&&(t._existingDiagnosticsMode=
t.diagnosticsMode())}).fail(function(){(cdm.currentActiveItem==null||cdm.currentActiveItem
instanceof n.WebServiceGroupConfigContainerViewModel)&&(t.errorDiagnosticsModeUpdateHandler(
),t.diagnosticsMode(t._existingDiagnosticsMode))}))),a=DataLab.Util.when(r),a.always(
function(){(cdm.currentActiveItem==null||cdm.currentActiveItem instanceof n.WebServiceGroupConfigContainerViewModel)&&
(t.finishedUpdateHandler(),o.resolve(f,u,t.name(),t.description(),t.diagnosticsMode(
)))}).done(function(){(cdm.currentActiveItem==null||cdm.currentActiveItem instanceof
n.WebServiceGroupConfigContainerViewModel)&&t.successUpdateHandler()}),DataLab.Util.
when(o)},r}();n.WebServiceGroupConfigViewModel=r;u=function(t){function i(n,i,u)
{t.call(this);this.hasBeenEdited=ko.observable(!1);this._renderArea=n.get(0);this.
_workspace=u;this.configViewModel=new r(i,u);this.configViewModel.refreshedFromServiceHandler=
this.configRefreshedFromServiceEventHandler;this.configViewModel.errorSchemaUpdateHandler=
function(){cdm.currentActiveItem.setErrorNotification(DataLab.LocalizedResources.
modelPackageConfigErrorSchema)};this.configViewModel.errorNameUpdateHandler=function(
){cdm.currentActiveItem.setErrorNotification(DataLab.LocalizedResources.modelPackageConfigErrorName)}
;this.configViewModel.errorDiagnosticsModeUpdateHandler=function(){cdm.currentActiveItem.
setErrorNotification(DataLab.LocalizedResources.modelPackageConfigErrorDiagnosticsMode)}
;this.configViewModel.finishedUpdateHandler=function(){Shell.UI.Spinner.hide()};
this.configViewModel.successUpdateHandler=this.successfulUpdateEventHandler;cdm.
setActiveItem(this);document.querySelector("#tabcontainer .itemtitle").textContent=
"";this._allowAnonymousTest=[{text:DataLab.LocalizedResources.webServiceTestEnabledYes,
value:!0},{text:DataLab.LocalizedResources.webServiceTestEnabledNo,value:!1}];this.
_diagnosticsModeOptions=[{text:DataLab.LocalizedResources.webServiceDiagnosticsModeAll,
value:!0},{text:DataLab.LocalizedResources.webServiceDiagnosticsModeNone,value:!1}];
this._sampleDataEnabled=[{text:DataLab.LocalizedResources.webServiceSampleDataEnabledYes,
value:!0},{text:DataLab.LocalizedResources.webServiceSampleDataEnabledNo,value:!1}]}
return __extends(i,t),i.prototype.open=function(){var t=this;DataLab.Util.then(this.
_workspace.getWorkspaceSettingsAsync(),function(i){if(cdm.currentActiveItem==null||
cdm.currentActiveItem instanceof n.WebServiceGroupConfigContainerViewModel){var r=
DataLab.Model.WorkspaceTypeExtensions.isProduction(i.type);t.shouldShowDiagnosticsButton=
r;t.refreshFromService(!0)}})},i.prototype.setCommands=function(){var n=this;this.
saveCommand=new Shell.UI.Commands.Command(DataLab.LocalizedResources.modelPackageConfigSave,
Shell.UI.Icons.save,this.update.bind(this),null,!0);this.discardCommand=new Shell.
UI.Commands.Command(DataLab.LocalizedResources.modelPackageConfigDiscard,Shell.UI.
Icons.undo,this.discard.bind(this),null,!0);Shell.UI.Commands.add([this.saveCommand,
this.discardCommand]);this.hasBeenEdited.subscribe(function(){n.saveCommand.setDisabled(
!n.hasBeenEdited());n.discardCommand.setDisabled(!n.hasBeenEdited())})},i.prototype.
configUpdated=function(){var n=cdm.currentActiveItem;n.hasBeenEdited()||n.hasBeenEdited(
!0)},i.prototype.refreshFromService=function(n){Shell.UI.Spinner.show();this.configViewModel.
refreshFromService(n)},i.prototype.configRefreshedFromServiceEventHandler=function(
n,t){var i=cdm.currentActiveItem;(t.modelPackageInfo!==undefined||t.modelPackageInfo!=
null)&&i.refreshModelPackageUI();i.hasBeenEdited(!1);n&&i.registerForDisposal(new
DataLab.Util.DisposableKOApplyBindings(i,i._renderArea));$("#WebServiceGroupConfig").
show();Shell.UI.Spinner.hide()},i.prototype.successfulUpdateEventHandler=function(
){var n=cdm.currentActiveItem;n.updateTitles(n.configViewModel.name());n.hasBeenEdited(
!1)},i.prototype.refreshModelPackageUI=function(){var n=this,t,i,r;this.configViewModel.
loadSchema();t=this.configViewModel.allowAnonymousTest()?this._allowAnonymousTest[
0]:this._allowAnonymousTest[1];$("#radioAllowAnonymousTest").fxRadio({value:t,values:
this._allowAnonymousTest,trackedit:!1,change:function(t,i){n.configViewModel.allowAnonymousTest(
i.value.value);n.configUpdated(n)}});i=this.configViewModel.sampleDataEnabled()?
this._sampleDataEnabled[0]:this._sampleDataEnabled[1];$("#radioSampleDataEnabled").
fxRadio({value:i,values:this._sampleDataEnabled,trackedit:!1,change:function(t,i)
{n.configViewModel.sampleDataEnabled(i.value.value);n.configUpdated(n)}});r=this.
configViewModel.diagnosticsMode()?this._diagnosticsModeOptions[0]:this._diagnosticsModeOptions[
1];$("#radioDiagnosticsMode").fxRadio({value:r,values:this._diagnosticsModeOptions,
trackedit:!1,change:function(t,i){n.configViewModel.diagnosticsMode(i.value.value);
n.configUpdated(n)}});this.updateTitles(this.configViewModel.name())},i.prototype.
update=function(){Shell.UI.Spinner.show();this.configViewModel.update()},i.prototype.
discard=function(){this.refreshFromService(!1)},i.prototype.setErrorNotification=
function(n){var t=new Shell.UI.Notifications.Notification(n,"error");t.setActions(
[Shell.UI.Notifications.Buttons.close(function(){})]);Shell.UI.Notifications.add(
t)},i.prototype.updateTitles=function(n){document.querySelector("#tabcontainer .itemtitle").
textContent=this.configViewModel.name();$(".fxshell-nav2-item.selected a span").
text(n).attr("title",n)},i}(DataLab.Util.Disposable);n.WebServiceGroupConfigContainerViewModel=
u}(DataLabViews||(DataLabViews={}));__extends=this.__extends||function(n,t){function r(
){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=
t.prototype;n.prototype=new r},function(n){var t=function(t){function i(n,i,r){var
u=this;t.call(this);this.parentExperimentLatestId=null;this.relatedWebServiceGroupId=
null;this.relatedWebServiceName=null;this.relatedWebServiceLabel=null;this._renderArea=
n.get(0);this._webServiceGroupId=i;this._webServiceGroup=ko.observable(null);this.
_workspace=r;this.parentExperimentId=ko.observable(null);this.originalExperimentDocumentation=
ko.observable(null);this.isScoringExperimentCreated=ko.computed(function(){return u.
parentExperimentId()!=null});this.isSubmittedToCompetition=ko.computed(function(
){return u._webServiceGroup()&&u._webServiceGroup().Tags!==null&&u._webServiceGroup(
).Tags.some(function(n){return n===ExperimentEditor.CompetitionSubmission.SubmitCompetitionEntryWizardViewModel.
CompetitionSubmittedTag})});this.competitionUrl=ko.computed(function(){if(!DataLab.
Features.competitionExperimentSupportEnabled()||!u.isCompetition())return null;var
n=u.originalExperimentDocumentation()||"/";return new ExperimentEditor.LinkPropertyViewModel(
new DataLab.Model.LinkProperty(DataLab.LocalizedResources.goToCompetitionText,n),
function(){window.open(n,"_blank")})});cdm.setActiveItem(this);document.querySelector(
"#tabcontainer .itemtitle").textContent=""}return __extends(i,t),i.prototype.open=
function(){var t=this;Shell.UI.Spinner.show();DataLab.Util.then(this._workspace.
getWebServiceGroupAsync(this._webServiceGroupId),function(i){var r,f,u;cdm.currentActiveItem
instanceof n.WebServiceGroupDashboardView&&i!=null&&i.Id==t._webServiceGroupId&&
(t._webServiceGroup(i),t.wsgDescription=i.Description,t.webServices=[],r=i.StagingWebService,
r?(f=r.ModelPackageId,t._modelPackageInfo=i.ModelPackages.filter(function(n){return n.
Id===f})[0],t.webServices.push(new n.WebService(r.Id,t.getApiHelpPageUrl("score"),
DataLab.LocalizedResources.webServiceGroupDashboardWsRRSType,new Date(parseInt(t.
_modelPackageInfo.CreationTime.substr(6))))),t.webServices.push(new n.WebService(
r.Id,t.getApiHelpPageUrl("jobs"),DataLab.LocalizedResources.webServiceGroupDashboardWsBatchType,
new Date(parseInt(t._modelPackageInfo.CreationTime.substr(6))))),t.setupWebServiceGrid(
),u=$("#WebServicePrimaryKey"),u.is(":data(fxs-fxsCopyButton)")&&u.fxsCopyButton(
"destroy"),u.fxsCopyButton({text:r.PrimaryKey})):t._modelPackageInfo=i.ModelPackages.
length>0?i.ModelPackages[i.ModelPackages.length-1]:null,DataLab.Util.then(t._workspace.
getWorkspaceSettingsAsync(),function(r){cdm.currentActiveItem instanceof n.WebServiceGroupDashboardView&&
(t.shouldShowProductionElements=DataLab.Model.WorkspaceTypeExtensions.isProduction(
r.type),t.showProductionStatus(),document.querySelector("#tabcontainer .itemtitle").
textContent=i.Name,t.updateSidebarTitle(i.Name),t._modelPackageInfo!=null&&t._modelPackageInfo.
LinkedExperimentId?(t.parentExperimentId(t._modelPackageInfo.LinkedExperimentId),
t.parentExperimentLatestId=t.getLatestExperimentRunId(),DataLab.Util.then(t._workspace.
getExperimentInfoAsync(t.parentExperimentId()),function(i){var r,u;cdm.currentActiveItem
instanceof n.WebServiceGroupDashboardView&&i!==null&&i.ExperimentId===t.parentExperimentId(
)&&(r=i.OriginalExperimentDocumentationLink,!r&&DataLab.Features.competitionExperimentSupportEnabled(
)&&t.isCompetition()&&(u=i.Tags.filter(function(n){return ExperimentEditor.ExperimentViewModel.
GalleryUriTagSearchRegex.test(n)}),r=u.length>0?u[0].substring(ExperimentEditor.
ExperimentViewModel.GalleryUriTagPrefix.length):"/"),t.originalExperimentDocumentation(
r),t.parentExperimentDescription=i.Description,t.registerForDisposal(new DataLab.
Util.DisposableKOApplyBindings(t,t._renderArea)),$("#WebServiceGroupDashboardViewContent").
show(),$("#competition-prop").show(),Shell.UI.Spinner.hide())}),t.setUpRelatedWebserviceLink(
),t.tryAddPublishCompetitionCommand()):($("#WebServiceGroupDashboardViewContent").
show(),Shell.UI.Spinner.hide()))}))})},i.prototype.isCompetition=function(){return this.
_webServiceGroup()&&this._webServiceGroup().Tags.some(function(n){return ExperimentEditor.
ExperimentViewModel.CompetitionUrlTagSearchRegex.test(n)})},i.prototype.tryAddPublishCompetitionCommand=
function(){var t=this,n;DataLab.Features.competitionExperimentSupportEnabled()&&
this.isCompetition()&&(n=new Shell.UI.Commands.Command(DataLab.LocalizedResources.
submitCompetitionEntry,Shell.UI.Icons.submitCompetition,function(){return t.onPublishCompetitionEntry(
)},null,DataLab.Trial.isWorkspaceTypeAnonymous()),Shell.UI.Commands.add(n))},i.prototype.
setCommands=function(){var n=this,t=new Shell.UI.Commands.Command(DataLab.LocalizedResources.
deleteItem,Shell.UI.Icons["delete"],function(){return n.onDeleteWebServiceGroup(
)},null,!1);Shell.UI.Commands.add(t)},i.prototype.onPublishCompetitionEntry=function(
){var t=this;DataLab.Log.featureUsage({featureID:147,groupID:0});var n=this._webServiceGroup(
),i=ExperimentEditor.WebServiceGroupUtilities.getCompetitionUri(n),r=new ExperimentEditor.
CompetitionSubmission.CompetitionSubmissionDialog(this._workspace,n,i);r.showDialog(
function(){var u=r.viewModel;u.step3ViewModel.status()===4&&ExperimentEditor.CompetitionSubmission.
Utilities.startSubmitCompetition(t._workspace,n,u.step1ViewModel.submissionName(
),i,function(){return t._webServiceGroup.valueHasMutated()})})},i.prototype.getLatestExperimentRunId=
function(){if(!this.parentExperimentId())throw new Error("Experiment id cannot be null");
var n=this.parentExperimentId().split(".");if(n.length<3)throw new Error("invalid experiment id: "+
this.parentExperimentId());return n[0]+".f-id."+n[2]},i.prototype.setUpRelatedWebserviceLink=
function(){var n=this;this.shouldShowRelatedWebService=!1;this.parentExperimentLatestId&&
this._workspace.listProjects(this.parentExperimentLatestId).done(function(t){if(
t&&t.length&&t[0].Experiments){var i=DataLab.Util.first(t[0].Experiments,function(
t){return t.ExperimentId!=n.parentExperimentLatestId&&(t.Role===DataLab.DataContract.
ExperimentRole.Training||t.Role===DataLab.DataContract.ExperimentRole.Scoring)},
null);i&&n._workspace.getExperimentInfoAsync(i.ExperimentId).done(function(t){var
r=t.WebService&&t.WebService.WebServiceGroupId;r&&n._workspace.getWebServiceGroupAsync(
r).done(function(t){n.shouldShowRelatedWebService=!0;n.relatedWebServiceGroupId=
r;n.relatedWebServiceName=t.Name;n.relatedWebServiceLabel=i.Role===DataLab.DataContract.
ExperimentRole.Training?DataLab.LocalizedResources.trainingWebServiceLabel:DataLab.
LocalizedResources.scoringWebServiceLabel;var u=$("#relatedWebServiceSection")[0];
ko.cleanNode(u);ko.applyBindings(n,u)})})}})},i.prototype.showProductionStatus=function(
){var n;if(this.shouldShowProductionElements){if(this._modelPackageInfo!=null&&this.
_webServiceGroup()!=null){var t=this._workspace.friendlyName,r=DataLab.Util.format(
"{0}/#Workspaces/MachineLearningExtension/Workspace/{1}",DataLab.Configuration.ClientConfiguration.
AzureManagementPortalUrl,t),u=i.getProductionStatus(this._modelPackageInfo);this.
productionStatusSectionTitle=DataLab.LocalizedResources.webServiceEndpointsSectionTitle;
n=this._webServiceGroup().Endpoints==null?0:this._webServiceGroup().Endpoints.length-
1;this.productionStatusDescription=DataLab.Util.format(DataLab.LocalizedResources.
webServiceEndpointCount,n.toString());this.productionActionDescription=DataLab.LocalizedResources.
webServiceManageEndpointsLink;this.productionActionUrl=DataLab.Util.format("{0}/WebService/{1}/Dashboard",
r,this._webServiceGroup().Id)}}else this.productionStatusSectionTitle="",this.productionStatusDescription=
"",this.productionActionDescription="",this.productionActionUrl=""},i.prototype.
getConfigTabUrl=function(){var n=window.location.href,t=n.lastIndexOf("/");return n.
substring(t)=="/dashboard"?n.substr(0,t)+"/configuration":(DataLab.Log.warn("Expected the web service URL to end with /dashboard",
this._webServiceGroup().Id,n),n)},i.prototype.getApiHelpPageUrl=function(n){return DataLab.
Util.format("/apihelp/workspaces/{0}/webservices/{1}/endpoints/{2}/{3}",this._workspace.
id,this._webServiceGroup().Id,this._webServiceGroup().StagingWebService.Id,n)},i.
prototype.getDownloadExcelUrl=function(){return DataLab.Util.format("/apihelpdownload/workspaces/{0}/webservices/{1}/endpoints/{2}/excel",
this._workspace.id,this._webServiceGroup().Id,this._webServiceGroup().StagingWebService.
Id)},i.prototype.getDownloadLegacyExcelUrl=function(){return DataLab.Util.format(
"/apihelpdownload/workspaces/{0}/webservices/{1}/endpoints/{2}/legacyexcel",this.
_workspace.id,this._webServiceGroup().Id,this._webServiceGroup().StagingWebService.
Id)},i.prototype.showExcelLink=function(){if(DataLab.Features.excelDownloadEnabled(
)&&this._modelPackageInfo.Outputs&&this._modelPackageInfo.Outputs.length===1&&(!this.
_modelPackageInfo.Outputs[0].OutputType||this._modelPackageInfo.Outputs[0].OutputType===
"DataTable")&&this._modelPackageInfo.GlobalParametersMetadata){for(var n=0;n<this.
_modelPackageInfo.GlobalParametersMetadata.length;n++)if(!this._modelPackageInfo.
GlobalParametersMetadata[n].DefaultValue)return!1;return!0}return!1},i.prototype.
setupWebServiceGrid=function(){var n=this,t={columns:[{name:DataLab.LocalizedResources.
webServiceApiHelpLabel,field:"Url",formatter:function(n,t){var i=t.dataItem;return $.
fxGridFormatter.url({url:n,text:i.Type,target:"_blank"},t)}}],data:this.webServices,
selectable:!1,multiselect:!1,resizable:!0};this._modelPackageInfo!=null&&(t.columns.
push({name:DataLab.LocalizedResources.webServiceGroupDashboardWsTestHeader,field:
"Id",formatter:function(t,i){var u=i.dataItem,r;if(u.Type===DataLab.LocalizedResources.
webServiceGroupDashboardWsRRSType)return r=$('<a href="#" class="WebServiceTestLink">'+
DataLab.LocalizedResources.webServiceGroupDashboardWsTestButtonText+"<\/a>"),DataLab.
Features.multiInputSupportEnabled()&&n._modelPackageInfo.Inputs.length>1?r.click(
function(){return ExperimentEditor.auxConfirm("",DataLab.LocalizedResources.webServiceGroupDashboardWsTestMultiInputWarning).
done(function(){}).fail(function(){}),!1}):r.click(function(){return n.showInteractiveScoreDialog(
t),!1}),r}}),this.showExcelLink()&&t.columns.push({name:DataLab.LocalizedResources.
webServiceGroupDashboardWsAppsHeader,field:"Id",formatter:function(t,i){var u=i.
dataItem,o=DataLab.Features.agaveExcelClientEnabled()?DataLab.LocalizedResources.
webServiceDownloadNewExcelLabel:DataLab.LocalizedResources.webServiceDownloadExcelLabel,
f=$('<a href="'+n.getDownloadExcelUrl()+'"><img src="/Content/Images/icxlsx.png" > '+
o+"<\/a>"),r,e;return DataLab.Features.agaveExcelClientEnableSampleData()&&f.click(
function(){return ExperimentEditor.auxConfirm(DataLab.LocalizedResources.webServiceDownloadExcelSampleDataConfirmationTitle,
DataLab.LocalizedResources.webServiceDownloadExcelSampleDataConfirmationContent).
done(function(){n._webServiceGroup().StagingWebService.SampleDataEnabled?window.
location.href=n.getDownloadExcelUrl():n._workspace.updateWebServiceAsync(n._webServiceGroupId,
u.Id,n._modelPackageInfo.Id,null,!0).done(function(){window.location.href=n.getDownloadExcelUrl(
)})}).fail(function(){}),!1}),r=$("<div><\/div>").append(f),u.Type===DataLab.LocalizedResources.
webServiceGroupDashboardWsRRSType&&(e=$('<a href="'+n.getDownloadLegacyExcelUrl(
)+'"><img src="/Content/Images/icxlsx.png" > '+DataLab.LocalizedResources.webServiceDownloadLegacyExcelLabel+
"<\/a>"),DataLab.Features.agaveExcelClientEnabled()&&r.append(", ").append(e)),r}
}));t.columns.push({name:DataLab.LocalizedResources.webServiceGroupDashboardWsLastUpdatedHeader,
field:"CreationTime",formatter:DataLab.Util.formatDate,sorted:"descending"});this.
_grid=$(this._renderArea).find("#webServiceGrid").wazDataGrid(t)},i.prototype.onDeleteWebServiceGroup=
function(){this._webServiceGroup().ProductionWebService?this.showError(DataLab.Util.
format(DataLab.LocalizedResources.cannotDeleteWebServiceGroupError,this._webServiceGroup(
).Name)):this.confirmDelete()},i.prototype.showError=function(n){var t=new Shell.
UI.Notifications.Confirmation(n,"active");t.setActions([new Shell.UI.Notifications.
Buttons.ok(function(){Shell.UI.Notifications.remove(t)})]);Shell.UI.Notifications.
add(t)},i.prototype.confirmDelete=function(){var i=this,t=new Shell.UI.Notifications.
Confirmation(DataLab.Util.format(DataLab.LocalizedResources.confirmDeleteWebServiceGroup,
this._webServiceGroup().Name),"active");t.setActions([new Shell.UI.Notifications.
Buttons.yes(function(){Shell.UI.Spinner.show();i.deleteWebServiceGroup().done(function(
){Shell.UI.Navigation.navigate({extension:n.webServiceGroupExtensionName})}).fail(
function(n){i.showError(n.message)}).always(function(){Shell.UI.Spinner.hide()});
Shell.UI.Notifications.remove(t)}),new Shell.UI.Notifications.Buttons.no(function(
){Shell.UI.Notifications.remove(t)})]);Shell.UI.Notifications.add(t)},i.prototype.
deleteWebServiceGroup=function(){return this._workspace.deleteWebServiceGroupAsync(
this._webServiceGroupId)},i.prototype.showInteractiveScoreDialog=function(n){var
t=new ExperimentEditor.ScoreDialogViewModel(this._modelPackageInfo,this._webServiceGroup(
),n,this._workspace),i=ExperimentEditor.DialogViews.InteractiveScore.show(t)},i.
prototype.updateSidebarTitle=function(n){$(".fxshell-nav2-item.selected a span").
text(n).attr("title",n)},i.getProductionStatus=function(n){var r=n.StatusCode,t=
String(n.StatusCode),i=3;if(r==1||DataLab.DataContract.ModelPackageStatusCode[t]===
1)i=1;else if(r==2||DataLab.DataContract.ModelPackageStatusCode[t]===2)i=2;else if(
r==0||DataLab.DataContract.ModelPackageStatusCode[t]===0)i=0;else throw new Error(
DataLab.Util.format("Unexpected ModelPackageStatusCode: {0}",t));return i},i}(DataLab.
Util.Disposable);n.WebServiceGroupDashboardView=t}(DataLabViews||(DataLabViews={
}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t=DataLab.Util.DisposableSubscription,i=function(i){function r(
n,t,r){i.call(this);this._renderArea=n;this._data=[];this._workspace=t;this._client=
r;this._webServiceGroup=ko.observable(null);cdm.setActiveItem(this)}return __extends(
r,i),r.prototype.setCommands=function(){var n=this,u=new Shell.UI.Commands.Command(
DataLab.LocalizedResources.deleteItem,Shell.UI.Icons["delete"],function(){return n.
confirmDelete()},null,!0),i,r;Shell.UI.Commands.add(u);i=this._webServiceGroup.subscribe(
function(){u.setDisabled(n._webServiceGroup()===null)});this.registerForDisposal(
new t(i));DataLab.Features.competitionExperimentSupportEnabled()&&(r=new Shell.UI.
Commands.Command(DataLab.LocalizedResources.submitCompetitionEntry,Shell.UI.Icons.
submitCompetition,function(){return n.onPublishCompetitionEntry()},null,!0),Shell.
UI.Commands.add(r),i=this._webServiceGroup.subscribe(function(){var t=!0;DataLab.
Trial.isWorkspaceTypeAnonymous()||n._webServiceGroup()==null||n._webServiceGroup(
).Tags==null||(t=!n._webServiceGroup().Tags.some(function(n){return ExperimentEditor.
ExperimentViewModel.CompetitionUrlTagSearchRegex.test(n)}));r.setDisabled(t)}),this.
registerForDisposal(new t(i)))},r.prototype.onPublishCompetitionEntry=function()
{var n=this;DataLab.Log.featureUsage({featureID:147,groupID:0});Shell.UI.Spinner.
show();DataLab.Util.then(this._workspace.getWebServiceGroupAsync(this._webServiceGroup(
).Id),function(t){Shell.UI.Spinner.hide();var i=ExperimentEditor.WebServiceGroupUtilities.
getCompetitionUri(t),r=new ExperimentEditor.CompetitionSubmission.CompetitionSubmissionDialog(
n._workspace,t,i);r.showDialog(function(){var u=r.viewModel;u.step3ViewModel.status(
)===4&&ExperimentEditor.CompetitionSubmission.Utilities.startSubmitCompetition(n.
_workspace,t,u.step1ViewModel.submissionName(),i)})}).fail(function(){DataLab.Log.
error("Failed to launch entry submission dialog for web service group: "+n._webServiceGroup(
).Id);Shell.UI.Spinner.hide()})},r.prototype.refreshFromService=function(){var t=
this;Shell.UI.Spinner.show();DataLab.Util.then(this._workspace.listWebServiceGroupsAsync(
),function(i){cdm.currentActiveItem instanceof n.WebServiceGroupListView&&t._renderArea&&
($.observable(t._data).refresh(i.map(function(t){return{Id:t.Id,Name:t.Name,CreationTime:
DataLab.Util.parseJsonDate(t.CreationTime),type:n.WebServiceGroupType.name,Tags:
t.Tags}})),t.createGrid(),Shell.UI.Spinner.hide())})},r.prototype.navigateToWebServiceGroup=
function(t){Shell.UI.Navigation.navigate({extension:n.webServiceGroupExtensionName,
type:n.WebServiceGroupType.name,name:t})},r.prototype.dispose=function(){this._renderArea=
null;i.prototype.dispose.call(this)},r.prototype.createGrid=function(){var n=this;
this._grid=$(this._renderArea).find("#grid").wazDataGrid({columns:[{name:DataLab.
LocalizedResources.webServiceGroupNameLabel,field:"Name",cssClass:"navigationColumn"},
{name:DataLab.LocalizedResources.webServiceGroupCreationTimeLabel,field:"CreationTime",
formatter:DataLab.Util.formatDate,sorted:"descending"}],data:this._data,selectable:
!0,selectFirstRowByDefault:!0,multiselect:!1,resizable:!0,rowSelect:function(t,i)
{i.selected?n._webServiceGroup(i.selected.dataItem):n._webServiceGroup(null)}});
this._grid.on("click",".navigationColumn",function(t){var i=$(t.target).closest(
"tr").view().data,r;i.rowMetadata&&(r=i.rowMetadata.dataItem.Id,n.navigateToWebServiceGroup(
r))})},r.prototype.showError=function(n){var t=new Shell.UI.Notifications.Confirmation(
n,"active");t.setActions([new Shell.UI.Notifications.Buttons.ok(function(){Shell.
UI.Notifications.remove(t)})]);Shell.UI.Notifications.add(t)},r.prototype.confirmDelete=
function(){var i=this,t=new Shell.UI.Notifications.Confirmation(DataLab.Util.format(
DataLab.LocalizedResources.confirmDeleteWebServiceGroup,this._webServiceGroup().
Name),"active");t.setActions([new Shell.UI.Notifications.Buttons.yes(function(){
Shell.UI.Notifications.remove(t);Shell.UI.Spinner.show();i._webServiceGroup()&&i.
deleteWebServiceGroup().done(function(){Shell.UI.Navigation.navigate({extension:
n.webServiceGroupExtensionName})}).fail(function(n){i.showError(n.message)}).always(
function(){Shell.UI.Spinner.hide()})}),new Shell.UI.Notifications.Buttons.no(function(
){Shell.UI.Notifications.remove(t)})]);Shell.UI.Notifications.add(t)},r.prototype.
deleteWebServiceGroup=function(){var t=this;return DataLab.Util.then(this._workspace.
getWebServiceGroupAsync(this._webServiceGroup().Id),function(i){if(cdm.currentActiveItem
instanceof n.WebServiceGroupListView&&t._renderArea)if(Shell.UI.Spinner.hide(),i.
ProductionWebService)t.showError(DataLab.Util.format(DataLab.LocalizedResources.
cannotDeleteWebServiceGroupError,t._webServiceGroup().Name));else return t._workspace.
deleteWebServiceGroupAsync(t._webServiceGroup().Id)})},r}(DataLab.Util.Disposable);
n.WebServiceGroupListView=i}(DataLabViews||(DataLabViews={}));__extends=this.__extends||
function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&
(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(
n){function t(t,i,r,u,f,e,o,s,h,c){o===void 0&&(o=null);s===void 0&&(s=null);h===
void 0&&(h=ko.observable(!1));c===void 0&&(c=ko.observable(!1));n.call(this);this.
id=t;this.url=i;this.thumbnail=r;this.title=u;this.width=f;this.height=e;this.description=
o;this.openMoreInfo=s;this.hasBeenWatched=h;this.hasBeenWatched(this.getWatchedVideosIds(
).indexOf(this.id)>=0);this.selected=c}return __extends(t,n),t.prototype.markAsWatched=
function(){this.hasBeenWatched(!0);this.setWatchedVideId(this.id)},t.prototype.getWatchedVideosIds=
function(){var n=decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*videosWatched\\s*\\=\\s*([^;]*).*$)|^.*$"),
"$1"));return n.split(",").map(function(n){return n.trim()}).filter(function(n){
return n.length>0})},t.prototype.setWatchedVideId=function(n){var i=this.getWatchedVideosIds(
),t;i.indexOf(n)<0&&(i.push(n),t=new Date,t.setFullYear(t.getFullYear()+1),document.
cookie="videosWatched="+encodeURIComponent(i.join(","))+"; expires="+t.toUTCString(
))},t}(DataLab.Util.Disposable),i;n.GetStartedVideo=t;i=function(i){function r(n,
u,f){i.call(this);this.infoSections=r.INFOSECTIONS;var o=Shell.Utilities.isLocalStorageAvailable(
),e=o?localStorage.getItem(DataLab.Constants.WelcomeSkipOptionId):null;e||(e="false",
o&&localStorage.setItem(DataLab.Constants.WelcomeSkipOptionId,e));this.welcomeSkipOption=
ko.observable(e==="true");this.welcomeSkipOption.subscribe(function(n){o&&localStorage.
setItem(DataLab.Constants.WelcomeSkipOptionId,String(n))});$("#tabcontainer .itemtitle").
text(DataLab.LocalizedResources.welcomePageTitle);this.selectedVideo=ko.observable(
);this.selectedVideo.subscribe(function(n){n&&n.selected(!1)},this,"beforeChange");
this.selectedVideo.subscribe(function(n){if(n){n.selected(!0);var t=r._CUSTOMUX_XPADDING,
i=r._CUSTOMUX_YPADDING;ExperimentEditor.CustomUX.open(ExperimentEditorTemplates.
_videoMarkup,n,(n.height+i).toString()+"px",(n.width+t).toString()+"px")}});this.
videos=[];this.videos.push(new t("getStartedVideo1",DataLab.LocalizedResources.gettingStartedVideo1Link,
"/Libraries/Images/"+DataLab.LocalizedResources.gettingStartedVideoThumbnail,DataLab.
LocalizedResources.welcomeTextSegment1Title,1098,720,DataLab.Util.format(DataLab.
LocalizedResources.welcomeTextSegment1Body,DataLab.LocalizedResources.productNameMedium)));
this.videos.push(new t("getStartedVideo2",DataLab.LocalizedResources.gettingStartedVideo2Link,
"/Libraries/Images/"+DataLab.LocalizedResources.gettingStartedVideoThumbnail,DataLab.
LocalizedResources.welcomeTextSegment2Title,1098,720,DataLab.LocalizedResources.
welcomeTextSegment2Body));this.videos.push(new t("getStartedVideo3",DataLab.LocalizedResources.
gettingStartedVideo3Link,"/Libraries/Images/"+DataLab.LocalizedResources.gettingStartedVideoThumbnail,
DataLab.LocalizedResources.welcomeTextSegment3Title,1098,720,DataLab.LocalizedResources.
welcomeTextSegment3Body));this.videos.push(new t("getStartedVideo4",DataLab.LocalizedResources.
gettingStartedVideo4Link,"/Libraries/Images/"+DataLab.LocalizedResources.gettingStartedVideoThumbnail,
DataLab.LocalizedResources.welcomeTextSegment4Title,1098,720,DataLab.Util.format(
DataLab.LocalizedResources.welcomeTextSegment4Body)));this.videos.push(new t("getStartedVideo5",
DataLab.LocalizedResources.gettingStartedVideo5Link,"/Libraries/Images/"+DataLab.
LocalizedResources.gettingStartedVideoThumbnail,DataLab.LocalizedResources.welcomeTextSegment5Title,
1098,720,DataLab.LocalizedResources.welcomeTextSegment5Body));this.registerForDisposal(
new DataLab.Util.DisposableKOApplyBindings(this,f.get(0)))}return __extends(r,i),
r.prototype.goNewExperiment=function(){Shell.UI.Drawer.open()},r.prototype.selectVideo=
function(n){this.selectedVideo(n)},r._CUSTOMUX_XPADDING=40,r._CUSTOMUX_YPADDING=
90,r._TOPIC_ID_CREATE_EXPERIMENT="e76c990c-bb44-4dea-b834-39d4c4e864ec",r._TOPIC_ID_GETTING_DATA=
"5beb7766-f9ff-4115-b06b-a6f54daa3d0a",r._TOPIC_ID_SHARING_WORKSPACES="20ff2e97-6a44-4312-88b6-64457f0583d8",
r._TOPIC_ID_CREATING_EXPERIMENTS="e1a8c2a1-3a47-43a9-b228-20869cdf898b",r._TOPIC_ID_AZ_LIST=
"DFDCB393-0285-4A60-A2BD-7C79F80E4D20",r._TOPIC_ID_MODULE_LIST="C72A3E1A-29CF-46C1-BF98-BD3D30D62C96",
r._TOPIC_ID_OVERVIEW="e76c990c-bb44-4dea-b834-39d4c4e864ec",r._TOPIC_ID_CREATING_SIMPLE_EXPERIMENT=
"e548ed9d-064b-42fd-a1b7-4c34eccb88f8",r._TOPIC_ID_SAMPLE_EXPERIMENTS="83df9d4f-f8c2-4ee4-b897-7c06692f252c",
r._TOPIC_ID_SAMPLE_DATA="af7ae79e-ea60-45fd-add0-f016059d3202",r._TOPIC_ID_PUBLISHING=
"01e46943-7479-4d3b-adeb-35cf9e0a43bc",r._TOPIC_ID_GUIDE_START="96b39d63-f6dd-4461-a244-b90ab3891cda",
r.INFOSECTIONS=[{title:DataLab.LocalizedResources.welcomeInfo1Title,text:DataLab.
LocalizedResources.welcomeInfo1Text,links:[{caption:DataLab.LocalizedResources.welcomeInfo1Link2CaptionUpdates,
url:DataLab.LocalizedResources.welcomeInfo1Link2HrefUpdates,openInNewWindow:!0},
{caption:DataLab.LocalizedResources.welcomeInfo1Link1CaptionReleaseNotes,url:DataLab.
LocalizedResources.welcomeInfo1Link1HrefReleaseNotes,openInNewWindow:!0}]},{title:
DataLab.LocalizedResources.welcomeInfo2Title,text:DataLab.LocalizedResources.welcomeInfo2Text,
links:[{caption:DataLab.LocalizedResources.welcomeInfo2Link2CaptionGettingData,onclick:
ExperimentEditor.Help.openHelpWindow.bind(undefined,r._TOPIC_ID_GETTING_DATA,"")},
{caption:DataLab.LocalizedResources.welcomeInfo2Link2aCaptionCreatingAndRunningExperiments,
onclick:ExperimentEditor.Help.openHelpWindow.bind(undefined,r._TOPIC_ID_CREATING_EXPERIMENTS,
"")},{caption:DataLab.LocalizedResources.welcomeInfo2Link3CaptionSharingWorkspaces,
onclick:ExperimentEditor.Help.openHelpWindow.bind(undefined,r._TOPIC_ID_SHARING_WORKSPACES,
"")},{caption:DataLab.LocalizedResources.welcomeInfo2Link4CaptionPublishingExperiments,
onclick:ExperimentEditor.Help.openHelpWindow.bind(undefined,r._TOPIC_ID_PUBLISHING,
"")}],moreLink:{caption:DataLab.LocalizedResources.welcomeInfo2MoreCaption,onclick:
ExperimentEditor.Help.openHelpWindow.bind(undefined,r._TOPIC_ID_GUIDE_START,"")}},
{title:DataLab.LocalizedResources.welcomeInfo3Title,text:DataLab.LocalizedResources.
welcomeInfo3Text,links:[{caption:DataLab.LocalizedResources.welcomeInfo3Link1CaptionFeedback,
url:DataLab.LocalizedResources.welcomeInfo3Link1CaptionHrefFeedback,openInNewWindow:
!0},{caption:DataLab.LocalizedResources.welcomeInfo3Link2CaptionFeedback,url:DataLab.
LocalizedResources.welcomeInfo3Link2CaptionHrefFeedback,openInNewWindow:!0}]},{title:
DataLab.LocalizedResources.welcomeInfo4Title,text:DataLab.LocalizedResources.welcomeInfo4Text,
links:[{caption:DataLab.LocalizedResources.welcomeInfo4Link4CaptionOpenSamplesPivot,
onclick:Shell.UI.Navigation.navigate.bind(undefined,{extension:n.experimentExtensionName,
type:"SampleExperiments",name:""})},{caption:DataLab.LocalizedResources.welcomeInfo4Link1CaptionExperiments,
onclick:ExperimentEditor.Help.openHelpWindow.bind(undefined,r._TOPIC_ID_SAMPLE_EXPERIMENTS,
"")},{caption:DataLab.LocalizedResources.welcomeInfo4Link2CaptionDatasets,onclick:
ExperimentEditor.Help.openHelpWindow.bind(undefined,r._TOPIC_ID_SAMPLE_DATA,"")},
{caption:DataLab.LocalizedResources.welcomeInfo4Link3CaptionModels,url:DataLab.LocalizedResources.
welcomeInfo4Link3CaptionHrefModels,openInNewWindow:!0}]},{title:DataLab.LocalizedResources.
welcomeInfo5Title,text:DataLab.LocalizedResources.welcomeInfo5Text,links:[{caption:
DataLab.LocalizedResources.welcomeInfo5Link1CaptionAlphabeticalList,onclick:ExperimentEditor.
Help.openHelpWindow.bind(undefined,r._TOPIC_ID_AZ_LIST,"")}]},{title:DataLab.LocalizedResources.
welcomeInfo6Title,text:DataLab.LocalizedResources.welcomeInfo6Text,links:[{caption:
DataLab.LocalizedResources.welcomeInfo6Link4CaptionMLCenter,url:DataLab.LocalizedResources.
welcomeInfo6Link4CaptionHrefMLCenter,openInNewWindow:!0},{caption:DataLab.LocalizedResources.
welcomeInfo6Link3CaptionMLSupportSite,url:DataLab.LocalizedResources.welcomeInfo6Link3CaptionHrefMLSupportSite,
openInNewWindow:!0},{caption:DataLab.LocalizedResources.welcomeInfo6Link5CaptionWAManagementPortal,
url:DataLab.LocalizedResources.welcomeInfo6Link5CaptionHrefWAManagementPortal,openInNewWindow:
!0}]}],r}(DataLab.Util.Disposable);n.WelcomeView=i}(DataLabViews||(DataLabViews=
{}));ko.observable.fn.toString=function(){return this},function(n){var t;(function(
n){function i(n,r,u,f){f(n.ActivityId).done(function(n){if(n.Status==="Pending")
{r>16&&u.reject(new Error("Exceeded retry count"));var e=Math.pow(2,r)*50;setTimeout(
function(){i(n,r+1,u,f)},e)}else n.Status==="Completed"?u.resolve(n):n.Status===
"Failed"?u.reject(new t("ActivityFailed","Activity failed. Activity Id: "+n.ActivityId,
n)):u.reject(new t("ActivityUnknownStatus","Unknown status returned for activity: "+
n.ActivityId,n))}).fail(function(n){return u.reject(n)})}function r(n,t,r){var u=
$.Deferred();return i(n,0,u,t.bind(r)),DataLab.Util.when(u.promise())}var t=function(
){function n(n,t,i){this.name=n;this.message=t;this.status=i}return n}();n.ActivityError=
t;n.pollOnStatusHandler=i;n.startPolling=r})(t=n.PollingUtility||(n.PollingUtility=
{}))}(ExperimentEditor||(ExperimentEditor={})),function(n){var t;(function(t){function i(
t,i,r){var u=n.WebServiceGroupUtilities.getTag(t,i),f=u.length>0?u[0]:"";return f?
f.substr(r.length).trim():""}function u(t){return i(t,n.ExperimentViewModel.CompetitionUrlTagSearchRegex,
n.ExperimentViewModel.CompetitionUrlTagPrefix)}function f(t){return i(t,n.ExperimentViewModel.
CompetitionTenantIdSearchRegex,n.ExperimentViewModel.CompetitionTenantIdTagPrefix)}
function e(t){return i(t,n.ExperimentViewModel.GalleryUriTagSearchRegex,n.ExperimentViewModel.
GalleryUriTagPrefix)}function o(n,t){if(!t)return[];var i=r(n);return i.filter(function(
n){return t.test(n)})}function r(n){var t=n?n.Tags:null;return t?t:[]}t.getCompetitionUri=
u;t.getCompetitionTenantId=f;t.getGalleryUri=e;t.getTag=o;t.getTags=r})(t=n.WebServiceGroupUtilities||
(n.WebServiceGroupUtilities={}))}(ExperimentEditor||(ExperimentEditor={})),function(
n){var t=$.templates("<div class='datalab-dialog'><\/div>"),i=function(){function n(
){this.dialogDismissedEvent=new ko.subscribable}return n.prototype.isActiveDialog=
function(n){return n===this.activeDialog},n.prototype.acceptActiveDialog=function(
){this.assertDialogIsActive();var n={preventDefault:$.noop,type:"click",which:1};
this.activeDialogElement.fxDialog("ok",n)},n.prototype.closeActiveDialog=function(
){this.assertDialogIsActive();var n=document.createEvent("CustomEvent");n.initEvent(
"close",!0,!0);this.activeDialogElement.fxDialog("close",n)},n.prototype.showNewDialog=
function(n){var i=this,f;this.activeDialog&&this.closeActiveDialog();this.activeDialog=
n;var u=$("<div>").css({display:"none","class":"datalab-azurefx-dialog-content"}).
appendTo(document.body),e=function(n){i.activeDialogElement=n;i.activeDialogElement.
find(".datalab-dialog").append(u);u.css({display:""})},r={template:t,init:function(
){e(this.element);r.postRenderDialog&&r.postRenderDialog.call(this)},ok:function(
){var n=i.activeDialog.canBeAccepted();return n&&(f=!0),n},okOrClose:function(){
i.onDialogDismissed(n,f)}};return n.optionsOverrides&&$.extend(r,n.optionsOverrides),
f=!1,Shell.UI.DialogPresenter.show(r),u.get(0)},n.prototype.onDialogDismissed=function(
n,t){if(!this.isActiveDialog(n))throw new Error("Attempted to dismiss a dialog other than the active one");
this.dialogDismissedEvent.notifySubscribers({dialog:this.activeDialog,accepted:t});
this.activeDialog=null},n.prototype.assertDialogIsActive=function(){if(!this.activeDialog)
throw new Error("No dialog active");},n}();n.AzureFxDialogHost=i}(ExperimentEditor||
(ExperimentEditor={})),function(n){var t;(function(n){function i(){var i=document.
querySelector(".chat-support"),n;i&&ko.applyBindings(t.getInstance(),i);n=document.
querySelector(".chat-support-link-in-help-dropdown");n&&ko.applyBindings(t.getInstance(
),n)}n.initChatControl=i;var t=function(){function n(){var t=this;if(this.showChatButton=
ko.observable(!1),n._instance)throw new Error("Chat view model can only be instatiated once, use getter to access singleton");
window.$zopim&&window.$zopim(function(){$zopim.livechat.setOnStatus(function(n){
t.showChatButton(n==="online")})})}return n.getInstance=function(){return n._instance||
(n._instance=new n),n._instance},n.prototype.toggle=function(){window.$zopim&&window.
$zopim(function(){$zopim.livechat.window.getDisplay()?$zopim.livechat.window.hide(
):$zopim.livechat.window.show()})},n}();n.ChatViewModel=t})(t=n.ShellControls||(n.
ShellControls={}))}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||
function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&
(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(
t){var i=function(i){function r(r,u,f,e){i.call(this);this.workspace=r;this.webServiceGroup=
u;this.competitionUri=f;this.validationEngine=e;this.validationEngine||(this.validationEngine=
new t.CompetitionEntryValidationEngine([new n.CompetitionSubmission.ValidationRuleOnWebServiceExistence,
new n.CompetitionSubmission.ValidationRuleOnWebServiceMissingInputPort,new n.CompetitionSubmission.
ValidationRuleOnWebServiceMissingOutputPort,new n.CompetitionSubmission.ValidationRuleOnWebServiceSchema],
[new n.CompetitionSubmission.ValidationRuleOnExperimentMissingTrainedModel]));var
o=this.getDefaultSubmissionName(),s=new n.CompetitionSubmission.TermAcceptanceStepViewModel,
h=new n.CompetitionSubmission.Step1ViewModel(o),c=new n.CompetitionSubmission.Step2ViewModel(
this.workspace,this.webServiceGroup,this.competitionUri,this.validationEngine),l=
new n.CompetitionSubmission.Step3ViewModel(this.workspace,this.webServiceGroup,this.
competitionUri);this.viewModel=new n.CompetitionSubmission.SubmitCompetitionEntryWizardViewModel(
s,h,c,l)}return __extends(r,i),r.prototype.showDialog=function(t){var e=this,f=new
$.fxs.fxsWizard.WizardStep,u,i,r;f.contentTemplateOptions({name:DataLab.Util.initializeTemplateIfNecessary(
"CompetitionSubmissionTermAcceptanceStepTemplate",ExperimentEditorTemplates._competitionSubmissionTermAcceptanceStepMarkup),
data:this.viewModel.termAcceptanceViewModel});f.title(DataLab.LocalizedResources.
competitionSubmissionWizardTermAcceptanceStepTitle);u=new $.fxs.fxsWizard.WizardStep;
u.contentTemplateOptions({name:DataLab.Util.initializeTemplateIfNecessary("CompetitionSubmissionStep1Template",
ExperimentEditorTemplates._competitionSubmissionStep1Markup),data:this.viewModel.
step1ViewModel});u.title(DataLab.LocalizedResources.competitionSubmissionWizardStep1Title);
i=new $.fxs.fxsWizard.WizardStep;i.contentTemplateOptions({name:DataLab.Util.initializeTemplateIfNecessary(
"CompetitionSubmissionStep2Template",ExperimentEditorTemplates._competitionSubmissionStep2Markup),
data:this.viewModel.step2ViewModel});i.title("");r=new $.fxs.fxsWizard.WizardStep;
r.contentTemplateOptions({name:DataLab.Util.initializeTemplateIfNecessary("CompetitionSubmissionStep3Template",
ExperimentEditorTemplates._competitionSubmissionStep3Markup),data:this.viewModel.
step3ViewModel});r.title("");var s=[f,u,i,r],h={size:[500,400],autoLock:!1,title:
"",stepActivate:function(n){e.viewModel.stepActivate(n)}},o=new n.WizardView(this.
viewModel,s,h);o.onWizardClosingEvent.subscribe(t);this.registerForDisposal(new DataLab.
Util.DisposableSubscription(this.viewModel.step2ViewModel.status.subscribe(function(
n){n===2?i.title(DataLab.LocalizedResources.competitionSubmissionWizardStep2TitleValidationError):
n===3?e.viewModel.step2ViewModel.warnings().length>0?i.title(DataLab.LocalizedResources.
competitionSubmissionWizardStep2TitleValidationFinished):i.title(DataLab.LocalizedResources.
competitionSubmissionWizardStep2TitleValidationSuccessful):n===7&&i.title(DataLab.
LocalizedResources.competitionSubmissionWizardStep2TitleError)})),new DataLab.Util.
DisposableSubscription(this.viewModel.step3ViewModel.status.subscribe(function(n)
{n===4&&r.title(DataLab.LocalizedResources.competitionSubmissionWizardStep3TitleSubmissionSuccessful)}
)));o.show()},r.prototype.getDefaultSubmissionName=function(){var n=new Date,t=n.
getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()+" "+(n.getHours()+1)+":"+(n.getMinutes(
)+1)+":"+(n.getSeconds()+1);return this.webServiceGroup.Name+" @ "+t},r}(DataLab.
Util.Disposable);t.CompetitionSubmissionDialog=i})(t=n.CompetitionSubmission||(n.
CompetitionSubmission={}))}(ExperimentEditor||(ExperimentEditor={})),function(n)
{var t=function(){function n(n,t){var i=this;this.renderArea=t;this.client=n;this.
data=[];this.grid=$(this.renderArea).find("#grid").addClass("usersGrid").fxDataGrid(
{columns:[{name:DataLab.LocalizedResources.type,field:"type"},{name:DataLab.LocalizedResources.
credential,field:"credential"}],data:this.data,selectable:!0,multiselect:!0,resizable:
!0,rowSelect:function(){i.removeCommand.setDisabled(i.grid.fxDataGrid("getSelectedRows").
length===0)},noRows:DataLab.LocalizedResources.credentialsNone})}return n.prototype.
setRemoveCommand=function(n){this.removeCommand=n;this.removeCommand.setDisabled(
this.grid.fxDataGrid("getSelectedRows").length===0)},n.prototype.keypartsToString=
function(n){var t="";return DataLab.Util.forEach(n.Parts,function(n){t+=n.Name+"="+
n.Value}),t},n.prototype.refreshFromService=function(){var n=this;Shell.UI.Spinner.
show();this.client.listCredentials().done(function(t){Shell.UI.Spinner.hide();var
i=[];DataLab.Util.forEach(t,function(t){i.push({type:t.Type,credential:n.keypartsToString(
t),keyParts:t})});$.observable(n.data).refresh(i)})},n.prototype.removeCredentials=
function(){var t=this,i=this.grid.fxDataGrid("getSelectedRows").length,n=new Shell.
UI.Notifications.Confirmation(DataLab.Util.format(DataLab.LocalizedResources.removeCredentialsConfirmation,
i.toString()),"active");n.setActions([new Shell.UI.Notifications.Buttons.yes(function(
){t.doRemoveCredentials();DataLab.Log.customEvent({key:"RemoveCredentials_Yes",type:
"ShellUICommands"})}),new Shell.UI.Notifications.Buttons.no(function(){Shell.UI.
Notifications.remove(n);DataLab.Log.customEvent({key:"RemoveCredentials_No",type:
"ShellUICommands"})})]);Shell.UI.Notifications.add(n)},n.prototype.doRemoveCredentials=
function(){var n=this,t=this.grid.fxDataGrid("getSelectedRows"),i=[];DataLab.Util.
forEach(t,function(t){var r=t.dataItem;i.push(n.client.deleteCredential(r.keyParts))}
);Shell.UI.Spinner.show();$.when.apply($,i).always(function(){n.refreshFromService(
)});DataLab.Log.featureUsage({featureID:14,groupID:15,data:JSON.stringify({amount:
t.length})})},n}();n.CredentialsPivot=t}(ExperimentEditor||(ExperimentEditor={})
),function(n){var t=function(){function n(n,t){var i=this;this.renderArea=t;this.
client=n;this.data=[];this.grid=$(this.renderArea).find("#grid").addClass("usersGrid").
fxDataGrid({columns:[{name:DataLab.LocalizedResources.name,field:"name"},{name:DataLab.
LocalizedResources.description2,field:"description"},{name:DataLab.LocalizedResources.
status,field:"status"}],data:this.data,selectable:!0,multiselect:!0,resizable:!0,
rowSelect:function(){i.removeCommand.setDisabled(i.grid.fxDataGrid("getSelectedRows").
length===0)}})}return n.prototype.setRemoveCommand=function(n){this.removeCommand=
n;this.removeCommand.setDisabled(this.grid.fxDataGrid("getSelectedRows").length===
0)},n.prototype.refreshFromService=function(){var n=this;Shell.UI.Spinner.show();
this.client.listDataImports().done(function(t){Shell.UI.Spinner.hide();var i=[];
DataLab.Util.forEach(t,function(n){i.push({id:n.Id,name:n.DestinationName,description:
n.DestinationDescription,status:n.ImportStatus.StatusCode+(n.ImportStatus.StatusDetail?
" - "+n.ImportStatus.StatusDetail:"")+(n.ActivityId?", Service request ID: "+n.ActivityId:
"")})});$.observable(n.data).refresh(i)})},n.prototype.removeDataImports=function(
){var t=this,i=this.grid.fxDataGrid("getSelectedRows").length,n=new Shell.UI.Notifications.
Confirmation(DataLab.Util.format(DataLab.LocalizedResources.removeDataImportsConfirmation,
i.toString()),"active");n.setActions([new Shell.UI.Notifications.Buttons.yes(function(
){t.doRemoveDataImports();DataLab.Log.customEvent({key:"RemoveDataImport_Yes",type:
"ShellUICommands"})}),new Shell.UI.Notifications.Buttons.no(function(){Shell.UI.
Notifications.remove(n);DataLab.Log.customEvent({key:"RemoveDataImport_No",type:
"ShellUICommands"})})]);Shell.UI.Notifications.add(n)},n.prototype.doRemoveDataImports=
function(){var n=this,i=this.grid.fxDataGrid("getSelectedRows"),t=[];DataLab.Util.
forEach(i,function(i){var r=i.dataItem;t.push(n.client.deleteDataImport(r.id))});
Shell.UI.Spinner.show();$.when.apply($,t).always(function(){n.refreshFromService(
)})},n}();n.DataImportsPivot=t}(ExperimentEditor||(ExperimentEditor={}));__extends=
this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(
i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(
n){var t=function(n){function t(){var t=this;n.call(this);this.MAX_LENGTH=1e3;this.
isExpanded=ko.observable(!1);this.isHappy=ko.observable(!0);this.isSending=!1;this.
question=ko.observable(DataLab.LocalizedResources.feedbackWhatDidYouLike);this.feedbackText=
ko.observable("");this.remainingLength=ko.computed(function(){var n=t.MAX_LENGTH-
t.feedbackText().length;return n>0?n:0});this.remainingLengthText=ko.computed(function(
){return DataLab.Util.format(DataLab.LocalizedResources.feedbackCharactersLeft||
"",t.remainingLength().toString())});this.expand=function(){t.isExpanded()===!1&&
(t.isExpanded(!0),DataLab.Log.customEvent({key:"Open",type:"HeaderBarFeedback"}))}
;this.collapse=function(){t.isExpanded(!1);DataLab.Log.customEvent({key:"Close",
type:"HeaderBarFeedback"})};this.smileyHappySelected=function(){t.isHappy(!0);t.
question(DataLab.LocalizedResources.feedbackWhatDidYouLike);DataLab.Log.customEvent(
{key:"MoodSmileyHappy",type:"HeaderBarFeedback"})};this.smileySadSelected=function(
){t.isHappy(!1);t.question(DataLab.LocalizedResources.feedbackIsThereSomethingWeCanDoBetter);
DataLab.Log.customEvent({key:"MoodSmileySad",type:"HeaderBarFeedback"})};this.sendFeedback=
function(){if(t.isSending===!0)return!1;t.isSending=!0;var n={isHappy:t.isHappy(
),src:"feedbackBox",content:t.feedbackText()},i=JSON.stringify(n);Shell.Diagnostics.
Telemetry.feedbackInfo(i,undefined);DataLab.Log.featureUsage({featureID:20,groupID:
21,data:JSON.stringify({isHappy:t.isHappy()})});t.feedbackText("");t.collapse();
t.isSending=!1}}return __extends(t,n),t}(DataLab.Util.Disposable);n.FeedbackControlViewModel=
t})(t=n.Feedback||(n.Feedback={}))}(ExperimentEditor||(ExperimentEditor={})),function(
n){var t;(function(t){function i(){var i=$(ExperimentEditorTemplates._feedbackControlMarkup),
r,t;Impl.UI.HeaderBar.addControl(i);r=i.get(0);t=new n.Feedback.FeedbackControlViewModel;
ko.applyBindings(t,r);$("body").click(function(n){t.isExpanded()&&$(n.target).parents(
".datalab-feedback").length===0&&t.collapse()})}t.initFeedbackControl=i})(t=n.ShellControls||
(n.ShellControls={}))}(ExperimentEditor||(ExperimentEditor={})),function(n){var t;
(function(n){var t,r,i,u;(function(n){n.resultsPerPage=10;n.maxLengthOfDatasetName=
100;n.pageBatchSize=5;n.maxDescription=110})(t=n.Constants||(n.Constants={}));r=
function(){function n(n){this.resultTitle=n.Title;this.resultDescription=n.Description;
this.resultDataUrl=n.DataSourceAddress;this.resultDataType=n.DataSourceType;this.
resultDataAuthentication=n.DataSourceAuthentication;this.resultDataProtocol=n.DataSourceProtocol;
this.resultPreviewUrl=n.DataPreviewAddress;this.iconUrl=n.PublisherIconUrl;this.
iconVisible=!!this.iconUrl;this.hovered=ko.observable(!1);this.shortDescription=
this.resultDescription&&this.resultDescription.length>t.maxDescription?this.resultDescription.
substr(0,t.maxDescription)+"...":this.resultDescription}return n}();n.SearchResultViewModel=
r;i=function(){function n(n,t,i){var u=this,r;this.pageId=n;this.selected=ko.observable(
t);r=function(n){n&&i(u.pageId)};this.selected.subscribe(r);r(t)}return n}();n.SearchResultsPage=
i;n.windowHeight=null;u=function(){function n(n,t){var i=this;this.searchResults=
ko.observableArray();this.searchQuery=ko.observable("");this.hoveredItem=ko.observable(
null);this.noResultsFound=ko.observable(!1);this.searchResultCount=ko.observable(
0);this.searchResultPages=ko.observableArray();this.currentPage=ko.observable(0);
this.pageCount=ko.observable(0);this.headerText=ko.computed(function(){return i.
searchResultCount()+" results"});this.previewTitle=ko.computed(function(){return i.
hoveredItem()?i.hoveredItem().resultTitle:""});this.previewDescription=ko.computed(
function(){return i.hoveredItem()?i.hoveredItem().resultDescription:""});this.selectedPreviewAddress=
ko.computed(function(){return i.hoveredItem()?i.hoveredItem().resultPreviewUrl:""}
);this.datalabPreviewUrl=ko.computed(function(){return i.selectedPreviewAddress(
)?"/Home/Preview?url="+i.selectedPreviewAddress():""});this.previousEnabled=ko.computed(
function(){return i.currentPage()>1});this.nextEnabled=ko.computed(function(){return i.
pageCount()>i.currentPage()});this.searchActive=ko.observable(!1);this.previewLoadActive=
ko.observable(!1);this.spinnerActive=ko.computed(function(){var n=i.searchActive(
)||i.previewLoadActive();return n?Shell.UI.Spinner.show():Shell.UI.Spinner.hide(
),n});this.refresh(n,t)}return n.prototype.refresh=function(n,t){this.searchBoxFocus=
!0;this.parent=t;this.client=n},n.prototype.selectItem=function(){this.parent.launchSaveDatasetDialog(
)},n.prototype.selectPreview=function(n){this.hoveredItem()!==n&&(DataLab.Util.forEach(
this.searchResults(),function(n){n.hovered(!1)}),this.hoveredItem(n),n.hovered(!0),
this.previewLoadActive(!0))},n.prototype.doSearch=function(n,u,f){var e=this;this.
searchActive(!0);this.activeQuery=n;this.activePage=u;this.client.ssimSearch(n,u,
t.resultsPerPage).done(function(o){var h,s;if(n===e.activeQuery&&u===e.activePage)
{if(h=o,e.searchResults.removeAll(),DataLab.Util.forEach(h.SearchResults,function(
n){n.Title=n.Title.trim();e.searchResults.push(new r(n))}),e.searchResultCount(h.
TotalResults),e.noResultsFound(e.searchResults().length===0),f){for(e.pageCount(
Math.floor((h.TotalResults-1)/t.resultsPerPage)+1),s=0;s<Math.min(t.pageBatchSize,
e.pageCount());s++)e.searchResultPages.push(new i(s+1,!1,e.currentPage));s>0&&e.
searchResultPages()[0].selected(!0)}e.searchActive(!1)}})},n.prototype.search=function(
){this.searchResults.removeAll();this.searchResultPages.removeAll();this.hoveredItem(
null);this.noResultsFound(!1);this.searchResultCount(0);this.currentPage(0);this.
pageCount(0);var n=encodeURIComponent(this.searchQuery().trim().replace(/</g,""));
n.length>t.maxLengthOfDatasetName&&(n="",this.searchQuery(""));n&&(this.currentQuery=
n,this.doSearch(n,1,!0))},n.prototype.doSwitchPage=function(n){this.hoveredItem(
null);this.doSearch(this.currentQuery,n.pageId,!1);DataLab.Util.forEach(this.searchResultPages(
),function(n){n.selected(!1)});n.selected(!0)},n.prototype.center=function(n){var
s=Math.floor(t.pageBatchSize/2),r,f;this.searchResultPages.removeAll();var e=null,
u=Math.max(1,n-s),o=Math.min(u+t.pageBatchSize-1,this.pageCount());for(o-u<t.pageBatchSize-
1&&(u=Math.max(1,this.pageCount()-t.pageBatchSize+1)),r=u;r<=o;r++)r>0&&r<=this.
pageCount()&&(f=new i(r,!1,this.currentPage),this.searchResultPages.push(f),r===
n&&(e=f));return e},n.prototype.switchPage=function(n){this.doSwitchPage(this.center(
n.pageId))},n.prototype.prevPage=function(){var n=this.currentPage()-1;this.doSwitchPage(
this.center(n))},n.prototype.nextPage=function(){var n=this.currentPage()+1;this.
doSwitchPage(this.center(n))},n.prototype.handleKeypress=function(n,t){return t.
keyCode===13?(this.search(),!1):!0},n.prototype.iframeLoad=function(){this.previewLoadActive(
!1)},n}();n.SearchTabViewModel=u})(t=n.SSIMSearch||(n.SSIMSearch={}))}(ExperimentEditor||
(ExperimentEditor={})),function(n){var t;(function(n){var t=function(){function n(
n,t,i,r){this.dataset=new DataLab.Model.UnsavedResource(t,t.datasetCache,t.datasetUploadsInProgress,
DataLab.Constants.DatasetName);this.dataset.name(n.resultTitle);this.dataset.description(
n.resultDescription);this.dataUrl=n.resultDataUrl;this.selectedItem=n;this.workspace=
t;this.client=i;this.activeNotifications=r}return n.prototype.dismissed=function(
n){n.accepted?this.saveData():DataLab.Log.info("SSIM Dataset upload dialog cancelled")}
,n.prototype.canBeAccepted=function(){return this.dataset.startValidating(),this.
dataset.isValid()},n.prototype.saveData=function(){var t=this,i=$.Deferred(),u;DataLab.
Log.info("SSIM Dataset upload dialog accepted");var f={Name:this.dataset.name(),
Description:this.dataset.description(),FamilyId:this.dataset.familyId()?this.dataset.
familyId():"",SsimDataSourceUrl:this.selectedItem.resultDataUrl,DataSourceType:this.
selectedItem.resultDataType,DataSourceProtocol:this.selectedItem.resultDataProtocol,
DataSourceAuthentication:this.selectedItem.resultDataAuthentication},e=DataLab.LocalizedResources.
ssimPendingDataset,r=DataLab.LocalizedResources.ssimUploadSuccess,n=new Shell.UI.
Notifications.Progress(e,"active",!1);return this.activeNotifications.push(n),n.
setActions([new Shell.UI.Notifications.Buttons.ok(function(){Shell.UI.Notifications.
remove(n);DataLab.Util.removeElementFromArray(t.activeNotifications,n)})]),Shell.
UI.Notifications.add(n),u=function(t){n.setTitle(t);n.setStatus("error");i.reject(
t)},this.client.saveSsimData(f).done(function(o){var s=new DataLab.Util.Repeater(
function(){return t.client.getDataImport(o).done(function(o){switch(o.ImportStatus.
StatusCode){case 3:u(DataLab.Util.format(DataLab.LocalizedResources.ssimUploadFailed,
o.ImportStatus.StatusDetail));s.stop();break;case 4:n.setTitle(DataLab.Util.format(
DataLab.LocalizedResources.ssimUpdatingCache,r));n.setValue(100);t.client.listDatasetsAsync(
).done(function(u){var e=DataLab.Util.first(u,function(n){return n.Name===f.Name}
,null);t.workspace.datasetCache.getItem(e.Id).done(function(){n.setTitle(r);n.setStatus(
"success");i.resolve(r)})});s.stop();break;case 0:n.setTitle(e);break;case 2:n.setTitle(
DataLab.LocalizedResources.ssimDatasetUploading);n.setValue(50);break;default:u(
DataLab.LocalizedResources.ssimUnexpectedError);s.stop()}})},500);s.start()}),i.
promise()},n}();n.SaveDatasetViewModel=t})(t=n.SSIMSearch||(n.SSIMSearch={}))}(ExperimentEditor||
(ExperimentEditor={})),function(n){var t;(function(t){var i=null,r=function(){function r(
n,r,u){var e=this,f;this.client=r;this.workspace=u;i?i.refresh(r,this):i=new t.SearchTabViewModel(
r,this);this.viewModel=i;f=$("#idSearchTemplate").get(0);ko.applyBindings(this.viewModel,
f);this.activeNotifications=[];$(window).one("hashchange",function(){e.removeNotifications(
);ko.cleanNode(f)})}return r.prototype.removeNotifications=function(){this.activeNotifications.
forEach(function(n){Shell.UI.Notifications.remove(n)});this.activeNotifications=
[]},r.prototype.launchSaveDatasetDialog=function(){var i=this.viewModel.hoveredItem(
),r;i&&(r=new t.SaveDatasetViewModel(i,this.workspace,this.client,this.activeNotifications),
n.DialogViews.SaveSSSIMDataset.show(r))},r}();t.SearchView=r})(t=n.SSIMSearch||(n.
SSIMSearch={}))}(ExperimentEditor||(ExperimentEditor={})),function(n){var t=function(
){function n(n,t){this.packageName=ko.observable(n);this.error=t}return n}();n.PublishModelPackageDialogViewModel=
t}(ExperimentEditor||(ExperimentEditor={})),function(n){var t,i,u,r;(function(n)
{var t;(function(n){n.inviteText=DataLab.LocalizedResources.enterAddresses;n.reinviteText=
DataLab.LocalizedResources.incorrectEmailPleaseCorrect;n.title=DataLab.LocalizedResources.
inviteUsers;n.userRoleDescription=DataLab.LocalizedResources.userActions;n.ownerRoleDescription=
DataLab.LocalizedResources.ownerActions;n.invalidRowMarkupTemplate="<span class='invitationDialogInvalidAddress' onclick=\"$(this).removeClass('invitationDialogInvalidAddress')\">%%EMAIL%%<\/span>;&nbsp;";
n.userActiveText=DataLab.LocalizedResources.workspaceUserInviteActiveText;n.userInvitedText=
DataLab.LocalizedResources.workspaceUserInviteInvitedText;n.inviteDialogSize=[800,
520]})(t=n.UsersPivot||(n.UsersPivot={}))})(t=n.Constants||(n.Constants={}));i=function(
){function n(){}return n}();n.InvitationDialogViewModel=i,function(n){n[n.User=0]=
"User";n[n.Invitation=1]="Invitation"}(n.EntityType||(n.EntityType={}));u=n.EntityType;
r=function(){function n(n,t){var i=this;this.client=n;this.renderArea=t;this.data=
[];this.grid=$(this.renderArea).find("#grid").addClass("usersGrid").fxDataGrid({
columns:[{name:DataLab.LocalizedResources.name,field:"name"},{name:DataLab.LocalizedResources.
email,field:"email"},{name:DataLab.LocalizedResources.role,field:"role"},{name:DataLab.
LocalizedResources.status,field:"status"},],data:this.data,selectable:!0,multiselect:
!0,resizable:!0,rowSelect:function(){i.removeCommand.setDisabled(i.grid.fxDataGrid(
"getSelectedRows").length===0)}})}return n.prototype.refreshFromService=function(
){var n=this;Shell.UI.Spinner.show();this.client.listUsersAndInvitationsAsync().
done(function(i){Shell.UI.Spinner.hide();n.ownersCount=0;var r=[];i.forEach(function(
i){if(i.User){var e=i.Status,u=0,f=t.UsersPivot.userActiveText;DataLab.WorkspaceManagement.
InvitationStatus[e]==0&&(u=1,f=t.UsersPivot.userInvitedText);r.push({entityType:
u,id:i.User.UserId,name:i.User.Name,email:i.User.Email,role:i.User.Role,status:f});
u===0&&i.User.Role==="Owner"&&n.ownersCount++}else throw DataLab.LocalizedResources.
userAndInvitationNull;});$.observable(n.data).refresh(r)})},n.prototype.removeEntity=
function(n){return n.entityType===0?this.client.removeUser(n.id):n.entityType===
1?this.client.removeUser(n.email):void 0},n.prototype.removeUsers=function(){var
u=this,n=this.grid.fxDataGrid("getSelectedRows"),i=n.length,r=0,f,t;if(n.forEach(
function(n){var t=n.dataItem;t.entityType===0&&t.role==="Owner"&&r++}),r===this.
ownersCount){this.addFailNotification(DataLab.LocalizedResources.cannotRemoveAllOwners);
return}f=0;t=i>1?new Shell.UI.Notifications.Confirmation(DataLab.Util.format(DataLab.
LocalizedResources.removeUsers,i),"active"):new Shell.UI.Notifications.Confirmation(
DataLab.Util.format(DataLab.LocalizedResources.removeUser,n[0].dataItem.email),"active");
t.setActions([new Shell.UI.Notifications.Buttons.yes(function(){u.doRemoveUsers(
n);DataLab.Log.customEvent({key:"RemoveUsers",type:"Settings",data:n.length})}),
new Shell.UI.Notifications.Buttons.no(function(){Shell.UI.Notifications.remove(t);
DataLab.Log.customEvent({key:"RemoveUsersAttemptCancelled",type:"Settings"})})]);
Shell.UI.Notifications.add(t)},n.prototype.doRemoveUsers=function(n){var t=this,
i=0,r=[];Shell.UI.Spinner.show();n.forEach(function(n){r.push(t.removeEntity(n.dataItem).
fail(function(){i++}))});$.when.apply($,r).always(function(){t.refreshFromService(
);i>0&&t.addFailNotification("Failed to remove "+i+" out of "+n.length+", Unknown error occured")}
)},n.prototype.launchInvitationDialog=function(n){var o=this,s=n?t.UsersPivot.reinviteText:
t.UsersPivot.inviteText,u=$("<div/>"),r,e,f;u.fxsDialog({closing:function(n){n.completed&&
r.text()&&o.sendInvitations(r.text())},size:t.UsersPivot.inviteDialogSize});e=u.
fxsDialog("getViewModel");e.title(t.UsersPivot.title);e.content(ExperimentEditorTemplates.
_invitationDialogMarkup);$(".fxs-modalpresenter").fxsModalPresenter("open",u);r=
u.find(".invitationDialogAddressesBox");r.html(n);r.focus();this.viewModel=new i;
this.viewModel.error=n!=="";this.viewModel.role=ko.observable();this.viewModel.instructions=
s;this.viewModel.roleDescription=ko.computed(function(){return o.viewModel.role(
)==="Owner"?t.UsersPivot.ownerRoleDescription:t.UsersPivot.userRoleDescription});
this.viewModel.pressHandler=function(n,t){var i,u;return t.keyCode===13?(r.html(
r.html()+"; "),i=document.createRange(),i.selectNodeContents(r.get(0)),i.collapse(
!1),u=window.getSelection(),u.removeAllRanges(),u.addRange(i),!1):!0};f=!1;u.on(
"dragstart",function(){f=!0});u.on("drop",function(){return f?(f=!1,!1):!0});ko.
applyBindings(this.viewModel,u.find(".invitationDialogContent").get(0))},n.prototype.
sendInvitations=function(n){var r=this,u,i;n.trim()||this.launchInvitationDialog(
"");Shell.UI.Spinner.show();u=this.viewModel.role();i={Emails:n,Role:u};DataLab.
Log.customEvent({key:"InviteUsers",type:"Settings",data:JSON.stringify(i)});this.
client.sendInvitation(i).done(function(n){var u=n,f=DataLab.Util.first(u,function(
n){return n.Failed},!1),i;f?(i="",u.forEach(function(n){i+=n.Failed?t.UsersPivot.
invalidRowMarkupTemplate.replace("%%EMAIL%%",DataLab.Util.encodeAsHtml(n.Email)):
DataLab.Util.encodeAsHtml(n.Email)+";&nbsp;"}),setTimeout(function(){r.launchInvitationDialog(
i);Shell.UI.Spinner.hide()},500)):r.refreshFromService()}).fail(function(){Shell.
UI.Spinner.hide();var i=DataLab.Util.format(DataLab.LocalizedResources.invitationCouldNotSendInvitationTo,
n),t=new Shell.UI.Notifications.Notification(i,"error");t.setActions([new Shell.
UI.Notifications.Buttons.ok]);Shell.UI.Notifications.add(t)})},n.prototype.setRemoveCommand=
function(n){this.removeCommand=n;this.removeCommand.setDisabled(this.grid.fxDataGrid(
"getSelectedRows").length===0)},n.prototype.addFailNotification=function(n){var t=
new Shell.UI.Notifications.Notification(n,"error");t.setActions([new Shell.UI.Notifications.
Buttons.close(function(){Shell.UI.Notifications.remove(t)})]);Shell.UI.Notifications.
add(t)},n}();n.UsersPivot=r}(ExperimentEditor||(ExperimentEditor={})),function(n)
{var t;(function(n){function h(n,t){s=n;var i=$("<div/>");Impl.UI.HeaderBar.addControl(
i);n.listWorkspacesAsync().done(function(r){c(i,n.workspaceId,r,t)})}function i(
n){return n?n:"-"}function e(n,t){return i(n)+"\r\n"+DataLab.LocalizedResources.
description+i(t)}function c(n,s,h,c){var n,v,y,a=[],l=DataLab.Util.first(h,function(
n){return n.WorkspaceId===s},null);l||(l={WorkspaceId:s,FriendlyName:"Workspace",
Description:""},h.push(l));a.push({type:"text",text:DataLab.LocalizedResources.workspaceBarWorkspaces,
setup:function(n){n.addClass(t.WorkspacesBar.menuHeaderItemClass)}});h.forEach(function(
n){a.push({type:"text",text:i(n.FriendlyName),setup:function(i){i.addClass(t.WorkspacesBar.
menuItemClass).attr("title",e(n.FriendlyName,n.Description));n===l&&(i.addClass(
t.WorkspacesBar.fxsSelectedItemClass),v=i)},click:function(){n!==l&&(Shell.UI.Spinner.
show(),DataLab.Log.customEvent({key:"SwitchWorkspace",type:"Settings",workspaceID:
n.WorkspaceId}),window.location.href="/Home/ViewWorkspace/"+n.WorkspaceId)}})});
a.push({type:"separator"});a.push({type:"text",text:DataLab.LocalizedResources.workspaceBarUsefulActions,
setup:function(n){n.addClass(t.WorkspacesBar.menuHeaderItemClass)}});a.push({type:
"text",text:DataLab.LocalizedResources.workspaceBarRenameWorkspace,click:function(
){Shell.UI.Navigation.navigate({extension:"Settings",view:"Name"});o.settingsNameFocusOnNameBox=
!0}});c&&a.push({type:"text",text:DataLab.LocalizedResources.workspaceBarManageWorkspaceUsers,
click:function(){Shell.UI.Navigation.navigate({extension:"Settings",view:"Users"})}
});n.fxsAvatarBar({menuItems:a,name:""});n.addClass(t.WorkspacesBar.workspaceManagerClass);
var w=n.find(".fxs-avatarbar-menu"),p=!1,b=600,k=500;y=function(t){var i,r;t?(n.
removeAttr("title"),i=v.position().top,i>b&&!p&&(w.animate({scrollTop:i},k),p=!0)):
(r=e(l.FriendlyName,l.Description),n.attr("title",r))};n.fxsAvatarBar("getViewModel").
menuOpen.subscribe(function(n){y(n)});r=function(t,r){l.FriendlyName=i(t);l.Description=
i(r);n.fxsAvatarBar("getViewModel").name(l.FriendlyName);v.attr("title",e(t,r));
v.find("a").text(l.FriendlyName);y(n.fxsAvatarBar("getViewModel").menuOpen())};(
u||f)&&(l.FriendlyName=u,l.Description=f);r(l.FriendlyName,l.Description)}function l(
n){r?r(n.friendlyName(),n.description()):(u=n.friendlyName(),f=n.description())}
var r=null,s,u=null,f=null,t,o;(function(n){var t;(function(n){n.workspaceManagerClass=
"datalab-workspace-manager";n.menuHeaderItemClass="workspaces-menu-header-item";
n.menuItemClass="workspaces-menu-item";n.fxsSelectedItemClass="fxs-contextmenu-languagepicker-selected";
n.maxTopPosition=600;n.animationDuration=500})(t=n.WorkspacesBar||(n.WorkspacesBar=
{}))})(t=n.Constants||(n.Constants={})),function(n){n.settingsNameFocusOnNameBox=
!1}(o=n.WorkspacesBar||(n.WorkspacesBar={}));n.createWorkspacesBar=h;n.updateBar=
l})(t=n.ShellControls||(n.ShellControls={}))}(ExperimentEditor||(ExperimentEditor=
{}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t=[{text:"Yes",value:!0},{text:"No",value:!1}],i=function(
i){function r(r,u,f,e){var o=this,h,s;e===void 0&&(e=!1);i.call(this);this.hasBeenEdited=
ko.observable(!1);this.spaceQuota=ko.observable();this.spaceQuotaNote=DataLab.Util.
format(DataLab.LocalizedResources.workspacePageGetMoreStorage,DataLab.Util.format(
'<a href="{1}" target="_blank">{0}<\/a>',DataLab.LocalizedResources.workspacePageStorageLearnMore,
DataLab.LocalizedResources.workspacePageStorageLearnMoreUrl));this.accountInfo=ko.
observableArray([]);this.client=r;this.workspace=u;this.renderArea=f;this.isReadOnly=
e;this.workspaceTypeText=ko.observable();this.workspaceSettings=ko.observable(null);
$("#UseDefaultHDInsightRadio").fxRadio({values:t,trackedit:!1,change:function(n,
t){o.workspaceSettings().useDefaultHDInsightSettings(t.value.value);o.settingsUpdated(
)}});Shell.UI.Spinner.show();h=this.workspace.getWorkspaceSettingsAsync().done(function(
i){o.workspaceSettings(i);o.workspaceTypeText(o.getTextForWorkspaceType(i.type));
n.ShellControls.updateBar(o.workspaceSettings());n.ShellControls.WorkspacesBar.settingsNameFocusOnNameBox&&
(o.renderArea.find("#FriendlyName").focus().select(),n.ShellControls.WorkspacesBar.
settingsNameFocusOnNameBox=!1);$("#UseDefaultHDInsightRadio").fxRadio("option","value",
DataLab.Util.first(t,function(n){return n.value===o.workspaceSettings().useDefaultHDInsightSettings(
)}));o.accountInfo.push({label:DataLab.LocalizedResources.workspaceId,value:i.id});
DataLab.Features.showSubscriptionInfoEnabled()&&DataLab.Model.WorkspaceTypeExtensions.
isProduction(i.type)&&(i.createdTime&&o.accountInfo.push({label:DataLab.LocalizedResources.
workspaceCreationTime,value:i.createdTime.toLocaleString()}),i.ownerEmail&&o.accountInfo.
push({label:DataLab.LocalizedResources.workspaceOwnersEmail,value:i.ownerEmail}),
i.subscriptionId&&o.accountInfo.push({label:DataLab.LocalizedResources.workspaceSubscriptionId,
value:i.subscriptionId}),i.userStorage&&o.accountInfo.push({label:DataLab.LocalizedResources.
workspaceStorageAccount,value:i.userStorage}));o.hasBeenEdited(!1)}).fail(function(
){throw new Error("Load workspace settings failed.");});s=null;s=DataLab.Features.
storageUsageWidgetEnabled()&&DataLab.Trial.isWorkspaceTypeFree()&&DataLab.Features.
enableWorkspaceQuotasEnabled()?this.workspace.getStorageSpaceQuotaAsync().done(function(
n){o.spaceQuota({used:n.UsedStorage/1073741824,total:n.MaximumStorage/1073741824,
usedLabel:DataLab.LocalizedResources.workspacePageUsed,totalLabel:DataLab.LocalizedResources.
workspacePageAvailable,unitLabel:DataLab.LocalizedResources.workspacePageGB,unitLabelLong:
DataLab.LocalizedResources.workspacePageGigabytes,overCapacityLabel:DataLab.LocalizedResources.
storageOverCapacity})}).fail(function(){DataLab.Log.error("Storage quota request failed.")}
):$.Deferred().resolve();$.when(h,s).always(function(){Shell.UI.Spinner.hide()});
this.registerForDisposal(new DataLab.Util.DisposableKOApplyBindings(this,this.renderArea.
get(0)))}return __extends(r,i),r.prototype.refreshFromService=function(){var i=this;
Shell.UI.Spinner.show();this.workspace.getWorkspaceSettingsAsync().done(function(
r){i.workspaceSettings(r);i.workspaceTypeText(i.getTextForWorkspaceType(r.type));
n.ShellControls.updateBar(i.workspaceSettings());$("#UseDefaultHDInsightRadio").
fxRadio("option","value",DataLab.Util.first(t,function(n){return n.value===i.workspaceSettings(
).useDefaultHDInsightSettings()}));i.hasBeenEdited(!1);Shell.UI.Spinner.hide()}).
fail(function(){throw new Error("Load workspace settings failed.");})},r.prototype.
settingsUpdated=function(){this.hasBeenEdited()||this.hasBeenEdited(!0)},r.prototype.
regeneratePrimary=function(){this.showConfirmation(!0)},r.prototype.regenerateSecondary=
function(){this.showConfirmation(!1)},r.prototype.showConfirmation=function(n){var
i=this,r=n?"Primary":"Secondary",t=new Shell.UI.Notifications.Confirmation(DataLab.
Util.format(DataLab.LocalizedResources.workspaceRegenerateAuthTokenConfirmation,
r,this.workspaceSettings().friendlyName()),"active");t.setActions(Shell.UI.Notifications.
ButtonSets.yesNo(function(){i.regenerateAuthorizationToken(n);DataLab.Log.customEvent(
{key:"RegenerateAuthToken",type:"Settings",data:"isPrimary = "+n.toString()})}));
Shell.UI.Notifications.add(t)},r.prototype.update=function(){var t=this;this.isReadOnly||
this.workspaceSettings().validateAll()&&(Shell.UI.Spinner.show(),DataLab.Log.customEvent(
{key:"SaveWorkspace",type:"Settings"}),this.workspace.updateWorkspaceSettings(this.
workspaceSettings(),0).done(function(){n.ShellControls.updateBar(t.workspaceSettings(
));t.refreshFromService();Shell.UI.Spinner.hide()}).fail(function(n){if(n instanceof
DataLab.Util.AjaxError&&n.xmlHttpRequest&&n.xmlHttpRequest.status===412){var i=t.
errorNotificationProgress(DataLab.Util.format(DataLab.LocalizedResources.workspaceUnableToSaveYourChangesPleaseRefresh,
DataLab.LocalizedResources.productName));Shell.UI.Notifications.add(i);Shell.UI.
Spinner.hide()}else throw new Error("Update workspace settings failed.");}))},r.
prototype.regenerateAuthorizationToken=function(n){var t=this,i=n?1:2;Shell.UI.Spinner.
show();this.workspace.updateWorkspaceSettings(this.workspaceSettings(),i).done(function(
){t.refreshFromService();Shell.UI.Spinner.hide()}).fail(function(n){if(n instanceof
DataLab.Util.AjaxError&&n.xmlHttpRequest&&n.xmlHttpRequest.status===412){var i=t.
errorNotificationProgress(DataLab.Util.format(DataLab.LocalizedResources.workspaceUnableToRegenAuthToken,
DataLab.LocalizedResources.productName));Shell.UI.Notifications.add(i);Shell.UI.
Spinner.hide()}else throw new Error("Regenerate authorization token failed.");})}
,r.prototype.discard=function(){this.refreshFromService()},r.prototype.errorNotificationProgress=
function(n){var t=new Shell.UI.Notifications.Progress(n,"active",!0);return t.setStatus(
"error"),t.setActions([new Shell.UI.Notifications.Buttons.close]),t},r.prototype.
getTextForWorkspaceType=function(n){switch(n){case 1:return DataLab.LocalizedResources.
workspacePageWorkspaceTypeFree;case 2:return DataLab.LocalizedResources.workspacePageWorkspaceTypeAnonymous
default:return DataLab.Model.WorkspaceTypeExtensions.isProduction(n)?DataLab.LocalizedResources.
workspacePageWorkspaceTypeProduction:null}},r}(DataLab.Util.Disposable);n.WorkspaceSettings=
i}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(n,
t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);
r.prototype=t.prototype;n.prototype=new r},function(n){var s,c,i,o;(function(n){
var t;(function(n){n.title=DataLab.LocalizedResources.dataGateways})(t=n.DataGatewaysPivot||
(n.DataGatewaysPivot={}))})(s=n.Constants||(n.Constants={}));var f="gatewayIconBad",
e="gatewayIconWarn",u="gatewayIconGood",t=DataLab.LocalizedResources,h=DataLab.DataContract.
gatewayState,r=[];r[0]={icon:"",text:t.none};r[1]={icon:f,text:t.notRegistered};
r[3]={icon:e,text:t.offline};r[2]={icon:u,text:t.online};r[5]={icon:"",text:t.other};
r[4]={icon:u,text:t.online};c=DataLab.DataContract.gatewayVersionState;i=[];i[0]=
{icon:"",text:""};i[4]={icon:f,text:t.updateRequired};i[3]={icon:e,text:t.updateRequired};
i[2]={icon:"",text:t.updateAvailable};i[1]={icon:u,text:t.upToDate};i[5]={icon:"",
text:""};o=function(n){function u(i,r){var u=this;n.call(this);this.backend=i;this.
renderArea=r;this.data=[];this.selectedItem=ko.observable(null);this.selectionEnabledCommands=
[];this.resources=DataLab.LocalizedResources;this.grid=$(this.renderArea).find("#grid").
fxDataGrid({columns:[{name:this.resources.name,field:"Name",sorted:"ascending"},
{name:this.resources.host,field:"Host"},{name:this.resources.status,formatter:this.
formatGatewayStatus,field:"Status"}],data:this.data,selectable:!0,multiselect:!1,
resizable:!0,rowSelect:function(n,t){var i=u.grid.fxDataGrid("getSelectedRows").
length===0;u.selectionEnabledCommands.forEach(function(n){return n.setDisabled(i)}
);t.selected?u.selectedItem(t.selected.dataItem):u.selectedItem(null)}});this.statusClass=
ko.pureComputed(function(){return u.selectedItemStatusMap().icon});this.statusText=
ko.pureComputed(function(){return u.selectedItemStatusMap().text});this.statusMessageHtml=
ko.pureComputed(function(){if(u.selectedItem())switch(u.selectedItem().Gateway.Status)
{case 1:return t.notRegisteredMessageHtml;case 3:if(u.selectedItem().Gateway.VersionStatus!==
4)return t.gatewayOfflineMessageHtml}return null});this.lastConnected=ko.pureComputed(
function(){return u.selectedItem()&&u.selectedItem().Gateway.LastConnectTime?DataLab.
Util.formatDate(u.selectedItem().Gateway.LastConnectTime):""});this.created=ko.pureComputed(
function(){return u.selectedItem()&&u.selectedItem().Gateway.CreateTime?DataLab.
Util.formatDate(u.selectedItem().Gateway.CreateTime):""});this.registered=ko.pureComputed(
function(){return u.selectedItem()&&u.selectedItem().Gateway.RegisterTime?DataLab.
Util.formatDate(u.selectedItem().Gateway.RegisterTime):""});this.versionStatusClass=
ko.pureComputed(function(){return u.selectedItemVersionStatusMap().icon});this.versionStatusText=
ko.pureComputed(function(){return u.selectedItemVersionStatusMap().text});this.versionStatusMessageHtml=
ko.pureComputed(function(){if(u.selectedItem())switch(u.selectedItem().Gateway.VersionStatus)
{case 2:return t.gatewayGetNewVersionHtml;case 3:return DataLab.Util.format(t.gatewayExpiringVersionHtml,
DataLab.Util.formatDate(u.selectedItem().Gateway.ExpiryTime));case 4:return t.gatewayExpiredVersionHtml}
return null});this.registerForDisposal(new DataLab.Util.DisposableKOApplyBindings(
this,$(this.renderArea).find("#propertiesPane").get(0)))}return __extends(u,n),u.
prototype.selectedItemStatusMap=function(){return this.selectedItem()&&this.selectedItem(
).Gateway.Status?r[this.selectedItem().Gateway.Status]:r[0]},u.prototype.selectedItemVersionStatusMap=
function(){return this.selectedItem()&&this.selectedItem().Gateway.VersionStatus?
i[this.selectedItem().Gateway.VersionStatus]:i[0]},u.prototype.formatGatewayStatus=
function(n,u){var f=u.rowMetadata.dataItem.Gateway,e=(f.Status?"<span class='"+r[
f.Status].icon+"'>"+r[f.Status].text+"<\/span>":"")+(f.VersionStatus?" - <span class='"+
i[f.VersionStatus].icon+"'>"+i[f.VersionStatus].text+"<\/span>":"");return f.VersionStatus===
3&&f.ExpiryTime&&(e+=" "+DataLab.Util.format(t.byDate,DataLab.Util.formatDate(f.
ExpiryTime))),e},u.prototype.refreshFromService=function(){var n=this;return Shell.
UI.Spinner.show(),this.backend.getGateways().then(function(t){Shell.UI.Spinner.hide(
);var i=n.selectedItem()?n.selectedItem().Name:null,r=t.map(function(n){return{Name:
n.GatewayName,Host:n.Host?n.Host:"",Status:h[n.Status],Gateway:n}});$.observable(
n.data).refresh(r);n.setSelectedGateway(i)})},u.prototype.setSelectedGateway=function(
n){var u,f,r,i,t,e,o;if(n!==null){for(u=null,f=this.grid.fxDataGrid("option","data"),
t=0,e=f.length;t<e;t++)if(f[t].Name.toUpperCase()===n.toUpperCase()){u=f[t];break}
if(u!==null){for(r=this.grid.fxDataGrid("option","rowMetadata"),i=null,t=0,e=r.length;
t<e;t++)if(r[t].dataItem===u){i=r[t];break}o=this.grid.fxDataGrid("getSelectedRows");
$.each(o,function(){$.observable(this).setProperty("selected",!1)});i||(i={dataItem:
u},$.observable(r).insert(r.length,i));$.observable(i).setProperty("selected",!0);
this.grid.fxDataGrid("option","rowSelect")(null,{selected:i})}}},u.prototype.setCommands=
function(){var r=new Shell.UI.Commands.Command(DataLab.LocalizedResources.newDataGateway,
Shell.UI.Icons.add,this.addGateway.bind(this),null,!1),n=new Shell.UI.Commands.Command(
DataLab.LocalizedResources.deleteItem,Shell.UI.Icons["delete"],this.removeGateway.
bind(this),null,!0),t=new Shell.UI.Commands.Command(DataLab.LocalizedResources.editDescription,
Shell.UI.Icons.edit,this.editGateway.bind(this),null,!0),i=new Shell.UI.Commands.
Command(DataLab.LocalizedResources.downloadAndRegister,Shell.UI.Icons.download,this.
downloadGateway.bind(this),null,!0),u=new Shell.UI.Commands.Command(DataLab.LocalizedResources.
refresh,Shell.UI.Icons.redo,this.refreshFromService.bind(this),null,!1);Shell.UI.
Commands.add([r,n,t,i,u]);this.selectionEnabledCommands=[n,t,i]},u.prototype.addGateway=
function(){var n=this,t=new ExperimentEditor.NewDataGatewayWizardViewModel(this.
backend,function(t){t!==null&&n.refreshFromService().then(function(){n.setSelectedGateway(
t)})});t.show()},u.prototype.removeGateway=function(){var t=this,i,n;this.selectedItem(
)&&(i=this.selectedItem(),n=new Shell.UI.Notifications.Confirmation(DataLab.Util.
format(DataLab.LocalizedResources.confirmDeleteDataGateway,i.Name),"active"),n.setActions(
[new Shell.UI.Notifications.Buttons.yes(function(){Shell.UI.Notifications.remove(
n);Shell.UI.Spinner.show();t.backend.deleteGateway(i.Name).fail(function(n){t.showError(
n.message)}).always(function(){Shell.UI.Spinner.hide();t.refreshFromService()})}
),new Shell.UI.Notifications.Buttons.no(function(){Shell.UI.Notifications.remove(
n)})]),Shell.UI.Notifications.add(n))},u.prototype.editGateway=function(){var n=
this;this.selectedItem()&&ExperimentEditor.DialogViews.DataGatewayUpdateDescription.
show(new ExperimentEditor.DataGatewayDescriptionDialogViewModel(this.backend,this.
selectedItem().Name,this.selectedItem().Gateway.Description,function(){n.refreshFromService(
)}))},u.prototype.downloadGateway=function(){if(this.selectedItem()){var n=new ExperimentEditor.
DataGatewayDownloadAndRegisterViewModel(this.backend,ko.observable(this.selectedItem(
).Name),this.selectedItem().Gateway.Status);n.afterDialogClose=this.refreshFromService.
bind(this);ExperimentEditor.DialogViews.DataGatewayDownloadAndRegister.show(n)}}
,u.prototype.showError=function(n){var t=new Shell.UI.Notifications.Confirmation(
n,"active");t.setActions([new Shell.UI.Notifications.Buttons.ok(function(){Shell.
UI.Notifications.remove(t)})]);Shell.UI.Notifications.add(t)},u}(DataLab.Util.Disposable);
n.DataGatewaysView=o}(DataLabViews||(DataLabViews={})),function(n){var t;(function(
n){var t=function(){function n(){}return n.prototype.shouldShowBubble=function(t)
{if(typeof Storage!="undefined"&&Shell.Utilities.isLocalStorageAvailable()){var i=
localStorage.getItem(n.storageNamespace+t);if(i)return!1}return!0},n.prototype.neverShowAgain=
function(t){typeof Storage!="undefined"&&Shell.Utilities.isLocalStorageAvailable(
)&&localStorage.setItem(n.storageNamespace+t,"false")},n.prototype.resetAll=function(
){var r,t,i;if(typeof Storage!="undefined"&&Shell.Utilities.isLocalStorageAvailable(
))for(r=localStorage.length,t=r;t>=0;t--)i=localStorage.key(t),i.indexOf(n.storageNamespace)===
0&&localStorage.removeItem(i)},n.storageNamespace="bubble.",n}();n.LocalStorageUserSettings=
t})(t=n.Bubble||(n.Bubble={}))}(ExperimentEditor||(ExperimentEditor={})),function(
n){var t;(function(n){var i,r,t;(function(n){n[n.None=0]="None";n[n.Up=1]="Up";n[
n.Down=2]="Down";n[n.Left=3]="Left";n[n.Right=4]="Right"})(n.ArrowDirection||(n.
ArrowDirection={}));i=n.ArrowDirection,function(n){n[n.Left=0]="Left";n[n.Right=
1]="Right";n[n.Center=2]="Center";n[n.Top=3]="Top";n[n.Bottom=4]="Bottom"}(n.ArrowAlignment||
(n.ArrowAlignment={}));r=n.ArrowAlignment;t=function(){function n(n,t,i,r){n===void
0&&(n=0);t===void 0&&(t=0);i===void 0&&(i=0);r===void 0&&(r=2);this.x=ko.observable(
n);this.y=ko.observable(t);this.arrowAlignment=ko.observable(r);this.arrowDirection=
ko.observable(i)}return n}();n.Position=t})(t=n.Bubble||(n.Bubble={}))}(ExperimentEditor||
(ExperimentEditor={}));__extends=this.__extends||function(n,t){function r(){this.
constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;
n.prototype=new r},function(n){var t;(function(n){var f=function(){function n(n)
{this.position=n}return n.prototype.getPosition=function(){return this.position}
,n}(),t,i,r,u;n.FixedPositionLocator=f;t=function(){function t(t,i){i===void 0&&
(i=n.ViewPort.getInstance());this.getRect=t;this.viewPort=i}return t.getPositionFromRectAndViewPort=
function(t,i,r){var o,s,y,c,l,a,v;if(r===void 0&&(r=200),o=i.width(),s=i.height(
),!t)return new n.Position(i.left()+i.width()/2,i.top()+i.height()/2,0);var p=t.
left-i.left(),w=i.left()+i.width()-t.left-t.width,b=t.top-i.top(),k=i.top()+i.height(
)-t.top-t.height,h=2,u=0,f=i.top()+i.height()/2,e=i.left()+i.width()/2;if(o>0&&s>
0){c=p/o;l=w/o;u=c>l?4:3;y=c>l?c:l;a=b/s;v=k/s;u=a>y&&a>=v?2:u;u=v>y&&v>=a?1:u;switch(
u){case 3:e=t.left+t.width;f=t.top+t.height/2;break;case 4:e=t.left;f=t.top+t.height/
2;break;case 1:e=t.left+t.width/2;f=t.top+t.height;break;case 2:e=t.left+t.width/
2;f=t.top}u===3||u===4?h=f<r?3:s-f<r?4:h:(u===1||u===2)&&(h=e<r?0:o-e<r?1:h)}return new
n.Position(e,f,u,h)},t.prototype.getPosition=function(){return t.getPositionFromRectAndViewPort(
this.getRect(),this.viewPort)},t}();n.RectPositionLocator=t;i=function(n){function t(
t){n.call(this,function(){var i=t(),n;return i?(n=i.getBoundingClientRect(),{left:
n.left-10,top:n.top-10,width:n.width+20,height:n.height+20}):null})}return __extends(
t,n),t}(t);n.HtmlElementPositionLocator=i;r=function(n){function t(t){n.call(this,
function(){var n=t();return!n||!n.length?null:n.get(0)})}return __extends(t,n),t}
(i);n.JQuerySelectorPositionLocator=r;u=function(n){function t(i){n.call(this,function(
){var u=i instanceof Array?i:[i],n=[];return u.forEach(function(t){var u=typeof t==
"string"?function(){return $(t)}:t,i=new r(function(){return u()});i.getRect()&&
n.push(i)}),t.computeBoundingBox(n)})}return __extends(t,n),t.computeBoundingBox=
function(n){if(n.length===0)return null;var t=Number.POSITIVE_INFINITY,i=Number.
POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,u=Number.NEGATIVE_INFINITY;return n.
forEach(function(n){var f=n.getRect();t=t<f.left?t:f.left;i=i<f.top?i:f.top;r=r>
f.left+f.width?r:f.left+f.width;u=u>f.top+f.height?u:f.top+f.height}),{left:t,top:
i,width:r-t,height:u-i}},t}(t);n.MultiJQuerySelectorPositionLocator=u})(t=n.Bubble||
(n.Bubble={}))}(ExperimentEditor||(ExperimentEditor={})),function(n){var t;(function(
n){var t=function(){function n(t,i,r,u,f,e){f===void 0&&(f=500);e===void 0&&(e=200);
this.title=ko.observable("");this.content=ko.observable("");this.shouldShowLeftButton=
!0;this.shouldShowRightButton=!0;this.shouldShowMidLeftButton=!1;this.shouldShowMidRightButton=
!1;this.isProgressStep=!0;this.midLeftButtonText="";this.midRightButtonText="";this.
leftButtonText=DataLab.LocalizedResources.bubbleBackButtonText;this.rightButtonText=
DataLab.LocalizedResources.bubbleNextButtonText;this.finishButtonText=DataLab.LocalizedResources.
bubbleFinishedButtonText;this.title(t);this.content(i);this.width=ko.observable(
f);this.height=ko.observable(e);this.beforeLoadHandlerAsync=n.voidPromise;this.loadHandlerAsync=
n.voidPromise;this.nextHandlerAsync=n.voidPromise;this.backHandlerAsync=n.voidPromise;
this.undoStepAsync=n.voidPromise;this.midLeftButtonAsync=n.voidPromise;this.midRightButtonAsync=
n.voidPromise;this.position=function(){return r.getPosition()};this.highlight=function(
){return u?u():null}}return n.voidPromise=function(){var n=$.Deferred();return n.
resolve(),DataLab.Util.when(n.promise())},n}();n.Step=t})(t=n.Bubble||(n.Bubble=
{}))}(ExperimentEditor||(ExperimentEditor={})),function(n){var t;(function(n){var
t=function(){function t(){var t=this,i;this.steps=ko.observableArray();this.progressSteps=
ko.observableArray();this.currentIndex=ko.observable(-1);this.currentProgressIndex=
ko.observable(-1);this.visible=ko.observable(!1);this.overlayVisible=ko.observable(
!1);this.showElementHighlight=ko.observable(!1);this.elementHightlightRect=ko.observable(
{left:0,top:0,width:0,height:0});this.showOverlay=ko.observable(!0);this.totalSteps=
ko.computed(function(){return t.steps().length});this.current=ko.observable();i=
ko.computed(function(){if(t.currentIndex()>=0&&t.currentIndex()<t.totalSteps()){
var n=t.steps()[t.currentIndex()];DataLab.Util.then(n.beforeLoadHandlerAsync(t),
function(){n.loadHandlerAsync(t).done(function(){t.current(n);t.visible(!0)})})}
});this.shouldShowRightButton=ko.computed(function(){return DataLab.Features.animatedTourEnabled(
)?t.current()&&t.current().shouldShowRightButton:t.currentIndex()<t.totalSteps()-
1});this.shouldShowLeftButton=ko.computed(function(){return DataLab.Features.animatedTourEnabled(
)?t.current()&&t.current().shouldShowLeftButton:t.currentIndex()>0&&t.current()&&
t.current().shouldShowLeftButton});this.isLastStep=ko.computed(function(){return t.
currentIndex()===t.totalSteps()-1});this.shouldShowMidLeftButton=ko.computed(function(
){return t.current()&&t.current().shouldShowMidLeftButton});this.shouldShowMidRightButton=
ko.computed(function(){return t.current()&&t.current().shouldShowMidRightButton}
);this.midLeftButtonText=ko.computed(function(){return t.current()?t.current().midLeftButtonText:
""});this.midRightButtonText=ko.computed(function(){return t.current()?t.current(
).midRightButtonText:""});this.leftButtonText=ko.computed(function(){return t.current(
)?t.current().leftButtonText:""});this.rightButtonText=ko.computed(function(){return t.
current()?t.current().rightButtonText:""});this.finishButtonText=ko.computed(function(
){return t.current()?t.current().finishButtonText:""});this.isCurrentStepAProgressStep=
ko.computed(function(){return t.current()&&t.current().isProgressStep});this.currentStepNumber=
ko.computed(function(){var i,n;if(!t.current()||!t.current().isProgressStep)return 0;
for(i=0,n=0;n<t.steps().length;n++)if(t.steps()[n].isProgressStep&&i++,n>=t.currentIndex(
))break;return i});this.progressStepCount=ko.computed(function(){return t.progressSteps(
).length});this.arrowClassId=ko.computed(function(){if(!t.current()||!t.current(
).position()||!t.attachBubbleToElement)return"hidden";var n=t.current().position(
);return n.arrowDirection()===1?"arrow-up":n.arrowDirection()===4?"arrow-right":
n.arrowDirection()===2?"arrow-down":n.arrowDirection()===3?"arrow-left":"hidden"}
);this.arrowX=ko.computed(function(){if(!t.current()||!t.current().position())return 0;
var i=t.current(),n=i.position();return n.arrowDirection()===3?0:n.arrowDirection(
)===4?i.width()+10:n.arrowAlignment()===0?30:n.arrowAlignment()===2?i.width()/2:
n.arrowAlignment()===1?i.width()-30:0});this.arrowY=ko.computed(function(){if(!t.
current()||!t.current().position())return 0;var i=t.current(),n=i.position();return n.
arrowDirection()===1?0:n.arrowDirection()===2?i.height()+10:n.arrowAlignment()===
3?30:n.arrowAlignment()===2?i.height()/2:n.arrowAlignment()===4?i.height()-30:0}
);this.bubbleX=ko.computed(function(){var f;if(!t.current()||!t.current().position(
))return 0;var u=t.current(),r=u.position(),i=0;return r.arrowDirection()===4?i=
r.x()-u.width()-20:r.arrowDirection()===3?i=r.x():r.arrowAlignment()===0?i=r.x()-
40:r.arrowAlignment()===2?i=r.x()-u.width()/2-10:r.arrowAlignment()===1&&(i=r.x(
)-u.width()+20),f=n.ViewPort.getInstance().width(),i<0?i=0:i+u.width()>f&&(i-=i+
u.width()-f),i});this.bubbleY=ko.computed(function(){var f;if(!t.current()||!t.current(
).position())return 0;var u=t.current(),r=u.position(),i=0;return r.arrowDirection(
)===2?i=r.y()-u.height()-20:r.arrowDirection()===1?i=r.y():r.arrowAlignment()===
3?i=r.y()-40:r.arrowAlignment()===2?i=r.y()-u.height()/2-10:r.arrowAlignment()===
4&&(i=r.y()-u.height()+20),f=n.ViewPort.getInstance().height(),i<0?i=0:i+u.height(
)>f&&(i-=i+u.height()-f),i});this.width=ko.computed(function(){return t.current(
)?t.current().width():0});this.height=ko.computed(function(){return t.current()?
t.current().height():0});this.title=ko.computed(function(){return t.current()?t.
current().title():""});this.content=ko.computed(function(){return t.current()?t.
current().content():""});this.hightlightRect=ko.computed(function(){return!t.current(
)||!t.current().highlight()||!t.attachBubbleToElement?null:t.visible()?t.current(
).highlight():{left:0,top:0,width:0,height:0}})}return t.prototype.addStep=function(
n){this.steps.push(n);n.isProgressStep&&this.progressSteps.push(n)},t.prototype.
setCurrentAsync=function(n,t){var r=this,i;return t===void 0&&(t=!0),i=$.Deferred(
),DataLab.Features.animatedTourEnabled()&&n>-1&&DataLab.Log.featureUsage({featureID:
155,groupID:DataLab.Constants.FeatureId[this.id],data:n}),this.current()&&this.visible(
!1),t?setTimeout(function(){r.currentIndex(n);i.resolve(n)},500):(this.currentIndex(
n),i.resolve(n)),i.promise()},t.prototype.close=function(){DataLab.Features.animatedTourEnabled(
)&&DataLab.Log.featureUsage({featureID:173,groupID:DataLab.Constants.FeatureId[this.
id],data:this.currentIndex()});this.dismiss(!0)},t.prototype.setDontShowAgain=function(
){this.userSettings&&(DataLab.Log.featureUsage({featureID:DataLab.Constants.FeatureId[
this.id+"DontShowAgain"],groupID:DataLab.Constants.FeatureId[this.id]}),this.userSettings.
neverShowAgain(this.id))},t.prototype.dismiss=function(n){n===void 0&&(n=!0);DataLab.
Log.featureUsage({featureID:80,groupID:79,data:JSON.stringify({TourId:this.id,Step:
this.currentIndex(),NeverShowAgain:DataLab.Features.animatedTourEnabled()?!1:n})});
DataLab.Features.animatedTourEnabled()||n&&this.userSettings&&this.userSettings.
neverShowAgain(this.id);this.steps.removeAll();this.progressSteps.removeAll();this.
setCurrentAsync(-1,!1);this.visible(!1);this.overlayVisible(!1)},t.prototype.show=
function(){this.overlayVisible(!0);this.visible(!0)},t.prototype.midLeftButtonAsync=
function(){return this.current().midLeftButtonAsync(this)},t.prototype.midRightButtonAsync=
function(){return this.current().midRightButtonAsync(this)},t.prototype.nextAsync=
function(){var n=this;if(this.visible()!==!1)return DataLab.Features.animatedTourEnabled(
)&&DataLab.Log.featureUsage({featureID:172,groupID:DataLab.Constants.FeatureId[this.
id],data:this.currentIndex()}),this.visible(!1),DataLab.Util.then(this.current().
nextHandlerAsync(this),function(){return n.setCurrentAsync(n.currentIndex()+1)})}
,t.prototype.backAsync=function(){var n=this;if(this.visible()!==!1)return DataLab.
Features.animatedTourEnabled()&&DataLab.Log.featureUsage({featureID:156,groupID:
DataLab.Constants.FeatureId[this.id],data:this.currentIndex()}),this.visible(!1),
DataLab.Util.then(this.current().backHandlerAsync(this),function(){return DataLab.
Util.then(n.steps()[n.currentIndex()-1].undoStepAsync(n),function(){return n.setCurrentAsync(
n.currentIndex()-1)})})},t.prototype.gotoAsync=function(n){return this.setCurrentAsync(
n)},t.prototype.copyFromAsync=function(n){var t=this;return this.dismiss(),this.
id=n.id,this.userSettings=n.userSettings,this.showOverlay(n.showOverlay),this.dismissOnClick=
n.dismissOnClick,this.dismissOnResize=n.dismissOnResize,this.dismissOnScroll=n.dismissOnScroll,
this.canSkipSteps=n.canSkipSteps,this.attachBubbleToElement=n.attachBubbleToElement,
n.steps.forEach(function(n){t.steps.push(n);n.isProgressStep&&t.progressSteps.push(
n)}),this.setCurrentAsync(n.start,!1)},t.prototype.onResize=function(){this.dismissOnResize&&
this.overlayVisible()&&this.dismiss()},t.prototype.onScroll=function(){this.dismissOnScroll&&
this.overlayVisible()&&this.dismiss()},t.prototype.onClick=function(n){if(this.dismissOnClick&&
this.overlayVisible()){var t=this.bubbleX()+10,i=this.bubbleY()+10;(n.pageX<t||n.
pageX>t+this.width()||n.pageY<i||n.pageY>i+this.height())&&this.dismiss()}},t}();
n.BubbleViewModel=t})(t=n.Bubble||(n.Bubble={}))}(ExperimentEditor||(ExperimentEditor=
{})),function(n){var t;(function(n){function u(r){if(t&&t.steps().length>0&&!t.visible(
))return $.Deferred().resolve();if(n.dismiss(),!t){t=new n.BubbleViewModel;var u=
n.getBubbleContainer();ko.applyBindings(t,u);$(window).on("resize",function(){return t.
onResize()});$(window).on("scroll",function(){return t.onScroll()});$(document).
on("click",function(n){return t.onClick(n)})}return r.alwaysShow||r.userSettings&&
r.userSettings.shouldShowBubble(r.id)?t.copyFromAsync(r).then(function(){return t.
show(),r.autoDismiss&&setTimeout(function(){return i()},r.autoDismissDelayMS),t}
):DataLab.Util.when(t)}function i(){t&&t.dismiss()}function f(){var n=$("#bubble-container");
return n.length?n.get(0):(n=$(ExperimentEditorTemplates._bubbleMarkup),n.appendTo(
"body"),n.get(0))}var r=function(){function t(t){if(this.dismissOnScroll=!1,this.
dismissOnResize=!1,this.dismissOnClick=!1,this.steps=[],this.start=0,this.userSettings=
new n.LocalStorageUserSettings,this.alwaysShow=!1,this.showOverlay=!0,this.autoDismiss=
!1,this.autoDismissDelayMS=4e3,this.canSkipSteps=!0,this.attachBubbleToElement=!0,
!t)throw new Error("Bubble options ID is required.");this.id=t}return t.prototype.
addStepByPosition=function(t,i,r,u,f,e){var o=new n.Step(r,u,new n.RectPositionLocator(
function(){return{left:t,top:i,width:0,height:0}}),null,f,e);return this.steps.push(
o),o},t.prototype.addStepByJquerySelector=function(t,i,r,u,f){var e,s,o;return t
instanceof Array?e=new n.MultiJQuerySelectorPositionLocator(t):(s=typeof t=="string"?
function(){return $(t)}:t,e=new n.JQuerySelectorPositionLocator(s)),o=new n.Step(
i,r,e,function(){return e.getRect()},u,f),this.steps.push(o),o},t.prototype.addStepByGraphNode=
function(n,t,i){return this.addStepByJquerySelector(".customElements #node-"+n.id,
t,i)},t.prototype.addStepAtCenter=function(t,i,r,u){var f=new n.Step(t,i,new n.RectPositionLocator(
function(){return null}),null,r,u);return this.steps.push(f),f},t.oneLineDimensions=
{width:500,height:200},t.twoLineDimensions={width:500,height:220},t.threeLineDimensions=
{width:500,height:240},t.fourLineDimensions={width:500,height:260},t}(),t;n.Options=
r;n.showAsync=u;n.dismiss=i;n.getBubbleContainer=f})(t=n.Bubble||(n.Bubble={}))}
(ExperimentEditor||(ExperimentEditor={})),function(){ko.bindingHandlers.attrWithNamespace=
{init:function(){},update:function(n,t){var f=ko.utils.unwrapObservable(t()),r,u,
i,e;for(r in f)if(u=f[r],i=r.split(":"),i.length===2)e=n.lookupNamespaceURI(i[0]),
n.setAttributeNS(e,i[1],ko.utils.unwrapObservable(u));else if(i.length<2)n.setAttribute(
i[0],ko.utils.unwrapObservable(u));else throw new Error("Found key has multiple ':' and thus is not a valid fully qualified XML attribute ");
}}}(ExperimentEditor||(ExperimentEditor={})),function(){var n=1e3,t=function(n){
return $(n).data("ui-autocomplete")},i=function(i,r){var c=function(){$.contains(
document.documentElement,i)&&$(i).blur()},l=function(){return t(i)},y=ko.utils.unwrapObservable(
r)().array(),u,s=!1,v,h;l()&&$(i).autocomplete("destroy");var f=!1,o,a=ko.utils.
unwrapObservable(r)(),p="allowAnyEntry"in a?a.allowAnyEntry():!1,b=$(i).autocomplete(
{columnSelectorSelectionMade:!1,search:function(){if(i!==document.activeElement)
return!1},source:function(t,i){var r=$.ui.autocomplete.filter(y,t.term),e,o;f=!t.
term;r.length>n&&(e=r.splice(n,r.length-n),u=DataLab.Util.formatWithPluralOption(
e.length,DataLab.LocalizedResources.autocompleteTruncatedWarningLabelSingular,DataLab.
LocalizedResources.autocompleteTruncatedWarningLabelPlural),typeof r[0]=="string"?
r.push(u):(o={label:u,value:u},r.push(o)));i(r)},minLength:0,allowAnyEntry:p,select:
function(n,t){var f,e;if(u&&t.item.value===u)return s=!0,n.preventDefault(),!1;f=
ko.utils.unwrapObservable(r)().dependentObservable;f&&f(t.item.value);n.target.classList[
0]==="itemTextBoxInput"&&(e=t.item.value,t.item.value="",setTimeout(function(){t.
item.value=e},0),$(i).val(""),this.columnSelectorSelectionMade=!0,$(this).focus(
))},open:function(){var n=$(i).autocomplete("widget"),u,t,r,f;n.css("bottom","");
u=n.offset().top+n.outerHeight(!1);t=$(".experiment-container").first();t.length>
0&&(r=t.offset().top+t.outerHeight(!1),u>r&&(f=$(window).height()-r,n.css("bottom",
f)));$(window).unbind("resize",c);$(window).one("resize",c)},close:function(){this.
columnSelectorSelectionMade&&(this.columnSelectorSelectionMade=!1,$(this).focus(
))}}),e=l(),w=e.close;e.close=function(n){s?(s=!1,n.preventDefault(),n.stopImmediatePropagation(
)):w.apply(this,arguments)};v=e._suggest;h=!1;e._suggest=function(){var t=f&&h,n;
h=f;t?(n=this.menu.element,this.isNewMenu=!0,this.menu.refresh(),n.show(),n.position(
$.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.
menu.next()):v.apply(this,arguments)};e._renderMenu=function(n,t){var i=this;f?(
o||(o=document.createDocumentFragment(),$.each(t,function(n,t){i._renderItemData(
o,t)})),$(o).clone(!0).appendTo(n)):$.each(t,function(t,r){i._renderItemData(n,r)}
);f=!1}};ko.bindingHandlers.autocomplete={init:function(n,t){i(n,t)}};ko.bindingHandlers.
columnPickerAutocomplete={init:function(n,r){i(n,r);$(n).autocomplete("widget").
addClass("columnPickerAutocomplete");var u=t(n);u._renderItem=function(n,t){var i=
t.isInaccurate?$("<i>").text(t.label):t.label;return $("<li><\/li>").data("item.autocomplete",
t).append($("<a><\/a>").append(i)).appendTo(n)};$(n).autocomplete().focus(function(
){$(n).autocomplete("search")});$(n).keydown(function(t){if(t.which===13){var i=
DataLab.Util.Str.getArrayFromCommaSeparatedString($(n).val());i.forEach(function(
n){u.option().source({term:n},function(t){var e;if(u.option().allowAnyEntry)u._trigger(
"select","autocompleteselect",{item:{value:n}});else if(i.length===1&&t.length>0)
e=t[0].label||t[0].value||t[0],u._trigger("select","autocompleteselect",{item:{value:
e}});else{var r=null,f=null,o=n.toLowerCase();t.some(function(t){return(t=t.label||
t.value||t,f||o!==t.toLowerCase()||(f=t),n===t)?(r=t,!0):!1});r=r||f;r&&u._trigger(
"select","autocompleteselect",{item:{value:r}})}})})}})}}}(ExperimentEditor||(ExperimentEditor=
{})),function(n){ko.bindingHandlers.hoverBalloon={init:function(t,i){function u(
){n.Balloon.hide(t)}function f(){var u=i(),r=ko.utils.unwrapObservable(u.message);
r&&n.Balloon.show(r,t)}var r,e;$(t).off("mouseover focus",f);$(t).off("mouseout blur",
u);$(t).on("mouseover focus",f);$(t).on("mouseout blur",u);r=i();r.forceBalloon&&
(e=r.forceBalloon.subscribe(function(){var i=ko.utils.unwrapObservable(r.message);
n.Balloon.show(i,t)}),ko.utils.domNodeDisposal.addDisposeCallback(t,function(){e.
dispose()}))}};ko.bindingHandlers.balloon={init:function(){},update:function(t,i)
{var u=i(),r=ko.utils.unwrapObservable(u.message);r?n.Balloon.show(r,t):n.Balloon.
hide(t)}}}(ExperimentEditor||(ExperimentEditor={})),function(n){var t;(function(
){ko.bindingHandlers.checkboxvalue={init:function(n,t){var r=t().value,i=t().choices;
n.checked=r()===i()[0].value;n.addEventListener("change",function(){r(n.checked?
i()[0].value:i()[1].value)})},update:function(n,t){var i=ko.utils.unwrapObservable(
t().value),r=ko.utils.unwrapObservable(t().choices);n.checked=i===r[0].value}}})
(t=n.CheckboxBindings||(n.CheckboxBindings={}))}(ExperimentEditor||(ExperimentEditor=
{}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t;(function(t){var i,r;(function(n){n.Minimized="minimized";
n.Maximized="maximized";n.Minimizing="minimizing";n.Maximizing="maximizing"})(i||
(i={}));r=function(t){function r(n,i,r){if(t.call(this),this.containerElement=n,
this.resizeIsInitialized=!1,this.collapseIsInitialized=!1,this.jQueryCollapseIsInitialized=
!1,!r)throw new Error("Must define an id for collapse and resize bindings.");this.
id=r;switch(i){case"top":case"left":this.resizeDirection=-1;break;case"bottom":case"right":
this.resizeDirection=1;break;default:throw new Error("location must be 'top,' 'bottom,' 'left,' or 'right.'");
}switch(i){case"top":case"bottom":this.resizeDimension="height";this.mouseDimension=
"clientY";break;case"left":case"right":this.resizeDimension="width";this.mouseDimension=
"clientX";break;default:throw new Error("location must be 'top,' 'bottom,' 'left,' or 'right.'");
}this.expandedSize=$(n)[this.resizeDimension]();this.direction=i}return __extends(
r,t),r.prototype.initForResize=function(t,i){var r=this,o;if(this.resizeIsInitialized)
throw new Error("Resize is already initialized on this element.");this.minSize=t;
this.maxSize=i;var f=null,e=null,u=document.createElement("div"),s="resize "+this.
direction;u.setAttribute("class",s);this.containerElement.appendChild(u);var h=function(
n){n.stopPropagation();n.preventDefault();e=n[r.mouseDimension];f=$(r.containerElement)[
r.resizeDimension]()},c=function(n){var u,t,i;n.stopPropagation();n.preventDefault(
);u=n[r.mouseDimension];t=r.resizeDirection*(u-e);t=Math.min(r.maxSize,Math.max(
r.minSize,f+t));i=null;i||(i=requestAnimationFrame(function(){r.resize(t);i=null}
))},l=function(n){n.stopPropagation();n.preventDefault()};u.addEventListener("mousedown",
h);this.registerForDisposal(new n.MouseCapture(u,c,l));this.resizeIsInitialized=
!0;o=this.resizeState?this.resizeState:t;this.resize(o)},r.prototype.initForCollapse=
function(n,t,r){var f=this,u;if(this.jQueryCollapseIsInitialized)throw new Error(
"Already using jQueryCollapse. Can't use collapse.");if(this.collapseIsInitialized)
throw new Error("Collapse is already initialized for this element.");this.collapsed=
n;this.collapsedSize=t;this.openCloseAnimationEnded=r;this.updateCollapsedState(
);this.resizeDimension==="height"?$(this.containerElement).addClass("transitionHeight"):
$(this.containerElement).addClass("transitionWidth");$(this.containerElement).addClass(
n()?"minimized":"maximized");u=function(n){var t;if(n.stopPropagation(),n.target===
n.currentTarget){if($(f.containerElement).hasClass(i.Minimizing))t=i.Minimized;else
if($(f.containerElement).hasClass(i.Maximizing))t=i.Maximized;else throw new Error(
"Drawer is in an unexpected state");f.setDrawerClass(t);r&&r.notifySubscribers(t);
DataLab.TestMessaging.postMessage({type:DataLab.TestMessaging.Constants.AnimationComplete})}
};this.containerElement.addEventListener("webkitTransitionEnd",u);this.containerElement.
addEventListener("transitionend",u);this.containerElement.addEventListener("MSTransitionEnd",
u);this.collapseIsInitialized=!0;this.collapseState!==null&&this.collapsed(this.
collapseState)},r.prototype.initForJQueryCollapse=function(n,t,i){if(this.collapseIsInitialized)
throw new Error("Already using collapse. Can't use jQueryCollapse.");if(this.jQueryCollapseIsInitialized)
throw new Error("JQueryCollapse is already initialized for this element.");this.
collapsed=n;this.openCloseAnimationEnded=i;this.collapseElement=t?this.containerElement.
querySelector(t):this.containerElement;this.jQueryCollapseIsInitialized=!0;this.
collapseIsInitialized=!0;this.collapseState!==null&&this.collapsed(this.collapseState);
this.lastExpandStateWasCollapsed=n();this.collapsed()&&(this.collapseElement.style.
display="none");$(this.containerElement).addClass(n()?"minimized":"maximized")},
r.prototype.resize=function(n){if(this.resizeIsInitialized)(!this.collapseIsInitialized||
this.collapseIsInitialized&&!this.collapsed())&&n>=this.minSize&&n<=this.maxSize&&
(this.expandedSize=n,this.containerElement.style[this.resizeDimension]=n+"px");else
throw new Error("Tried to resize an uninitialized CollapseResizeManager");this.resizeState=
n},r.prototype.updateJQueryCollapsedState=function(){var t=this,n;this.lastExpandStateWasCollapsed!==
this.collapsed()&&(this.setDrawerClass(this.collapsed()?i.Minimizing:i.Maximizing),
n=this.collapsed(),$(this.collapseElement).slideToggle(400,function(){t.setDrawerClass(
n?i.Minimized:i.Maximized);t.openCloseAnimationEnded&&t.openCloseAnimationEnded.
notifySubscribers(n?i.Minimized:i.Maximized);DataLab.TestMessaging.postMessage({
type:DataLab.TestMessaging.Constants.AnimationComplete})}),this.lastExpandStateWasCollapsed=
n,this.collapseState=n)},r.prototype.updateCollapsedState=function(){this.lastExpandStateWasCollapsed!==
this.collapsed()&&(this.collapsed()?(this.setDrawerClass(i.Minimizing),this.containerElement.
style[this.resizeDimension]=this.collapsedSize+"px"):(this.setDrawerClass(i.Maximizing),
this.containerElement.style[this.resizeDimension]=this.expandedSize+"px"),this.lastExpandStateWasCollapsed=
this.collapsed(),this.collapseState=this.collapsed())},Object.defineProperty(r.prototype,
"resizeState",{get:function(){return JSON.parse(r.sessionStorage.getItem("Resize_"+
this.id))},set:function(n){r.sessionStorage["Resize_"+this.id]=n},enumerable:!0,
configurable:!0}),Object.defineProperty(r.prototype,"collapseState",{get:function(
){return JSON.parse(r.sessionStorage.getItem("Collapse_"+this.id))},set:function(
n){r.sessionStorage["Collapse_"+this.id]=n},enumerable:!0,configurable:!0}),r.prototype.
setDrawerClass=function(n){$(this.containerElement).removeClass("minimized maximized minimizing maximizing");
$(this.containerElement).addClass(n)},r.sessionStorage=sessionStorage?sessionStorage:
DataLab.Util.sessionStorage,r}(DataLab.Util.Disposable);t.CollapseResizeManager=
r})(t=n.CollapseResize||(n.CollapseResize={}))}(ExperimentEditor||(ExperimentEditor=
{})),function(n){var t;(function(n){ko.bindingHandlers.collapse={init:function(t,
i){var u=t.querySelector(i().collapseButtonSelector),r;if(!u)throw new Error("Could not find collapse button with selector '"+
i().collapseButtonSelector+".'");if(u.addEventListener("click",function(n){n.preventDefault(
);n.stopPropagation();i().collapsed(!i().collapsed())}),typeof i().collapsed!="function")
throw new Error("Required binding parameter 'collapsed' is undefined or not an observable.");
if(i().collapsedSize===undefined||i().collapsedSize===null)throw new Error("Required binding parameter 'collapsedSize' is undefined.");
if(t.collapseResizeManager){if(r=t.collapseResizeManager,i().id!==r.id)throw new
Error("When using collapse with other bindings, the 'id' fields must match");if(
r.direction!==i().collapseFrom)throw new Error("When using resize and collapse together, 'collapseFrom' must equal resize's 'location'");
r.initForCollapse(i().collapsed,i().collapsedSize,i().animationEnded)}else t.collapseResizeManager=
new n.CollapseResizeManager(t,i().collapseFrom,i().id),DataLab.Util.Disposable.exemptFromDiposablesInContextAssertion(
t.collapseResizeManager),t.collapseResizeManager.initForCollapse(i().collapsed,i(
).collapsedSize,i().animationEnded),ko.utils.domNodeDisposal.addDisposeCallback(
t,function(){t.collapseResizeManager.dispose()})},update:function(n){var t=n.collapseResizeManager;
t.updateCollapsedState()}}})(t=n.CollapseResize||(n.CollapseResize={}))}(ExperimentEditor||
(ExperimentEditor={})),function(n){var t;(function(n){function t(t){var i=n.RuleType.
findRule(t.ruleType,t.exclude),r=i.name,u;return r=i.exclude&&i.id!=="AllColumns"?
"Exclude "+r:r.charAt(0).toUpperCase()+r.substr(1),u='<span class="columnPickerRuleDisplayRuleName">'+
r+"<\/span>",i.id==="AllColumns"||i.id==="Features"||i.id==="Labels"||i.id==="Scores"?
u:i.id==="ColumnTypes"?u+": "+t.columnTypes.join()+", "+t.columnKinds.join():u+": "+
DataLab.Util.encodeAsHtml(t.columns.join())}ko.bindingHandlers.columnPickerRuleDisplay=
{init:function(){},update:function(i,r){var e=ko.utils.unwrapObservable(r()),f='<span class="columnPickerRuleDisplayHeader">'+
DataLab.LocalizedResources.selectToolRulesDisplayLabel+"<\/span>",u,o;if($(i).html(
f),u=[],e.length!==0)try{o=n.ColumnPickerViewModel.parseRules(e,function(n){u.push(
t(n))})}catch(s){DataLab.Log.exception(s,"Failed to parse column picker rules JSON when attempting rule display.")}
u.length>0?$(i).html(f+"<br>"+u.join("<br>")):$(i).html(f+"<br>"+DataLab.LocalizedResources.
launchSelectionToolToMakeSelection+"<br>")}}})(t=n.ColumnPicker||(n.ColumnPicker=
{}))}(ExperimentEditor||(ExperimentEditor={})),function(n){function t(t,i,r){var
e,o;if(t.preventDefault(),t.stopPropagation(),$(".datalab-contextMenu").remove(),
e=r.build(i),e){o=new n.MenuViewModel(e,i);function u(t){$(t.target).closest(".blockingDiv").
length>=1||($(t.target).closest(".datalab-contextMenu").length===0?(n.MenuControl.
removeContextMenu(),f()):$(t.target).closest(".datalab-contextMenu .enabled").length>
0&&$(t.target).closest(".datalab-contextMenu .hasSubmenu").length===0&&t.type===
"mouseup"&&f())}function s(){n.MenuControl.removeContextMenu();f()}function h(t)
{t.keyCode===27&&(n.MenuControl.removeContextMenu(),f())}function c(){return!1}function l(
){$("body").on("contextmenu","div.datalab-contextMenu",c);document.addEventListener(
"mousedown",u,!0);document.addEventListener("mouseup",u,!0);document.addEventListener(
"keydown",h);window.addEventListener("hashchange",s)}function f(){$("body").off(
"contextmenu","div.datalab-contextMenu",c);document.removeEventListener("mousedown",
u,!0);document.removeEventListener("mouseup",u,!0);document.removeEventListener(
"keydown",h);window.removeEventListener("hashchange",s)}o&&(l(),n.MenuControl.spawnMenu(
o,t))}return!1}n.ContextMenuEventHandler=t;ko.bindingHandlers.contextMenu={init:
function(n,i,r,u){$(n).on("contextmenu",function(n){var r=ko.utils.unwrapObservable(
i());t(n,u,r)})}};ko.bindingHandlers.subMenu={init:function(n,t){var i=ko.utils.
unwrapObservable(t()),r;ko.utils.unwrapObservable(i.activate)&&(r=ko.utils.unwrapObservable(
i.width),$(n).find(".datalab-contextMenu").hide(),$(n).hover(function(){var t=$(
n).find(".datalab-contextMenu").first();t.toggle().position({my:"left top-10",at:
"right top",offset:"-2 0",of:n,collision:"flip flip"});i.displayCallback&&i.displayCallback(
t[0].style.display!=="none")}))}}}(ExperimentEditor||(ExperimentEditor={})),function(
n){var t;(function(){ko.bindingHandlers.dropMenu={init:function(t,i,r,u){t.addEventListener(
"mousedown",function(t){function r(t){t.type==="hashchange"||t.type==="keydown"&&
t.keyCode===27||t.type==="mousedown"&&$(t.target).closest(".datalab-contextMenu").
length===0?(t.type==="mousedown"&&t.target===f&&t.stopPropagation(),f=null,n.MenuControl.
removeContextMenu(),o()):t.type==="mouseup"&&$(t.target).closest(".datalab-contextMenu .enabled").
length>0&&$(t.target).closest(".datalab-contextMenu .hasSubmenu").length===0?(f=
null,o()):t.type!=="mouseup"||e?t.type==="mouseup"&&$(t.target).closest(".datalab-contextMenu").
length===0&&(f=null,n.MenuControl.removeContextMenu(),o()):e=!0}var h,s,c;t.preventDefault(
);t.stopPropagation();var f=t.target,e=!1,o=function(){document.removeEventListener(
"mousedown",r,!0);document.removeEventListener("mouseup",r,!0);document.querySelector(
"html").removeEventListener("keydown",r);window.removeEventListener("hashchange",
r,!0)};t.button===0&&(document.addEventListener("mousedown",r,!0),document.addEventListener(
"mouseup",r,!0),document.querySelector("html").addEventListener("keydown",r),window.
addEventListener("hashchange",r,!0),e=!1,h=i(),s=h.build(u),s&&(c=new n.MenuViewModel(
s,u),n.MenuControl.spawnMenu(c,t.target)))})}}})(t=n.DropMenu||(n.DropMenu={}))}
(ExperimentEditor||(ExperimentEditor={})),function(){function n(n,t){function f(
){var t=u.val().length,n=e-t;n<40?(o.text(""+n),i||(i=!0,r.show())):i&&(r.hide(),
i=!1)}var u=n.find("textArea"),e=t.maxCharacters,r=n.find(".characterLimitReachedWarning"),
o=r.find(".charactersLeftCount"),i=!1;u.on({"keyup change":f,paste:function(){window.
setTimeout(f,1)}})}ko.bindingHandlers.editableTextArea={init:function(t,i,r,u){var
e=ko.utils.unwrapObservable(i()),f;if(Object.getOwnPropertyNames(e).length>0&&(u=
e),f=$(t).find("textarea"),!f.get(0))throw"Couldn't find text area in editableTextArea binding.";
$(t).addClass("editableTextAreaWrapper");f.addClass("editableTextArea");u.maxCharacters&&
f.attr("maxlength",u.maxCharacters);u.placeholderText&&f.attr("placeholder",u.placeholderText);
u.isReadOnly&&f.attr("readonly","true");u.showMaxCharacterWarning&&n($(t),u)},update:
function(){}}}(ExperimentEditor||(ExperimentEditor={})),function(){var n=function(
n,t){return($(n).text(t),n.clientHeight<n.scrollHeight)?!0:!1};ko.bindingHandlers.
ellipsisDiv={init:function(){},update:function(t,i){var l=ko.utils.unwrapObservable(
i),u;if($(t).height()===0||!$(t).is(":visible")){$(t).text(l());return}if(u=l(),
n(t,u)){for(var e="…",o=0,h=u.length,r=Math.floor(h/2),f=u.slice(0,r),s=n(t,f+e),
c=s?!1:n(t,f+u[r]+e);s||!c;)if(s?(h=r,r=Math.floor(o+(h-o)/2)):c||(o=r,r=Math.floor(
o+(h-o)/2)),f=u.slice(0,r),s=n(t,f+e),c=s?!1:n(t,f+u[r]+e),r===0)break;$(t).text(
f+e)}}}}(ExperimentEditor||(ExperimentEditor={})),function(n){var t;(function(){
ko.bindingHandlers.fadeVisible={init:function(n,t){var i=t();$(n).toggle(ko.utils.
unwrapObservable(i))},update:function(n,t){var i=t();ko.utils.unwrapObservable(i)?
$(n).fadeIn():$(n).fadeOut()}}})(t=n.FadeVisible||(n.FadeVisible={}))}(ExperimentEditor||
(ExperimentEditor={})),function(){ko.bindingHandlers.file={init:function(n,t){function i(
){var i=t();if(!ko.isObservable(i))throw new Error("The parameter to the 'file' binding must be an observable");
if(n.files&&n.files.length>0&&n.value){if(n.files.length>1)throw new Error("The 'file' binding does not support multi-select file input elements");
i(n.files[0])}else i(null)}if(!(n instanceof HTMLInputElement))throw new Error("The 'file' binding must be applied to an <input> element");
n.addEventListener("change",function(){i()});i()},update:function(){}}}(ExperimentEditor||
(ExperimentEditor={})),function(){ko.bindingHandlers.hoverStatus={init:function(
n,t){$(n).mouseenter(function(){t()(!0)});$(n).mouseleave(function(){t()(!1)})}}}
(ExperimentEditor||(ExperimentEditor={})),function(n){var t;(function(){ko.bindingHandlers.
itemTextBox={init:function(n,t,i){$(n).keydown(function(i){var o,u;if($(".textWidthSpan").
text($(n).val()),o=$(".textWidthSpan").width(),u=n.selectionStart,i.which===8&&u===
0){var f=ko.utils.unwrapObservable(t),r=f().invalidColumnNames,e=f().validColumnNames;
r().length>0?(r().pop(),r.valueHasMutated()):(e().pop(),e.valueHasMutated());$(n).
focus()}i.which===13&&($(n).blur(),$(n).focus())});n.addEventListener("blur",function(
){var n;if(i().value)n=i().value;else if(i().columnPickerAutocomplete&&i().columnPickerAutocomplete.
dependentObservable)n=i().columnPickerAutocomplete.dependentObservable;else return;
n.startValidating();n.validate()})}}})(t=n.ColumnPicker||(n.ColumnPicker={}))}(ExperimentEditor||
(ExperimentEditor={})),function(n){var t;(function(n){ko.bindingHandlers.jQueryCollapse=
{init:function(t,i){var u=t.querySelector(i().collapseButtonSelector),r;if(!u)throw new
Error("Could not find collapse button with selector '"+i().collapseButtonSelector+
".'");if(u.addEventListener("click",function(n){n.preventDefault();n.stopPropagation(
);i().collapsed(!i().collapsed())}),typeof i().collapsed!="function")throw new Error(
"Required binding parameter 'collapsed' is undefined or not an observable.");if(
t.collapseResizeManager){if(r=t.collapseResizeManager,i().id!==r.id)throw new Error(
"When using jQueryCollapse with resize, ids must match.");if(r.direction!==i().collapseFrom)
throw new Error("When using resize and collapse together, 'collapseFrom' must equal resize's 'location'");
t.collapseResizeManager.initForJQueryCollapse(i().collapsed,i().animationEnded)}
else t.collapseResizeManager=new n.CollapseResizeManager(t,i().collapseFrom,i().
id),t.collapseResizeManager.initForJQueryCollapse(i().collapsed,i().contentSelector,
i().animationEnded)},update:function(n){var t=n.collapseResizeManager;t.updateJQueryCollapsedState(
)}}})(t=n.CollapseResize||(n.CollapseResize={}))}(ExperimentEditor||(ExperimentEditor=
{})),function(){ko.bindingHandlers.multiSelectMenu={init:function(n,t,i){var o=i(
).menuOptions||{},u=t(),r=$(n).find("ul"),f=$(n.children[0]),e;r.hide();r[0].style.
marginTop=f[0].offsetHeight.toString()+"px";f.click(function(){r.toggle()});e=function(
n){$(n.target).closest(r).length||$(n.target).closest(f).length||r.hide()};o.select=
function(n,t){$.each(r.find("li"),function(n,i){if(i===t.item[0]){var r=u()[n].isSelected(
);u()[n].isSelected(!r)}});u.valueHasMutated();n.preventDefault()};$(document).on(
"click",e);r.menu(o);ko.utils.domNodeDisposal.addDisposeCallback(n,function(){r.
menu("destroy");$(document).off("click",e)})}}}(ExperimentEditor||(ExperimentEditor=
{})),function(){ko.bindingHandlers.oninit={init:function(n,t){t()(n)}}}(ExperimentEditor||
(ExperimentEditor={})),function(){ko.bindingHandlers.placeholder={init:function(
n,t,i,r){var u=t();ko.applyBindingsToNode(n,{attr:{placeholder:u}},r)}}}(ExperimentEditor||
(ExperimentEditor={})),function(){ko.bindingHandlers.readonly={init:function(){}
,update:function(n,t){var i=ko.utils.unwrapObservable(t()),r=n.getAttribute("readonly")!==
null;i&&!r?n.setAttribute("readonly","readonly"):!i&&r&&n.removeAttribute("readonly")}
}}(ExperimentEditor||(ExperimentEditor={})),function(n){var t;(function(n){ko.bindingHandlers.
resize={init:function(t,i){var r=i(),f,u;if($(t).closest(r.parentContainerSelector).
length===0)throw new Error("Could not find the parent container with selector '"+
r.parentContainerSelector+".'");if(r.direction==="top"||r.direction==="bottom")f=
"height";else if(r.direction==="left"||r.direction==="right")f="width";else throw new
Error("location must be either 'top,' 'left,' 'bottom,' or 'right.'");if(r.minSize=
r.minSize?r.minSize:0,r.maxSize=r.maxSize?r.maxSize:$(t).closest(r.parentContainerSelector)[
f](),t.collapseResizeManager){if(u=t.collapseResizeManager,r.id!==u.id)throw new
Error("When using resize binding with collapse or JQueryCollapse, ids must match.");
if(u.direction!==r.direction)throw new Error("When using collapse and resize bindings together, 'location' must equal collapse's 'collapseFrom.'");
u.initForResize(r.minSize,r.maxSize)}else t.collapseResizeManager=new n.CollapseResizeManager(
t,r.direction,r.id),DataLab.Util.Disposable.exemptFromDiposablesInContextAssertion(
t.collapseResizeManager),t.collapseResizeManager.initForResize(r.minSize,r.maxSize),
ko.utils.domNodeDisposal.addDisposeCallback(t,function(){t.collapseResizeManager.
dispose()})},update:function(){}}})(t=n.CollapseResize||(n.CollapseResize={}))}(
ExperimentEditor||(ExperimentEditor={})),function(n){var t;(function(){ko.bindingHandlers.
slideVisible={init:function(n,t,i){var r=i().animating,u=ko.utils.unwrapObservable(
t());r(!1);u?$(n).show():$(n).hide()},update:function(n,t,i){var r=i().animating,
u=ko.utils.unwrapObservable(t()),f=$(n).css("display")!=="none";f!==u&&(r(!0),u==
!0?$(n).show("slide",{direction:"down",complete:function(){r(!1)}}):$(n).hide("slide",
{direction:"down",complete:function(){r(!1)}}))}}})(t=n.CustomUX||(n.CustomUX={})
)}(ExperimentEditor||(ExperimentEditor={})),function(){ko.bindingHandlers.slider=
{init:function(n,t,i){var r=i().sliderOptions||{},u=ko.utils.unwrapObservable(t(
));r.slide=function(n,t){u[0](t.values[0]);u[1](t.values[1])};$(n).slider(r);ko.
utils.domNodeDisposal.addDisposeCallback(n,function(){$(n).slider("destroy")})},
update:function(n,t){var r=ko.utils.unwrapObservable(t()),u=parseFloat(ko.utils.
unwrapObservable(r[0])),f=parseFloat(ko.utils.unwrapObservable(r[1])),i=[u,f];isNaN(
i[0])&&(i=[0,1]);$(n).slider("values",i)}}}(ExperimentEditor||(ExperimentEditor=
{})),function(){ko.bindingHandlers.stopBinding={init:function(){return{controlsDescendantBindings:
!0}}}}(ExperimentEditor||(ExperimentEditor={})),function(){var t=function(){function n(
n){this.template=n}return n.prototype.text=function(){return this.template},n}(),
n=new ko.nativeTemplateEngine;n.makeTemplateSource=function(n){return new t(n)};
ko.bindingHandlers.templateWithHtml={init:function(){return ko.bindingHandlers.template.
init.apply(this,arguments)},update:function(t,i,r,u,f){var e=i();if(typeof e=="string")
e={name:e};else if("html"in e)if("name"in e)throw new Error("The 'templateWithHtml' binding only takes the 'html' option");
else e.name=ko.utils.unwrapObservable(e.html);else throw new Error("The 'html' option is required");
e.templateEngine=n;ko.bindingHandlers.template.update(t,function(){return e},r,u,
f)}};ko.virtualElements.allowedBindings.templateWithHtml=ko.virtualElements.allowedBindings.
template}(ExperimentEditor||(ExperimentEditor={})),function(){ko.bindingHandlers.
usageBar={update:function(n,t){var i=ko.utils.unwrapObservable(t());$(n).hasClass(
"fx-usagebars")&&$(n).fxUsageBars("destroy");i&&$(n).fxUsageBars({thisEntityName:
i.usedLabel,totalEntityName:i.totalLabel,overCapacityName:i.overCapacityLabel,quotas:
[{usedByThis:i.used,totalQuota:i.total,unitLabel:i.unitLabel,unitLabelLong:i.unitLabelLong,
roundingDecimals:2}]})}}}(ExperimentEditor||(ExperimentEditor={})),function(n){var
t;(function(){ko.bindingHandlers.validate={init:function(n,t){ko.bindingHandlers.
hoverBalloon.init(n,function(){var n=ko.utils.unwrapObservable(t()),i=n.value;return{
message:i.errorMessage,forceBalloon:n.forceBalloon}},null,null,null)},update:function(
n,t){var i=ko.utils.unwrapObservable(t());ko.utils.unwrapObservable(i.value);$(n).
removeClass("fx-validation-invalid");i.value.errorMessage()&&$(n).addClass("fx-validation-invalid")}
}})(t=n.ValidateBindings||(n.ValidateBindings={}))}(ExperimentEditor||(ExperimentEditor=
{})),function(n){var t;(function(){ko.bindingHandlers.validatedInputBox={init:function(
n,t,i,r,u){if(!t().value)throw Error("The fxTextBox binding must have a value parameter");
if(!t().value.validate)throw Error("The fxTextBox binding must accept an IValidatableObservable for its binding argument");
var f=ko.utils.unwrapObservable(t()),e=f.value;$(n).on("input keyup",function(){
var i=ko.utils.unwrapObservable(t());i.value(n.value)});n.addEventListener("blur",
function(){var i=ko.utils.unwrapObservable(t());i.value(n.value);i.value.startValidating(
)});n.value=f.value();ko.bindingHandlers.validate.init(n,t,i,r,u)},update:function(
n,t,i,r,u){var e=!1,f;t().disabled!==undefined&&(e=ko.utils.unwrapObservable(t().
disabled));f=ko.utils.unwrapObservable(t());n.value!==f.value()&&(n.value=f.value(
));ko.bindingHandlers.validate.update(n,t,i,r,u)}}})(t=n.ValidateBindings||(n.ValidateBindings=
{}))}(ExperimentEditor||(ExperimentEditor={})),function(n){ko.bindingHandlers.d3graphcopy=
{init:function(t,i){var r=$(n.D3Graph.svgMap[i().name]),e=parseInt(i().animationDuration),
u=r.clone(),s=r.offset().left,o=r.parent().offset().top,h=r.outerWidth(),c=$(t).
offset().left,l=$(t).offset().top,f;$(t).css("width",r.width()+"px");f=$(t).parent(
).parent();f.css({width:"0px",visibility:"hidden"});u.appendTo($("body")).css({position:
"fixed",top:o+"px",left:s+"px"});requestAnimationFrame(function(){u.css("transition-duration",
e+"ms").css("transition-property","left").css("visibility","hidden");f.css({"transition-property":
"width","transition-duration":e+"ms"});requestAnimationFrame(function(){u.css("left",
c+"px");f.css("width",h+"px");setTimeout(function(){u.appendTo($(t)).css({position:
"static","transition-duration":0});u.css("visibility","");f.css({height:"",visibility:
"visible"});$(t).css("padding-top",o-l+"px")},e)})})}}}(ExperimentEditor||(ExperimentEditor=
{})),function(){ko.bindingHandlers.fxUpload={init:function(n,t){var i=t();$(n).fxUpload(
i)}}}(ExperimentEditor||(ExperimentEditor={})),function(){function n(n,t){var r=
t(),i=$(n);i.is(":data(fxs-fxsCopyButton)")&&i.fxsCopyButton("destroy");i.fxsCopyButton(
{text:r()})}ko.bindingHandlers.fxsCopyButton={init:n,update:n}}(ExperimentEditor||
(ExperimentEditor={})),function(n){var t=function(){function n(n,t){this.name=ko.
observable();this.description=ko.observable();this.name(n);this.handler=t}return n.
prototype.canBeAccepted=function(){return!0},n.prototype.dismissed=function(n){n.
accepted&&this.handler(this.name(),this.description())},n}();n.CreateWebServiceFromTransformDialogViewModel=
t}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(n,
t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);
r.prototype=t.prototype;n.prototype=new r},function(n){"use strict";function r()
{var i,t;if(n.Constants.CurrentBrowser===2||n.Constants.CurrentBrowser===3||n.Constants.
CurrentBrowser===4||n.Constants.CurrentBrowser===5||window.navigator.userAgent.toUpperCase(
).indexOf(".NET CLR 3.5")>=0)return!0;for(i=window.navigator.mimeTypes,t=0;t<i.length;
t++)if(i[t].type.ToUpperCase&&i[t].type.ToUpperCase()==="APPLICATION/X-MS-APPLICATION")
return!0;return!1}var u=function(n){function i(i,r){var u=this,f,e,o,s;n.call(this);
this.description=ko.observable("");this.gatewayCreated=!1;this.nameEnabled=ko.observable(
!0);this.gatewayRegistrationKey=ko.observable("");this.backend=i;this.onClose=r;
this.gatewayName=DataLab.Validation.asyncValidatableObservable(ko.observable(""),
function(n){return n.length<3?$.Deferred().resolve(DataLab.LocalizedResources.nameTooShort).
promise():n.length>150?$.Deferred().resolve(DataLab.LocalizedResources.nameTooLong).
promise():/^[a-zA-Z0-9\-\_]*$/.test(n)?u.backend.nameAvailable(n).then(function(
n){return n?null:DataLab.LocalizedResources.nameAlreadyInUse}):$.Deferred().resolve(
DataLab.LocalizedResources.dataGatewayNameInvalid).promise()});f=new $.fxs.fxsWizard.
WizardStep;f.contentTemplateOptions({name:DataLab.Util.initializeTemplateIfNecessary(
"NewDataGatewayStep1Template",ExperimentEditorTemplates._newDataGatewayStep1Markup),
data:this});f.title(DataLab.LocalizedResources.newDataGatewayNameWizardTitle);e=
new t(this.backend,this.gatewayName,0,this.gatewayRegistrationKey);this.registerForDisposal(
e);o=e.createWizardStep();this.wizard=$("<div/>").fxsWizard({closing:function(){
if(u.onClose)u.onClose(u.gatewayCreated?u.gatewayName():null);return u.dispose(),
!0},stepMoveNext:function(){return u.gatewayCreated?!0:(u.nameEnabled(!1),u.wizardViewModel.
lockOrUnlockNextSteps(!0),u.gatewayName.startValidating(),u.gatewayName.completeValidation(
).then(function(){u.gatewayName.isValid()?u.backend.createGateway(u.gatewayName(
),u.description()).then(function(n){u.gatewayCreated=!0;u.gatewayRegistrationKey(
n.RegistrationKey);u.wizardViewModel.lockOrUnlockNextSteps(!1);u.wizard.fxsWizard(
"setCurrentStep",o)},function(n){u.nameEnabled(!0);u.wizardViewModel.lockOrUnlockNextSteps(
!1);DataLab.Log.error("Gateway create failed. ",n.toString())}):(u.nameEnabled(!0),
u.wizardViewModel.lockOrUnlockNextSteps(!1))},function(n){u.nameEnabled(!0);u.wizardViewModel.
lockOrUnlockNextSteps(!1);DataLab.Log.error("Gateway name validation failed. ",n.
toString())}),!1)},size:[500,600]});this.wizardViewModel=this.wizard.fxsWizard("getViewModel");
s=[f,o];this.wizardViewModel.steps(s)}return __extends(i,n),i.prototype.show=function(
){this.wizard.fxsWizard("open");Impl.UI.Dialogs.ModalPresenter.open(this.wizard)}
,i}(DataLab.Util.Disposable),t,i;n.NewDataGatewayWizardViewModel=u;t=function(n)
{function t(t,i,u,f){var e=this;n.call(this);this.refreshingStatusInternal=!1;this.
isPolling=!1;this.backend=t;this.gatewayName=i;this.gatewayRegistrationKey=f?f:ko.
observable("");this.gatewayStatus=ko.observable(u);this.refreshingStatus=ko.observable(
!1);this.registered=ko.computed(function(){return e.statusIsRegistered(e.gatewayStatus(
))});this.gatewayHost=ko.observable(null);this.installLocalUrl=ko.observable(null);
this.transitionedToRegistered=ko.observable(!1);this.registerForDisposal(new DataLab.
Util.DisposableSubscription(this.gatewayStatus.subscribe(function(n){e.statusIsRegistered(
n)&&(e.gatewayRegistrationKey()!==null&&e.transitionedToRegistered(!0),e.stopPolling(
))})));this.regeneratingKey=ko.observable(!1);this.registerForDisposal(new DataLab.
Util.DisposableSubscription(this.gatewayRegistrationKey.subscribe(function(n){(e.
installLocalUrl(null),n&&n!=="")&&(r()&&!1&&e.backend.getExpressInstallLink(e.gatewayName(
),n).then(function(n){e.installLocalUrl(n)},function(n){DataLab.Log.error("Gateway get click once express install link failed. ",
n.toString())}),e.ensurePolling())})));this.registered()||f||this.regenerateKey(
)}return __extends(t,n),t.prototype.statusIsRegistered=function(n){return n===2||
n===4||n===3},t.prototype.regenerateKey=function(){var n=this;this.regeneratingKey(
!0);this.backend.generateRegistrationKey(this.gatewayName()).then(function(t){n.
regeneratingKey(!1);n.gatewayStatus(1);n.gatewayRegistrationKey(t)})},t.prototype.
dispose=function(){n.prototype.dispose.call(this);this.stopPolling()},t.prototype.
ensurePolling=function(){this.isPolling||(this.isPolling=!0,this.refreshingStatusInternal||
this.refreshStatusInternal())},t.prototype.stopPolling=function(){this.isPolling=
!1},t.prototype.refreshDone=function(n){var t=this;this.gatewayStatus(n.Status);
this.gatewayHost(n.Host);this.refreshingStatus(!1);this.refreshingStatusInternal=
!1;this.isPolling&&(clearTimeout(this.refreshTimeoutID),this.refreshTimeoutID=setTimeout(
function(){t.isPolling&&!t.refreshingStatusInternal&&t.refreshStatusInternal()},
6e3))},t.prototype.refreshStatus=function(){this.refreshingStatus(!0);this.refreshStatusInternal(
)},t.prototype.refreshStatusInternal=function(){this.refreshingStatusInternal||(
this.refreshingStatusInternal=!0,clearTimeout(this.refreshTimeoutID),this.backend.
getGateway(this.gatewayName()).then(this.refreshDone.bind(this)))},t.prototype.createWizardStep=
function(){var n=new $.fxs.fxsWizard.WizardStep,t="DataGatewayDownloadAndRegisterTemplate";
return n.contentTemplateOptions({name:DataLab.Util.initializeTemplateIfNecessary(
t,'<script type="text/ html" id="'+t+'">'+ExperimentEditorTemplates._dataGatewayDownloadAndRegisterMarkup+
"<\/script>"),data:this}),n.title(DataLab.LocalizedResources.dataGatewayDownloadAndRegisterTitle),
n},t.prototype.dismissed=function(){this.stopPolling();this.afterDialogClose&&this.
afterDialogClose()},t}(DataLab.Util.Disposable);n.DataGatewayDownloadAndRegisterViewModel=
t;i=function(){function n(n,t,i,r){this.backend=n;this.gatewayName=t;this.afterUpdate=
r;this.gatewayDescription=ko.observable(i)}return n.prototype.dismissed=function(
n){n.accepted&&(this.backend.updateGateway(this.gatewayName,this.gatewayDescription(
)),this.afterUpdate())},n}();n.DataGatewayDescriptionDialogViewModel=i;n.clickOnceApplicationLikelyToWork=
r}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(n,
t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);
r.prototype=t.prototype;n.prototype=new r},function(n){var r=DataLab.Model,t=DataLab.
LocalizedResources,i=function(i){function r(r,u,f){var e=this,o;f===void 0&&(f=!1);
i.call(this,r,u);this.experimentId=this.xeViewModel.experiment.experimentId()||this.
xeViewModel.experiment.parentExperimentId;this._defaultAcceptAction=this.acceptAction;
this._includeCurrent=f;this._canCopyToWorkspace=this._isSavedExperiment()&&!DataLab.
Trial.isWorkspaceTypeAnonymous();this._includeCurrent&&this.xeViewModel&&(o={FriendlyName:
DataLab.Workspace.friendlyName,WorkspaceId:DataLab.Workspace.id,DisplayText:t.copyExperimentCurrentWorkspacePrefix+
DataLab.Workspace.friendlyName},this.destinationWorkspace(o),this.workspaceOptions.
unshift(o));this.destinationIsCurrentWorkspace=ko.pureComputed(function(){return e.
_includeCurrent&&e.destinationWorkspace()&&n.isCurrentWorkspace(e.destinationWorkspace(
))});this.workspaceSelectorEnabled=ko.pureComputed(function(){return e._canCopyToWorkspace&&
e.workspaceOptions().length>(e._includeCurrent?1:0)})}return __extends(r,i),r.prototype.
dismissed=function(t){var r=this;this.acceptAction=n.isCurrentWorkspace(this.destinationWorkspace(
))?this._saveExperiment:function(){var t=r.xeViewModel.experiment;n.validateForCopyAsync(
t).done(function(){r._defaultAcceptAction()})};i.prototype.dismissed.call(this,t)}
,r.prototype.disableUnavailableOptions=function(n,t){var i=t.WorkspaceId===DataLab.
Workspace.id;ko.applyBindingsToNode(n,{disable:!this._canCopyToWorkspace&&!i},t)}
,r.prototype._saveExperiment=function(){this.xeViewModel?(this.xeViewModel.copy(
this.experimentName(),!0),this.xeViewModel.save().fail(function(t){DataLab.Features.
trialLimitationsEnabled()&&n.tryShowDialogForTrialRestriction(t)})):DataLab.Log.
error("xeViewModel is null when attempting to save an experiment","ExperimentSaveAs")}
,r.prototype._isSavedExperiment=function(){return this.experimentId&&this.experimentId.
lastIndexOf(window.environment.globalWorkspaceId,0)!==0},r}(n.CopyExperimentDialogViewModel);
n.ExperimentSaveAsDialogViewModel=i}(ExperimentEditor||(ExperimentEditor={})),function(
n){var t=function(){function t(t){var i=this,r;this.datasetUploadStartedEvent=new
ko.subscribable;this.workspace=t;r=DataLab.Util.values(this.workspace.applicationCache.
dataTypeRegistry.dataTypes);this.dataTypes=r.filter(function(n){return n.allowUpload}
);this.dataset=new DataLab.Model.UnsavedResource(t,t.datasetCache,t.datasetUploadsInProgress,
DataLab.Constants.DatasetName);this.fileToUpload=DataLab.Validation.validatableObservable(
null,function(t){var i=DataLab.Features.chunkedUploadInStudioEnabled()?n.Constants.
maxUploadSizeInBytesNew:n.Constants.maxUploadSizeInBytes,r=DataLab.Features.chunkedUploadInStudioEnabled(
)?n.Constants.maxUploadSizeDescriptionNew:n.Constants.maxUploadSizeDescription;if(
t){if(DataLab.Features.trialLimitationsEnabled()&&t.size>DataLab.Trial.getMaxDatasetUploadSize(
))return DataLab.Util.format(DataLab.LocalizedResources.fileTooLargeAnonymous,DataLab.
Util.formatDataSize(DataLab.Trial.getMaxDatasetUploadSize(),3));if(t.size>i)return DataLab.
Util.format(DataLab.LocalizedResources.fileTooLarge,r);if(t.size===0)return DataLab.
LocalizedResources.fileEmpty}else return DataLab.LocalizedResources.selectUploadFile;
return null});this.fileToUpload.subscribe(function(n){if(n){var t=DataLab.Util.first(
i.workspace.datasetCache.items(),function(t){return t.filename===n.name},null);t?
(i.dataset.deprecate(!0),i.dataset.resourceToDeprecate(t.name()),i.dataset.hint(
!0)):(i.dataset.name(n.name),i.dataset.hint(!1));i.selectDataTypeForFileName(n.name)}
});this.validatedFields=[this.dataset,this.dataset.dataType,this.fileToUpload]}return t.
prototype.getDataTypeCaption=function(n){var t=n.name;return n.fileExtension&&(t=
t+" (."+n.fileExtension+")"),t},t.prototype.dismissed=function(n){this.dataset.updateAvailableResources.
dispose();n.accepted?(DataLab.Log.info("Dataset upload dialog accepted"),this.upload(
)):DataLab.Log.info("Dataset upload dialog cancelled")},t.prototype.canBeAccepted=
function(){return this.validatedFields.forEach(function(n){return n.startValidating(
)}),this.validatedFields.every(function(n){return n.isValid()})},t.prototype.upload=
function(){var n=this,t,i;this.workspace.datasetUploadsInProgress().push(this.dataset.
name());t=function(){return n.workspace.uploadDatasetAsync(n.fileToUpload(),n.dataset.
name(),n.dataset.dataType(),n.fileToUpload().name,n.dataset.description(),n.dataset.
familyId())};i=DataLab.Util.then(DataLab.Util.whenTrue(this.workspace.applicationCache.
allPrefetched),t);this.datasetUploadStartedEvent.notifySubscribers(i)},t.prototype.
selectDataTypeForFileName=function(n){var i=this.workspace.applicationCache.dataTypeRegistry.
findDataTypesForFileName(n).filter(function(n){return n.allowUpload}),t;i.length>
0?this.dataset.dataType(i[0]):(t=this.workspace.applicationCache.dataTypeRegistry.
tryGetDataTypeWithId(DataLab.Model.WellKnownDataTypeIds.Any),t&&t.allowUpload&&this.
dataset.dataType(t))},t}();n.UploadDatasetDialogViewModel=t}(ExperimentEditor||(ExperimentEditor=
{})),function(n){var t=function(){function t(t){var i=this;this.uploadDialogExamples=
ko.observableArray([]);this.modulePackageUploadStartedEvent=new ko.subscribable;
this.workspace=t;var u=DataLab.Util.values(this.workspace.applicationCache.dataTypeRegistry.
dataTypes),r=new DataLab.Model.DataTypeRegistry(u),f=r.findDataTypesForFileExtension(
".zip").filter(function(n){return n.allowUpload});this.zipFile=new DataLab.Model.
UnsavedResource(t,t.datasetCache,t.customModulePackageUploadsInProgress,DataLab.
Constants.CustomModulePackageName);this.fileToUpload=DataLab.Validation.validatableObservable(
null,function(t){if(t){if(t.size>n.Constants.maxModulePackageUploadSizeInBytes)return DataLab.
Util.format(DataLab.LocalizedResources.fileTooLarge,n.Constants.maxModulePackageUploadSizeDescription);
if(t.size===0)return DataLab.LocalizedResources.fileEmpty;if(r.findDataTypesForFileName(
t.name).filter(function(n){return f.filter(function(t){return n===t}).length>0}).
length===0)return DataLab.LocalizedResources.fileInvalidType}else return DataLab.
LocalizedResources.selectUploadFile;return null});this.fileToUpload.subscribe(function(
n){if(n)i.zipFile.name(n.name);else return;i.zipFile.hint(!1);i.selectDataTypeForFileName(
n.name)});this.setDialogUploadExamplesAndText();this.validatedFields=[this.zipFile,
this.zipFile.dataType,this.fileToUpload]}return t.prototype.getDataTypeCaption=function(
n){var t=n.name;return n.fileExtension&&(t=t+" (."+n.fileExtension+")"),t},t.prototype.
dismissed=function(n){this.zipFile.updateAvailableResources.dispose();n.accepted?
(DataLab.Log.info("Module upload dialog accepted"),this.upload()):DataLab.Log.info(
"Module upload dialog cancelled")},t.prototype.canBeAccepted=function(){return this.
validatedFields.forEach(function(n){return n.startValidating()}),this.validatedFields.
every(function(n){return n.isValid()})},t.prototype.upload=function(){this.workspace.
customModulePackageUploadsInProgress().push(this.zipFile.name());var n=this.workspace.
uploadCustomModulePackageAsync(this.fileToUpload(),this.zipFile.name(),this.zipFile.
dataType(),this.fileToUpload().name,this.zipFile.description(),this.zipFile.familyId(
));this.modulePackageUploadStartedEvent.notifySubscribers(n)},t.prototype.selectDataTypeForFileName=
function(n){var i=this.workspace.applicationCache.dataTypeRegistry.findDataTypesForFileName(
n).filter(function(n){return n.allowUpload}),t;i.length>0?this.zipFile.dataType(
i[0]):(t=this.workspace.applicationCache.dataTypeRegistry.tryGetDataTypeWithId(DataLab.
Model.WellKnownDataTypeIds.Any),t&&t.allowUpload&&this.zipFile.dataType(t))},t.prototype.
setDialogUploadExamplesAndText=function(){var r=this,f=window.environment.customModuleSupportedLanguages.
replace(" ","").split(","),t=[],i,u;f.forEach(function(i){switch(i){case"R":t.push(
DataLab.LocalizedResources.uploadModuleDialogSupportedLanguageR);r.uploadDialogExamples.
push(new n.LinkPropertyViewModel(new DataLab.Model.LinkProperty(DataLab.LocalizedResources.
uploadModuleDialogExampleR,DataLab.LocalizedResources.uploadModuleDialogExampleRLink),
function(){DataLab.Log.featureUsage({featureID:152,groupID:0});window.open(DataLab.
LocalizedResources.uploadModuleDialogExampleRLink,"_blank")}));break;case"Py":t.
push(DataLab.LocalizedResources.uploadModuleDialogSupportedLanguagePy);r.uploadDialogExamples.
push(new n.LinkPropertyViewModel(new DataLab.Model.LinkProperty(DataLab.LocalizedResources.
uploadModuleDialogExamplePy,DataLab.LocalizedResources.uploadModuleDialogExamplePyLink),
function(){DataLab.Log.featureUsage({featureID:153,groupID:0});window.open(DataLab.
LocalizedResources.uploadModuleDialogExamplePyLink,"_blank")}))}});t.length===1?
i=t[0]:(u=t.pop(),i=t.join(", ")+" "+DataLab.LocalizedResources.uploadModuleDialogSupportedLanguagesConjunction+
" "+u);this.uploadDialogText=DataLab.Util.format(DataLab.LocalizedResources.uploadModuleDialogDescriptionText,
i)},t}();n.UploadModuleDialogViewModel=t}(ExperimentEditor||(ExperimentEditor={})
);__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var
i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r}
,function(n){var t;(function(n){function i(){n.NewDrawerMenuDestroy();var i=$(ExperimentEditorTemplates.
_newDatasetMenuMarkup).prependTo(".fxs-drawerdetails-details-box");ko.applyBindings(
new t,i[0])}var t=function(n){function t(){n.call(this);this.detailMessage=ko.observable(
DataLab.LocalizedResources.newDatasetMenuHeader)}return __extends(t,n),t}(DataLab.
Util.Disposable);n.NewDatasetMenuViewModel=t;n.NewDatasetMenuInitialize=i})(t=n.
NewDrawerMenu||(n.NewDrawerMenu={}))}(ExperimentEditor||(ExperimentEditor={}));__extends=
this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(
i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(
t){function c(){t.NewDrawerMenuDestroy();var n=new u,i=$(ExperimentEditorTemplates.
_newExperimentMenuWithCommunityMarkup).prependTo(".fxs-drawerdetails-details-box");
n.setViewMoreLabelMargin();ko.applyBindings(n,i[0]);n.loadCards()}var o=DataLab.
Util,i=function(){function t(){}return t.galleryTopNSamplesFilterTemplate=function(
t){t===void 0&&(t=!1);var i=n.Community.msftAuthorId;return t?"$skip=0&$orderby=trending desc&$filter=author/id eq '"+
i+"'":"$skip=0&$top={0}&$orderby=trending desc&$filter=author/id eq '"+i+"'"},t.
getTopSamples=function(i){return i?n.Community.GalleryQueryUtil.queryCatalogByFilter(
DataLab.Util.format(t.galleryTopNSamplesFilterTemplate(),i.toString())):n.Community.
GalleryQueryUtil.queryCatalogByFilter(t.galleryTopNSamplesFilterTemplate(!0))},t.
getTopExperiments=function(i){return n.Community.GalleryQueryUtil.queryCatalogByFilter(
DataLab.Util.format(t.galleryTopNFilterTemplate,i.toString()))},t.searchCatalog=
function(i,r){var u=encodeURIComponent(i);return n.Community.GalleryQueryUtil.searchCatalog(
DataLab.Util.format(t.searchFilterTemplate,u,r.toString()))},t.sortSamplesResult=
function(t,i){if(t&&t.total_count!=null&&t.value)return new n.Community.CatalogQueryByFilterResult(
t.total_count,t.value.sort(i))},t.getTopSampleNotebooks=function(){return n.Community.
GalleryQueryUtil.queryCatalogCollection("notebook")},t.galleryTopNFilterTemplate=
"$skip=0&$top={0}",t.searchFilterTemplate="$search='{0}'&$orderby=trending&$skip=0&$top={1}",
t}(),e,r,u;t.NewExperimentMenuFromCatalogUtil=i;var s=function(){function n(n){this.
templateName="blank-experiment-card-template";this.isVisible=ko.computed(function(
){return!n().trim()})}return n.prototype.onSelect=function(){DataLabViews.navigateToExperiment(
DataLabViews.ExperimentType.draftExperimentId)},n}(),h=function(){function t(n,t)
{this.templateName="tour-experiment-card-template";this.isVisible=ko.computed(function(
){return!t().trim()});this.id=n}return t.prototype.onSelect=function(){DataLab.Features.
animatedTourEnabled()?(DataLab.Log.featureUsage({featureID:157,groupID:154}),n.AnimatedExperiment.
launch()):(DataLab.Log.featureUsage({featureID:92,groupID:84}),n.GuidedExperiment.
launch())},t}(),f=function(){function t(t,i){var f=this,r,u;this.DEFAULT_AVATAR=
"/Content/Images/fxs.avatarbar.default-avatar-large.png";this.catalogEntity=i;this.
templateName=null;this.isVisible=ko.computed(function(){var n=new RegExp(DataLab.
Util.escapeRegExpString(t().trim()),"ig");return n.test(f.catalogEntity.name)});
this.authorAvatarUrl=ko.observable(this.DEFAULT_AVATAR);i.author.avatar_url&&(r=
new Image,r.onload=function(){f.authorAvatarUrl(i.author.avatar_url)},r.src=i.author.
avatar_url);this.algorithmList=(i.algorithms||[]).join(", ");this.tagList=i.tags||
[];this.isMsft=i.author.id===n.Community.msftAuthorId;u=Math.floor((Date.now()-Date.
parse(i.updated_at))/864e5);this.daysAgoText=u+" day"+(u>1?"s":"")+" ago";this.overlayIsActive=
ko.observable(!1);this.viewInGalleryLink=n.Community.galleryBaseUrl+"/Details/"+
i.id}return t.prototype.onSelect=function(){},t}();t.GalleryEntityCardViewModel=
f;e=function(t){function i(n,i){t.call(this,n,i);this.templateName="experiment-card-template"}
return __extends(i,t),i.prototype.onSelect=function(){n.Community.copyCommunityExperimentToThisWorkspaceAndNavigateToExperiment(
this.catalogEntity.content.package_link,this.viewInGalleryLink,this.catalogEntity.
id)},i}(f);r=function(t){function i(i){var r=this;t.call(this);this.searchBoxPlaceholder=
i;this.loading=ko.observable(!1);this.searchTextInstantValue=ko.observable("");this.
searchTextDelayedValue=this.searchTextInstantValue.extend({rateLimit:{timeout:300,
method:"notifyWhenChangesStop"}});this.viewMoreSamplesMargin=ko.observable("0px");
this.setViewMoreLabelMargin=function(){var n=24,t=$(".fxs-menu-menu").eq(1).width(
),i=$(".experiment-card-list").width()+t,u=i%(230+n),f=u+n;r.viewMoreSamplesMargin(
f+"px")};this.viewMoreSamplesLink=n.Community.galleryBaseUrl}return __extends(i,
t),i.prototype.onCardSelected=function(n){Shell.UI.Drawer.close();n.onSelect()},
i.prototype.loadCards=function(){var n=this,t;this.loadCardsFunc&&(1&&this.loading(
!0),t=this.loadCardsFunc(),this.loading(!0),t.always(function(){n.loading(!1);n.
setViewMoreLabelMargin()}))},i}(DataLab.Util.Disposable);t.NewAbstractCatalogMenuViewModel=
r;u=function(r){function u(){var n=this,t;r.call(this,DataLab.LocalizedResources.
newExperimentMenuSearchPlaceholder);this.samplesQueryResults=ko.observable(null);
this.tourExperimentTemplate=ko.observable(null);this.loadCardsFunc=this._loadExperimentCards;
t=function(t){var i=[];return t&&t.value&&t.value.forEach(function(t){var r=new e(
n.searchTextDelayedValue,t);i.push(r)}),i};this.cards=ko.computed(function(){var
i=t(n.samplesQueryResults()),r,u;return n.tourExperimentTemplate()&&(r=new h(n.tourExperimentTemplate(
).experimentId,n.searchTextDelayedValue),i.unshift(r)),u=new s(n.searchTextDelayedValue),
i.unshift(u),i},this)}return __extends(u,r),u.prototype._loadExperimentCards=function(
){var r=this,u;return i.newExperimentMenuSamplesCache&&(t.NewExperimentTemplateList.
guidedExperimentTemplate||!DataLab.Features.guidedExperimentEnabled())?(DataLab.
Features.guidedExperimentEnabled()&&this.tourExperimentTemplate(t.NewExperimentTemplateList.
guidedExperimentTemplate),this.samplesQueryResults(i.newExperimentMenuSamplesCache),
o.when(null)):(u=t.NewExperimentTemplateList.guidedExperimentTemplate?DataLab.Util.
when(t.NewExperimentTemplateList.guidedExperimentTemplate):t.NewExperimentTemplateList.
initializeTutorialTemplate(window.DataLab.Workspace),DataLab.Util.when(i.getTopSamples(
).done(function(t){var u=i.sortSamplesResult(t,n.Community.CatalogEntity.CatalogExperimentSampleSortFunction);
i.newExperimentMenuSamplesCache=u;r.samplesQueryResults(u)}),u.done(function(){r.
tourExperimentTemplate(t.NewExperimentTemplateList.guidedExperimentTemplate)})).
fail($.noop))},u}(r);t.NewExperimentCatalogMenuViewModel=u;t.NewExperimentCatalogMenuInitialize=
c})(t=n.NewDrawerMenu||(n.NewDrawerMenu={}))}(ExperimentEditor||(ExperimentEditor=
{})),function(n){var t;(function(t){function i(){var n=$(".fxs-drawerdetails-details-box");
n.children().each(function(n,t){var i=ko.dataFor(t);i instanceof DataLab.Util.Disposable?
i.dispose():i=null});n.empty()}function r(){var t=$(".fxs-drawerdetails-details-box");
t.children().each(function(t,i){var r=ko.dataFor(i);r instanceof n.NewDrawerMenu.
NewAbstractCatalogMenuViewModel&&r.setViewMoreLabelMargin()})}function u(n,t,i){
var r=window.newExperimentGeneration?++window.newExperimentGeneration.numTimesNavigateCalled:
1;window.newExperimentGeneration={id:n,numTimesNavigateCalled:r,createCopy:function(
){var n=cdm.getActiveItem();n.xeViewModel.copy(DataLab.Util.format(DataLab.LocalizedResources.
newExperimentMenuTemplateCopyName,t));i&&i()}};DataLabViews.navigateToExperiment(
n)}t.NewDrawerMenuDestroy=i;t.NewDrawerMenuRecalculateSize=r;t.openSampleAsCopy=
u})(t=n.NewDrawerMenu||(n.NewDrawerMenu={}))}(ExperimentEditor||(ExperimentEditor=
{}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t;(function(t){function e(){var t,r,u;n.NewDrawerMenu.NewDrawerMenuDestroy(
);t=new f;r=$(ExperimentEditorTemplates._newExperimentMenuMarkup).prependTo(".fxs-drawerdetails-details-box");
ko.applyBindings(t,r[0]);i.templateList&&i.templateList.length>0?t.sampleExperimentTemplates(
i.templateList):(u=n.NewDrawerMenu.NewExperimentTemplateList.initialize(window.DataLab.
Workspace),u.done(function(){t.sampleExperimentTemplates(i.templateList)}).always(
function(){}))}var r=function(){function n(t,i){if(this.experimentId=t,this.description=
i,this.isGuidedExperiment=!1,t===DataLabViews.ExperimentType.draftExperimentId)this.
experimentIcon="/Content/SampleExperimentIcons/PlusBlankExperiment.svg",this.title=
this.description;else if(i===DataLab.Constants.GuidedExperimentDescription)this.
title=this.description,this.experimentIcon="/Content/SampleExperimentIcons/GuidedExperimentShortTile.svg",
this.isGuidedExperiment=!0;else if(this.title=this.description.replace(/^Sample Experiment(:\s|\s-\s)/,
""),n.numberedSampleRegEx.test(this.description)){var r=this.description.match(n.
numberedSampleRegEx)[1];this.experimentIcon=Number(r)<=7?"/Content/SampleExperimentIcons/Sample"+
r+".svg":"/Content/SampleExperimentIcons/MachineLearningSample.svg"}else this.experimentIcon=
"/Content/SampleExperimentIcons/MachineLearningSample.svg"}return n.templateSortFunction=
function(t,i){if(t.experimentId===i.experimentId)return 0;if(t.experimentId===DataLabViews.
ExperimentType.draftExperimentId)return-1;if(i.experimentId===DataLabViews.ExperimentType.
draftExperimentId)return 1;if(n.numberedSampleRegEx.test(t.description)&&!n.numberedSampleRegEx.
test(i.description))return-1;if(!n.numberedSampleRegEx.test(t.description)&&n.numberedSampleRegEx.
test(i.description))return 1;if(n.numberedSampleRegEx.test(t.description)&&n.numberedSampleRegEx.
test(i.description)){var r=t.description.match(n.numberedSampleRegEx)[1],u=i.description.
match(n.numberedSampleRegEx)[1];return r<u?-1:1}return 0},n.numberedSampleRegEx=
/^\sSample ([1-9][0-9]*):.*/,n}(),i,u,f;t.NewExperimentTemplate=r;i=function(){function n(
){}return n.initializeTutorialTemplate=function(t){if(t&&t.listExperimentsAsync)
return DataLab.Util.then(t.listExperimentsAsync({includeNonLeaf:!1,includeArchived:
!1}),function(i){i.forEach(function(i){var u=i.ExperimentId.split(".")[0],f=new r(
i.ExperimentId,i.Description);u&&u!==t.id&&f.isGuidedExperiment&&!n.guidedExperimentTemplate&&
(n.guidedExperimentTemplate=f)})})},n.initialize=function(t){if(t&&t.listExperimentsAsync)
{var i=n.currentInitializationPromise&&n.currentInitializationPromise.state()===
"pending";return i||(n.currentInitializationPromise=DataLab.Util.then(t.listExperimentsAsync(
{includeNonLeaf:!1,includeArchived:!1}),function(i){n.templateList=[];DataLab.Trial.
isWorkspaceTypeAnonymous()&&(i=i.filter(DataLab.Trial.filterSample));i.forEach(function(
i){var f=i.ExperimentId.split(".")[0],u;f&&f!==t.id&&(u=new r(i.ExperimentId,i.Description),
u.isGuidedExperiment?n.guidedExperimentTemplate=u:n.templateList.push(u))});n.templateList.
sort(r.templateSortFunction);DataLab.Features.guidedExperimentEnabled()&&n.guidedExperimentTemplate&&
n.templateList.unshift(n.guidedExperimentTemplate)})),n.currentInitializationPromise}
},n.templateList=[],n.guidedExperimentTemplate=null,n.currentInitializationPromise=
null,n}();t.NewExperimentTemplateList=i;u=function(){function n(n,t){var i=this;
this.id=n.experimentId;this.title=n.title;this.description=n.description;this.icon=
n.experimentIcon;this.isBlankTemplate=n.experimentId===DataLabViews.ExperimentType.
draftExperimentId;this.isGuidedExperiment=n.isGuidedExperiment;this.isVisible=ko.
computed(function(){var n=new RegExp(DataLab.Util.escapeRegExpString(t()),"ig");
return n.test(i.title)})}return n}();t.NewExperimentMenuTemplateViewModel=u;f=function(
t){function i(){var i=this;t.call(this);this.sampleExperimentTemplates=ko.observable(
[]);this.searchText=ko.observable("");this.sampleExperiments=ko.computed(function(
){var n=[],t;return i.sampleExperimentTemplates().forEach(function(t){n.push(new
u(t,i.searchText))}),t=new r(DataLabViews.ExperimentType.draftExperimentId,DataLab.
LocalizedResources.newExperimentMenuBlankExperiment),n.unshift(new u(t,i.searchText)),
n},this);this.onExperimentSelected=function(t){if(t.isGuidedExperiment){DataLab.
Log.featureUsage({featureID:92,groupID:84});n.GuidedExperiment.launch();return}if(
t.id===DataLabViews.ExperimentType.draftExperimentId){Shell.UI.Drawer.close();DataLabViews.
navigateToExperiment(DataLabViews.ExperimentType.draftExperimentId);return}Shell.
UI.Drawer.close();n.NewDrawerMenu.openSampleAsCopy(t.id,t.description)}}return __extends(
i,t),i}(DataLab.Util.Disposable);t.NewExperimentMenuViewModel=f;t.NewExperimentMenuInitialize=
e})(t=n.NewDrawerMenu||(n.NewDrawerMenu={}))}(ExperimentEditor||(ExperimentEditor=
{}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t;(function(n){function i(){n.NewDrawerMenuDestroy();var i=
$(ExperimentEditorTemplates._newModuleMenuMarkup).prependTo(".fxs-drawerdetails-details-box");
ko.applyBindings(new t,i[0])}var t=function(n){function t(){n.call(this);this.detailMessage=
ko.observable(DataLab.LocalizedResources.newModuleMenuHeader)}return __extends(t,
n),t}(DataLab.Util.Disposable);n.NewModuleMenuViewModel=t;n.NewModuleMenuInitialize=
i})(t=n.NewDrawerMenu||(n.NewDrawerMenu={}))}(ExperimentEditor||(ExperimentEditor=
{}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t;(function(t){function s(){var i,n;t.NewDrawerMenuDestroy(
);i=DataLab.Features.jupyterNotebooksInGalleryEnabled()?$(ExperimentEditorTemplates.
_newExperimentMenuWithCommunityMarkup).prependTo(".fxs-drawerdetails-details-box"):
$(ExperimentEditorTemplates._newNotebookMenuMarkup).prependTo(".fxs-drawerdetails-details-box");
n=new e;n.setViewMoreLabelMargin();ko.applyBindings(n,i[0]);n.loadCards()}function h(
t,u){var e,o,s,h,c,f,a;return u===void 0&&(u=null),e=$.Deferred(),o=0,u=u||i.renameNotebookDialogDefaultNotebookNameBeginning,
u=u+" ",s=l(t),h=RegExp("^"+u+"(\\d+)(?:"+s+")?$"),DataLab.Workspace.applicationCache.
notebookCache.items.forEach(function(n){if(h.test(n.name())){var t=Number(n.name(
).match(h)[1]);t>o&&(o=t)}}),c=u+ ++o+s,f=new n.RenameNotebookDialogViewModel(c),
n.DialogViews.RenameNotebook.show(f),a=new r.DisposableSubscription(f.dialogDismissed.
subscribe(function(){f.resultAccepted()?e.resolve(f.newNotebookName()):e.resolve(
null);a.dispose();f.dispose()})),r.when(e.promise())}function c(n){var t=null;return n===
DataLab.Constants.NotebookLanguage.Python2?t=i.notebookLanguagePython2:n===DataLab.
Constants.NotebookLanguage.Python3&&(t=i.notebookLanguagePython3),t}function f(n)
{switch(n){case DataLab.Constants.NotebookLanguage.Python2:return"/Content/Notebooks/python.tile.gray.svg"
case DataLab.Constants.NotebookLanguage.Python3:return"/Content/Notebooks/python.tile.svg"
case DataLab.Constants.NotebookLanguage.R:return"/Content/Notebooks/R.tile.svg";
default:throw new Error("unknown notebook language: "+String(n));}}function l(n)
{switch(n){case DataLab.Constants.NotebookLanguage.Python2:case DataLab.Constants.
NotebookLanguage.Python3:return DataLab.Constants.PythonNotebookSuffix;case DataLab.
Constants.NotebookLanguage.R:return DataLab.Constants.RNotebookSuffix;default:throw new
Error("unknown notebook language: "+String(n));}}var a=DataLab.Constants.FeatureId,
r=DataLab.Util,i=DataLab.LocalizedResources,v=DataLab.Constants.NotebookType,o=function(
t){function i(n,i){if(t.call(this,n,i),this.templateName="gallery-notebook-card-template",
this.languageImage="/Content/Notebooks/python.tile.svg",i.languages&&i.languages[
0])switch(i.languages[0]){case"Python3":this.languageImage="/Content/Notebooks/python.tile.svg";
break;case"Python2":this.languageImage="/Content/Notebooks/python.tile.gray.svg";
break;case"R":this.languageImage="/Content/Notebooks/R.tile.svg"}}return __extends(
i,t),i.prototype.onSelect=function(){var i=this,t;DataLab.Log.featureUsage({featureID:
170,groupID:119,data:this.catalogEntity.name});this.catalogEntity.content&&this.
catalogEntity.content.package_link?(Shell.UI.Spinner.show(),t=DataLab.Util.addSpinnerToBlankWindow(
),n.Community.importGalleryNotebook(this.catalogEntity.content.package_link,this.
viewInGalleryLink,this.catalogEntity.id).always(function(){Shell.UI.Spinner.hide(
)}).done(function(i){var r=i.NotebookId||i.ExperimentId,u=DataLab.Workspace;DataLab.
Util.whenTrue(u.applicationCache.allPrefetched).done(function(){DataLab.Workspace.
applicationCache.notebookCache.getItem(r).fail($.noop)});n.NotebookHelpers.openNotebookById(
r,t)}).fail(function(){t&&!t.closed&&(t.close(),t=null);DataLab.Util.showErrorNotification(
{title:DataLab.Util.format(DataLab.LocalizedResources.newNotebookMenuOpenCallFailed,
i.viewInGalleryLink)});DataLab.Log.error("Call to open gallery notebook failed. "+
i.viewInGalleryLink)})):DataLab.Log.error("gallery notebook is missing package link (galleryUri = "+
this.viewInGalleryLink+")")},i}(t.GalleryEntityCardViewModel),u=function(){function t(
n,t,i,u,f,e,o,s){var h=this;if(e===void 0&&(e=""),o===void 0&&(o=""),s===void 0&&
(s=""),this.icon=n,this.nameLabel=t,this.language=i,this.type_=u,this.iconClass=
e,this.subtitle=o,this.description=s,this.languageLabel=c(i),u===0)this.templateName=
"blank-notebook-card-template",this.isVisible=ko.computed(function(){return!f().
trim()});else if(u===1)this.templateName="example-notebook-card-template",this.isVisible=
ko.computed(function(){var n=new RegExp(r.escapeRegExpString(f().trim()),"ig");return n.
test(h.nameLabel)});else throw new Error("unknown notebook type");}return t.prototype.
onSelect=function(){this._openNotebook()},t.prototype._openNotebook=function(){var
t=this,r=h(this.language,i.renameNotebookDialogDefaultNotebookNameBeginning);r.done(
function(i){var r,u,f;i&&(r={Notebook:{Name:i,Language:t.language,Author:DataLab.
Workspace.getUserName()},Parameters:{TemplateName:n.NotebookHelpers.getNotebookCreationTemplate(
t.language,t.type_)}},n.NotebookHelpers.createAndOpenNotebook(r),u=t.type_===0?120:
121,f=JSON.stringify({name:t.nameLabel,language:t.language}),DataLab.Log.featureUsage(
{featureID:119,groupID:u,data:f}))}).fail(function(){DataLab.Log.error("failed prompting for new name")}
)},t}(),e;t.NotebookCardViewModel=u;e=function(t){function e(){var n=this;t.call(
this,i.newNotebookMenuSearchPlaceholder);this.blankNotebooks=[new u(f(DataLab.Constants.
NotebookLanguage.Python3),i.notebookPlusNewBlankPython3NotebookLabel,DataLab.Constants.
NotebookLanguage.Python3,0,this.searchTextDelayedValue,"menu-python-icon",i.notebookPlusNewBlankExperiment),
new u(f(DataLab.Constants.NotebookLanguage.Python2),i.notebookPlusNewBlankPython2NotebookLabel,
DataLab.Constants.NotebookLanguage.Python2,0,this.searchTextDelayedValue,"menu-python-icon",
i.notebookPlusNewBlankExperiment)];DataLab.Features.blankRNotebookInNewMenuEnabled(
)&&this.blankNotebooks.push(new u(f(DataLab.Constants.NotebookLanguage.R),i.notebookPlusNewBlankRNotebookLabel,
DataLab.Constants.NotebookLanguage.R,0,this.searchTextDelayedValue,"menu-python-icon",
DataLab.LocalizedResources.notebookPlusNewBlankExperiment));this.exampleNotebooks=
[];DataLab.Features.jupyterNotebooksInGalleryEnabled()||(this.exampleNotebooks=[
new u(f(DataLab.Constants.NotebookLanguage.Python2),i.notebookPlusNewExamplePython2Notebook,
DataLab.Constants.NotebookLanguage.Python2,1,this.searchTextDelayedValue,"menu-python-logo",
null,i.notebookPlusNewExampleDescription)]);this._gallerySamples=ko.observableArray(
[]);this.cards=ko.computed(function(){return[].concat(n.blankNotebooks,n.exampleNotebooks,
n._gallerySamples())});DataLab.Features.jupyterNotebooksInGalleryEnabled()&&(this.
loadCardsFunc=this._loadCards)}return __extends(e,t),e.prototype._getGalleryNotebookCards=
function(){var t=this,i=e.queryResultPromise||n.Community.getGalleryNotebookSamples(
);return r.then(i,function(n){return e.queryResultPromise||(e.queryResultPromise=
r.when(n)),(n.value||[]).map(function(n){return new o(t.searchTextDelayedValue,n)}
)}).fail(function(){return DataLab.Log.error("error querying gallery notebooks for new menu"),
r.when([])})},e.prototype._loadCards=function(){var t=this,n=$.Deferred();return this.
_getGalleryNotebookCards().done(function(i){t._gallerySamples(i);n.resolve()}).fail(
function(t){n.reject(t)}),n.promise()},e}(t.NewAbstractCatalogMenuViewModel);t.NewNotebookMenuViewModel=
e;t.NewNotebookMenuInitialize=s})(t=n.NewDrawerMenu||(n.NewDrawerMenu={}))}(ExperimentEditor||
(ExperimentEditor={}));__extends=this.__extends||function(n,t){function r(){this.
constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;
n.prototype=new r},function(n){var t;(function(n){function i(i){n.NewDrawerMenuDestroy(
);var r=$(ExperimentEditorTemplates._newProjectMenuMarkup).prependTo(".fxs-drawerdetails-details-box");
ko.applyBindings(new t(i),r[0])}var t=function(n){function t(t){n.call(this);this.
onCreateProjectCallback=t;this.name=ko.observable("");this.description=ko.observable(
"");this.descriptionMaxLength=ko.observable(2e3);this.nameMaxLength=ko.observable(
140)}return __extends(t,n),t.prototype.createProject=function(){if(this.name()){
this.onCreateProjectCallback&&this.onCreateProjectCallback();var n={Id:"",FamilyId:
"",ServiceVersion:1,IsLatest:!0,Created:"",Name:this.name(),Author:DataLab.User?
DataLab.User.name:"",Description:this.description(),Modified:"",Assets:{}},t=DataLab.
Workspace;t.createProjectAsync(n,!1).done(function(){alert("todo: add navigateTo to ProjectDetailsView")}
).fail(function(){})}},t}(DataLab.Util.Disposable);n.NewProjectMenuViewModel=t;n.
NewProjectMenuInitialize=i})(t=n.NewDrawerMenu||(n.NewDrawerMenu={}))}(ExperimentEditor||
(ExperimentEditor={}));__extends=this.__extends||function(n,t){function r(){this.
constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;
n.prototype=new r},function(n){var t=function(t){function i(n,i){var r=this;t.call(
this);this.wsInputNodes=[];this.wsOutputNodes=[];this.portsMap={};this.nodes=n;this.
connections=i;this.registerForDisposal(new DataLab.Util.DisposableSubscription(this.
nodes.subscribe(function(){r.reloadNodes();r.walk()})),new DataLab.Util.DisposableSubscription(
this.connections.subscribe(function(){r.reloadConnections();r.walk()})));this.reloadNodes(
);this.reloadConnections();this.walk()}return __extends(i,t),i.prototype.walk=function(
){var i=this,t=[];this.wsOutputNodes.forEach(function(n){i.findReachableNodes(n,
t)});t.length||(t=DataLab.Util.values(this.nodes()));t.length&&this.wsInputNodes.
length&&this.wsInputNodes.forEach(function(n){var r=DataLab.Util.first(n.outputPorts);
i.getPortMap(r).forEach(function(n){i.getPortMap(n).forEach(function(u){u!==r&&i.
pruneInputNodes(u.parent,t,n)})})});DataLab.Util.forEach(this.nodes(),function(i)
{i.belongsToExperimentFlow(!(i instanceof n.WebServicePort));i.belongsToWebServiceFlow(
t.indexOf(i)>=0)})},i.prototype.reloadNodes=function(){var t=this;this.wsInputNodes=
[];this.wsOutputNodes=[];DataLab.Util.forEach(this.nodes(),function(i){if(i instanceof
n.WebServicePort){var r=i;r.webServicePortNode.type===0?t.wsInputNodes.push(r):t.
wsOutputNodes.push(r)}})},i.prototype.reloadConnections=function(){var n=this;this.
portsMap={};DataLab.Util.forEach(this.connections(),function(t){n.putPortMap(t.inputPort,
t.outputPort);n.putPortMap(t.outputPort,t.inputPort)})},i.prototype.findReachableNodes=
function(n,t){var i=this;t.indexOf(n)<0&&(t.push(n),DataLab.Util.forEach(n.inputPorts,
function(n){DataLab.Util.forEach(i.getPortMap(n),function(n){i.findReachableNodes(
n.parent,t)})}))},i.prototype.putPortMap=function(n,t){var i=this.getPortId(n);this.
portsMap[i]?this.portsMap[i].indexOf(t)<0&&this.portsMap[i].push(t):this.portsMap[
i]=[t]},i.prototype.pruneInputNodes=function(n,t,i){var r=this,f=t.indexOf(n),u;
f<0||(u=0,DataLab.Util.forEach(n.outputPorts,function(n){r.getPortMap(n).forEach(
function(n){n!==i&&t.indexOf(n.parent)>=0&&u++})}),u||(t.splice(f,1),DataLab.Util.
forEach(n.inputPorts,function(n){r.getPortMap(n).forEach(function(n){r.pruneInputNodes(
n.parent,t,i)})})))},i.prototype.getPortMap=function(n){var t=this.getPortId(n);
return this.portsMap[t]?this.portsMap[t]:[]},i.prototype.getPortId=function(n){return n.
portModel.parent.id+":"+n.portModel.name},i}(DataLab.Util.Disposable);n.ExperimentDataFlowWalker=
t}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(n,
t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);
r.prototype=t.prototype;n.prototype=new r},function(n){var i=function(){function n(
){}return n.InputPortId="input",n.OutputPortId="output",n}(),t;n.ExperimentWebServiceConstants=
i;t=function(t){function i(){t.call(this);this.inputPalleteItem=new n.PaletteItem(
DataLab.Model.WebServicePortType[0],"Input","Web Service Input Port",n.Constants.
EntityType.WebServicePort);this.outputPalleteItem=new n.PaletteItem(DataLab.Model.
WebServicePortType[1],"Output","Web Service Output Port",n.Constants.EntityType.
WebServicePort);this.webServiceCategory=new n.PaletteCategory(DataLab.Constants.
ResourceCategory.WebService);this.webServiceCategory.items.push(this.inputPalleteItem);
this.webServiceCategory.items.push(this.outputPalleteItem)}return __extends(i,t),
i}(DataLab.Util.Disposable);n.ExperimentWebServiceViewModel=t}(ExperimentEditor||
(ExperimentEditor={})),function(n){var t=DataLab.Util.Images,i=function(){function n(
n,t){var i=this;this.maxSizeInMegabytes=n;this.imageResizeOptions=t;this.finalImageContent=
ko.observable();this.selectedImage=ko.observable();this.errorMessage=ko.observable(
);this.isProcessingSelectedImage=ko.observable(!1);this.selectedImage.subscribe(
function(n){n&&i.processSelectedImage(n)})}return n.prototype.clearImage=function(
){this.finalImageContent(null);this.selectedImage(null);this.errorMessage(null)}
,n.prototype.processSelectedImage=function(n){var i=this;return this.isProcessingSelectedImage(
!0),this.finalImageContent(null),this.errorMessage(null),t.resizeFileIfNecessary(
n,this.imageResizeOptions,this.maxSizeInMegabytes).done(function(n){i.finalImageContent(
n)}).fail(function(n){i.errorMessage(n.message)}).always(function(){i.isProcessingSelectedImage(
!1)})},n}();n.ImageUploadViewModel=i}(ExperimentEditor||(ExperimentEditor={})),function(
n){var t=function(){function n(n,t,i){var r=this;this.experimentId=ko.observable(
null);this.experimentId(n);this.role=t;this.roleName=ko.computed(function(){switch(
r.role){case DataLab.DataContract.ExperimentRole.Training:return DataLab.LocalizedResources.
trainingExperimentTabContent;case DataLab.DataContract.ExperimentRole.Scoring:return DataLab.
LocalizedResources.scoringExperimentTabContent;default:return DataLab.LocalizedResources.
computingExperimentTabContent}});this.active=ko.computed(function(){return i&&r.
experimentId()===i.experimentId()})}return n.prototype.navigate=function(){if(!this.
experimentId()){DataLab.Log.error("null experimentId","project navigate",JSON.stringify(
{role:this.roleName}));var n=new Shell.UI.Notifications.Notification(DataLab.LocalizedResources.
projectExperimentNavigationError,"error");n.setActions([Shell.UI.Notifications.Buttons.
close()]);Shell.UI.Notifications.add(n);return}this.active()||(DataLab.Log.featureUsage(
{featureID:77,groupID:72,experimentID:this.experimentId(),data:this.role}),Shell.
UI.Navigation.navigate({extension:DataLabViews.experimentExtensionName,type:DataLabViews.
ExperimentType.name,name:this.experimentId()}))},n}(),i;n.ProjectExperimentViewModel=
t;i=function(){function n(n,t){var i=this;if(this.experimentVMs=ko.observableArray(
),this.modified=ko.observable(!1),this.loaded=ko.observable(!1),!n)throw new Error(
"ProjectViewModel:constructor workspace can't be null");this.workspace=n;this.experiment=
ko.computed(t);this.experimentId=ko.computed(function(){return i.experiment().experimentId(
)||i.experiment().parentExperimentId});this.hasScoringGraph=ko.computed(function(
){return!!i.findExperiment(function(n){return n.role===DataLab.DataContract.ExperimentRole.
Scoring})});this.init()}return n.prototype.init=function(){var n=this;(this.reset(
),this.experimentId())&&this.workspace.listProjects(this.experimentId()).done(function(
i){i&&i.length&&i[0].Experiments&&i[0].Experiments.length&&(n.experimentVMs.removeAll(
),n.projectId=i[0].ProjectId,i[0].Experiments.forEach(function(i){var r=new t(i.
ExperimentId,i.Role,n);n.experimentVMs.push(r)}),n.loaded(!0))})},n.prototype.reset=
function(){this.loaded(!1);this.modified(!1);this.projectId=null;this.experimentVMs.
removeAll()},n.prototype.addExperiment=function(n,i){var r=new t(n,i,this);return this.
experimentVMs.push(r),this.modified(!0),r},n.prototype.save=function(){var n=this,
t;if(this.modified())return t=this.experimentVMs().map(function(n){return{ExperimentId:
n.experimentId(),Role:n.role}}),this.projectId?this.workspace.updateProject(this.
projectId,{Experiments:t}).done(function(){n.modified(!1)}):this.workspace.createProject(
{Experiments:t}).done(function(t){n.projectId=t.ProjectId;n.modified(!1)})},n.prototype.
findExperiment=function(n){for(var i,r=this.experimentVMs(),t=0;t<r.length;t++)if(
i=r[t],n(i))return i;return null},n}();n.ProjectViewModel=i}(ExperimentEditor||(ExperimentEditor=
{})),function(n){var t=function(){function t(){}return t.closeExistingDialogs=function(
){var n=$(".fx-dialog");n.get(0)&&n.is(":data(fx-fxDialog)")&&n.fxDialog("close",
document.createEvent("CustomEvent"))},t.showElementHighlight=function(i,r){var u=
function(){return r},f=new n.Bubble.JQuerySelectorPositionLocator(u);i.elementHightlightRect(
f.getRect());i.showElementHighlight(!0);i.showOverlay(!1);t.getFakeCursorElement(
).hide()},t.removeElementHighlight=function(n){n.showElementHighlight(!1);n.showOverlay(
!0);t.resetFakeCursorPosition()},t.showThenRemoveElementHighlight=function(n,i,r)
{var u=this,f=$.Deferred();return t.waitForElementToBeVisible(i).then(function()
{u.showElementHighlight(n,i);u.wait(r).then(function(){u.removeElementHighlight(
n);f.resolve()})}),f.promise()},t.getFakeCursorElement=function(){return $(".tourCursor")}
,t.setFakeCursorMouseDown=function(){this.getFakeCursorElement().toggleClass("down",
!0)},t.setFakeCursorMouseUp=function(){this.getFakeCursorElement().toggleClass("down",
!1)},t.resetFakeCursorPosition=function(){var n=t.getFakeCursorElement();return n.
css({top:"50%",left:"100%"}),n.show(),$.Deferred().resolve()},t.wait=function(n)
{var t=$.Deferred();return setTimeout(function(){t.resolve()},n),t},t.fillOutColumnPickerAutocomplete=
function(n,i){var r=$.Deferred();return t.enterTextInInput(n,i,500).then(function(
){n.data("ui-autocomplete")._trigger("select","autocompleteselect",{item:{value:
n.val()}});n.autocomplete("close");n.autocomplete("close");r.resolve()}),r},t.scrollHorizontalScrollbar=
function(n,t){var i;t===void 0&&(t=3);i=$.Deferred();this.getFakeCursorElement().
hide();var r=n.scrollLeft(),u=r,f=window.setInterval(function(){r+=t;n.scrollLeft(
r);n.scrollLeft()===u&&(window.clearInterval(f),i.resolve());u=n.scrollLeft()},10);
return this.resetFakeCursorPosition(),i},t.scrollVerticalScrollbar=function(n,t)
{var i;t===void 0&&(t=3);i=$.Deferred();this.getFakeCursorElement().hide();var r=
n.scrollTop(),u=r,f=window.setInterval(function(){r+=t;n.scrollTop(r);n.scrollTop(
)===u&&(window.clearInterval(f),i.resolve());u=n.scrollTop()},10);return this.resetFakeCursorPosition(
),i},t.waitForElementToBeVisible=function(n,t){t===void 0&&(t=1e4);var i=$.Deferred(
);return this.waitFor(function(){return n=$(n.selector),n.is(":visible")},function(
n){i.resolve(n)},t),i},t.waitForElementToBeNotVisible=function(n,t){var i=$.Deferred(
);return this.waitFor(function(){return n=$(n.selector),n.is(":visible")===!1},function(
n){i.resolve(n)},t),i},t.waitForExperimentToFinishRunning=function(){var n=$.Deferred(
);return this.waitFor(function(){var n=cdm.currentActiveItem.xeViewModel.experimentEditorViewModel.
_experiment.statusCode();return n===DataLab.DataContract.State.Canceled||n===DataLab.
DataContract.State.Failed||n===DataLab.DataContract.State.Finished},function(t){
n.resolve(t)},12e4),n},t.moveMouseToElement=function(n,i,r,u,f){var s=this;u===void
0&&(u=.5);f===void 0&&(f=.5);var e=$.Deferred(),h=t.getFakeCursorElement(),o=n.offset(
),c=o.left+n.width()*u-this.cursorXOffset,l=o.top+n.height()*f-this.cursorYOffset;
return h.animate({top:l,left:c},i,"linear",function(){s.wait(r).then(function(){
e.resolve()})}),e},t.enterTextInInput=function(n,t,i){var r=$.Deferred(),u=function(
i,r){i<t.length?(n.val(n.val()+t[i]).trigger("keyup"),setTimeout(function(){u(++i,
r)},75)):r()};return n.val("").trigger("keyup"),u(0,function(){setTimeout(function(
){r.resolve()},i)}),r},t.getPaletteItem=function(n){return $(".xe-paletteItem").
filter(function(){return $.trim($(this).text())===n}).last()},t.dragPaletteItemToCanvas=
function(n,i,r,u,f,e){var s=this,h,c,l,o;return e===void 0&&(e=!0),h=cdm.currentActiveItem.
xeViewModel.experimentEditorViewModel,o=new DataLab.Util.PromiseQueue,e&&(o.enqueue(
function(){return s.moveMouseToElement($(".xe-searchBox"),r,500)}),o.enqueue(function(
){return s.enterTextInInput($("#ExperimentEditor .xe-searchBox input"),n,0)})),o.
enqueue(function(){return s.waitForElementToBeVisible($(".xe-paletteItem:contains('"+
i+"'):last"),5e3)}),o.enqueue(function(){return l=s.getPaletteItem(i),s.wait(300)}
),o.enqueue(function(){return c=ko.dataFor(l.get(0)),h.paletteDragStart(c),s.moveMouseToElement(
l,500,250)}),o.enqueue(function(){var o=$.Deferred(),n=t.getFakeCursorElement(),
i=$(".experimentCanvas"),s,e;return t.setFakeCursorMouseDown(),s={left:i.offset(
).left+i.width()*u,top:i.offset().top+i.height()*f},e=!1,n.animate(s,{duration:r,
step:function(){if(n.offset().left>=i.offset().left){if(e===!1){var t=cdm.currentActiveItem.
xeControlContainer.xeControl.clientToDomainCoordinates(n.offset().left,n.offset(
).top);h.paletteDragEnter(t);e=!0}h.paletteDragMove(cdm.currentActiveItem.xeControlContainer.
xeControl.clientToDomainCoordinates(n.offset().left,n.offset().top))}},easing:"linear",
complete:function(){c=h.paletteDragItem;h.paletteDragEnd();var n=$(".customElements [id='node-"+
c.graphNode.id+"']");t.setFakeCursorMouseUp();o.resolve({viewModel:c,element:n})}
}),o})},t.connectGraphNodes=function(n,i,r,u,f,e){var o=cdm.currentActiveItem.xeViewModel.
experimentEditorViewModel,s=t.getFakeCursorElement(),h=$(".customElements [id='node-"+
i.graphNode.id+"']").siblings("[data-portname='"+Object.keys(i.outputPorts)[r]+"']"),
c=ko.dataFor(h.get(0)),l=$(".customElements [id='node-"+u.graphNode.id+"']").siblings(
"[data-portname='"+Object.keys(u.inputPorts)[f]+"']"),a=ko.dataFor(l.get(0)),v=$.
Deferred();return this.moveMouseToElement(h,n,0).then(function(){o.startConnection(
c);t.setFakeCursorMouseDown();s.animate(l.offset(),{duration:n,step:function(){var
n=s.offset();o.moveConnection(cdm.currentActiveItem.xeControlContainer.xeControl.
clientToDomainCoordinates(n.left,n.top))},easing:"linear",complete:function(){o.
endConnection(a,cdm.currentActiveItem.xeControlContainer.xeControl.clientToDomainCoordinates(
500,500));t.setFakeCursorMouseUp();setTimeout(function(){v.resolve({outputPort:c,
inputPort:a})},e)}})}),v},t.moveMouseToElementAndClick=function(n,i,r,u,f,e){f===
void 0&&(f=.5);e===void 0&&(e=.5);var o=$.Deferred();return this.moveMouseToElement(
n,i,r,f,e).then(function(){t.setFakeCursorMouseDown();setTimeout(function(){n.click(
);t.setFakeCursorMouseUp();setTimeout(function(){o.resolve()},u)},250)}),o},t.drawerAnimationDone=
function(){var n=$.Deferred(),t=$(".fxs-drawer-inner").height(),i=window.setInterval(
function(){var r=$(".fxs-drawer-inner").height();r===t?(window.clearInterval(i),
n.resolve()):t=r},100);return DataLab.Util.when(n.promise())},t.waitFor=function(
n,t,i){var r=200,u=Math.ceil(i/r),f=window.setInterval(function(){var i=n();(i||
u--<0)&&(window.clearInterval(f),t(i))},r)},t.blankExperimentCardVisible=function(
){var t=$.Deferred();return Shell.UI.Drawer.open(),n.GuidedTourUtil.waitFor(function(
){var i=$(".fxs-drawer-open").length>0;return i&&n.GuidedTourUtil.drawerAnimationDone(
).done(function(){n.GuidedTourUtil.waitFor(function(){return $(n.GuidedTourUtil.
getBlankExperimentSelector()).length>0},function(){t.resolve()},2e4)}),i},function(
n){n||t.resolve()},5e3),DataLab.Util.when(t.promise())},t.closeDrawer=function()
{var t=$.Deferred();return Shell.UI.Drawer.close(),window.setTimeout(function(){
n.GuidedTourUtil.drawerAnimationDone().done(function(){t.resolve()})},100),DataLab.
Util.when(t.promise())},t.openDrawer=function(){var t=$.Deferred();return Shell.
UI.Drawer.open(),window.setTimeout(function(){n.GuidedTourUtil.drawerAnimationDone(
).done(function(){t.resolve()})},100),DataLab.Util.when(t.promise())},t.getBlankExperimentSelector=
function(){return DataLab.Features.galleryInPlusNewInterimEnabled()?".blankExperimentCard:visible":
".experiment-tile:first"},t.cursorXOffset=13,t.cursorYOffset=13,t}();n.GuidedTourUtil=
t}(ExperimentEditor||(ExperimentEditor={})),function(n){var t=function(){function t(
){}return t.launch=function(i){i===void 0&&(i=!0);n.GuidedTourUtil.closeExistingDialogs(
);n.Bubble.showAsync(t.getOption(i))},t.setStepDefaults=function(t){t.forEach(function(
t){t.loadHandlerAsync=function(){return $(".bubble-transparent-overlay.blockingDiv.animatedTour").
toggleClass("darkerOverlay",!0),$.Deferred().resolve()};t.beforeLoadHandlerAsync=
n.GuidedTourUtil.resetFakeCursorPosition})},t.getOption=function(t){var i=new n.
Bubble.Options("AnimatedExperiment"),w,b,r,k,u,e,s,et,h,d,o,g,nt,tt,c,f,it,y,p,rt,
ut,ft,l,a,v;return i.dismissOnScroll=!1,i.dismissOnResize=!1,i.dismissOnClick=!1,
i.alwaysShow=!0,i.canSkipSteps=!1,i.attachBubbleToElement=!1,w=!1,i.userSettings&&
(w=i.userSettings.shouldShowBubble(i.id)),b=w?"<br><br><input class='dontShowAgainCheckbox' type = 'checkbox'> "+
DataLab.LocalizedResources.animatedExperimentDontShowAgain:"",t?(r=i.addStepAtCenter(
DataLab.LocalizedResources.animatedExperimentStep0Title,DataLab.LocalizedResources.
animatedExperimentStep0Content+b,n.Bubble.Options.threeLineDimensions.width,n.Bubble.
Options.threeLineDimensions.height),r.shouldShowLeftButton=!1,r.shouldShowRightButton=
!0,r.shouldShowMidLeftButton=!1,r.shouldShowMidRightButton=!1,r.rightButtonText=
"Get Started"):(r=i.addStepAtCenter(DataLab.LocalizedResources.animatedExperimentAlternateStep0Title,
DataLab.LocalizedResources.animatedExperimentAlternateStep0Content+b,n.Bubble.Options.
fourLineDimensions.width,n.Bubble.Options.fourLineDimensions.height),r.shouldShowLeftButton=
!1,r.shouldShowRightButton=!1,r.shouldShowMidLeftButton=!0,r.shouldShowMidRightButton=
!0,r.midLeftButtonText="Take Tour",r.midRightButtonAsync=function(n){return $(".dontShowAgainCheckbox").
is(":checked")&&n.setDontShowAgain(),DataLab.Log.featureUsage({featureID:161,groupID:
154}),n.close(),$.Deferred().resolve()},r.midRightButtonText="Not now",r.midLeftButtonAsync=
function(n){return n.nextAsync()}),r.isProgressStep=!1,r.nextHandlerAsync=function(
t){var i,r,u;return $(".bubble-transparent-overlay.blockingDiv.animatedTour").toggleClass(
"darkerOverlay",!1),$(".dontShowAgainCheckbox").is(":checked")&&t.setDontShowAgain(
),i=new DataLab.Util.PromiseQueue,i.enqueue(function(){return n.GuidedTourUtil.closeDrawer(
)}),i.enqueue(function(){return n.GuidedTourUtil.moveMouseToElementAndClick($(".fxs-drawertaskbar-newbutton"),
1e3,500,0)}),i.enqueue(function(){return n.GuidedTourUtil.drawerAnimationDone()}
),i.enqueue(function(){return n.GuidedTourUtil.waitForElementToBeVisible($(".icon.NewExperimentMenuItem"),
1e5)}),i.enqueue(function(){return n.GuidedTourUtil.moveMouseToElementAndClick($(
".icon.NewExperimentMenuItem"),1e3,250,250,.5,.3)}),i.enqueue(function(){return n.
GuidedTourUtil.waitForElementToBeVisible($(".blank-icon"),1e5)}),i.enqueue(function(
){return r=cdm.currentActiveItem.xeViewModel&&cdm.currentActiveItem.xeViewModel.
experiment&&cdm.currentActiveItem.xeViewModel.experiment.dirtyStatus.isDirty(),n.
GuidedTourUtil.moveMouseToElementAndClick($(".blank-icon"),1e3,500,0)}),u=i.enqueue(
function(){return r&&cdm.currentActiveItem.xeViewModel.experiment.dirtyStatus.isDirty(
)?(t.dismiss(),n.GuidedTourUtil.resetFakeCursorPosition(),$.Deferred().resolve(!1)):
n.GuidedTourUtil.drawerAnimationDone()}),u.then(function(r){return r===!1?(t.dismiss(
),$.Deferred().resolve()):(i.enqueue(function(){return n.GuidedTourUtil.waitForElementToBeVisible(
$(".xe-utilityPanel"),1e4)}),i.enqueue(function(){return n.GuidedTourUtil.moveMouseToElement(
$(".experiment-description"),1e3,500)}),i.enqueue(function(){return n.GuidedTourUtil.
enterTextInInput($(".experiment-description"),"Income Prediction",0)}))})},e=i.addStepByJquerySelector(
"#controlPanelContainer",DataLab.LocalizedResources.animatedExperimentStep1Title,
DataLab.LocalizedResources.animatedExperimentStep1Content,n.Bubble.Options.twoLineDimensions.
width,n.Bubble.Options.twoLineDimensions.height),e.shouldShowLeftButton=!1,e.rightButtonText=
DataLab.LocalizedResources.bubbleNextButtonTextNew,e.nextHandlerAsync=function(t)
{$(".bubble-transparent-overlay.blockingDiv.animatedTour").toggleClass("darkerOverlay",
!1);var i=new DataLab.Util.PromiseQueue,r,f=i.enqueue(function(){return n.GuidedTourUtil.
dragPaletteItemToCanvas("Income","Adult Census Income Binary Classification dataset",
1e3,.6,.2)});return i.enqueue(function(){return f.then(function(t){return k=t.viewModel,
r=t.element,n.GuidedTourUtil.wait(500)})}),i.enqueue(function(){return u=r.siblings(
"g").find(".portNoHighlight"),n.GuidedTourUtil.moveMouseToElement(u,100,0)}),i.enqueue(
function(){return n.GuidedTourUtil.moveMouseToElementAndClick(u,0,100,250)}),i.enqueue(
function(){var t=jQuery.Event("mouseup");return t.pageX=u.offset().left,t.pageY=
u.offset().top,t.clientY=t.pageY,t.clientX=t.pageX,u.trigger(t),n.GuidedTourUtil.
moveMouseToElement($(".datalab-contextMenuItem.enabled:contains('Visualize')"),200,
0)}),i.enqueue(function(){return $(".datalab-contextMenuItem.enabled:contains('Visualize')").
toggleClass("hoverEffect",!0),n.GuidedTourUtil.wait(200)}),i.enqueue(function(){
return n.GuidedTourUtil.setFakeCursorMouseDown(),n.GuidedTourUtil.wait(200)}),i.
enqueue(function(){return $(".datalab-contextMenuItem.enabled:contains('Visualize')").
trigger("mouseup"),n.GuidedTourUtil.setFakeCursorMouseUp(),n.GuidedTourUtil.waitForElementToBeVisible(
$(".numberRowsColumnsHeader:contains('rows')"),1e4)}),i.enqueue(function(){return n.
GuidedTourUtil.showThenRemoveElementHighlight(t,$(".numberRowsColumnsHeader:contains('rows')"),
2e3)}),i.enqueue(function(){return n.GuidedTourUtil.scrollHorizontalScrollbar($(
".dataTableContainer"))}),i.enqueue(function(){return n.GuidedTourUtil.showThenRemoveElementHighlight(
t,$(".tableHeader:contains('income')"),2e3)})},e.undoStepAsync=function(){var t=
new n.DeleteNodesCommand([k.graphNode],cdm.currentActiveItem.xeViewModel.experimentEditorViewModel);
return t.run(),$(".icon.close").trigger("mousedown"),$("#ExperimentEditor .xe-searchBox input").
val("").trigger("keyup"),$.Deferred().resolve()},h=i.addStepByJquerySelector("#controlPanelContainer",
DataLab.LocalizedResources.animatedExperimentStep2Title,DataLab.LocalizedResources.
animatedExperimentStep2Content,n.Bubble.Options.oneLineDimensions.width,n.Bubble.
Options.oneLineDimensions.height),h.rightButtonText=DataLab.LocalizedResources.bubbleNextButtonTextNew,
h.nextHandlerAsync=function(){var t,i,r;return $(".bubble-transparent-overlay.blockingDiv.animatedTour").
toggleClass("darkerOverlay",!1),t=new DataLab.Util.PromiseQueue,t.enqueue(function(
){return n.GuidedTourUtil.moveMouseToElementAndClick($(".icon.close"),500,250,500)}
),t.enqueue(function(){return $(".icon.close").trigger("mousedown"),n.GuidedTourUtil.
waitForElementToBeNotVisible($(".icon.close"),5e3)}),i=t.enqueue(function(){return n.
GuidedTourUtil.dragPaletteItemToCanvas("Split","Split",1e3,.6,.35)}),r=t.enqueue(
function(){return i.then(function(t){return s=t.viewModel,n.GuidedTourUtil.connectGraphNodes(
500,k,0,s,0,500)})}),t.enqueue(function(){return r.then(function(t){return et=t.
outputPort.connections()[0],n.GuidedTourUtil.moveMouseToElement($(".propertyEditor-textAreaItem:contains('Fraction')").
find(".ui-autocomplete-input"),500,500)})}),t.enqueue(function(){return n.GuidedTourUtil.
enterTextInInput($(".propertyEditor-textAreaItem:contains('Fraction')").find(".ui-autocomplete-input"),
"0.7",250)}),t.enqueue(function(){return n.GuidedTourUtil.moveMouseToElement($(".propertyEditor-textAreaItem:contains('Random')").
find(".ui-autocomplete-input"),250,500)}),t.enqueue(function(){return n.GuidedTourUtil.
enterTextInInput($(".propertyEditor-textAreaItem:contains('Random')").find(".ui-autocomplete-input"),
"12345",250)})},h.undoStepAsync=function(){var i=$.Deferred(),r,t;return et.remove(
),r=new n.DeleteNodesCommand([s.graphNode],cdm.currentActiveItem.xeViewModel.experimentEditorViewModel),
r.run(),$("#ExperimentEditor .xe-searchBox input").val("").trigger("keyup"),t=jQuery.
Event("mouseup"),t.pageX=u.offset().left,t.pageY=u.offset().top,t.clientY=t.pageY,
t.clientX=t.pageX,u.trigger(t),$(".datalab-contextMenuItem.enabled:contains('Visualize')").
trigger("mouseup"),n.GuidedTourUtil.waitForElementToBeVisible($(".dataTableContainer"),
5e3).then(function(){n.GuidedTourUtil.scrollHorizontalScrollbar($(".dataTableContainer"),
1e6).then(function(){i.resolve()})}),i},c=i.addStepByJquerySelector("#controlPanelContainer",
DataLab.LocalizedResources.animatedExperimentStep3Title,DataLab.LocalizedResources.
animatedExperimentStep3Content,n.Bubble.Options.twoLineDimensions.width,n.Bubble.
Options.twoLineDimensions.height),c.rightButtonText=DataLab.LocalizedResources.bubbleNextButtonTextNew,
c.nextHandlerAsync=function(){var i,r,t;$(".bubble-transparent-overlay.blockingDiv.animatedTour").
toggleClass("darkerOverlay",!1);i=n.GuidedTourUtil.getFakeCursorElement();t=new DataLab.
Util.PromiseQueue;$(".xe-utilityPanelRoot.transitionWidth").animate({width:$(".xe-utilityPanelRoot.transitionWidth").
width()+.1+"px"});t.enqueue(function(){return n.GuidedTourUtil.moveMouseToElement(
$(".xe-searchBox"),1e3,500)});t.enqueue(function(){return n.GuidedTourUtil.enterTextInInput(
$("#ExperimentEditor .xe-searchBox input"),"Two Class",0)});t.enqueue(function()
{return n.GuidedTourUtil.waitForElementToBeVisible($(".xe-paletteItem:contains('Two-Class Boosted Decision Tree'):last"),
5e3)});t.enqueue(function(){return n.GuidedTourUtil.wait(500)});t.enqueue(function(
){return n.GuidedTourUtil.moveMouseToElement($(".xe-utilityPanelRoot .resize"),1e3,
0,0,.5)});t.enqueue(function(){return i.toggleClass("resize",!0),n.GuidedTourUtil.
wait(250)});t.enqueue(function(){var t,r,u;return n.GuidedTourUtil.setFakeCursorMouseDown(
),t=$.Deferred(),r=n.GuidedTourUtil.getPaletteItem("Two-Class Boosted Decision Tree").
children(".xe-paletteItemText")[0],tt=$(".xe-utilityPanelRoot.transitionWidth").
width(),u=r.scrollWidth-r.offsetWidth,$(".xe-utilityPanelRoot.transitionWidth").
animate({width:tt+u+"px"},{easing:"linear",duration:500,complete:function(){t.resolve(
)},step:function(){i.offset({top:i.offset().top,left:$(".xe-utilityPanelRoot .resize").
offset().left-n.GuidedTourUtil.cursorXOffset})}}),t});var u=t.enqueue(function()
{return i.toggleClass("resize",!1),n.GuidedTourUtil.setFakeCursorMouseUp(),n.GuidedTourUtil.
dragPaletteItemToCanvas("","Two-Class Boosted Decision Tree",1e3,.2,.35,!1)}),f=
t.enqueue(function(){return u.then(function(t){return d=t.viewModel,n.GuidedTourUtil.
dragPaletteItemToCanvas("Train Model","Train Model",1e3,.4,.5)})}),e=t.enqueue(function(
){return f.then(function(t){return o=t.viewModel,r=t.element,n.GuidedTourUtil.connectGraphNodes(
500,d,0,o,0,250)})}),h=t.enqueue(function(){return e.then(function(t){return g=t.
outputPort.connections()[0],n.GuidedTourUtil.connectGraphNodes(500,s,0,o,1,250)}
)});return t.enqueue(function(){return h.then(function(t){return nt=t.outputPort.
connections()[0],n.GuidedTourUtil.moveMouseToElementAndClick(r.siblings("svg"),250,
250,500)})}),t.enqueue(function(){return n.GuidedTourUtil.moveMouseToElementAndClick(
$(".propertyEditor-right .propertyEditor-textAreaItem input[type='button']"),1e3,
500,1e3)}),t.enqueue(function(){return n.GuidedTourUtil.moveMouseToElementAndClick(
$(".columnPicker .ruleTable .itemTextBoxInput"),1e3,500,1e3)}),t.enqueue(function(
){return n.GuidedTourUtil.fillOutColumnPickerAutocomplete($(".columnPicker .ruleTable .itemTextBoxInput"),
"income")}),t.enqueue(function(){return n.GuidedTourUtil.moveMouseToElementAndClick(
$(".columnPicker .icon.tick"),1e3,500,500)}),t.enqueue(function(){return n.GuidedTourUtil.
waitForElementToBeNotVisible($(".columnPicker .icon.tick"),5e3)})},c.undoStepAsync=
function(){g.selected(!0);g.remove();nt.selected(!0);nt.remove();var t=new n.DeleteNodesCommand(
[o.graphNode,d.graphNode],cdm.currentActiveItem.xeViewModel.experimentEditorViewModel);
return t.run(),$(".xe-utilityPanelRoot.transitionWidth").width(tt),$("#ExperimentEditor .xe-searchBox input").
val("").trigger("keyup"),o.moduleNode.parameters["Label column"].value(""),$.Deferred(
).resolve()},l=i.addStepByJquerySelector("#controlPanelContainer",DataLab.LocalizedResources.
animatedExperimentStep4Title,DataLab.LocalizedResources.animatedExperimentStep4Content,
n.Bubble.Options.oneLineDimensions.width,n.Bubble.Options.oneLineDimensions.height),
l.rightButtonText=DataLab.LocalizedResources.bubbleNextButtonTextNew,l.nextHandlerAsync=
function(){$(".bubble-transparent-overlay.blockingDiv.animatedTour").toggleClass(
"darkerOverlay",!1);var t=new DataLab.Util.PromiseQueue,i=t.enqueue(function(){return n.
GuidedTourUtil.dragPaletteItemToCanvas("Score Model","Score Model",1e3,.6,.65)}),
r=t.enqueue(function(){return i.then(function(t){return f=t.viewModel,y=t.element,
n.GuidedTourUtil.dragPaletteItemToCanvas("Evaluate","Evaluate Model",1e3,.6,.8)}
)}),u=t.enqueue(function(){return r.then(function(t){return it=t.viewModel,p=t.element,
n.GuidedTourUtil.connectGraphNodes(500,s,1,f,1,250)})}),e=t.enqueue(function(){return u.
then(function(t){return rt=t.outputPort.connections()[0],n.GuidedTourUtil.connectGraphNodes(
500,o,0,f,0,250)})}),h=t.enqueue(function(){return e.then(function(t){return ut=
t.outputPort.connections()[0],n.GuidedTourUtil.connectGraphNodes(500,f,0,it,0,250)}
)});return t.enqueue(function(){return h.then(function(n){ft=n.outputPort.connections(
)[0]})})},l.undoStepAsync=function(){rt.selected(!0);rt.remove();ut.selected(!0);
ut.remove();ft.selected(!0);ft.remove();f.selected(!0);f.remove();var t=new n.DeleteNodesCommand(
[f.graphNode,it.graphNode],cdm.currentActiveItem.xeViewModel.experimentEditorViewModel);
return t.run(),$("#ExperimentEditor .xe-searchBox input").val("").trigger("keyup"),
$.Deferred().resolve()},a=i.addStepByJquerySelector("#controlPanelContainer",DataLab.
LocalizedResources.animatedExperimentStep5Title,DataLab.LocalizedResources.animatedExperimentStep5Content,
n.Bubble.Options.twoLineDimensions.width,n.Bubble.Options.twoLineDimensions.height),
a.rightButtonText=DataLab.LocalizedResources.bubbleNextButtonTextNew,a.nextHandlerAsync=
function(t){$(".bubble-transparent-overlay.blockingDiv.animatedTour").toggleClass(
"darkerOverlay",!1);var i=new DataLab.Util.PromiseQueue,r;return i.enqueue(function(
){return n.GuidedTourUtil.moveMouseToElementAndClick($(".fxs-command-action-play"),
1e3,500,0)}),i.enqueue(function(){return n.GuidedTourUtil.getFakeCursorElement().
hide(),n.GuidedTourUtil.waitForExperimentToFinishRunning()}),i.enqueue(function(
){return n.GuidedTourUtil.wait(500)}),i.enqueue(function(){return n.GuidedTourUtil.
resetFakeCursorPosition(),y=$(y.selector),r=y.siblings("g[data-portname='Scored dataset']").
find(".portNoHighlight"),n.GuidedTourUtil.moveMouseToElement(r,500,0)}),i.enqueue(
function(){return n.GuidedTourUtil.moveMouseToElementAndClick(r,0,100,250)}),i.enqueue(
function(){var t=jQuery.Event("mouseup");return t.pageX=r.offset().left,t.pageY=
r.offset().top,t.clientY=t.pageY,t.clientX=t.pageX,r.trigger(t),n.GuidedTourUtil.
moveMouseToElement($(".datalab-contextMenuItem.enabled:contains('Visualize')"),200,
0)}),i.enqueue(function(){return $(".datalab-contextMenuItem.enabled:contains('Visualize')").
toggleClass("hoverEffect",!0),n.GuidedTourUtil.wait(200)}),i.enqueue(function(){
return n.GuidedTourUtil.setFakeCursorMouseDown(),n.GuidedTourUtil.wait(200)}),i.
enqueue(function(){return $(".datalab-contextMenuItem.enabled:contains('Visualize')").
trigger("mouseup"),n.GuidedTourUtil.setFakeCursorMouseUp(),n.GuidedTourUtil.waitForElementToBeVisible(
$(".smallHeader:contains('rows')"),1e4)}),i.enqueue(function(){return n.GuidedTourUtil.
scrollHorizontalScrollbar($(".dataTableContainer"))}),i.enqueue(function(){return n.
GuidedTourUtil.showThenRemoveElementHighlight(t,$(".tableHeader:contains('Scored Labels')"),
2e3)}),i.enqueue(function(){return n.GuidedTourUtil.showThenRemoveElementHighlight(
t,$(".tableHeader:contains('Scored Probabilities')"),2e3)}),i.enqueue(function()
{return n.GuidedTourUtil.moveMouseToElementAndClick($(".icon.close"),500,0,750)}
),i.enqueue(function(){return $(".icon.close").trigger("mousedown"),n.GuidedTourUtil.
waitForElementToBeNotVisible($(".icon.close"),5e3)}),i.enqueue(function(){return n.
GuidedTourUtil.wait(500)}),i.enqueue(function(){return p=$(p.selector),r=p.siblings(
"g[data-portname='Evaluation results']").find(".portNoHighlight"),n.GuidedTourUtil.
moveMouseToElement(r,500,0)}),i.enqueue(function(){return n.GuidedTourUtil.moveMouseToElementAndClick(
r,0,200,250)}),i.enqueue(function(){var t=jQuery.Event("mouseup");return t.pageX=
r.offset().left,t.pageY=r.offset().top,t.clientY=t.pageY,t.clientX=t.pageX,r.trigger(
t),n.GuidedTourUtil.moveMouseToElement($(".datalab-contextMenuItem.enabled:contains('Visualize')"),
200,0)}),i.enqueue(function(){return $(".datalab-contextMenuItem.enabled:contains('Visualize')").
toggleClass("hoverEffect",!0),n.GuidedTourUtil.wait(200)}),i.enqueue(function(){
return n.GuidedTourUtil.setFakeCursorMouseDown(),n.GuidedTourUtil.wait(200)}),i.
enqueue(function(){return $(".datalab-contextMenuItem.enabled:contains('Visualize')").
trigger("mouseup"),n.GuidedTourUtil.setFakeCursorMouseUp(),n.GuidedTourUtil.waitForElementToBeVisible(
$(".graphContainer"),1e4)}),i.enqueue(function(){return n.GuidedTourUtil.showThenRemoveElementHighlight(
t,$(".graphContainer"),2e3)}),i.enqueue(function(){return n.GuidedTourUtil.scrollVerticalScrollbar(
$(".visualizationContentWrapper"))}),i.enqueue(function(){return n.GuidedTourUtil.
showThenRemoveElementHighlight(t,$(".confusionMatrixTable:contains('True Positive')"),
2e3)}),i.enqueue(function(){return n.GuidedTourUtil.showThenRemoveElementHighlight(
t,$(".confusionMatrixTable:contains('Accuracy')"),2e3)}),i.enqueue(function(){return n.
GuidedTourUtil.showThenRemoveElementHighlight(t,$(".numeric-box:contains('AUC')"),
2e3)}),i.enqueue(function(){return n.GuidedTourUtil.getFakeCursorElement().hide(
),$.Deferred().resolve()})},a.undoStepAsync=function(){return $.Deferred().resolve(
)},v=i.addStepByJquerySelector("#controlPanelContainer",DataLab.LocalizedResources.
animatedExperimentStep6Title,DataLab.LocalizedResources.animatedExperimentStep6Content,
n.Bubble.Options.threeLineDimensions.width,n.Bubble.Options.threeLineDimensions.
height),v.shouldShowLeftButton=!1,v.isProgressStep=!1,v.finishButtonText=DataLab.
LocalizedResources.bubbleFinishedButtonTextNew,this.setStepDefaults([r,e,h,c,l,a,
v]),i},t}();n.AnimatedExperiment=t}(ExperimentEditor||(ExperimentEditor={})),function(
n){var t=function(){function t(){}return t.getOption=function(){var c=this,l=DataLab.
LocalizedResources.guidedExperimentExperimentDescriptionContent,a='<img class="guidedExperimentDatasetGif" src="/Libraries/Images/GuidedExperiment/DragAnimation.gif"/><span>'+
DataLab.LocalizedResources.guidedExperimentDatasetContent+"<\/span>",v=DataLab.LocalizedResources.
guidedExperimentTransformationsContent,y=DataLab.LocalizedResources.guidedExperimentSplitContent,
p=DataLab.LocalizedResources.guidedExperimentMachineLearningModulesContent,w=DataLab.
LocalizedResources.guidedExperimentRunContent,b='<img class="guidedExperimentDatasetGif" src="/Libraries/Images/GuidedExperiment/Visualize.gif"/><div class="guidedExperimentContentText">'+
DataLab.LocalizedResources.guidedExperimentVisualizeContent+"<\/div>",h;if(cdm.currentActiveItem
instanceof DataLabViews.ExperimentView){cdm.getActiveItem().xeControlContainer.xeControl.
initOnly.zoomHelper.fitExperimentWithoutAnimation&&cdm.getActiveItem().xeControlContainer.
xeControl.initOnly.zoomHelper.fitExperimentWithoutAnimation();var k=cdm.currentActiveItem.
xeViewModel.experiment,d="506153734175476c4f62416c57734963.d2c5ca2f732341a39b7eda917c99f0c4",
i="",g="506153734175476c4f62416c57734963.1ec722fab6234e26a44ea50c6d726223",r="",
nt="506153734175476c4f62416c57734963.70530644c97a4ab685f788bf30a8be5f",u="",tt="506153734175476c4f62416c57734963.e3c522f853d948298ea45c6a6b75330c",
f="",it="506153734175476c4f62416c57734963.5cc7053eaa30450d96c0dae4be720977",e="",
rt="506153734175476c4f62416c57734963.401b4f92e7244d5abe81d5b0ff9bdb33",o="",ut="506153734175476c4f62416c57734963.72eb09476cd64015b9d1d2129b4a0ecc",
s="";return k.nodes.forEach(function(t){var h,c;if(t instanceof DataLab.Model.ModuleNode)
{h=t;switch(h.module_.familyId){case d:i=n.GuidedExperiment.getNodeSelector(h.id);
break;case g:r=n.GuidedExperiment.getNodeSelector(h.id);break;case nt:u=n.GuidedExperiment.
getNodeSelector(h.id);break;case tt:f=n.GuidedExperiment.getNodeSelector(h.id);break
case it:e=n.GuidedExperiment.getNodeSelector(h.id);break;case rt:o=n.GuidedExperiment.
getNodeSelector(h.id)}}else if(t instanceof DataLab.Model.DatasetNode){c=t;switch(
c.dataset.familyId){case ut:s=n.GuidedExperiment.getNodeSelector(c.id)}}}),t.options=
new n.Bubble.Options("GuidedExperiment"),t.options.dismissOnScroll=!1,t.options.
dismissOnResize=!1,t.options.dismissOnClick=!1,t.options.alwaysShow=!0,h=[t.options.
addStepByJquerySelector(".experiment-description",DataLab.LocalizedResources.guidedExperimentExperimentDescriptionTitle,
l,400,150),t.options.addStepByJquerySelector(s,DataLab.LocalizedResources.guidedExperimentThisIsADatasetTitle,
a,400,380),t.options.addStepByJquerySelector([i,r],DataLab.LocalizedResources.guidedExperimentTransformationsTitle,
v,400,170),t.options.addStepByJquerySelector(u,DataLab.LocalizedResources.guidedExperimentSplitTitle,
y,400,170),t.options.addStepByJquerySelector([f,e],DataLab.LocalizedResources.guidedExperimentMachineLearningModulesTitle,
p,410,200),t.options.addStepByJquerySelector(".fxs-command-action-play",DataLab.
LocalizedResources.guidedExperimentRunTitle,w,400,150),t.options.addStepByJquerySelector(
o,DataLab.LocalizedResources.guidedExperimentVisualizeTitle,b,400,380)],h.forEach(
function(n,t){c.addLoggingLoadHandlerToStep(n,t+1)}),t.options}return null},t.logGuidedExperimentStep=
function(n){DataLab.Log.featureUsage({featureID:DataLab.Constants.FeatureId["GuidedExperimentStep"+
n],groupID:84})},t.addLoggingLoadHandlerToStep=function(n,t){var i=this;n.beforeLoadHandlerAsync=
function(){return i.logGuidedExperimentStep(t),DataLab.Util.when(null)}},t.getNodeSelector=
function(n){return'rect[id^="node-'+n+'"]'},t.launch=function(){DataLab.Features.
guidedExperimentEnabled()&&(Shell.UI.Drawer.close(),n.NewDrawerMenu.openSampleAsCopy(
n.NewDrawerMenu.NewExperimentTemplateList.guidedExperimentTemplate.experimentId,
n.NewDrawerMenu.NewExperimentTemplateList.guidedExperimentTemplate.description,function(
){$(document).one("experimentLoaded",function(){var t=window.setInterval(function(
){$(".fxshell-navpane-collapsed").get(0)&&(window.clearInterval(t),$(".fxs-drawer-open").
get(0)||n.Bubble.showAsync(n.GuidedExperiment.getOption()))},100)})}))},t}();n.GuidedExperiment=
t}(ExperimentEditor||(ExperimentEditor={})),function(n){var t=function(){function t(
){}return t.getOption=function(){var i=this,t=new n.Bubble.Options("GuidedTour"),
u,f,e,o,s,h,c,r,l;return t.dismissOnScroll=!1,t.dismissOnResize=!1,t.dismissOnClick=
!1,t.alwaysShow=!0,u=t.addStepByJquerySelector(".fxs-drawertaskbar-newbutton",DataLab.
LocalizedResources.guidedTourNewButtonTitle,DataLab.LocalizedResources.guidedTourNewButtonContent,
415,150),u.beforeLoadHandlerAsync=function(){return i.logGuidedTourStep(1),n.GuidedTourUtil.
closeDrawer()},f=t.addStepByJquerySelector(n.GuidedTourUtil.getBlankExperimentSelector(
),DataLab.LocalizedResources.guidedTourDrawerTitle,DataLab.LocalizedResources.guidedTourDrawerContent,
400,150),f.beforeLoadHandlerAsync=function(){return i.logGuidedTourStep(2),n.GuidedTourUtil.
blankExperimentCardVisible()},e=t.addStepByJquerySelector("#fxshell-navpane",DataLab.
LocalizedResources.guidedTourMainNavTitle,DataLab.LocalizedResources.guidedTourMainNavContent,
400,150),e.beforeLoadHandlerAsync=function(){i.logGuidedTourStep(3);var t=$.Deferred(
);if(Shell.UI.Drawer.close(),cdm.currentContext.viewPath==="ViewExperiment")t.resolve(
);else{DataLabViews.navigateToExperiment("Draft");$(document).one("experimentLoaded",
function(){var i=!1;n.GuidedTourUtil.waitFor(function(){return i=$(".fxshell-navpane-collapsed").
length!==0,i&&t.resolve(),i},function(){t.resolve()},1e3)})}return DataLab.Util.
when(t.promise())},o=t.addStepByJquerySelector(".xe-utilityPanelRoot",DataLab.LocalizedResources.
guidedTourModulesPaneTitle,DataLab.LocalizedResources.guidedTourModulesPaneContent,
400,150),this.addLoggingLoadHandlerToStep(o,4),s=t.addStepByJquerySelector(".experimentEditorRoot",
DataLab.LocalizedResources.guidedTourCanvasTitle,DataLab.LocalizedResources.guidedTourCanvasContent,
400,150),this.addLoggingLoadHandlerToStep(s,5),h=t.addStepByJquerySelector(".propertyEditorContainer",
DataLab.LocalizedResources.guidedTourPropertiesPaneTitle,DataLab.LocalizedResources.
guidedTourPropertiesPaneContent,400,150),this.addLoggingLoadHandlerToStep(h,6),$(
".chat-support").is(":visible")&&(c=t.addStepByJquerySelector(".chat-support",DataLab.
LocalizedResources.guidedTourChatWindowTitle,DataLab.LocalizedResources.guidedTourChatWindowContent,
400,150),this.addLoggingLoadHandlerToStep(c,7)),r=DataLab.LocalizedResources.guidedTourCommandsContent,
DataLab.Features.guidedExperimentEnabled()&&(r+=["<br/>","<span class='bubble-content-small'>",
DataLab.LocalizedResources.guidedTourNavigateToExperimentContent,"<a class='start-guided-experiment'>",
DataLab.LocalizedResources.guidedTourClickHere,"<\/a>","<\/span>"].join("")),l=t.
addStepByJquerySelector(".fxs-drawercommands-commands-global",DataLab.LocalizedResources.
guidedTourCommandsTitle,r,400,150),this.addLoggingLoadHandlerToStep(l,8),t},t.logGuidedTourStep=
function(n){DataLab.Log.featureUsage({featureID:DataLab.Constants.FeatureId["GuidedTourStep"+
n],groupID:83})},t.addLoggingLoadHandlerToStep=function(n,t){var i=this;n.beforeLoadHandlerAsync=
function(){return i.logGuidedTourStep(t),DataLab.Util.when(null)}},t.launchGuidedExperiment=
function(){n.Bubble.dismiss();DataLab.Log.featureUsage({featureID:93,groupID:83});
n.GuidedExperiment.launch()},t.launch=function(){var t,r,i;if(window.__guidedTourActive=
!0,t=$(".fx-dialog"),t.get(0)&&t.is(":data(fx-fxDialog)")&&(t.fxDialog("close",document.
createEvent("CustomEvent")),delete window.__guidedTourActive),r=cdm.currentContext.
viewPath==="ViewExperiment",window.setTimeout(function(){DataLab.Util.then(n.Bubble.
showAsync(n.GuidedTour.getOption()),function(n){if(!r)var t=n.overlayVisible.subscribe(
function(){Shell.UI.Drawer.open();t.dispose()})})}),DataLab.Features.guidedExperimentEnabled(
)){i="#bubble-container .start-guided-experiment";$("body").off("click",i,n.GuidedTour.
launchGuidedExperiment).on("click",i,n.GuidedTour.launchGuidedExperiment)}},t}();
n.GuidedTour=t}(ExperimentEditor||(ExperimentEditor={})),function(n){var t=function(
){function n(){this.isRunning=ko.observable(!1);this.addNotification=function(n)
{Shell.UI.Notifications.add(n)};this.removeNotification=function(n){Shell.UI.Notifications.
remove(n)}}return n.prototype.runAsync=function(){var t=this,i;this.isRunning(!0);
try{return this.runInternalAsync().always(function(){t.isRunning(!1)}).done(function(
){t.progressSuccess()}).fail(function(n){var i=n&&n.message?n.message:"";t.progressError(
i)})}catch(n){return i=n&&n.message?n.message:"",this.progressError(i),DataLab.Log.
error(i),this.reject(n)}},n.prototype.runInternalAsync=function(){throw new Error(
"The method is abstract.");},n.prototype.reject=function(n){return $.Deferred().
reject(n).promise()},n.prototype.startProgress=function(n){this.progress=new Shell.
UI.Notifications.Progress(n,"active",!0);this.step=null;this.progress.setActions(
[new Shell.UI.Notifications.Buttons.close]);this.addNotification(this.progress)}
,n.prototype.addStep=function(n){this.step&&this.step.setStatus("success");this.
progress&&(this.step=this.progress.addStep(n,"active"))},n.prototype.updateCurrentStep=
function(n){this.step&&this.step.setTitle(n)},n.prototype.progressSuccess=function(
){this.step&&this.step.setStatus("success");this.progress&&this.progress.setStatus(
"success")},n.prototype.progressError=function(n){this.progress&&(this.progress.
setStatus("error"),this.step?(this.step.setStatus("error"),this.step.setDetailsText(
n)):this.progress.setDetailsText(n))},n}();n.AsyncOperation=t}(ExperimentEditor||
(ExperimentEditor={}));__extends=this.__extends||function(n,t){function r(){this.
constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;
n.prototype=new r},function(n){var t=DataLab.Util,r=DataLab.Model,i=function(i){
function r(){i.apply(this,arguments);this.webServiceInputPorts=[];this.webServiceOutputPorts=
[];this.webServiceInputPortNodes=[];this.webServiceOutputPortNodes=[]}return __extends(
r,i),r.prototype.initialize=function(n,t){this.experiment=n;this.workspace=t},r.
prototype.runInternalAsync=function(){var i=this,r=new n.MoveNodesAnimationOperation;
return r.initialize(t.values(this.experiment.nodes())),t.forEach(this.webServiceInputPorts,
function(n){if(n){var t=i.experiment.addWebServicePort(0,n.parent.x(),n.parent.y(
),null,i.workspace.applicationCache.dataTypeRegistry,n);r.AddMovement({node:t,direction:
0});i.webServiceInputPortNodes.push(t)}}),t.forEach(this.webServiceOutputPorts,function(
n){if(n){var t=i.experiment.addWebServicePort(1,n.parent.x(),n.parent.y(),null,i.
workspace.applicationCache.dataTypeRegistry,n);r.AddMovement({node:t,direction:1});
i.webServiceOutputPortNodes.push(t)}}),r.runAsync()},r}(n.AsyncOperation);n.AddWebServicePortAnimationOperation=
i}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(n,
t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);
r.prototype=t.prototype;n.prototype=new r},function(n){var i=function(){function n(
){this.context={}}return n}(),t;n.AnimationContext=i;t=function(n){function t(){
n.apply(this,arguments);this.totalSteps=50;this.interval=10;this.currentStep=0;this.
animations=[]}return __extends(t,n),t.prototype.runInternalAsync=function(){var n=
this,t=$.Deferred();return this.animations.length?this.intervalId=setInterval(function(
){n.currentStep++;n.animations.forEach(function(t){return t.stepFunc(n.currentStep,
t.context)});n.currentStep>=n.totalSteps&&(clearInterval(n.intervalId),t.resolve(
))},10):t.resolve(),t.promise()},t}(n.AsyncOperation);n.AnimationOperation=t}(ExperimentEditor||
(ExperimentEditor={}));__extends=this.__extends||function(n,t){function r(){this.
constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;
n.prototype=new r},function(n){var i=function(){function n(n){this.x=0;this.y=0;
this.pos=0;this.isDummy=!1;this.inEdges=[];this.outEdges=[];this.name=n}return n.
prototype.sortEdges=function(){this.inEdges.sort(function(n,t){return n.compare(
t,!1)});this.outEdges.sort(function(n,t){return n.compare(t,!0)})},n.prototype.switch=
function(n){if(n.layer===this.layer){this.layer.vectors.splice(this.pos,1,n);n.layer.
vectors.splice(n.pos,1,this);var t=this.pos;this.pos=n.pos;n.pos=t}},n.prototype.
getEdges=function(n){return n?this.outEdges:this.inEdges},n.prototype.getSortedEdges=
function(n){return this.getEdges(n).sort(function(t,i){return t.compare(i,n)})},
n.prototype.getConnectedVertexes=function(n){return this.getEdges(n).map(function(
t){return n?t.to:t.from})},n.prototype.toString=function(){var n=[];return n.push(
"name: "+this.name),n.push("pos: "+this.pos),n.push("x, y: "+this.x+", "+this.y),
n.push("inEdges: "+this.inEdges.map(function(n){return"{"+n.from.pos+","+n.fromPortPos+
"}"}).join(", ")),n.push("outEdges: "+this.outEdges.map(function(n){return"{"+n.
to.pos+","+n.toPortPos+"}"}).join(", ")),n.join("; ")},n}(),t,r,u,f;n.Vertex=i;t=
function(){function n(){this.fromPortPos=0;this.toPortPos=0}return n.prototype.compare=
function(n,t){return this.from===n.from&&this.fromPortPos===n.fromPortPos&&this.
to===n.to&&this.toPortPos===n.toPortPos?0:t?this.from.pos>n.from.pos||this.fromPortPos>
n.fromPortPos||this.to.pos>n.to.pos||this.toPortPos>n.toPortPos?1:-1:this.to.pos>
n.to.pos||this.toPortPos>n.toPortPos||this.from.pos>n.from.pos||this.fromPortPos>
n.fromPortPos?1:-1},n.prototype.compareEnd=function(n,t){return t?this.from.pos>
n.from.pos||this.fromPortPos>n.fromPortPos?1:this.from.pos===n.from.pos&&this.fromPortPos===
n.fromPortPos?0:-1:this.to.pos>n.to.pos||this.toPortPos>n.toPortPos?1:this.to.pos===
n.to.pos&&this.toPortPos===n.toPortPos?0:-1},n}();n.Edge=t;r=function(){function n(
n){this.vectors=[];this.level=0;this.level=n}return n.prototype.init=function(){
var n=1/this.vectors.length;this.vectors.forEach(function(t,i){t.pos=i;t.rank=i*
n})},n.prototype.pushVertex=function(n){n.layer&&n.layer.removeVertex(n);this.vectors.
push(n);n.layer=this},n.prototype.removeVertex=function(n){DataLab.Util.removeElementFromArray(
this.vectors,n);n.layer=null},n.prototype.sortByRank=function(){this.vectors.sort(
function(n,t){return n.rank-t.rank});this.vectors.forEach(function(n,t){n.pos=t}
)},n.prototype.reorder=function(n){this.countCrosses(n)>0&&(this.reorderByRank(n),
this.reorderIfReduceCross(n),this.init())},n.prototype.reorderByRank=function(n)
{var t=!1;this.vectors.forEach(function(i){var r=i.getConnectedVertexes(!n);r.length>
0&&(i.rank=r.map(function(n){return n.rank}).reduce(function(n,t){return n+t})/r.
length,t=!0)});t&&this.sortByRank()},n.prototype.countCrosses=function(n){var i=
0,t=[];return this.vectors.forEach(function(r){var u=n?r.outEdges:r.inEdges;u.sort(
function(t,i){return t.compare(i,n)});u.forEach(function(r){for(var u=t.length-1;
u>=0;u--)if(t[u].compare(r,!n)<=0)break;t.splice(u+1,0,r);i+=t.length-u-2})}),i}
,n.prototype.reorderIfReduceCross=function(n){for(var r,h,u=0,c=this.vectors.length,
i=1;i<c;i++){var f=this.vectors[i-1],e=this.vectors[i],o=f.getEdges(n),l=e.getEdges(
n),t=0,s=0;l.forEach(function(i){o.forEach(function(r){var u=r.compareEnd(i,!n);
u>0&&t++;u===0&&s++})});r=o.length-t-s;r<t&&(f.switch(e),h=t,t=r,r=h);u+=t}return u}
,n}();n.Layer=r;u=function(){function u(){this.V=[];this.E=[];this.L=[]}return u.
prototype.setupLayers=function(){var r=this,n=this.V.filter(function(n){return!n.
inEdges.length}),i=this.tryGetLayer(0),t;for(n.forEach(function(n){i.pushVertex(
n)}),t=[];n.length;)n.forEach(function(n){var u=n.layer.level+1;n.outEdges.forEach(
function(n){n.to.layer&&n.to.layer.level>=u||(t.push(n.to),i=r.tryGetLayer(u),i.
pushVertex(n.to))})}),n=t,t=[]},u.prototype.setupGraph=function(n){var u=this,r;
n||(n=[]);r={};n.forEach(function(n){var t=new i;t.graphNode=n;t.x=n.x();t.y=n.y(
);u.V.push(t);r[n.graphNode.id]=t});n.forEach(function(n){if(n.outputPorts){var i=
0;DataLab.Util.forEach(n.outputPorts,function(f){var o=f.portModel.connectedPorts(
),e;o&&(e=0,DataLab.Util.forEach(o,function(f){var o=new t;o.from=r[n.graphNode.
id];o.to=r[f.parent.id];o.fromPortPos=i;o.toPortPos=e;u.pushEdge(o);e++}));i++})}
})},u.prototype.init=function(){this.L.forEach(function(n){n.init()})},u.prototype.
reorder=function(n){this.L.forEach(function(t){t.reorder(n)})},u.prototype.tryGetLayer=
function(n){if(n>this.L.length)throw new Error("Cannot skip layers when adding layer");
return n===this.L.length&&this.L.push(new r(n)),this.L[n]},u.prototype.setupDummies=
function(){var n=this,r=[];this.E.forEach(function(u){for(var e,c,f,o=u.from,s=u.
fromPortPos,h=u.from.layer.level+1;h<u.to.layer.level;h++)e=new i,e.isDummy=!0,c=
n.tryGetLayer(h),c.pushVertex(e),f=new t,f.from=o,f.fromPortPos=s,f.to=e,f.toPortPos=
0,n.pushEdge(f),o=e,s=0;o!==u.from&&(f=new t,f.from=o,f.fromPortPos=s,f.to=u.to,
f.toPortPos=u.toPortPos,r.push(u))});r.forEach(function(t){n.removeEdge(t)})},u.
prototype.pushEdge=function(n){this.E.push(n);n.from.outEdges.push(n);n.to.inEdges.
push(n)},u.prototype.removeEdge=function(n){DataLab.Util.removeElementFromArray(
this.E,n);DataLab.Util.removeElementFromArray(n.from.outEdges,n);DataLab.Util.removeElementFromArray(
n.to.inEdges,n)},u.prototype.setPositions=function(n,t){this.L.forEach(function(
i){i.vectors.forEach(function(r){r.x=r.pos*n;r.y=i.level*t})})},u.prototype.setPositionsToGraphNode=
function(){var t=new n.AnimationOperation;return this.V.forEach(function(n){n.graphNode&&
t.animations.push({context:{graphNode:n.graphNode,dx:(n.x-n.graphNode.x())/t.totalSteps,
dy:(n.y-n.graphNode.y())/t.totalSteps},stepFunc:function(n,t){var i=t.graphNode;
i.x(i.x()+t.dx);i.y(i.y()+t.dy)}})}),t.runAsync()},u.removeFromArray=function(n,
t){var i=t.indexOf(n);i>=0&&t.splice(i)},u}();n.LayoutGraph=u;f=function(n){function t(
t){n.call(this);this.XDistance=375;this.YDistance=120;this.graph=new u;this.graph.
setupGraph(t)}return __extends(t,n),t.prototype.runInternalAsync=function(){return this.
graph.setupLayers(),this.graph.setupDummies(),this.graph.init(),this.graph.reorder(
!0),this.graph.reorder(!1),this.graph.setPositions(this.XDistance,this.YDistance),
this.graph.setPositionsToGraphNode()},t}(n.AsyncOperation);n.AutoLayoutOperation=
f}(ExperimentEditor||(ExperimentEditor={})),function(n){var i=DataLab.Util,t=DataLab.
LocalizedResources,r=function(){function r(){}return r.showPrepareWebServiceTourAsync=
function(i,r,u){var f=new n.Bubble.Options("PrepareWebServiceTour"),e,o;return i&&
(e=f.addStepByGraphNode(i,t.createScoreTutorialInputOutputNodesTitle,t.createScoreTutorialInputOutputNodesContent),
e.shouldShowLeftButton=!1),o=f.addStepByJquerySelector("#displayFlowSwitch .displayFlowSwitchIcon",
t.createScoreTutorialDataFlowTitle,t.createScoreTutorialDataFlowContent),i||(o.shouldShowLeftButton=
!1),r.applyPaletteSearch(""),r.categories().forEach(function(n){n.name()===u?n.isCollapsed(
!1):n.isCollapsed(!0)}),f.addStepByJquerySelector(function(){var n=$(".xe-utilityPanel div.paletteCategory-title:contains('"+
u+"')");return n.length?n.first().parent().parent().parent().parent():null},t.createScoreTutorialAddInputOutputNodesTitle,
t.createScoreTutorialAddInputOutputNodesContent),f.addStepByJquerySelector(function(
){var n=$("div.fxs-command-text").filter(function(n,i){return $(i).text()===t.commandsRun}
);if(n.length)return n.first().parent().parent()},t.runExperimentCommandTourTitle,
t.runExperimentCommandTourContent),n.Bubble.showAsync(f)},r.showCreatingScoringExperimentTourAsync=
function(i,r,u,f){var e=new n.Bubble.Options("CreateScoringGraphTour"),o=e.addStepByJquerySelector(
"ul.project-experiments-tabs > li.active",t.createScoreTutorialNewExperimentTitle,
t.createScoreTutorialNewExperimentContent);return o.shouldShowLeftButton=!1,o.isProgressStep=
!1,i&&e.addStepByGraphNode(i,t.createScoreTutorialInputOutputNodesTitle,t.createScoreTutorialInputOutputNodesContent),
e.addStepByJquerySelector("#displayFlowSwitch .displayFlowSwitchIcon",t.createScoreTutorialDataFlowTitle,
t.createScoreTutorialDataFlowContent),r.applyPaletteSearch(""),r.categories().forEach(
function(n){n.name()===u?n.isCollapsed(!1):n.isCollapsed(!0)}),e.addStepByJquerySelector(
function(){var n=$(".xe-utilityPanel div.paletteCategory-title:contains('"+u+"')");
return n.length?n.first().parent().parent().parent().parent():null},t.createScoreTutorialAddInputOutputNodesTitle,
t.createScoreTutorialAddInputOutputNodesContent),e.addStepByGraphNode(f,t.createScoreTutorialTrainedModelTitle,
t.createScoreTutorialTrainedModelContent),e.addStepByJquerySelector(function(){var
n=$("div.fxs-command-text").filter(function(n,i){return $(i).text()===t.commandsRun}
);if(n.length)return n.first().parent().parent()},t.runExperimentCommandTourTitle,
t.runExperimentCommandTourContent),n.Bubble.showAsync(e)},r.showCreatingScoringGraphCommandTour=
function(){var i=new n.Bubble.Options("CreateScoringGraphCommandTour"),r;i.showOverlay=
!1;i.dismissOnClick=!0;r=i.addStepByJquerySelector(function(){var n=$("div.fxs-command-text").
filter(function(n,i){return $(i).text()===t.setupWebServiceCommandTitle});if(n.length)
return n.first().parent().parent()},t.createScoreCommandTourTitle,t.createScoreCommandTourContent);
r.shouldShowLeftButton=!1;r.isProgressStep=!1;n.Bubble.showAsync(i)},r.showUpdatingScoringGraphCommandTour=
function(){var i=new n.Bubble.Options("UpdateScoringGraphCommandTour"),r;i.showOverlay=
!1;i.dismissOnClick=!0;r=i.addStepByJquerySelector(function(){var n=$("div.fxs-command-text").
filter(function(n,i){return $(i).text()===t.updateScoreGraphCommandTitle});if(n.
length)return n.first().parent().parent()},t.updateScoreCommandTourTitle,t.updateScoreCommandTourContent,
550,200);r.shouldShowLeftButton=!1;r.isProgressStep=!1;n.Bubble.showAsync(i)},r.
showPublishWebServiceCommandTour=function(){var i=new n.Bubble.Options("PublishWebServiceCommandTour"),
r;i.showOverlay=!1;i.dismissOnClick=!0;r=i.addStepByJquerySelector(function(){var
n=$("div.fxs-command-text").filter(function(n,i){return $(i).text()===t.publishWebServiceCommandTitle}
);if(n.length)return n.first().parent().parent()},t.publishWebServiceCommandTourTitle,
t.publishWebServiceCommandTourContent);r.shouldShowLeftButton=!1;r.isProgressStep=
!1;n.Bubble.showAsync(i)},r.showMultipleTrainModuleSelectionTour=function(){var r=
new n.Bubble.Options("MultipleTrainModuleSelectionTour"),u=r.addStepAtCenter(t.multipleTrainModuleSelectionTourTitle,
i.format(t.multipleTrainModuleSelectionTourContent,"<br><img src='/Libraries/Images/GuidedScoring/train_module_snapshot.png'/><br>"),
400,300);u.shouldShowLeftButton=!1;u.isProgressStep=!1;r.alwaysShow=!0;r.dismissOnScroll=
!1;n.Bubble.showAsync(r)},r}();n.GuideTours=r}(ExperimentEditor||(ExperimentEditor=
{})),function(n){var t=DataLab.Util,i=DataLab.Model,r=function(){function r(){}return r.
isApplyTransformModuleNode=function(n){return n instanceof i.ModuleNode?n.module_.
familyId.indexOf(DataLab.Constants.WellKnownResource.ApplyTransformationFamilyId)>
-1:!1},r.isModuleFamily=function(n,t){return n.familyId?n.familyId.indexOf(t)>-1:
!1},r.isModuleCategory=function(n,t){return n.category===t},r.formatResourceName=
function(n){var t=n?n.replace(/[\/\\#\?:]/g,"").trim():"";return t.length>110&&(
t=t.substr(0,110)),t},r.getUniqueResourceName=function(n,i,r){var u,o,e,f;if(r===
void 0&&(r=[]),u=t.map(n.items(),function(n){return n.name().toLowerCase()}),o=r.
map(function(n){return n.toLowerCase()}),u=u.concat(o),u.indexOf(i.toLowerCase())<
0)return i;for(e=1,f=i+" "+e.toString();u.indexOf(f.toLowerCase())>-1;)f=i+" "+(++e)
.toString();return f},r.parseModelFamilyId=function(n){if(n){var t=n.split(".");
if(t&&t.length>1)return t[1]}return null},r.parseExperimentFamilyId=function(n){
if(!n)throw new Error("Experiment id cannot be null");var t=n.split(".");if(t.length<
3)throw new Error("invalid experiment id: "+n);return t[2]},r.searchTrainedModelInScoreGraph=
function(n,i){var u=t.values(n.trainedModels),r=null;return u.forEach(function(n)
{return n.trainedModel.experimentId.indexOf(i)>0?(r=n,!1):!0}),r},r.searchTransformNodeInScoreGraph=
function(n,i,r){var u=t.values(n.transformModules);return t.first(u,function(n){
if(n&&n.transform.experimentId.indexOf(i)>0&&n.transform.name()===r.name())return!0}
,null)},r.searchSavedTrainedModel=function(n,i,r,u){return t.first(n.items(),function(
n){return n.experimentId&&n.experimentId.indexOf(i)>0?n.moduleId===r&&n.outputName===
u:!1},null)},r.getTrainingModuleNodes=function(n){var r=[];return t.forEach(n.nodes(
),function(n){n instanceof i.ModuleNode&&n.module_.category===DataLab.Constants.
ResourceCategory.TrainModule&&r.push(n)}),r},r.findCompatibleModule=function(n,t,
i){var r=[];return DataLab.Util.forEach(n.moduleCache.items(),function(n){var u=
t.indexOf(n.familyId);u>=0&&n.portDescriptors.some(function(n){return n.isCompatible(
i.descriptor)})&&(r[u]=n)}),DataLab.Util.first(r,function(n){return n},null)},r.
setColumnSelectionParameterToAll=function(t){DataLab.Util.forEach(t.parameters,function(
t){var r=t.descriptor,i;r instanceof DataLab.Model.ColumnPickerModuleParameterDescriptor&&
(i=new n.ColumnPicker.ColumnPickerViewModel(t.value,r.singleColumnSelection),i.rules(
[new n.ColumnPicker.ColumnPickerRule(n.ColumnPicker.RuleType.AllColumns,i)]),t.value(
i.createRulesJSONString()))})},r}();n.ModelHelpers=r}(ExperimentEditor||(ExperimentEditor=
{})),function(n){var t=function(){function n(){this.workspace=null;this.inputNode=
null;this.outputNode=null;this.trainedModelNode=null;this.experimentEditorViewModel=
null;this.asyncOperation=null}return n}();n.Context=t}(ExperimentEditor||(ExperimentEditor=
{})),function(n){var t=DataLab.Util,i=DataLab.Model,r=window.environment&&window.
environment.globalWorkspaceId||"dummy",u=[DataLab.Constants.WellKnownResource.ScoreGenericModuleFamilyId,
DataLab.Constants.WellKnownResource.AssignDataToClusterFamilyId,DataLab.Constants.
WellKnownResource.AssignToClusterFamilyId].map(function(n){return r+"."+n}),f=function(
){function r(n){this.trainedModelPort=null;this.webServiceInputPorts=[];this.webServiceOutputPorts=
[];this.scoreNodes=[];this.supportedScoreModuleFamilyId=u;this.workspace=n;this.
trainedModelCache=n.trainedModelCache}return r.prototype.preProcess=function(n,t)
{var i=this;return this.searchTrainingModuleInGraph(n,t).then(function(r){return i.
createTrainedModelAsync(n,r,t)}).then(function(n){i.trainedModel=n})},r.prototype.
process=function(){return t.when("")},r.prototype.postProcess=function(){return t.
when("")},r.prototype.searchTrainingModuleInGraph=function(i,r){var u,f;if(this.
trainModuleNode=null,u=n.ModelHelpers.getTrainingModuleNodes(i),!u.length)return r.
asyncOperation.reject(new Error("No train module found in the training experiment."));
if(u.length>1)if(f=t.values(r.experimentEditorViewModel.selectionManager.selectedGraphNodes(
)),f&&f.length===1&&u.indexOf(f[0].graphNode)>=0)this.trainModuleNode=f[0].graphNode
else return n.GuideTours.showMultipleTrainModuleSelectionTour(),r.asyncOperation.
reject(new Error("There are more than one train module in the training experiment. Please select one and retry."))
else u.length===1&&(this.trainModuleNode=u[0]);return t.when(this.trainModuleNode)}
,r.prototype.createTrainedModelAsync=function(i,r,u){var e=t.filter(r.outputPorts,
function(n){return n.isTrainModulePort()}),o,f,s;return!e||!e.length?u.asyncOperation.
reject(new Error("No outputs found as trained model.")):(this.trainedModelPort=e[
0],o=n.ModelHelpers.parseExperimentFamilyId(i.experimentId()),f=n.ModelHelpers.searchSavedTrainedModel(
this.trainedModelCache,o,this.trainedModelPort.parent.id,this.trainedModelPort.name),
f?this.saveTrainedModel(this.workspace,this.trainedModelPort,f.name(),n.ModelHelpers.
parseModelFamilyId(f.familyId),f.description()):(s=n.ModelHelpers.getUniqueResourceName(
this.trainedModelCache,n.ModelHelpers.formatResourceName(i.description())+" [trained model]"),
this.saveTrainedModel(this.workspace,this.trainedModelPort,s)))},r.prototype.saveTrainedModel=
function(t,i,r,u,f){return new n.SaveTrainedModelOperation(t,i,r,u,f,!1).runAsync(
)},r.prototype.isScoreModuleNode=function(n){return n instanceof i.ModuleNode?this.
supportedScoreModuleFamilyId.indexOf(n.module_.familyId)>=0:!1},r}();n.TrainedModelExperimentProcessorBase=
f}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(n,
t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);
r.prototype=t.prototype;n.prototype=new r},function(n){var t=DataLab.Util,i=DataLab.
Model,r=function(r){function u(n){r.call(this,n)}return __extends(u,r),u.prototype.
preProcess=function(n,t){return r.prototype.preProcess.call(this,n,t)},u.prototype.
process=function(n,t){var i=this;return this.searchTrainingModuleInGraph(n,t).then(
function(){return t.trainedModelNode=i.addTrainedModelToGraph(n,i.trainedModel,t),
i.findOrCreateScoreModuleNodeAsync(n,t)}).then(function(n){i.scoreModuleNode=n})}
,u.prototype.postProcess=function(n,t){var i=this;return this.removeUnusedNodesAsync(
n,this.scoreModuleNode).then(function(){return i.addWebServiceInputOutputPortsAsync(
n,t)})},u.prototype.addTrainedModelToGraph=function(n,t,i){return i.experimentEditorViewModel.
addTrainedModelById(t.id,this.trainModuleNode.x(),this.trainModuleNode.y()).graphNode}
,u.prototype.findOrCreateScoreModuleNodeAsync=function(i,r){var s=this,e=$.Deferred(
),u,o,h,f;return this.trainedModelPort&&(o=t.first(this.trainedModelPort.connectedNonWebServicePorts(
),function(n){return s.isScoreModuleNode(n.parent)},null),u=o?o.parent:null),u?e.
resolve(u):(h=n.ModelHelpers.findCompatibleModule(this.workspace,this.supportedScoreModuleFamilyId,
this.trainedModelPort),u=r.experimentEditorViewModel.addModuleById(h.id,this.trainedModelPort.
parent.x(),this.trainedModelPort.parent.y()).graphNode,n.ModelHelpers.setColumnSelectionParameterToAll(
u),f=new n.MoveNodesAnimationOperation,f.initialize(t.values(i.nodes())),f.AddMovement(
{node:u,direction:1}),f.runAsync().done(function(){var r=t.first(u.inputPorts,function(
n){return n.isDatasetDataType()}),i=t.first(s.trainModuleNode.inputPorts,function(
n){return n.isDatasetDataType()},null),n;i&&(n=i.connectedOutputPort,n&&n.connectTo(
r));e.resolve(u)})),e.then(function(n){var i=t.first(n.inputPorts),u=t.first(r.trainedModelNode.
outputPorts);return i.disconnect(i.connectedNonWebServicePorts()),i.connectTo(u),
n}).promise()},u.prototype.removeUnusedNodesAsync=function(i,r){var f=this,e,u;return this.
traverseScoreGraphNodes(r),e=t.filter(i.nodes(),function(n){return f.scoreNodes.
indexOf(n)<0}),u=new n.AnimationOperation,e.forEach(function(n){u.animations.push(
{context:{graphNode:n,dx:(f.trainModuleNode.x()-n.x())/u.totalSteps,dy:(f.trainModuleNode.
y()-n.y())/u.totalSteps},stepFunc:function(n,t){var i=t.graphNode;i.x(i.x()+t.dx);
i.y(i.y()+t.dy)}})}),u.runAsync().done(function(){e.forEach(function(n){return n.
remove()})})},u.prototype.traverseScoreGraphNodes=function(r){var u=this,f;r&&(this.
isScoreModuleNode(r)&&!this.webServiceOutputPorts.length&&(f=t.first(r.outputPorts,
function(n){return n.isDatasetDataType()},null),f&&this.webServiceOutputPorts.push(
f)),this.scoreNodes.indexOf(r)<0&&this.scoreNodes.push(r),t.forEach(r.inputPorts,
function(r){var f=r.connectedOutputPort,e,o;if(f&&f.parent){if(t.isEmpty(f.parent.
inputPorts)&&r.isDatasetDataType()&&(u.webServiceInputPorts.length||u.webServiceInputPorts.
push(r)),f.parent instanceof i.ModuleNode&&(e=f.parent,n.ModelHelpers.isModuleFamily(
e.module_,DataLab.Constants.WellKnownResource.SplitModuleFamilyId))){o=t.first(e.
inputPorts);o.connectedOutputPort&&(r.disconnect(r.connectedNonWebServicePorts()),
r.connectTo(o.connectedOutputPort),u.traverseScoreGraphNodes(r.parent));return}u.
traverseScoreGraphNodes(f.parent)}}))},u.prototype.addWebServiceInputOutputPortsAsync=
function(i,r){var f=this,u=new n.MoveNodesAnimationOperation;return u.initialize(
t.values(i.nodes())),t.forEach(this.webServiceInputPorts,function(n){n&&(r.inputNode=
i.addWebServicePort(0,n.parent.x(),n.parent.y(),null,f.workspace.applicationCache.
dataTypeRegistry,n),u.AddMovement({node:r.inputNode,direction:0}))}),t.forEach(this.
webServiceOutputPorts,function(n){n&&(r.outputNode=i.addWebServicePort(1,n.parent.
x(),n.parent.y(),null,f.workspace.applicationCache.dataTypeRegistry,n),u.AddMovement(
{node:r.outputNode,direction:1}))}),i.isWebServiceExperiment(!0),r.experimentEditorViewModel.
experimentViewModel().displayFlowType(n.Constants.ExperimentDataFlowType.WebService),
u.runAsync()},u}(n.TrainedModelExperimentProcessorBase);n.TrainedModelExperimentCreateProcessor=
r}(ExperimentEditor||(ExperimentEditor={})),function(n){var t=DataLab.Util,i=function(
){function i(n){this.transformResources={};this.transformProducerNodes={};this.transformModulesCache=
n.transformModulesCache}return i.prototype.preProcess=function(i,r){var u=this,o=
n.ModelHelpers.parseExperimentFamilyId(i.experimentId()),f=[],e=[];return i.getModules(
).forEach(function(s){var h=t.first(s.outputPorts,function(n){return n.isTransformProducerPort(
)},null),c,l;h&&(c=u.searchTransformModule(u.transformModulesCache,o,h.parent.id,
h.name),c?f.push(u.saveTransformModel(r.workspace,h,c.name(),n.ModelHelpers.parseModelFamilyId(
c.familyId),c.description()).then(function(n){u.transformResources[s.id]=n;u.transformProducerNodes[
s.id]=s})):(l=n.ModelHelpers.getUniqueResourceName(u.transformModulesCache,n.ModelHelpers.
formatResourceName(i.description())+" ["+n.ModelHelpers.formatResourceName(s.name)+
"]",e),e.push(l),f.push(u.saveTransformModel(r.workspace,h,l).fail(function(n){var
i={title:n.message};n instanceof t.AjaxError&&n.xmlHttpRequest&&n.xmlHttpRequest.
status===400&&(i.details=n.xmlHttpRequest.responseText);t.showErrorNotification(
i)}).then(function(n){u.transformResources[s.id]=n;u.transformProducerNodes[s.id]=
s}))))}),$.when.apply($,f)},i.prototype.process=function(){return t.when("")},i.
prototype.postProcess=function(){return t.when("")},i.prototype.searchTransformModule=
function(n,i,r,u){return t.first(n.items(),function(n){return n.experimentId&&n.
experimentId.indexOf(i)>0?n.moduleId===r&&n.outputName===u:!1},null)},i.prototype.
saveTransformModel=function(n,t,i,r,u){return n.promoteOutputToTransformModuleAsync(
t,i,r,u)},i}();n.TransformModuleExperimentProcessorBase=i}(ExperimentEditor||(ExperimentEditor=
{}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var t=DataLab.Util,i=function(i){function r(n){i.call(this,n);
this.applyTransformModuleName="Apply Transform";this.transformationOutputTransformPortName=
"transformation";this.applyTransformInputPortName="Transformation"}return __extends(
r,i),r.prototype.preProcess=function(n,t){return i.prototype.preProcess.call(this,
n,t)},r.prototype.process=function(n,t){var i=this,r=[];return $.each(this.transformResources,
function(u,f){var e=i.transformProducerNodes[u],o=i.addTransformToGraph(f,e,t);r.
push(i.findOrCreateApplyTransformNodeAsync(t,n,e,o).then(function(n){e.remove();
o.outputPorts[i.transformationOutputTransformPortName].connectTo(n.inputPorts[i.
applyTransformInputPortName])}))}),$.when.apply($,r)},r.prototype.postProcess=function(
){return t.when("")},r.prototype.addTransformToGraph=function(n,t,i){return i.experimentEditorViewModel.
addTransformById(n.id,t.x(),t.y()).transformNode},r.prototype.findOrCreateApplyTransformNodeAsync=
function(i,r,u){var o=$.Deferred(),k=t.first(u.outputPorts,function(n){return n.
isTransformProducerPort()},null),f=null,a=k.connectedNonWebServicePorts(),s,v,y,
h,p,e,c,b,l;if(a!=null&&(s=t.first(a,function(t){return n.ModelHelpers.isApplyTransformModuleNode(
t.parent)},null),s!=null&&(f=s.parent)),f!=null)v=t.first(f.inputPorts,function(
n){return!n.isDatasetDataType()},null),v.disconnect(),y=t.first(u.inputPorts,function(
n){return n.isDatasetDataType()}),h=t.first(f.inputPorts,function(n){return n.isDatasetDataType(
)},null),h.disconnect(),h.connectTo(y.connectedOutputPort),o.resolve(f);else{p=t.
first(i.workspace.moduleCache.items(),function(n){return n.familyId.indexOf(DataLab.
Constants.WellKnownResource.ApplyTransformationFamilyId)>-1});f=i.experimentEditorViewModel.
addModuleById(p.id,u.x(),u.y()).graphNode;e=new n.MoveNodesAnimationOperation;e.
initialize(t.values(r.nodes()));e.AddMovement({node:f,direction:1});var d=t.first(
u.inputPorts,function(n){return n.isDatasetDataType()}),w=t.first(u.outputPorts,
function(n){return n.isDatasetDataType()},null),g=t.first(f.inputPorts,function(
n){return n.isDatasetDataType()}),nt=t.first(f.outputPorts,function(n){return n.
isDatasetDataType()},null);g.connectTo(d.connectedOutputPort);c=w.connectedPorts(
);for(b in c)l=c[b],w.disconnectFrom(l),nt.connectTo(l);e.runAsync().done(function(
){o.resolve(f)})}return o.promise()},r}(n.TransformModuleExperimentProcessorBase);
n.TransformModuleExperimentCreateProcessor=i}(ExperimentEditor||(ExperimentEditor=
{}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(
var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=
new r},function(n){var i=DataLab.DataContract,t=DataLab.LocalizedResources,r=function(
r){function u(n,t){r.call(this);n&&this.initialize(n,t)}return __extends(u,r),u.
prototype.initialize=function(t,i){var r=this;this.experimentContainerViewModel=
t;this.xeControlContainer=i;this.experiment=t.experiment;this.workspace=t.workspace;
this.context=new n.Context;this.context.workspace=this.workspace;this.context.experimentEditorViewModel=
t.experimentEditorViewModel;this.context.asyncOperation=this;this.processors=[new
n.TrainedModelExperimentCreateProcessor(this.workspace),new n.TransformModuleExperimentCreateProcessor(
this.workspace)];this.isRunning.subscribe(function(n){n?r.xeControlContainer.block(
):r.xeControlContainer.unblock()})},u.prototype.runAsync=function(){var n=this;return DataLab.
Log.featureUsage({featureID:73,groupID:72,experimentID:this.experiment.experimentId(
)}),r.prototype.runAsync.call(this).fail(function(t){DataLab.Log.featureUsage({featureID:
74,groupID:72,experimentID:n.experiment.experimentId(),data:t&&t.message})})},u.
prototype.runInternalAsync=function(){return this.experiment.containsTrainingModule(
)?this.createScoreGraph():this.reject(new Error("No training module in the experiment"))}
,u.prototype.createScoreGraph=function(){var r=this,u,s=this.experiment.experimentId(
),h=this.experimentContainerViewModel.projectViewModel.projectId;this.startProgress(
t.createScoringExperimentProgressTitle);var f=[],e=[],o=[];return this.addStep(t.
lookingForTrainModuleStepTitle),this.processors.forEach(function(n){f.push(n.preProcess(
r.experiment,r.context))}),$.when.apply($,f).then(function(){r.updateCurrentStep(
t.foundTrainModuleStepTitle);r.addStep(t.creatingTrainedModelStepTitle);r.updateCurrentStep(
t.createdTrainedModelStepTitle);r.experimentContainerViewModel.copy(r.experiment.
description()+t.predictiveExperimentNameSuffix);r.experimentContainerViewModel.projectViewModel.
projectId=h;r.addExperimentToProject(s,i.ExperimentRole.Training);u=r.addExperimentToProject(
r.experiment.experimentId(),i.ExperimentRole.Scoring)}).then(function(){return r.
processors.forEach(function(n){e.push(n.process(r.experiment,r.context))}),$.when.
apply($,e)}).then(function(){return r.addStep(t.creatingScoreExperimentStepTitle),
r.processors.forEach(function(n){o.push(n.postProcess(r.experiment,r.context))}),
$.when.apply($,o)}).then(function(){return r.experimentContainerViewModel.save()}
).then(function(){return u.experimentId(r.experiment.experimentId()),r.experimentContainerViewModel.
projectViewModel.save()}).then(function(){return r.updateCurrentStep(t.createdScoreExperimentStepTitle),
r.xeControlContainer.zoomToFitWithAnimation()}).then(function(){return n.GuideTours.
showCreatingScoringExperimentTourAsync(r.context.inputNode||r.context.outputNode,
r.experimentContainerViewModel.paletteViewModel,r.experimentContainerViewModel.webServiceViewModel.
webServiceCategory.name(),r.context.trainedModelNode)}).done(function(n){n.visible(
)&&r.removeNotification(r.progress)})},u.prototype.addExperimentToProject=function(
n,t){var i=this.experimentContainerViewModel.projectViewModel;return i.addExperiment(
n,t)},u.prototype.isEnabled=function(){return this.experimentContainerViewModel.
experiment.containsTrainingModule()&&!this.isRunning()},u}(n.AsyncOperation);n.CreateScoringGraphOperation=
r}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(n,
t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);
r.prototype=t.prototype;n.prototype=new r},function(n){var u,i,t,r;(function(n){
n[n.up=0]="up";n[n.down=1]="down"})(n.MoveDirection||(n.MoveDirection={}));u=n.MoveDirection;
i=function(){function n(){}return n}();n.NodeMovement=i;t=function(){function n(
){}return Object.defineProperty(n.prototype,"right",{get:function(){return this.
left+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,
"bottom",{get:function(){return this.top+this.height},enumerable:!0,configurable:
!0}),n}();r=function(i){function r(){i.apply(this,arguments);this.yDistance=120;
this.xDistance=120;this.nodeMovements=[];this.rects=[]}return __extends(r,i),r.prototype.
initialize=function(n){this.nodes=n;this.rects=this.nodes.map(function(n){var i=
new t;return i.left=n.x(),i.top=n.y(),i.height=n.height(),i.width=n.width(),i})}
,r.prototype.AddMovement=function(n){this.nodeMovements.push(n)},r.prototype.runInternalAsync=
function(){var i=this,t=new n.AnimationOperation;return this.nodeMovements.forEach(
function(n){var r=i.getBestPosition(n);t.animations.push({context:{graphNode:n.node,
dx:(r.left-n.node.x())/t.totalSteps,dy:(r.top-n.node.y())/t.totalSteps},stepFunc:
function(n,t){var i=t.graphNode;i.x(i.x()+t.dx);i.y(i.y()+t.dy)}})}),t.runAsync(
)},r.prototype.getBestPosition=function(n){var e=this,i=new t,r,u,f;for(i.left=n.
node.x(),i.top=n.node.y(),i.height=n.node.height(),i.width=n.node.width(),i.top=
n.direction===0?i.top-this.yDistance-i.height:i.top+this.yDistance+i.height,r=i.
left;!this.rects.every(function(n){return!e.isOverlap(n,i)});)i.left+=this.xDistance;
for(u=i.left,i.left=r;!this.rects.every(function(n){return!e.isOverlap(n,i)});)i.
left-=this.xDistance;return f=i.left,i.left=u-r>r-f?f:u,this.rects.push(i),i},r.
prototype.isOverlap=function(n,t){return n.left<t.right&&n.right>t.left&&n.top<t.
bottom&&n.bottom>t.top},r}(n.AsyncOperation);n.MoveNodesAnimationOperation=r}(ExperimentEditor||
(ExperimentEditor={}));__extends=this.__extends||function(n,t){function r(){this.
constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;
n.prototype=new r},function(n){var t=DataLab.Util,i=DataLab.Model,r=function(r){
function u(n,t){r.call(this);this.inputPort=null;this.outputPorts=[];this.nodes=
[];this.inputPortDepth=Number.MAX_VALUE;this.outputPortDepth=0;this.inputToOutputDepth=
0;n&&this.initialize(n,t)}return __extends(u,r),u.prototype.reset=function(){this.
inputPort=null;this.outputPorts=[];this.inputPortDepth=Number.MAX_VALUE;this.outputPortDepth=
0;this.inputToOutputDepth=0},u.prototype.initialize=function(n,i){this.experimentContainerViewModel=
n;this.experiment=n.experiment;this.experimentEditorViewModel=n.experimentEditorViewModel;
this.workspace=n.workspace;this.nodes=t.values(this.experiment.nodes());this.xeControlContainer=
i;this.reset()},u.prototype.runAsync=function(){var n=this;return DataLab.Log.featureUsage(
{featureID:68,groupID:68,experimentID:this.experiment.experimentId()}),r.prototype.
runAsync.call(this).fail(function(t){DataLab.Log.featureUsage({featureID:71,groupID:
68,experimentID:n.experiment.experimentId(),data:t&&t.message})})},u.prototype.runInternalAsync=
function(){var i=this,t;return(this.reset(),!this.searchTrainingModule())?(n.GuideTours.
showMultipleTrainModuleSelectionTour(),DataLab.Util.fail(new Error("There are more than one train module in the training experiment. Please select one and retry."))):
(this.searchGraph(),this.addTrainModulePort(),t=new n.AddWebServicePortAnimationOperation,
t.initialize(this.experiment,this.workspace),this.inputPort&&t.webServiceInputPorts.
push(this.inputPort),this.outputPorts.length&&[].push.apply(t.webServiceOutputPorts,
this.outputPorts),this.experiment.isWebServiceExperiment(!0),this.experimentEditorViewModel.
experimentViewModel().displayFlowType(n.Constants.ExperimentDataFlowType.WebService),
t.runAsync().then(function(){return i.xeControlContainer.zoomToFitWithAnimation(
)}).then(function(){var r=null;return t.webServiceInputPortNodes.length?r=t.webServiceInputPortNodes[
0]:t.webServiceOutputPortNodes.length&&(r=t.webServiceOutputPortNodes[0]),n.GuideTours.
showPrepareWebServiceTourAsync(r,i.experimentContainerViewModel.paletteViewModel,
i.experimentContainerViewModel.webServiceViewModel.webServiceCategory.name())}))}
,u.prototype.searchTrainingModule=function(){var i,r;if(this.trainModuleNode=null,
i=n.ModelHelpers.getTrainingModuleNodes(this.experiment),i.length>1)if(r=t.values(
this.experimentEditorViewModel.selectionManager.selectedGraphNodes()),r&&r.length===
1&&i.indexOf(r[0].graphNode)>=0)this.trainModuleNode=r[0].graphNode;else return!1
else i.length===1&&(this.trainModuleNode=i[0]);return!0},u.prototype.addTrainModulePort=
function(){var n,r;this.trainModuleNode&&(this.outputPorts.length===1&&(n=this.outputPorts[
0],(!n||n.isTrainModulePort())&&delete this.outputPorts[0]),r=null,t.forEach(this.
trainModuleNode.outputPorts,function(n){n instanceof i.OutputPort&&(r=n)}),this.
outputPorts.push(r))},u.prototype.searchGraph=function(){var n=this;t.forEach(this.
nodes,function(t){n.isRoot(t)&&n.searchTree(t)})},u.prototype.searchTree=function(
n,i,r,u){var e=this,f;i===void 0&&(i=null);r===void 0&&(r=0);u===void 0&&(u=0);i||
t.forEach(n.inputPorts,function(n){return n.isConnected()&&n.isDatasetDataType()?
(i=n,u=1,!1):!0});f=null;t.forEach(n.outputPorts,function(n){return n.isDatasetDataType(
)||n.isTrainModulePort()?(f=n,!1):!0});i&&f?u>this.inputToOutputDepth&&(this.inputPort=
i,this.outputPorts[0]=f,this.inputToOutputDepth=u):this.inputToOutputDepth||(i&&
u===1&&r<this.inputPortDepth&&(this.inputPort=i,this.inputPortDepth=r,this.outputPorts[
0]=null,this.outputPortDepth=0),!this.inputPort&&f&&r+1>this.outputPortDepth&&(this.
outputPorts[0]=f,this.outputPortDepth=r+1));u&&u++;t.forEach(n.outputPorts,function(
n){t.forEach(n.connectedNonWebServicePorts(),function(n){e.searchTree(n.parent,i,
r+1,u)})})},u.prototype.isRoot=function(n){var i=t.values(n.inputPorts);return i.
length?i.every(function(n){return!n.isConnected()}):!0},u}(n.AsyncOperation);n.PrepareWebServiceOperation=
r}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(n,
t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);
r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(n){function t(
t,i,r,u,f,e){if(e===void 0&&(e=!0),n.call(this),this.showProgress=!0,!t)throw new
Error("workspace cannot be null.");this.workspace=t;this.port=i;this.name=r;this.
familyId=u;this.description=f;this.showProgress=e}return __extends(t,n),t.prototype.
runInternalAsync=function(){return this.port?this.name?this.port.isTrainModulePort(
)?(this.showProgress&&this.startProgress(DataLab.LocalizedResources.promotionSavingIntermediateOutput),
this.workspace.promoteOutputToTrainedModelAsync(this.port,this.name,this.familyId,
this.description)):this.reject(Error("The selected port can't be saved as trained model.")):
this.reject(new Error("Name can't be null or empty for trained model.")):this.reject(
new Error("Port is required to save as trained model."))},t}(n.AsyncOperation);n.
SaveTrainedModelOperation=t}(ExperimentEditor||(ExperimentEditor={}));__extends=
this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(
i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=DataLab.
Util,r=DataLab.Model,i=DataLab.LocalizedResources,u=function(u){function f(n){u.
call(this,n)}return __extends(f,u),f.prototype.preProcess=function(n,t){return this.
trainingExperiment=n,u.prototype.preProcess.call(this,n,t)},f.prototype.process=
function(f,e){var p=n.ModelHelpers.parseExperimentFamilyId(this.trainingExperiment.
experimentId()),h=n.ModelHelpers.searchTrainedModelInScoreGraph(f,p),c,o,v,s,a;try{
if(!h)throw new Error(i.experimentProcessorErrorNoMatchingTrainedModel);if(c=new
r.TrainedModelNode(this.trainedModel),o=t.first(h.outputPorts,undefined,null),!o)
throw new Error(i.experimentProcessorErrorNoOutputPortsOld);if(v=t.first(o.connectedPorts(
),undefined,null),!o)throw new Error(i.experimentProcessorErrorOutputNotConnected);
var y=v.parent,w=t.values(y.ports).map(function(n){return t.first(n.connectedPorts(
),undefined,null)}).filter(function(n){return n!==null}),l={};if(h.replaceWith(c,
l),!t.isEmpty(l)){if(s=this.createCompatibleScoreModule(this.trainedModelPort),!s)
throw new Error(i.experimentProcessorErrorNoCompatibleScorerFound);if(y.replaceWith(
s,l),a=t.first(c.outputPorts,undefined,null),!a)throw new Error(i.experimentProcessorErrorNoOutputPortsNew);
this.fixConnections(s,w.concat([a]))}return u.prototype.process.call(this,f,e)}catch(b)
{return e.asyncOperation.reject(b)}},f.prototype.createCompatibleScoreModule=function(
){var i=n.ModelHelpers.findCompatibleModule(this.workspace,this.supportedScoreModuleFamilyId,
this.trainedModelPort),t;return i?(t=new r.ModuleNode(i,this.workspace),n.ModelHelpers.
setColumnSelectionParameterToAll(t),t):null},f.prototype.fixConnections=function(
n,i){var r=t.filter(n.ports,function(n){return n.connectedPorts.count()===0});i=
t.filter(i,function(n){return n.connectedPorts.count()===0});r.forEach(function(
n){var r=t.first(i,function(t){return n.isCompatible(t)},null);r&&(n.connectTo(r),
i.splice(i.indexOf(r),1))})},f}(n.TrainedModelExperimentProcessorBase);n.TrainedModelExperimentUpdateProcessor=
u}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(n,
t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);
r.prototype=t.prototype;n.prototype=new r},function(n){var t=DataLab.Util,i=DataLab.
Model,r=function(r){function u(n){r.call(this,n)}return __extends(u,r),u.prototype.
preProcess=function(n,t){return this.trainingExperiment=n,r.prototype.preProcess.
call(this,n,t)},u.prototype.process=function(t,u){var f=n.ModelHelpers.parseExperimentFamilyId(
this.trainingExperiment.experimentId());return $.each(this.transformResources,function(
r,u){var e=n.ModelHelpers.searchTransformNodeInScoreGraph(t,f,u),o;e&&(o=new i.TransformNode(
u),e.replaceWith(o,{}))}),r.prototype.process.call(this,t,u)},u.prototype.postProcess=
function(){return t.when("")},u}(n.TransformModuleExperimentProcessorBase);n.TransformModuleExperimentUpdateProcessor=
r}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(n,
t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);
r.prototype=t.prototype;n.prototype=new r},function(n){var i=DataLab.DataContract,
t=DataLab.LocalizedResources,r=function(r){function u(n,t){r.call(this);n&&this.
initialize(n,t)}return __extends(u,r),u.prototype.initialize=function(t,i){var r=
this;this.experimentContainerViewModel=t;this.experiment=t.experiment;this.experimentEditorViewModel=
t.experimentEditorViewModel;this.workspace=t.workspace;this.projectViewModel=t.projectViewModel;
this.xeControlContainer=i;this.context=new n.Context;this.context.workspace=this.
workspace;this.context.experimentEditorViewModel=t.experimentEditorViewModel;this.
context.asyncOperation=this;this.processors=[new n.TrainedModelExperimentUpdateProcessor(
this.workspace),new n.TransformModuleExperimentUpdateProcessor(this.workspace)];
this.isRunning.subscribe(function(n){n?r.xeControlContainer.block():r.xeControlContainer.
unblock()})},u.prototype.runAsync=function(){var n=this;return DataLab.Log.featureUsage(
{featureID:75,groupID:72,experimentID:this.experiment.experimentId()}),Shell.UI.
Spinner.show(),r.prototype.runAsync.call(this).fail(function(t){DataLab.Log.featureUsage(
{featureID:76,groupID:72,experimentID:n.experiment.experimentId(),data:t&&t.message})}
).always(function(){Shell.UI.Spinner.hide()})},u.prototype.runInternalAsync=function(
){var n=this,r,u,f;return(this.startProgress(t.updateScoringExperimentProgressTitle),
this.addStep(t.retreivingScoringExperimentStepTitle),r=this.projectViewModel.findExperiment(
function(n){return n.role===i.ExperimentRole.Scoring}),!r)?this.reject(new Error(
"No scoring graph found in the project.")):r.experimentId()===this.experiment.experimentId(
)?this.reject(Error("One can only update scoring graph from its training graph.")):
(u=[],f=[],this.processors.forEach(function(t){u.push(t.preProcess(n.experiment,
n.context))}),this.workspace.getExperimentAsync(r.experimentId()).then(function(
i){return $.when.apply($,u).then(function(){return n.addStep(t.lookingForTrainModuleStepTitle),
n.processors.forEach(function(t){f.push(t.process(i,n.context))}),n.addStep(t.saveTrainModuleStepTitle),
$.when.apply($,f)}).then(function(){return n.addStep(t.updateTrainedModelInScoringExperimentStepTitle),
i.setDraftState(!0),n.workspace.updateDraftAsync(i)}).done(function(){Shell.UI.Navigation.
navigate({extension:DataLabViews.experimentExtensionName,type:DataLabViews.ExperimentType.
name,name:r.experimentId()})})}))},u.prototype.isUpdatable=function(){var n=this.
projectViewModel.findExperiment(function(n){return n.role===i.ExperimentRole.Scoring}
);return n?n.experimentId()===this.experiment.experimentId()?!1:!0:!1},u.prototype.
isEnabled=function(){return this.experimentContainerViewModel.experiment.containsTrainingModule(
)&&!this.isRunning()&&this.isUpdatable()},u}(n.AsyncOperation);n.UpdateScoringGraphOperation=
r}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(n,
t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);
r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(n){var t=
function(n){function t(){n.call(this)}return __extends(t,n),t}(DataLab.Util.Disposable);
n.ProjectConfigurationDialogViewModel=t})(t=n.ProjectCollection||(n.ProjectCollection=
{}))}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(
n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[
i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(
i){var r=this;t.call(this);this.projectExperimentLocator=i;this.experiment=ko.observable(
null);this.isScoringExperimentCreated=ko.computed(function(){return r.isScoringExperimentAvailable(
)});this.isWebServicePublished=ko.computed(function(){return r.isScoringExperimentAvailable(
)&&r.experiment().publishedWebServiceGroupId!==null});this.isSubmittedToCompetition=
ko.computed(function(){var t=r.experiment();return t?t.tags().some(function(t){return t===
n.CompetitionSubmission.SubmitCompetitionEntryWizardViewModel.CompetitionSubmittedTag}
):!1})}return __extends(i,t),i.prototype.isScoringExperimentAvailable=function()
{var t=this.experiment(),n;return t?(n=this.projectExperimentLocator.findExperiment(
function(n){return n.role===DataLab.DataContract.ExperimentRole.Scoring}),!n)?!1:
t.experimentId()===n.experimentId():!1},i}(DataLab.Util.Disposable);n.CompetitionPropertiesViewModel=
t}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(n,
t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);
r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(
i){var r=this;t.call(this);this.currentTarget=ko.observable(null);this.experimentEditorViewModel=
i;this.deleteCommand=new n.CallbackCommand(function(n){r.featureUsage(50);r.experimentEditorViewModel.
experiment.removeWebServiceParameter(n.property)});this.deleteCommand.canExecute=
ko.computed(function(){return!r.experimentEditorViewModel.experimentViewModel().
readOnlyMode()});this.provideDefaultValueCommand=new n.CallbackCommand(function(
n){var t=n.property;t.hasDefaultValue()?r.featureUsage(49):r.featureUsage(48);t.
hasDefaultValue(!t.hasDefaultValue());t.value(null)});this.provideDefaultValueCommand.
canExecute=ko.computed(function(){return!r.experimentEditorViewModel.experimentViewModel(
).readOnlyMode()})}return __extends(i,t),i.prototype.build=function(n){this.currentTarget(
n);var i=n.property,t={width:120,name:"propertyMenu",items:[]};return n.type!==6&&
(t.items.push({label:i.hasDefaultValue()?DataLab.LocalizedResources.removeWebServiceParameterDefaultValue:
DataLab.LocalizedResources.provideWebServiceParameterDefaultValue,command:this.provideDefaultValueCommand,
iconClass:i.hasDefaultValue()?"check":""}),t.items.push({label:null,divider:!0,command:
null})),t.items.push({label:DataLab.LocalizedResources.deleteWebServiceParameter,
command:this.deleteCommand}),t},i.prototype.featureUsage=function(n){DataLab.Log.
featureUsage({featureID:n,groupID:43,experimentID:this.experimentEditorViewModel.
experiment.experimentId()})},i}(DataLab.Util.Disposable);n.WebServiceParameterMenuBuilder=
t}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(n,
t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);
r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(n){var i=
function(){function n(n,t,i,r,u,f){this.errors=n;this.warnings=t;this.workspace=
i;this.webServiceGroup=r;this.competitionUri=u;this.competitionTenantId=f;this.linkedExperiment=
null;this.webServiceSchema=null}return n}(),t;n.CompetitionEntryValidationContext=
i;t=function(n){function t(t,i){n.call(this);this.errorRules=t;this.warningRules=
i}return __extends(t,n),t.prototype.runValidation=function(n,t,i,r){var u=this,f=
this.getLinkedExperimentId(n);n.workspace.getExperimentAsync(f).done(function(e)
{if(!e){r({name:"FetchingLinkedExperimentFailure",message:"Failed to find linked experiment: "+
f});return}n.linkedExperiment=e;DataLab.Features.competitionEntrySchemaValidationEnabled(
)?n.workspace.getCompetitionSchemaDefinitionAsync(n.competitionUri,n.competitionTenantId).
done(function(r){n.webServiceSchema=r;u.executeRules(n,t,i)}).fail(function(n){r(
n)}):u.executeRules(n,t,i)}).fail(function(n){r(n)})},t.prototype.getLinkedExperimentId=
function(n){var t=n.webServiceGroup,i=t.StagingWebService.ModelPackageId,r=t.ModelPackages.
filter(function(n){return n.Id===i})[0];return r.LinkedExperimentId},t.prototype.
executeRules=function(n,t,i){for(var u,r=0;r<this.errorRules.length;r++)u=this.errorRules[
r].runValidation(n),u&&n.errors.push(u);for(r=0;r<this.warningRules.length;r++)u=
this.warningRules[r].runValidation(n),u&&n.warnings.push(u);n.errors().length>0||
n.warnings().length>0?i():t()},t}(DataLab.Util.Disposable);n.CompetitionEntryValidationEngine=
t})(t=n.CompetitionSubmission||(n.CompetitionSubmission={}))}(ExperimentEditor||
(ExperimentEditor={})),function(n){var t;(function(t){var i;(function(i){function u(
n){if(!n||!n.StagingWebService)return null;var i=n.StagingWebService.ModelPackageId,
t=n.ModelPackages.filter(function(n){return n.Id===i});return t.length>0?t[0]:null}
function f(n){var t=u(n);return t?t.LinkedExperimentId:null}function e(n,t){var i=
f(t);return n.getExperimentAsync(i)}function o(t,i,r,u,f,e){var o={CompetitionId:
i,CompetitionTenantId:r,WebServiceGroupId:u,WebServiceId:f,SubmissionName:e};return DataLab.
Util.then(t.startSubmitCompetitionEntryAsync(o),function(t){return n.PollingUtility.
startPolling(t,DataLab.Workspace.getCompetitionSubmissionStatusAsync,DataLab.Workspace)}
)}function s(n){var t=n.ErrorCode;if(typeof t=="number")switch(t){case 0:return DataLab.
LocalizedResources.competitionSubmissionErrorInvalidSchema;case 1:return DataLab.
LocalizedResources.competitionSubmissionErrorCompetitionEnded;case 2:return DataLab.
LocalizedResources.competitionSubmissionErrorCompetitionNotStarted;case 3:return DataLab.
LocalizedResources.competitionSubmissionErrorExceededSubmissionLimit;case 4:return DataLab.
LocalizedResources.competitionSubmissionErrorTimeout;case 5:default:return DataLab.
LocalizedResources.competitionSubmissionErrorUnknown}else return DataLab.LocalizedResources.
competitionSubmissionErrorUnknown}function r(t,i){var r=t.message,u,f;t instanceof
n.PollingUtility.ActivityError&&(u=t,r=s(u.status));f=DataLab.Util.format(DataLab.
LocalizedResources.competitionSubmissionErrorNotificationDetailsFormat,r);i.setTitle(
f);i.setActions([Shell.UI.Notifications.Buttons.close()]);i.setStatus("error");DataLab.
Log.error("submitCompetitionEntryFailed","ExperimentEditor.CompetitionSubmission.CompetitionSubmissionUtilities",
JSON.stringify(t))}function h(n,i,u,f,o){i.Tags.push(t.SubmitCompetitionEntryWizardViewModel.
CompetitionSubmittedTag);var s=n.updateWebServiceGroupAsync(i.Id,i.Name,i.Description,
!1,i.Tags);s.done(function(){e(n,i).done(function(i){var u=i.tags();u.push(t.SubmitCompetitionEntryWizardViewModel.
CompetitionSubmittedTag);i.tags(u);n.updateDraftAsync(i).done(function(){f.setTitle(
DataLab.LocalizedResources.competitionSubmissionNotificationSuccessTitle);f.setStatus(
"success");f.setActions([Shell.UI.Notifications.Buttons.close()]);o&&o()}).fail(
function(n){r(n,f)})}).fail(function(n){r(n,f)})}).fail(function(n){r(n,f)})}function c(
t,i,u,f,e){var s=new Shell.UI.Notifications.Progress(DataLab.LocalizedResources.
competitionSubmissionNotificationSubmittingTitle,"active",!0),c,l;Shell.UI.Notifications.
add(s);c=n.WebServiceGroupUtilities.getCompetitionTenantId(i);l=o(t,f,c,i.Id,i.StagingWebService.
Id,u);l.done(function(){h(t,i,f,s,e)}).fail(function(n){r(n,s)})}i.getStagingWebServiceModelPackage=
u;i.getExperimentIdForStagingWebService=f;i.getExperimentForStagingWebServiceAsync=
e;i.notifyAndLogOnError=r;i.startSubmitCompetition=c})(i=t.Utilities||(t.Utilities=
{}))})(t=n.CompetitionSubmission||(n.CompetitionSubmission={}))}(ExperimentEditor||
(ExperimentEditor={}));__extends=this.__extends||function(n,t){function r(){this.
constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;
n.prototype=new r},function(n){var t;(function(n){var t=function(n){function t(i)
{var r=this;i===void 0&&(i="");n.call(this);this.submissionName=DataLab.Validation.
validatableObservable(i,t.validateSubmissionName);this.submissionName.startValidating(
);this.isValid=ko.computed(function(){return r.submissionName.isValid()})}return __extends(
t,n),t.validateSubmissionName=function(n){return/\S/.test(n)?null:DataLab.LocalizedResources.
ErrorSubmissionNameMustContainAtLeastOneNonWhitespaceCharacter},t}(DataLab.Util.
Disposable);n.Step1ViewModel=t})(t=n.CompetitionSubmission||(n.CompetitionSubmission=
{}))}(ExperimentEditor||(ExperimentEditor={}));__extends=this.__extends||function(
n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[
i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(t){(function(
n){n[n.Unstarted=0]="Unstarted";n[n.Validating=1]="Validating";n[n.ValidationFailed=
2]="ValidationFailed";n[n.ValidationPassed=3]="ValidationPassed";n[n.Submitting=
4]="Submitting";n[n.Submitted=5]="Submitted";n[n.SubmissionFailed=6]="SubmissionFailed";
n[n.ErrorEncountered=7]="ErrorEncountered"})(t.SubmissionStatus||(t.SubmissionStatus=
{}));var r=t.SubmissionStatus,i=function(i){function r(n,t,r,u){i.call(this);this.
workspace=n;this.webServiceGroup=t;this.competitionUri=r;this.validationEngine=u;
this.status=ko.observable(0);this.errors=ko.observableArray();this.warnings=ko.observableArray(
)}return __extends(r,i),r.prototype.startValidation=function(){var i=this,r,u;this.
status()===0&&(this.status(1),r=n.WebServiceGroupUtilities.getCompetitionTenantId(
this.webServiceGroup),u=new t.CompetitionEntryValidationContext(this.errors,this.
warnings,this.workspace,this.webServiceGroup,this.competitionUri,r),this.validationEngine.
runValidation(u,function(){i.onValidationSucceeded()},function(){i.onValidationFailed(
)},function(n){i.onError(n)}))},r.prototype.onValidationSucceeded=function(){this.
status(3)},r.prototype.onValidationFailed=function(){this.errors().length===0?this.
status(3):this.status(2)},r.prototype.onError=function(n){this.status(7);this.errors.
push({summary:n.name,details:n.message})},r}(DataLab.Util.Disposable);t.Step2ViewModel=
i})(t=n.CompetitionSubmission||(n.CompetitionSubmission={}))}(ExperimentEditor||
(ExperimentEditor={}));__extends=this.__extends||function(n,t){function r(){this.
constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;
n.prototype=new r},function(n){var t;(function(t){var i=function(t){function i(n,
i,r){t.call(this);this.workspace=n;this.webServiceGroup=i;this.competitionUri=r;
this.cachedSubmissionViewModel=null;this.status=ko.observable(0)}return __extends(
i,t),i.prototype.startSubmission=function(n){n&&this.status()===0&&(this.cachedSubmissionViewModel=
n,this.status(4))},i.prototype.launchGalleryLink=function(){var t=n.WebServiceGroupUtilities.
getGalleryUri(this.webServiceGroup);window.open(t,"_blank")},i}(DataLab.Util.Disposable);
t.Step3ViewModel=i})(t=n.CompetitionSubmission||(n.CompetitionSubmission={}))}(ExperimentEditor||
(ExperimentEditor={}));__extends=this.__extends||function(n,t){function r(){this.
constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;
n.prototype=new r},function(n){var t;(function(n){var t=function(n){function t(t,
i,r,u){var f=this;n.call(this);this.termAcceptanceViewModel=t;this.step1ViewModel=
i;this.step2ViewModel=r;this.step3ViewModel=u;this.onWizardCompleted=ko.observable(
!1);this.currentStep=ko.observable(0);this.areNextStepsDisabled=ko.computed(function(
){var n=f.currentStep();switch(n){case 0:return!f.termAcceptanceViewModel.isTermAccepted(
);case 1:return!f.step1ViewModel.isValid();case 2:return f.step2ViewModel.status(
)!==3;default:return!1}});this.arePreviousStepsDisabled=ko.computed(function(){return!0}
);this.isCompleteButtonEnabled=ko.computed(function(){return f.currentStep()===3&&
f.step3ViewModel.status()===4})}return __extends(t,n),t.prototype.onWizardClosing=
function(n){this.onWizardCompleted(!0);return n.completed?DataLab.Log.customEvent(
{key:"WizardCompleted",type:t.traceEventType}):DataLab.Log.customEvent({key:"WizardCanceled",
type:t.traceEventType}),!0},t.prototype.stepActivate=function(n){if(n&&n.currentStep)
{if(n.currentStep.id===n.wizard.steps()[0].id&&this.currentStep(0),n.currentStep.
id===n.wizard.steps()[1].id&&this.currentStep(1),n.currentStep.id===n.wizard.steps(
)[2].id){this.currentStep(2);this.step2ViewModel.startValidation();return}n.currentStep.
id===n.wizard.steps()[3].id&&(this.currentStep(3),this.step3ViewModel.startSubmission(
this))}},t.traceEventType="SubmitCompetitionEntry",t.CompetitionSubmittedTag="ComptitionEntrySubmitted",
t}(DataLab.Util.Disposable);n.SubmitCompetitionEntryWizardViewModel=t})(t=n.CompetitionSubmission||
(n.CompetitionSubmission={}))}(ExperimentEditor||(ExperimentEditor={}));__extends=
this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(
i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(
n){var t=function(n){function t(){n.call(this);this.isTermAccepted=ko.observable(
!1)}return __extends(t,n),t}(DataLab.Util.Disposable);n.TermAcceptanceStepViewModel=
t})(t=n.CompetitionSubmission||(n.CompetitionSubmission={}))}(ExperimentEditor||
(ExperimentEditor={})),function(n){var t;(function(n){var t=function(){function n(
){}return n.prototype.runValidation=function(n){if(!n.webServiceGroup.StagingWebService||
!n.linkedExperiment)return null;var t=!1;return DataLab.Util.forEach(n.linkedExperiment.
nodes(),function(i){var r;i instanceof DataLab.Model.TrainedModelNode&&(r=i.trainedModel.
id,n.linkedExperiment.getTrainedModelNode(r)&&(t=!0))}),t?null:{summary:DataLab.
LocalizedResources.competitionSubmissionErrorExperimentMissingTrainedModel,details:
""}},n}();n.ValidationRuleOnExperimentMissingTrainedModel=t})(t=n.CompetitionSubmission||
(n.CompetitionSubmission={}))}(ExperimentEditor||(ExperimentEditor={})),function(
n){var t;(function(n){var t=function(){function n(){}return n.prototype.runValidation=
function(n){return n.webServiceGroup&&n.webServiceGroup.StagingWebService?null:{
summary:DataLab.LocalizedResources.competitionSubmissionErrorWebServiceNotFound,
details:""}},n}();n.ValidationRuleOnWebServiceExistence=t})(t=n.CompetitionSubmission||
(n.CompetitionSubmission={}))}(ExperimentEditor||(ExperimentEditor={})),function(
n){var t;(function(t){var i=function(){function t(){}return t.prototype.runValidation=
function(t){if(!t.webServiceGroup.StagingWebService)return null;var i=n.CompetitionSubmission.
Utilities.getStagingWebServiceModelPackage(t.webServiceGroup);return!i.Inputs||i.
Inputs.length===0?{summary:DataLab.LocalizedResources.competitionSubmissionErrorWebServiceInputPortNotFound,
details:""}:null},t}();t.ValidationRuleOnWebServiceMissingInputPort=i})(t=n.CompetitionSubmission||
(n.CompetitionSubmission={}))}(ExperimentEditor||(ExperimentEditor={})),function(
n){var t;(function(t){var i=function(){function t(){}return t.prototype.runValidation=
function(t){var i,r,u;if(!DataLab.Features.competitionEntrySchemaValidationEnabled(
)||!t.webServiceSchema||(i=n.CompetitionSubmission.Utilities.getStagingWebServiceModelPackage(
t.webServiceGroup),!i.Inputs||!i.Outputs))return null;if(r=null,t.webServiceSchema.
InputSchema){if(i.Inputs&&i.Inputs.length!==0){if(i.Inputs.length>1)return{summary:
DataLab.LocalizedResources.competitionSubmissionErrorMultiInputPorts,details:""}}
else return{summary:DataLab.LocalizedResources.competitionSubmissionErrorMissingInput,
details:""};r=this.validateSchema(t.webServiceSchema.InputSchema,i.Inputs[0].Schema)}
if(u=null,t.webServiceSchema.OutputSchema){if(i.Outputs&&i.Outputs.length!==0){if(
i.Outputs.length>1)return{summary:DataLab.LocalizedResources.competitionSubmissionErrorMultiOutputPorts,
details:""}}else return{summary:DataLab.LocalizedResources.competitionSubmissionErrorMissingOutput,
details:""};u=this.validateSchema(t.webServiceSchema.OutputSchema,i.Outputs[0].Schema)}
return this.isValid(r)&&this.isValid(u)?null:{summary:DataLab.LocalizedResources.
competitionSubmissionErrorWrongSchema,details:this.toValidationDetails(r,u,t)}},
t.prototype.validateSchema=function(n,t){var i=_.indexBy(n,"Name"),r=this.parseWebServiceSchemaString(
t),u=_.filter(r,function(n){return!i[n.Name]}),f=_.filter(r,function(n){return i[
n.Name]&&i[n.Name].Type.toLowerCase()!==n.Type.toLowerCase()}),e=_.indexBy(r,"Name"),
o=_.filter(n,function(n){return!e[n.Name]});return{extraColumns:u,mistypedColumns:
f,missingColumns:o}},t.prototype.parseWebServiceSchemaString=function(n){var t=JSON.
parse(n);return _.map(t.columnAttributes,function(n){return{Name:n.name,Type:n.type}}
)},t.prototype.toValidationDetails=function(n,t,i){var r="",u=!this.isValid(n),o=
!this.isValid(t),f,e;return u&&(r+=DataLab.LocalizedResources.competitionSubmissionErrorInvalidInputHeader+
"\n",DataLab.Util.isEmpty(n.missingColumns)||(r+=DataLab.Util.format("    {0} {1}.\n",
DataLab.LocalizedResources.competitionSubmissionErrorMissingColumns,this.selectColumnNameAndTypes(
n.missingColumns).join(", "))),DataLab.Util.isEmpty(n.extraColumns)||(r+=DataLab.
Util.format("    {0} {1}.\n",DataLab.LocalizedResources.competitionSubmissionErrorExtraColumns,
this.selectColumnNameAndTypes(n.extraColumns).join(", "))),DataLab.Util.isEmpty(
n.mistypedColumns)||(f=_.indexBy(i.webServiceSchema.InputSchema,"Name"),DataLab.
Util.forEach(n.mistypedColumns,function(n){r+="    "+DataLab.Util.format(DataLab.
LocalizedResources.competitionSubmissionErrorMistypedColumns,n.Name,f[n.Name].Type,
n.Type)+"\n"}))),o&&(u&&(r+="\n"),r+=DataLab.LocalizedResources.competitionSubmissionErrorInvalidOutputHeader+
"\n",DataLab.Util.isEmpty(t.missingColumns)||(r+=DataLab.Util.format("    {0} {1}.\n",
DataLab.LocalizedResources.competitionSubmissionErrorMissingColumns,this.selectColumnNameAndTypes(
t.missingColumns).join(", "))),DataLab.Util.isEmpty(t.extraColumns)||(r+=DataLab.
Util.format("    {0} {1}.\n",DataLab.LocalizedResources.competitionSubmissionErrorExtraColumns,
this.selectColumnNameAndTypes(t.extraColumns).join(", "))),DataLab.Util.isEmpty(
t.mistypedColumns)||(e=_.indexBy(i.webServiceSchema.OutputSchema,"Name"),DataLab.
Util.forEach(t.mistypedColumns,function(n){r+="    "+DataLab.Util.format(DataLab.
LocalizedResources.competitionSubmissionErrorMistypedColumns,n.Name,e[n.Name].Type,
n.Type)+"\n"}))),r},t.prototype.isValid=function(n){return!n||DataLab.Util.isEmpty(
n.missingColumns)&&DataLab.Util.isEmpty(n.mistypedColumns)&&DataLab.Util.isEmpty(
n.extraColumns)},t.prototype.selectColumnNameAndTypes=function(n){return _.map(n,
function(n){return DataLab.Util.format("{0} ({1})",n.Name,n.Type)})},t}();t.ValidationRuleOnWebServiceSchema=
i})(t=n.CompetitionSubmission||(n.CompetitionSubmission={}))}(ExperimentEditor||
(ExperimentEditor={})),function(n){var t;(function(t){var i=function(){function t(
){}return t.prototype.runValidation=function(t){if(!t.webServiceGroup.StagingWebService)
return null;var i=n.CompetitionSubmission.Utilities.getStagingWebServiceModelPackage(
t.webServiceGroup);return!i.Outputs||i.Outputs.length===0?{summary:DataLab.LocalizedResources.
competitionSubmissionErrorWebServiceOutputPortNotFound,details:""}:null},t}();t.
ValidationRuleOnWebServiceMissingOutputPort=i})(t=n.CompetitionSubmission||(n.CompetitionSubmission=
{}))}(ExperimentEditor||(ExperimentEditor={})),function(n){"use strict";function at(
){ExperimentEditorTemplates.typescriptResourceVariables.forEach(function(n){var i=
t.ApplyLocalizationToHTMLResource(eval(n));eval(n+" = "+JSON.stringify(i))})}function vt(
n,r,u){var f,e;t.Performance.intervalStart("openexperiment");f=r.get(0);document.
querySelector("#tabcontainer .itemtitle").textContent="";i.applicationCache.allPrefetched(
)?(e=new DataLabViews.ExperimentView(f,u.name,i),e.open()):(Shell.UI.Spinner.show(
),w=i.applicationCache.allPrefetched.subscribe(function(n){if(n){Shell.UI.Spinner.
hide();var t=new DataLabViews.ExperimentView(f,u.name,i);t.open()}}))}function yt(
n,t,r){document.querySelector("#tabcontainer .itemtitle").textContent="";var u=new
DataLabViews.ExperimentLineageView(t,i,r.name);u.refreshFromService()}function pt(
n,t,r){var f=t.get(0),u=new DataLabViews.DataflowView(t,r.name,i);u.open()}function wt(
n,t,r){var u=new DataLabViews.WebServiceGroupConfigContainerViewModel(t,r.name,i);
u.open()}function bt(n,t,r){var u=new DataLabViews.WebServiceGroupDashboardView(
t,r.name,i);u.open()}function kt(n,t){k(n,t,"quickstarts","quickStart")}function dt(
n,t){k(n,t,"tutorials","tutorial")}function gt(n,t){k(n,t,"templates","template")}
function ni(n,u){t.Performance.intervalStart("sampleexperiments");var f=new DataLabViews.
ExperimentListView(u,i,r,s,null);f.refreshFromService()}function ti(n,u){t.Performance.
intervalStart("allexperiments");var f=new DataLabViews.AllExperimentsView(u,i,r,
s);f.refreshFromService()}function ii(n,u){t.Performance.intervalStart("allexperiments");
var f=new DataLabViews.ExperimentListView(u,i,r,s,"user");f.refreshFromService()}
function k(n,u,f,e){t.Performance.intervalStart(f);var o=new DataLabViews.ExperimentListView(
u,i,r,s,e);o.refreshFromService()}function ri(n,t){var i=new DataLabViews.DataflowListView(
t,r);i.refreshFromService()}function ui(n,t){var u=new DataLabViews.WebServiceGroupListView(
t,i,r);u.refreshFromService()}function fi(n,u){Shell.UI.Spinner.show();t.Util.whenTrue(
i.applicationCache.datasetsPrefetched).done(function(){Shell.UI.Spinner.hide();var
n=new DataLabViews.DatasetListView(u,i,r)})}function ei(n,u){Shell.UI.Spinner.show(
);t.Util.whenTrue(i.applicationCache.datasetsPrefetched).done(function(){Shell.UI.
Spinner.hide();var n=new DataLabViews.DatasetListView(u,i,r,{listSamples:!0})})}
function oi(n,u){Shell.UI.Spinner.show();t.Util.whenTrue(i.applicationCache.notebooksPrefetched).
done(function(){Shell.UI.Spinner.hide();var n=new DataLabViews.NotebookListView(
u,i,r);n.populateNotebookList()})}function si(n,u){Shell.UI.Spinner.show();t.Util.
whenTrue(i.applicationCache.projectsPrefetched).done(function(){Shell.UI.Spinner.
hide();var n=new DataLabViews.ProjectListViewModel(i,r),t=new DataLabViews.ProjectListView(
u,n)})}function hi(n,t,u){Shell.UI.Spinner.show();i.getProjectsAsync([u.name]).done(
function(n){var u=new DataLabViews.ProjectDetailViewModel(ko.observable(n[0]),i,
r),f=new DataLabViews.ProjectDetailView(t,u);Shell.UI.Spinner.hide()})}function ci(
n,u){Shell.UI.Spinner.show();t.Util.whenTrue(i.applicationCache.trainedModelsPrefetched).
done(function(){Shell.UI.Spinner.hide();var n=new DataLabViews.TrainedModelListView(
u,i,r)})}function li(n,t){var u=new ExperimentEditor.SSIMSearch.SearchView(t,r,i);
cdm.setActiveItem(u)}function ai(n,t){var i=new ExperimentEditor.DataImportsPivot(
r,t);cdm.setActiveItem(i);i.refreshFromService()}function vi(n,t){if(i.applicationCache.
modulesPrefetched()){var u=new DataLabViews.ModuleListView(t,i,r);u.populateModuleList(
)}else Shell.UI.Spinner.show(),b=i.applicationCache.modulesPrefetched.subscribe(
function(n){if(n){Shell.UI.Spinner.hide();var u=new DataLabViews.ModuleListView(
t,i,r);u.populateModuleList()}})}function d(n,t){var u=new ExperimentEditor.WorkspaceSettings(
r,i,t,!h);cdm.setActiveItem(u)}function yi(n,t){var i=new ExperimentEditor.UsersPivot(
r,t);cdm.setActiveItem(i);i.refreshFromService()}function pi(n,t){var r=new DataLabViews.
DataGatewaysView(i.getDataGatewayBackend(),t);cdm.setActiveItem(r);r.refreshFromService(
)}function wi(n,u){t.Performance.intervalStart("welcome");var f=new DataLabViews.
WelcomeView(r,i,u);cdm.setActiveItem(f);t.Performance.intervalEnd()}function bi(
n,r){t.Performance.intervalStart("recentexperiments");var u=new DataLabViews.RecentWorkView(
r,i);cdm.setActiveItem(u);u.refreshFromService()}function v(){return"Navigating away will cancel any existing uploads."}
function ki(){return t.Features.newCustomModuleUploadEnabled()?[{name:"UploadCustomModulePackageMenuItem",
displayName:t.LocalizedResources.uploadModuleFromZip,description:o.uploadModuleMenuDescription,
execute:function(){Exp.Drawer.close();t.showUploadCustomModulePackageDialog()},categories:
"Module"}]:[]}function di(){return t.Features.iPythonNotebookEnabled()&&t.Features.
notebookPlusNewEnabled()?[{name:"NewNotebookMenuItem",displayName:o.notebookPlusNewNotebookTitle,
description:o.notebookPlusNewNotebookDescription,execute:function(){t.Log.info("Open new notebook menu",
"NewNotebookMenuItem")},isPreviewFeature:!0}]:[]}function gi(){var n="NewProjectMenuItem";
return[{name:n,displayName:o.projectsPlusNewTitle,description:o.projectsPlusNewDescription,
execute:function(){t.Log.info("Create new project menu",n)},isPreviewFeature:!0}]}
function f(n,i){t.Log.featureUsage({featureID:n,groupID:t.Constants.FeatureId.TabNavigation});
i.setCommands(cdm.currentActiveItem,cdm.currentContext)}function e(){cdm.currentActiveItem&&
cdm.currentActiveItem.dispose&&cdm.currentActiveItem.dispose()}function nt(n,t){
var i=n.constructor.toString().slice(0,64);return _.forOwn(t,function(t,r){t.prototype&&
t.prototype.isPrototypeOf(n)&&(i=r)}),i}var t=n.DataLab,a,c;if(t===undefined)throw"DataLab client must be loaded before the DataLab extension";
t.applicationReady=!1;var o=n.Resources.getResources("Microsoft.MetaAnalytics.Web.ClientResources"),
u=0,tt=u++,it=u++,rt=u++,ut=u++,ft=u++,et=u++,ot=u++,st=u++,ht=u++,ct=u++,i=null,
r=null,g=n.environment.workspaceOwnershipLevel==="Owner",lt=n.environment.workspaceOwnershipLevel===
"Admin",h=g||lt,s,l,y=navigator.cookieEnabled||(document.cookie="test=0",document.
cookie.indexOf("test")>=0),p=null,w=null,b=null;t.Features.setIntegrationPoints(
n.environment.integrationPoints);t.Configuration.ClientConfiguration=n.environment.
clientConfiguration;ExperimentEditor.Community.galleryBaseUrl=n.environment.galleryBaseUrl;
ExperimentEditor.Community.catalogSearchBaseUri=n.environment.catalogSearchBaseUri;
ExperimentEditor.Community.catalogQueryBaseUri=n.environment.catalogQueryBaseUri;
ExperimentEditor.Community.activityServiceUrl=n.environment.activityServiceUrl;ExperimentEditor.
Community.multiGeoRegion=n.environment.multiGeoRegion;ExperimentEditor.Community.
multiGeoRegionsList=n.environment.multiGeoRegionsList;ExperimentEditor.Community.
msftAuthorId=n.environment.msftAuthorId;ExperimentEditor.Community.notebookSamplesCollectionId=
n.environment.notebookSamplesCollectionId;ExperimentEditor.CommunityStockImages.
init(n.environment.galleryStockImagesUrl);DataLabViews.azureMLDomainSuffix=n.environment.
azureMLDomainSuffix;t.ApplyLocalizationToHTMLResource=function(n){return n.replace(
/%([a-zA-Z0-9_]+)%/g,function(n,i){var r=t.LocalizedResources[i];return r||alert(
"Couldn't find localized resource: "+i+", perhaps there is syntax error in HTML template"),
r})};t.setWorkspaceContext=function(u,f,e,o){var h,c;r=new t.DataContract.Client(
u,f,o);r.serviceBaseAddress=n.environment.esServiceBaseUrl+"/api/";r.serviceBaseUrlForNotebookCreate=
n.environment.esServiceBaseUrl;h=new t.ApplicationCache(r);t.Model.CredentialStore.
initialize(r);at();ExperimentEditor.DialogViews.createViews();c=new t.DataContract.
WorkspaceBackend(r,r);t.User=new t.Model.User(e);g=t.User.isWorkspaceOwner;s=e.Name;
ExperimentEditor.ShellControls.initFeedbackControl();t.Features.chatSupportEnabled(
)&&ExperimentEditor.ShellControls.initChatControl();t.getExperimentHash=function(
n){return t.Util.format("#Workspaces/Experiments/Experiment/{0}.{1}/ViewExperiment",
u,n)};t.Log.setWorkspaceId(u);i=new t.Model.Workspace(c,h);i.setUserName(s);t.Workspace=
i;h.prefetch()};t.Features.enableFrictionFreeUserExperienceEnabled()&&(a=Shell.Utilities.
isLocalStorageAvailable(),t.setUser=function(n){l=n},t.isUserSettingsAvailable=function(
){return!!l&&(a||y)},t.setUserSetting=function(t,i){var u=l.UserId+"/"+t,r;a?n.localStorage.
setItem(u,i):y&&(r=new Date,r.setFullYear(r.getFullYear()+100),document.cookie=u+
"="+encodeURIComponent(i.toString())+";expires="+r.toUTCString())},t.getUserSetting=
function(t){var u=l.UserId+"/"+t,r=null,i;return a?r=n.localStorage.getItem(u):y&&
(i=document.cookie.match(new RegExp("(?:^|.*;)\\s*"+u+"\\s*\\=\\s*([^;]*).*$")),
i&&i.length===2&&(r=decodeURIComponent(i[1]))),r},t.setVisited=function(n){t.isUserSettingsAvailable(
)&&t.setUserSetting("visited",n?"true":"false")},t.checkIsFirstTimeVisit=function(
){t.isUserSettingsAvailable()&&(p=!1,n.environment&&n.environment.hasNoExperiments&&
(p=t.getUserSetting("visited")!=="true"))},t.isFirstTimeVisit=function(){return t.
isUserSettingsAvailable()?p:!1});c=0;t.showUploadDatasetDialog=function(){if(!t.
Trial.isDatasetUploadEnabled()){t.Log.featureUsage({featureID:t.Constants.FeatureId.
DisabledDatasetUpload,groupID:t.Constants.FeatureId.TrialFeature});ExperimentEditor.
showDisabledDatasetUploadDialog();return}var n=new ExperimentEditor.UploadDatasetDialogViewModel(
i);n.datasetUploadStartedEvent.subscribe(function(r){var f=n.dataset.name(),u=new
Shell.UI.Notifications.Progress(t.Util.format(t.LocalizedResources.uploadingNewDataset,
f),"active",!1);Shell.UI.Notifications.add(u);t.Log.featureUsage({featureID:t.Constants.
FeatureId.UploadDataset,groupID:0,data:n.dataset.dataType().dataTypeId});c++==0&&
window.addEventListener("beforeunload",v);r.done(function(n){u.setTitle(t.Util.format(
t.LocalizedResources.uploadingCompleted,n.name()));u.setStatus("success");u.setActions(
[Shell.UI.Notifications.Buttons.ok()])}).fail(function(n){if(t.Features.trialLimitationsEnabled(
)&&ExperimentEditor.tryShowDialogForTrialRestriction(n)){Shell.UI.Notifications.
remove(u);return}var i=t.Util.getErrorDetails(n);u.setTitle(t.Util.format(t.LocalizedResources.
uploadingFailed,i));u.setStatus("error");u.setActions([Shell.UI.Notifications.Buttons.
ok()])}).progress(function(n){n.lengthComputable&&u.setValue(n.loaded/n.total*100)}
).always(function(){u.setValue(100);i.datasetUploadsInProgress().splice(i.datasetUploadsInProgress(
).lastIndexOf(f,1));i.datasetUploadsInProgress.valueHasMutated();--c==0&&window.
removeEventListener("beforeunload",v)})});t.Util.whenTrue(i.applicationCache.datasetsPrefetched).
done(function(){Shell.UI.Spinner.hide();ExperimentEditor.DialogViews.UploadDataset.
show(n)})};t.showUploadCustomModulePackageDialog=function(){if(!t.Trial.isModuleUploadEnabled(
)){t.Log.featureUsage({featureID:t.Constants.FeatureId.DisabledModuleUpload,groupID:
t.Constants.FeatureId.TrialFeature});ExperimentEditor.showDisabledModuleUploadDialog(
);return}var n=new ExperimentEditor.UploadModuleDialogViewModel(i);n.modulePackageUploadStartedEvent.
subscribe(function(r){var f=n.zipFile.name(),u=new Shell.UI.Notifications.Progress(
t.Util.format(t.LocalizedResources.uploadingNewCustomModulePackage,f),"active",!1);
Shell.UI.Notifications.add(u);c++==0&&window.addEventListener("beforeunload",v);
r.done(function(n){n.splice(0,1)[0]==="Finished"?(u.setTitle(t.Util.format(t.LocalizedResources.
customModuleZipPackageCompleted,f,n.join(", "))),u.setStatus("success")):(u.setTitle(
t.Util.format(t.LocalizedResources.customModuleZipPackageFailed,f)),u.setDetailsText(
n[1]),u.setStatus("error"));u.setActions([Shell.UI.Notifications.Buttons.ok()])}
).fail(function(n){if(t.Features.trialLimitationsEnabled()&&ExperimentEditor.tryShowDialogForTrialRestriction(
n)){Shell.UI.Notifications.remove(u);return}var i=t.Util.getErrorDetails(n);u.setTitle(
t.Util.format(t.LocalizedResources.customModuleZipPackageFailed,i));u.setStatus(
"error");u.setActions([Shell.UI.Notifications.Buttons.ok()])}).progress(function(
n){n.lengthComputable&&u.setValue(n.loaded/n.total*100)}).always(function(){u.setValue(
100);i.customModulePackageUploadsInProgress().splice(i.customModulePackageUploadsInProgress(
).lastIndexOf(f,1));i.customModulePackageUploadsInProgress.valueHasMutated();--c==
0&&window.removeEventListener("beforeunload",v)})});i.applicationCache.datatypesPrefetched(
)?ExperimentEditor.DialogViews.UploadCustomModulePackage.show(n):(Shell.UI.Spinner.
show(),i.applicationCache.datatypesPrefetched.subscribe(function(t){t&&(Shell.UI.
Spinner.hide(),ExperimentEditor.DialogViews.UploadCustomModulePackage.show(n))}))}
;t.showNotificationForPendingUpload=function(n){var i=new Shell.UI.Notifications.
Progress(t.Util.format(t.LocalizedResources.uploadingNewDataset,n.name),"active",
!1);i.setValue(100);Shell.UI.Notifications.add(i);n.promise.done(function(n){i.setTitle(
t.Util.format(t.LocalizedResources.uploadingCompleted,n.name()));i.setStatus("success");
i.setActions([Shell.UI.Notifications.Buttons.ok()])}).fail(function(n){i.setTitle(
t.Util.format(t.LocalizedResources.uploadingFailed,n.toString()));i.setStatus("error");
i.setActions([Shell.UI.Notifications.Buttons.ok()])})};t.showNotificationsForPendingUploadsWhenReady=
function(){var r=!1,n=ko.computed(function(){i.applicationCache.datasetsPrefetched(
)&&(i.applicationCache.localPendingDatasets().forEach(function(n){t.showNotificationForPendingUpload(
n)}),r=!0,n&&(n.dispose(),n=null))});r&&n&&(n.dispose(),n=null)};t.Features.modulesListEnabled(
)&&Shell.extension({name:"Modules",displayName:t.LocalizedResources.modules,displayOrderHint:
ot,includeInAllView:!1,navigationalViewModelUri:"",viewModelUris:[],menuItems:ki(
),onNavigateTo:function(){f(t.Constants.FeatureId.ModulesTab,this)},onNavigateAway:
function(){e();b&&b.dispose()},initializePivots:function(){var n=[{id:"ListModules",
displayName:t.LocalizedResources.modules,template:"Grid",activated:vi},];Shell.UI.
Pivots.add(this.id,n);Shell.UI.Pivots.update(this.id)},setCommands:function(){Shell.
UI.Commands.clear()}});t.Features.enableFrictionFreeUserExperienceEnabled()||Shell.
extension({iconUri:fx.resources.getContentUrl("/Content/Home/home_40.png"),name:
"Home",displayName:t.LocalizedResources.homeExtensionDisplayName,displayOrderHint:
tt,includeInAllView:!1,navigationalViewModelUri:"",viewModelUris:[],onNavigateTo:
function(){f(t.Constants.FeatureId.HomeTab,this)},onNavigateAway:e,initializePivots:
function(){var n=[{id:"Welcome",displayName:t.LocalizedResources.welcomePivotDisplayName,
template:"Welcome",activated:wi}];Shell.UI.Pivots.add(this.id,n);Shell.UI.Pivots.
update(this.id)},setCommands:function(){Shell.UI.Commands.clear()}});t.Features.
enableAssetDeletionEnabled()&&t.Features.assetDeletionUiEnabled()&&Shell.extension(
{name:"Datasets",displayName:t.LocalizedResources.datasets,displayOrderHint:st,includeInAllView:
!1,navigationalViewModelUri:"",viewModelUris:[],menuItems:[],onNavigateTo:function(
){f(t.Constants.FeatureId.DatasetsTab,this)},onNavigateAway:e,initializePivots:function(
){var n=[{id:"ListDatasets",displayName:t.LocalizedResources.myDatasets,template:
"Grid",activated:fi},{id:"ListSampleDatasets",displayName:t.LocalizedResources.samples,
template:"Grid",activated:ei},{id:"SSIMSearch",displayName:t.LocalizedResources.
onlineSearch,template:"Search",activated:li,visible:t.Features.ssimSearchEnabled(
)},{id:"DataImports",displayName:t.LocalizedResources.dataImportStatus,template:
"Grid",activated:ai,visible:!1}];Shell.UI.Pivots.add(this.id,n);Shell.UI.Pivots.
update(this.id)},setCommands:function(n,i){if(Shell.UI.Commands.clear(),n&&n.setCommands&&
(i.viewPath==="ListDatasets"||i.viewPath==="ListSampleDatasets")&&n.setCommands(
),t.Features.ssimSearchEnabled()&&this.menuItems.push({name:"SearchDatasetMenuItem",
displayName:t.LocalizedResources.onlineSearch,description:o.onlineSearchMenuDescription,
isEnabled:function(){return!0},execute:function(){Shell.UI.Navigation.navigate({
extension:"Datasets",view:"SSIMSearch"})},categories:"Dataset"}),n&&i.viewPath===
"DataImports"){var r=new Shell.UI.Commands.Command(t.LocalizedResources.deleteDataImports,
Shell.UI.Icons.delete,n.removeDataImports.bind(n)),u=new Shell.UI.Commands.Command(
t.LocalizedResources.refresh,Shell.UI.Icons.sync,n.refreshFromService.bind(n));Shell.
UI.Commands.add([r,u]);n.setRemoveCommand(r)}}});h&&t.Features.iPythonNotebookEnabled(
)&&t.Features.notebookListEnabled()&&Shell.extension({name:"Notebooks",displayName:
o.notebookExtensionNotebookTitle,displayOrderHint:ft,includeInAllView:!1,iconUri:
"/Content/Notebooks/notebooks_40.png",navigationalViewModelUri:"",viewModelUris:
[],menuItems:di(),isBeta:!0,onNavigateTo:function(){f(t.Constants.FeatureId.NotebooksTab,
this)},onNavigateAway:e,initializePivots:function(){var n=[{id:"ListNotebooks",displayName:
"My Notebooks",template:"Grid",activated:oi}];Shell.UI.Pivots.add(this.id,n);Shell.
UI.Pivots.update(this.id)},setCommands:function(n,t){Shell.UI.Commands.clear();n&&
n.setCommands&&t.viewPath==="ListNotebooks"&&n.setCommands()}});t.Features.enableProjectBasedAssetsGroupingEnabled(
)&&Shell.extension({name:DataLabViews.projectsExtensionName,displayName:o.projectsExtensionTitle,
displayOrderHint:it,includeInAllView:!1,navigationalViewModelUri:"",viewModeUris:
[],menuItems:gi(),isBeta:!0,onNavigateTo:function(){f(t.Constants.FeatureId.ProjectsTab,
this)},onNavigateAway:e,initializePivots:function(){var n=[{id:"ListProjects",displayName:
"My Projects",activated:si},{id:"ProjectDetails",displayName:"Project Detail",navFilter:
DataLabViews.ProjectType.name,activated:hi}];Shell.UI.Pivots.add(this.id,n);Shell.
UI.Pivots.update(this.id)},setCommands:function(n,t){Shell.UI.Commands.clear();n&&
n.setCommands&&(t.viewPath==="ListProjects"||t.viewPath==="ProjectDetails")&&n.setCommands(
)}});Exp.TypeRegistry.add(DataLabViews.projectsExtensionName,[DataLabViews.ProjectType]);
t.Features.enableAssetDeletionEnabled()&&t.Features.trainedModelDeletionUiEnabled(
)&&Shell.extension({name:"TrainedModels",displayName:t.LocalizedResources.trainedModels,
displayOrderHint:ht,includeInAllView:!1,navigationalViewModelUri:"",viewModelUris:
[],menuItems:[],onNavigateTo:function(){f(t.Constants.FeatureId.TrainedModelsTab,
this)},onNavigateAway:e,initializePivots:function(){var n=[{id:"ListTrainedModels",
displayName:t.LocalizedResources.trainedModels,template:"Grid",activated:ci}];Shell.
UI.Pivots.add(this.id,n);Shell.UI.Pivots.update(this.id)},setCommands:function(n)
{Shell.UI.Commands.clear();n&&n.setCommands&&n.setCommands()}});t.Trial.isWorkspaceTypeAnonymous(
)||Shell.extension({name:"Settings",displayName:t.LocalizedResources.settings,displayOrderHint:
ct,includeInAllView:!1,navigationalViewModelUri:"",viewModelUris:[],onNavigateTo:
function(){f(t.Constants.FeatureId.SettingsTab,this)},onNavigateAway:e,initializePivots:
function(){var n=[{id:"Name",displayName:t.LocalizedResources.name,template:"NameTab",
activated:d},{id:"AuthTokens",displayName:t.LocalizedResources.authTokens,template:
"AuthTokensTab",activated:d,visible:h},{id:"Users",displayName:t.LocalizedResources.
users,template:"Grid",activated:yi,visible:h},{id:"Resources",displayName:t.LocalizedResources.
resources,template:"ResourcesTab",activated:d,visible:t.Features.configureYourOwnHdInsightEnabled(
)},];t.Features.dataGatewayEnabled()&&n.push({id:"dataGateways",displayName:t.LocalizedResources.
dataGateways,template:"DataGatewaysTab",activated:pi});Shell.UI.Pivots.add(this.
id,n);Shell.UI.Pivots.update(this.id)},setCommands:function(n,i){var r,u,o,f,e;Shell.
UI.Commands.clear();n&&h&&(i.viewPath==="Name"||i.viewPath==="Resources")&&(r=new
Shell.UI.Commands.Command(t.LocalizedResources.commandsSave,Shell.UI.Icons.save,
function(){return n.update()},null,!0),u=new Shell.UI.Commands.Command(t.LocalizedResources.
discard2,Shell.UI.Icons.undo,function(){return n.discard()},null,!0),Shell.UI.Commands.
add([r,u]),n.hasBeenEdited.subscribe(function(){r.setDisabled(!n.hasBeenEdited());
u.setDisabled(!n.hasBeenEdited())}));n&&i.viewPath==="Users"&&(o=new Shell.UI.Commands.
Command(t.LocalizedResources.inviteMoreUsers,Shell.UI.Icons.message,function(){return n.
launchInvitationDialog.call(n,"")}),f=new Shell.UI.Commands.Command(t.LocalizedResources.
remove,Shell.UI.Icons.delete,n.removeUsers.bind(n)),Shell.UI.Commands.add([o,f]),
n.setRemoveCommand(f));n&&i.viewPath==="Credentials"&&(e=new Shell.UI.Commands.Command(
t.LocalizedResources.deleteCredentials,Shell.UI.Icons.delete,n.removeCredentials.
bind(n)),Shell.UI.Commands.add([e]),n.setRemoveCommand(e));n&&i.viewPath==="dataGateways"&&
n.setCommands()}});Shell.extension({name:DataLabViews.experimentExtensionName,displayName:
t.LocalizedResources.experiments,displayOrderHint:rt,includeInAllView:!1,navigationalViewModelUri:
"",viewModelUris:[],menuItems:[{name:"NewExperimentMenuItem",displayName:t.LocalizedResources.
experiment,description:o.newExperimentMenuDescription,execute:function(){t.Features.
newExperimentFlowEnabled()||(DataLabViews.navigateToExperiment(DataLabViews.ExperimentType.
draftExperimentId),t.Log.info("Creating new experiment draft","NewExperimentMenuItem"))}
},],onNavigateTo:function(){f(t.Constants.FeatureId.ExperimentsTab,this)},onNavigateAway:
function(){e();w&&w.dispose()},onNavigating:t.Features.enableFrictionFreeUserExperienceEnabled(
)?function(n){var u=n.destination.hash,i=u.split("?",2),r;i.length===2&&(n.redirect(
i[0]),r=decodeURIComponent(i[1]),r!=="newExperiment=true"||t.isFirstTimeVisit()||
Shell.UI.Drawer.open())}:null,initializePivots:function(){var u={id:"RecentWork",
displayName:t.LocalizedResources.recentWorkPivotDisplayName,activated:bi},i={id:
"ListExperiments",displayName:t.LocalizedResources.allExperimentsPivotDisplayName,
activated:ti},r={id:"SampleExperiments",displayName:t.LocalizedResources.sampleExperimentsPivotDisplayName,
activated:ni,template:"Grid"},f={id:"ListExperiments",displayName:t.LocalizedResources.
listExperimentsPivotDisplayName,activated:ii,template:"Grid"},e={id:"QuickStartExperiments",
displayName:t.LocalizedResources.experimentListPivotQuickStarts,activated:kt,template:
"Grid"},o={id:"TutorialExperiments",displayName:t.LocalizedResources.experimentListPivotTutorials,
activated:dt,template:"Grid"},s={id:"TemplateExperiments",displayName:t.LocalizedResources.
experimentListPivotTemplates,activated:gt,template:"Grid"},n=[];t.Features.experimentListCategoriesEnabled(
)?n.push(i,e,o,s):t.Features.experimentalExperimentListEnabled()?n.push(i,r):n.push(
u,r,f);n.push({id:"ViewExperiment",displayName:t.LocalizedResources.viewExperiment,
template:"ExperimentEditor",navFilter:DataLabViews.ExperimentType.name,activated:
vt},{id:"ViewExperimentLineage",displayName:t.LocalizedResources.viewExperimentLineage,
template:"Grid",navFilter:DataLabViews.ExperimentLineageType.name,activated:yt});
Shell.UI.Pivots.add(this.id,n);Shell.UI.Pivots.update(this.id)},setCommands:function(
n,t){if(Shell.UI.Commands.clear(),n&&n.setCommands)if(n instanceof DataLabViews.
ExperimentView||n instanceof DataLabViews.ExperimentLineageView)n.setCommands();
else if(n instanceof DataLabViews.ExperimentListView||n instanceof DataLabViews.
AllExperimentsView)n.setCommands(t.viewPath);else{var i=nt(n,DataLabViews);throw new
Error("Attempted to set commands for unknown view (view-model = "+i+")");}}});Exp.
TypeRegistry.add(DataLabViews.experimentExtensionName,[DataLabViews.ExperimentType,
DataLabViews.ExperimentLineageType]);t.Features.dataflowsEnabled()&&Shell.extension(
{name:DataLabViews.dataflowExtensionName,displayName:t.LocalizedResources.dataflows,
displayOrderHint:et,includeInAllView:!1,navigationalViewModelUri:"",viewModelUris:
[],onNavigateTo:function(){f(t.Constants.FeatureId.DataflowsTab,this)},onNavigateAway:
e,initializePivots:function(){var n=[{id:"listDataflows",displayName:t.LocalizedResources.
dataflows,template:"Grid",activated:ri},{id:"viewDataflow",displayName:t.LocalizedResources.
viewDataflow,template:"DataflowViewer",navFilter:DataLabViews.DataflowType.name,
activated:pt}];Shell.UI.Pivots.add(this.id,n);Shell.UI.Pivots.update(this.id)},setCommands:
function(){Shell.UI.Commands.clear()}});Exp.TypeRegistry.add(DataLabViews.dataflowExtensionName,
[DataLabViews.DataflowType]);t.Trial.isWebServicePublishEnabled()&&Shell.extension(
{name:DataLabViews.webServiceGroupExtensionName,displayName:t.LocalizedResources.
webServiceGroupsTabTitle,displayOrderHint:ut,includeInAllView:!1,navigationalViewModelUri:
"",viewModelUris:[],onNavigateTo:function(){f(t.Constants.FeatureId.WebServicesTab,
this)},onNavigateAway:e,initializePivots:function(){var n=[{id:"listWebServiceGroups",
displayName:t.LocalizedResources.webServiceGroupsTabTitle,template:"Grid",activated:
ui},{id:"dashboard",displayName:t.LocalizedResources.webServiceGroupViewCommandTitle,
template:"DashboardTab",navFilter:DataLabViews.WebServiceGroupType.name,activated:
bt},{id:"configuration",displayName:t.LocalizedResources.webServiceGroupConfigurationTabTitle,
template:"ConfigurationTab",navFilter:DataLabViews.WebServiceGroupType.name,activated:
wt}];Shell.UI.Pivots.add(this.id,n);Shell.UI.Pivots.update(this.id)},setCommands:
function(n){if(Shell.UI.Commands.clear(),n&&n.setCommands)if(n instanceof DataLabViews.
WebServiceGroupListView||n instanceof DataLabViews.WebServiceGroupDashboardView||
n instanceof DataLabViews.WebServiceGroupConfigContainerViewModel)n.setCommands(
);else{var t=nt(n,DataLabViews);throw new Error("Attempted to set commands for unknown view (view-model = "+
t+")");}}});Exp.TypeRegistry.add(DataLabViews.webServiceGroupExtensionName,[DataLabViews.
WebServiceGroupType]);t.Log.unhandledExceptionEvent.subscribe(function(){var r=(
new Date).getTimezoneOffset()*6e4,u=new Date((new Date).getTime()+r),n,i;Shell.UI.
Spinner.hide();n=document.querySelector("#error-dialog-template").textContent;i=
function(){var n=$(".datalab-errorDialogFeedback-textarea").val();if(n!==""){var
i=$("#supportID").val(),r={isHappy:!1,src:"errorDialog",content:n+" - ActivityID = "+
i},u=JSON.stringify(r);t.Log.feedbackInfo(u,undefined)}};Shell.UI.DialogPresenter.
show({template:$.templates(n),data:{supportId:Shell.Environment.getPageRequestId(
)+" "+u.toString("u")},ok:function(){Shell.UI.Spinner.show();window.location.reload(
)},okOrClose:function(){i()},init:function(){var t=this.element.find(".datalab-errorDialogFeedback-textarea"),
i=this.element.find(".datalab-errorActivityId"),n=this.element.find(".text-area-toggle");
n.click(function(){t.toggleClass("hidden");i.toggleClass("hidden");n.toggleClass(
"down-arrow");n.toggleClass("up-arrow")})},zIndex:9e3})});t.Features.useClientTelemetryLoggingEnabled(
)?t.Log.setLogger({info:function(n,i,r){t.ClientTelemetryLogger.info(i,n,r)},error:
function(n,i,r){t.ClientTelemetryLogger.error(i,n,r)},warn:function(n,i,r){t.ClientTelemetryLogger.
warn(i,n,r)},verbose:function(n,i,r){t.ClientTelemetryLogger.verbose(i,n,r)},writeEntry:
function(n,i,r,u){t.ClientTelemetryLogger.writeEntry(n,i,r,u)},featureUsage:function(
n,i){t.ClientTelemetryLogger.featureUsage(n,i)},customEvent:function(n){t.ClientTelemetryLogger.
customEvent(n)},performance:function(n,i,r,u){t.ClientTelemetryLogger.performance(
n,i,r,u)},timerStart:function(n){t.ClientTelemetryLogger.timerStart(n)},timerStopAndLog:
function(n,i,r){t.ClientTelemetryLogger.timerStopAndLog(n,i,r)},feedbackInfo:function(
n,i){t.ClientTelemetryLogger.feedbackInfo(n,i)}}):t.Log.setLogger({info:function(
n,t,i){Shell.Diagnostics.Log.info(t,n,i)},error:function(n,t,i){Shell.Diagnostics.
Log.error(t,n,i)},warn:function(n,t,i){Shell.Diagnostics.Log.warning(t,n,i)},verbose:
function(n,t,i){Shell.Diagnostics.Log.verbose(t,n,i)},writeEntry:function(n,t,i,
r){Shell.Diagnostics.Log.writeEntry(n,t,i,r)},featureUsage:function(n,t){Shell.Diagnostics.
Telemetry.featureUsage(n.featureID,n.groupID,t,n.experimentID,n.moduleID,n.data)}
,customEvent:function(n){Shell.Diagnostics.Telemetry.customEvent(n.key,n.type,n.
data)},performance:function(n,t,i,r){Shell.Diagnostics.Telemetry.performance(n,t,
i,r)},timerStart:function(n){Shell.Diagnostics.Telemetry.timerStart(n)},timerStopAndLog:
function(n,t,i){Shell.Diagnostics.Telemetry.timerStopAndLog(n,t,i)},feedbackInfo:
function(n,t){Shell.Diagnostics.Telemetry.feedbackInfo(n,t)}});t.Log.traceUnhandledExceptions=
!0;ExperimentEditor.setDialogHost(new ExperimentEditor.AzureFxDialogHost)}(this);
/*! Javascript plotting library for jQuery, v. 0.7.
 *
 * Released under the MIT license by IOLA, December 2007.
 *
 */
(function(n){n.color={};n.color.make=function(t,i,r,u){var f={};return f.r=t||0,
f.g=i||0,f.b=r||0,f.a=u!=null?u:1,f.add=function(n,t){for(var i=0;i<n.length;++i)
f[n.charAt(i)]+=t;return f.normalize()},f.scale=function(n,t){for(var i=0;i<n.length;
++i)f[n.charAt(i)]*=t;return f.normalize()},f.toString=function(){return f.a>=1?
"rgb("+[f.r,f.g,f.b].join(",")+")":"rgba("+[f.r,f.g,f.b,f.a].join(",")+")"},f.normalize=
function(){function n(n,t,i){return t<n?n:t>i?i:t}return f.r=n(0,parseInt(f.r),255),
f.g=n(0,parseInt(f.g),255),f.b=n(0,parseInt(f.b),255),f.a=n(0,f.a,1),f},f.clone=
function(){return n.color.make(f.r,f.b,f.g,f.a)},f.normalize()};n.color.extract=
function(t,i){var r;do{if(r=t.css(i).toLowerCase(),r!=""&&r!="transparent")break;
t=t.parent()}while(!n.nodeName(t.get(0),"body"));return r=="rgba(0, 0, 0, 0)"&&(
r="transparent"),n.color.parse(r)};n.color.parse=function(i){var r,u=n.color.make,
f;return(r=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(
i))?u(parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10)):(r=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.
exec(i))?u(parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10),parseFloat(r[4])):
(r=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.
exec(i))?u(parseFloat(r[1])*2.55,parseFloat(r[2])*2.55,parseFloat(r[3])*2.55):(r=
/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.
exec(i))?u(parseFloat(r[1])*2.55,parseFloat(r[2])*2.55,parseFloat(r[3])*2.55,parseFloat(
r[4])):(r=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(i))?u(parseInt(
r[1],16),parseInt(r[2],16),parseInt(r[3],16)):(r=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.
exec(i))?u(parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16),parseInt(r[3]+r[3],16)):
(f=n.trim(i).toLowerCase(),f=="transparent"?u(255,255,255,0):(r=t[f]||[0,0,0],u(
r[0],r[1],r[2])))};var t={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],
black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],
darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,
107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:
[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:
[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],
lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:
[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:
[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],
pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,
192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery),function(n){function r(
r,u,f,e){function tt(n,t){t=[l].concat(t);for(var i=0;i<n.length;++i)n[i].apply(
this,t)}function oi(){for(var i,t=0;t<e.length;++t)i=e[t],i.init(l),i.options&&n.
extend(!0,o,i.options)}function si(t){var i,r;for(n.extend(!0,o,t),o.xaxis.color==
null&&(o.xaxis.color=o.grid.color),o.yaxis.color==null&&(o.yaxis.color=o.grid.color),
o.xaxis.tickColor==null&&(o.xaxis.tickColor=o.grid.tickColor),o.yaxis.tickColor==
null&&(o.yaxis.tickColor=o.grid.tickColor),o.grid.borderColor==null&&(o.grid.borderColor=
o.grid.color),o.grid.tickColor==null&&(o.grid.tickColor=n.color.parse(o.grid.color).
scale("a",.22).toString()),i=0;i<Math.max(1,o.xaxes.length);++i)o.xaxes[i]=n.extend(
!0,{},o.xaxis,o.xaxes[i]);for(i=0;i<Math.max(1,o.yaxes.length);++i)o.yaxes[i]=n.
extend(!0,{},o.yaxis,o.yaxes[i]);for(o.xaxis.noTicks&&o.xaxis.ticks==null&&(o.xaxis.
ticks=o.xaxis.noTicks),o.yaxis.noTicks&&o.yaxis.ticks==null&&(o.yaxis.ticks=o.yaxis.
noTicks),o.x2axis&&(o.xaxes[1]=n.extend(!0,{},o.xaxis,o.x2axis),o.xaxes[1].position=
"top"),o.y2axis&&(o.yaxes[1]=n.extend(!0,{},o.yaxis,o.y2axis),o.yaxes[1].position=
"right"),o.grid.coloredAreas&&(o.grid.markings=o.grid.coloredAreas),o.grid.coloredAreasColor&&
(o.grid.markingsColor=o.grid.coloredAreasColor),o.lines&&n.extend(!0,o.series.lines,
o.lines),o.points&&n.extend(!0,o.series.points,o.points),o.bars&&n.extend(!0,o.series.
bars,o.bars),o.shadowSize!=null&&(o.series.shadowSize=o.shadowSize),i=0;i<o.xaxes.
length;++i)ot(v,i+1).options=o.xaxes[i];for(i=0;i<o.yaxes.length;++i)ot(p,i+1).options=
o.yaxes[i];for(r in k)o.hooks[r]&&o.hooks[r].length&&(k[r]=k[r].concat(o.hooks[r]));
tt(k.processOptions,[o])}function lt(n){c=hi(n);li();ai()}function hi(t){for(var
r,u=[],i=0;i<t.length;++i)r=n.extend(!0,{},o.series),t[i].data!=null?(r.data=t[i].
data,delete t[i].data,n.extend(!0,r,t[i]),t[i].data=r.data):r.data=t[i],u.push(r);
return u}function et(n,t){var i=n[t+"axis"];return typeof i=="object"&&(i=i.n),typeof
i!="number"&&(i=1),i}function ut(){return n.grep(v.concat(p),function(n){return n}
)}function at(n){for(var i={},t,r=0;r<v.length;++r)t=v[r],t&&t.used&&(i["x"+t.n]=
t.c2p(n.left));for(r=0;r<p.length;++r)t=p[r],t&&t.used&&(i["y"+t.n]=t.c2p(n.top));
return i.x1!==undefined&&(i.x=i.x1),i.y1!==undefined&&(i.y=i.y1),i}function ci(n)
{for(var u={},t,i,r=0;r<v.length;++r)if(t=v[r],t&&t.used&&(i="x"+t.n,n[i]==null&&
t.n==1&&(i="x"),n[i]!=null)){u.left=t.p2c(n[i]);break}for(r=0;r<p.length;++r)if(
t=p[r],t&&t.used&&(i="y"+t.n,n[i]==null&&t.n==1&&(i="y"),n[i]!=null)){u.top=t.p2c(
n[i]);break}return u}function ot(t,i){return t[i-1]||(t[i-1]={n:i,direction:t==v?
"x":"y",options:n.extend(!0,{},t==v?o.xaxis:o.yaxis)}),t[i-1]}function li(){for(
var u=c.length,b=[],s=[],f,r,e,h,w,l,i,a,y,t=0;t<c.length;++t)f=c[t].color,f!=null&&
(--u,typeof f=="number"?s.push(f):b.push(n.color.parse(c[t].color)));for(t=0;t<s.
length;++t)u=Math.max(u,s[t]+1);for(r=[],e=0,t=0;r.length<u;)h=o.colors.length==
t?n.color.make(100,100,100):n.color.parse(o.colors[t]),w=e%2==1?-1:1,h.scale("rgb",
1+w*Math.ceil(e/2)*.2),r.push(h),++t,t>=o.colors.length&&(t=0,++e);for(l=0,t=0;t<
c.length;++t){if(i=c[t],i.color==null?(i.color=r[l].toString(),++l):typeof i.color==
"number"&&(i.color=r[i.color].toString()),i.lines.show==null){y=!0;for(a in i)if(
i[a]&&i[a].show){y=!1;break}y&&(i.lines.show=!0)}i.xaxis=ot(v,et(i,"x"));i.yaxis=
ot(p,et(i,"y"))}}function ai(){function w(n,t,i){t<n.datamin&&t!=-a&&(n.datamin=
t);i>n.datamax&&i!=a&&(n.datamax=i)}var y=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,
a=Number.MAX_VALUE,f,l,e,r,t,u,s,i,h,rt,ft,o,b,v;for(n.each(ut(),function(n,t){t.
datamin=y;t.datamax=p;t.used=!1}),f=0;f<c.length;++f)t=c[f],t.datapoints={points:
[]},tt(k.processRawData,[t,t.data,t.datapoints]);for(f=0;f<c.length;++f)if(t=c[f],
ft=t.data,o=t.datapoints.format,o||(o=[],o.push({x:!0,number:!0,required:!0}),o.
push({y:!0,number:!0,required:!0}),(t.bars.show||t.lines.show&&t.lines.fill)&&(o.
push({y:!0,number:!0,required:!1,defaultValue:0}),t.bars.horizontal&&(delete o[o.
length-1].y,o[o.length-1].x=!0)),t.datapoints.format=o),t.datapoints.pointsize==
null)for(t.datapoints.pointsize=o.length,s=t.datapoints.pointsize,u=t.datapoints.
points,insertSteps=t.lines.show&&t.lines.steps,t.xaxis.used=t.yaxis.used=!0,l=e=
0;l<ft.length;++l,e+=s){if(rt=ft[l],b=rt==null,!b)for(r=0;r<s;++r)i=rt[r],h=o[r],
h&&(h.number&&i!=null&&(i=+i,isNaN(i)?i=null:i==Infinity?i=a:i==-Infinity&&(i=-a)),
i==null&&(h.required&&(b=!0),h.defaultValue!=null&&(i=h.defaultValue))),u[e+r]=i;
if(b)for(r=0;r<s;++r)i=u[e+r],i!=null&&(h=o[r],h.x&&w(t.xaxis,i,i),h.y&&w(t.yaxis,
i,i)),u[e+r]=null;else if(insertSteps&&e>0&&u[e-s]!=null&&u[e-s]!=u[e]&&u[e-s+1]!=
u[e+1]){for(r=0;r<s;++r)u[e+s+r]=u[e+r];u[e+1]=u[e-s+1];e+=s}}for(f=0;f<c.length;
++f)t=c[f],tt(k.processDatapoints,[t,t.datapoints]);for(f=0;f<c.length;++f){t=c[
f];u=t.datapoints.points;s=t.datapoints.pointsize;var d=y,g=y,nt=p,it=p;for(l=0;
l<u.length;l+=s)if(u[l]!=null)for(r=0;r<s;++r)(i=u[l+r],h=o[r],h&&i!=a&&i!=-a)&&
(h.x&&(i<d&&(d=i),i>nt&&(nt=i)),h.y&&(i<g&&(g=i),i>it&&(it=i)));t.bars.show&&(v=
t.bars.align=="left"?0:-t.bars.barWidth/2,t.bars.horizontal?(g+=v,it+=v+t.bars.barWidth):
(d+=v,nt+=v+t.bars.barWidth));w(t.xaxis,d,nt);w(t.yaxis,g,it)}n.each(ut(),function(
n,t){t.datamin==y&&(t.datamin=null);t.datamax==p&&(t.datamax=null)})}function vt(
t,i){var u=document.createElement("canvas");return u.className=i,u.width=y,u.height=
w,t||n(u).css({position:"absolute",left:0,top:0}),n(u).appendTo(r),u.getContext||
(u=window.G_vmlCanvasManager.initElement(u)),u.getContext("2d").save(),u}function yt(
){if(y=r.width(),w=r.height(),y<=0||w<=0)throw"Invalid dimensions for plot, width = "+
y+", height = "+w;}function pt(n){n.width!=y&&(n.width=y);n.height!=w&&(n.height=
w);var t=n.getContext("2d");t.restore();t.save()}function vi(){var t,i=r.children(
"canvas.base"),u=r.children("canvas.overlay");i.length==0||u==0?(r.html(""),r.css(
{padding:0}),r.css("position")=="static"&&r.css("position","relative"),yt(),it=vt(
!0,"base"),rt=vt(!1,"overlay"),t=!1):(it=i.get(0),rt=u.get(0),t=!0);s=it.getContext(
"2d");a=rt.getContext("2d");b=n([rt,it]);t&&(r.data("plot").shutdown(),l.resize(
),a.clearRect(0,0,y,w),b.unbind(),r.children().not([it,rt]).remove());r.data("plot",
l)}function yi(){o.grid.hoverable&&(b.mousemove(ni),b.mouseleave(ti));o.grid.clickable&&
b.click(ii);tt(k.bindEvents,[b])}function pi(){ft&&clearTimeout(ft);b.unbind("mousemove",
ni);b.unbind("mouseleave",ti);b.unbind("click",ii);tt(k.shutdown,[b])}function wi(
n){function u(n){return n}var i,r,t=n.options.transform||u,f=n.options.inverseTransform;
n.direction=="x"?(i=n.scale=nt/Math.abs(t(n.max)-t(n.min)),r=Math.min(t(n.max),t(
n.min))):(i=n.scale=d/Math.abs(t(n.max)-t(n.min)),i=-i,r=Math.max(t(n.max),t(n.min)));
n.p2c=t==u?function(n){return(n-r)*i}:function(n){return(t(n)-r)*i};n.c2p=f?function(
n){return f(r+n/i)}:function(n){return r+n/i}}function bi(t){function l(i,u){return n(
'<div style="position:absolute;top:-10000px;'+u+'font-size:smaller"><div class="'+
t.direction+"Axis "+t.direction+t.n+'Axis">'+i.join("")+"<\/div><\/div>").appendTo(
r)}var c=t.options,u,s=t.ticks||[],f=[],h,i=c.labelWidth,e=c.labelHeight,o;if(t.
direction=="x"){if(i==null&&(i=Math.floor(y/(s.length>0?s.length:1))),e==null){for(
f=[],u=0;u<s.length;++u)h=s[u].label,h&&f.push('<div class="tickLabel" style="float:left;width:'+
i+'px">'+h+"<\/div>");f.length>0&&(f.push('<div style="clear:left"><\/div>'),o=l(
f,"width:10000px;"),e=o.height(),o.remove())}}else if(i==null||e==null){for(u=0;
u<s.length;++u)h=s[u].label,h&&f.push('<div class="tickLabel">'+h+"<\/div>");f.length>
0&&(o=l(f,""),i==null&&(i=o.children().width()),e==null&&(e=o.find("div.tickLabel").
height()),o.remove())}i==null&&(i=0);e==null&&(e=0);t.labelWidth=i;t.labelHeight=
e}function ki(t){var u=t.labelWidth,f=t.labelHeight,e=t.options.position,i=t.options.
tickLength,r=o.grid.axisMargin,s=o.grid.labelMargin,l=t.direction=="x"?v:p,a=n.grep(
l,function(n){return n&&n.options.position==e&&n.reserveSpace}),b,c;n.inArray(t,
a)==a.length-1&&(r=0);i==null&&(i="full");b=n.grep(l,function(n){return n&&n.reserveSpace}
);c=n.inArray(t,b)==0;c||i!="full"||(i=5);isNaN(+i)||(s+=+i);t.direction=="x"?(f+=
s,e=="bottom"?(h.bottom+=f+r,t.box={top:w-h.bottom,height:f}):(t.box={top:h.top+
r,height:f},h.top+=f+r)):(u+=s,e=="left"?(t.box={left:h.left+r,width:u},h.left+=
u+r):(h.right+=u+r,t.box={left:y-h.right,width:u}));t.position=e;t.tickLength=i;
t.box.padding=s;t.innermost=c}function di(n){n.direction=="x"?(n.box.left=h.left,
n.box.width=nt):(n.box.top=h.top,n.box.height=d)}function wt(){var t,u=ut(),i,r;
if(n.each(u,function(n,t){t.show=t.options.show;t.show==null&&(t.show=t.used);t.
reserveSpace=t.show||t.options.reserveSpace;gi(t)}),allocatedAxes=n.grep(u,function(
n){return n.reserveSpace}),h.left=h.right=h.top=h.bottom=0,o.grid.show){for(n.each(
allocatedAxes,function(n,t){nr(t);tr(t);ir(t,t.ticks);bi(t)}),t=allocatedAxes.length-
1;t>=0;--t)ki(allocatedAxes[t]);if(i=o.grid.minBorderMargin,i==null)for(i=0,t=0;
t<c.length;++t)i=Math.max(i,c[t].points.radius+c[t].points.lineWidth/2);for(r in
h)h[r]+=o.grid.borderWidth,h[r]=Math.max(i,h[r])}nt=y-h.left-h.right;d=w-h.bottom-
h.top;n.each(u,function(n,t){wi(t)});o.grid.show&&(n.each(allocatedAxes,function(
n,t){di(t)}),ur());hr()}function gi(n){var t=n.options,r=+(t.min!=null?t.min:n.datamin)
,i=+(t.max!=null?t.max:n.datamax),f=i-r,e,u;f==0?(e=i==0?1:.01,t.min==null&&(r-=
e),(t.max==null||t.min!=null)&&(i+=e)):(u=t.autoscaleMargin,u!=null&&(t.min==null&&
(r-=f*u,r<0&&n.datamin!=null&&n.datamin>=0&&(r=0)),t.max==null&&(i+=f*u,i>0&&n.datamax!=
null&&n.datamax<=0&&(i=0))));n.min=r;n.max=i}function nr(i){var r=i.options,rt,l,
f,b,nt,tt,k,o,e,c,a,h,d,it,g;if(rt=typeof r.ticks=="number"&&r.ticks>0?r.ticks:.3*
Math.sqrt(i.direction=="x"?y:w),l=(i.max-i.min)/rt,r.mode=="time"){var u={second:
1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,year:365.2425*864e5},s=[[1,"second"],
[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],
[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],
[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],
[2,"month"],[3,"month"],[6,"month"],[1,"year"]],ut=0;for(r.minTickSize!=null&&(ut=
typeof r.tickSize=="number"?r.tickSize:r.minTickSize[0]*u[r.minTickSize[1]]),e=0;
e<s.length-1;++e)if(l<(s[e][0]*u[s[e][1]]+s[e+1][0]*u[s[e+1][1]])/2&&s[e][0]*u[s[
e][1]]>=ut)break;f=s[e][0];nt=s[e][1];nt=="year"&&(k=Math.pow(10,Math.floor(Math.
log(l/u.year)/Math.LN10)),o=l/u.year/k,f=(o<1.5?1:o<3?2:o<7.5?5:10)*k);i.tickSize=
r.tickSize||[f,nt];b=function(n){var h=[],r=n.tickSize[0],f=n.tickSize[1],i=new Date(
n.min),o=r*u[f],s,e,c,l,a;f=="second"&&i.setUTCSeconds(t(i.getUTCSeconds(),r));f==
"minute"&&i.setUTCMinutes(t(i.getUTCMinutes(),r));f=="hour"&&i.setUTCHours(t(i.getUTCHours(
),r));f=="month"&&i.setUTCMonth(t(i.getUTCMonth(),r));f=="year"&&i.setUTCFullYear(
t(i.getUTCFullYear(),r));i.setUTCMilliseconds(0);o>=u.minute&&i.setUTCSeconds(0);
o>=u.hour&&i.setUTCMinutes(0);o>=u.day&&i.setUTCHours(0);o>=u.day*4&&i.setUTCDate(
1);o>=u.year&&i.setUTCMonth(0);s=0;e=Number.NaN;do c=e,e=i.getTime(),h.push(e),f==
"month"?r<1?(i.setUTCDate(1),l=i.getTime(),i.setUTCMonth(i.getUTCMonth()+1),a=i.
getTime(),i.setTime(e+s*u.hour+(a-l)*r),s=i.getUTCHours(),i.setUTCHours(0)):i.setUTCMonth(
i.getUTCMonth()+r):f=="year"?i.setUTCFullYear(i.getUTCFullYear()+r):i.setTime(e+
o);while(e<n.max&&e!=c);return h};tt=function(t,i){var o=new Date(t);if(r.timeformat!=
null)return n.plot.formatDate(o,r.timeformat,r.monthNames);var f=i.tickSize[0]*u[
i.tickSize[1]],s=i.max-i.min,e=r.twelveHourClock?" %p":"";return fmt=f<u.minute?
"%h:%M:%S"+e:f<u.day?s<2*u.day?"%h:%M"+e:"%b %d %h:%M"+e:f<u.month?"%b %d":f<u.year?
s<u.year?"%b":"%b %y":"%y",n.plot.formatDate(o,fmt,r.monthNames)}}else c=r.tickDecimals,
a=-Math.floor(Math.log(l)/Math.LN10),c!=null&&a>c&&(a=c),k=Math.pow(10,-a),o=l/k,
o<1.5?f=1:o<3?(f=2,o>2.25&&(c==null||a+1<=c)&&(f=2.5,++a)):f=o<7.5?5:10,f*=k,r.minTickSize!=
null&&f<r.minTickSize&&(f=r.minTickSize),i.tickDecimals=Math.max(0,c!=null?c:a),
i.tickSize=r.tickSize||f,b=function(n){var r=[],e=t(n.min,n.tickSize),u=0,i=Number.
NaN,f;do f=i,i=e+u*n.tickSize,r.push(i),++u;while(i<n.max&&i!=f);return r},tt=function(
n,t){return n.toFixed(t.tickDecimals)};r.alignTicksWithAxis!=null&&(h=(i.direction==
"x"?v:p)[r.alignTicksWithAxis-1],h&&h.used&&h!=i&&(d=b(i),d.length>0&&(r.min==null&&
(i.min=Math.min(i.min,d[0])),r.max==null&&d.length>1&&(i.max=Math.max(i.max,d[d.
length-1]))),b=function(n){for(var r=[],t,i=0;i<h.ticks.length;++i)t=(h.ticks[i].
v-h.min)/(h.max-h.min),t=n.min+t*(n.max-n.min),r.push(t);return r},i.mode!="time"&&
r.tickDecimals==null&&(it=Math.max(0,-Math.floor(Math.log(l)/Math.LN10)+1),g=b(i),
g.length>1&&/\..*0$/.test((g[1]-g[0]).toFixed(it))||(i.tickDecimals=it))));i.tickGenerator=
b;i.tickFormatter=n.isFunction(r.tickFormatter)?function(n,t){return""+r.tickFormatter(
n,t)}:tt}function tr(t){var i=t.options.ticks,e=[],o,u,f,r;for(i==null||typeof i==
"number"&&i>0?e=t.tickGenerator(t):i&&(e=n.isFunction(i)?i({min:t.min,max:t.max}):
i),t.ticks=[],o=0;o<e.length;++o)f=null,r=e[o],typeof r=="object"?(u=+r[0],r.length>
1&&(f=r[1])):u=+r,f==null&&(f=t.tickFormatter(u,t)),isNaN(u)||t.ticks.push({v:u,
label:f})}function ir(n,t){n.options.autoscaleMargin&&t.length>0&&(n.options.min==
null&&(n.min=Math.min(n.min,t[0].v)),n.options.max==null&&t.length>1&&(n.max=Math.
max(n.max,t[t.length-1].v)))}function bt(){var n,t;for(s.clearRect(0,0,y,w),n=o.
grid,n.show&&n.backgroundColor&&rr(),n.show&&!n.aboveData&&dt(),t=0;t<c.length;++t)
tt(k.drawSeries,[s,c[t]]),fr(c[t]);tt(k.draw,[s]);n.show&&n.aboveData&&dt()}function kt(
n,t){var e,r,u,f,o=ut(),s;for(i=0;i<o.length;++i)if(e=o[i],e.direction==t&&(f=t+
e.n+"axis",n[f]||e.n!=1||(f=t+"axis"),n[f])){r=n[f].from;u=n[f].to;break}return n[
f]||(e=t=="x"?v[0]:p[0],r=n[t+"1"],u=n[t+"2"]),r!=null&&u!=null&&r>u&&(s=r,r=u,u=
s),{from:r,to:u,axis:e}}function rr(){s.save();s.translate(h.left,h.top);s.fillStyle=
ei(o.grid.backgroundColor,d,0,"rgba(255, 255, 255, 0)");s.fillRect(0,0,nt,d);s.restore(
)}function dt(){var c,p,u,a,g,b;if(s.save(),s.translate(h.left,h.top),p=o.grid.markings,
p)for(n.isFunction(p)&&(u=l.getAxes(),u.xmin=u.xaxis.min,u.xmax=u.xaxis.max,u.ymin=
u.yaxis.min,u.ymax=u.yaxis.max,p=p(u)),c=0;c<p.length;++c){var k=p[c],t=kt(k,"x"),
i=kt(k,"y");(t.from==null&&(t.from=t.axis.min),t.to==null&&(t.to=t.axis.max),i.from==
null&&(i.from=i.axis.min),i.to==null&&(i.to=i.axis.max),t.to<t.axis.min||t.from>
t.axis.max||i.to<i.axis.min||i.from>i.axis.max)||(t.from=Math.max(t.from,t.axis.
min),t.to=Math.min(t.to,t.axis.max),i.from=Math.max(i.from,i.axis.min),i.to=Math.
min(i.to,i.axis.max),t.from!=t.to||i.from!=i.to)&&(t.from=t.axis.p2c(t.from),t.to=
t.axis.p2c(t.to),i.from=i.axis.p2c(i.from),i.to=i.axis.p2c(i.to),t.from==t.to||i.
from==i.to?(s.beginPath(),s.strokeStyle=k.color||o.grid.markingsColor,s.lineWidth=
k.lineWidth||o.grid.markingsLineWidth,s.moveTo(t.from,i.from),s.lineTo(t.to,i.to),
s.stroke()):(s.fillStyle=k.color||o.grid.markingsColor,s.fillRect(t.from,i.to,t.
to-t.from,i.from-i.to)))}for(u=ut(),a=o.grid.borderWidth,g=0;g<u.length;++g){var
r=u[g],tt=r.box,w=r.tickLength,f,e,v,y;if(r.show&&r.ticks.length!=0){for(s.strokeStyle=
r.options.tickColor||n.color.parse(r.options.color).scale("a",.22).toString(),s.
lineWidth=1,r.direction=="x"?(f=0,e=w=="full"?r.position=="top"?0:d:tt.top-h.top+
(r.position=="top"?tt.height:0)):(e=0,f=w=="full"?r.position=="left"?0:nt:tt.left-
h.left+(r.position=="left"?tt.width:0)),r.innermost||(s.beginPath(),v=y=0,r.direction==
"x"?v=nt:y=d,s.lineWidth==1&&(f=Math.floor(f)+.5,e=Math.floor(e)+.5),s.moveTo(f,
e),s.lineTo(f+v,e+y),s.stroke()),s.beginPath(),c=0;c<r.ticks.length;++c)(b=r.ticks[
c].v,v=y=0,b<r.min||b>r.max||w=="full"&&a>0&&(b==r.min||b==r.max))||(r.direction==
"x"?(f=r.p2c(b),y=w=="full"?-d:w,r.position=="top"&&(y=-y)):(e=r.p2c(b),v=w=="full"?
-nt:w,r.position=="left"&&(v=-v)),s.lineWidth==1&&(r.direction=="x"?f=Math.floor(
f)+.5:e=Math.floor(e)+.5),s.moveTo(f,e),s.lineTo(f+v,e+y));s.stroke()}}a&&(s.lineWidth=
a,s.strokeStyle=o.grid.borderColor,s.strokeRect(-a/2,-a/2,nt+a,d+a));s.restore()}
function ur(){var f,c,o,n,t,e,u,i,s,l,a;for(r.find(".tickLabels").remove(),f=['<div class="tickLabels" style="font-size:smaller">'],
c=ut(),o=0;o<c.length;++o)if(n=c[o],t=n.box,n.show){for(f.push('<div class="'+n.
direction+"Axis "+n.direction+n.n+'Axis" style="color:'+n.options.color+'">'),e=
0;e<n.ticks.length;++e)if(u=n.ticks[e],u.label&&!(u.v<n.min)&&!(u.v>n.max)){i={};
n.direction=="x"?(s="center",i.left=Math.round(h.left+n.p2c(u.v)-n.labelWidth/2),
n.position=="bottom"?i.top=t.top+t.padding:i.bottom=w-(t.top+t.height-t.padding)):
(i.top=Math.round(h.top+n.p2c(u.v)-n.labelHeight/2),n.position=="left"?(i.right=
y-(t.left+t.width-t.padding),s="right"):(i.left=t.left+t.padding,s="left"));i.width=
e>=n.ticks.length-2?n.labelWidth/2:n.labelWidth;l=["position:absolute","text-align:"+
s];for(a in i)l.push(a+":"+i[a]+"px");f.push('<div class="tickLabel" style="'+l.
join(";")+'">'+u.label+"<\/div>")}f.push("<\/div>")}f.push("<\/div>");r.append(f.
join(""))}function fr(n){n.lines.show&&er(n);n.bars.show&&sr(n);n.points.show&&or(
n)}function er(n){function u(n,t,i,r,u){var l=n.points,a=n.pointsize,v=null,y=null,
c;for(s.beginPath(),c=a;c<l.length;c+=a){var f=l[c-a],e=l[c-a+1],o=l[c],h=l[c+1];
if(f!=null&&o!=null){if(e<=h&&e<u.min){if(h<u.min)continue;f=(u.min-e)/(h-e)*(o-
f)+f;e=u.min}else if(h<=e&&h<u.min){if(e<u.min)continue;o=(u.min-e)/(h-e)*(o-f)+
f;h=u.min}if(e>=h&&e>u.max){if(h>u.max)continue;f=(u.max-e)/(h-e)*(o-f)+f;e=u.max}
else if(h>=e&&h>u.max){if(e>u.max)continue;o=(u.max-e)/(h-e)*(o-f)+f;h=u.max}if(
f<=o&&f<r.min){if(o<r.min)continue;e=(r.min-f)/(o-f)*(h-e)+e;f=r.min}else if(o<=
f&&o<r.min){if(f<r.min)continue;h=(r.min-f)/(o-f)*(h-e)+e;o=r.min}if(f>=o&&f>r.max)
{if(o>r.max)continue;e=(r.max-f)/(o-f)*(h-e)+e;f=r.max}else if(o>=f&&o>r.max){if(
f>r.max)continue;h=(r.max-f)/(o-f)*(h-e)+e;o=r.max}(f!=v||e!=y)&&s.moveTo(r.p2c(
f)+t,u.p2c(e)+i);v=o;y=h;s.lineTo(r.p2c(o)+t,u.p2c(h)+i)}}s.stroke()}function e(
n,t,i){for(var c=n.points,o=n.pointsize,b=Math.min(Math.max(0,i.min),i.max),h=0,
l=!1,a=1,p=0,w=0,v,y;;){if(o>0&&h>c.length+o)break;h+=o;var r=c[h-o],u=c[h-o+a],
f=c[h],e=c[h+a];if(l){if(o>0&&r!=null&&f==null){w=h;o=-o;a=2;continue}if(o<0&&h==
p+o){s.fill();l=!1;o=-o;a=1;h=p=w+o;continue}}if(r!=null&&f!=null){if(r<=f&&r<t.
min){if(f<t.min)continue;u=(t.min-r)/(f-r)*(e-u)+u;r=t.min}else if(f<=r&&f<t.min)
{if(r<t.min)continue;e=(t.min-r)/(f-r)*(e-u)+u;f=t.min}if(r>=f&&r>t.max){if(f>t.
max)continue;u=(t.max-r)/(f-r)*(e-u)+u;r=t.max}else if(f>=r&&f>t.max){if(r>t.max)
continue;e=(t.max-r)/(f-r)*(e-u)+u;f=t.max}if(l||(s.beginPath(),s.moveTo(t.p2c(r),
i.p2c(b)),l=!0),u>=i.max&&e>=i.max){s.lineTo(t.p2c(r),i.p2c(i.max));s.lineTo(t.p2c(
f),i.p2c(i.max));continue}else if(u<=i.min&&e<=i.min){s.lineTo(t.p2c(r),i.p2c(i.
min));s.lineTo(t.p2c(f),i.p2c(i.min));continue}v=r;y=f;u<=e&&u<i.min&&e>=i.min?(
r=(i.min-u)/(e-u)*(f-r)+r,u=i.min):e<=u&&e<i.min&&u>=i.min&&(f=(i.min-u)/(e-u)*(f-
r)+r,e=i.min);u>=e&&u>i.max&&e<=i.max?(r=(i.max-u)/(e-u)*(f-r)+r,u=i.max):e>=u&&
e>i.max&&u<=i.max&&(f=(i.max-u)/(e-u)*(f-r)+r,e=i.max);r!=v&&s.lineTo(t.p2c(v),i.
p2c(u));s.lineTo(t.p2c(r),i.p2c(u));s.lineTo(t.p2c(f),i.p2c(e));f!=y&&(s.lineTo(
t.p2c(f),i.p2c(e)),s.lineTo(t.p2c(y),i.p2c(e)))}}}var t,i,r,f;s.save();s.translate(
h.left,h.top);s.lineJoin="round";t=n.lines.lineWidth;i=n.shadowSize;t>0&&i>0&&(s.
lineWidth=i,s.strokeStyle="rgba(0,0,0,0.1)",r=Math.PI/18,u(n.datapoints,Math.sin(
r)*(t/2+i/2),Math.cos(r)*(t/2+i/2),n.xaxis,n.yaxis),s.lineWidth=i/2,u(n.datapoints,
Math.sin(r)*(t/2+i/4),Math.cos(r)*(t/2+i/4),n.xaxis,n.yaxis));s.lineWidth=t;s.strokeStyle=
n.color;f=ht(n.lines,n.color,0,d);f&&(s.fillStyle=f,e(n.datapoints,n.xaxis,n.yaxis));
t>0&&u(n.datapoints,0,0,n.xaxis,n.yaxis);s.restore()}function or(n){function i(n,
t,i,r,u,f,e,o){for(var h,c,a=n.points,v=n.pointsize,l=0;l<a.length;l+=v)(h=a[l],
c=a[l+1],h==null||h<f.min||h>f.max||c<e.min||c>e.max)||(s.beginPath(),h=f.p2c(h),
c=e.p2c(c)+r,o=="circle"?s.arc(h,c,t,0,u?Math.PI:Math.PI*2,!1):o(s,h,c,t,u),s.closePath(
),i&&(s.fillStyle=i,s.fill()),s.stroke())}var t;s.save();s.translate(h.left,h.top);
var f=n.points.lineWidth,e=n.shadowSize,r=n.points.radius,u=n.points.symbol;f>0&&
e>0&&(t=e/2,s.lineWidth=t,s.strokeStyle="rgba(0,0,0,0.1)",i(n.datapoints,r,null,
t+t/2,!0,n.xaxis,n.yaxis,u),s.strokeStyle="rgba(0,0,0,0.2)",i(n.datapoints,r,null,
t/2,!0,n.xaxis,n.yaxis,u));s.lineWidth=f;s.strokeStyle=n.color;i(n.datapoints,r,
ht(n.points,n.color),0,!1,n.xaxis,n.yaxis,u);s.restore()}function gt(n,t,i,r,u,f,
e,o,s,h,c,l){var v,p,a,y,w,b,k,d,g;(c?(d=b=k=!0,w=!1,v=i,p=n,y=t+r,a=t+u,p<v&&(g=
p,p=v,v=g,w=!0,b=!1)):(w=b=k=!0,d=!1,v=n+r,p=n+u,a=i,y=t,y<a&&(g=y,y=a,a=g,d=!0,
k=!1)),p<o.min||v>o.max||y<s.min||a>s.max)||(v<o.min&&(v=o.min,w=!1),p>o.max&&(p=
o.max,b=!1),a<s.min&&(a=s.min,d=!1),y>s.max&&(y=s.max,k=!1),v=o.p2c(v),a=s.p2c(a),
p=o.p2c(p),y=s.p2c(y),e&&(h.beginPath(),h.moveTo(v,a),h.lineTo(v,y),h.lineTo(p,y),
h.lineTo(p,a),h.fillStyle=e(a,y),h.fill()),l>0&&(w||b||k||d)&&(h.beginPath(),h.moveTo(
v,a+f),w?h.lineTo(v,y+f):h.moveTo(v,y+f),k?h.lineTo(p,y+f):h.moveTo(p,y+f),b?h.lineTo(
p,a+f):h.moveTo(p,a+f),d?h.lineTo(v,a+f):h.moveTo(v,a+f),h.stroke()))}function sr(
n){function i(t,i,r,u,f,e,o){for(var c=t.points,l=t.pointsize,h=0;h<c.length;h+=
l)c[h]!=null&&gt(c[h],c[h+1],c[h+2],i,r,u,f,e,o,s,n.bars.horizontal,n.bars.lineWidth)}
s.save();s.translate(h.left,h.top);s.lineWidth=n.bars.lineWidth;s.strokeStyle=n.
color;var t=n.bars.align=="left"?0:-n.bars.barWidth/2,r=n.bars.fill?function(t,i)
{return ht(n.bars,n.color,t,i)}:null;i(n.datapoints,t,t+n.bars.barWidth,0,r,n.xaxis,
n.yaxis);s.restore()}function ht(t,i,r,u){var e=t.fill,f;return e?t.fillColor?ei(
t.fillColor,r,u,i):(f=n.color.parse(i),f.a=typeof e=="number"?e:.4,f.normalize(),
f.toString()):null}function hr(){var s,p,v,t,w;if(r.find(".legend").remove(),o.legend.
show){var u=[],y=!1,b=o.legend.labelFormatter,l,e;for(s=0;s<c.length;++s)(l=c[s],
e=l.label,e)&&(s%o.legend.noColumns==0&&(y&&u.push("<\/tr>"),u.push("<tr>"),y=!0),
b&&(e=b(e,l)),u.push('<td class="legendColorBox"><div style="border:1px solid '+
o.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+
l.color+';overflow:hidden"><\/div><\/div><\/td><td class="legendLabel">'+e+"<\/td>"));
if(y&&u.push("<\/tr>"),u.length!=0)if(p='<table style="font-size:smaller;color:'+
o.grid.color+'">'+u.join("")+"<\/table>",o.legend.container!=null)n(o.legend.container).
html(p);else{var f="",a=o.legend.position,i=o.legend.margin;i[0]==null&&(i=[i,i]);
a.charAt(0)=="n"?f+="top:"+(i[1]+h.top)+"px;":a.charAt(0)=="s"&&(f+="bottom:"+(i[
1]+h.bottom)+"px;");a.charAt(1)=="e"?f+="right:"+(i[0]+h.right)+"px;":a.charAt(1)==
"w"&&(f+="left:"+(i[0]+h.left)+"px;");v=n('<div class="legend">'+p.replace('style="',
'style="position:absolute;'+f+";")+"<\/div>").appendTo(r);o.legend.backgroundOpacity!=
0&&(t=o.legend.backgroundColor,t==null&&(t=o.grid.backgroundColor,t=t&&typeof t==
"string"?n.color.parse(t):n.color.extract(v,"background-color"),t.a=1,t=t.toString(
)),w=v.children(),n('<div style="position:absolute;width:'+w.width()+"px;height:"+
w.height()+"px;"+f+"background-color:"+t+';"> <\/div>').prependTo(v).css("opacity",
o.legend.backgroundOpacity))}}}function cr(n,t,i){for(var p=o.grid.mouseActiveRadius,
it=p*p+1,a=null,r,e,s,k,tt,u=c.length-1;u>=0;--u)if(i(c[u])){var f=c[u],w=f.xaxis,
b=f.yaxis,h=f.datapoints.points,l=f.datapoints.pointsize,v=w.c2p(n),y=b.c2p(t),g=
p/w.scale,nt=p/b.scale;if(w.options.inverseTransform&&(g=Number.MAX_VALUE),b.options.
inverseTransform&&(nt=Number.MAX_VALUE),f.lines.show||f.points.show)for(r=0;r<h.
length;r+=l)if((e=h[r],s=h[r+1],e!=null)&&!(e-v>g)&&!(e-v<-g)&&!(s-y>nt)&&!(s-y<
-nt)){var rt=Math.abs(w.p2c(e)-n),ut=Math.abs(b.p2c(s)-t),ft=rt*rt+ut*ut;ft<it&&
(it=ft,a=[u,r/l])}if(f.bars.show&&!a)for(k=f.bars.align=="left"?0:-f.bars.barWidth/
2,tt=k+f.bars.barWidth,r=0;r<h.length;r+=l){var e=h[r],s=h[r+1],d=h[r+2];e!=null&&
(c[u].bars.horizontal?v<=Math.max(d,e)&&v>=Math.min(d,e)&&y>=s+k&&y<=s+tt:v>=e+k&&
v<=e+tt&&y>=Math.min(d,s)&&y<=Math.max(d,s))&&(a=[u,r/l])}}return a?(u=a[0],r=a[
1],l=c[u].datapoints.pointsize,{datapoint:c[u].datapoints.points.slice(r*l,(r+1)
*l),dataIndex:r,series:c[u],seriesIndex:u}):null}function ni(n){o.grid.hoverable&&
ct("plothover",n,function(n){return n.hoverable!=!1})}function ti(n){o.grid.hoverable&&
ct("plothover",n,function(){return!1})}function ii(n){ct("plotclick",n,function(
n){return n.clickable!=!1})}function ct(n,t,i){var e=b.offset(),l=t.pageX-e.left-
h.left,a=t.pageY-e.top-h.top,c=at({left:l,top:a}),u,s,f;if(c.pageX=t.pageX,c.pageY=
t.pageY,u=cr(l,a,i),u&&(u.pageX=parseInt(u.series.xaxis.p2c(u.datapoint[0])+e.left+
h.left),u.pageY=parseInt(u.series.yaxis.p2c(u.datapoint[1])+e.top+h.top)),o.grid.
autoHighlight){for(s=0;s<g.length;++s)f=g[s],f.auto!=n||u&&f.series==u.series&&f.
point[0]==u.datapoint[0]&&f.point[1]==u.datapoint[1]||ui(f.series,f.point);u&&ri(
u.series,u.datapoint,n)}r.trigger(n,[c,u])}function st(){ft||(ft=setTimeout(lr,30))}
function lr(){ft=null;a.save();a.clearRect(0,0,y,w);a.translate(h.left,h.top);for(
var n,t=0;t<g.length;++t)n=g[t],n.series.bars.show?vr(n.series,n.point):ar(n.series,
n.point);a.restore();tt(k.drawOverlay,[a])}function ri(n,t,i){var r,u;typeof n==
"number"&&(n=c[n]);typeof t=="number"&&(r=n.datapoints.pointsize,t=n.datapoints.
points.slice(r*t,r*(t+1)));u=fi(n,t);u==-1?(g.push({series:n,point:t,auto:i}),st(
)):i||(g[u].auto=!1)}function ui(n,t){n==null&&t==null&&(g=[],st());typeof n=="number"&&
(n=c[n]);typeof t=="number"&&(t=n.data[t]);var i=fi(n,t);i!=-1&&(g.splice(i,1),st(
))}function fi(n,t){for(var r,i=0;i<g.length;++i)if(r=g[i],r.series==n&&r.point[
0]==t[0]&&r.point[1]==t[1])return i;return-1}function ar(t,i){var r=i[0],u=i[1],
f=t.xaxis,e=t.yaxis,o;if(!(r<f.min)&&!(r>f.max)&&!(u<e.min)&&!(u>e.max)){o=t.points.
radius+t.points.lineWidth/2;a.lineWidth=o;a.strokeStyle=n.color.parse(t.color).scale(
"a",.5).toString();var s=1.5*o,r=f.p2c(r),u=e.p2c(u);a.beginPath();t.points.symbol==
"circle"?a.arc(r,u,s,0,2*Math.PI,!1):t.points.symbol(a,r,u,s,!1);a.closePath();a.
stroke()}}function vr(t,i){a.lineWidth=t.bars.lineWidth;a.strokeStyle=n.color.parse(
t.color).scale("a",.5).toString();var u=n.color.parse(t.color).scale("a",.5).toString(
),r=t.bars.align=="left"?0:-t.bars.barWidth/2;gt(i[0],i[1],i[2]||0,r,r+t.bars.barWidth,
0,function(){return u},t.xaxis,t.yaxis,a,t.bars.horizontal,t.bars.lineWidth)}function ei(
t,i,r,u){var h,e,c,f,o;if(typeof t=="string")return t;for(h=s.createLinearGradient(
0,r,0,i),e=0,c=t.colors.length;e<c;++e)f=t.colors[e],typeof f!="string"&&(o=n.color.
parse(u),f.brightness!=null&&(o=o.scale("rgb",f.brightness)),f.opacity!=null&&(o.
a*=f.opacity),f=o.toString()),h.addColorStop(e/(c-1),f);return h}var c=[],o={colors:
["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,
labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:
5,backgroundColor:null,backgroundOpacity:.85},xaxis:{show:null,position:"bottom",
mode:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,
max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:
null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,
tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:!1},
yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:
!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:
2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,
fillColor:null,align:"left",horizontal:!1},shadowSize:3},grid:{show:!0,aboveData:
!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,labelMargin:
5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",
markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:
10},hooks:{}},it=null,rt=null,b=null,s=null,a=null,v=[],p=[],h={left:0,right:0,top:
0,bottom:0},y=0,w=0,nt=0,d=0,k={processOptions:[],processRawData:[],processDatapoints:
[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},l=this,g,ft;l.
setData=lt;l.setupGrid=wt;l.draw=bt;l.getPlaceholder=function(){return r};l.getCanvas=
function(){return it};l.getPlotOffset=function(){return h};l.width=function(){return nt}
;l.height=function(){return d};l.offset=function(){var n=b.offset();return n.left+=
h.left,n.top+=h.top,n};l.getData=function(){return c};l.getAxes=function(){var t=
{};return n.each(v.concat(p),function(n,i){i&&(t[i.direction+(i.n!=1?i.n:"")+"axis"]=
i)}),t};l.getXAxes=function(){return v};l.getYAxes=function(){return p};l.c2p=at;
l.p2c=ci;l.getOptions=function(){return o};l.highlight=ri;l.unhighlight=ui;l.triggerRedrawOverlay=
st;l.pointOffset=function(n){return{left:parseInt(v[et(n,"x")-1].p2c(+n.x)+h.left),
top:parseInt(p[et(n,"y")-1].p2c(+n.y)+h.top)}};l.shutdown=pi;l.resize=function()
{yt();pt(it);pt(rt)};l.hooks=k;oi(l);si(f);vi();lt(u);wt();bt();yi();g=[];ft=null}
function t(n,t){return t*Math.floor(n/t)}n.plot=function(t,i,u){return new r(n(t),
i,u,n.plot.plugins)};n.plot.version="0.7";n.plot.plugins=[];n.plot.formatDate=function(
n,t,i){var f=function(n){return n=""+n,n.length==1?"0"+n:n},s=[],h=!1,e=!1,u=n.getUTCHours(
),c=u<12,o,r;for(i==null&&(i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep",
"Oct","Nov","Dec"]),t.search(/%p|%P/)!=-1&&(u>12?u=u-12:u==0&&(u=12)),o=0;o<t.length;
++o)if(r=t.charAt(o),h){switch(r){case"h":r=""+u;break;case"H":r=f(u);break;case"M":
r=f(n.getUTCMinutes());break;case"S":r=f(n.getUTCSeconds());break;case"d":r=""+n.
getUTCDate();break;case"m":r=""+(n.getUTCMonth()+1);break;case"y":r=""+n.getUTCFullYear(
);break;case"b":r=""+i[n.getUTCMonth()];break;case"p":r=c?"am":"pm";break;case"P":
r=c?"AM":"PM";break;case"0":r="";e=!0}r&&e&&(r=f(r),e=!1);s.push(r);e||(h=!1)}else
r=="%"?h=!0:s.push(r);return s.join("")}}(jQuery),function(n){function u(s){var c=
this,l,h=s.data||{};if(h.elem)c=s.dragTarget=h.elem,s.dragProxy=t.proxy||c,s.cursorOffsetX=
h.pageX-h.left,s.cursorOffsetY=h.pageY-h.top,s.offsetX=s.pageX-s.cursorOffsetX,s.
offsetY=s.pageY-s.cursorOffsetY;else if(t.dragging||h.which>0&&s.which!=h.which||
n(s.target).is(h.not))return;switch(s.type){case"mousedown":return n.extend(h,n(
c).offset(),{elem:c,target:s.target,pageX:s.pageX,pageY:s.pageY}),r.add(document,
"mousemove mouseup",u,h),o(c,!1),t.dragging=null,!1;case!t.dragging&&"mousemove":
if(e(s.pageX-h.pageX)+e(s.pageY-h.pageY)<h.distance)break;s.target=h.target;l=f(
s,"dragstart",c);l!==!1&&(t.dragging=c,t.proxy=s.dragProxy=n(l||c)[0]);case"mousemove":
if(t.dragging){if(l=f(s,"drag",c),i.drop&&(i.drop.allowed=l!==!1,i.drop.handler(
s)),l!==!1)break;s.type="mouseup"}case"mouseup":r.remove(document,"mousemove mouseup",
u);t.dragging&&(i.drop&&i.drop.handler(s),f(s,"dragend",c));o(c,!0);t.dragging=t.
proxy=h.elem=!1}return!0}function f(t,i,r){t.type=i;var u=n.event.handle.call(r,
t);return u===!1?!1:u||t.result}function e(n){return Math.pow(n,2)}function s(){
return t.dragging===!1}function o(n,t){n&&(n.unselectable=t?"off":"on",n.onselectstart=
function(){return t},n.style&&(n.style.MozUserSelect=t?"":"none"))}n.fn.drag=function(
n,t,i){return t&&this.bind("dragstart",n),i&&this.bind("dragend",i),n?this.bind(
"drag",t?t:n):this.trigger("drag")};var r=n.event,i=r.special,t=i.drag={not:":input",
distance:0,which:1,dragging:!1,setup:function(i){i=n.extend({distance:t.distance,
which:t.which,not:t.not},i||{});i.distance=e(i.distance);r.add(this,"mousedown",
u,i);this.attachEvent&&this.attachEvent("ondragstart",s)},teardown:function(){r.
remove(this,"mousedown",u);this===t.dragging&&(t.dragging=t.proxy=!1);o(this,!0);
this.detachEvent&&this.detachEvent("ondragstart",s)}};i.dragstart=i.dragend={setup:
function(){},teardown:function(){}}}(jQuery),function(n){function i(t){var r=[].
slice.call(arguments,1),i=0;return t=n.event.fix(t||window.event),t.type="mousewheel",
t.wheelDelta&&(i=t.wheelDelta/120),t.detail&&(i=-t.detail/3),r.unshift(t,i),n.event.
handle.apply(this,r)}var t=["DOMMouseScroll","mousewheel"];n.event.special.mousewheel=
{setup:function(){if(this.addEventListener)for(var n=t.length;n;)this.addEventListener(
t[--n],i,!1);else this.onmousewheel=i},teardown:function(){if(this.removeEventListener)
for(var n=t.length;n;)this.removeEventListener(t[--n],i,!1);else this.onmousewheel=
null}};n.fn.extend({mousewheel:function(n){return n?this.bind("mousewheel",n):this.
trigger("mousewheel")},unmousewheel:function(n){return this.unbind("mousewheel",
n)}})}(jQuery),function(n){function t(t){function f(n,i){var r=t.offset();r.left=
n.pageX-r.left;r.top=n.pageY-r.top;i?t.zoomOut({center:r}):t.zoom({center:r})}function e(
n,t){return f(n,t<0),!1}function s(n){if(n.which!=1)return!1;var i=t.getPlaceholder(
).css("cursor");i&&(o=i);t.getPlaceholder().css("cursor",t.getOptions().pan.cursor);
r=n.pageX;u=n.pageY}function h(n){var f=t.getOptions().pan.frameRate;!i&&f&&(i=setTimeout(
function(){t.pan({left:r-n.pageX,top:u-n.pageY});r=n.pageX;u=n.pageY;i=null},1e3/
f))}function c(n){i&&(clearTimeout(i),i=null);t.getPlaceholder().css("cursor",o);
t.pan({left:r-n.pageX,top:u-n.pageY})}function l(n,t){var i=n.getOptions();i.zoom.
interactive&&(t[i.zoom.trigger](f),t.mousewheel(e));i.pan.interactive&&(t.bind("dragstart",
{distance:10},s),t.bind("drag",h),t.bind("dragend",c))}function a(n,t){t.unbind(
n.getOptions().zoom.trigger,f);t.unbind("mousewheel",e);t.unbind("dragstart",s);
t.unbind("drag",h);t.unbind("dragend",c);i&&clearTimeout(i)}var o="default",r=0,
u=0,i=null;t.zoomOut=function(n){n||(n={});n.amount||(n.amount=t.getOptions().zoom.
amount);n.amount=1/n.amount;t.zoom(n)};t.zoom=function(i){i||(i={});var r=i.center,
u=i.amount||t.getOptions().zoom.amount,f=t.width(),e=t.height();r||(r={left:f/2,
top:e/2});var o=r.left/f,s=r.top/e,h={x:{min:r.left-o*f/u,max:r.left+(1-o)*f/u},
y:{min:r.top-s*e/u,max:r.top+(1-s)*e/u}};n.each(t.getAxes(),function(n,t){var f=
t.options,i=h[t.direction].min,r=h[t.direction].max,u=f.zoomRange,o,e;u!==!1&&((
i=t.c2p(i),r=t.c2p(r),i>r&&(o=i,i=r,r=o),e=r-i,u&&(u[0]!=null&&e<u[0]||u[1]!=null&&
e>u[1]))||(f.min=i,f.max=r))});t.setupGrid();t.draw();i.preventEvent||t.getPlaceholder(
).trigger("plotzoom",[t])};t.pan=function(i){var r={x:+i.left,y:+i.top};isNaN(r.
x)&&(r.x=0);isNaN(r.y)&&(r.y=0);n.each(t.getAxes(),function(n,t){var o=t.options,
f,e,u=r[t.direction],i;(f=t.c2p(t.p2c(t.min)+u),e=t.c2p(t.p2c(t.max)+u),i=o.panRange,
i!==!1)&&(i&&(i[0]!=null&&i[0]>f&&(u=i[0]-f,f+=u,e+=u),i[1]!=null&&i[1]<e&&(u=i[
1]-e,f+=u,e+=u)),o.min=f,o.max=e)});t.setupGrid();t.draw();i.preventEvent||t.getPlaceholder(
).trigger("plotpan",[t])};t.hooks.bindEvents.push(l);t.hooks.shutdown.push(a)}n.
plot.plugins.push({init:t,options:{xaxis:{zoomRange:null,panRange:null},zoom:{interactive:
!1,trigger:"dblclick",amount:1.5},pan:{interactive:!1,cursor:"move",frameRate:20}},
name:"navigate",version:"1.3"})}(jQuery)